(window.salesJsonp=window.salesJsonp||[]).push([[41],{oIqb:function(e,t,n){"use strict";n.r(t);var i=n("pbKT"),o=n.n(i),s=n("0iUn"),r=n("sLSF"),a=n("AT/M"),c=n("Tit0"),l=n("MI3g"),u=n("a7VT"),d=n("vYYK"),m=n("q1tI"),p=n("a6RD"),f=n.n(p),b=n("Tewe"),h=n("zGQK"),v=m.createElement;function w(e){var t=function(){if("undefined"===typeof Reflect||!o.a)return!1;if(o.a.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(o()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(u.a)(e);if(t){var s=Object(u.a)(this).constructor;n=o()(i,arguments,s)}else n=i.apply(this,arguments);return Object(l.a)(this,n)}}var O,g=f()((function(){return Promise.resolve().then(n.t.bind(null,"dhew",7))}),{loadableGenerated:{webpack:function(){return["dhew"]},modules:["@idp/duc/components/containers/SimpleModal"]}}),T=f()((function(){return Promise.resolve().then(n.t.bind(null,"r3d+",7))}),{loadableGenerated:{webpack:function(){return["r3d+"]},modules:["@idp/duc/components/atoms/Button"]}}),j=function(e){Object(c.a)(n,e);var t=w(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=this;return v(m.Fragment,null,v(g,{show:this.props.modalOpen,close:function(){return e.props.onModalClose()},focusFirstElement:!0,size:"medium",sizing:"normal",root:"rsg-root"},v("div",{className:"pad-md-lg pad-lg-md pad-t-xl-sm pad-l-lg-sm pad-r-lg-sm pad-b-lg-sm"},v("div",{className:"type-md font-medium mar-b-xxs color-ui-black"},v(b.IconSvg,{colorClass:"color-functional-dk-red mar-r-xxs",size:24,svgNodeStr:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path class="svg-base" d="M16 1a15 15 0 1015 15A15 15 0 0016 1zm1 22h-2v-2h2zm0-4h-2V9h2z"/></svg>'}),v("span",{style:{verticalAlign:"top"}},h.b.header)),v("div",{className:"type-sm mar-b-sm-lg mar-b-md-md mar-b-lg-sm"},h.b.bodyContent[this.props.modalState].info,v("br",null),h.b.bodyContent[this.props.modalState].cta),v(T,{buttonType:"button",kind:"primaryBlack",size:"small",fullWidth:!0,onClick:function(){return e.props.onModalClose()}},h.b.buttonText))))}}]),n}(m.Component);!function(e){e.VALID="VALID",e.WARN="WARN",e.EXPIRED="EXPIRED"}(O||(O={}));var S=n("n206"),y=n("U/e8"),x=n("Ra6Z"),A=n("IyUE"),U=m.createElement;function M(e){var t=function(){if("undefined"===typeof Reflect||!o.a)return!1;if(o.a.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(o()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(u.a)(e);if(t){var s=Object(u.a)(this).constructor;n=o()(i,arguments,s)}else n=i.apply(this,arguments);return Object(l.a)(this,n)}}var k=function(e){Object(c.a)(n,e);var t=M(n);function n(e){var i;return Object(s.a)(this,n),i=t.call(this,e),Object(d.a)(Object(a.a)(i),"warningTimer",void 0),Object(d.a)(Object(a.a)(i),"expireTimer",void 0),Object(d.a)(Object(a.a)(i),"fireSKA",void 0),Object(d.a)(Object(a.a)(i),"sessionKeepAlive",(function(){i.fireSKA=!0})),Object(d.a)(Object(a.a)(i),"warnUser",(function(){i.setState({modalOpen:!0,sessionState:O.WARN})})),Object(d.a)(Object(a.a)(i),"informUser",(function(){i.setState({modalOpen:!0,sessionState:O.EXPIRED})})),Object(d.a)(Object(a.a)(i),"userClosedModal",(function(){switch(i.state.sessionState){case O.EXPIRED:i.expiredSession();break;case O.WARN:i.extendSession();break;case O.VALID:}i.state.sessionState===O.EXPIRED&&i.extendSession(),i.setState({modalOpen:!1})})),Object(d.a)(Object(a.a)(i),"extendSession",(function(){x.keepSessionAlive?Object(S.c)(h.a.pingUrl):A.a.Info("Didn't fire KSA."),i.initTimeouts(),i.setState({sessionState:O.VALID})})),Object(d.a)(Object(a.a)(i),"expiredSession",(function(){-1!==location.href.indexOf("/buy/postpaid")?(window.sessionStorage.setItem("PLPUpgLogin","true"),window.location.reload()):["CRU"].includes(i.props.customerType)?location.href=location.protocol+"//"+location.host+h.a.expirationUrlCRU:location.href=location.protocol+"//"+location.host+h.a.expirationUrl})),i.state={modalOpen:!1,sessionState:O.VALID},i.userClosedModal=i.userClosedModal.bind(Object(a.a)(i)),i.warnUser=i.warnUser.bind(Object(a.a)(i)),i.informUser=i.informUser.bind(Object(a.a)(i)),i.sessionKeepAlive=i.sessionKeepAlive.bind(Object(a.a)(i)),i}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.initTimeouts(),["click","mousemove","mouseover","mousemove","touchmove","focus"].forEach((function(t){window.addEventListener(t,(function(){e.fireSKA&&(e.extendSession(),e.fireSKA=!1)}))}))}},{key:"initTimeouts",value:function(){window.clearTimeout(this.expireTimer),window.clearTimeout(this.warningTimer),Boolean(Object(y.c)(document.cookie,"tAuthNState"))?window.location.href.includes("testSession")?(this.warningTimer=window.setTimeout(this.warnUser,this.convertToMillis(h.a.timings.expireTest-h.a.timings.warningTest)),this.expireTimer=window.setTimeout(this.informUser,this.convertToMillis(h.a.timings.expireTest))):(this.warningTimer=window.setTimeout(this.warnUser,this.convertToMillis(h.a.timings.expire-h.a.timings.warning)),this.expireTimer=window.setTimeout(this.informUser,this.convertToMillis(h.a.timings.expire))):this.warningTimer=window.setTimeout(this.sessionKeepAlive,this.convertToMillis(h.a.timings.expire-h.a.timings.warning))}},{key:"render",value:function(){return U(m.Fragment,null,U(j,{modalState:this.state.sessionState,modalOpen:this.state.modalOpen,onModalClose:this.userClosedModal,customerType:this.props.customerType}))}},{key:"convertToMillis",value:function(e){return 1e3*e*60}}]),n}(m.Component);t.default=k}}]);