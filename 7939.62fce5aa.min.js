/*! For license information please see 7939.62fce5aa.min.js.LICENSE.txt */
(this["webpackChunkapplication"]=this["webpackChunkapplication"]||[]).push([[7939],{217939:(D,H)=>{var q,z;!function(H,q){true?D.exports=q():0}(window,(function(){return function(D){var H={};function n(q){if(H[q])return H[q].exports;var z=H[q]={i:q,l:!1,exports:{}};return D[q].call(z.exports,z,z.exports,n),z.l=!0,z.exports}return n.m=D,n.c=H,n.d=function(D,H,q){n.o(D,H)||Object.defineProperty(D,H,{enumerable:!0,get:q})},n.r=function(D){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(D,"__esModule",{value:!0})},n.t=function(D,H){if(1&H&&(D=n(D)),8&H)return D;if(4&H&&"object"==typeof D&&D&&D.__esModule)return D;var q=Object.create(null);if(n.r(q),Object.defineProperty(q,"default",{enumerable:!0,value:D}),2&H&&"string"!=typeof D)for(var z in D)n.d(q,z,function(H){return D[H]}.bind(null,z));return q},n.n=function(D){var H=D&&D.__esModule?function(){return D.default}:function(){return D};return n.d(H,"a",H),H},n.o=function(D,H){return Object.prototype.hasOwnProperty.call(D,H)},n.p="",n(n.s=27)}([function(D,H){D.exports=function(D){return D&&D.__esModule?D:{default:D}}},function(D,H,q){"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;H.default={PNTimeOperation:"PNTimeOperation",PNHistoryOperation:"PNHistoryOperation",PNDeleteMessagesOperation:"PNDeleteMessagesOperation",PNFetchMessagesOperation:"PNFetchMessagesOperation",PNMessageCounts:"PNMessageCountsOperation",PNSubscribeOperation:"PNSubscribeOperation",PNUnsubscribeOperation:"PNUnsubscribeOperation",PNPublishOperation:"PNPublishOperation",PNSignalOperation:"PNSignalOperation",PNAddMessageActionOperation:"PNAddActionOperation",PNRemoveMessageActionOperation:"PNRemoveMessageActionOperation",PNGetMessageActionsOperation:"PNGetMessageActionsOperation",PNCreateUserOperation:"PNCreateUserOperation",PNUpdateUserOperation:"PNUpdateUserOperation",PNDeleteUserOperation:"PNDeleteUserOperation",PNGetUserOperation:"PNGetUsersOperation",PNGetUsersOperation:"PNGetUsersOperation",PNCreateSpaceOperation:"PNCreateSpaceOperation",PNUpdateSpaceOperation:"PNUpdateSpaceOperation",PNDeleteSpaceOperation:"PNDeleteSpaceOperation",PNGetSpaceOperation:"PNGetSpacesOperation",PNGetSpacesOperation:"PNGetSpacesOperation",PNGetMembersOperation:"PNGetMembersOperation",PNUpdateMembersOperation:"PNUpdateMembersOperation",PNGetMembershipsOperation:"PNGetMembershipsOperation",PNUpdateMembershipsOperation:"PNUpdateMembershipsOperation",PNListFilesOperation:"PNListFilesOperation",PNGenerateUploadUrlOperation:"PNGenerateUploadUrlOperation",PNPublishFileOperation:"PNPublishFileOperation",PNGetFileUrlOperation:"PNGetFileUrlOperation",PNDownloadFileOperation:"PNDownloadFileOperation",PNGetAllUUIDMetadataOperation:"PNGetAllUUIDMetadataOperation",PNGetUUIDMetadataOperation:"PNGetUUIDMetadataOperation",PNSetUUIDMetadataOperation:"PNSetUUIDMetadataOperation",PNRemoveUUIDMetadataOperation:"PNRemoveUUIDMetadataOperation",PNGetAllChannelMetadataOperation:"PNGetAllChannelMetadataOperation",PNGetChannelMetadataOperation:"PNGetChannelMetadataOperation",PNSetChannelMetadataOperation:"PNSetChannelMetadataOperation",PNRemoveChannelMetadataOperation:"PNRemoveChannelMetadataOperation",PNSetMembersOperation:"PNSetMembersOperation",PNSetMembershipsOperation:"PNSetMembershipsOperation",PNPushNotificationEnabledChannelsOperation:"PNPushNotificationEnabledChannelsOperation",PNRemoveAllPushNotificationsOperation:"PNRemoveAllPushNotificationsOperation",PNWhereNowOperation:"PNWhereNowOperation",PNSetStateOperation:"PNSetStateOperation",PNHereNowOperation:"PNHereNowOperation",PNGetStateOperation:"PNGetStateOperation",PNHeartbeatOperation:"PNHeartbeatOperation",PNChannelGroupsOperation:"PNChannelGroupsOperation",PNRemoveGroupOperation:"PNRemoveGroupOperation",PNChannelsForGroupOperation:"PNChannelsForGroupOperation",PNAddChannelsToGroupOperation:"PNAddChannelsToGroupOperation",PNRemoveChannelsFromGroupOperation:"PNRemoveChannelsFromGroupOperation",PNAccessManagerGrant:"PNAccessManagerGrant",PNAccessManagerGrantToken:"PNAccessManagerGrantToken",PNAccessManagerAudit:"PNAccessManagerAudit"},D.exports=H.default},function(D,H,q){"use strict";D.exports={}},function(D,H,q){"use strict";(function(H){function n(D){return encodeURIComponent(D).replace(/[!~*'()]/g,(function(D){return"%".concat(D.charCodeAt(0).toString(16).toUpperCase())}))}function r(D){return function(D){var H=[];return Object.keys(D).forEach((function(D){return H.push(D)})),H}(D).sort()}var q="The Objects v1 API has been deprecated.\nYou can learn more about Objects v2 API at https://www.pubnub.com/docs/web-javascript/api-reference-objects.\nIf you have questions about the Objects v2 API or require additional help with migrating to the new data model, please contact PubNub Support at support@pubnub.com.";D.exports={signPamFromParams:function(D){return r(D).map((function(H){return"".concat(H,"=").concat(n(D[H]))})).join("&")},endsWith:function(D,H){return-1!==D.indexOf(H,this.length-H.length)},createPromise:function(){var D,H;return{promise:new Promise((function(q,z){D=q,H=z})),reject:H,fulfill:D}},encodeString:n,deprecated:function(D){return function(){var z,Y;void 0!==H&&("test"!==(null===(z=H)||void 0===z||null===(Y=z.env)||void 0===Y?void 0:"production")&&console.warn(q));return D.apply(void 0,arguments)}}}}).call(this,q(39))},function(D,H){D.exports=function(D,H,q){return H in D?Object.defineProperty(D,H,{value:q,enumerable:!0,configurable:!0,writable:!0}):D[H]=q,D}},function(D,H){D.exports=function(D,H){if(!(D instanceof H))throw new TypeError("Cannot call a class as a function")}},function(D,H){function n(D,H){for(var q=0;q<H.length;q++){var z=H[q];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(D,z.key,z)}}D.exports=function(D,H,q){return H&&n(D.prototype,H),q&&n(D,q),D}},function(D,H){function n(H){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?D.exports=n=function(D){return typeof D}:D.exports=n=function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},n(H)}D.exports=n},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var Y=z(q(5)),V=z(q(6)),W=z(q(4)),J=z(q(17)),X=(q(2),function(){function e(D){var H,q,z=D.setup,V=D.db;(0,Y.default)(this,e),(0,W.default)(this,"_db",void 0),(0,W.default)(this,"subscribeKey",void 0),(0,W.default)(this,"publishKey",void 0),(0,W.default)(this,"secretKey",void 0),(0,W.default)(this,"cipherKey",void 0),(0,W.default)(this,"authKey",void 0),(0,W.default)(this,"UUID",void 0),(0,W.default)(this,"proxy",void 0),(0,W.default)(this,"instanceId",void 0),(0,W.default)(this,"sdkName",void 0),(0,W.default)(this,"sdkFamily",void 0),(0,W.default)(this,"partnerId",void 0),(0,W.default)(this,"filterExpression",void 0),(0,W.default)(this,"suppressLeaveEvents",void 0),(0,W.default)(this,"secure",void 0),(0,W.default)(this,"origin",void 0),(0,W.default)(this,"logVerbosity",void 0),(0,W.default)(this,"useInstanceId",void 0),(0,W.default)(this,"useRequestId",void 0),(0,W.default)(this,"keepAlive",void 0),(0,W.default)(this,"keepAliveSettings",void 0),(0,W.default)(this,"autoNetworkDetection",void 0),(0,W.default)(this,"announceSuccessfulHeartbeats",void 0),(0,W.default)(this,"announceFailedHeartbeats",void 0),(0,W.default)(this,"_presenceTimeout",void 0),(0,W.default)(this,"_heartbeatInterval",void 0),(0,W.default)(this,"_subscribeRequestTimeout",void 0),(0,W.default)(this,"_transactionalRequestTimeout",void 0),(0,W.default)(this,"_useSendBeacon",void 0),(0,W.default)(this,"_PNSDKSuffix",void 0),(0,W.default)(this,"requestMessageCountThreshold",void 0),(0,W.default)(this,"restore",void 0),(0,W.default)(this,"dedupeOnSubscribe",void 0),(0,W.default)(this,"maximumCacheSize",void 0),(0,W.default)(this,"customEncrypt",void 0),(0,W.default)(this,"customDecrypt",void 0),(0,W.default)(this,"fileUploadPublishRetryLimit",void 0),(0,W.default)(this,"useRandomIVs",void 0),this._PNSDKSuffix={},this._db=V,this.instanceId="pn-".concat(J.default.createUUID()),this.secretKey=z.secretKey||z.secret_key,this.subscribeKey=z.subscribeKey||z.subscribe_key,this.publishKey=z.publishKey||z.publish_key,this.sdkName=z.sdkName,this.sdkFamily=z.sdkFamily,this.partnerId=z.partnerId,this.setAuthKey(z.authKey),this.setCipherKey(z.cipherKey),this.setFilterExpression(z.filterExpression),this.origin=z.origin||"ps.pndsn.com",this.secure=z.ssl||!1,this.restore=z.restore||!1,this.proxy=z.proxy,this.keepAlive=z.keepAlive,this.keepAliveSettings=z.keepAliveSettings,this.autoNetworkDetection=z.autoNetworkDetection||!1,this.dedupeOnSubscribe=z.dedupeOnSubscribe||!1,this.maximumCacheSize=z.maximumCacheSize||100,this.customEncrypt=z.customEncrypt,this.customDecrypt=z.customDecrypt,this.fileUploadPublishRetryLimit=null!==(H=z.fileUploadPublishRetryLimit)&&void 0!==H?H:5,this.useRandomIVs=null!==(q=z.useRandomIVs)&&void 0!==q&&q,"undefined"!=typeof location&&"https:"===location.protocol&&(this.secure=!0),this.logVerbosity=z.logVerbosity||!1,this.suppressLeaveEvents=z.suppressLeaveEvents||!1,this.announceFailedHeartbeats=z.announceFailedHeartbeats||!0,this.announceSuccessfulHeartbeats=z.announceSuccessfulHeartbeats||!1,this.useInstanceId=z.useInstanceId||!1,this.useRequestId=z.useRequestId||!1,this.requestMessageCountThreshold=z.requestMessageCountThreshold,this.setTransactionTimeout(z.transactionalRequestTimeout||15e3),this.setSubscribeTimeout(z.subscribeRequestTimeout||31e4),this.setSendBeaconConfig(z.useSendBeacon||!0),z.presenceTimeout?this.setPresenceTimeout(z.presenceTimeout):this._presenceTimeout=300,null!=z.heartbeatInterval&&this.setHeartbeatInterval(z.heartbeatInterval),this.setUUID(this._decideUUID(z.uuid))}return(0,V.default)(e,[{key:"getAuthKey",value:function(){return this.authKey}},{key:"setAuthKey",value:function(D){return this.authKey=D,this}},{key:"setCipherKey",value:function(D){return this.cipherKey=D,this}},{key:"getUUID",value:function(){return this.UUID}},{key:"setUUID",value:function(D){return this._db&&this._db.set&&this._db.set("".concat(this.subscribeKey,"uuid"),D),this.UUID=D,this}},{key:"getFilterExpression",value:function(){return this.filterExpression}},{key:"setFilterExpression",value:function(D){return this.filterExpression=D,this}},{key:"getPresenceTimeout",value:function(){return this._presenceTimeout}},{key:"setPresenceTimeout",value:function(D){return D>=20?this._presenceTimeout=D:(this._presenceTimeout=20,console.log("WARNING: Presence timeout is less than the minimum. Using minimum value: ",this._presenceTimeout)),this.setHeartbeatInterval(this._presenceTimeout/2-1),this}},{key:"setProxy",value:function(D){this.proxy=D}},{key:"getHeartbeatInterval",value:function(){return this._heartbeatInterval}},{key:"setHeartbeatInterval",value:function(D){return this._heartbeatInterval=D,this}},{key:"getSubscribeTimeout",value:function(){return this._subscribeRequestTimeout}},{key:"setSubscribeTimeout",value:function(D){return this._subscribeRequestTimeout=D,this}},{key:"getTransactionTimeout",value:function(){return this._transactionalRequestTimeout}},{key:"setTransactionTimeout",value:function(D){return this._transactionalRequestTimeout=D,this}},{key:"isSendBeaconEnabled",value:function(){return this._useSendBeacon}},{key:"setSendBeaconConfig",value:function(D){return this._useSendBeacon=D,this}},{key:"getVersion",value:function(){return"4.29.11"}},{key:"_addPnsdkSuffix",value:function(D,H){this._PNSDKSuffix[D]=H}},{key:"_getPnsdkSuffix",value:function(D){var H=this;return Object.keys(this._PNSDKSuffix).reduce((function(q,z){return q+D+H._PNSDKSuffix[z]}),"")}},{key:"_decideUUID",value:function(D){return D||(this._db&&this._db.get&&this._db.get("".concat(this.subscribeKey,"uuid"))?this._db.get("".concat(this.subscribeKey,"uuid")):"pn-".concat(J.default.createUUID()))}}]),e}());H.default=X,D.exports=H.default},function(D,H,q){var z=q(77),Y=q(78),V=q(79),W=q(81);D.exports=function(D,H){return z(D)||Y(D,H)||V(D,H)||W()}},function(D,H,q){"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;H.default={PNNetworkUpCategory:"PNNetworkUpCategory",PNNetworkDownCategory:"PNNetworkDownCategory",PNNetworkIssuesCategory:"PNNetworkIssuesCategory",PNTimeoutCategory:"PNTimeoutCategory",PNBadRequestCategory:"PNBadRequestCategory",PNAccessDeniedCategory:"PNAccessDeniedCategory",PNUnknownCategory:"PNUnknownCategory",PNReconnectedCategory:"PNReconnectedCategory",PNConnectedCategory:"PNConnectedCategory",PNRequestMessageCountExceededCategory:"PNRequestMessageCountExceededCategory"},D.exports=H.default},function(D,H,q){D.exports=q(72)},function(D,H){function n(D,H,q,z,Y,V,W){try{var J=D[V](W),X=J.value}catch(D){return void q(D)}J.done?H(X):Promise.resolve(X).then(z,Y)}D.exports=function(D){return function(){var H=this,q=arguments;return new Promise((function(z,Y){var V=D.apply(H,q);function s(D){n(V,z,Y,s,u,"next",D)}function u(D){n(V,z,Y,s,u,"throw",D)}s(void 0)}))}}},function(D,H){function n(H){return D.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(D){return D.__proto__||Object.getPrototypeOf(D)},n(H)}D.exports=n},function(D,H,q){var z=q(15);D.exports=function(D,H){if("function"!=typeof H&&null!==H)throw new TypeError("Super expression must either be null or a function");D.prototype=Object.create(H&&H.prototype,{constructor:{value:D,writable:!0,configurable:!0}}),H&&z(D,H)}},function(D,H){function n(H,q){return D.exports=n=Object.setPrototypeOf||function(D,H){return D.__proto__=H,D},n(H,q)}D.exports=n},function(D,H,q){var z=q(7),Y=q(19);D.exports=function(D,H){return!H||"object"!==z(H)&&"function"!=typeof H?Y(D):H}},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var Y=z(q(31)),V={createUUID:function(){return Y.default.uuid?Y.default.uuid():(0,Y.default)()}};H.default=V,D.exports=H.default},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.createValidationError=b,H.generatePNSDK=k,H.signRequest=w,H.default=function(D,H){var q=D.networking,z=D.config,Y=D.telemetryManager,V=Q.default.createUUID(),W=null,J=null,X={};H.getOperation()===ee.default.PNTimeOperation||H.getOperation()===ee.default.PNChannelGroupsOperation?W=arguments.length<=2?void 0:arguments[2]:(X=arguments.length<=2?void 0:arguments[2],W=arguments.length<=3?void 0:arguments[3]);"undefined"==typeof Promise||W||(J=Z.default.createPromise());var $=H.validateParams(D,X);if($)return W?W(b($)):J?(J.reject(new ne("Validation failed, check status for details",b($))),J.promise):void 0;var re,ie=H.prepareParams(D,X),oe=m(H,D,X),ae={url:oe,operation:H.getOperation(),timeout:H.getRequestTimeout(D),headers:H.getRequestHeaders?H.getRequestHeaders():{},ignoreBody:"function"==typeof H.ignoreBody&&H.ignoreBody(D),forceBuffered:"function"==typeof H.forceBuffered?H.forceBuffered(D,X):null};ie.uuid=z.UUID,ie.pnsdk=k(z);var se=Y.operationsLatencyForRequest();Object.keys(se).length&&(ie=g(g({},ie),se));z.useInstanceId&&(ie.instanceid=z.instanceId);z.useRequestId&&(ie.requestid=V);if(H.isAuthSupported()){var ue=_(H,D,X),ce=ue||z.getAuthKey();ce&&(ie.auth=ce)}z.secretKey&&w(D,oe,ie,X,H);var E=function(q,z){var $;if(q.error)W?W(q):J&&J.reject(new ne("PubNub call failed, check status for details",q));else{Y.stopLatencyMeasure(H.getOperation(),V);var Q=H.handleResponse(D,z,X);"function"!=typeof(null===($=Q)||void 0===$?void 0:$.then)&&(Q=Promise.resolve(Q)),Q.then((function(D){W?W(q,D):J&&J.fulfill(D)})).catch((function(D){if(W){var q=D;H.getOperation()===ee.default.PNSubscribeOperation&&(q={statusCode:400,error:!0,operation:H.getOperation(),errorData:D,category:te.default.PNUnknownCategory}),W(q,null)}else J&&J.reject(new ne("PubNub call failed, check status for details",D))}))}};if(Y.startLatencyMeasure(H.getOperation(),V),"POST"===P(D,H,X)){var le=H.postPayload(D,X);re=q.POST(ie,le,ae,E)}else if("PATCH"===P(D,H,X)){var fe=H.patchPayload(D,X);re=q.PATCH(ie,fe,ae,E)}else re="DELETE"===P(D,H,X)?q.DELETE(ie,ae,E):"GETFILE"===P(D,H,X)?q.GETFILE(ie,ae,E):q.GET(ie,ae,E);if(H.getOperation()===ee.default.PNSubscribeOperation)return re;if(J)return J.promise},H.PubNubError=void 0;var Y=z(q(4)),V=z(q(5)),W=z(q(14)),J=z(q(16)),X=z(q(13)),$=z(q(45)),Q=z(q(17)),Z=(q(2),z(q(3))),ee=(z(q(8)),z(q(1))),te=z(q(10));function h(D,H){var q=Object.keys(D);if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(D);H&&(z=z.filter((function(H){return Object.getOwnPropertyDescriptor(D,H).enumerable}))),q.push.apply(q,z)}return q}function g(D){for(var H=1;H<arguments.length;H++){var q=null!=arguments[H]?arguments[H]:{};H%2?h(Object(q),!0).forEach((function(H){(0,Y.default)(D,H,q[H])})):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(q)):h(Object(q)).forEach((function(H){Object.defineProperty(D,H,Object.getOwnPropertyDescriptor(q,H))}))}return D}function v(D){var H=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(D){return!1}}();return function(){var q,z=(0,X.default)(D);if(H){var Y=(0,X.default)(this).constructor;q=Reflect.construct(z,arguments,Y)}else q=z.apply(this,arguments);return(0,J.default)(this,q)}}var ne=function(D){(0,W.default)(n,D);var H=v(n);function n(D,q){var z;return(0,V.default)(this,n),(z=H.call(this,D)).name=z.constructor.name,z.status=q,z.message=D,z}return n}((0,$.default)(Error));function b(D){return(H={message:D}).type="validationError",H.error=!0,H;var H}function m(D,H,q){return D.usePost&&D.usePost(H,q)?D.postURL(H,q):D.usePatch&&D.usePatch(H,q)?D.patchURL(H,q):D.useGetFile&&D.useGetFile(H,q)?D.getFileURL(H,q):D.getURL(H,q)}function _(D,H,q){var z;return D.getAuthToken&&(z=D.getAuthToken(H,q)),z}function k(D){if(D.sdkName)return D.sdkName;var H="PubNub-JS-".concat(D.sdkFamily);D.partnerId&&(H+="-".concat(D.partnerId)),H+="/".concat(D.getVersion());var q=D._getPnsdkSuffix(" ");return q.length>0&&(H+=q),H}function P(D,H,q){return H.usePost&&H.usePost(D,q)?"POST":H.usePatch&&H.usePatch(D,q)?"PATCH":H.useDelete&&H.useDelete(D,q)?"DELETE":H.useGetFile&&H.useGetFile(D,q)?"GETFILE":"GET"}function w(D,H,q,z,Y){var V=D.config,W=D.crypto,J=P(D,Y,z);q.timestamp=Math.floor((new Date).getTime()/1e3),"PNPublishOperation"===Y.getOperation()&&Y.usePost&&Y.usePost(D,z)&&(J="GET"),"GETFILE"===J&&(J="GET");var X="".concat(J,"\n").concat(V.publishKey,"\n").concat(H,"\n").concat(Z.default.signPamFromParams(q),"\n");if("POST"===J){var $=Y.postPayload(D,z);X+="string"==typeof $?$:JSON.stringify($)}else if("PATCH"===J){var Q=Y.patchPayload(D,z);X+="string"==typeof Q?Q:JSON.stringify(Q)}var ee="v2.".concat(W.HMACSHA256(X));ee=(ee=(ee=ee.replace(/\+/g,"-")).replace(/\//g,"_")).replace(/=+$/,""),q.signature=ee}H.PubNubError=ne},function(D,H){D.exports=function(D){if(void 0===D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D}},function(D,H,q){"use strict";(function(z){var Y=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var V=Y(q(5)),W=Y(q(6)),J=Y(q(4)),X=(Y(q(8)),Y(q(22)));function c(D){var H,q=[];for(H=0;H<D.length;H+=1)q[H/4|0]|=D[H]<<24-8*H;return X.default.lib.WordArray.create(q,D.length)}var $=function(){function e(D){var H=D.config;(0,V.default)(this,e),(0,J.default)(this,"_config",void 0),(0,J.default)(this,"_iv",void 0),(0,J.default)(this,"_allowedKeyEncodings",void 0),(0,J.default)(this,"_allowedKeyLengths",void 0),(0,J.default)(this,"_allowedModes",void 0),(0,J.default)(this,"_defaultOptions",void 0),this._config=H,this._iv="0123456789012345",this._allowedKeyEncodings=["hex","utf8","base64","binary"],this._allowedKeyLengths=[128,256],this._allowedModes=["ecb","cbc"],this._defaultOptions={encryptKey:!0,keyEncoding:"utf8",keyLength:256,mode:"cbc"}}return(0,W.default)(e,[{key:"HMACSHA256",value:function(D){return X.default.HmacSHA256(D,this._config.secretKey).toString(X.default.enc.Base64)}},{key:"SHA256",value:function(D){return X.default.SHA256(D).toString(X.default.enc.Hex)}},{key:"_parseOptions",value:function(D){var H=D||{};return H.hasOwnProperty("encryptKey")||(H.encryptKey=this._defaultOptions.encryptKey),H.hasOwnProperty("keyEncoding")||(H.keyEncoding=this._defaultOptions.keyEncoding),H.hasOwnProperty("keyLength")||(H.keyLength=this._defaultOptions.keyLength),H.hasOwnProperty("mode")||(H.mode=this._defaultOptions.mode),-1===this._allowedKeyEncodings.indexOf(H.keyEncoding.toLowerCase())&&(H.keyEncoding=this._defaultOptions.keyEncoding),-1===this._allowedKeyLengths.indexOf(parseInt(H.keyLength,10))&&(H.keyLength=this._defaultOptions.keyLength),-1===this._allowedModes.indexOf(H.mode.toLowerCase())&&(H.mode=this._defaultOptions.mode),H}},{key:"_decodeKey",value:function(D,H){return"base64"===H.keyEncoding?X.default.enc.Base64.parse(D):"hex"===H.keyEncoding?X.default.enc.Hex.parse(D):D}},{key:"_getPaddedKey",value:function(D,H){return D=this._decodeKey(D,H),H.encryptKey?X.default.enc.Utf8.parse(this.SHA256(D).slice(0,32)):D}},{key:"_getMode",value:function(D){return"ecb"===D.mode?X.default.mode.ECB:X.default.mode.CBC}},{key:"_getIV",value:function(D){return"cbc"===D.mode?X.default.enc.Utf8.parse(this._iv):null}},{key:"_getRandomIV",value:function(){return X.default.lib.WordArray.random(16)}},{key:"encrypt",value:function(D,H,q){return this._config.customEncrypt?this._config.customEncrypt(D):this.pnEncrypt(D,H,q)}},{key:"decrypt",value:function(D,H,q){return this._config.customDecrypt?this._config.customDecrypt(D):this.pnDecrypt(D,H,q)}},{key:"pnEncrypt",value:function(D,H,q){if(!H&&!this._config.cipherKey)return D;q=this._parseOptions(q);var z=this._getMode(q),Y=this._getPaddedKey(H||this._config.cipherKey,q);if(this._config.useRandomIVs){var V=this._getRandomIV(),W=X.default.AES.encrypt(D,Y,{iv:V,mode:z}).ciphertext;return V.clone().concat(W.clone()).toString(X.default.enc.Base64)}var J=this._getIV(q);return X.default.AES.encrypt(D,Y,{iv:J,mode:z}).ciphertext.toString(X.default.enc.Base64)||D}},{key:"pnDecrypt",value:function(D,H,q){if(!H&&!this._config.cipherKey)return D;q=this._parseOptions(q);var Y=this._getMode(q),V=this._getPaddedKey(H||this._config.cipherKey,q);if(this._config.useRandomIVs){var W=z.from(D,"base64"),J=c(W.slice(0,16)),$=c(W.slice(16));try{var Q=X.default.AES.decrypt({ciphertext:$},V,{iv:J,mode:Y}).toString(X.default.enc.Utf8);return JSON.parse(Q)}catch(D){return null}}else{var Z=this._getIV(q);try{var ee=X.default.enc.Base64.parse(D),te=X.default.AES.decrypt({ciphertext:ee},V,{iv:Z,mode:Y}).toString(X.default.enc.Utf8);return JSON.parse(te)}catch(D){return null}}}}]),e}();H.default=$,D.exports=H.default}).call(this,q(21).Buffer)},function(D,H,q){"use strict";(function(D){var z=q(33),Y=q(34),V=q(35);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(D,H){if(a()<H)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(D=new Uint8Array(H)).__proto__=u.prototype:(null===D&&(D=new u(H)),D.length=H),D}function u(D,H,q){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(D,H,q);if("number"==typeof D){if("string"==typeof H)throw new Error("If encoding is specified then the first argument must be a string");return f(this,D)}return c(this,D,H,q)}function c(D,H,q,z){if("number"==typeof H)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&H instanceof ArrayBuffer?function(D,H,q,z){if(H.byteLength,q<0||H.byteLength<q)throw new RangeError("'offset' is out of bounds");if(H.byteLength<q+(z||0))throw new RangeError("'length' is out of bounds");H=void 0===q&&void 0===z?new Uint8Array(H):void 0===z?new Uint8Array(H,q):new Uint8Array(H,q,z);u.TYPED_ARRAY_SUPPORT?(D=H).__proto__=u.prototype:D=d(D,H);return D}(D,H,q,z):"string"==typeof H?function(D,H,q){"string"==typeof q&&""!==q||(q="utf8");if(!u.isEncoding(q))throw new TypeError('"encoding" must be a valid string encoding');var z=0|h(H,q),Y=(D=s(D,z)).write(H,q);Y!==z&&(D=D.slice(0,Y));return D}(D,H,q):function(D,H){if(u.isBuffer(H)){var q=0|p(H.length);return 0===(D=s(D,q)).length||H.copy(D,0,0,q),D}if(H){if("undefined"!=typeof ArrayBuffer&&H.buffer instanceof ArrayBuffer||"length"in H)return"number"!=typeof H.length||(z=H.length)!=z?s(D,0):d(D,H);if("Buffer"===H.type&&V(H.data))return d(D,H.data)}var z;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(D,H)}function l(D){if("number"!=typeof D)throw new TypeError('"size" argument must be a number');if(D<0)throw new RangeError('"size" argument must not be negative')}function f(D,H){if(l(H),D=s(D,H<0?0:0|p(H)),!u.TYPED_ARRAY_SUPPORT)for(var q=0;q<H;++q)D[q]=0;return D}function d(D,H){var q=H.length<0?0:0|p(H.length);D=s(D,q);for(var z=0;z<q;z+=1)D[z]=255&H[z];return D}function p(D){if(D>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|D}function h(D,H){if(u.isBuffer(D))return D.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(D)||D instanceof ArrayBuffer))return D.byteLength;"string"!=typeof D&&(D=""+D);var q=D.length;if(0===q)return 0;for(var z=!1;;)switch(H){case"ascii":case"latin1":case"binary":return q;case"utf8":case"utf-8":case void 0:return F(D).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*q;case"hex":return q>>>1;case"base64":return B(D).length;default:if(z)return F(D).length;H=(""+H).toLowerCase(),z=!0}}function g(D,H,q){var z=!1;if((void 0===H||H<0)&&(H=0),H>this.length)return"";if((void 0===q||q>this.length)&&(q=this.length),q<=0)return"";if((q>>>=0)<=(H>>>=0))return"";for(D||(D="utf8");;)switch(D){case"hex":return E(this,H,q);case"utf8":case"utf-8":return S(this,H,q);case"ascii":return A(this,H,q);case"latin1":case"binary":return M(this,H,q);case"base64":return T(this,H,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,H,q);default:if(z)throw new TypeError("Unknown encoding: "+D);D=(D+"").toLowerCase(),z=!0}}function v(D,H,q){var z=D[H];D[H]=D[q],D[q]=z}function y(D,H,q,z,Y){if(0===D.length)return-1;if("string"==typeof q?(z=q,q=0):q>2147483647?q=2147483647:q<-2147483648&&(q=-2147483648),q=+q,isNaN(q)&&(q=Y?0:D.length-1),q<0&&(q=D.length+q),q>=D.length){if(Y)return-1;q=D.length-1}else if(q<0){if(!Y)return-1;q=0}if("string"==typeof H&&(H=u.from(H,z)),u.isBuffer(H))return 0===H.length?-1:b(D,H,q,z,Y);if("number"==typeof H)return H&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?Y?Uint8Array.prototype.indexOf.call(D,H,q):Uint8Array.prototype.lastIndexOf.call(D,H,q):b(D,[H],q,z,Y);throw new TypeError("val must be string, number or Buffer")}function b(D,H,q,z,Y){var V,W=1,J=D.length,X=H.length;if(void 0!==z&&("ucs2"===(z=String(z).toLowerCase())||"ucs-2"===z||"utf16le"===z||"utf-16le"===z)){if(D.length<2||H.length<2)return-1;W=2,J/=2,X/=2,q/=2}function c(D,H){return 1===W?D[H]:D.readUInt16BE(H*W)}if(Y){var $=-1;for(V=q;V<J;V++)if(c(D,V)===c(H,-1===$?0:V-$)){if(-1===$&&($=V),V-$+1===X)return $*W}else-1!==$&&(V-=V-$),$=-1}else for(q+X>J&&(q=J-X),V=q;V>=0;V--){for(var Q=!0,Z=0;Z<X;Z++)if(c(D,V+Z)!==c(H,Z)){Q=!1;break}if(Q)return V}return-1}function m(D,H,q,z){q=Number(q)||0;var Y=D.length-q;z?(z=Number(z))>Y&&(z=Y):z=Y;var V=H.length;if(V%2!=0)throw new TypeError("Invalid hex string");z>V/2&&(z=V/2);for(var W=0;W<z;++W){var J=parseInt(H.substr(2*W,2),16);if(isNaN(J))return W;D[q+W]=J}return W}function _(D,H,q,z){return G(F(H,D.length-q),D,q,z)}function k(D,H,q,z){return G(function(D){for(var H=[],q=0;q<D.length;++q)H.push(255&D.charCodeAt(q));return H}(H),D,q,z)}function P(D,H,q,z){return k(D,H,q,z)}function w(D,H,q,z){return G(B(H),D,q,z)}function O(D,H,q,z){return G(function(D,H){for(var q,z,Y,V=[],W=0;W<D.length&&!((H-=2)<0);++W)q=D.charCodeAt(W),z=q>>8,Y=q%256,V.push(Y),V.push(z);return V}(H,D.length-q),D,q,z)}function T(D,H,q){return 0===H&&q===D.length?z.fromByteArray(D):z.fromByteArray(D.slice(H,q))}function S(D,H,q){q=Math.min(D.length,q);for(var z=[],Y=H;Y<q;){var V,W,J,X,$=D[Y],Q=null,Z=$>239?4:$>223?3:$>191?2:1;if(Y+Z<=q)switch(Z){case 1:$<128&&(Q=$);break;case 2:128==(192&(V=D[Y+1]))&&(X=(31&$)<<6|63&V)>127&&(Q=X);break;case 3:V=D[Y+1],W=D[Y+2],128==(192&V)&&128==(192&W)&&(X=(15&$)<<12|(63&V)<<6|63&W)>2047&&(X<55296||X>57343)&&(Q=X);break;case 4:V=D[Y+1],W=D[Y+2],J=D[Y+3],128==(192&V)&&128==(192&W)&&128==(192&J)&&(X=(15&$)<<18|(63&V)<<12|(63&W)<<6|63&J)>65535&&X<1114112&&(Q=X)}null===Q?(Q=65533,Z=1):Q>65535&&(Q-=65536,z.push(Q>>>10&1023|55296),Q=56320|1023&Q),z.push(Q),Y+=Z}return function(D){var H=D.length;if(H<=4096)return String.fromCharCode.apply(String,D);var q="",z=0;for(;z<H;)q+=String.fromCharCode.apply(String,D.slice(z,z+=4096));return q}(z)}H.Buffer=u,H.SlowBuffer=function(D){+D!=D&&(D=0);return u.alloc(+D)},H.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==D.TYPED_ARRAY_SUPPORT?D.TYPED_ARRAY_SUPPORT:function(){try{var D=new Uint8Array(1);return D.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===D.foo()&&"function"==typeof D.subarray&&0===D.subarray(1,1).byteLength}catch(D){return!1}}(),H.kMaxLength=a(),u.poolSize=8192,u._augment=function(D){return D.__proto__=u.prototype,D},u.from=function(D,H,q){return c(null,D,H,q)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(D,H,q){return function(D,H,q,z){return l(H),H<=0?s(D,H):void 0!==q?"string"==typeof z?s(D,H).fill(q,z):s(D,H).fill(q):s(D,H)}(null,D,H,q)},u.allocUnsafe=function(D){return f(null,D)},u.allocUnsafeSlow=function(D){return f(null,D)},u.isBuffer=function(D){return!(null==D||!D._isBuffer)},u.compare=function(D,H){if(!u.isBuffer(D)||!u.isBuffer(H))throw new TypeError("Arguments must be Buffers");if(D===H)return 0;for(var q=D.length,z=H.length,Y=0,V=Math.min(q,z);Y<V;++Y)if(D[Y]!==H[Y]){q=D[Y],z=H[Y];break}return q<z?-1:z<q?1:0},u.isEncoding=function(D){switch(String(D).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(D,H){if(!V(D))throw new TypeError('"list" argument must be an Array of Buffers');if(0===D.length)return u.alloc(0);var q;if(void 0===H)for(H=0,q=0;q<D.length;++q)H+=D[q].length;var z=u.allocUnsafe(H),Y=0;for(q=0;q<D.length;++q){var W=D[q];if(!u.isBuffer(W))throw new TypeError('"list" argument must be an Array of Buffers');W.copy(z,Y),Y+=W.length}return z},u.byteLength=h,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var D=this.length;if(D%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var H=0;H<D;H+=2)v(this,H,H+1);return this},u.prototype.swap32=function(){var D=this.length;if(D%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var H=0;H<D;H+=4)v(this,H,H+3),v(this,H+1,H+2);return this},u.prototype.swap64=function(){var D=this.length;if(D%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var H=0;H<D;H+=8)v(this,H,H+7),v(this,H+1,H+6),v(this,H+2,H+5),v(this,H+3,H+4);return this},u.prototype.toString=function(){var D=0|this.length;return 0===D?"":0===arguments.length?S(this,0,D):g.apply(this,arguments)},u.prototype.equals=function(D){if(!u.isBuffer(D))throw new TypeError("Argument must be a Buffer");return this===D||0===u.compare(this,D)},u.prototype.inspect=function(){var D="",q=H.INSPECT_MAX_BYTES;return this.length>0&&(D=this.toString("hex",0,q).match(/.{2}/g).join(" "),this.length>q&&(D+=" ... ")),"<Buffer "+D+">"},u.prototype.compare=function(D,H,q,z,Y){if(!u.isBuffer(D))throw new TypeError("Argument must be a Buffer");if(void 0===H&&(H=0),void 0===q&&(q=D?D.length:0),void 0===z&&(z=0),void 0===Y&&(Y=this.length),H<0||q>D.length||z<0||Y>this.length)throw new RangeError("out of range index");if(z>=Y&&H>=q)return 0;if(z>=Y)return-1;if(H>=q)return 1;if(this===D)return 0;for(var V=(Y>>>=0)-(z>>>=0),W=(q>>>=0)-(H>>>=0),J=Math.min(V,W),X=this.slice(z,Y),$=D.slice(H,q),Q=0;Q<J;++Q)if(X[Q]!==$[Q]){V=X[Q],W=$[Q];break}return V<W?-1:W<V?1:0},u.prototype.includes=function(D,H,q){return-1!==this.indexOf(D,H,q)},u.prototype.indexOf=function(D,H,q){return y(this,D,H,q,!0)},u.prototype.lastIndexOf=function(D,H,q){return y(this,D,H,q,!1)},u.prototype.write=function(D,H,q,z){if(void 0===H)z="utf8",q=this.length,H=0;else if(void 0===q&&"string"==typeof H)z=H,q=this.length,H=0;else{if(!isFinite(H))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");H|=0,isFinite(q)?(q|=0,void 0===z&&(z="utf8")):(z=q,q=void 0)}var Y=this.length-H;if((void 0===q||q>Y)&&(q=Y),D.length>0&&(q<0||H<0)||H>this.length)throw new RangeError("Attempt to write outside buffer bounds");z||(z="utf8");for(var V=!1;;)switch(z){case"hex":return m(this,D,H,q);case"utf8":case"utf-8":return _(this,D,H,q);case"ascii":return k(this,D,H,q);case"latin1":case"binary":return P(this,D,H,q);case"base64":return w(this,D,H,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,D,H,q);default:if(V)throw new TypeError("Unknown encoding: "+z);z=(""+z).toLowerCase(),V=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function A(D,H,q){var z="";q=Math.min(D.length,q);for(var Y=H;Y<q;++Y)z+=String.fromCharCode(127&D[Y]);return z}function M(D,H,q){var z="";q=Math.min(D.length,q);for(var Y=H;Y<q;++Y)z+=String.fromCharCode(D[Y]);return z}function E(D,H,q){var z=D.length;(!H||H<0)&&(H=0),(!q||q<0||q>z)&&(q=z);for(var Y="",V=H;V<q;++V)Y+=L(D[V]);return Y}function x(D,H,q){for(var z=D.slice(H,q),Y="",V=0;V<z.length;V+=2)Y+=String.fromCharCode(z[V]+256*z[V+1]);return Y}function R(D,H,q){if(D%1!=0||D<0)throw new RangeError("offset is not uint");if(D+H>q)throw new RangeError("Trying to access beyond buffer length")}function C(D,H,q,z,Y,V){if(!u.isBuffer(D))throw new TypeError('"buffer" argument must be a Buffer instance');if(H>Y||H<V)throw new RangeError('"value" argument is out of bounds');if(q+z>D.length)throw new RangeError("Index out of range")}function N(D,H,q,z){H<0&&(H=65535+H+1);for(var Y=0,V=Math.min(D.length-q,2);Y<V;++Y)D[q+Y]=(H&255<<8*(z?Y:1-Y))>>>8*(z?Y:1-Y)}function U(D,H,q,z){H<0&&(H=4294967295+H+1);for(var Y=0,V=Math.min(D.length-q,4);Y<V;++Y)D[q+Y]=H>>>8*(z?Y:3-Y)&255}function j(D,H,q,z,Y,V){if(q+z>D.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("Index out of range")}function K(D,H,q,z,V){return V||j(D,0,q,4),Y.write(D,H,q,z,23,4),q+4}function I(D,H,q,z,V){return V||j(D,0,q,8),Y.write(D,H,q,z,52,8),q+8}u.prototype.slice=function(D,H){var q,z=this.length;if((D=~~D)<0?(D+=z)<0&&(D=0):D>z&&(D=z),(H=void 0===H?z:~~H)<0?(H+=z)<0&&(H=0):H>z&&(H=z),H<D&&(H=D),u.TYPED_ARRAY_SUPPORT)(q=this.subarray(D,H)).__proto__=u.prototype;else{var Y=H-D;q=new u(Y,void 0);for(var V=0;V<Y;++V)q[V]=this[V+D]}return q},u.prototype.readUIntLE=function(D,H,q){D|=0,H|=0,q||R(D,H,this.length);for(var z=this[D],Y=1,V=0;++V<H&&(Y*=256);)z+=this[D+V]*Y;return z},u.prototype.readUIntBE=function(D,H,q){D|=0,H|=0,q||R(D,H,this.length);for(var z=this[D+--H],Y=1;H>0&&(Y*=256);)z+=this[D+--H]*Y;return z},u.prototype.readUInt8=function(D,H){return H||R(D,1,this.length),this[D]},u.prototype.readUInt16LE=function(D,H){return H||R(D,2,this.length),this[D]|this[D+1]<<8},u.prototype.readUInt16BE=function(D,H){return H||R(D,2,this.length),this[D]<<8|this[D+1]},u.prototype.readUInt32LE=function(D,H){return H||R(D,4,this.length),(this[D]|this[D+1]<<8|this[D+2]<<16)+16777216*this[D+3]},u.prototype.readUInt32BE=function(D,H){return H||R(D,4,this.length),16777216*this[D]+(this[D+1]<<16|this[D+2]<<8|this[D+3])},u.prototype.readIntLE=function(D,H,q){D|=0,H|=0,q||R(D,H,this.length);for(var z=this[D],Y=1,V=0;++V<H&&(Y*=256);)z+=this[D+V]*Y;return z>=(Y*=128)&&(z-=Math.pow(2,8*H)),z},u.prototype.readIntBE=function(D,H,q){D|=0,H|=0,q||R(D,H,this.length);for(var z=H,Y=1,V=this[D+--z];z>0&&(Y*=256);)V+=this[D+--z]*Y;return V>=(Y*=128)&&(V-=Math.pow(2,8*H)),V},u.prototype.readInt8=function(D,H){return H||R(D,1,this.length),128&this[D]?-1*(255-this[D]+1):this[D]},u.prototype.readInt16LE=function(D,H){H||R(D,2,this.length);var q=this[D]|this[D+1]<<8;return 32768&q?4294901760|q:q},u.prototype.readInt16BE=function(D,H){H||R(D,2,this.length);var q=this[D+1]|this[D]<<8;return 32768&q?4294901760|q:q},u.prototype.readInt32LE=function(D,H){return H||R(D,4,this.length),this[D]|this[D+1]<<8|this[D+2]<<16|this[D+3]<<24},u.prototype.readInt32BE=function(D,H){return H||R(D,4,this.length),this[D]<<24|this[D+1]<<16|this[D+2]<<8|this[D+3]},u.prototype.readFloatLE=function(D,H){return H||R(D,4,this.length),Y.read(this,D,!0,23,4)},u.prototype.readFloatBE=function(D,H){return H||R(D,4,this.length),Y.read(this,D,!1,23,4)},u.prototype.readDoubleLE=function(D,H){return H||R(D,8,this.length),Y.read(this,D,!0,52,8)},u.prototype.readDoubleBE=function(D,H){return H||R(D,8,this.length),Y.read(this,D,!1,52,8)},u.prototype.writeUIntLE=function(D,H,q,z){(D=+D,H|=0,q|=0,z)||C(this,D,H,q,Math.pow(2,8*q)-1,0);var Y=1,V=0;for(this[H]=255&D;++V<q&&(Y*=256);)this[H+V]=D/Y&255;return H+q},u.prototype.writeUIntBE=function(D,H,q,z){(D=+D,H|=0,q|=0,z)||C(this,D,H,q,Math.pow(2,8*q)-1,0);var Y=q-1,V=1;for(this[H+Y]=255&D;--Y>=0&&(V*=256);)this[H+Y]=D/V&255;return H+q},u.prototype.writeUInt8=function(D,H,q){return D=+D,H|=0,q||C(this,D,H,1,255,0),u.TYPED_ARRAY_SUPPORT||(D=Math.floor(D)),this[H]=255&D,H+1},u.prototype.writeUInt16LE=function(D,H,q){return D=+D,H|=0,q||C(this,D,H,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[H]=255&D,this[H+1]=D>>>8):N(this,D,H,!0),H+2},u.prototype.writeUInt16BE=function(D,H,q){return D=+D,H|=0,q||C(this,D,H,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[H]=D>>>8,this[H+1]=255&D):N(this,D,H,!1),H+2},u.prototype.writeUInt32LE=function(D,H,q){return D=+D,H|=0,q||C(this,D,H,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[H+3]=D>>>24,this[H+2]=D>>>16,this[H+1]=D>>>8,this[H]=255&D):U(this,D,H,!0),H+4},u.prototype.writeUInt32BE=function(D,H,q){return D=+D,H|=0,q||C(this,D,H,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[H]=D>>>24,this[H+1]=D>>>16,this[H+2]=D>>>8,this[H+3]=255&D):U(this,D,H,!1),H+4},u.prototype.writeIntLE=function(D,H,q,z){if(D=+D,H|=0,!z){var Y=Math.pow(2,8*q-1);C(this,D,H,q,Y-1,-Y)}var V=0,W=1,J=0;for(this[H]=255&D;++V<q&&(W*=256);)D<0&&0===J&&0!==this[H+V-1]&&(J=1),this[H+V]=(D/W>>0)-J&255;return H+q},u.prototype.writeIntBE=function(D,H,q,z){if(D=+D,H|=0,!z){var Y=Math.pow(2,8*q-1);C(this,D,H,q,Y-1,-Y)}var V=q-1,W=1,J=0;for(this[H+V]=255&D;--V>=0&&(W*=256);)D<0&&0===J&&0!==this[H+V+1]&&(J=1),this[H+V]=(D/W>>0)-J&255;return H+q},u.prototype.writeInt8=function(D,H,q){return D=+D,H|=0,q||C(this,D,H,1,127,-128),u.TYPED_ARRAY_SUPPORT||(D=Math.floor(D)),D<0&&(D=255+D+1),this[H]=255&D,H+1},u.prototype.writeInt16LE=function(D,H,q){return D=+D,H|=0,q||C(this,D,H,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[H]=255&D,this[H+1]=D>>>8):N(this,D,H,!0),H+2},u.prototype.writeInt16BE=function(D,H,q){return D=+D,H|=0,q||C(this,D,H,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[H]=D>>>8,this[H+1]=255&D):N(this,D,H,!1),H+2},u.prototype.writeInt32LE=function(D,H,q){return D=+D,H|=0,q||C(this,D,H,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[H]=255&D,this[H+1]=D>>>8,this[H+2]=D>>>16,this[H+3]=D>>>24):U(this,D,H,!0),H+4},u.prototype.writeInt32BE=function(D,H,q){return D=+D,H|=0,q||C(this,D,H,4,2147483647,-2147483648),D<0&&(D=4294967295+D+1),u.TYPED_ARRAY_SUPPORT?(this[H]=D>>>24,this[H+1]=D>>>16,this[H+2]=D>>>8,this[H+3]=255&D):U(this,D,H,!1),H+4},u.prototype.writeFloatLE=function(D,H,q){return K(this,D,H,!0,q)},u.prototype.writeFloatBE=function(D,H,q){return K(this,D,H,!1,q)},u.prototype.writeDoubleLE=function(D,H,q){return I(this,D,H,!0,q)},u.prototype.writeDoubleBE=function(D,H,q){return I(this,D,H,!1,q)},u.prototype.copy=function(D,H,q,z){if(q||(q=0),z||0===z||(z=this.length),H>=D.length&&(H=D.length),H||(H=0),z>0&&z<q&&(z=q),z===q)return 0;if(0===D.length||0===this.length)return 0;if(H<0)throw new RangeError("targetStart out of bounds");if(q<0||q>=this.length)throw new RangeError("sourceStart out of bounds");if(z<0)throw new RangeError("sourceEnd out of bounds");z>this.length&&(z=this.length),D.length-H<z-q&&(z=D.length-H+q);var Y,V=z-q;if(this===D&&q<H&&H<z)for(Y=V-1;Y>=0;--Y)D[Y+H]=this[Y+q];else if(V<1e3||!u.TYPED_ARRAY_SUPPORT)for(Y=0;Y<V;++Y)D[Y+H]=this[Y+q];else Uint8Array.prototype.set.call(D,this.subarray(q,q+V),H);return V},u.prototype.fill=function(D,H,q,z){if("string"==typeof D){if("string"==typeof H?(z=H,H=0,q=this.length):"string"==typeof q&&(z=q,q=this.length),1===D.length){var Y=D.charCodeAt(0);Y<256&&(D=Y)}if(void 0!==z&&"string"!=typeof z)throw new TypeError("encoding must be a string");if("string"==typeof z&&!u.isEncoding(z))throw new TypeError("Unknown encoding: "+z)}else"number"==typeof D&&(D&=255);if(H<0||this.length<H||this.length<q)throw new RangeError("Out of range index");if(q<=H)return this;var V;if(H>>>=0,q=void 0===q?this.length:q>>>0,D||(D=0),"number"==typeof D)for(V=H;V<q;++V)this[V]=D;else{var W=u.isBuffer(D)?D:F(new u(D,z).toString()),J=W.length;for(V=0;V<q-H;++V)this[V+H]=W[V%J]}return this};var W=/[^+\/0-9A-Za-z-_]/g;function L(D){return D<16?"0"+D.toString(16):D.toString(16)}function F(D,H){var q;H=H||1/0;for(var z=D.length,Y=null,V=[],W=0;W<z;++W){if((q=D.charCodeAt(W))>55295&&q<57344){if(!Y){if(q>56319){(H-=3)>-1&&V.push(239,191,189);continue}if(W+1===z){(H-=3)>-1&&V.push(239,191,189);continue}Y=q;continue}if(q<56320){(H-=3)>-1&&V.push(239,191,189),Y=q;continue}q=65536+(Y-55296<<10|q-56320)}else Y&&(H-=3)>-1&&V.push(239,191,189);if(Y=null,q<128){if((H-=1)<0)break;V.push(q)}else if(q<2048){if((H-=2)<0)break;V.push(q>>6|192,63&q|128)}else if(q<65536){if((H-=3)<0)break;V.push(q>>12|224,q>>6&63|128,63&q|128)}else{if(!(q<1114112))throw new Error("Invalid code point");if((H-=4)<0)break;V.push(q>>18|240,q>>12&63|128,q>>6&63|128,63&q|128)}}return V}function B(D){return z.toByteArray(function(D){if((D=function(D){return D.trim?D.trim():D.replace(/^\s+|\s+$/g,"")}(D).replace(W,"")).length<2)return"";for(;D.length%4!=0;)D+="=";return D}(D))}function G(D,H,q,z){for(var Y=0;Y<z&&!(Y+q>=H.length||Y>=D.length);++Y)H[Y+q]=D[Y];return Y}}).call(this,q(32))},function(D,H,q){"use strict";var z,Y,V,W,J,X=X||function(D,H){var q={},z=q.lib={},i=function(){},Y=z.Base={extend:function(D){i.prototype=this;var H=new i;return D&&H.mixIn(D),H.hasOwnProperty("init")||(H.init=function(){H.$super.init.apply(this,arguments)}),H.init.prototype=H,H.$super=this,H},create:function(){var D=this.extend();return D.init.apply(D,arguments),D},init:function(){},mixIn:function(D){for(var H in D)D.hasOwnProperty(H)&&(this[H]=D[H]);D.hasOwnProperty("toString")&&(this.toString=D.toString)},clone:function(){return this.init.prototype.extend(this)}},V=z.WordArray=Y.extend({init:function(D,H){D=this.words=D||[],this.sigBytes=null!=H?H:4*D.length},toString:function(D){return(D||J).stringify(this)},concat:function(D){var H=this.words,q=D.words,z=this.sigBytes;if(D=D.sigBytes,this.clamp(),z%4)for(var Y=0;Y<D;Y++)H[z+Y>>>2]|=(q[Y>>>2]>>>24-Y%4*8&255)<<24-(z+Y)%4*8;else if(65535<q.length)for(Y=0;Y<D;Y+=4)H[z+Y>>>2]=q[Y>>>2];else H.push.apply(H,q);return this.sigBytes+=D,this},clamp:function(){var H=this.words,q=this.sigBytes;H[q>>>2]&=4294967295<<32-q%4*8,H.length=D.ceil(q/4)},clone:function(){var D=Y.clone.call(this);return D.words=this.words.slice(0),D},random:function(H){for(var q=[],z=0;z<H;z+=4)q.push(4294967296*D.random()|0);return new V.init(q,H)}}),W=q.enc={},J=W.Hex={stringify:function(D){var H=D.words;D=D.sigBytes;for(var q=[],z=0;z<D;z++){var Y=H[z>>>2]>>>24-z%4*8&255;q.push((Y>>>4).toString(16)),q.push((15&Y).toString(16))}return q.join("")},parse:function(D){for(var H=D.length,q=[],z=0;z<H;z+=2)q[z>>>3]|=parseInt(D.substr(z,2),16)<<24-z%8*4;return new V.init(q,H/2)}},X=W.Latin1={stringify:function(D){var H=D.words;D=D.sigBytes;for(var q=[],z=0;z<D;z++)q.push(String.fromCharCode(H[z>>>2]>>>24-z%4*8&255));return q.join("")},parse:function(D){for(var H=D.length,q=[],z=0;z<H;z++)q[z>>>2]|=(255&D.charCodeAt(z))<<24-z%4*8;return new V.init(q,H)}},$=W.Utf8={stringify:function(D){try{return decodeURIComponent(escape(X.stringify(D)))}catch(D){throw Error("Malformed UTF-8 data")}},parse:function(D){return X.parse(unescape(encodeURIComponent(D)))}},Q=z.BufferedBlockAlgorithm=Y.extend({reset:function(){this._data=new V.init,this._nDataBytes=0},_append:function(D){"string"==typeof D&&(D=$.parse(D)),this._data.concat(D),this._nDataBytes+=D.sigBytes},_process:function(H){var q=this._data,z=q.words,Y=q.sigBytes,W=this.blockSize,J=Y/(4*W);if(H=(J=H?D.ceil(J):D.max((0|J)-this._minBufferSize,0))*W,Y=D.min(4*H,Y),H){for(var X=0;X<H;X+=W)this._doProcessBlock(z,X);X=z.splice(0,H),q.sigBytes-=Y}return new V.init(X,Y)},clone:function(){var D=Y.clone.call(this);return D._data=this._data.clone(),D},_minBufferSize:0});z.Hasher=Q.extend({cfg:Y.extend(),init:function(D){this.cfg=this.cfg.extend(D),this.reset()},reset:function(){Q.reset.call(this),this._doReset()},update:function(D){return this._append(D),this._process(),this},finalize:function(D){return D&&this._append(D),this._doFinalize()},blockSize:16,_createHelper:function(D){return function(H,q){return new D.init(q).finalize(H)}},_createHmacHelper:function(D){return function(H,q){return new Z.HMAC.init(D,q).finalize(H)}}});var Z=q.algo={};return q}(Math);!function(D){for(var H=X,q=(Y=H.lib).WordArray,z=Y.Hasher,Y=H.algo,V=[],W=[],s=function(D){return 4294967296*(D-(0|D))|0},J=2,$=0;64>$;){var Q;e:{Q=J;for(var Z=D.sqrt(Q),ee=2;ee<=Z;ee++)if(!(Q%ee)){Q=!1;break e}Q=!0}Q&&(8>$&&(V[$]=s(D.pow(J,.5))),W[$]=s(D.pow(J,1/3)),$++),J++}var te=[];Y=Y.SHA256=z.extend({_doReset:function(){this._hash=new q.init(V.slice(0))},_doProcessBlock:function(D,H){for(var q=this._hash.words,z=q[0],Y=q[1],V=q[2],J=q[3],X=q[4],$=q[5],Q=q[6],Z=q[7],ee=0;64>ee;ee++){if(16>ee)te[ee]=0|D[H+ee];else{var ne=te[ee-15],re=te[ee-2];te[ee]=((ne<<25|ne>>>7)^(ne<<14|ne>>>18)^ne>>>3)+te[ee-7]+((re<<15|re>>>17)^(re<<13|re>>>19)^re>>>10)+te[ee-16]}ne=Z+((X<<26|X>>>6)^(X<<21|X>>>11)^(X<<7|X>>>25))+(X&$^~X&Q)+W[ee]+te[ee],re=((z<<30|z>>>2)^(z<<19|z>>>13)^(z<<10|z>>>22))+(z&Y^z&V^Y&V),Z=Q,Q=$,$=X,X=J+ne|0,J=V,V=Y,Y=z,z=ne+re|0}q[0]=q[0]+z|0,q[1]=q[1]+Y|0,q[2]=q[2]+V|0,q[3]=q[3]+J|0,q[4]=q[4]+X|0,q[5]=q[5]+$|0,q[6]=q[6]+Q|0,q[7]=q[7]+Z|0},_doFinalize:function(){var H=this._data,q=H.words,z=8*this._nDataBytes,Y=8*H.sigBytes;return q[Y>>>5]|=128<<24-Y%32,q[14+(Y+64>>>9<<4)]=D.floor(z/4294967296),q[15+(Y+64>>>9<<4)]=z,H.sigBytes=4*q.length,this._process(),this._hash},clone:function(){var D=z.clone.call(this);return D._hash=this._hash.clone(),D}});H.SHA256=z._createHelper(Y),H.HmacSHA256=z._createHmacHelper(Y)}(Math),Y=(z=X).enc.Utf8,z.algo.HMAC=z.lib.Base.extend({init:function(D,H){D=this._hasher=new D.init,"string"==typeof H&&(H=Y.parse(H));var q=D.blockSize,z=4*q;H.sigBytes>z&&(H=D.finalize(H)),H.clamp();for(var V=this._oKey=H.clone(),W=this._iKey=H.clone(),J=V.words,X=W.words,$=0;$<q;$++)J[$]^=1549556828,X[$]^=909522486;V.sigBytes=W.sigBytes=z,this.reset()},reset:function(){var D=this._hasher;D.reset(),D.update(this._iKey)},update:function(D){return this._hasher.update(D),this},finalize:function(D){var H=this._hasher;return D=H.finalize(D),H.reset(),H.finalize(this._oKey.clone().concat(D))}}),W=(V=X).lib.WordArray,V.enc.Base64={stringify:function(D){var H=D.words,q=D.sigBytes,z=this._map;D.clamp(),D=[];for(var Y=0;Y<q;Y+=3)for(var V=(H[Y>>>2]>>>24-Y%4*8&255)<<16|(H[Y+1>>>2]>>>24-(Y+1)%4*8&255)<<8|H[Y+2>>>2]>>>24-(Y+2)%4*8&255,W=0;4>W&&Y+.75*W<q;W++)D.push(z.charAt(V>>>6*(3-W)&63));if(H=z.charAt(64))for(;D.length%4;)D.push(H);return D.join("")},parse:function(D){var H=D.length,q=this._map;(z=q.charAt(64))&&-1!=(z=D.indexOf(z))&&(H=z);for(var z=[],Y=0,V=0;V<H;V++)if(V%4){var J=q.indexOf(D.charAt(V-1))<<V%4*2,X=q.indexOf(D.charAt(V))>>>6-V%4*2;z[Y>>>2]|=(J|X)<<24-Y%4*8,Y++}return W.create(z,Y)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(D){function t(D,H,q,z,Y,V,W){return((D=D+(H&q|~H&z)+Y+W)<<V|D>>>32-V)+H}function n(D,H,q,z,Y,V,W){return((D=D+(H&z|q&~z)+Y+W)<<V|D>>>32-V)+H}function r(D,H,q,z,Y,V,W){return((D=D+(H^q^z)+Y+W)<<V|D>>>32-V)+H}function i(D,H,q,z,Y,V,W){return((D=D+(q^(H|~z))+Y+W)<<V|D>>>32-V)+H}for(var H=X,q=(Y=H.lib).WordArray,z=Y.Hasher,Y=H.algo,V=[],W=0;64>W;W++)V[W]=4294967296*D.abs(D.sin(W+1))|0;Y=Y.MD5=z.extend({_doReset:function(){this._hash=new q.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(D,H){for(var q=0;16>q;q++){var z=D[Y=H+q];D[Y]=16711935&(z<<8|z>>>24)|4278255360&(z<<24|z>>>8)}q=this._hash.words;var Y=D[H+0],W=(z=D[H+1],D[H+2]),J=D[H+3],X=D[H+4],$=D[H+5],Q=D[H+6],Z=D[H+7],ee=D[H+8],te=D[H+9],ne=D[H+10],re=D[H+11],ie=D[H+12],oe=D[H+13],ae=D[H+14],se=D[H+15],ue=t(ue=q[0],fe=q[1],le=q[2],ce=q[3],Y,7,V[0]),ce=t(ce,ue,fe,le,z,12,V[1]),le=t(le,ce,ue,fe,W,17,V[2]),fe=t(fe,le,ce,ue,J,22,V[3]);ue=t(ue,fe,le,ce,X,7,V[4]),ce=t(ce,ue,fe,le,$,12,V[5]),le=t(le,ce,ue,fe,Q,17,V[6]),fe=t(fe,le,ce,ue,Z,22,V[7]),ue=t(ue,fe,le,ce,ee,7,V[8]),ce=t(ce,ue,fe,le,te,12,V[9]),le=t(le,ce,ue,fe,ne,17,V[10]),fe=t(fe,le,ce,ue,re,22,V[11]),ue=t(ue,fe,le,ce,ie,7,V[12]),ce=t(ce,ue,fe,le,oe,12,V[13]),le=t(le,ce,ue,fe,ae,17,V[14]),ue=n(ue,fe=t(fe,le,ce,ue,se,22,V[15]),le,ce,z,5,V[16]),ce=n(ce,ue,fe,le,Q,9,V[17]),le=n(le,ce,ue,fe,re,14,V[18]),fe=n(fe,le,ce,ue,Y,20,V[19]),ue=n(ue,fe,le,ce,$,5,V[20]),ce=n(ce,ue,fe,le,ne,9,V[21]),le=n(le,ce,ue,fe,se,14,V[22]),fe=n(fe,le,ce,ue,X,20,V[23]),ue=n(ue,fe,le,ce,te,5,V[24]),ce=n(ce,ue,fe,le,ae,9,V[25]),le=n(le,ce,ue,fe,J,14,V[26]),fe=n(fe,le,ce,ue,ee,20,V[27]),ue=n(ue,fe,le,ce,oe,5,V[28]),ce=n(ce,ue,fe,le,W,9,V[29]),le=n(le,ce,ue,fe,Z,14,V[30]),ue=r(ue,fe=n(fe,le,ce,ue,ie,20,V[31]),le,ce,$,4,V[32]),ce=r(ce,ue,fe,le,ee,11,V[33]),le=r(le,ce,ue,fe,re,16,V[34]),fe=r(fe,le,ce,ue,ae,23,V[35]),ue=r(ue,fe,le,ce,z,4,V[36]),ce=r(ce,ue,fe,le,X,11,V[37]),le=r(le,ce,ue,fe,Z,16,V[38]),fe=r(fe,le,ce,ue,ne,23,V[39]),ue=r(ue,fe,le,ce,oe,4,V[40]),ce=r(ce,ue,fe,le,Y,11,V[41]),le=r(le,ce,ue,fe,J,16,V[42]),fe=r(fe,le,ce,ue,Q,23,V[43]),ue=r(ue,fe,le,ce,te,4,V[44]),ce=r(ce,ue,fe,le,ie,11,V[45]),le=r(le,ce,ue,fe,se,16,V[46]),ue=i(ue,fe=r(fe,le,ce,ue,W,23,V[47]),le,ce,Y,6,V[48]),ce=i(ce,ue,fe,le,Z,10,V[49]),le=i(le,ce,ue,fe,ae,15,V[50]),fe=i(fe,le,ce,ue,$,21,V[51]),ue=i(ue,fe,le,ce,ie,6,V[52]),ce=i(ce,ue,fe,le,J,10,V[53]),le=i(le,ce,ue,fe,ne,15,V[54]),fe=i(fe,le,ce,ue,z,21,V[55]),ue=i(ue,fe,le,ce,ee,6,V[56]),ce=i(ce,ue,fe,le,se,10,V[57]),le=i(le,ce,ue,fe,Q,15,V[58]),fe=i(fe,le,ce,ue,oe,21,V[59]),ue=i(ue,fe,le,ce,X,6,V[60]),ce=i(ce,ue,fe,le,re,10,V[61]),le=i(le,ce,ue,fe,W,15,V[62]),fe=i(fe,le,ce,ue,te,21,V[63]);q[0]=q[0]+ue|0,q[1]=q[1]+fe|0,q[2]=q[2]+le|0,q[3]=q[3]+ce|0},_doFinalize:function(){var H=this._data,q=H.words,z=8*this._nDataBytes,Y=8*H.sigBytes;q[Y>>>5]|=128<<24-Y%32;var V=D.floor(z/4294967296);for(q[15+(Y+64>>>9<<4)]=16711935&(V<<8|V>>>24)|4278255360&(V<<24|V>>>8),q[14+(Y+64>>>9<<4)]=16711935&(z<<8|z>>>24)|4278255360&(z<<24|z>>>8),H.sigBytes=4*(q.length+1),this._process(),q=(H=this._hash).words,z=0;4>z;z++)Y=q[z],q[z]=16711935&(Y<<8|Y>>>24)|4278255360&(Y<<24|Y>>>8);return H},clone:function(){var D=z.clone.call(this);return D._hash=this._hash.clone(),D}}),H.MD5=z._createHelper(Y),H.HmacMD5=z._createHmacHelper(Y)}(Math),function(){var D,H=X,q=(D=H.lib).Base,z=D.WordArray,Y=(D=H.algo).EvpKDF=q.extend({cfg:q.extend({keySize:4,hasher:D.MD5,iterations:1}),init:function(D){this.cfg=this.cfg.extend(D)},compute:function(D,H){for(var q=(J=this.cfg).hasher.create(),Y=z.create(),V=Y.words,W=J.keySize,J=J.iterations;V.length<W;){X&&q.update(X);var X=q.update(D).finalize(H);q.reset();for(var $=1;$<J;$++)X=q.finalize(X),q.reset();Y.concat(X)}return Y.sigBytes=4*W,Y}});H.EvpKDF=function(D,H,q){return Y.create(q).compute(D,H)}}(),X.lib.Cipher||function(D){var H=(te=X).lib,q=H.Base,z=H.WordArray,Y=H.BufferedBlockAlgorithm,V=te.enc.Base64,W=te.algo.EvpKDF,J=H.Cipher=Y.extend({cfg:q.extend(),createEncryptor:function(D,H){return this.create(this._ENC_XFORM_MODE,D,H)},createDecryptor:function(D,H){return this.create(this._DEC_XFORM_MODE,D,H)},init:function(D,H,q){this.cfg=this.cfg.extend(q),this._xformMode=D,this._key=H,this.reset()},reset:function(){Y.reset.call(this),this._doReset()},process:function(D){return this._append(D),this._process()},finalize:function(D){return D&&this._append(D),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(D){return{encrypt:function(H,q,z){return("string"==typeof q?ne:ee).encrypt(D,H,q,z)},decrypt:function(H,q,z){return("string"==typeof q?ne:ee).decrypt(D,H,q,z)}}}});H.StreamCipher=J.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var $=te.mode={},l=function(D,H,q){var z=this._iv;z?this._iv=void 0:z=this._prevBlock;for(var Y=0;Y<q;Y++)D[H+Y]^=z[Y]},Q=(H.BlockCipherMode=q.extend({createEncryptor:function(D,H){return this.Encryptor.create(D,H)},createDecryptor:function(D,H){return this.Decryptor.create(D,H)},init:function(D,H){this._cipher=D,this._iv=H}})).extend();Q.Encryptor=Q.extend({processBlock:function(D,H){var q=this._cipher,z=q.blockSize;l.call(this,D,H,z),q.encryptBlock(D,H),this._prevBlock=D.slice(H,H+z)}}),Q.Decryptor=Q.extend({processBlock:function(D,H){var q=this._cipher,z=q.blockSize,Y=D.slice(H,H+z);q.decryptBlock(D,H),l.call(this,D,H,z),this._prevBlock=Y}}),$=$.CBC=Q,Q=(te.pad={}).Pkcs7={pad:function(D,H){for(var q,Y=(q=(q=4*H)-D.sigBytes%q)<<24|q<<16|q<<8|q,V=[],W=0;W<q;W+=4)V.push(Y);q=z.create(V,q),D.concat(q)},unpad:function(D){D.sigBytes-=255&D.words[D.sigBytes-1>>>2]}},H.BlockCipher=J.extend({cfg:J.cfg.extend({mode:$,padding:Q}),reset:function(){J.reset.call(this);var D=(H=this.cfg).iv,H=H.mode;if(this._xformMode==this._ENC_XFORM_MODE)var q=H.createEncryptor;else q=H.createDecryptor,this._minBufferSize=1;this._mode=q.call(H,this,D&&D.words)},_doProcessBlock:function(D,H){this._mode.processBlock(D,H)},_doFinalize:function(){var D=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){D.pad(this._data,this.blockSize);var H=this._process(!0)}else H=this._process(!0),D.unpad(H);return H},blockSize:4});var Z=H.CipherParams=q.extend({init:function(D){this.mixIn(D)},toString:function(D){return(D||this.formatter).stringify(this)}}),ee=($=(te.format={}).OpenSSL={stringify:function(D){var H=D.ciphertext;return((D=D.salt)?z.create([1398893684,1701076831]).concat(D).concat(H):H).toString(V)},parse:function(D){var H=(D=V.parse(D)).words;if(1398893684==H[0]&&1701076831==H[1]){var q=z.create(H.slice(2,4));H.splice(0,4),D.sigBytes-=16}return Z.create({ciphertext:D,salt:q})}},H.SerializableCipher=q.extend({cfg:q.extend({format:$}),encrypt:function(D,H,q,z){z=this.cfg.extend(z);var Y=D.createEncryptor(q,z);return H=Y.finalize(H),Y=Y.cfg,Z.create({ciphertext:H,key:q,iv:Y.iv,algorithm:D,mode:Y.mode,padding:Y.padding,blockSize:D.blockSize,formatter:z.format})},decrypt:function(D,H,q,z){return z=this.cfg.extend(z),H=this._parse(H,z.format),D.createDecryptor(q,z).finalize(H.ciphertext)},_parse:function(D,H){return"string"==typeof D?H.parse(D,this):D}})),te=(te.kdf={}).OpenSSL={execute:function(D,H,q,Y){return Y||(Y=z.random(8)),D=W.create({keySize:H+q}).compute(D,Y),q=z.create(D.words.slice(H),4*q),D.sigBytes=4*H,Z.create({key:D,iv:q,salt:Y})}},ne=H.PasswordBasedCipher=ee.extend({cfg:ee.cfg.extend({kdf:te}),encrypt:function(D,H,q,z){return q=(z=this.cfg.extend(z)).kdf.execute(q,D.keySize,D.ivSize),z.iv=q.iv,(D=ee.encrypt.call(this,D,H,q.key,z)).mixIn(q),D},decrypt:function(D,H,q,z){return z=this.cfg.extend(z),H=this._parse(H,z.format),q=z.kdf.execute(q,D.keySize,D.ivSize,H.salt),z.iv=q.iv,ee.decrypt.call(this,D,H,q.key,z)}})}(),function(){for(var D=X,H=D.lib.BlockCipher,q=D.algo,z=[],Y=[],V=[],W=[],J=[],$=[],Q=[],Z=[],ee=[],te=[],ne=[],re=0;256>re;re++)ne[re]=128>re?re<<1:re<<1^283;var ie=0,oe=0;for(re=0;256>re;re++){var ae=(ae=oe^oe<<1^oe<<2^oe<<3^oe<<4)>>>8^255&ae^99;z[ie]=ae,Y[ae]=ie;var se=ne[ie],ue=ne[se],ce=ne[ue],le=257*ne[ae]^16843008*ae;V[ie]=le<<24|le>>>8,W[ie]=le<<16|le>>>16,J[ie]=le<<8|le>>>24,$[ie]=le,le=16843009*ce^65537*ue^257*se^16843008*ie,Q[ae]=le<<24|le>>>8,Z[ae]=le<<16|le>>>16,ee[ae]=le<<8|le>>>24,te[ae]=le,ie?(ie=se^ne[ne[ne[ce^se]]],oe^=ne[ne[oe]]):ie=oe=1}var fe=[0,1,2,4,8,16,32,64,128,27,54];q=q.AES=H.extend({_doReset:function(){for(var D=(q=this._key).words,H=q.sigBytes/4,q=4*((this._nRounds=H+6)+1),Y=this._keySchedule=[],V=0;V<q;V++)if(V<H)Y[V]=D[V];else{var W=Y[V-1];V%H?6<H&&4==V%H&&(W=z[W>>>24]<<24|z[W>>>16&255]<<16|z[W>>>8&255]<<8|z[255&W]):(W=z[(W=W<<8|W>>>24)>>>24]<<24|z[W>>>16&255]<<16|z[W>>>8&255]<<8|z[255&W],W^=fe[V/H|0]<<24),Y[V]=Y[V-H]^W}for(D=this._invKeySchedule=[],H=0;H<q;H++)V=q-H,W=H%4?Y[V]:Y[V-4],D[H]=4>H||4>=V?W:Q[z[W>>>24]]^Z[z[W>>>16&255]]^ee[z[W>>>8&255]]^te[z[255&W]]},encryptBlock:function(D,H){this._doCryptBlock(D,H,this._keySchedule,V,W,J,$,z)},decryptBlock:function(D,H){var q=D[H+1];D[H+1]=D[H+3],D[H+3]=q,this._doCryptBlock(D,H,this._invKeySchedule,Q,Z,ee,te,Y),q=D[H+1],D[H+1]=D[H+3],D[H+3]=q},_doCryptBlock:function(D,H,q,z,Y,V,W,J){for(var X=this._nRounds,$=D[H]^q[0],Q=D[H+1]^q[1],Z=D[H+2]^q[2],ee=D[H+3]^q[3],te=4,ne=1;ne<X;ne++){var re=z[$>>>24]^Y[Q>>>16&255]^V[Z>>>8&255]^W[255&ee]^q[te++],ie=z[Q>>>24]^Y[Z>>>16&255]^V[ee>>>8&255]^W[255&$]^q[te++],oe=z[Z>>>24]^Y[ee>>>16&255]^V[$>>>8&255]^W[255&Q]^q[te++];ee=z[ee>>>24]^Y[$>>>16&255]^V[Q>>>8&255]^W[255&Z]^q[te++],$=re,Q=ie,Z=oe}re=(J[$>>>24]<<24|J[Q>>>16&255]<<16|J[Z>>>8&255]<<8|J[255&ee])^q[te++],ie=(J[Q>>>24]<<24|J[Z>>>16&255]<<16|J[ee>>>8&255]<<8|J[255&$])^q[te++],oe=(J[Z>>>24]<<24|J[ee>>>16&255]<<16|J[$>>>8&255]<<8|J[255&Q])^q[te++],ee=(J[ee>>>24]<<24|J[$>>>16&255]<<16|J[Q>>>8&255]<<8|J[255&Z])^q[te++],D[H]=re,D[H+1]=ie,D[H+2]=oe,D[H+3]=ee},keySize:8});D.AES=H._createHelper(q)}(),X.mode.ECB=((J=X.lib.BlockCipherMode.extend()).Encryptor=J.extend({processBlock:function(D,H){this._cipher.encryptBlock(D,H)}}),J.Decryptor=J.extend({processBlock:function(D,H){this._cipher.decryptBlock(D,H)}}),J),D.exports=X},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var Y=z(q(5)),V=z(q(6)),W=z(q(4)),J=(q(2),z(q(10))),X=function(){function e(){(0,Y.default)(this,e),(0,W.default)(this,"_listeners",void 0),this._listeners=[]}return(0,V.default)(e,[{key:"addListener",value:function(D){this._listeners.push(D)}},{key:"removeListener",value:function(D){var H=[];this._listeners.forEach((function(q){q!==D&&H.push(q)})),this._listeners=H}},{key:"removeAllListeners",value:function(){this._listeners=[]}},{key:"announcePresence",value:function(D){this._listeners.forEach((function(H){H.presence&&H.presence(D)}))}},{key:"announceStatus",value:function(D){this._listeners.forEach((function(H){H.status&&H.status(D)}))}},{key:"announceMessage",value:function(D){this._listeners.forEach((function(H){H.message&&H.message(D)}))}},{key:"announceSignal",value:function(D){this._listeners.forEach((function(H){H.signal&&H.signal(D)}))}},{key:"announceMessageAction",value:function(D){this._listeners.forEach((function(H){H.messageAction&&H.messageAction(D)}))}},{key:"announceFile",value:function(D){this._listeners.forEach((function(H){H.file&&H.file(D)}))}},{key:"announceObjects",value:function(D){this._listeners.forEach((function(H){H.objects&&H.objects(D)}))}},{key:"announceUser",value:function(D){this._listeners.forEach((function(H){H.user&&H.user(D)}))}},{key:"announceSpace",value:function(D){this._listeners.forEach((function(H){H.space&&H.space(D)}))}},{key:"announceMembership",value:function(D){this._listeners.forEach((function(H){H.membership&&H.membership(D)}))}},{key:"announceNetworkUp",value:function(){var D={};D.category=J.default.PNNetworkUpCategory,this.announceStatus(D)}},{key:"announceNetworkDown",value:function(){var D={};D.category=J.default.PNNetworkDownCategory,this.announceStatus(D)}}]),e}();H.default=X,D.exports=H.default},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNTimeOperation},H.getURL=function(){return"/time/0"},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.prepareParams=function(){return{}},H.isAuthSupported=function(){return!1},H.handleResponse=function(D,H){return{timetoken:H[0]}},H.validateParams=function(){};q(2);var Y=z(q(1))},function(D,H,q){},function(D,H,q){"use strict";D.exports=function(D){return null!==D&&"object"==typeof D}},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var Y=z(q(5)),V=z(q(14)),W=z(q(16)),J=z(q(13)),X=z(q(7)),$=z(q(28)),Q=z(q(29)),Z=z(q(121)),ee=z(q(22)),te=z(q(122)),ne=z(q(123)),re=q(124),ie=(q(2),z(q(131))),oe=z(q(132));function b(D){var H=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(D){return!1}}();return function(){var q,z=(0,J.default)(D);if(H){var Y=(0,J.default)(this).constructor;q=Reflect.construct(z,arguments,Y)}else q=z.apply(this,arguments);return(0,W.default)(this,q)}}function m(D){if(!navigator||!navigator.sendBeacon)return!1;navigator.sendBeacon(D)}function _(D){for(var H=ee.default.enc.Base64.parse(D).words,q=new ArrayBuffer(4*H.length),z=new Uint8Array(q),Y=0,V=0,W=0;W<H.length;W+=1){var J=H[W];z[V=4*W]=(4278190080&J)>>24,z[V+1]=(16711680&J)>>16,z[V+2]=(65280&J)>>8,z[V+3]=255&J}for(var X=V+3;X>=V;X-=1)0===z[X]&&(Y+=1);return Y>0?z.buffer.slice(0,z.byteLength-Y):z.buffer}function k(D){var t=function(D){return D&&"object"===(0,X.default)(D)&&D.constructor===Object};if(!t(D))return D;var H={};return Object.keys(D).forEach((function(q){var z=function(D){return"string"==typeof D||D instanceof String}(q),Y=q,V=D[q];Array.isArray(q)||z&&q.indexOf(",")>=0?Y=(z?q.split(","):q).reduce((function(D,H){return D+=String.fromCharCode(H)}),""):(function(D){return"number"==typeof D&&isFinite(D)}(q)||z&&!isNaN(q))&&(Y=String.fromCharCode(z?parseInt(q,10):10));H[Y]=t(V)?k(V):V})),H}var ae=function(D){(0,V.default)(n,D);var H=b(n);function n(D){var q;(0,Y.default)(this,n);var z=D.listenToBrowserNetworkEvents,V=void 0===z||z;return D.db=te.default,D.sdkFamily="Web",D.networking=new Z.default({del:re.del,get:re.get,post:re.post,patch:re.patch,sendBeacon:m,getfile:re.getfile,postfile:re.postfile}),D.cbor=new ne.default((function(D){return k($.default.decode(D))}),_),D.PubNubFile=oe.default,D.cryptography=new ie.default,q=H.call(this,D),V&&(window.addEventListener("offline",(function(){q.networkDownDetected()})),window.addEventListener("online",(function(){q.networkUpDetected()}))),q}return n}(Q.default);H.default=ae,D.exports=H.default},function(D,H,q){var z,Y;!function(V,W){"use strict";var J=Math.pow(2,-24),X=Math.pow(2,32),$=Math.pow(2,53);void 0===(Y="function"==typeof(z={encode:function(D){var H,q=new ArrayBuffer(256),z=new DataView(q),Y=0;function o(D){for(var V=q.byteLength,W=Y+D;V<W;)V*=2;if(V!==q.byteLength){var J=z;q=new ArrayBuffer(V),z=new DataView(q);for(var X=Y+3>>2,$=0;$<X;++$)z.setUint32(4*$,J.getUint32(4*$))}return H=D,z}function a(){Y+=H}function s(D){a(o(1).setUint8(Y,D))}function l(D){for(var H=o(D.length),q=0;q<D.length;++q)H.setUint8(Y+q,D[q]);a()}function f(D,H){H<24?s(D<<5|H):H<256?(s(D<<5|24),s(H)):H<65536?(s(D<<5|25),function(D){a(o(2).setUint16(Y,D))}(H)):H<4294967296?(s(D<<5|26),function(D){a(o(4).setUint32(Y,D))}(H)):(s(D<<5|27),function(D){var H=D%X,q=(D-H)/X,z=o(8);z.setUint32(Y,q),z.setUint32(Y+4,H),a()}(H))}if(function e(D){var H;if(!1===D)return s(244);if(!0===D)return s(245);if(null===D)return s(246);if(void 0===D)return s(247);switch(typeof D){case"number":if(Math.floor(D)===D){if(0<=D&&D<=$)return f(0,D);if(-$<=D&&D<0)return f(1,-(D+1))}return s(251),function(D){a(o(8).setFloat64(Y,D))}(D);case"string":var q=[];for(H=0;H<D.length;++H){var z=D.charCodeAt(H);z<128?q.push(z):z<2048?(q.push(192|z>>6),q.push(128|63&z)):z<55296?(q.push(224|z>>12),q.push(128|z>>6&63),q.push(128|63&z)):(z=(1023&z)<<10,z|=1023&D.charCodeAt(++H),z+=65536,q.push(240|z>>18),q.push(128|z>>12&63),q.push(128|z>>6&63),q.push(128|63&z))}return f(3,q.length),l(q);default:var V;if(Array.isArray(D))for(f(4,V=D.length),H=0;H<V;++H)e(D[H]);else if(D instanceof Uint8Array)f(2,D.length),l(D);else{var W=Object.keys(D);for(f(5,V=W.length),H=0;H<V;++H){var J=W[H];e(J),e(D[J])}}}}(D),"slice"in q)return q.slice(0,Y);for(var V=new ArrayBuffer(Y),W=new DataView(V),J=0;J<Y;++J)W.setUint8(J,z.getUint8(J));return V},decode:function(D,H,q){var z=new DataView(D),Y=0;function o(D,H){return Y+=H,D}function a(H){return o(new Uint8Array(D,Y,H),H)}function c(){return o(z.getUint8(Y),1)}function l(){return o(z.getUint16(Y),2)}function f(){return o(z.getUint32(Y),4)}function d(){return 255===z.getUint8(Y)&&(Y+=1,!0)}function p(D){if(D<24)return D;if(24===D)return c();if(25===D)return l();if(26===D)return f();if(27===D)return f()*X+f();if(31===D)return-1;throw"Invalid length encoding"}function h(D){var H=c();if(255===H)return-1;var q=p(31&H);if(q<0||H>>5!==D)throw"Invalid indefinite length element";return q}function g(D,H){for(var q=0;q<H;++q){var z=c();128&z&&(z<224?(z=(31&z)<<6|63&c(),H-=1):z<240?(z=(15&z)<<12|(63&c())<<6|63&c(),H-=2):(z=(15&z)<<18|(63&c())<<12|(63&c())<<6|63&c(),H-=3)),z<65536?D.push(z):(z-=65536,D.push(55296|z>>10),D.push(56320|1023&z))}}"function"!=typeof H&&(H=function(D){return D}),"function"!=typeof q&&(q=function(){});var V=function e(){var D,V,W=c(),X=W>>5,$=31&W;if(7===X)switch($){case 25:return function(){var D=new ArrayBuffer(4),H=new DataView(D),q=l(),z=32768&q,Y=31744&q,V=1023&q;if(31744===Y)Y=261120;else if(0!==Y)Y+=114688;else if(0!==V)return V*J;return H.setUint32(0,z<<16|Y<<13|V<<13),H.getFloat32(0)}();case 26:return o(z.getFloat32(Y),4);case 27:return o(z.getFloat64(Y),8)}if((V=p($))<0&&(X<2||6<X))throw"Invalid length";switch(X){case 0:return V;case 1:return-1-V;case 2:if(V<0){for(var Q=[],Z=0;(V=h(X))>=0;)Z+=V,Q.push(a(V));var ee=new Uint8Array(Z),te=0;for(D=0;D<Q.length;++D)ee.set(Q[D],te),te+=Q[D].length;return ee}return a(V);case 3:var ne=[];if(V<0)for(;(V=h(X))>=0;)g(ne,V);else g(ne,V);return String.fromCharCode.apply(null,ne);case 4:var re;if(V<0)for(re=[];!d();)re.push(e());else for(re=new Array(V),D=0;D<V;++D)re[D]=e();return re;case 5:var ie={};for(D=0;D<V||V<0&&!d();++D){ie[e()]=e()}return ie;case 6:return H(e(),V);case 7:switch(V){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;default:return q(V)}}}();if(Y!==D.byteLength)throw"Remaining bytes";return V}})?z.call(H,q,H,D):z)||(D.exports=Y)}()},function(D,H,q){"use strict";var z=q(30),Y=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var V=Y(q(5)),W=Y(q(6)),J=Y(q(4)),X=Y(q(8)),$=Y(q(20)),Q=Y(q(36)),Z=Y(q(40)),ee=Y(q(41)),te=Y(q(23)),ne=Y(q(44)),re=Y(q(18)),ie=q(3),oe=z(q(49)),ae=z(q(50)),se=z(q(51)),ue=z(q(52)),ce=z(q(53)),le=z(q(54)),fe=z(q(55)),de=z(q(56)),pe=z(q(57)),he=z(q(58)),ge=z(q(59)),ve=z(q(60)),ye=z(q(61)),be=z(q(62)),me=z(q(63)),_e=z(q(64)),ke=z(q(65)),Pe=z(q(66)),we=(q(25),z(q(67)),Y(q(68))),Oe=Y(q(69)),Te=Y(q(70)),Se=Y(q(71)),Ae=Y(q(73)),Me=Y(q(74)),Ee=Y(q(75)),Re=Y(q(76)),xe=Y(q(82)),Ue=Y(q(83)),je=Y(q(84)),Ke=Y(q(85)),Ie=Y(q(86)),De=Y(q(87)),Le=Y(q(88)),Fe=Y(q(89)),Be=Y(q(90)),Ge=Y(q(91)),He=Y(q(92)),qe=z(q(93)),ze=z(q(94)),Ye=z(q(95)),Ve=z(q(96)),We=z(q(97)),Je=z(q(98)),Xe=z(q(99)),$e=z(q(100)),Qe=z(q(101)),Ze=z(q(102)),et=z(q(103)),tt=z(q(104)),nt=z(q(105)),rt=z(q(106)),it=z(q(107)),ot=z(q(108)),at=z(q(109)),st=z(q(110)),ut=z(q(111)),ct=z(q(112)),lt=z(q(113)),ft=z(q(114)),dt=z(q(115)),pt=z(q(116)),ht=z(q(117)),gt=z(q(118)),vt=z(q(119)),yt=z(q(24)),bt=z(q(120)),mt=Y(q(1)),_t=Y(q(10)),kt=(q(2),Y(q(17)));function Ce(D,H){var q=Object.keys(D);if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(D);H&&(z=z.filter((function(H){return Object.getOwnPropertyDescriptor(D,H).enumerable}))),q.push.apply(q,z)}return q}function Ne(D){for(var H=1;H<arguments.length;H++){var q=null!=arguments[H]?arguments[H]:{};H%2?Ce(Object(q),!0).forEach((function(H){(0,J.default)(D,H,q[H])})):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(q)):Ce(Object(q)).forEach((function(H){Object.defineProperty(D,H,Object.getOwnPropertyDescriptor(q,H))}))}return D}var Pt=function(){function e(D){var H=this;(0,V.default)(this,e),(0,J.default)(this,"_config",void 0),(0,J.default)(this,"_telemetryManager",void 0),(0,J.default)(this,"_listenerManager",void 0),(0,J.default)(this,"_tokenManager",void 0),(0,J.default)(this,"time",void 0),(0,J.default)(this,"publish",void 0),(0,J.default)(this,"fire",void 0),(0,J.default)(this,"history",void 0),(0,J.default)(this,"deleteMessages",void 0),(0,J.default)(this,"messageCounts",void 0),(0,J.default)(this,"fetchMessages",void 0),(0,J.default)(this,"channelGroups",void 0),(0,J.default)(this,"push",void 0),(0,J.default)(this,"hereNow",void 0),(0,J.default)(this,"whereNow",void 0),(0,J.default)(this,"getState",void 0),(0,J.default)(this,"setState",void 0),(0,J.default)(this,"grant",void 0),(0,J.default)(this,"grantToken",void 0),(0,J.default)(this,"audit",void 0),(0,J.default)(this,"subscribe",void 0),(0,J.default)(this,"signal",void 0),(0,J.default)(this,"presence",void 0),(0,J.default)(this,"unsubscribe",void 0),(0,J.default)(this,"unsubscribeAll",void 0),(0,J.default)(this,"addMessageAction",void 0),(0,J.default)(this,"removeMessageAction",void 0),(0,J.default)(this,"getMessageActions",void 0),(0,J.default)(this,"File",void 0),(0,J.default)(this,"encryptFile",void 0),(0,J.default)(this,"decryptFile",void 0),(0,J.default)(this,"listFiles",void 0),(0,J.default)(this,"sendFile",void 0),(0,J.default)(this,"downloadFile",void 0),(0,J.default)(this,"getFileUrl",void 0),(0,J.default)(this,"deleteFile",void 0),(0,J.default)(this,"publishFile",void 0),(0,J.default)(this,"objects",void 0),(0,J.default)(this,"createUser",void 0),(0,J.default)(this,"updateUser",void 0),(0,J.default)(this,"deleteUser",void 0),(0,J.default)(this,"getUser",void 0),(0,J.default)(this,"getUsers",void 0),(0,J.default)(this,"createSpace",void 0),(0,J.default)(this,"updateSpace",void 0),(0,J.default)(this,"deleteSpace",void 0),(0,J.default)(this,"getSpaces",void 0),(0,J.default)(this,"getSpace",void 0),(0,J.default)(this,"getMembers",void 0),(0,J.default)(this,"addMembers",void 0),(0,J.default)(this,"updateMembers",void 0),(0,J.default)(this,"removeMembers",void 0),(0,J.default)(this,"getMemberships",void 0),(0,J.default)(this,"joinSpaces",void 0),(0,J.default)(this,"updateMemberships",void 0),(0,J.default)(this,"leaveSpaces",void 0),(0,J.default)(this,"disconnect",void 0),(0,J.default)(this,"reconnect",void 0),(0,J.default)(this,"destroy",void 0),(0,J.default)(this,"stop",void 0),(0,J.default)(this,"getSubscribedChannels",void 0),(0,J.default)(this,"getSubscribedChannelGroups",void 0),(0,J.default)(this,"addListener",void 0),(0,J.default)(this,"removeListener",void 0),(0,J.default)(this,"removeAllListeners",void 0),(0,J.default)(this,"parseToken",void 0),(0,J.default)(this,"setToken",void 0),(0,J.default)(this,"setTokens",void 0),(0,J.default)(this,"getToken",void 0),(0,J.default)(this,"getTokens",void 0),(0,J.default)(this,"clearTokens",void 0),(0,J.default)(this,"getAuthKey",void 0),(0,J.default)(this,"setAuthKey",void 0),(0,J.default)(this,"setCipherKey",void 0),(0,J.default)(this,"setUUID",void 0),(0,J.default)(this,"getUUID",void 0),(0,J.default)(this,"getFilterExpression",void 0),(0,J.default)(this,"setFilterExpression",void 0),(0,J.default)(this,"setHeartbeatInterval",void 0),(0,J.default)(this,"setProxy",void 0),(0,J.default)(this,"encrypt",void 0),(0,J.default)(this,"decrypt",void 0);var q=D.db,z=D.networking,Y=D.cbor,W=this._config=new X.default({setup:D,db:q}),ee=new $.default({config:W}),mt=D.cryptography;z.init(W);var _t=this._tokenManager=new ne.default(W,Y),kt=this._telemetryManager=new Z.default({maximumSamplesCount:6e4}),Pt={config:W,networking:z,crypto:ee,cryptography:mt,tokenManager:_t,telemetryManager:kt,PubNubFile:D.PubNubFile};this.File=D.PubNubFile,this.encryptFile=function(D,q){return mt.encryptFile(D,q,H.File)},this.decryptFile=function(D,q){return mt.decryptFile(D,q,H.File)};var wt=re.default.bind(this,Pt,yt),Ot=re.default.bind(this,Pt,he),Tt=re.default.bind(this,Pt,ve),St=re.default.bind(this,Pt,be),At=re.default.bind(this,Pt,bt),Mt=this._listenerManager=new te.default,Et=new Q.default({timeEndpoint:wt,leaveEndpoint:Ot,heartbeatEndpoint:Tt,setStateEndpoint:St,subscribeEndpoint:At,crypto:Pt.crypto,config:Pt.config,listenerManager:Mt,getFileUrl:function(D){return(0,Ae.default)(Pt,D)}});this.addListener=Mt.addListener.bind(Mt),this.removeListener=Mt.removeListener.bind(Mt),this.removeAllListeners=Mt.removeAllListeners.bind(Mt),this.parseToken=_t.parseToken.bind(_t),this.setToken=_t.setToken.bind(_t),this.setTokens=_t.setTokens.bind(_t),this.getToken=_t.getToken.bind(_t),this.getTokens=_t.getTokens.bind(_t),this.clearTokens=_t.clearTokens.bind(_t),this.channelGroups={listGroups:re.default.bind(this,Pt,ue),listChannels:re.default.bind(this,Pt,ce),addChannels:re.default.bind(this,Pt,oe),removeChannels:re.default.bind(this,Pt,ae),deleteGroup:re.default.bind(this,Pt,se)},this.push={addChannels:re.default.bind(this,Pt,le),removeChannels:re.default.bind(this,Pt,fe),deleteDevice:re.default.bind(this,Pt,pe),listChannels:re.default.bind(this,Pt,de)},this.hereNow=re.default.bind(this,Pt,me),this.whereNow=re.default.bind(this,Pt,ge),this.getState=re.default.bind(this,Pt,ye),this.setState=Et.adaptStateChange.bind(Et),this.grant=re.default.bind(this,Pt,ct),this.grantToken=re.default.bind(this,Pt,lt),this.audit=re.default.bind(this,Pt,ut),this.publish=re.default.bind(this,Pt,ft),this.fire=function(D,q){return D.replicate=!1,D.storeInHistory=!1,H.publish(D,q)},this.signal=re.default.bind(this,Pt,dt),this.history=re.default.bind(this,Pt,pt),this.deleteMessages=re.default.bind(this,Pt,ht),this.messageCounts=re.default.bind(this,Pt,gt),this.fetchMessages=re.default.bind(this,Pt,vt),this.addMessageAction=re.default.bind(this,Pt,_e),this.removeMessageAction=re.default.bind(this,Pt,ke),this.getMessageActions=re.default.bind(this,Pt,Pe),this.listFiles=re.default.bind(this,Pt,we.default);var Rt=re.default.bind(this,Pt,Oe.default);this.publishFile=re.default.bind(this,Pt,Te.default),this.sendFile=(0,Se.default)({generateUploadUrl:Rt,publishFile:this.publishFile,modules:Pt}),this.getFileUrl=function(D){return(0,Ae.default)(Pt,D)},this.downloadFile=re.default.bind(this,Pt,Me.default),this.deleteFile=re.default.bind(this,Pt,Ee.default),this.objects={getAllUUIDMetadata:re.default.bind(this,Pt,Re.default),getUUIDMetadata:re.default.bind(this,Pt,xe.default),setUUIDMetadata:re.default.bind(this,Pt,Ue.default),removeUUIDMetadata:re.default.bind(this,Pt,je.default),getAllChannelMetadata:re.default.bind(this,Pt,Ke.default),getChannelMetadata:re.default.bind(this,Pt,Ie.default),setChannelMetadata:re.default.bind(this,Pt,De.default),removeChannelMetadata:re.default.bind(this,Pt,Le.default),getChannelMembers:re.default.bind(this,Pt,Fe.default),setChannelMembers:function(D){for(var q=arguments.length,z=new Array(q>1?q-1:0),Y=1;Y<q;Y++)z[Y-1]=arguments[Y];return re.default.call.apply(re.default,[H,Pt,Be.default,Ne({type:"set"},D)].concat(z))},removeChannelMembers:function(D){for(var q=arguments.length,z=new Array(q>1?q-1:0),Y=1;Y<q;Y++)z[Y-1]=arguments[Y];return re.default.call.apply(re.default,[H,Pt,Be.default,Ne({type:"delete"},D)].concat(z))},getMemberships:re.default.bind(this,Pt,Ge.default),setMemberships:function(D){for(var q=arguments.length,z=new Array(q>1?q-1:0),Y=1;Y<q;Y++)z[Y-1]=arguments[Y];return re.default.call.apply(re.default,[H,Pt,He.default,Ne({type:"set"},D)].concat(z))},removeMemberships:function(D){for(var q=arguments.length,z=new Array(q>1?q-1:0),Y=1;Y<q;Y++)z[Y-1]=arguments[Y];return re.default.call.apply(re.default,[H,Pt,He.default,Ne({type:"delete"},D)].concat(z))}},this.createUser=(0,ie.deprecated)(re.default.bind(this,Pt,qe)),this.updateUser=(0,ie.deprecated)(re.default.bind(this,Pt,ze)),this.deleteUser=(0,ie.deprecated)(re.default.bind(this,Pt,Ye)),this.getUser=(0,ie.deprecated)(re.default.bind(this,Pt,Ve)),this.getUsers=(0,ie.deprecated)(re.default.bind(this,Pt,We)),this.createSpace=(0,ie.deprecated)(re.default.bind(this,Pt,Je)),this.updateSpace=(0,ie.deprecated)(re.default.bind(this,Pt,Xe)),this.deleteSpace=(0,ie.deprecated)(re.default.bind(this,Pt,$e)),this.getSpaces=(0,ie.deprecated)(re.default.bind(this,Pt,Qe)),this.getSpace=(0,ie.deprecated)(re.default.bind(this,Pt,Ze)),this.addMembers=(0,ie.deprecated)(re.default.bind(this,Pt,tt)),this.updateMembers=(0,ie.deprecated)(re.default.bind(this,Pt,nt)),this.removeMembers=(0,ie.deprecated)(re.default.bind(this,Pt,rt)),this.getMembers=(0,ie.deprecated)(re.default.bind(this,Pt,et)),this.getMemberships=(0,ie.deprecated)(re.default.bind(this,Pt,it)),this.joinSpaces=(0,ie.deprecated)(re.default.bind(this,Pt,at)),this.updateMemberships=(0,ie.deprecated)(re.default.bind(this,Pt,ot)),this.leaveSpaces=(0,ie.deprecated)(re.default.bind(this,Pt,st)),this.time=wt,this.subscribe=Et.adaptSubscribeChange.bind(Et),this.presence=Et.adaptPresenceChange.bind(Et),this.unsubscribe=Et.adaptUnsubscribeChange.bind(Et),this.disconnect=Et.disconnect.bind(Et),this.reconnect=Et.reconnect.bind(Et),this.destroy=function(D){Et.unsubscribeAll(D),Et.disconnect()},this.stop=this.destroy,this.unsubscribeAll=Et.unsubscribeAll.bind(Et),this.getSubscribedChannels=Et.getSubscribedChannels.bind(Et),this.getSubscribedChannelGroups=Et.getSubscribedChannelGroups.bind(Et),this.encrypt=ee.encrypt.bind(ee),this.decrypt=ee.decrypt.bind(ee),this.getAuthKey=Pt.config.getAuthKey.bind(Pt.config),this.setAuthKey=Pt.config.setAuthKey.bind(Pt.config),this.setCipherKey=Pt.config.setCipherKey.bind(Pt.config),this.getUUID=Pt.config.getUUID.bind(Pt.config),this.setUUID=Pt.config.setUUID.bind(Pt.config),this.getFilterExpression=Pt.config.getFilterExpression.bind(Pt.config),this.setFilterExpression=Pt.config.setFilterExpression.bind(Pt.config),this.setHeartbeatInterval=Pt.config.setHeartbeatInterval.bind(Pt.config),z.hasModule("proxy")&&(this.setProxy=function(D){Pt.config.setProxy(D),H.reconnect()})}return(0,W.default)(e,[{key:"getVersion",value:function(){return this._config.getVersion()}},{key:"_addPnsdkSuffix",value:function(D,H){this._config._addPnsdkSuffix(D,H)}},{key:"networkDownDetected",value:function(){this._listenerManager.announceNetworkDown(),this._config.restore?this.disconnect():this.destroy(!0)}},{key:"networkUpDetected",value:function(){this._listenerManager.announceNetworkUp(),this.reconnect()}}],[{key:"notificationPayload",value:function(D,H){return new ee.default(D,H)}},{key:"generateUUID",value:function(){return kt.default.createUUID()}}]),e}();H.default=Pt,(0,J.default)(Pt,"OPERATIONS",mt.default),(0,J.default)(Pt,"CATEGORIES",_t.default),D.exports=H.default},function(D,H,q){var z=q(7);function i(){if("function"!=typeof WeakMap)return null;var D=new WeakMap;return i=function(){return D},D}D.exports=function(D){if(D&&D.__esModule)return D;if(null===D||"object"!==z(D)&&"function"!=typeof D)return{default:D};var H=i();if(H&&H.has(D))return H.get(D);var q={},Y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var V in D)if(Object.prototype.hasOwnProperty.call(D,V)){var W=Y?Object.getOwnPropertyDescriptor(D,V):null;W&&(W.get||W.set)?Object.defineProperty(q,V,W):q[V]=D[V]}return q.default=D,H&&H.set(D,q),q}},function(D,H,q){var z,Y,V;Y=[H],void 0===(V="function"==typeof(z=function(D){var H={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i};function n(){var D,H,q="";for(D=0;D<32;D++)H=16*Math.random()|0,8!==D&&12!==D&&16!==D&&20!==D||(q+="-"),q+=(12===D?4:16===D?3&H|8:H).toString(16);return q}function r(D,q){var z=H[q||"all"];return z&&z.test(D)||!1}n.isUUID=r,n.VERSION="0.1.0",D.uuid=n,D.isUUID=r})?z.apply(H,Y):z)||(D.exports=V)},function(D,H){var q;q=function(){return this}();try{q=q||new Function("return this")()}catch(D){"object"==typeof window&&(q=window)}D.exports=q},function(D,H,q){"use strict";H.byteLength=function(D){var H=c(D),q=H[0],z=H[1];return 3*(q+z)/4-z},H.toByteArray=function(D){var H,q,z=c(D),W=z[0],J=z[1],X=new V(function(D,H,q){return 3*(H+q)/4-q}(0,W,J)),$=0,Q=J>0?W-4:W;for(q=0;q<Q;q+=4)H=Y[D.charCodeAt(q)]<<18|Y[D.charCodeAt(q+1)]<<12|Y[D.charCodeAt(q+2)]<<6|Y[D.charCodeAt(q+3)],X[$++]=H>>16&255,X[$++]=H>>8&255,X[$++]=255&H;2===J&&(H=Y[D.charCodeAt(q)]<<2|Y[D.charCodeAt(q+1)]>>4,X[$++]=255&H);1===J&&(H=Y[D.charCodeAt(q)]<<10|Y[D.charCodeAt(q+1)]<<4|Y[D.charCodeAt(q+2)]>>2,X[$++]=H>>8&255,X[$++]=255&H);return X},H.fromByteArray=function(D){for(var H,q=D.length,Y=q%3,V=[],W=0,J=q-Y;W<J;W+=16383)V.push(l(D,W,W+16383>J?J:W+16383));1===Y?(H=D[q-1],V.push(z[H>>2]+z[H<<4&63]+"==")):2===Y&&(H=(D[q-2]<<8)+D[q-1],V.push(z[H>>10]+z[H>>4&63]+z[H<<2&63]+"="));return V.join("")};for(var z=[],Y=[],V="undefined"!=typeof Uint8Array?Uint8Array:Array,W="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",J=0,X=W.length;J<X;++J)z[J]=W[J],Y[W.charCodeAt(J)]=J;function c(D){var H=D.length;if(H%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var q=D.indexOf("=");return-1===q&&(q=H),[q,q===H?0:4-q%4]}function l(D,H,q){for(var Y,V,W=[],J=H;J<q;J+=3)Y=(D[J]<<16&16711680)+(D[J+1]<<8&65280)+(255&D[J+2]),W.push(z[(V=Y)>>18&63]+z[V>>12&63]+z[V>>6&63]+z[63&V]);return W.join("")}Y["-".charCodeAt(0)]=62,Y["_".charCodeAt(0)]=63},function(D,H){H.read=function(D,H,q,z,Y){var V,W,J=8*Y-z-1,X=(1<<J)-1,$=X>>1,Q=-7,Z=q?Y-1:0,ee=q?-1:1,te=D[H+Z];for(Z+=ee,V=te&(1<<-Q)-1,te>>=-Q,Q+=J;Q>0;V=256*V+D[H+Z],Z+=ee,Q-=8);for(W=V&(1<<-Q)-1,V>>=-Q,Q+=z;Q>0;W=256*W+D[H+Z],Z+=ee,Q-=8);if(0===V)V=1-$;else{if(V===X)return W?NaN:1/0*(te?-1:1);W+=Math.pow(2,z),V-=$}return(te?-1:1)*W*Math.pow(2,V-z)},H.write=function(D,H,q,z,Y,V){var W,J,X,$=8*V-Y-1,Q=(1<<$)-1,Z=Q>>1,ee=23===Y?Math.pow(2,-24)-Math.pow(2,-77):0,te=z?0:V-1,ne=z?1:-1,re=H<0||0===H&&1/H<0?1:0;for(H=Math.abs(H),isNaN(H)||H===1/0?(J=isNaN(H)?1:0,W=Q):(W=Math.floor(Math.log(H)/Math.LN2),H*(X=Math.pow(2,-W))<1&&(W--,X*=2),(H+=W+Z>=1?ee/X:ee*Math.pow(2,1-Z))*X>=2&&(W++,X/=2),W+Z>=Q?(J=0,W=Q):W+Z>=1?(J=(H*X-1)*Math.pow(2,Y),W+=Z):(J=H*Math.pow(2,Z-1)*Math.pow(2,Y),W=0));Y>=8;D[q+te]=255&J,te+=ne,J/=256,Y-=8);for(W=W<<Y|J,$+=Y;$>0;D[q+te]=255&W,te+=ne,W/=256,$-=8);D[q+te-ne]|=128*re}},function(D,H){var q={}.toString;D.exports=Array.isArray||function(D){return"[object Array]"==q.call(D)}},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var Y=z(q(7)),V=z(q(5)),W=z(q(6)),J=z(q(4)),X=(z(q(20)),z(q(8)),z(q(23)),z(q(37))),$=z(q(38)),Q=z(q(3)),Z=(q(2),z(q(10))),ee=function(){function e(D){var H=D.subscribeEndpoint,q=D.leaveEndpoint,z=D.heartbeatEndpoint,Y=D.setStateEndpoint,W=D.timeEndpoint,Q=D.getFileUrl,Z=D.config,ee=D.crypto,te=D.listenerManager;(0,V.default)(this,e),(0,J.default)(this,"_crypto",void 0),(0,J.default)(this,"_config",void 0),(0,J.default)(this,"_listenerManager",void 0),(0,J.default)(this,"_reconnectionManager",void 0),(0,J.default)(this,"_leaveEndpoint",void 0),(0,J.default)(this,"_heartbeatEndpoint",void 0),(0,J.default)(this,"_setStateEndpoint",void 0),(0,J.default)(this,"_subscribeEndpoint",void 0),(0,J.default)(this,"_getFileUrl",void 0),(0,J.default)(this,"_channels",void 0),(0,J.default)(this,"_presenceChannels",void 0),(0,J.default)(this,"_heartbeatChannels",void 0),(0,J.default)(this,"_heartbeatChannelGroups",void 0),(0,J.default)(this,"_channelGroups",void 0),(0,J.default)(this,"_presenceChannelGroups",void 0),(0,J.default)(this,"_currentTimetoken",void 0),(0,J.default)(this,"_lastTimetoken",void 0),(0,J.default)(this,"_storedTimetoken",void 0),(0,J.default)(this,"_region",void 0),(0,J.default)(this,"_subscribeCall",void 0),(0,J.default)(this,"_heartbeatTimer",void 0),(0,J.default)(this,"_subscriptionStatusAnnounced",void 0),(0,J.default)(this,"_autoNetworkDetection",void 0),(0,J.default)(this,"_isOnline",void 0),(0,J.default)(this,"_pendingChannelSubscriptions",void 0),(0,J.default)(this,"_pendingChannelGroupSubscriptions",void 0),(0,J.default)(this,"_dedupingManager",void 0),this._listenerManager=te,this._config=Z,this._leaveEndpoint=q,this._heartbeatEndpoint=z,this._setStateEndpoint=Y,this._subscribeEndpoint=H,this._getFileUrl=Q,this._crypto=ee,this._channels={},this._presenceChannels={},this._heartbeatChannels={},this._heartbeatChannelGroups={},this._channelGroups={},this._presenceChannelGroups={},this._pendingChannelSubscriptions=[],this._pendingChannelGroupSubscriptions=[],this._currentTimetoken=0,this._lastTimetoken=0,this._storedTimetoken=null,this._subscriptionStatusAnnounced=!1,this._isOnline=!0,this._reconnectionManager=new X.default({timeEndpoint:W}),this._dedupingManager=new $.default({config:Z})}return(0,W.default)(e,[{key:"adaptStateChange",value:function(D,H){var q=this,z=D.state,Y=D.channels,V=void 0===Y?[]:Y,W=D.channelGroups,J=void 0===W?[]:W;return V.forEach((function(D){D in q._channels&&(q._channels[D].state=z)})),J.forEach((function(D){D in q._channelGroups&&(q._channelGroups[D].state=z)})),this._setStateEndpoint({state:z,channels:V,channelGroups:J},H)}},{key:"adaptPresenceChange",value:function(D){var H=this,q=D.connected,z=D.channels,Y=void 0===z?[]:z,V=D.channelGroups,W=void 0===V?[]:V;q?(Y.forEach((function(D){H._heartbeatChannels[D]={state:{}}})),W.forEach((function(D){H._heartbeatChannelGroups[D]={state:{}}}))):(Y.forEach((function(D){D in H._heartbeatChannels&&delete H._heartbeatChannels[D]})),W.forEach((function(D){D in H._heartbeatChannelGroups&&delete H._heartbeatChannelGroups[D]})),!1===this._config.suppressLeaveEvents&&this._leaveEndpoint({channels:Y,channelGroups:W},(function(D){H._listenerManager.announceStatus(D)}))),this.reconnect()}},{key:"adaptSubscribeChange",value:function(D){var H=this,q=D.timetoken,z=D.channels,Y=void 0===z?[]:z,V=D.channelGroups,W=void 0===V?[]:V,J=D.withPresence,X=void 0!==J&&J,$=D.withHeartbeats,Q=void 0!==$&&$;this._config.subscribeKey&&""!==this._config.subscribeKey?(q&&(this._lastTimetoken=this._currentTimetoken,this._currentTimetoken=q),"0"!==this._currentTimetoken&&0!==this._currentTimetoken&&(this._storedTimetoken=this._currentTimetoken,this._currentTimetoken=0),Y.forEach((function(D){H._channels[D]={state:{}},X&&(H._presenceChannels[D]={}),(Q||H._config.getHeartbeatInterval())&&(H._heartbeatChannels[D]={}),H._pendingChannelSubscriptions.push(D)})),W.forEach((function(D){H._channelGroups[D]={state:{}},X&&(H._presenceChannelGroups[D]={}),(Q||H._config.getHeartbeatInterval())&&(H._heartbeatChannelGroups[D]={}),H._pendingChannelGroupSubscriptions.push(D)})),this._subscriptionStatusAnnounced=!1,this.reconnect()):console&&console.log&&console.log("subscribe key missing; aborting subscribe")}},{key:"adaptUnsubscribeChange",value:function(D,H){var q=this,z=D.channels,Y=void 0===z?[]:z,V=D.channelGroups,W=void 0===V?[]:V,J=[],X=[];Y.forEach((function(D){D in q._channels&&(delete q._channels[D],J.push(D),D in q._heartbeatChannels&&delete q._heartbeatChannels[D]),D in q._presenceChannels&&(delete q._presenceChannels[D],J.push(D))})),W.forEach((function(D){D in q._channelGroups&&(delete q._channelGroups[D],X.push(D),D in q._heartbeatChannelGroups&&delete q._heartbeatChannelGroups[D]),D in q._presenceChannelGroups&&(delete q._channelGroups[D],X.push(D))})),0===J.length&&0===X.length||(!1!==this._config.suppressLeaveEvents||H||this._leaveEndpoint({channels:J,channelGroups:X},(function(D){D.affectedChannels=J,D.affectedChannelGroups=X,D.currentTimetoken=q._currentTimetoken,D.lastTimetoken=q._lastTimetoken,q._listenerManager.announceStatus(D)})),0===Object.keys(this._channels).length&&0===Object.keys(this._presenceChannels).length&&0===Object.keys(this._channelGroups).length&&0===Object.keys(this._presenceChannelGroups).length&&(this._lastTimetoken=0,this._currentTimetoken=0,this._storedTimetoken=null,this._region=null,this._reconnectionManager.stopPolling()),this.reconnect())}},{key:"unsubscribeAll",value:function(D){this.adaptUnsubscribeChange({channels:this.getSubscribedChannels(),channelGroups:this.getSubscribedChannelGroups()},D)}},{key:"getHeartbeatChannels",value:function(){return Object.keys(this._heartbeatChannels)}},{key:"getHeartbeatChannelGroups",value:function(){return Object.keys(this._heartbeatChannelGroups)}},{key:"getSubscribedChannels",value:function(){return Object.keys(this._channels)}},{key:"getSubscribedChannelGroups",value:function(){return Object.keys(this._channelGroups)}},{key:"reconnect",value:function(){this._startSubscribeLoop(),this._registerHeartbeatTimer()}},{key:"disconnect",value:function(){this._stopSubscribeLoop(),this._stopHeartbeatTimer(),this._reconnectionManager.stopPolling()}},{key:"_registerHeartbeatTimer",value:function(){this._stopHeartbeatTimer(),0!==this._config.getHeartbeatInterval()&&void 0!==this._config.getHeartbeatInterval()&&(this._performHeartbeatLoop(),this._heartbeatTimer=setInterval(this._performHeartbeatLoop.bind(this),1e3*this._config.getHeartbeatInterval()))}},{key:"_stopHeartbeatTimer",value:function(){this._heartbeatTimer&&(clearInterval(this._heartbeatTimer),this._heartbeatTimer=null)}},{key:"_performHeartbeatLoop",value:function(){var D=this,H=this.getHeartbeatChannels(),q=this.getHeartbeatChannelGroups(),z={};if(0!==H.length||0!==q.length){this.getSubscribedChannels().forEach((function(H){var q=D._channels[H].state;Object.keys(q).length&&(z[H]=q)})),this.getSubscribedChannelGroups().forEach((function(H){var q=D._channelGroups[H].state;Object.keys(q).length&&(z[H]=q)}));this._heartbeatEndpoint({channels:H,channelGroups:q,state:z},function(H){H.error&&D._config.announceFailedHeartbeats&&D._listenerManager.announceStatus(H),H.error&&D._config.autoNetworkDetection&&D._isOnline&&(D._isOnline=!1,D.disconnect(),D._listenerManager.announceNetworkDown(),D.reconnect()),!H.error&&D._config.announceSuccessfulHeartbeats&&D._listenerManager.announceStatus(H)}.bind(this))}}},{key:"_startSubscribeLoop",value:function(){var D=this;this._stopSubscribeLoop();var H={},q=[],z=[];if(Object.keys(this._channels).forEach((function(z){var Y=D._channels[z].state;Object.keys(Y).length&&(H[z]=Y),q.push(z)})),Object.keys(this._presenceChannels).forEach((function(D){q.push("".concat(D,"-pnpres"))})),Object.keys(this._channelGroups).forEach((function(q){var Y=D._channelGroups[q].state;Object.keys(Y).length&&(H[q]=Y),z.push(q)})),Object.keys(this._presenceChannelGroups).forEach((function(D){z.push("".concat(D,"-pnpres"))})),0!==q.length||0!==z.length){var Y={channels:q,channelGroups:z,state:H,timetoken:this._currentTimetoken,filterExpression:this._config.filterExpression,region:this._region};this._subscribeCall=this._subscribeEndpoint(Y,this._processSubscribeResponse.bind(this))}}},{key:"_processSubscribeResponse",value:function(D,H){var q=this;if(D.error)D.category===Z.default.PNTimeoutCategory?this._startSubscribeLoop():D.category===Z.default.PNNetworkIssuesCategory?(this.disconnect(),D.error&&this._config.autoNetworkDetection&&this._isOnline&&(this._isOnline=!1,this._listenerManager.announceNetworkDown()),this._reconnectionManager.onReconnection((function(){q._config.autoNetworkDetection&&!q._isOnline&&(q._isOnline=!0,q._listenerManager.announceNetworkUp()),q.reconnect(),q._subscriptionStatusAnnounced=!0;var H={category:Z.default.PNReconnectedCategory,operation:D.operation,lastTimetoken:q._lastTimetoken,currentTimetoken:q._currentTimetoken};q._listenerManager.announceStatus(H)})),this._reconnectionManager.startPolling(),this._listenerManager.announceStatus(D)):D.category===Z.default.PNBadRequestCategory?(this._stopHeartbeatTimer(),this._listenerManager.announceStatus(D)):this._listenerManager.announceStatus(D);else{if(this._storedTimetoken?(this._currentTimetoken=this._storedTimetoken,this._storedTimetoken=null):(this._lastTimetoken=this._currentTimetoken,this._currentTimetoken=H.metadata.timetoken),!this._subscriptionStatusAnnounced){var z={};z.category=Z.default.PNConnectedCategory,z.operation=D.operation,z.affectedChannels=this._pendingChannelSubscriptions,z.subscribedChannels=this.getSubscribedChannels(),z.affectedChannelGroups=this._pendingChannelGroupSubscriptions,z.lastTimetoken=this._lastTimetoken,z.currentTimetoken=this._currentTimetoken,this._subscriptionStatusAnnounced=!0,this._listenerManager.announceStatus(z),this._pendingChannelSubscriptions=[],this._pendingChannelGroupSubscriptions=[]}var V=H.messages||[],W=this._config,J=W.requestMessageCountThreshold,X=W.dedupeOnSubscribe;if(J&&V.length>=J){var $={};$.category=Z.default.PNRequestMessageCountExceededCategory,$.operation=D.operation,this._listenerManager.announceStatus($)}V.forEach((function(D){var H=D.channel,z=D.subscriptionMatch,V=D.publishMetaData;if(H===z&&(z=null),X){if(q._dedupingManager.isDuplicate(D))return;q._dedupingManager.addEntry(D)}if(Q.default.endsWith(D.channel,"-pnpres")){var W={channel:null,subscription:null};W.actualChannel=null!=z?H:null,W.subscribedChannel=null!=z?z:H,H&&(W.channel=H.substring(0,H.lastIndexOf("-pnpres"))),z&&(W.subscription=z.substring(0,z.lastIndexOf("-pnpres"))),W.action=D.payload.action,W.state=D.payload.data,W.timetoken=V.publishTimetoken,W.occupancy=D.payload.occupancy,W.uuid=D.payload.uuid,W.timestamp=D.payload.timestamp,D.payload.join&&(W.join=D.payload.join),D.payload.leave&&(W.leave=D.payload.leave),D.payload.timeout&&(W.timeout=D.payload.timeout),q._listenerManager.announcePresence(W)}else if(1===D.messageType){var J={channel:null,subscription:null};J.channel=H,J.subscription=z,J.timetoken=V.publishTimetoken,J.publisher=D.issuingClientId,D.userMetadata&&(J.userMetadata=D.userMetadata),J.message=D.payload,q._listenerManager.announceSignal(J)}else if(2===D.messageType){var $={channel:null,subscription:null};$.channel=H,$.subscription=z,$.timetoken=V.publishTimetoken,$.publisher=D.issuingClientId,D.userMetadata&&($.userMetadata=D.userMetadata),$.message={event:D.payload.event,type:D.payload.type,data:D.payload.data},q._listenerManager.announceObjects($),"user"===D.payload.type?q._listenerManager.announceUser($):"space"===D.payload.type?q._listenerManager.announceSpace($):"membership"===D.payload.type&&q._listenerManager.announceMembership($)}else if(3===D.messageType){var Z={};Z.channel=H,Z.subscription=z,Z.timetoken=V.publishTimetoken,Z.publisher=D.issuingClientId,Z.data={messageTimetoken:D.payload.data.messageTimetoken,actionTimetoken:D.payload.data.actionTimetoken,type:D.payload.data.type,uuid:D.issuingClientId,value:D.payload.data.value},Z.event=D.payload.event,q._listenerManager.announceMessageAction(Z)}else if(4===D.messageType){var ee={};ee.channel=H,ee.subscription=z,ee.timetoken=V.publishTimetoken,ee.publisher=D.issuingClientId;var te=D.payload;if(q._config.cipherKey){var ne=q._crypto.decrypt(D.payload);"object"===(0,Y.default)(ne)&&null!==ne&&(te=ne)}D.userMetadata&&(ee.userMetadata=D.userMetadata),ee.message=te.message,ee.file={id:te.file.id,name:te.file.name,url:q._getFileUrl({id:te.file.id,name:te.file.name,channel:H})},q._listenerManager.announceFile(ee)}else{var re={channel:null,subscription:null};re.actualChannel=null!=z?H:null,re.subscribedChannel=null!=z?z:H,re.channel=H,re.subscription=z,re.timetoken=V.publishTimetoken,re.publisher=D.issuingClientId,D.userMetadata&&(re.userMetadata=D.userMetadata),q._config.cipherKey?re.message=q._crypto.decrypt(D.payload):re.message=D.payload,q._listenerManager.announceMessage(re)}})),this._region=H.metadata.region,this._startSubscribeLoop()}}},{key:"_stopSubscribeLoop",value:function(){this._subscribeCall&&("function"==typeof this._subscribeCall.abort&&this._subscribeCall.abort(),this._subscribeCall=null)}}]),e}();H.default=ee,D.exports=H.default},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var Y=z(q(5)),V=z(q(6)),W=z(q(4)),J=(z(q(24)),q(2),function(){function e(D){var H=D.timeEndpoint;(0,Y.default)(this,e),(0,W.default)(this,"_reconnectionCallback",void 0),(0,W.default)(this,"_timeEndpoint",void 0),(0,W.default)(this,"_timeTimer",void 0),this._timeEndpoint=H}return(0,V.default)(e,[{key:"onReconnection",value:function(D){this._reconnectionCallback=D}},{key:"startPolling",value:function(){this._timeTimer=setInterval(this._performTimeLoop.bind(this),3e3)}},{key:"stopPolling",value:function(){clearInterval(this._timeTimer)}},{key:"_performTimeLoop",value:function(){var D=this;this._timeEndpoint((function(H){H.error||(clearInterval(D._timeTimer),D._reconnectionCallback())}))}}]),e}());H.default=J,D.exports=H.default},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var Y=z(q(5)),V=z(q(6)),W=z(q(4)),J=(z(q(8)),q(2),function(){function e(D){var H=D.config;(0,Y.default)(this,e),(0,W.default)(this,"_config",void 0),(0,W.default)(this,"hashHistory",void 0),this.hashHistory=[],this._config=H}return(0,V.default)(e,[{key:"getKey",value:function(D){var H=function(D){var H=0;if(0===D.length)return H;for(var q=0;q<D.length;q+=1){H=(H<<5)-H+D.charCodeAt(q),H&=H}return H}(JSON.stringify(D.payload)).toString(),q=D.publishMetaData.publishTimetoken;return"".concat(q,"-").concat(H)}},{key:"isDuplicate",value:function(D){return this.hashHistory.includes(this.getKey(D))}},{key:"addEntry",value:function(D){this.hashHistory.length>=this._config.maximumCacheSize&&this.hashHistory.shift(),this.hashHistory.push(this.getKey(D))}},{key:"clearHistory",value:function(){this.hashHistory=[]}}]),e}());H.default=J,D.exports=H.default},function(D,H){var q,z,Y=D.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(D){if(q===setTimeout)return setTimeout(D,0);if((q===o||!q)&&setTimeout)return q=setTimeout,setTimeout(D,0);try{return q(D,0)}catch(H){try{return q.call(null,D,0)}catch(H){return q.call(this,D,0)}}}!function(){try{q="function"==typeof setTimeout?setTimeout:o}catch(D){q=o}try{z="function"==typeof clearTimeout?clearTimeout:a}catch(D){z=a}}();var V,W=[],J=!1,X=-1;function d(){J&&V&&(J=!1,V.length?W=V.concat(W):X=-1,W.length&&p())}function p(){if(!J){var D=s(d);J=!0;for(var H=W.length;H;){for(V=W,W=[];++X<H;)V&&V[X].run();X=-1,H=W.length}V=null,J=!1,function(D){if(z===clearTimeout)return clearTimeout(D);if((z===a||!z)&&clearTimeout)return z=clearTimeout,clearTimeout(D);try{z(D)}catch(H){try{return z.call(null,D)}catch(H){return z.call(this,D)}}}(D)}}function h(D,H){this.fun=D,this.array=H}function g(){}Y.nextTick=function(D){var H=new Array(arguments.length-1);if(arguments.length>1)for(var q=1;q<arguments.length;q++)H[q-1]=arguments[q];W.push(new h(D,H)),1!==W.length||J||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},Y.title="browser",Y.browser=!0,Y.env={},Y.argv=[],Y.version="",Y.versions={},Y.on=g,Y.addListener=g,Y.once=g,Y.off=g,Y.removeListener=g,Y.removeAllListeners=g,Y.emit=g,Y.prependListener=g,Y.prependOnceListener=g,Y.listeners=function(D){return[]},Y.binding=function(D){throw new Error("process.binding is not supported")},Y.cwd=function(){return"/"},Y.chdir=function(D){throw new Error("process.chdir is not supported")},Y.umask=function(){return 0}},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var Y=z(q(5)),V=z(q(6)),W=z(q(4)),J=z(q(1)),X=function(){function e(D){(0,Y.default)(this,e),(0,W.default)(this,"_maximumSamplesCount",100),(0,W.default)(this,"_trackedLatencies",{}),(0,W.default)(this,"_latencies",{}),this._maximumSamplesCount=D.maximumSamplesCount||this._maximumSamplesCount}return(0,V.default)(e,[{key:"operationsLatencyForRequest",value:function(){var D=this,H={};return Object.keys(this._latencies).forEach((function(q){var z=D._latencies[q],Y=D._averageLatency(z);Y>0&&(H["l_".concat(q)]=Y)})),H}},{key:"startLatencyMeasure",value:function(D,H){D!==J.default.PNSubscribeOperation&&H&&(this._trackedLatencies[H]=Date.now())}},{key:"stopLatencyMeasure",value:function(D,H){if(D!==J.default.PNSubscribeOperation&&H){var q=this._endpointName(D),z=this._latencies[q],Y=this._trackedLatencies[H];z||(z=this._latencies[q]=[]),z.push(Date.now()-Y),z.length>this._maximumSamplesCount&&z.splice(0,z.length-this._maximumSamplesCount),delete this._trackedLatencies[H]}}},{key:"_averageLatency",value:function(D){return Math.floor(D.reduce((function(D,H){return D+H}),0)/D.length)}},{key:"_endpointName",value:function(D){var H=null;switch(D){case J.default.PNPublishOperation:H="pub";break;case J.default.PNSignalOperation:H="sig";break;case J.default.PNHistoryOperation:case J.default.PNFetchMessagesOperation:case J.default.PNDeleteMessagesOperation:case J.default.PNMessageCounts:H="hist";break;case J.default.PNUnsubscribeOperation:case J.default.PNWhereNowOperation:case J.default.PNHereNowOperation:case J.default.PNHeartbeatOperation:case J.default.PNSetStateOperation:case J.default.PNGetStateOperation:H="pres";break;case J.default.PNAddChannelsToGroupOperation:case J.default.PNRemoveChannelsFromGroupOperation:case J.default.PNChannelGroupsOperation:case J.default.PNRemoveGroupOperation:case J.default.PNChannelsForGroupOperation:H="cg";break;case J.default.PNPushNotificationEnabledChannelsOperation:case J.default.PNRemoveAllPushNotificationsOperation:H="push";break;case J.default.PNCreateUserOperation:case J.default.PNUpdateUserOperation:case J.default.PNDeleteUserOperation:case J.default.PNGetUserOperation:case J.default.PNGetUsersOperation:case J.default.PNCreateSpaceOperation:case J.default.PNUpdateSpaceOperation:case J.default.PNDeleteSpaceOperation:case J.default.PNGetSpaceOperation:case J.default.PNGetSpacesOperation:case J.default.PNGetMembersOperation:case J.default.PNUpdateMembersOperation:case J.default.PNGetMembershipsOperation:case J.default.PNUpdateMembershipsOperation:H="obj";break;case J.default.PNAddMessageActionOperation:case J.default.PNRemoveMessageActionOperation:case J.default.PNGetMessageActionsOperation:H="msga";break;case J.default.PNAccessManagerGrant:case J.default.PNAccessManagerAudit:H="pam";break;case J.default.PNAccessManagerGrantToken:H="pam3";break;default:H="time"}return H}}]),e}();H.default=X,D.exports=H.default},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.default=H.FCMNotificationPayload=H.MPNSNotificationPayload=H.APNSNotificationPayload=void 0;var Y=z(q(42)),V=z(q(19)),W=z(q(14)),J=z(q(16)),X=z(q(13)),$=z(q(5)),Q=z(q(6)),Z=z(q(4));q(2);function d(D,H){var q=Object.keys(D);if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(D);H&&(z=z.filter((function(H){return Object.getOwnPropertyDescriptor(D,H).enumerable}))),q.push.apply(q,z)}return q}function p(D){for(var H=1;H<arguments.length;H++){var q=null!=arguments[H]?arguments[H]:{};H%2?d(Object(q),!0).forEach((function(H){(0,Z.default)(D,H,q[H])})):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(q)):d(Object(q)).forEach((function(H){Object.defineProperty(D,H,Object.getOwnPropertyDescriptor(q,H))}))}return D}function h(D){var H=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(D){return!1}}();return function(){var q,z=(0,X.default)(D);if(H){var Y=(0,X.default)(this).constructor;q=Reflect.construct(z,arguments,Y)}else q=z.apply(this,arguments);return(0,J.default)(this,q)}}var ee=function(){function e(D,H,q){(0,$.default)(this,e),(0,Z.default)(this,"_subtitle",void 0),(0,Z.default)(this,"_payload",void 0),(0,Z.default)(this,"_badge",void 0),(0,Z.default)(this,"_sound",void 0),(0,Z.default)(this,"_title",void 0),(0,Z.default)(this,"_body",void 0),this._payload=D,this._setDefaultPayloadStructure(),this.title=H,this.body=q}return(0,Q.default)(e,[{key:"payload",get:function(){return this._payload}},{key:"title",set:function(D){this._title=D}},{key:"subtitle",set:function(D){this._subtitle=D}},{key:"body",set:function(D){this._body=D}},{key:"badge",set:function(D){this._badge=D}},{key:"sound",set:function(D){this._sound=D}}]),(0,Q.default)(e,[{key:"_setDefaultPayloadStructure",value:function(){}},{key:"toObject",value:function(){return{}}}]),e}(),te=function(D){(0,W.default)(n,D);var H=h(n);function n(){var D;(0,$.default)(this,n);for(var q=arguments.length,z=new Array(q),Y=0;Y<q;Y++)z[Y]=arguments[Y];return D=H.call.apply(H,[this].concat(z)),(0,Z.default)((0,V.default)(D),"_configurations",void 0),(0,Z.default)((0,V.default)(D),"_apnsPushType",void 0),(0,Z.default)((0,V.default)(D),"_isSilent",void 0),D}return(0,Q.default)(n,[{key:"_setDefaultPayloadStructure",value:function(){this._payload.aps={alert:{}}}},{key:"toObject",value:function(){var D=this,H=p({},this._payload),q=H.aps,z=q.alert;if(this._isSilent&&(q["content-available"]=1),"apns2"===this._apnsPushType){if(!this._configurations||!this._configurations.length)throw new ReferenceError("APNS2 configuration is missing");var Y=[];this._configurations.forEach((function(H){Y.push(D._objectFromAPNS2Configuration(H))})),Y.length&&(H.pn_push=Y)}return z&&Object.keys(z).length||delete q.alert,this._isSilent&&(delete q.alert,delete q.badge,delete q.sound,z={}),this._isSilent||Object.keys(z).length?H:null}},{key:"_objectFromAPNS2Configuration",value:function(D){var H=this;if(!D.targets||!D.targets.length)throw new ReferenceError("At least one APNS2 target should be provided");var q=[];D.targets.forEach((function(D){q.push(H._objectFromAPNSTarget(D))}));var z=D.collapseId,Y=D.expirationDate,V={auth_method:"token",targets:q,version:"v2"};return z&&z.length&&(V.collapse_id=z),Y&&(V.expiration=Y.toISOString()),V}},{key:"_objectFromAPNSTarget",value:function(D){if(!D.topic||!D.topic.length)throw new TypeError("Target 'topic' undefined.");var H=D.topic,q=D.environment,z=void 0===q?"development":q,Y=D.excludedDevices,V=void 0===Y?[]:Y,W={topic:H,environment:z};return V.length&&(W.excluded_devices=V),W}},{key:"configurations",set:function(D){D&&D.length&&(this._configurations=D)}},{key:"notification",get:function(){return this._payload.aps}},{key:"title",get:function(){return this._title},set:function(D){D&&D.length&&(this._payload.aps.alert.title=D,this._title=D)}},{key:"subtitle",get:function(){return this._subtitle},set:function(D){D&&D.length&&(this._payload.aps.alert.subtitle=D,this._subtitle=D)}},{key:"body",get:function(){return this._body},set:function(D){D&&D.length&&(this._payload.aps.alert.body=D,this._body=D)}},{key:"badge",get:function(){return this._badge},set:function(D){null!=D&&(this._payload.aps.badge=D,this._badge=D)}},{key:"sound",get:function(){return this._sound},set:function(D){D&&D.length&&(this._payload.aps.sound=D,this._sound=D)}},{key:"silent",set:function(D){this._isSilent=D}}]),n}(ee);H.APNSNotificationPayload=te;var ne=function(D){(0,W.default)(n,D);var H=h(n);function n(){var D;(0,$.default)(this,n);for(var q=arguments.length,z=new Array(q),Y=0;Y<q;Y++)z[Y]=arguments[Y];return D=H.call.apply(H,[this].concat(z)),(0,Z.default)((0,V.default)(D),"_backContent",void 0),(0,Z.default)((0,V.default)(D),"_backTitle",void 0),(0,Z.default)((0,V.default)(D),"_count",void 0),(0,Z.default)((0,V.default)(D),"_type",void 0),D}return(0,Q.default)(n,[{key:"toObject",value:function(){return Object.keys(this._payload).length?p({},this._payload):null}},{key:"backContent",get:function(){return this._backContent},set:function(D){D&&D.length&&(this._payload.back_content=D,this._backContent=D)}},{key:"backTitle",get:function(){return this._backTitle},set:function(D){D&&D.length&&(this._payload.back_title=D,this._backTitle=D)}},{key:"count",get:function(){return this._count},set:function(D){null!=D&&(this._payload.count=D,this._count=D)}},{key:"title",get:function(){return this._title},set:function(D){D&&D.length&&(this._payload.title=D,this._title=D)}},{key:"type",get:function(){return this._type},set:function(D){D&&D.length&&(this._payload.type=D,this._type=D)}},{key:"subtitle",get:function(){return this.backTitle},set:function(D){this.backTitle=D}},{key:"body",get:function(){return this.backContent},set:function(D){this.backContent=D}},{key:"badge",get:function(){return this.count},set:function(D){this.count=D}}]),n}(ee);H.MPNSNotificationPayload=ne;var re=function(D){(0,W.default)(n,D);var H=h(n);function n(){var D;(0,$.default)(this,n);for(var q=arguments.length,z=new Array(q),Y=0;Y<q;Y++)z[Y]=arguments[Y];return D=H.call.apply(H,[this].concat(z)),(0,Z.default)((0,V.default)(D),"_isSilent",void 0),(0,Z.default)((0,V.default)(D),"_icon",void 0),(0,Z.default)((0,V.default)(D),"_tag",void 0),D}return(0,Q.default)(n,[{key:"_setDefaultPayloadStructure",value:function(){this._payload.notification={},this._payload.data={}}},{key:"toObject",value:function(){var D=p({},this._payload.data),H=null,q={};if(Object.keys(this._payload).length>2){var z=this._payload,V=(z.notification,z.data,(0,Y.default)(z,["notification","data"]));D=p(p({},D),V)}return this._isSilent?D.notification=this._payload.notification:H=this._payload.notification,Object.keys(D).length&&(q.data=D),H&&Object.keys(H).length&&(q.notification=H),Object.keys(q).length?q:null}},{key:"notification",get:function(){return this._payload.notification}},{key:"data",get:function(){return this._payload.data}},{key:"title",get:function(){return this._title},set:function(D){D&&D.length&&(this._payload.notification.title=D,this._title=D)}},{key:"body",get:function(){return this._body},set:function(D){D&&D.length&&(this._payload.notification.body=D,this._body=D)}},{key:"sound",get:function(){return this._sound},set:function(D){D&&D.length&&(this._payload.notification.sound=D,this._sound=D)}},{key:"icon",get:function(){return this._icon},set:function(D){D&&D.length&&(this._payload.notification.icon=D,this._icon=D)}},{key:"tag",get:function(){return this._tag},set:function(D){D&&D.length&&(this._payload.notification.tag=D,this._tag=D)}},{key:"silent",set:function(D){this._isSilent=D}}]),n}(ee);H.FCMNotificationPayload=re;var ie=function(){function e(D,H){(0,$.default)(this,e),(0,Z.default)(this,"_payload",void 0),(0,Z.default)(this,"_debugging",void 0),(0,Z.default)(this,"_subtitle",void 0),(0,Z.default)(this,"_badge",void 0),(0,Z.default)(this,"_sound",void 0),(0,Z.default)(this,"_title",void 0),(0,Z.default)(this,"_body",void 0),(0,Z.default)(this,"apns",void 0),(0,Z.default)(this,"mpns",void 0),(0,Z.default)(this,"fcm",void 0),this._payload={apns:{},mpns:{},fcm:{}},this._title=D,this._body=H,this.apns=new te(this._payload.apns,D,H),this.mpns=new ne(this._payload.mpns,D,H),this.fcm=new re(this._payload.fcm,D,H)}return(0,Q.default)(e,[{key:"debugging",set:function(D){this._debugging=D}},{key:"title",get:function(){return this._title}},{key:"body",get:function(){return this._body}},{key:"subtitle",get:function(){return this._subtitle},set:function(D){this._subtitle=D,this.apns.subtitle=D,this.mpns.subtitle=D,this.fcm.subtitle=D}},{key:"badge",get:function(){return this._badge},set:function(D){this._badge=D,this.apns.badge=D,this.mpns.badge=D,this.fcm.badge=D}},{key:"sound",get:function(){return this._sound},set:function(D){this._sound=D,this.apns.sound=D,this.mpns.sound=D,this.fcm.sound=D}}]),(0,Q.default)(e,[{key:"buildPayload",value:function(D){var H={};if(D.includes("apns")||D.includes("apns2")){this.apns._apnsPushType=D.includes("apns")?"apns":"apns2";var q=this.apns.toObject();q&&Object.keys(q).length&&(H.pn_apns=q)}if(D.includes("mpns")){var z=this.mpns.toObject();z&&Object.keys(z).length&&(H.pn_mpns=z)}if(D.includes("fcm")){var Y=this.fcm.toObject();Y&&Object.keys(Y).length&&(H.pn_gcm=Y)}return Object.keys(H).length&&this._debugging&&(H.pn_debug=!0),H}}]),e}();H.default=ie},function(D,H,q){var z=q(43);D.exports=function(D,H){if(null==D)return{};var q,Y,V=z(D,H);if(Object.getOwnPropertySymbols){var W=Object.getOwnPropertySymbols(D);for(Y=0;Y<W.length;Y++)q=W[Y],H.indexOf(q)>=0||Object.prototype.propertyIsEnumerable.call(D,q)&&(V[q]=D[q])}return V}},function(D,H){D.exports=function(D,H){if(null==D)return{};var q,z,Y={},V=Object.keys(D);for(z=0;z<V.length;z++)q=V[z],H.indexOf(q)>=0||(Y[q]=D[q]);return Y}},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var Y=z(q(7)),V=z(q(5)),W=z(q(6)),J=z(q(4)),X=(z(q(8)),q(2),function(){function e(D,H){(0,V.default)(this,e),(0,J.default)(this,"_config",void 0),(0,J.default)(this,"_cbor",void 0),(0,J.default)(this,"_userTokens",void 0),(0,J.default)(this,"_spaceTokens",void 0),(0,J.default)(this,"_userToken",void 0),(0,J.default)(this,"_spaceToken",void 0),this._config=D,this._cbor=H,this._initializeTokens()}return(0,W.default)(e,[{key:"_initializeTokens",value:function(){this._userTokens={},this._spaceTokens={},this._userToken=void 0,this._spaceToken=void 0}},{key:"_setToken",value:function(D){var H=this,q=this.parseToken(D);q&&q.resources&&(q.resources.users&&Object.keys(q.resources.users).forEach((function(q){H._userTokens[q]=D})),q.resources.spaces&&Object.keys(q.resources.spaces).forEach((function(q){H._spaceTokens[q]=D}))),q&&q.patterns&&(q.patterns.users&&Object.keys(q.patterns.users).length>0&&(this._userToken=D),q.patterns.spaces&&Object.keys(q.patterns.spaces).length>0&&(this._spaceToken=D))}},{key:"setToken",value:function(D){D&&D.length>0&&this._setToken(D)}},{key:"setTokens",value:function(D){var H=this;D&&D.length&&"object"===(0,Y.default)(D)&&D.forEach((function(D){H.setToken(D)}))}},{key:"getTokens",value:function(D){var H=this,q={users:{},spaces:{}};return D?(D.user&&(q.user=this._userToken),D.space&&(q.space=this._spaceToken),D.users&&D.users.forEach((function(D){q.users[D]=H._userTokens[D]})),D.space&&D.spaces.forEach((function(D){q.spaces[D]=H._spaceTokens[D]}))):(this._userToken&&(q.user=this._userToken),this._spaceToken&&(q.space=this._spaceToken),Object.keys(this._userTokens).forEach((function(D){q.users[D]=H._userTokens[D]})),Object.keys(this._spaceTokens).forEach((function(D){q.spaces[D]=H._spaceTokens[D]}))),q}},{key:"getToken",value:function(D,H){var q;return H?"user"===D?q=this._userTokens[H]:"space"===D&&(q=this._spaceTokens[H]):"user"===D?q=this._userToken:"space"===D&&(q=this._spaceToken),q}},{key:"extractPermissions",value:function(D){var H={create:!1,read:!1,write:!1,manage:!1,delete:!1};return 16==(16&D)&&(H.create=!0),8==(8&D)&&(H.delete=!0),4==(4&D)&&(H.manage=!0),2==(2&D)&&(H.write=!0),1==(1&D)&&(H.read=!0),H}},{key:"parseToken",value:function(D){var H=this,q=this._cbor.decodeToken(D);if(void 0!==q){var z=Object.keys(q.res.usr),Y=Object.keys(q.res.spc),V=Object.keys(q.pat.usr),W=Object.keys(q.pat.spc),J={version:q.v,timestamp:q.t,ttl:q.ttl},X=z.length>0,$=Y.length>0;(X||$)&&(J.resources={},X&&(J.resources.users={},z.forEach((function(D){J.resources.users[D]=H.extractPermissions(q.res.usr[D])}))),$&&(J.resources.spaces={},Y.forEach((function(D){J.resources.spaces[D]=H.extractPermissions(q.res.spc[D])}))));var Q=V.length>0,Z=W.length>0;return(Q||Z)&&(J.patterns={},Q&&(J.patterns.users={},V.forEach((function(D){J.patterns.users[D]=H.extractPermissions(q.pat.usr[D])}))),Z&&(J.patterns.spaces={},W.forEach((function(D){J.patterns.spaces[D]=H.extractPermissions(q.pat.spc[D])})))),Object.keys(q.meta).length>0&&(J.meta=q.meta),J.signature=q.sig,J}}},{key:"clearTokens",value:function(){this._initializeTokens()}}]),e}());H.default=X,D.exports=H.default},function(D,H,q){var z=q(13),Y=q(15),V=q(46),W=q(47);function s(H){var q="function"==typeof Map?new Map:void 0;return D.exports=s=function(D){if(null===D||!V(D))return D;if("function"!=typeof D)throw new TypeError("Super expression must either be null or a function");if(void 0!==q){if(q.has(D))return q.get(D);q.set(D,t)}function t(){return W(D,arguments,z(this).constructor)}return t.prototype=Object.create(D.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Y(t,D)},s(H)}D.exports=s},function(D,H){D.exports=function(D){return-1!==Function.toString.call(D).indexOf("[native code]")}},function(D,H,q){var z=q(15),Y=q(48);function o(H,q,V){return Y()?D.exports=o=Reflect.construct:D.exports=o=function(D,H,q){var Y=[null];Y.push.apply(Y,H);var V=new(Function.bind.apply(D,Y));return q&&z(V,q.prototype),V},o.apply(null,arguments)}D.exports=o},function(D,H){D.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(D){return!1}}},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNAddChannelsToGroupOperation},H.validateParams=function(D,H){var q=H.channels,z=H.channelGroup,Y=D.config;if(!z)return"Missing Channel Group";if(!q||0===q.length)return"Missing Channels";if(!Y.subscribeKey)return"Missing Subscribe Key"},H.getURL=function(D,H){var q=H.channelGroup,z=D.config;return"/v1/channel-registration/sub-key/".concat(z.subscribeKey,"/channel-group/").concat(V.default.encodeString(q))},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.prepareParams=function(D,H){var q=H.channels;return{add:(void 0===q?[]:q).join(",")}},H.handleResponse=function(){return{}};q(2);var Y=z(q(1)),V=z(q(3))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNRemoveChannelsFromGroupOperation},H.validateParams=function(D,H){var q=H.channels,z=H.channelGroup,Y=D.config;if(!z)return"Missing Channel Group";if(!q||0===q.length)return"Missing Channels";if(!Y.subscribeKey)return"Missing Subscribe Key"},H.getURL=function(D,H){var q=H.channelGroup,z=D.config;return"/v1/channel-registration/sub-key/".concat(z.subscribeKey,"/channel-group/").concat(V.default.encodeString(q))},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.prepareParams=function(D,H){var q=H.channels;return{remove:(void 0===q?[]:q).join(",")}},H.handleResponse=function(){return{}};q(2);var Y=z(q(1)),V=z(q(3))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNRemoveGroupOperation},H.validateParams=function(D,H){var q=H.channelGroup,z=D.config;if(!q)return"Missing Channel Group";if(!z.subscribeKey)return"Missing Subscribe Key"},H.getURL=function(D,H){var q=H.channelGroup,z=D.config;return"/v1/channel-registration/sub-key/".concat(z.subscribeKey,"/channel-group/").concat(V.default.encodeString(q),"/remove")},H.isAuthSupported=function(){return!0},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.prepareParams=function(){return{}},H.handleResponse=function(){return{}};q(2);var Y=z(q(1)),V=z(q(3))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNChannelGroupsOperation},H.validateParams=function(D){if(!D.config.subscribeKey)return"Missing Subscribe Key"},H.getURL=function(D){var H=D.config;return"/v1/channel-registration/sub-key/".concat(H.subscribeKey,"/channel-group")},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.prepareParams=function(){return{}},H.handleResponse=function(D,H){return{groups:H.payload.groups}};q(2);var Y=z(q(1))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNChannelsForGroupOperation},H.validateParams=function(D,H){var q=H.channelGroup,z=D.config;if(!q)return"Missing Channel Group";if(!z.subscribeKey)return"Missing Subscribe Key"},H.getURL=function(D,H){var q=H.channelGroup,z=D.config;return"/v1/channel-registration/sub-key/".concat(z.subscribeKey,"/channel-group/").concat(V.default.encodeString(q))},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.prepareParams=function(){return{}},H.handleResponse=function(D,H){return{channels:H.payload.channels}};q(2);var Y=z(q(1)),V=z(q(3))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNPushNotificationEnabledChannelsOperation},H.validateParams=function(D,H){var q=H.device,z=H.pushGateway,Y=H.channels,V=H.topic,W=D.config;if(!q)return"Missing Device ID (device)";if(!z)return"Missing GW Type (pushGateway: gcm, apns or apns2)";if("apns2"===z&&!V)return"Missing APNS2 topic";if(!Y||0===Y.length)return"Missing Channels";if(!W.subscribeKey)return"Missing Subscribe Key"},H.getURL=function(D,H){var q=H.device,z=H.pushGateway,Y=D.config;if("apns2"===z)return"/v2/push/sub-key/".concat(Y.subscribeKey,"/devices-apns2/").concat(q);return"/v1/push/sub-key/".concat(Y.subscribeKey,"/devices/").concat(q)},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.prepareParams=function(D,H){var q=H.pushGateway,z=H.channels,Y=void 0===z?[]:z,V=H.environment,W=void 0===V?"development":V,J=H.topic,X={type:q,add:Y.join(",")};"apns2"===q&&delete(X=Object.assign({},X,{environment:W,topic:J})).type;return X},H.handleResponse=function(){return{}};q(2);var Y=z(q(1))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNPushNotificationEnabledChannelsOperation},H.validateParams=function(D,H){var q=H.device,z=H.pushGateway,Y=H.channels,V=H.topic,W=D.config;if(!q)return"Missing Device ID (device)";if(!z)return"Missing GW Type (pushGateway: gcm, apns or apns2)";if("apns2"===z&&!V)return"Missing APNS2 topic";if(!Y||0===Y.length)return"Missing Channels";if(!W.subscribeKey)return"Missing Subscribe Key"},H.getURL=function(D,H){var q=H.device,z=H.pushGateway,Y=D.config;if("apns2"===z)return"/v2/push/sub-key/".concat(Y.subscribeKey,"/devices-apns2/").concat(q);return"/v1/push/sub-key/".concat(Y.subscribeKey,"/devices/").concat(q)},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.prepareParams=function(D,H){var q=H.pushGateway,z=H.channels,Y=void 0===z?[]:z,V=H.environment,W=void 0===V?"development":V,J=H.topic,X={type:q,remove:Y.join(",")};"apns2"===q&&delete(X=Object.assign({},X,{environment:W,topic:J})).type;return X},H.handleResponse=function(){return{}};q(2);var Y=z(q(1))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNPushNotificationEnabledChannelsOperation},H.validateParams=function(D,H){var q=H.device,z=H.pushGateway,Y=H.topic,V=D.config;if(!q)return"Missing Device ID (device)";if(!z)return"Missing GW Type (pushGateway: gcm, apns or apns2)";if("apns2"===z&&!Y)return"Missing APNS2 topic";if(!V.subscribeKey)return"Missing Subscribe Key"},H.getURL=function(D,H){var q=H.device,z=H.pushGateway,Y=D.config;if("apns2"===z)return"/v2/push/sub-key/".concat(Y.subscribeKey,"/devices-apns2/").concat(q);return"/v1/push/sub-key/".concat(Y.subscribeKey,"/devices/").concat(q)},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.prepareParams=function(D,H){var q=H.pushGateway,z=H.environment,Y=void 0===z?"development":z,V=H.topic,W={type:q};"apns2"===q&&delete(W=Object.assign({},W,{environment:Y,topic:V})).type;return W},H.handleResponse=function(D,H){return{channels:H}};q(2);var Y=z(q(1))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNRemoveAllPushNotificationsOperation},H.validateParams=function(D,H){var q=H.device,z=H.pushGateway,Y=H.topic,V=D.config;if(!q)return"Missing Device ID (device)";if(!z)return"Missing GW Type (pushGateway: gcm, apns or apns2)";if("apns2"===z&&!Y)return"Missing APNS2 topic";if(!V.subscribeKey)return"Missing Subscribe Key"},H.getURL=function(D,H){var q=H.device,z=H.pushGateway,Y=D.config;if("apns2"===z)return"/v2/push/sub-key/".concat(Y.subscribeKey,"/devices-apns2/").concat(q,"/remove");return"/v1/push/sub-key/".concat(Y.subscribeKey,"/devices/").concat(q,"/remove")},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.prepareParams=function(D,H){var q=H.pushGateway,z=H.environment,Y=void 0===z?"development":z,V=H.topic,W={type:q};"apns2"===q&&delete(W=Object.assign({},W,{environment:Y,topic:V})).type;return W},H.handleResponse=function(){return{}};q(2);var Y=z(q(1))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNUnsubscribeOperation},H.validateParams=function(D){if(!D.config.subscribeKey)return"Missing Subscribe Key"},H.getURL=function(D,H){var q=D.config,z=H.channels,Y=void 0===z?[]:z,W=Y.length>0?Y.join(","):",";return"/v2/presence/sub-key/".concat(q.subscribeKey,"/channel/").concat(V.default.encodeString(W),"/leave")},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.prepareParams=function(D,H){var q=H.channelGroups,z=void 0===q?[]:q,Y={};z.length>0&&(Y["channel-group"]=z.join(","));return Y},H.handleResponse=function(){return{}};q(2);var Y=z(q(1)),V=z(q(3))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNWhereNowOperation},H.validateParams=function(D){if(!D.config.subscribeKey)return"Missing Subscribe Key"},H.getURL=function(D,H){var q=D.config,z=H.uuid,Y=void 0===z?q.UUID:z;return"/v2/presence/sub-key/".concat(q.subscribeKey,"/uuid/").concat(Y)},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.prepareParams=function(){return{}},H.handleResponse=function(D,H){if(!H.payload)return{channels:[]};return{channels:H.payload.channels}};q(2);var Y=z(q(1))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNHeartbeatOperation},H.validateParams=function(D){if(!D.config.subscribeKey)return"Missing Subscribe Key"},H.getURL=function(D,H){var q=D.config,z=H.channels,Y=void 0===z?[]:z,W=Y.length>0?Y.join(","):",";return"/v2/presence/sub-key/".concat(q.subscribeKey,"/channel/").concat(V.default.encodeString(W),"/heartbeat")},H.isAuthSupported=function(){return!0},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.prepareParams=function(D,H){var q=H.channelGroups,z=void 0===q?[]:q,Y=H.state,V=void 0===Y?{}:Y,W=D.config,J={};z.length>0&&(J["channel-group"]=z.join(","));return J.state=JSON.stringify(V),J.heartbeat=W.getPresenceTimeout(),J},H.handleResponse=function(){return{}};q(2);var Y=z(q(1)),V=z(q(3))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNGetStateOperation},H.validateParams=function(D){if(!D.config.subscribeKey)return"Missing Subscribe Key"},H.getURL=function(D,H){var q=D.config,z=H.uuid,Y=void 0===z?q.UUID:z,W=H.channels,J=void 0===W?[]:W,X=J.length>0?J.join(","):",";return"/v2/presence/sub-key/".concat(q.subscribeKey,"/channel/").concat(V.default.encodeString(X),"/uuid/").concat(Y)},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.prepareParams=function(D,H){var q=H.channelGroups,z=void 0===q?[]:q,Y={};z.length>0&&(Y["channel-group"]=z.join(","));return Y},H.handleResponse=function(D,H,q){var z=q.channels,Y=void 0===z?[]:z,V=q.channelGroups,W=void 0===V?[]:V,J={};1===Y.length&&0===W.length?J[Y[0]]=H.payload:J=H.payload;return{channels:J}};q(2);var Y=z(q(1)),V=z(q(3))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNSetStateOperation},H.validateParams=function(D,H){var q=D.config,z=H.state,Y=H.channels,V=void 0===Y?[]:Y,W=H.channelGroups,J=void 0===W?[]:W;if(!z)return"Missing State";if(!q.subscribeKey)return"Missing Subscribe Key";if(0===V.length&&0===J.length)return"Please provide a list of channels and/or channel-groups"},H.getURL=function(D,H){var q=D.config,z=H.channels,Y=void 0===z?[]:z,W=Y.length>0?Y.join(","):",";return"/v2/presence/sub-key/".concat(q.subscribeKey,"/channel/").concat(V.default.encodeString(W),"/uuid/").concat(q.UUID,"/data")},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.prepareParams=function(D,H){var q=H.state,z=H.channelGroups,Y=void 0===z?[]:z,V={};V.state=JSON.stringify(q),Y.length>0&&(V["channel-group"]=Y.join(","));return V},H.handleResponse=function(D,H){return{state:H.payload}};q(2);var Y=z(q(1)),V=z(q(3))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return V.default.PNHereNowOperation},H.validateParams=function(D){if(!D.config.subscribeKey)return"Missing Subscribe Key"},H.getURL=function(D,H){var q=D.config,z=H.channels,Y=void 0===z?[]:z,V=H.channelGroups,J=void 0===V?[]:V,X="/v2/presence/sub-key/".concat(q.subscribeKey);if(Y.length>0||J.length>0){var $=Y.length>0?Y.join(","):",";X+="/channel/".concat(W.default.encodeString($))}return X},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.prepareParams=function(D,H){var q=H.channelGroups,z=void 0===q?[]:q,Y=H.includeUUIDs,V=void 0===Y||Y,W=H.includeState,J=void 0!==W&&W,X=H.queryParameters,$=void 0===X?{}:X,Q={};V||(Q.disable_uuids=1);J&&(Q.state=1);z.length>0&&(Q["channel-group"]=z.join(","));return Q=u(u({},Q),$)},H.handleResponse=function(D,H,q){var z,Y=q.channels,V=void 0===Y?[]:Y,W=q.channelGroups,J=void 0===W?[]:W,X=q.includeUUIDs,$=void 0===X||X,Q=q.includeState,Z=void 0!==Q&&Q;z=V.length>1||J.length>0||0===J.length&&0===V.length?function(){var D={};return D.totalChannels=H.payload.total_channels,D.totalOccupancy=H.payload.total_occupancy,D.channels={},Object.keys(H.payload.channels).forEach((function(q){var z=H.payload.channels[q],Y=[];return D.channels[q]={occupants:Y,name:q,occupancy:z.occupancy},$&&z.uuids.forEach((function(D){Z?Y.push({state:D.state,uuid:D.uuid}):Y.push({state:null,uuid:D})})),D})),D}():function(){var D={},q=[];return D.totalChannels=1,D.totalOccupancy=H.occupancy,D.channels={},D.channels[V[0]]={occupants:q,name:V[0],occupancy:H.occupancy},$&&H.uuids&&H.uuids.forEach((function(D){Z?q.push({state:D.state,uuid:D.uuid}):q.push({state:null,uuid:D})})),D}();return z};var Y=z(q(4)),V=(q(2),z(q(1))),W=z(q(3));function s(D,H){var q=Object.keys(D);if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(D);H&&(z=z.filter((function(H){return Object.getOwnPropertyDescriptor(D,H).enumerable}))),q.push.apply(q,z)}return q}function u(D){for(var H=1;H<arguments.length;H++){var q=null!=arguments[H]?arguments[H]:{};H%2?s(Object(q),!0).forEach((function(H){(0,Y.default)(D,H,q[H])})):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(q)):s(Object(q)).forEach((function(H){Object.defineProperty(D,H,Object.getOwnPropertyDescriptor(q,H))}))}return D}},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNAddMessageActionOperation},H.validateParams=function(D,H){var q=D.config,z=H.action,Y=H.channel;if(!H.messageTimetoken)return"Missing message timetoken";if(!q.subscribeKey)return"Missing Subscribe Key";if(!Y)return"Missing message channel";if(!z)return"Missing Action";if(!z.value)return"Missing Action.value";if(!z.type)return"Missing Action.type";if(z.type.length>15)return"Action.type value exceed maximum length of 15"},H.usePost=function(){return!0},H.postURL=function(D,H){var q=D.config,z=H.channel,Y=H.messageTimetoken;return"/v1/message-actions/".concat(q.subscribeKey,"/channel/").concat(z,"/message/").concat(Y)},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.getRequestHeaders=function(){return{"Content-Type":"application/json"}},H.isAuthSupported=function(){return!0},H.prepareParams=function(){return{}},H.postPayload=function(D,H){return H.action},H.handleResponse=function(D,H){return{data:H.data}};q(2);var Y=z(q(1))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNRemoveMessageActionOperation},H.validateParams=function(D,H){var q=D.config,z=H.channel,Y=H.actionTimetoken;if(!H.messageTimetoken)return"Missing message timetoken";if(!Y)return"Missing action timetoken";if(!q.subscribeKey)return"Missing Subscribe Key";if(!z)return"Missing message channel"},H.useDelete=function(){return!0},H.getURL=function(D,H){var q=D.config,z=H.channel,Y=H.actionTimetoken,V=H.messageTimetoken;return"/v1/message-actions/".concat(q.subscribeKey,"/channel/").concat(z,"/message/").concat(V,"/action/").concat(Y)},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.prepareParams=function(){return{}},H.handleResponse=function(D,H){return{data:H.data}};q(2);var Y=z(q(1))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNGetMessageActionsOperation},H.validateParams=function(D,H){var q=D.config,z=H.channel;if(!q.subscribeKey)return"Missing Subscribe Key";if(!z)return"Missing message channel"},H.getURL=function(D,H){var q=D.config,z=H.channel;return"/v1/message-actions/".concat(q.subscribeKey,"/channel/").concat(z)},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.prepareParams=function(D,H){var q=H.limit,z=H.start,Y=H.end,V={};q&&(V.limit=q);z&&(V.start=z);Y&&(V.end=Y);return V},H.handleResponse=function(D,H){var q={data:H.data,start:null,end:null};q.data.length&&(q.end=q.data[q.data.length-1].actionTimetoken,q.start=q.data[0].actionTimetoken);return q};q(2);var Y=z(q(1))},function(D,H,q){},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var Y=z(q(1)),V={getOperation:function(){return Y.default.PNListFilesOperation},validateParams:function(D,H){if(!(null==H?void 0:H.channel))return"channel can't be empty"},getURL:function(D,H){var q=D.config;return"/v1/files/".concat(q.subscribeKey,"/channels/").concat(H.channel,"/files")},getRequestTimeout:function(D){return D.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(D){return D.tokenManager.getToken("fileUpload")},prepareParams:function(D,H){var q={};return H.limit&&(q.limit=H.limit),H.next&&(q.next=H.next),q},handleResponse:function(D,H){return{status:H.status,data:H.data,next:H.next,count:H.count}}};H.default=V,D.exports=H.default},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var Y=z(q(1)),V={getOperation:function(){return Y.default.PNGenerateUploadUrlOperation},validateParams:function(D,H){return(null==H?void 0:H.channel)?(null==H?void 0:H.name)?void 0:"name can't be empty":"channel can't be empty"},usePost:function(){return!0},postURL:function(D,H){var q=D.config;return"/v1/files/".concat(q.subscribeKey,"/channels/").concat(H.channel,"/generate-upload-url")},postPayload:function(D,H){return{name:H.name}},getRequestTimeout:function(D){return D.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(D){return D.tokenManager.getToken("fileUpload")},prepareParams:function(){return{}},handleResponse:function(D,H){return{status:H.status,data:H.data,file_upload_request:H.file_upload_request}}};H.default=V,D.exports=H.default},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var Y=z(q(7)),V=z(q(1)),W=z(q(3)),J={getOperation:function(){return V.default.PNPublishFileOperation},validateParams:function(D,H){return(null==H?void 0:H.channel)?(null==H?void 0:H.fileId)?(null==H?void 0:H.fileName)?void 0:"file name can't be empty":"file id can't be empty":"channel can't be empty"},getURL:function(D,H){var q=D.config,z=q.publishKey,Y=q.subscribeKey,V=function(D,H){var q=D.crypto,z=D.config,Y=JSON.stringify(H);return z.cipherKey&&(Y=q.encrypt(Y),Y=JSON.stringify(Y)),Y||""}(D,{message:H.message,file:{name:H.fileName,id:H.fileId}});return"/v1/files/publish-file/".concat(z,"/").concat(Y,"/0/").concat(H.channel,"/0/").concat(W.default.encodeString(V))},getRequestTimeout:function(D){return D.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(D){return D.tokenManager.getToken("fileUpload")},prepareParams:function(D,H){var q={};return H.ttl&&(q.ttl=H.ttl),void 0!==H.storeInHistory&&(q.store=H.storeInHistory?"1":"0"),H.meta&&"object"===(0,Y.default)(H.meta)&&(q.meta=JSON.stringify(H.meta)),q},handleResponse:function(D,H){return{timetoken:H[2]}}};H.default=J,D.exports=H.default},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var Y=z(q(11)),V=z(q(12)),W=q(18),s=function(D){return new Promise((function(H){var q="";D.on("data",(function(D){q+=D.toString("utf8")})),D.on("end",(function(){H(q)}))}))};H.default=function(D){var H,q,z,J,X,$,Q,Z,ee,te=(z=(H=D).generateUploadUrl,J=H.publishFile,X=H.modules,$=X.PubNubFile,Q=X.config,Z=X.cryptography,ee=X.networking,q=(0,V.default)(Y.default.mark((function e(D){var H,q,V,X,te,ne,re,ie,oe,ae,se,ue,ce,le,fe,de,pe,he,ge,ve,ye,be;return Y.default.wrap((function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(H=D.channel,q=D.file,V=D.message,X=D.cipherKey,te=D.meta,ne=D.ttl,re=D.storeInHistory,H){Y.next=3;break}throw new W.PubNubError("Validation failed, check status for details",(0,W.createValidationError)("channel can't be empty"));case 3:if(q){Y.next=5;break}throw new W.PubNubError("Validation failed, check status for details",(0,W.createValidationError)("file can't be empty"));case 5:return ie=$.create(q),Y.next=8,z({channel:H,name:ie.name});case 8:if(oe=Y.sent,ae=oe.file_upload_request,se=ae.url,ue=ae.form_fields,ce=oe.data,le=ce.id,fe=ce.name,!$.supportsEncryptFile||!(null!=X?X:Q.cipherKey)){Y.next=19;break}return Y.next=18,Z.encryptFile(null!=X?X:Q.cipherKey,ie,$);case 18:ie=Y.sent;case 19:if(de=ue,ie.mimeType&&(de=ue.map((function(D){return"Content-Type"===D.key?{key:D.key,value:ie.mimeType}:D}))),Y.prev=21,!$.supportsFileUri||!q.uri){Y.next=34;break}return Y.t0=ee,Y.t1=se,Y.t2=de,Y.next=28,ie.toFileUri();case 28:return Y.t3=Y.sent,Y.next=31,Y.t0.POSTFILE.call(Y.t0,Y.t1,Y.t2,Y.t3);case 31:pe=Y.sent,Y.next=71;break;case 34:if(!$.supportsFile){Y.next=46;break}return Y.t4=ee,Y.t5=se,Y.t6=de,Y.next=40,ie.toFile();case 40:return Y.t7=Y.sent,Y.next=43,Y.t4.POSTFILE.call(Y.t4,Y.t5,Y.t6,Y.t7);case 43:pe=Y.sent,Y.next=71;break;case 46:if(!$.supportsBuffer){Y.next=58;break}return Y.t8=ee,Y.t9=se,Y.t10=de,Y.next=52,ie.toBuffer();case 52:return Y.t11=Y.sent,Y.next=55,Y.t8.POSTFILE.call(Y.t8,Y.t9,Y.t10,Y.t11);case 55:pe=Y.sent,Y.next=71;break;case 58:if(!$.supportsBlob){Y.next=70;break}return Y.t12=ee,Y.t13=se,Y.t14=de,Y.next=64,ie.toBlob();case 64:return Y.t15=Y.sent,Y.next=67,Y.t12.POSTFILE.call(Y.t12,Y.t13,Y.t14,Y.t15);case 67:pe=Y.sent,Y.next=71;break;case 70:throw new Error("Unsupported environment");case 71:Y.next=80;break;case 73:return Y.prev=73,Y.t16=Y.catch(21),Y.next=77,s(Y.t16.response);case 77:throw he=Y.sent,ge=/<Message>(.*)<\/Message>/gi.exec(he),new W.PubNubError(ge?"Upload to bucket failed: ".concat(ge[1]):"Upload to bucket failed.",Y.t16);case 80:if(204===pe.status){Y.next=82;break}throw new W.PubNubError("Upload to bucket was unsuccessful",pe);case 82:ve=5,ye=!1,be={timetoken:"0"};case 85:if(ye||!(ve>0)){Y.next=98;break}return Y.prev=86,Y.next=89,J({channel:H,message:V,fileId:le,fileName:fe,meta:te,storeInHistory:re,ttl:ne});case 89:be=Y.sent,ye=!0,Y.next=96;break;case 93:Y.prev=93,Y.t17=Y.catch(86),ve-=1;case 96:Y.next=85;break;case 98:if(ye){Y.next=102;break}throw new W.PubNubError("Publish failed. You may want to execute that operation manually using pubnub.publishFile",{channel:H,id:le,name:fe});case 102:return Y.abrupt("return",{timetoken:be.timetoken,id:le,name:fe});case 103:case"end":return Y.stop()}}),e,null,[[21,73],[86,93]])}))),function(D){return q.apply(this,arguments)});return function(D,H){var q=te(D);return"function"==typeof H?(q.then((function(D){return H(null,D)})).catch((function(D){return H(D,null)})),q):q}},D.exports=H.default},function(D,H,q){var z=function(D){"use strict";var H=Object.prototype,q=H.hasOwnProperty,z="function"==typeof Symbol?Symbol:{},Y=z.iterator||"@@iterator",V=z.asyncIterator||"@@asyncIterator",W=z.toStringTag||"@@toStringTag";function s(D,H,q){return Object.defineProperty(D,H,{value:q,enumerable:!0,configurable:!0,writable:!0}),D[H]}try{s({},"")}catch(D){s=function(D,H,q){return D[H]=q}}function u(D,H,q,z){var Y=H&&H.prototype instanceof f?H:f,V=Object.create(Y.prototype),W=new w(z||[]);return V._invoke=function(D,H,q){var z="suspendedStart";return function(Y,V){if("executing"===z)throw new Error("Generator is already running");if("completed"===z){if("throw"===Y)throw V;return T()}for(q.method=Y,q.arg=V;;){var W=q.delegate;if(W){var X=_(W,q);if(X){if(X===J)continue;return X}}if("next"===q.method)q.sent=q._sent=q.arg;else if("throw"===q.method){if("suspendedStart"===z)throw z="completed",q.arg;q.dispatchException(q.arg)}else"return"===q.method&&q.abrupt("return",q.arg);z="executing";var $=c(D,H,q);if("normal"===$.type){if(z=q.done?"completed":"suspendedYield",$.arg===J)continue;return{value:$.arg,done:q.done}}"throw"===$.type&&(z="completed",q.method="throw",q.arg=$.arg)}}}(D,q,W),V}function c(D,H,q){try{return{type:"normal",arg:D.call(H,q)}}catch(D){return{type:"throw",arg:D}}}D.wrap=u;var J={};function f(){}function d(){}function p(){}var X={};X[Y]=function(){return this};var $=Object.getPrototypeOf,Q=$&&$($(O([])));Q&&Q!==H&&q.call(Q,Y)&&(X=Q);var Z=p.prototype=f.prototype=Object.create(X);function b(D){["next","throw","return"].forEach((function(H){s(D,H,(function(D){return this._invoke(H,D)}))}))}function m(D,H){var z;this._invoke=function(Y,V){function a(){return new H((function(z,W){!function r(z,Y,V,W){var J=c(D[z],D,Y);if("throw"!==J.type){var X=J.arg,$=X.value;return $&&"object"==typeof $&&q.call($,"__await")?H.resolve($.__await).then((function(D){r("next",D,V,W)}),(function(D){r("throw",D,V,W)})):H.resolve($).then((function(D){X.value=D,V(X)}),(function(D){return r("throw",D,V,W)}))}W(J.arg)}(Y,V,z,W)}))}return z=z?z.then(a,a):a()}}function _(D,H){var q=D.iterator[H.method];if(void 0===q){if(H.delegate=null,"throw"===H.method){if(D.iterator.return&&(H.method="return",H.arg=void 0,_(D,H),"throw"===H.method))return J;H.method="throw",H.arg=new TypeError("The iterator does not provide a 'throw' method")}return J}var z=c(q,D.iterator,H.arg);if("throw"===z.type)return H.method="throw",H.arg=z.arg,H.delegate=null,J;var Y=z.arg;return Y?Y.done?(H[D.resultName]=Y.value,H.next=D.nextLoc,"return"!==H.method&&(H.method="next",H.arg=void 0),H.delegate=null,J):Y:(H.method="throw",H.arg=new TypeError("iterator result is not an object"),H.delegate=null,J)}function k(D){var H={tryLoc:D[0]};1 in D&&(H.catchLoc=D[1]),2 in D&&(H.finallyLoc=D[2],H.afterLoc=D[3]),this.tryEntries.push(H)}function P(D){var H=D.completion||{};H.type="normal",delete H.arg,D.completion=H}function w(D){this.tryEntries=[{tryLoc:"root"}],D.forEach(k,this),this.reset(!0)}function O(D){if(D){var H=D[Y];if(H)return H.call(D);if("function"==typeof D.next)return D;if(!isNaN(D.length)){var z=-1,V=function t(){for(;++z<D.length;)if(q.call(D,z))return t.value=D[z],t.done=!1,t;return t.value=void 0,t.done=!0,t};return V.next=V}}return{next:T}}function T(){return{value:void 0,done:!0}}return d.prototype=Z.constructor=p,p.constructor=d,d.displayName=s(p,W,"GeneratorFunction"),D.isGeneratorFunction=function(D){var H="function"==typeof D&&D.constructor;return!!H&&(H===d||"GeneratorFunction"===(H.displayName||H.name))},D.mark=function(D){return Object.setPrototypeOf?Object.setPrototypeOf(D,p):(D.__proto__=p,s(D,W,"GeneratorFunction")),D.prototype=Object.create(Z),D},D.awrap=function(D){return{__await:D}},b(m.prototype),m.prototype[V]=function(){return this},D.AsyncIterator=m,D.async=function(H,q,z,Y,V){void 0===V&&(V=Promise);var W=new m(u(H,q,z,Y),V);return D.isGeneratorFunction(q)?W:W.next().then((function(D){return D.done?D.value:W.next()}))},b(Z),s(Z,W,"Generator"),Z[Y]=function(){return this},Z.toString=function(){return"[object Generator]"},D.keys=function(D){var H=[];for(var q in D)H.push(q);return H.reverse(),function n(){for(;H.length;){var q=H.pop();if(q in D)return n.value=q,n.done=!1,n}return n.done=!0,n}},D.values=O,w.prototype={constructor:w,reset:function(D){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!D)for(var H in this)"t"===H.charAt(0)&&q.call(this,H)&&!isNaN(+H.slice(1))&&(this[H]=void 0)},stop:function(){this.done=!0;var D=this.tryEntries[0].completion;if("throw"===D.type)throw D.arg;return this.rval},dispatchException:function(D){if(this.done)throw D;var H=this;function r(q,z){return V.type="throw",V.arg=D,H.next=q,z&&(H.method="next",H.arg=void 0),!!z}for(var z=this.tryEntries.length-1;z>=0;--z){var Y=this.tryEntries[z],V=Y.completion;if("root"===Y.tryLoc)return r("end");if(Y.tryLoc<=this.prev){var W=q.call(Y,"catchLoc"),J=q.call(Y,"finallyLoc");if(W&&J){if(this.prev<Y.catchLoc)return r(Y.catchLoc,!0);if(this.prev<Y.finallyLoc)return r(Y.finallyLoc)}else if(W){if(this.prev<Y.catchLoc)return r(Y.catchLoc,!0)}else{if(!J)throw new Error("try statement without catch or finally");if(this.prev<Y.finallyLoc)return r(Y.finallyLoc)}}}},abrupt:function(D,H){for(var z=this.tryEntries.length-1;z>=0;--z){var Y=this.tryEntries[z];if(Y.tryLoc<=this.prev&&q.call(Y,"finallyLoc")&&this.prev<Y.finallyLoc){var V=Y;break}}V&&("break"===D||"continue"===D)&&V.tryLoc<=H&&H<=V.finallyLoc&&(V=null);var W=V?V.completion:{};return W.type=D,W.arg=H,V?(this.method="next",this.next=V.finallyLoc,J):this.complete(W)},complete:function(D,H){if("throw"===D.type)throw D.arg;return"break"===D.type||"continue"===D.type?this.next=D.arg:"return"===D.type?(this.rval=this.arg=D.arg,this.method="return",this.next="end"):"normal"===D.type&&H&&(this.next=H),J},finish:function(D){for(var H=this.tryEntries.length-1;H>=0;--H){var q=this.tryEntries[H];if(q.finallyLoc===D)return this.complete(q.completion,q.afterLoc),P(q),J}},catch:function(D){for(var H=this.tryEntries.length-1;H>=0;--H){var q=this.tryEntries[H];if(q.tryLoc===D){var z=q.completion;if("throw"===z.type){var Y=z.arg;P(q)}return Y}}throw new Error("illegal catch attempt")},delegateYield:function(D,H,q){return this.delegate={iterator:O(D),resultName:H,nextLoc:q},"next"===this.method&&(this.arg=void 0),J}},D}(D.exports);try{regeneratorRuntime=z}catch(D){Function("r","regeneratorRuntime = r")(z)}},function(D,H,q){"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var z=q(18);H.default=function(D,H){var q=H.channel,Y=H.id,V=H.name,W=D.config;if(!q)throw new z.PubNubError("Validation failed, check status for details",(0,z.createValidationError)("channel can't be empty"));if(!Y)throw new z.PubNubError("Validation failed, check status for details",(0,z.createValidationError)("file id can't be empty"));if(!V)throw new z.PubNubError("Validation failed, check status for details",(0,z.createValidationError)("file name can't be empty"));var J="/v1/files/".concat(W.subscribeKey,"/channels/").concat(q,"/files/").concat(Y,"/").concat(V),X={};X.uuid=W.getUUID(),X.pnsdk=(0,z.generatePNSDK)(W),W.getAuthKey()&&(X.auth=W.getAuthKey()),W.secretKey&&(0,z.signRequest)(D,J,X,{},{getOperation:function(){return"PubNubGetFileUrlOperation"}});var $=Object.keys(X).map((function(D){return"".concat(encodeURIComponent(D),"=").concat(encodeURIComponent(X[D]))})).join("&");return""!==$?"https://".concat(W.origin).concat(J,"?").concat($):"https://".concat(W.origin).concat(J)},D.exports=H.default},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var Y,V=z(q(11)),W=z(q(12)),J=z(q(1)),X={getOperation:function(){return J.default.PNDownloadFileOperation},validateParams:function(D,H){return(null==H?void 0:H.channel)?(null==H?void 0:H.name)?(null==H?void 0:H.id)?void 0:"id can't be empty":"name can't be empty":"channel can't be empty"},useGetFile:function(){return!0},getFileURL:function(D,H){var q=D.config;return"/v1/files/".concat(q.subscribeKey,"/channels/").concat(H.channel,"/files/").concat(H.id,"/").concat(H.name)},getRequestTimeout:function(D){return D.config.getTransactionTimeout()},isAuthSupported:function(){return!0},ignoreBody:function(){return!0},forceBuffered:function(){return!0},prepareParams:function(){return{}},handleResponse:(Y=(0,W.default)(V.default.mark((function e(D,H,q){var z,Y,W,J,X,$;return V.default.wrap((function(V){for(;;)switch(V.prev=V.next){case 0:if(Y=D.PubNubFile,W=D.config,J=D.cryptography,X=H.response.body,!Y.supportsEncryptFile||!W.cipherKey){V.next=6;break}return V.next=5,J.decrypt(null!==($=q.cipherKey)&&void 0!==$?$:W.cipherKey,X);case 5:X=V.sent;case 6:return V.abrupt("return",Y.create({data:X,name:null!==(z=H.response.name)&&void 0!==z?z:q.name,mimeType:H.response.type}));case 7:case"end":return V.stop()}}),e)}))),function(D,H,q){return Y.apply(this,arguments)})};H.default=X,D.exports=H.default},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var Y=z(q(1)),V={getOperation:function(){return Y.default.PNListFilesOperation},validateParams:function(D,H){return(null==H?void 0:H.channel)?(null==H?void 0:H.id)?(null==H?void 0:H.name)?void 0:"file name can't be empty":"file id can't be empty":"channel can't be empty"},useDelete:function(){return!0},getURL:function(D,H){var q=D.config;return"/v1/files/".concat(q.subscribeKey,"/channels/").concat(H.channel,"/files/").concat(H.id,"/").concat(H.name)},getRequestTimeout:function(D){return D.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(D){return D.tokenManager.getToken("fileUpload")},prepareParams:function(){return{}},handleResponse:function(D,H){return{status:H.status}}};H.default=V,D.exports=H.default},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var Y=z(q(9)),V=z(q(1)),W={getOperation:function(){return V.default.PNGetAllUUIDMetadataOperation},validateParams:function(){},getURL:function(D){var H=D.config;return"/v2/objects/".concat(H.subscribeKey,"/uuids")},getRequestTimeout:function(D){return D.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(D){return D.tokenManager.getToken("user")},prepareParams:function(D,H){var q,z,V,W,J,X,$,Q,Z={};((null==H||null===(q=H.include)||void 0===q?void 0:q.customFields)&&(Z.include="custom"),null==H||null===(z=H.include)||void 0===z?void 0:z.totalCount)&&(Z.count=null===(J=H.include)||void 0===J?void 0:J.totalCount);(null==H||null===(V=H.page)||void 0===V?void 0:V.next)&&(Z.start=null===(X=H.page)||void 0===X?void 0:X.next);(null==H||null===(W=H.page)||void 0===W?void 0:W.prev)&&(Z.end=null===($=H.page)||void 0===$?void 0:$.prev);((null==H?void 0:H.filter)&&(Z.filter=H.filter),Z.limit=null==H?void 0:H.limit,null==H?void 0:H.sort)&&(Z.sort=Object.entries(null!==(Q=H.sort)&&void 0!==Q?Q:{}).map((function(D){var H=(0,Y.default)(D,2),q=H[0],z=H[1];return"asc"===z||"desc"===z?"".concat(q,":").concat(z):q})));return Z},handleResponse:function(D,H){return{status:H.status,data:H.data,totalCount:H.totalCount,next:H.next,prev:H.prev}}};H.default=W,D.exports=H.default},function(D,H){D.exports=function(D){if(Array.isArray(D))return D}},function(D,H){D.exports=function(D,H){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(D)){var q=[],z=!0,Y=!1,V=void 0;try{for(var W,J=D[Symbol.iterator]();!(z=(W=J.next()).done)&&(q.push(W.value),!H||q.length!==H);z=!0);}catch(D){Y=!0,V=D}finally{try{z||null==J.return||J.return()}finally{if(Y)throw V}}return q}}},function(D,H,q){var z=q(80);D.exports=function(D,H){if(D){if("string"==typeof D)return z(D,H);var q=Object.prototype.toString.call(D).slice(8,-1);return"Object"===q&&D.constructor&&(q=D.constructor.name),"Map"===q||"Set"===q?Array.from(D):"Arguments"===q||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(q)?z(D,H):void 0}}},function(D,H){D.exports=function(D,H){(null==H||H>D.length)&&(H=D.length);for(var q=0,z=new Array(H);q<H;q++)z[q]=D[q];return z}},function(D,H){D.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var Y=z(q(1)),V={getOperation:function(){return Y.default.PNGetUUIDMetadataOperation},validateParams:function(){},getURL:function(D,H){var q,z=D.config;return"/v2/objects/".concat(z.subscribeKey,"/uuids/").concat(null!==(q=null==H?void 0:H.uuid)&&void 0!==q?q:z.getUUID())},getRequestTimeout:function(D){return D.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(D){return D.tokenManager.getToken("user")},prepareParams:function(D,H){var q,z,Y,V=D.config;return{uuid:null!==(q=null==H?void 0:H.uuid)&&void 0!==q?q:V.getUUID(),include:(null===(z=null==H||null===(Y=H.include)||void 0===Y?void 0:Y.customFields)||void 0===z||z)&&"custom"}},handleResponse:function(D,H){return{status:H.status,data:H.data}}};H.default=V,D.exports=H.default},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var Y=z(q(1)),V={getOperation:function(){return Y.default.PNSetUUIDMetadataOperation},validateParams:function(D,H){if(!(null==H?void 0:H.data))return"Data cannot be empty"},usePatch:function(){return!0},patchURL:function(D,H){var q,z=D.config;return"/v2/objects/".concat(z.subscribeKey,"/uuids/").concat(null!==(q=null==H?void 0:H.uuid)&&void 0!==q?q:z.getUUID())},patchPayload:function(D,H){return H.data},getRequestTimeout:function(D){return D.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(D){return D.tokenManager.getToken("user")},prepareParams:function(D,H){var q,z,Y,V=D.config;return{uuid:null!==(q=null==H?void 0:H.uuid)&&void 0!==q?q:V.getUUID(),include:(null===(z=null==H||null===(Y=H.include)||void 0===Y?void 0:Y.customFields)||void 0===z||z)&&"custom"}},handleResponse:function(D,H){return{status:H.status,data:H.data}}};H.default=V,D.exports=H.default},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var Y=z(q(1)),V={getOperation:function(){return Y.default.PNRemoveUUIDMetadataOperation},validateParams:function(){},getURL:function(D,H){var q,z=D.config;return"/v2/objects/".concat(z.subscribeKey,"/uuids/").concat(null!==(q=null==H?void 0:H.uuid)&&void 0!==q?q:z.getUUID())},useDelete:function(){return!0},getRequestTimeout:function(D){return D.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(D){return D.tokenManager.getToken("user")},prepareParams:function(D,H){var q,z=D.config;return{uuid:null!==(q=null==H?void 0:H.uuid)&&void 0!==q?q:z.getUUID()}},handleResponse:function(D,H){return{status:H.status,data:H.data}}};H.default=V,D.exports=H.default},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var Y=z(q(9)),V=z(q(1)),W={getOperation:function(){return V.default.PNGetAllChannelMetadataOperation},validateParams:function(){},getURL:function(D){var H=D.config;return"/v2/objects/".concat(H.subscribeKey,"/channels")},getRequestTimeout:function(D){return D.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(D){return D.tokenManager.getToken("channel")},prepareParams:function(D,H){var q,z,V,W,J,X,$,Q,Z={};((null==H||null===(q=H.include)||void 0===q?void 0:q.customFields)&&(Z.include="custom"),null==H||null===(z=H.include)||void 0===z?void 0:z.totalCount)&&(Z.count=null===(J=H.include)||void 0===J?void 0:J.totalCount);(null==H||null===(V=H.page)||void 0===V?void 0:V.next)&&(Z.start=null===(X=H.page)||void 0===X?void 0:X.next);(null==H||null===(W=H.page)||void 0===W?void 0:W.prev)&&(Z.end=null===($=H.page)||void 0===$?void 0:$.prev);((null==H?void 0:H.filter)&&(Z.filter=H.filter),(null==H?void 0:H.limit)&&(Z.limit=H.limit),null==H?void 0:H.sort)&&(Z.sort=Object.entries(null!==(Q=H.sort)&&void 0!==Q?Q:{}).map((function(D){var H=(0,Y.default)(D,2),q=H[0],z=H[1];return"asc"===z||"desc"===z?"".concat(q,":").concat(z):q})));return Z},handleResponse:function(D,H){return{status:H.status,data:H.data,totalCount:H.totalCount,prev:H.prev,next:H.next}}};H.default=W,D.exports=H.default},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var Y=z(q(1)),V={getOperation:function(){return Y.default.PNGetChannelMetadataOperation},validateParams:function(D,H){if(!(null==H?void 0:H.channel))return"Channel cannot be empty"},getURL:function(D,H){var q=D.config;return"/v2/objects/".concat(q.subscribeKey,"/channels/").concat(H.channel)},getRequestTimeout:function(D){return D.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(D){return D.tokenManager.getToken("channel")},prepareParams:function(D,H){var q,z;return{include:(null===(q=null==H||null===(z=H.include)||void 0===z?void 0:z.customFields)||void 0===q||q)&&"custom"}},handleResponse:function(D,H){return{status:H.status,data:H.data}}};H.default=V,D.exports=H.default},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var Y=z(q(1)),V={getOperation:function(){return Y.default.PNSetChannelMetadataOperation},validateParams:function(D,H){return(null==H?void 0:H.channel)?(null==H?void 0:H.data)?void 0:"Data cannot be empty":"Channel cannot be empty"},usePatch:function(){return!0},patchURL:function(D,H){var q=D.config;return"/v2/objects/".concat(q.subscribeKey,"/channels/").concat(H.channel)},patchPayload:function(D,H){return H.data},getRequestTimeout:function(D){return D.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(D){return D.tokenManager.getToken("channel")},prepareParams:function(D,H){var q,z;return{include:(null===(q=null==H||null===(z=H.include)||void 0===z?void 0:z.customFields)||void 0===q||q)&&"custom"}},handleResponse:function(D,H){return{status:H.status,data:H.data}}};H.default=V,D.exports=H.default},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var Y=z(q(1)),V={getOperation:function(){return Y.default.PNRemoveChannelMetadataOperation},validateParams:function(D,H){if(!(null==H?void 0:H.channel))return"Channel cannot be empty"},getURL:function(D,H){var q=D.config;return"/v2/objects/".concat(q.subscribeKey,"/channels/").concat(H.channel)},useDelete:function(){return!0},getRequestTimeout:function(D){return D.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(D){return D.tokenManager.getToken("channel")},prepareParams:function(){return{}},handleResponse:function(D,H){return{status:H.status,data:H.data}}};H.default=V,D.exports=H.default},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var Y=z(q(9)),V=z(q(1)),W={getOperation:function(){return V.default.PNGetMembersOperation},validateParams:function(D,H){if(!(null==H?void 0:H.channel))return"UUID cannot be empty"},getURL:function(D,H){var q=D.config;return"/v2/objects/".concat(q.subscribeKey,"/channels/").concat(H.channel,"/uuids")},getRequestTimeout:function(D){return D.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(D){return D.tokenManager.getToken("member")},prepareParams:function(D,H){var q,z,V,W,J,X,$,Q,Z,ee,te,ne,re={};(null==H?void 0:H.include)&&(re.include=[],(null===(J=H.include)||void 0===J?void 0:J.customFields)&&re.include.push("custom"),(null===(X=H.include)||void 0===X?void 0:X.customUUIDFields)&&re.include.push("uuid.custom"),(null===($=null===(Q=H.include)||void 0===Q?void 0:Q.UUIDFields)||void 0===$||$)&&re.include.push("uuid"),re.include=re.include.join(","));(null==H||null===(q=H.include)||void 0===q?void 0:q.totalCount)&&(re.count=null===(Z=H.include)||void 0===Z?void 0:Z.totalCount);(null==H||null===(z=H.page)||void 0===z?void 0:z.next)&&(re.start=null===(ee=H.page)||void 0===ee?void 0:ee.next);(null==H||null===(V=H.page)||void 0===V?void 0:V.prev)&&(re.end=null===(te=H.page)||void 0===te?void 0:te.prev);((null==H?void 0:H.filter)&&(re.filter=H.filter),re.limit=null!==(W=null==H?void 0:H.limit)&&void 0!==W?W:100,null==H?void 0:H.sort)&&(re.sort=Object.entries(null!==(ne=H.sort)&&void 0!==ne?ne:{}).map((function(D){var H=(0,Y.default)(D,2),q=H[0],z=H[1];return"asc"===z||"desc"===z?"".concat(q,":").concat(z):q})));return re},handleResponse:function(D,H){return{status:H.status,data:H.data,totalCount:H.totalCount,prev:H.prev,next:H.next}}};H.default=W,D.exports=H.default},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var Y=z(q(9)),V=z(q(4)),W=z(q(1)),J={getOperation:function(){return W.default.PNSetMembersOperation},validateParams:function(D,H){return(null==H?void 0:H.channel)?(null==H?void 0:H.uuids)&&0!==(null==H?void 0:H.uuids.length)?void 0:"UUIDs cannot be empty":"Channel cannot be empty"},usePatch:function(){return!0},patchURL:function(D,H){var q=D.config;return"/v2/objects/".concat(q.subscribeKey,"/channels/").concat(H.channel,"/uuids")},patchPayload:function(D,H){return(0,V.default)({set:[],remove:[]},H.type,H.uuids.map((function(D){return"string"==typeof D?{uuid:{id:D}}:{uuid:{id:D.id},custom:D.custom}})))},getRequestTimeout:function(D){return D.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(D){return D.tokenManager.getToken("member")},prepareParams:function(D,H){var q,z,V,W,J,X,$,Q,Z,ee={};(null==H?void 0:H.include)&&(ee.include=[],(null===(W=H.include)||void 0===W?void 0:W.customFields)&&ee.include.push("custom"),(null===(J=H.include)||void 0===J?void 0:J.customUUIDFields)&&ee.include.push("uuid.custom"),(null===(X=H.include)||void 0===X?void 0:X.UUIDFields)&&ee.include.push("uuid"),ee.include=ee.include.join(","));((null==H||null===(q=H.include)||void 0===q?void 0:q.totalCount)&&(ee.count=!0),null==H||null===(z=H.page)||void 0===z?void 0:z.next)&&(ee.start=null===($=H.page)||void 0===$?void 0:$.next);(null==H||null===(V=H.page)||void 0===V?void 0:V.prev)&&(ee.end=null===(Q=H.page)||void 0===Q?void 0:Q.prev);((null==H?void 0:H.filter)&&(ee.filter=H.filter),(null==H?void 0:H.limit)&&(ee.limit=H.limit),null==H?void 0:H.sort)&&(ee.sort=Object.entries(null!==(Z=H.sort)&&void 0!==Z?Z:{}).map((function(D){var H=(0,Y.default)(D,2),q=H[0],z=H[1];return"asc"===z||"desc"===z?"".concat(q,":").concat(z):q})));return ee},handleResponse:function(D,H){return{status:H.status,data:H.data,totalCount:H.totalCount,prev:H.prev,next:H.next}}};H.default=J,D.exports=H.default},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var Y=z(q(9)),V=z(q(1)),W={getOperation:function(){return V.default.PNGetMembershipsOperation},validateParams:function(D,H){if(!(null==H?void 0:H.uuid))return"UUID cannot be empty"},getURL:function(D,H){var q=D.config;return"/v2/objects/".concat(q.subscribeKey,"/uuids/").concat(H.uuid,"/channels")},getRequestTimeout:function(D){return D.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(D){return D.tokenManager.getToken("membership")},prepareParams:function(D,H){var q,z,V,W,J,X,$,Q,Z,ee,te,ne={};(null==H?void 0:H.include)&&(ne.include=[],(null===(J=H.include)||void 0===J?void 0:J.customFields)&&ne.include.push("custom"),(null===(X=H.include)||void 0===X?void 0:X.customChannelFields)&&ne.include.push("channel.custom"),(null===($=H.include)||void 0===$?void 0:$.channelFields)&&ne.include.push("channel"),ne.include=ne.include.join(","));(null==H||null===(q=H.include)||void 0===q?void 0:q.totalCount)&&(ne.count=null===(Q=H.include)||void 0===Q?void 0:Q.totalCount);(null==H||null===(z=H.page)||void 0===z?void 0:z.next)&&(ne.start=null===(Z=H.page)||void 0===Z?void 0:Z.next);(null==H||null===(V=H.page)||void 0===V?void 0:V.prev)&&(ne.end=null===(ee=H.page)||void 0===ee?void 0:ee.prev);((null==H?void 0:H.filter)&&(ne.filter=H.filter),ne.limit=null!==(W=null==H?void 0:H.limit)&&void 0!==W?W:100,null==H?void 0:H.sort)&&(ne.sort=Object.entries(null!==(te=H.sort)&&void 0!==te?te:{}).map((function(D){var H=(0,Y.default)(D,2),q=H[0],z=H[1];return"asc"===z||"desc"===z?"".concat(q,":").concat(z):q})));return ne},handleResponse:function(D,H){return{status:H.status,data:H.data,totalCount:H.totalCount,prev:H.prev,next:H.next}}};H.default=W,D.exports=H.default},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var Y=z(q(9)),V=z(q(4)),W=z(q(1)),J={getOperation:function(){return W.default.PNSetMembershipsOperation},validateParams:function(D,H){if(!(null==H?void 0:H.channels)||0===(null==H?void 0:H.channels.length))return"Channels cannot be empty"},usePatch:function(){return!0},patchURL:function(D,H){var q,z=D.config;return"/v2/objects/".concat(z.subscribeKey,"/uuids/").concat(null!==(q=H.uuid)&&void 0!==q?q:z.getUUID(),"/channels")},patchPayload:function(D,H){return(0,V.default)({set:[],remove:[]},H.type,H.channels.map((function(D){return"string"==typeof D?{channel:{id:D}}:{channel:{id:D.id},custom:D.custom}})))},getRequestTimeout:function(D){return D.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(D){return D.tokenManager.getToken("membership")},prepareParams:function(D,H){var q,z,V,W,J,X,$,Q,Z,ee={};(null==H?void 0:H.include)&&(ee.include=[],(null===(W=H.include)||void 0===W?void 0:W.customFields)&&ee.include.push("custom"),(null===(J=H.include)||void 0===J?void 0:J.customChannelFields)&&ee.include.push("channel.custom"),(null===(X=H.include)||void 0===X?void 0:X.channelFields)&&ee.include.push("channel"),ee.include=ee.include.join(","));((null==H||null===(q=H.include)||void 0===q?void 0:q.totalCount)&&(ee.count=!0),null==H||null===(z=H.page)||void 0===z?void 0:z.next)&&(ee.start=null===($=H.page)||void 0===$?void 0:$.next);(null==H||null===(V=H.page)||void 0===V?void 0:V.prev)&&(ee.end=null===(Q=H.page)||void 0===Q?void 0:Q.prev);((null==H?void 0:H.filter)&&(ee.filter=H.filter),(null==H?void 0:H.limit)&&(ee.limit=H.limit),null==H?void 0:H.sort)&&(ee.sort=Object.entries(null!==(Z=H.sort)&&void 0!==Z?Z:{}).map((function(D){var H=(0,Y.default)(D,2),q=H[0],z=H[1];return"asc"===z||"desc"===z?"".concat(q,":").concat(z):q})));return ee},handleResponse:function(D,H){return{status:H.status,data:H.data,totalCount:H.totalCount,prev:H.prev,next:H.next}}};H.default=J,D.exports=H.default},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNCreateUserOperation},H.validateParams=function(D,H){var q=D.config,z=H.id,Y=H.name,V=H.custom;if(!z)return"Missing User.id";if(!Y)return"Missing User.name";if(!q.subscribeKey)return"Missing Subscribe Key";if(V&&!Object.values(V).every((function(D){return"string"==typeof D||"number"==typeof D||"boolean"==typeof D})))return"Invalid custom type, only string, number and boolean values are allowed."},H.usePost=function(){return!0},H.getURL=function(D){var H=D.config;return"/v1/objects/".concat(H.subscribeKey,"/users")},H.postURL=function(D){var H=D.config;return"/v1/objects/".concat(H.subscribeKey,"/users")},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.getAuthToken=function(D,H){return D.tokenManager.getToken("user",H.id)||D.tokenManager.getToken("user")},H.prepareParams=function(D,H){var q=H.include,z={};q?void 0===q.customFields&&(q.customFields=!0):q={customFields:!0};if(q){var Y=[];q.customFields&&Y.push("custom");var V=Y.join(",");V.length>0&&(z.include=V)}return z},H.postPayload=function(D,H){return function(D,H){return H}(0,H)},H.handleResponse=function(D,H){return H};q(2);var Y=z(q(1))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNUpdateUserOperation},H.validateParams=function(D,H){var q=D.config,z=H.id,Y=H.name,V=H.custom;if(!z)return"Missing User.id";if(!Y)return"Missing User.name";if(!q.subscribeKey)return"Missing Subscribe Key";if(V&&!Object.values(V).every((function(D){return"string"==typeof D||"number"==typeof D||"boolean"==typeof D})))return"Invalid custom type, only string, number and boolean values are allowed."},H.usePatch=function(){return!0},H.getURL=function(D,H){var q=D.config,z=H.id;return"/v1/objects/".concat(q.subscribeKey,"/users/").concat(z)},H.patchURL=function(D,H){var q=D.config,z=H.id;return"/v1/objects/".concat(q.subscribeKey,"/users/").concat(z)},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.getAuthToken=function(D,H){return D.tokenManager.getToken("user",H.id)||D.tokenManager.getToken("user")},H.prepareParams=function(D,H){var q=H.include,z={};q?void 0===q.customFields&&(q.customFields=!0):q={customFields:!0};if(q){var Y=[];q.customFields&&Y.push("custom");var V=Y.join(",");V.length>0&&(z.include=V)}return z},H.patchPayload=function(D,H){return function(D,H){return H}(0,H)},H.handleResponse=function(D,H){return H};q(2);var Y=z(q(1))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNDeleteUserOperation},H.validateParams=function(D,H){var q=D.config;if(!H)return"Missing UserId";if(!q.subscribeKey)return"Missing Subscribe Key"},H.useDelete=function(){return!0},H.getURL=function(D,H){var q=D.config;return"/v1/objects/".concat(q.subscribeKey,"/users/").concat(H)},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.getAuthToken=function(D,H){return D.tokenManager.getToken("user",H)||D.tokenManager.getToken("user")},H.prepareParams=function(){return{}},H.handleResponse=function(D,H){return H};q(2);var Y=z(q(1))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNGetUserOperation},H.validateParams=function(D,H){if(!H.userId)return"Missing userId"},H.getURL=function(D,H){var q=D.config;return"/v1/objects/".concat(q.subscribeKey,"/users/").concat(H.userId)},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.getAuthToken=function(D,H){return D.tokenManager.getToken("user",H.userId)||D.tokenManager.getToken("user")},H.prepareParams=function(D,H){var q=H.include,z={};q?void 0===q.customFields&&(q.customFields=!0):q={customFields:!0};if(q){var Y=[];q.customFields&&Y.push("custom");var V=Y.join(",");V.length>0&&(z.include=V)}return z},H.handleResponse=function(D,H){return H};q(2);var Y=z(q(1))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNGetUsersOperation},H.validateParams=function(){},H.getURL=function(D){var H=D.config;return"/v1/objects/".concat(H.subscribeKey,"/users")},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.getAuthToken=function(D){return D.tokenManager.getToken("user")},H.prepareParams=function(D,H){var q=H.include,z=H.limit,Y=H.page,V=H.filter,W={};z&&(W.limit=z);if(q){var J=[];q.totalCount&&(W.count=!0),q.customFields&&J.push("custom");var X=J.join(",");X.length>0&&(W.include=X)}Y&&(Y.next&&(W.start=Y.next),Y.prev&&(W.end=Y.prev));V&&(W.filter=V);return W},H.handleResponse=function(D,H){return H};q(2);var Y=z(q(1))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNCreateSpaceOperation},H.validateParams=function(D,H){var q=D.config,z=H.id,Y=H.name,V=H.custom;if(!z)return"Missing Space.id";if(!Y)return"Missing Space.name";if(!q.subscribeKey)return"Missing Subscribe Key";if(V&&!Object.values(V).every((function(D){return"string"==typeof D||"number"==typeof D||"boolean"==typeof D})))return"Invalid custom type, only string, number and boolean values are allowed."},H.usePost=function(){return!0},H.getURL=function(D){var H=D.config;return"/v1/objects/".concat(H.subscribeKey,"/spaces")},H.postURL=function(D){var H=D.config;return"/v1/objects/".concat(H.subscribeKey,"/spaces")},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.getAuthToken=function(D,H){return D.tokenManager.getToken("space",H.id)||D.tokenManager.getToken("space")},H.prepareParams=function(D,H){var q=H.include,z={};q?void 0===q.customFields&&(q.customFields=!0):q={customFields:!0};if(q){var Y=[];q.customFields&&Y.push("custom");var V=Y.join(",");V.length>0&&(z.include=V)}return z},H.postPayload=function(D,H){return function(D,H){return H}(0,H)},H.handleResponse=function(D,H){return H};q(2);var Y=z(q(1))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNUpdateSpaceOperation},H.validateParams=function(D,H){var q=D.config,z=H.id,Y=H.name,V=H.custom;if(!z)return"Missing Space.id";if(!Y)return"Missing Space.name";if(!q.subscribeKey)return"Missing Subscribe Key";if(V&&!Object.values(V).every((function(D){return"string"==typeof D||"number"==typeof D||"boolean"==typeof D})))return"Invalid custom type, only string, number and boolean values are allowed."},H.usePatch=function(){return!0},H.getURL=function(D,H){var q=D.config,z=H.id;return"/v1/objects/".concat(q.subscribeKey,"/spaces/").concat(z)},H.patchURL=function(D,H){var q=D.config,z=H.id;return"/v1/objects/".concat(q.subscribeKey,"/spaces/").concat(z)},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.getAuthToken=function(D,H){return D.tokenManager.getToken("space",H.id)||D.tokenManager.getToken("space")},H.prepareParams=function(D,H){var q=H.include,z={};q?void 0===q.customFields&&(q.customFields=!0):q={customFields:!0};if(q){var Y=[];q.customFields&&Y.push("custom");var V=Y.join(",");V.length>0&&(z.include=V)}return z},H.patchPayload=function(D,H){return function(D,H){return H}(0,H)},H.handleResponse=function(D,H){return H};q(2);var Y=z(q(1))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNDeleteSpaceOperation},H.validateParams=function(D,H){var q=D.config;if(!H)return"Missing SpaceId";if(!q.subscribeKey)return"Missing Subscribe Key"},H.useDelete=function(){return!0},H.getURL=function(D,H){var q=D.config;return"/v1/objects/".concat(q.subscribeKey,"/spaces/").concat(H)},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.getAuthToken=function(D,H){return D.tokenManager.getToken("space",H)||D.tokenManager.getToken("space")},H.prepareParams=function(){return{}},H.handleResponse=function(D,H){return H};q(2);var Y=z(q(1))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNGetSpacesOperation},H.validateParams=function(){},H.getURL=function(D){var H=D.config;return"/v1/objects/".concat(H.subscribeKey,"/spaces")},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.getAuthToken=function(D){return D.tokenManager.getToken("space")},H.prepareParams=function(D,H){var q=H.include,z=H.limit,Y=H.page,V=H.filter,W={};z&&(W.limit=z);if(q){var J=[];q.totalCount&&(W.count=!0),q.customFields&&J.push("custom");var X=J.join(",");X.length>0&&(W.include=X)}Y&&(Y.next&&(W.start=Y.next),Y.prev&&(W.end=Y.prev));V&&(W.filter=V);return W},H.handleResponse=function(D,H){return H};q(2);var Y=z(q(1))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNGetSpaceOperation},H.validateParams=function(D,H){if(!H.spaceId)return"Missing spaceId"},H.getURL=function(D,H){var q=D.config;return"/v1/objects/".concat(q.subscribeKey,"/spaces/").concat(H.spaceId)},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.getAuthToken=function(D,H){return D.tokenManager.getToken("space",H.spaceId)||D.tokenManager.getToken("space")},H.prepareParams=function(D,H){var q=H.include,z={};q?void 0===q.customFields&&(q.customFields=!0):q={customFields:!0};if(q){var Y=[];q.customFields&&Y.push("custom");var V=Y.join(",");V.length>0&&(z.include=V)}return z},H.handleResponse=function(D,H){return H};q(2);var Y=z(q(1))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNGetMembersOperation},H.validateParams=function(D,H){if(!H.spaceId)return"Missing spaceId"},H.getURL=function(D,H){var q=D.config;return"/v1/objects/".concat(q.subscribeKey,"/spaces/").concat(H.spaceId,"/users")},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.getAuthToken=function(D,H){return D.tokenManager.getToken("space",H.spaceId)||D.tokenManager.getToken("space")},H.prepareParams=function(D,H){var q=H.include,z=H.limit,Y=H.page,V=H.filter,W={};z&&(W.limit=z);if(q){var J=[];q.totalCount&&(W.count=!0),q.customFields&&J.push("custom"),q.userFields&&J.push("user"),q.customUserFields&&J.push("user.custom");var X=J.join(",");X.length>0&&(W.include=X)}Y&&(Y.next&&(W.start=Y.next),Y.prev&&(W.end=Y.prev));V&&(W.filter=V);return W},H.handleResponse=function(D,H){return H};q(2);var Y=z(q(1))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNUpdateMembersOperation},H.validateParams=function(D,H){var q=H.spaceId,z=H.users;if(!q)return"Missing spaceId";if(!z)return"Missing users"},H.getURL=function(D,H){var q=D.config;return"/v1/objects/".concat(q.subscribeKey,"/spaces/").concat(H.spaceId,"/users")},H.patchURL=function(D,H){var q=D.config;return"/v1/objects/".concat(q.subscribeKey,"/spaces/").concat(H.spaceId,"/users")},H.usePatch=function(){return!0},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.getAuthToken=function(D,H){return D.tokenManager.getToken("space",H.spaceId)||D.tokenManager.getToken("space")},H.prepareParams=function(D,H){var q=H.include,z=H.limit,Y=H.page,V={};z&&(V.limit=z);if(q){var W=[];q.totalCount&&(V.count=!0),q.customFields&&W.push("custom"),q.spaceFields&&W.push("space"),q.customSpaceFields&&W.push("space.custom");var J=W.join(",");J.length>0&&(V.include=J)}Y&&(Y.next&&(V.start=Y.next),Y.prev&&(V.end=Y.prev));return V},H.patchPayload=function(D,H){return function(D,H){var q=H.users,z={};q&&q.length>0&&(z.add=[],q.forEach((function(D){var H={id:D.id};D.custom&&(H.custom=D.custom),z.add.push(H)})));return z}(0,H)},H.handleResponse=function(D,H){return H};q(2);var Y=z(q(1))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNUpdateMembersOperation},H.validateParams=function(D,H){var q=H.spaceId,z=H.users;if(!q)return"Missing spaceId";if(!z)return"Missing users"},H.getURL=function(D,H){var q=D.config;return"/v1/objects/".concat(q.subscribeKey,"/spaces/").concat(H.spaceId,"/users")},H.patchURL=function(D,H){var q=D.config;return"/v1/objects/".concat(q.subscribeKey,"/spaces/").concat(H.spaceId,"/users")},H.usePatch=function(){return!0},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.getAuthToken=function(D,H){return D.tokenManager.getToken("space",H.spaceId)||D.tokenManager.getToken("space")},H.prepareParams=function(D,H){var q=H.include,z=H.limit,Y=H.page,V={};z&&(V.limit=z);if(q){var W=[];q.totalCount&&(V.count=!0),q.customFields&&W.push("custom"),q.spaceFields&&W.push("space"),q.customSpaceFields&&W.push("space.custom");var J=W.join(",");J.length>0&&(V.include=J)}Y&&(Y.next&&(V.start=Y.next),Y.prev&&(V.end=Y.prev));return V},H.patchPayload=function(D,H){return function(D,H){var q=H.addMembers,z=H.updateMembers,Y=H.removeMembers,V=H.users,W={};q&&q.length>0&&(W.add=[],q.forEach((function(D){var H={id:D.id};D.custom&&(H.custom=D.custom),W.add.push(H)})));z&&z.length>0&&(W.update=[],z.forEach((function(D){var H={id:D.id};D.custom&&(H.custom=D.custom),W.update.push(H)})));V&&V.length>0&&(W.update=W.update||[],V.forEach((function(D){var H={id:D.id};D.custom&&(H.custom=D.custom),W.update.push(H)})));Y&&Y.length>0&&(W.remove=[],Y.forEach((function(D){W.remove.push({id:D})})));return W}(0,H)},H.handleResponse=function(D,H){return H};q(2);var Y=z(q(1))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNUpdateMembersOperation},H.validateParams=function(D,H){var q=H.spaceId,z=H.users;if(!q)return"Missing spaceId";if(!z)return"Missing users"},H.getURL=function(D,H){var q=D.config;return"/v1/objects/".concat(q.subscribeKey,"/spaces/").concat(H.spaceId,"/users")},H.patchURL=function(D,H){var q=D.config;return"/v1/objects/".concat(q.subscribeKey,"/spaces/").concat(H.spaceId,"/users")},H.usePatch=function(){return!0},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.getAuthToken=function(D,H){return D.tokenManager.getToken("space",H.spaceId)||D.tokenManager.getToken("space")},H.prepareParams=function(D,H){var q=H.include,z=H.limit,Y=H.page,V={};z&&(V.limit=z);if(q){var W=[];q.totalCount&&(V.count=!0),q.customFields&&W.push("custom"),q.spaceFields&&W.push("space"),q.customSpaceFields&&W.push("space.custom");var J=W.join(",");J.length>0&&(V.include=J)}Y&&(Y.next&&(V.start=Y.next),Y.prev&&(V.end=Y.prev));return V},H.patchPayload=function(D,H){return function(D,H){var q=H.users,z={};q&&q.length>0&&(z.remove=[],q.forEach((function(D){z.remove.push({id:D})})));return z}(0,H)},H.handleResponse=function(D,H){return H};q(2);var Y=z(q(1))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNGetMembershipsOperation},H.validateParams=function(D,H){if(!H.userId)return"Missing userId"},H.getURL=function(D,H){var q=D.config;return"/v1/objects/".concat(q.subscribeKey,"/users/").concat(H.userId,"/spaces")},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.getAuthToken=function(D,H){return D.tokenManager.getToken("user",H.userId)||D.tokenManager.getToken("user")},H.prepareParams=function(D,H){var q=H.include,z=H.limit,Y=H.page,V=H.filter,W={};z&&(W.limit=z);if(q){var J=[];q.totalCount&&(W.count=!0),q.customFields&&J.push("custom"),q.spaceFields&&J.push("space"),q.customSpaceFields&&J.push("space.custom");var X=J.join(",");X.length>0&&(W.include=X)}Y&&(Y.next&&(W.start=Y.next),Y.prev&&(W.end=Y.prev));V&&(W.filter=V);return W},H.handleResponse=function(D,H){return H};q(2);var Y=z(q(1))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNUpdateMembershipsOperation},H.validateParams=function(D,H){var q=H.userId,z=H.spaces;if(!q)return"Missing userId";if(!z)return"Missing spaces"},H.getURL=function(D,H){var q=D.config;return"/v1/objects/".concat(q.subscribeKey,"/users/").concat(H.userId,"/spaces")},H.patchURL=function(D,H){var q=D.config;return"/v1/objects/".concat(q.subscribeKey,"/users/").concat(H.userId,"/spaces")},H.usePatch=function(){return!0},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.getAuthToken=function(D,H){return D.tokenManager.getToken("user",H.userId)||D.tokenManager.getToken("user")},H.prepareParams=function(D,H){var q=H.include,z=H.limit,Y=H.page,V={};z&&(V.limit=z);if(q){var W=[];q.totalCount&&(V.count=!0),q.customFields&&W.push("custom"),q.spaceFields&&W.push("space"),q.customSpaceFields&&W.push("space.custom");var J=W.join(",");J.length>0&&(V.include=J)}Y&&(Y.next&&(V.start=Y.next),Y.prev&&(V.end=Y.prev));return V},H.patchPayload=function(D,H){return function(D,H){var q=H.addMemberships,z=H.updateMemberships,Y=H.removeMemberships,V=H.spaces,W={};q&&q.length>0&&(W.add=[],q.forEach((function(D){var H={id:D.id};D.custom&&(H.custom=D.custom),W.add.push(H)})));z&&z.length>0&&(W.update=[],z.forEach((function(D){var H={id:D.id};D.custom&&(H.custom=D.custom),W.update.push(H)})));V&&V.length>0&&(W.update=W.update||[],V.forEach((function(D){var H={id:D.id};D.custom&&(H.custom=D.custom),W.update.push(H)})));Y&&Y.length>0&&(W.remove=[],Y.forEach((function(D){W.remove.push({id:D})})));return W}(0,H)},H.handleResponse=function(D,H){return H};q(2);var Y=z(q(1))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNUpdateMembershipsOperation},H.validateParams=function(D,H){var q=H.userId,z=H.spaces;if(!q)return"Missing userId";if(!z)return"Missing spaces"},H.getURL=function(D,H){var q=D.config;return"/v1/objects/".concat(q.subscribeKey,"/users/").concat(H.userId,"/spaces")},H.patchURL=function(D,H){var q=D.config;return"/v1/objects/".concat(q.subscribeKey,"/users/").concat(H.userId,"/spaces")},H.usePatch=function(){return!0},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.getAuthToken=function(D,H){return D.tokenManager.getToken("user",H.userId)||D.tokenManager.getToken("user")},H.prepareParams=function(D,H){var q=H.include,z=H.limit,Y=H.page,V={};z&&(V.limit=z);if(q){var W=[];q.totalCount&&(V.count=!0),q.customFields&&W.push("custom"),q.spaceFields&&W.push("space"),q.customSpaceFields&&W.push("space.custom");var J=W.join(",");J.length>0&&(V.include=J)}Y&&(Y.next&&(V.start=Y.next),Y.prev&&(V.end=Y.prev));return V},H.patchPayload=function(D,H){return function(D,H){var q=H.spaces,z={};q&&q.length>0&&(z.add=[],q.forEach((function(D){var H={id:D.id};D.custom&&(H.custom=D.custom),z.add.push(H)})));return z}(0,H)},H.handleResponse=function(D,H){return H};q(2);var Y=z(q(1))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNUpdateMembershipsOperation},H.validateParams=function(D,H){var q=H.userId,z=H.spaces;if(!q)return"Missing userId";if(!z)return"Missing spaces"},H.getURL=function(D,H){var q=D.config;return"/v1/objects/".concat(q.subscribeKey,"/users/").concat(H.userId,"/spaces")},H.patchURL=function(D,H){var q=D.config;return"/v1/objects/".concat(q.subscribeKey,"/users/").concat(H.userId,"/spaces")},H.usePatch=function(){return!0},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.getAuthToken=function(D,H){return D.tokenManager.getToken("user",H.userId)||D.tokenManager.getToken("user")},H.prepareParams=function(D,H){var q=H.include,z=H.limit,Y=H.page,V={};z&&(V.limit=z);if(q){var W=[];q.totalCount&&(V.count=!0),q.customFields&&W.push("custom"),q.spaceFields&&W.push("space"),q.customSpaceFields&&W.push("space.custom");var J=W.join(",");J.length>0&&(V.include=J)}Y&&(Y.next&&(V.start=Y.next),Y.prev&&(V.end=Y.prev));return V},H.patchPayload=function(D,H){return function(D,H){var q=H.spaces,z={};q&&q.length>0&&(z.remove=[],q.forEach((function(D){z.remove.push({id:D})})));return z}(0,H)},H.handleResponse=function(D,H){return H};q(2);var Y=z(q(1))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNAccessManagerAudit},H.validateParams=function(D){if(!D.config.subscribeKey)return"Missing Subscribe Key"},H.getURL=function(D){var H=D.config;return"/v2/auth/audit/sub-key/".concat(H.subscribeKey)},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!1},H.prepareParams=function(D,H){var q=H.channel,z=H.channelGroup,Y=H.authKeys,V=void 0===Y?[]:Y,W={};q&&(W.channel=q);z&&(W["channel-group"]=z);V.length>0&&(W.auth=V.join(","));return W},H.handleResponse=function(D,H){return H.payload};q(2);var Y=z(q(1))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNAccessManagerGrant},H.validateParams=function(D,H){var q=D.config;if(!q.subscribeKey)return"Missing Subscribe Key";if(!q.publishKey)return"Missing Publish Key";if(!q.secretKey)return"Missing Secret Key";if(null!=H.uuids&&!H.authKeys)return"authKeys are required for grant request on uuids";if(null!=H.uuids&&(null!=H.channels||null!=H.channelGroups))return"Both channel/channelgroup and uuid cannot be used in the same request"},H.getURL=function(D){var H=D.config;return"/v2/auth/grant/sub-key/".concat(H.subscribeKey)},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!1},H.prepareParams=function(D,H){var q=H.channels,z=void 0===q?[]:q,Y=H.channelGroups,V=void 0===Y?[]:Y,W=H.uuids,J=void 0===W?[]:W,X=H.ttl,$=H.read,Q=void 0!==$&&$,Z=H.write,ee=void 0!==Z&&Z,te=H.manage,ne=void 0!==te&&te,re=H.get,ie=void 0!==re&&re,oe=H.join,ae=void 0!==oe&&oe,se=H.update,ue=void 0!==se&&se,ce=H.authKeys,le=void 0===ce?[]:ce,fe=H.delete,de={};de.r=Q?"1":"0",de.w=ee?"1":"0",de.m=ne?"1":"0",de.d=fe?"1":"0",de.g=ie?"1":"0",de.j=ae?"1":"0",de.u=ue?"1":"0",z.length>0&&(de.channel=z.join(","));V.length>0&&(de["channel-group"]=V.join(","));le.length>0&&(de.auth=le.join(","));J.length>0&&(de["target-uuid"]=J.join(","));(X||0===X)&&(de.ttl=X);return de},H.handleResponse=function(){return{}};q(2);var Y=z(q(1))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNAccessManagerGrantToken},H.extractPermissions=o,H.validateParams=function(D,H){var q=D.config;if(!q.subscribeKey)return"Missing Subscribe Key";if(!q.publishKey)return"Missing Publish Key";if(!q.secretKey)return"Missing Secret Key";if(!H.resources&&!H.patterns)return"Missing either Resources or Patterns.";if(H.resources&&(!H.resources.users||0===Object.keys(H.resources.users).length)&&(!H.resources.spaces||0===Object.keys(H.resources.spaces).length)||H.patterns&&(!H.patterns.users||0===Object.keys(H.patterns.users).length)&&(!H.patterns.spaces||0===Object.keys(H.patterns.spaces).length))return"Missing values for either Resources or Patterns."},H.postURL=function(D){var H=D.config;return"/v3/pam/".concat(H.subscribeKey,"/grant")},H.usePost=function(){return!0},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!1},H.prepareParams=function(){return{}},H.postPayload=function(D,H){return function(D,H){var q=H.ttl,z=H.resources,Y=H.patterns,V=H.meta,W={ttl:0,permissions:{resources:{channels:{},groups:{},users:{},spaces:{}},patterns:{channels:{},groups:{},users:{},spaces:{}},meta:{}}};if(z){var J=z.users,X=z.spaces;J&&Object.keys(J).forEach((function(D){W.permissions.resources.users[D]=o(J[D])})),X&&Object.keys(X).forEach((function(D){W.permissions.resources.spaces[D]=o(X[D])}))}if(Y){var $=Y.users,Q=Y.spaces;$&&Object.keys($).forEach((function(D){W.permissions.patterns.users[D]=o($[D])})),Q&&Object.keys(Q).forEach((function(D){W.permissions.patterns.spaces[D]=o(Q[D])}))}(q||0===q)&&(W.ttl=q);V&&(W.permissions.meta=V);return W}(0,H)},H.handleResponse=function(D,H){return H.data.token};q(2);var Y=z(q(1));function o(D){var H=0;return D.create&&(H|=16),D.delete&&(H|=8),D.manage&&(H|=4),D.write&&(H|=2),D.read&&(H|=1),H}},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return V.default.PNPublishOperation},H.validateParams=function(D,H){var q=D.config,z=H.message;if(!H.channel)return"Missing Channel";if(!z)return"Missing Message";if(!q.subscribeKey)return"Missing Subscribe Key"},H.usePost=function(D,H){var q=H.sendByPost;return void 0!==q&&q},H.getURL=function(D,H){var q=D.config,z=H.channel,Y=H.message,V=s(D,Y);return"/publish/".concat(q.publishKey,"/").concat(q.subscribeKey,"/0/").concat(W.default.encodeString(z),"/0/").concat(W.default.encodeString(V))},H.postURL=function(D,H){var q=D.config,z=H.channel;return"/publish/".concat(q.publishKey,"/").concat(q.subscribeKey,"/0/").concat(W.default.encodeString(z),"/0")},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.postPayload=function(D,H){var q=H.message;return s(D,q)},H.prepareParams=function(D,H){var q=H.meta,z=H.replicate,V=void 0===z||z,W=H.storeInHistory,J=H.ttl,X={};null!=W&&(X.store=W?"1":"0");J&&(X.ttl=J);!1===V&&(X.norep="true");q&&"object"===(0,Y.default)(q)&&(X.meta=JSON.stringify(q));return X},H.handleResponse=function(D,H){return{timetoken:H[2]}};var Y=z(q(7)),V=(q(2),z(q(1))),W=z(q(3));function s(D,H){var q=D.crypto,z=D.config,Y=JSON.stringify(H);return z.cipherKey&&(Y=q.encrypt(Y),Y=JSON.stringify(Y)),Y}},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNSignalOperation},H.validateParams=function(D,H){var q=D.config,z=H.message;if(!H.channel)return"Missing Channel";if(!z)return"Missing Message";if(!q.subscribeKey)return"Missing Subscribe Key"},H.getURL=function(D,H){var q=D.config,z=H.channel,Y=H.message,W=(J=Y,JSON.stringify(J));var J;return"/signal/".concat(q.publishKey,"/").concat(q.subscribeKey,"/0/").concat(V.default.encodeString(z),"/0/").concat(V.default.encodeString(W))},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.prepareParams=function(){return{}},H.handleResponse=function(D,H){return{timetoken:H[2]}};q(2);var Y=z(q(1)),V=z(q(3))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNHistoryOperation},H.validateParams=function(D,H){var q=H.channel,z=D.config;if(!q)return"Missing channel";if(!z.subscribeKey)return"Missing Subscribe Key"},H.getURL=function(D,H){var q=H.channel,z=D.config;return"/v2/history/sub-key/".concat(z.subscribeKey,"/channel/").concat(V.default.encodeString(q))},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.prepareParams=function(D,H){var q=H.start,z=H.end,Y=H.reverse,V=H.count,W=void 0===V?100:V,J=H.stringifiedTimeToken,X=void 0!==J&&J,$=H.includeMeta,Q=void 0!==$&&$,Z={include_token:"true"};Z.count=W,q&&(Z.start=q);z&&(Z.end=z);X&&(Z.string_message_token="true");null!=Y&&(Z.reverse=Y.toString());Q&&(Z.include_meta="true");return Z},H.handleResponse=function(D,H){var q={messages:[],startTimeToken:H[1],endTimeToken:H[2]};Array.isArray(H[0])&&H[0].forEach((function(H){var z={timetoken:H.timetoken,entry:a(D,H.message)};H.meta&&(z.meta=H.meta),q.messages.push(z)}));return q};q(2);var Y=z(q(1)),V=z(q(3));function a(D,H){var q=D.config,z=D.crypto;if(!q.cipherKey)return H;try{return z.decrypt(H)}catch(D){return H}}},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNDeleteMessagesOperation},H.validateParams=function(D,H){var q=H.channel,z=D.config;if(!q)return"Missing channel";if(!z.subscribeKey)return"Missing Subscribe Key"},H.useDelete=function(){return!0},H.getURL=function(D,H){var q=H.channel,z=D.config;return"/v3/history/sub-key/".concat(z.subscribeKey,"/channel/").concat(V.default.encodeString(q))},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.prepareParams=function(D,H){var q=H.start,z=H.end,Y={};q&&(Y.start=q);z&&(Y.end=z);return Y},H.handleResponse=function(D,H){return H.payload};q(2);var Y=z(q(1)),V=z(q(3))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return V.default.PNMessageCounts},H.validateParams=function(D,H){var q=H.channels,z=H.timetoken,Y=H.channelTimetokens,V=D.config;if(!q)return"Missing channel";if(z&&Y)return"timetoken and channelTimetokens are incompatible together";if(z&&Y&&Y.length>1&&q.length!==Y.length)return"Length of channelTimetokens and channels do not match";if(!V.subscribeKey)return"Missing Subscribe Key"},H.getURL=function(D,H){var q=H.channels,z=D.config,Y=q.join(",");return"/v3/history/sub-key/".concat(z.subscribeKey,"/message-counts/").concat(W.default.encodeString(Y))},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.prepareParams=function(D,H){var q=H.timetoken,z=H.channelTimetokens,V={};if(z&&1===z.length){var W=(0,Y.default)(z,1)[0];V.timetoken=W}else z?V.channelsTimetoken=z.join(","):q&&(V.timetoken=q);return V},H.handleResponse=function(D,H){return{channels:H.channels}};var Y=z(q(9)),V=z(q(1)),W=z(q(3))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNFetchMessagesOperation},H.validateParams=function(D,H){var q=H.channels,z=H.includeMessageActions,Y=void 0!==z&&z,V=D.config;if(!q||0===q.length)return"Missing channels";if(!V.subscribeKey)return"Missing Subscribe Key";if(Y&&q.length>1)throw new TypeError("History can return actions data for a single channel only. Either pass a single channel or disable the includeMessageActions flag.")},H.getURL=function(D,H){var q=H.channels,z=void 0===q?[]:q,Y=H.includeMessageActions,W=void 0!==Y&&Y,J=D.config,X=W?"history-with-actions":"history",$=z.length>0?z.join(","):",";return"/v3/".concat(X,"/sub-key/").concat(J.subscribeKey,"/channel/").concat(V.default.encodeString($))},H.getRequestTimeout=function(D){return D.config.getTransactionTimeout()},H.isAuthSupported=function(){return!0},H.prepareParams=function(D,H){var q=H.channels,z=H.start,Y=H.end,V=H.includeMessageActions,W=H.count,J=H.stringifiedTimeToken,X=void 0!==J&&J,$=H.includeMeta,Q=void 0!==$&&$,Z=H.includeUuid,ee=H.includeUUID,te=void 0===ee||ee,ne=H.includeMessageType,re=void 0===ne||ne,ie={};ie.max=W||(q.length>1||!0===V?25:100);z&&(ie.start=z);Y&&(ie.end=Y);X&&(ie.string_message_token="true");Q&&(ie.include_meta="true");te&&!1!==Z&&(ie.include_uuid="true");re&&(ie.include_message_type="true");return ie},H.handleResponse=function(D,H){var q={channels:{}};Object.keys(H.channels||{}).forEach((function(z){q.channels[z]=[],(H.channels[z]||[]).forEach((function(H){var Y={};Y.channel=z,Y.timetoken=H.timetoken,Y.message=function(D,H){var q=D.config,z=D.crypto;if(!q.cipherKey)return H;try{return z.decrypt(H)}catch(D){return H}}(D,H.message),Y.messageType=H.message_type,Y.uuid=H.uuid,H.actions&&(Y.actions=H.actions,Y.data=H.actions),H.meta&&(Y.meta=H.meta),q.channels[z].push(Y)}))})),H.more&&(q.more=H.more);return q};q(2);var Y=z(q(1)),V=z(q(3))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.getOperation=function(){return Y.default.PNSubscribeOperation},H.validateParams=function(D){if(!D.config.subscribeKey)return"Missing Subscribe Key"},H.getURL=function(D,H){var q=D.config,z=H.channels,Y=void 0===z?[]:z,W=Y.length>0?Y.join(","):",";return"/v2/subscribe/".concat(q.subscribeKey,"/").concat(V.default.encodeString(W),"/0")},H.getRequestTimeout=function(D){return D.config.getSubscribeTimeout()},H.isAuthSupported=function(){return!0},H.prepareParams=function(D,H){var q=D.config,z=H.state,Y=H.channelGroups,V=void 0===Y?[]:Y,W=H.timetoken,J=H.filterExpression,X=H.region,$={heartbeat:q.getPresenceTimeout()};V.length>0&&($["channel-group"]=V.join(","));J&&J.length>0&&($["filter-expr"]=J);Object.keys(z).length&&($.state=JSON.stringify(z));W&&($.tt=W);X&&($.tr=X);return $},H.handleResponse=function(D,H){var q=[];H.m.forEach((function(D){var H={publishTimetoken:D.p.t,region:D.p.r},z={shard:parseInt(D.a,10),subscriptionMatch:D.b,channel:D.c,messageType:D.e,payload:D.d,flags:D.f,issuingClientId:D.i,subscribeKey:D.k,originationTimetoken:D.o,userMetadata:D.u,publishMetaData:H};q.push(z)}));var z={timetoken:H.t.t,region:H.t.r};return{messages:q,metadata:z}};q(2);var Y=z(q(1)),V=z(q(3))},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var Y=z(q(5)),V=z(q(6)),W=z(q(4)),J=(z(q(8)),z(q(10))),X=(q(2),function(){function e(D){var H=this;(0,Y.default)(this,e),(0,W.default)(this,"_modules",void 0),(0,W.default)(this,"_config",void 0),(0,W.default)(this,"_maxSubDomain",void 0),(0,W.default)(this,"_currentSubDomain",void 0),(0,W.default)(this,"_standardOrigin",void 0),(0,W.default)(this,"_subscribeOrigin",void 0),(0,W.default)(this,"_providedFQDN",void 0),(0,W.default)(this,"_requestTimeout",void 0),(0,W.default)(this,"_coreParams",void 0),this._modules={},Object.keys(D).forEach((function(q){H._modules[q]=D[q].bind(H)}))}return(0,V.default)(e,[{key:"init",value:function(D){this._config=D,this._maxSubDomain=20,this._currentSubDomain=Math.floor(Math.random()*this._maxSubDomain),this._providedFQDN=(this._config.secure?"https://":"http://")+this._config.origin,this._coreParams={},this.shiftStandardOrigin()}},{key:"nextOrigin",value:function(){return this._providedFQDN.match(/ps\.pndsn\.com$/i)?(this._currentSubDomain+=1,this._currentSubDomain>=this._maxSubDomain&&(this._currentSubDomain=1),D=this._currentSubDomain.toString(),this._providedFQDN.replace("ps.pndsn.com","ps".concat(D,".pndsn.com"))):this._providedFQDN;var D}},{key:"hasModule",value:function(D){return D in this._modules}},{key:"shiftStandardOrigin",value:function(){return this._standardOrigin=this.nextOrigin(),this._standardOrigin}},{key:"getStandardOrigin",value:function(){return this._standardOrigin}},{key:"POSTFILE",value:function(D,H,q){return this._modules.postfile(D,H,q)}},{key:"GETFILE",value:function(D,H,q){return this._modules.getfile(D,H,q)}},{key:"POST",value:function(D,H,q,z){return this._modules.post(D,H,q,z)}},{key:"PATCH",value:function(D,H,q,z){return this._modules.patch(D,H,q,z)}},{key:"GET",value:function(D,H,q){return this._modules.get(D,H,q)}},{key:"DELETE",value:function(D,H,q){return this._modules.del(D,H,q)}},{key:"_detectErrorCategory",value:function(D){if("ENOTFOUND"===D.code)return J.default.PNNetworkIssuesCategory;if("ECONNREFUSED"===D.code)return J.default.PNNetworkIssuesCategory;if("ECONNRESET"===D.code)return J.default.PNNetworkIssuesCategory;if("EAI_AGAIN"===D.code)return J.default.PNNetworkIssuesCategory;if(0===D.status||D.hasOwnProperty("status")&&void 0===D.status)return J.default.PNNetworkIssuesCategory;if(D.timeout)return J.default.PNTimeoutCategory;if("ETIMEDOUT"===D.code)return J.default.PNNetworkIssuesCategory;if(D.response){if(D.response.badRequest)return J.default.PNBadRequestCategory;if(D.response.forbidden)return J.default.PNAccessDeniedCategory}return J.default.PNUnknownCategory}}]),e}());H.default=X,D.exports=H.default},function(D,H,q){"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var z={get:function(D){try{return localStorage.getItem(D)}catch(D){return null}},set:function(D,H){try{return localStorage.setItem(D,H)}catch(D){return null}}};H.default=z,D.exports=H.default},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var Y=z(q(7)),V=z(q(5)),W=z(q(6)),J=z(q(4)),X=function(){function e(D,H){(0,V.default)(this,e),(0,J.default)(this,"_base64ToBinary",void 0),(0,J.default)(this,"_cborReader",void 0),this._base64ToBinary=H,this._decode=D}return(0,W.default)(e,[{key:"decodeToken",value:function(D){var H="";D.length%4==3?H="=":D.length%4==2&&(H="==");var q=D.replace(/-/gi,"+").replace(/_/gi,"/")+H,z=this._decode(this._base64ToBinary(q));if("object"===(0,Y.default)(z))return z}}]),e}();H.default=X,D.exports=H.default},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.postfile=function(D,H,q){return c.apply(this,arguments)},H.getfile=function(D,H,q){var z=W.default.get(this.getStandardOrigin()+H.url).set(H.headers).query(D);return u.call(this,z,H,q)},H.get=function(D,H,q){var z=W.default.get(this.getStandardOrigin()+H.url).set(H.headers).query(D);return u.call(this,z,H,q)},H.post=function(D,H,q,z){var Y=W.default.post(this.getStandardOrigin()+q.url).query(D).set(q.headers).send(H);return u.call(this,Y,q,z)},H.patch=function(D,H,q,z){var Y=W.default.patch(this.getStandardOrigin()+q.url).query(D).set(q.headers).send(H);return u.call(this,Y,q,z)},H.del=function(D,H,q){var z=W.default.delete(this.getStandardOrigin()+H.url).set(H.headers).query(D);return u.call(this,z,H,q)};var Y=z(q(11)),V=z(q(12)),W=z(q(125));q(2);function s(D){var H=(new Date).getTime(),q=(new Date).toISOString(),z=console&&console.log?console:window&&window.console&&window.console.log?window.console:console;z.log("<<<<<"),z.log("[".concat(q,"]"),"\n",D.url,"\n",D.qs),z.log("-----"),D.on("response",(function(q){var Y=(new Date).getTime()-H,V=(new Date).toISOString();z.log(">>>>>>"),z.log("[".concat(V," / ").concat(Y,"]"),"\n",D.url,"\n",D.qs,"\n",q.text),z.log("-----")}))}function u(D,H,q){var z=this;this._config.logVerbosity&&(D=D.use(s)),this._config.proxy&&this._modules.proxy&&(D=this._modules.proxy.call(this,D)),this._config.keepAlive&&this._modules.keepAlive&&(D=this._modules.keepAlive(D));var Y=D;return!0===H.forceBuffered?Y="undefined"==typeof Blob?Y.buffer().responseType("arraybuffer"):Y.responseType("arraybuffer"):!1===H.forceBuffered&&(Y=Y.buffer(!1)),Y.timeout(H.timeout).end((function(D,Y){var V,W={};if(W.error=null!==D,W.operation=H.operation,Y&&Y.status&&(W.statusCode=Y.status),D){if(D.response&&D.response.text&&!z._config.logVerbosity)try{W.errorData=JSON.parse(D.response.text)}catch(H){W.errorData=D}else W.errorData=D;return W.category=z._detectErrorCategory(D),q(W,null)}if(H.ignoreBody)V={headers:Y.headers,redirects:Y.redirects,response:Y};else try{V=JSON.parse(Y.text)}catch(D){return W.errorData=Y,W.error=!0,q(W,null)}return V.error&&1===V.error&&V.status&&V.message&&V.service?(W.errorData=V,W.statusCode=V.status,W.error=!0,W.category=z._detectErrorCategory(W),q(W,null)):(V.error&&V.error.message&&(W.errorData=V.error),q(W,V))}))}function c(){return(c=(0,V.default)(Y.default.mark((function e(D,H,q){var z,V;return Y.default.wrap((function(Y){for(;;)switch(Y.prev=Y.next){case 0:return z=W.default.post(D),H.forEach((function(D){var H=D.key,q=D.value;z=z.field(H,q)})),z.attach("file",q,{contentType:"application/octet-stream"}),Y.next=5,z;case 5:return V=Y.sent,Y.abrupt("return",V);case 7:case"end":return Y.stop()}}),e)})))).apply(this,arguments)}},function(D,H,q){var z;"undefined"!=typeof window?z=window:"undefined"!=typeof self?z=self:(console.warn("Using browser-only version of superagent in non-browser environment"),z=this);var Y=q(126),V=q(127),W=q(26),J=q(128),X=q(130);function c(){}var $=H=D.exports=function(D,q){return"function"==typeof q?new H.Request("GET",D).end(q):1==arguments.length?new H.Request("GET",D):new H.Request(D,q)};H.Request=y,$.getXHR=function(){if(!(!z.XMLHttpRequest||z.location&&"file:"==z.location.protocol&&z.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(D){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(D){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(D){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(D){}throw Error("Browser-only version of superagent could not find XHR")};var Q="".trim?function(D){return D.trim()}:function(D){return D.replace(/(^\s*|\s*$)/g,"")};function d(D){if(!W(D))return D;var H=[];for(var q in D)p(H,q,D[q]);return H.join("&")}function p(D,H,q){if(null!=q)if(Array.isArray(q))q.forEach((function(q){p(D,H,q)}));else if(W(q))for(var z in q)p(D,H+"["+z+"]",q[z]);else D.push(encodeURIComponent(H)+"="+encodeURIComponent(q));else null===q&&D.push(encodeURIComponent(H))}function h(D){for(var H,q,z={},Y=D.split("&"),V=0,W=Y.length;V<W;++V)-1==(q=(H=Y[V]).indexOf("="))?z[decodeURIComponent(H)]="":z[decodeURIComponent(H.slice(0,q))]=decodeURIComponent(H.slice(q+1));return z}function g(D){return/[\/+]json($|[^-\w])/.test(D)}function v(D){this.req=D,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var H=this.xhr.status;1223===H&&(H=204),this._setStatusProperties(H),this.header=this.headers=function(D){for(var H,q,z,Y,V=D.split(/\r?\n/),W={},J=0,X=V.length;J<X;++J)-1!==(H=(q=V[J]).indexOf(":"))&&(z=q.slice(0,H).toLowerCase(),Y=Q(q.slice(H+1)),W[z]=Y);return W}(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&D._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function y(D,H){var q=this;this._query=this._query||[],this.method=D,this.url=H,this.header={},this._header={},this.on("end",(function(){var D,H=null,z=null;try{z=new v(q)}catch(D){return(H=new Error("Parser is unable to parse the response")).parse=!0,H.original=D,q.xhr?(H.rawResponse=void 0===q.xhr.responseType?q.xhr.responseText:q.xhr.response,H.status=q.xhr.status?q.xhr.status:null,H.statusCode=H.status):(H.rawResponse=null,H.status=null),q.callback(H)}q.emit("response",z);try{q._isResponseOK(z)||(D=new Error(z.statusText||"Unsuccessful HTTP response"))}catch(H){D=H}D?(D.original=H,D.response=z,D.status=z.status,q.callback(D,z)):q.callback(null,z)}))}function b(D,H,q){var z=$("DELETE",D);return"function"==typeof H&&(q=H,H=null),H&&z.send(H),q&&z.end(q),z}$.serializeObject=d,$.parseString=h,$.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},$.serialize={"application/x-www-form-urlencoded":d,"application/json":JSON.stringify},$.parse={"application/x-www-form-urlencoded":h,"application/json":JSON.parse},J(v.prototype),v.prototype._parseBody=function(D){var H=$.parse[this.type];return this.req._parser?this.req._parser(this,D):(!H&&g(this.type)&&(H=$.parse["application/json"]),H&&D&&(D.length||D instanceof Object)?H(D):null)},v.prototype.toError=function(){var D=this.req,H=D.method,q=D.url,z="cannot "+H+" "+q+" ("+this.status+")",Y=new Error(z);return Y.status=this.status,Y.method=H,Y.url=q,Y},$.Response=v,Y(y.prototype),V(y.prototype),y.prototype.type=function(D){return this.set("Content-Type",$.types[D]||D),this},y.prototype.accept=function(D){return this.set("Accept",$.types[D]||D),this},y.prototype.auth=function(D,H,q){1===arguments.length&&(H=""),"object"==typeof H&&null!==H&&(q=H,H=""),q||(q={type:"function"==typeof btoa?"basic":"auto"});var r=function(D){if("function"==typeof btoa)return btoa(D);throw new Error("Cannot use basic auth, btoa is not a function")};return this._auth(D,H,q,r)},y.prototype.query=function(D){return"string"!=typeof D&&(D=d(D)),D&&this._query.push(D),this},y.prototype.attach=function(D,H,q){if(H){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(D,H,q||H.name)}return this},y.prototype._getFormData=function(){return this._formData||(this._formData=new z.FormData),this._formData},y.prototype.callback=function(D,H){if(this._shouldRetry(D,H))return this._retry();var q=this._callback;this.clearTimeout(),D&&(this._maxRetries&&(D.retries=this._retries-1),this.emit("error",D)),q(D,H)},y.prototype.crossDomainError=function(){var D=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");D.crossDomain=!0,D.status=this.status,D.method=this.method,D.url=this.url,this.callback(D)},y.prototype.buffer=y.prototype.ca=y.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},y.prototype.pipe=y.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},y.prototype._isHost=function(D){return D&&"object"==typeof D&&!Array.isArray(D)&&"[object Object]"!==Object.prototype.toString.call(D)},y.prototype.end=function(D){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=D||c,this._finalizeQueryString(),this._end()},y.prototype._end=function(){var D=this,H=this.xhr=$.getXHR(),q=this._formData||this._data;this._setTimeouts(),H.onreadystatechange=function(){var q=H.readyState;if(q>=2&&D._responseTimeoutTimer&&clearTimeout(D._responseTimeoutTimer),4==q){var z;try{z=H.status}catch(D){z=0}if(!z){if(D.timedout||D._aborted)return;return D.crossDomainError()}D.emit("end")}};var r=function(H,q){q.total>0&&(q.percent=q.loaded/q.total*100),q.direction=H,D.emit("progress",q)};if(this.hasListeners("progress"))try{H.onprogress=r.bind(null,"download"),H.upload&&(H.upload.onprogress=r.bind(null,"upload"))}catch(D){}try{this.username&&this.password?H.open(this.method,this.url,!0,this.username,this.password):H.open(this.method,this.url,!0)}catch(D){return this.callback(D)}if(this._withCredentials&&(H.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof q&&!this._isHost(q)){var z=this._header["content-type"],Y=this._serializer||$.serialize[z?z.split(";")[0]:""];!Y&&g(z)&&(Y=$.serialize["application/json"]),Y&&(q=Y(q))}for(var V in this.header)null!=this.header[V]&&this.header.hasOwnProperty(V)&&H.setRequestHeader(V,this.header[V]);return this._responseType&&(H.responseType=this._responseType),this.emit("request",this),H.send(void 0!==q?q:null),this},$.agent=function(){return new X},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach((function(D){X.prototype[D.toLowerCase()]=function(H,q){var z=new $.Request(D,H);return this._setDefaults(z),q&&z.end(q),z}})),X.prototype.del=X.prototype.delete,$.get=function(D,H,q){var z=$("GET",D);return"function"==typeof H&&(q=H,H=null),H&&z.query(H),q&&z.end(q),z},$.head=function(D,H,q){var z=$("HEAD",D);return"function"==typeof H&&(q=H,H=null),H&&z.query(H),q&&z.end(q),z},$.options=function(D,H,q){var z=$("OPTIONS",D);return"function"==typeof H&&(q=H,H=null),H&&z.send(H),q&&z.end(q),z},$.del=b,$.delete=b,$.patch=function(D,H,q){var z=$("PATCH",D);return"function"==typeof H&&(q=H,H=null),H&&z.send(H),q&&z.end(q),z},$.post=function(D,H,q){var z=$("POST",D);return"function"==typeof H&&(q=H,H=null),H&&z.send(H),q&&z.end(q),z},$.put=function(D,H,q){var z=$("PUT",D);return"function"==typeof H&&(q=H,H=null),H&&z.send(H),q&&z.end(q),z}},function(D,H,q){function r(D){if(D)return function(D){for(var H in r.prototype)D[H]=r.prototype[H];return D}(D)}D.exports=r,r.prototype.on=r.prototype.addEventListener=function(D,H){return this._callbacks=this._callbacks||{},(this._callbacks["$"+D]=this._callbacks["$"+D]||[]).push(H),this},r.prototype.once=function(D,H){function n(){this.off(D,n),H.apply(this,arguments)}return n.fn=H,this.on(D,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(D,H){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var q,z=this._callbacks["$"+D];if(!z)return this;if(1==arguments.length)return delete this._callbacks["$"+D],this;for(var Y=0;Y<z.length;Y++)if((q=z[Y])===H||q.fn===H){z.splice(Y,1);break}return 0===z.length&&delete this._callbacks["$"+D],this},r.prototype.emit=function(D){this._callbacks=this._callbacks||{};for(var H=new Array(arguments.length-1),q=this._callbacks["$"+D],z=1;z<arguments.length;z++)H[z-1]=arguments[z];if(q){z=0;for(var Y=(q=q.slice(0)).length;z<Y;++z)q[z].apply(this,H)}return this},r.prototype.listeners=function(D){return this._callbacks=this._callbacks||{},this._callbacks["$"+D]||[]},r.prototype.hasListeners=function(D){return!!this.listeners(D).length}},function(D,H,q){"use strict";var z=q(26);function i(D){if(D)return function(D){for(var H in i.prototype)D[H]=i.prototype[H];return D}(D)}D.exports=i,i.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},i.prototype.parse=function(D){return this._parser=D,this},i.prototype.responseType=function(D){return this._responseType=D,this},i.prototype.serialize=function(D){return this._serializer=D,this},i.prototype.timeout=function(D){if(!D||"object"!=typeof D)return this._timeout=D,this._responseTimeout=0,this;for(var H in D)switch(H){case"deadline":this._timeout=D.deadline;break;case"response":this._responseTimeout=D.response;break;default:console.warn("Unknown timeout option",H)}return this},i.prototype.retry=function(D,H){return 0!==arguments.length&&!0!==D||(D=1),D<=0&&(D=0),this._maxRetries=D,this._retries=0,this._retryCallback=H,this};var Y=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];i.prototype._shouldRetry=function(D,H){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var q=this._retryCallback(D,H);if(!0===q)return!0;if(!1===q)return!1}catch(D){console.error(D)}if(H&&H.status&&H.status>=500&&501!=H.status)return!0;if(D){if(D.code&&~Y.indexOf(D.code))return!0;if(D.timeout&&"ECONNABORTED"==D.code)return!0;if(D.crossDomain)return!0}return!1},i.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},i.prototype.then=function(D,H){if(!this._fullfilledPromise){var q=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise((function(D,H){q.end((function(q,z){q?H(q):D(z)}))}))}return this._fullfilledPromise.then(D,H)},i.prototype.catch=function(D){return this.then(void 0,D)},i.prototype.use=function(D){return D(this),this},i.prototype.ok=function(D){if("function"!=typeof D)throw Error("Callback required");return this._okCallback=D,this},i.prototype._isResponseOK=function(D){return!!D&&(this._okCallback?this._okCallback(D):D.status>=200&&D.status<300)},i.prototype.get=function(D){return this._header[D.toLowerCase()]},i.prototype.getHeader=i.prototype.get,i.prototype.set=function(D,H){if(z(D)){for(var q in D)this.set(q,D[q]);return this}return this._header[D.toLowerCase()]=H,this.header[D]=H,this},i.prototype.unset=function(D){return delete this._header[D.toLowerCase()],delete this.header[D],this},i.prototype.field=function(D,H){if(null==D)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),z(D)){for(var q in D)this.field(q,D[q]);return this}if(Array.isArray(H)){for(var Y in H)this.field(D,H[Y]);return this}if(null==H)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof H&&(H=""+H),this._getFormData().append(D,H),this},i.prototype.abort=function(){return this._aborted||(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort")),this},i.prototype._auth=function(D,H,q,z){switch(q.type){case"basic":this.set("Authorization","Basic "+z(D+":"+H));break;case"auto":this.username=D,this.password=H;break;case"bearer":this.set("Authorization","Bearer "+D)}return this},i.prototype.withCredentials=function(D){return null==D&&(D=!0),this._withCredentials=D,this},i.prototype.redirects=function(D){return this._maxRedirects=D,this},i.prototype.maxResponseSize=function(D){if("number"!=typeof D)throw TypeError("Invalid argument");return this._maxResponseSize=D,this},i.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},i.prototype.send=function(D){var H=z(D),q=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),H&&!this._data)Array.isArray(D)?this._data=[]:this._isHost(D)||(this._data={});else if(D&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(H&&z(this._data))for(var Y in D)this._data[Y]=D[Y];else"string"==typeof D?(q||this.type("form"),q=this._header["content-type"],this._data="application/x-www-form-urlencoded"==q?this._data?this._data+"&"+D:D:(this._data||"")+D):this._data=D;return!H||this._isHost(D)||q||this.type("json"),this},i.prototype.sortQuery=function(D){return this._sort=void 0===D||D,this},i.prototype._finalizeQueryString=function(){var D=this._query.join("&");if(D&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+D),this._query.length=0,this._sort){var H=this.url.indexOf("?");if(H>=0){var q=this.url.substring(H+1).split("&");"function"==typeof this._sort?q.sort(this._sort):q.sort(),this.url=this.url.substring(0,H)+"?"+q.join("&")}}},i.prototype._appendQueryString=function(){console.trace("Unsupported")},i.prototype._timeoutError=function(D,H,q){if(!this._aborted){var z=new Error(D+H+"ms exceeded");z.timeout=H,z.code="ECONNABORTED",z.errno=q,this.timedout=!0,this.abort(),this.callback(z)}},i.prototype._setTimeouts=function(){var D=this;this._timeout&&!this._timer&&(this._timer=setTimeout((function(){D._timeoutError("Timeout of ",D._timeout,"ETIME")}),this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout((function(){D._timeoutError("Response timeout of ",D._responseTimeout,"ETIMEDOUT")}),this._responseTimeout))}},function(D,H,q){"use strict";var z=q(129);function i(D){if(D)return function(D){for(var H in i.prototype)D[H]=i.prototype[H];return D}(D)}D.exports=i,i.prototype.get=function(D){return this.header[D.toLowerCase()]},i.prototype._setHeaderProperties=function(D){var H=D["content-type"]||"";this.type=z.type(H);var q=z.params(H);for(var Y in q)this[Y]=q[Y];this.links={};try{D.link&&(this.links=z.parseLinks(D.link))}catch(D){}},i.prototype._setStatusProperties=function(D){var H=D/100|0;this.status=this.statusCode=D,this.statusType=H,this.info=1==H,this.ok=2==H,this.redirect=3==H,this.clientError=4==H,this.serverError=5==H,this.error=(4==H||5==H)&&this.toError(),this.created=201==D,this.accepted=202==D,this.noContent=204==D,this.badRequest=400==D,this.unauthorized=401==D,this.notAcceptable=406==D,this.forbidden=403==D,this.notFound=404==D,this.unprocessableEntity=422==D}},function(D,H,q){"use strict";H.type=function(D){return D.split(/ *; */).shift()},H.params=function(D){return D.split(/ *; */).reduce((function(D,H){var q=H.split(/ *= */),z=q.shift(),Y=q.shift();return z&&Y&&(D[z]=Y),D}),{})},H.parseLinks=function(D){return D.split(/ *, */).reduce((function(D,H){var q=H.split(/ *; */),z=q[0].slice(1,-1);return D[q[1].split(/ *= */)[1].slice(1,-1)]=z,D}),{})},H.cleanHeader=function(D,H){return delete D["content-type"],delete D["content-length"],delete D["transfer-encoding"],delete D.host,H&&(delete D.authorization,delete D.cookie),D}},function(D,H){function n(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach((function(D){n.prototype[D]=function(){return this._defaults.push({fn:D,arguments}),this}})),n.prototype._setDefaults=function(D){this._defaults.forEach((function(H){D[H.fn].apply(D,H.arguments)}))},D.exports=n},function(D,H,q){"use strict";(function(z){var Y=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var V=Y(q(11)),W=Y(q(12)),J=Y(q(5)),X=Y(q(6)),$=Y(q(4)),Q=Y(q(133));function f(D,H){var q=new Uint8Array(D.byteLength+H.byteLength);return q.set(new Uint8Array(D),0),q.set(new Uint8Array(H),D.byteLength),q.buffer}var Z=function(){function e(){(0,J.default)(this,e)}var D,H,q,Y,$,Z,ee,te,ne;return(0,X.default)(e,[{key:"encrypt",value:(ne=(0,W.default)(V.default.mark((function e(D,H){var q;return V.default.wrap((function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.getKey(D);case 2:if(q=z.sent,!(H instanceof ArrayBuffer)){z.next=7;break}return z.abrupt("return",this.encryptArrayBuffer(q,H));case 7:if("string"!=typeof H){z.next=11;break}return z.abrupt("return",this.encryptString(q,H));case 11:throw new Error("Cannot encrypt this file. In browsers file encryption supports only string or ArrayBuffer");case 12:case"end":return z.stop()}}),e,this)}))),function(D,H){return ne.apply(this,arguments)})},{key:"decrypt",value:(te=(0,W.default)(V.default.mark((function e(D,H){var q;return V.default.wrap((function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.getKey(D);case 2:if(q=z.sent,!(H instanceof ArrayBuffer)){z.next=7;break}return z.abrupt("return",this.decryptArrayBuffer(q,H));case 7:if("string"!=typeof H){z.next=11;break}return z.abrupt("return",this.decryptString(q,H));case 11:throw new Error("Cannot decrypt this file. In browsers file decryption supports only string or ArrayBuffer");case 12:case"end":return z.stop()}}),e,this)}))),function(D,H){return te.apply(this,arguments)})},{key:"encryptFile",value:(ee=(0,W.default)(V.default.mark((function e(D,H,q){var z,Y,W;return V.default.wrap((function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,this.getKey(D);case 2:return z=V.sent,V.next=5,H.toArrayBuffer();case 5:return Y=V.sent,V.next=8,this.encryptArrayBuffer(z,Y);case 8:return W=V.sent,V.abrupt("return",q.create({name:H.name,mimeType:"application/octet-stream",data:W}));case 10:case"end":return V.stop()}}),e,this)}))),function(D,H,q){return ee.apply(this,arguments)})},{key:"decryptFile",value:(Z=(0,W.default)(V.default.mark((function e(D,H,q){var z,Y,W;return V.default.wrap((function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,this.getKey(D);case 2:return z=V.sent,V.next=5,H.toArrayBuffer();case 5:return Y=V.sent,V.next=8,this.decryptArrayBuffer(z,Y);case 8:if(W=V.sent,!(H.data instanceof ArrayBuffer)){V.next=13;break}return V.abrupt("return",q.create({name:H.name,data:W}));case 13:throw new Error("Cannot decrypt this file. In browser environment file decryption supports only ArrayBuffer.");case 14:case"end":return V.stop()}}),e,this)}))),function(D,H,q){return Z.apply(this,arguments)})},{key:"getKey",value:($=(0,W.default)(V.default.mark((function e(D){var H,q,Y;return V.default.wrap((function(V){for(;;)switch(V.prev=V.next){case 0:return H=z.from(D),V.next=3,Q.default.subtle.digest("SHA-256",H.buffer);case 3:return q=V.sent,Y=z.from(z.from(q).toString("hex").slice(0,32),"utf8").buffer,V.abrupt("return",Q.default.subtle.importKey("raw",Y,"AES-CBC",!0,["encrypt","decrypt"]));case 6:case"end":return V.stop()}}),e)}))),function(D){return $.apply(this,arguments)})},{key:"encryptArrayBuffer",value:(Y=(0,W.default)(V.default.mark((function e(D,H){var q;return V.default.wrap((function(z){for(;;)switch(z.prev=z.next){case 0:return q=Q.default.getRandomValues(new Uint8Array(16)),z.t0=f,z.t1=q.buffer,z.next=5,Q.default.subtle.encrypt({name:"AES-CBC",iv:q},D,H);case 5:return z.t2=z.sent,z.abrupt("return",(0,z.t0)(z.t1,z.t2));case 7:case"end":return z.stop()}}),e)}))),function(D,H){return Y.apply(this,arguments)})},{key:"decryptArrayBuffer",value:(q=(0,W.default)(V.default.mark((function e(D,H){var q;return V.default.wrap((function(z){for(;;)switch(z.prev=z.next){case 0:return q=H.slice(0,16),z.abrupt("return",Q.default.subtle.decrypt({name:"AES-CBC",iv:q},D,H.slice(16)));case 2:case"end":return z.stop()}}),e)}))),function(D,H){return q.apply(this,arguments)})},{key:"encryptString",value:(H=(0,W.default)(V.default.mark((function e(D,H){var q,Y,W,J;return V.default.wrap((function(V){for(;;)switch(V.prev=V.next){case 0:return q=Q.default.getRandomValues(new Uint8Array(16)),Y=z.from(H).buffer,V.next=4,Q.default.subtle.encrypt({name:"AES-CBC",iv:q},D,Y);case 4:return W=V.sent,J=f(q.buffer,W),V.abrupt("return",z.from(J).toString("utf8"));case 7:case"end":return V.stop()}}),e)}))),function(D,q){return H.apply(this,arguments)})},{key:"decryptString",value:(D=(0,W.default)(V.default.mark((function e(D,H){var q,Y,W,J;return V.default.wrap((function(V){for(;;)switch(V.prev=V.next){case 0:return q=z.from(H),Y=q.slice(0,16),W=q.slice(16),V.next=5,Q.default.subtle.decrypt({name:"AES-CBC",iv:Y},D,W);case 5:return J=V.sent,V.abrupt("return",z.from(J).toString("utf8"));case 7:case"end":return V.stop()}}),e)}))),function(H,q){return D.apply(this,arguments)})},{key:"algo",get:function(){return"aes-256-cbc"}}]),e}();H.default=Z,(0,$.default)(Z,"IV_LENGTH",16),D.exports=H.default}).call(this,q(21).Buffer)},function(D,H,q){"use strict";var z=q(0);Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var Y,V,W=z(q(11)),J=z(q(12)),X=z(q(5)),$=z(q(6)),Q=z(q(4)),Z=(q(25),V=Y=function(){function e(D){if((0,X.default)(this,e),(0,Q.default)(this,"data",void 0),(0,Q.default)(this,"name",void 0),(0,Q.default)(this,"mimeType",void 0),D instanceof File)this.data=D,this.name=this.data.name,this.mimeType=this.data.type;else if(D.data){var H=D.data;this.data=new File([H],D.name,{type:D.mimeType}),this.name=D.name,D.mimeType&&(this.mimeType=D.mimeType)}if(void 0===this.data)throw new Error("Couldn't construct a file out of supplied options.");if(void 0===this.name)throw new Error("Couldn't guess filename out of the options. Please provide one.")}var D,H,q,z,Y,V,Z;return(0,$.default)(e,null,[{key:"create",value:function(D){return new this(D)}}]),(0,$.default)(e,[{key:"toBuffer",value:(Z=(0,J.default)(W.default.mark((function e(){return W.default.wrap((function(D){for(;;)switch(D.prev=D.next){case 0:throw new Error("This feature is only supported in Node.js environments.");case 1:case"end":return D.stop()}}),e)}))),function(){return Z.apply(this,arguments)})},{key:"toStream",value:(V=(0,J.default)(W.default.mark((function e(){return W.default.wrap((function(D){for(;;)switch(D.prev=D.next){case 0:throw new Error("This feature is only supported in Node.js environments.");case 1:case"end":return D.stop()}}),e)}))),function(){return V.apply(this,arguments)})},{key:"toFileUri",value:(Y=(0,J.default)(W.default.mark((function e(){return W.default.wrap((function(D){for(;;)switch(D.prev=D.next){case 0:throw new Error("This feature is only supported in react native environments.");case 1:case"end":return D.stop()}}),e)}))),function(){return Y.apply(this,arguments)})},{key:"toBlob",value:(z=(0,J.default)(W.default.mark((function e(){return W.default.wrap((function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",this.data);case 1:case"end":return D.stop()}}),e,this)}))),function(){return z.apply(this,arguments)})},{key:"toArrayBuffer",value:(q=(0,J.default)(W.default.mark((function e(){var D=this;return W.default.wrap((function(H){for(;;)switch(H.prev=H.next){case 0:return H.abrupt("return",new Promise((function(H,q){var z=new FileReader;z.addEventListener("load",(function(){if(z.result instanceof ArrayBuffer)return H(z.result)})),z.addEventListener("error",(function(){q(z.error)})),z.readAsArrayBuffer(D.data)})));case 1:case"end":return H.stop()}}),e)}))),function(){return q.apply(this,arguments)})},{key:"toString",value:(H=(0,J.default)(W.default.mark((function e(){var D=this;return W.default.wrap((function(H){for(;;)switch(H.prev=H.next){case 0:return H.abrupt("return",new Promise((function(H,q){var z=new FileReader;z.addEventListener("load",(function(){if("string"==typeof z.result)return H(z.result)})),z.addEventListener("error",(function(){q(z.error)})),z.readAsBinaryString(D.data)})));case 1:case"end":return H.stop()}}),e)}))),function(){return H.apply(this,arguments)})},{key:"toFile",value:(D=(0,J.default)(W.default.mark((function e(){return W.default.wrap((function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",this.data);case 1:case"end":return D.stop()}}),e,this)}))),function(){return D.apply(this,arguments)})}]),e}(),(0,Q.default)(Y,"supportsFile","undefined"!=typeof File),(0,Q.default)(Y,"supportsBlob","undefined"!=typeof Blob),(0,Q.default)(Y,"supportsArrayBuffer","undefined"!=typeof ArrayBuffer),(0,Q.default)(Y,"supportsBuffer",!1),(0,Q.default)(Y,"supportsStream",!1),(0,Q.default)(Y,"supportsString",!0),(0,Q.default)(Y,"supportsEncryptFile",!0),(0,Q.default)(Y,"supportsFileUri",!1),V);H.default=Z,D.exports=H.default},function(Y,V,W){"use strict";W.r(V),function(Y,V){true?!(q=[],z=function(){return V(Y)}.apply(H,q),z!==undefined&&(D.exports=z)):0}("undefined"!=typeof self?self:void 0,(function(D){if("function"!=typeof Promise)throw"Promise support required";var H=D.crypto||D.msCrypto;if(H){var q=H.subtle||H.webkitSubtle;if(q){var z=D.Crypto||H.constructor||Object,Y=D.SubtleCrypto||q.constructor||Object,V=(D.CryptoKey||D.Key,D.navigator.userAgent.indexOf("Edge/")>-1),W=!!D.msCrypto&&!V,J=!H.subtle&&!!H.webkitSubtle;if(W||J){var X={KoZIhvcNAQEB:"1.2.840.113549.1.1.1"},$={"1.2.840.113549.1.1.1":"KoZIhvcNAQEB"};if(["generateKey","importKey","unwrapKey"].forEach((function(D){var z=q[D];q[D]=function(Y,V,X){var $,Q,Z,ee,te=[].slice.call(arguments);switch(D){case"generateKey":$=g(Y),Q=V,Z=X;break;case"importKey":$=g(X),Q=te[3],Z=te[4],"jwk"===Y&&((V=y(V)).alg||(V.alg=v($)),V.key_ops||(V.key_ops="oct"!==V.kty?"d"in V?Z.filter(T):Z.filter(O):Z.slice()),te[1]=b(V));break;case"unwrapKey":$=te[4],Q=te[5],Z=te[6],te[2]=X._key}if("generateKey"===D&&"HMAC"===$.name&&$.hash)return $.length=$.length||{"SHA-1":512,"SHA-256":512,"SHA-384":1024,"SHA-512":1024}[$.hash.name],q.importKey("raw",H.getRandomValues(new Uint8Array($.length+7>>3)),$,Q,Z);if(J&&"generateKey"===D&&"RSASSA-PKCS1-v1_5"===$.name&&(!$.modulusLength||$.modulusLength>=2048))return(Y=g(Y)).name="RSAES-PKCS1-v1_5",delete Y.hash,q.generateKey(Y,!0,["encrypt","decrypt"]).then((function(D){return Promise.all([q.exportKey("jwk",D.publicKey),q.exportKey("jwk",D.privateKey)])})).then((function(D){return D[0].alg=D[1].alg=v($),D[0].key_ops=Z.filter(O),D[1].key_ops=Z.filter(T),Promise.all([q.importKey("jwk",D[0],$,!0,D[0].key_ops),q.importKey("jwk",D[1],$,Q,D[1].key_ops)])})).then((function(D){return{publicKey:D[0],privateKey:D[1]}}));if((J||W&&"SHA-1"===($.hash||{}).name)&&"importKey"===D&&"jwk"===Y&&"HMAC"===$.name&&"oct"===V.kty)return q.importKey("raw",p(d(V.k)),X,te[3],te[4]);if(J&&"importKey"===D&&("spki"===Y||"pkcs8"===Y))return q.importKey("jwk",m(V),X,te[3],te[4]);if(W&&"unwrapKey"===D)return q.decrypt(te[3],X,V).then((function(D){return q.importKey(Y,D,te[4],te[5],te[6])}));try{ee=z.apply(q,te)}catch(D){return Promise.reject(D)}return W&&(ee=new Promise((function(D,H){ee.onabort=ee.onerror=function(D){H(D)},ee.oncomplete=function(H){D(H.target.result)}}))),ee=ee.then((function(D){return"HMAC"===$.name&&($.length||($.length=8*D.algorithm.length)),0==$.name.search("RSA")&&($.modulusLength||($.modulusLength=(D.publicKey||D).algorithm.modulusLength),$.publicExponent||($.publicExponent=(D.publicKey||D).algorithm.publicExponent)),D=D.publicKey&&D.privateKey?{publicKey:new w(D.publicKey,$,Q,Z.filter(O)),privateKey:new w(D.privateKey,$,Q,Z.filter(T))}:new w(D,$,Q,Z)}))}})),["exportKey","wrapKey"].forEach((function(D){var H=q[D];q[D]=function(z,Y,V){var X,$=[].slice.call(arguments);switch(D){case"exportKey":$[1]=Y._key;break;case"wrapKey":$[1]=Y._key,$[2]=V._key}if((J||W&&"SHA-1"===(Y.algorithm.hash||{}).name)&&"exportKey"===D&&"jwk"===z&&"HMAC"===Y.algorithm.name&&($[0]="raw"),!J||"exportKey"!==D||"spki"!==z&&"pkcs8"!==z||($[0]="jwk"),W&&"wrapKey"===D)return q.exportKey(z,Y).then((function(D){return"jwk"===z&&(D=p(unescape(encodeURIComponent(JSON.stringify(y(D)))))),q.encrypt($[3],V,D)}));try{X=H.apply(q,$)}catch(D){return Promise.reject(D)}return W&&(X=new Promise((function(D,H){X.onabort=X.onerror=function(D){H(D)},X.oncomplete=function(H){D(H.target.result)}}))),"exportKey"===D&&"jwk"===z&&(X=X.then((function(D){return(J||W&&"SHA-1"===(Y.algorithm.hash||{}).name)&&"HMAC"===Y.algorithm.name?{kty:"oct",alg:v(Y.algorithm),key_ops:Y.usages.slice(),ext:!0,k:f(h(D))}:((D=y(D)).alg||(D.alg=v(Y.algorithm)),D.key_ops||(D.key_ops="public"===Y.type?Y.usages.filter(O):"private"===Y.type?Y.usages.filter(T):Y.usages.slice()),D)}))),!J||"exportKey"!==D||"spki"!==z&&"pkcs8"!==z||(X=X.then((function(D){return D=_(y(D))}))),X}})),["encrypt","decrypt","sign","verify"].forEach((function(D){var H=q[D];q[D]=function(z,Y,V,J){if(W&&(!V.byteLength||J&&!J.byteLength))throw new Error("Empy input is not allowed");var X,$=[].slice.call(arguments),Q=g(z);if(W&&"decrypt"===D&&"AES-GCM"===Q.name){var Z=z.tagLength>>3;$[2]=(V.buffer||V).slice(0,V.byteLength-Z),z.tag=(V.buffer||V).slice(V.byteLength-Z)}$[1]=Y._key;try{X=H.apply(q,$)}catch(D){return Promise.reject(D)}return W&&(X=new Promise((function(H,q){X.onabort=X.onerror=function(D){q(D)},X.oncomplete=function(q){q=q.target.result;if("encrypt"===D&&q instanceof AesGcmEncryptResult){var z=q.ciphertext,Y=q.tag;(q=new Uint8Array(z.byteLength+Y.byteLength)).set(new Uint8Array(z),0),q.set(new Uint8Array(Y),z.byteLength),q=q.buffer}H(q)}}))),X}})),W){var Q=q.digest;q.digest=function(D,H){if(!H.byteLength)throw new Error("Empy input is not allowed");var z;try{z=Q.call(q,D,H)}catch(D){return Promise.reject(D)}return z=new Promise((function(D,H){z.onabort=z.onerror=function(D){H(D)},z.oncomplete=function(H){D(H.target.result)}}))},D.crypto=Object.create(H,{getRandomValues:{value:function(D){return H.getRandomValues(D)}},subtle:{value:q}}),D.CryptoKey=w}J&&(H.subtle=q,D.Crypto=z,D.SubtleCrypto=Y,D.CryptoKey=w)}}}function f(D){return btoa(D).replace(/\=+$/,"").replace(/\+/g,"-").replace(/\//g,"_")}function d(D){return D=(D+="===").slice(0,-D.length%4),atob(D.replace(/-/g,"+").replace(/_/g,"/"))}function p(D){for(var H=new Uint8Array(D.length),q=0;q<D.length;q++)H[q]=D.charCodeAt(q);return H}function h(D){return D instanceof ArrayBuffer&&(D=new Uint8Array(D)),String.fromCharCode.apply(String,D)}function g(D){var H={name:(D.name||D||"").toUpperCase().replace("V","v")};switch(H.name){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;case"AES-CBC":case"AES-GCM":case"AES-KW":D.length&&(H.length=D.length);break;case"HMAC":D.hash&&(H.hash=g(D.hash)),D.length&&(H.length=D.length);break;case"RSAES-PKCS1-v1_5":D.publicExponent&&(H.publicExponent=new Uint8Array(D.publicExponent)),D.modulusLength&&(H.modulusLength=D.modulusLength);break;case"RSASSA-PKCS1-v1_5":case"RSA-OAEP":D.hash&&(H.hash=g(D.hash)),D.publicExponent&&(H.publicExponent=new Uint8Array(D.publicExponent)),D.modulusLength&&(H.modulusLength=D.modulusLength);break;default:throw new SyntaxError("Bad algorithm name")}return H}function v(D){return{HMAC:{"SHA-1":"HS1","SHA-256":"HS256","SHA-384":"HS384","SHA-512":"HS512"},"RSASSA-PKCS1-v1_5":{"SHA-1":"RS1","SHA-256":"RS256","SHA-384":"RS384","SHA-512":"RS512"},"RSAES-PKCS1-v1_5":{"":"RSA1_5"},"RSA-OAEP":{"SHA-1":"RSA-OAEP","SHA-256":"RSA-OAEP-256"},"AES-KW":{128:"A128KW",192:"A192KW",256:"A256KW"},"AES-GCM":{128:"A128GCM",192:"A192GCM",256:"A256GCM"},"AES-CBC":{128:"A128CBC",192:"A192CBC",256:"A256CBC"}}[D.name][(D.hash||{}).name||D.length||""]}function y(D){(D instanceof ArrayBuffer||D instanceof Uint8Array)&&(D=JSON.parse(decodeURIComponent(escape(h(D)))));var H={kty:D.kty,alg:D.alg,ext:D.ext||D.extractable};switch(H.kty){case"oct":H.k=D.k;case"RSA":["n","e","d","p","q","dp","dq","qi","oth"].forEach((function(q){q in D&&(H[q]=D[q])}));break;default:throw new TypeError("Unsupported key type")}return H}function b(D){var H=y(D);return W&&(H.extractable=H.ext,delete H.ext),p(unescape(encodeURIComponent(JSON.stringify(H)))).buffer}function m(D){var H=k(D),q=!1;H.length>2&&(q=!0,H.shift());var z={ext:!0};switch(H[0][0]){case"1.2.840.113549.1.1.1":var Y=["n","e","d","p","q","dp","dq","qi"],V=k(H[1]);q&&V.shift();for(var W=0;W<V.length;W++)V[W][0]||(V[W]=V[W].subarray(1)),z[Y[W]]=f(h(V[W]));z.kty="RSA";break;default:throw new TypeError("Unsupported key type")}return z}function _(D){var H,q=[["",null]],z=!1;switch(D.kty){case"RSA":for(var Y=["n","e","d","p","q","dp","dq","qi"],V=[],W=0;W<Y.length&&Y[W]in D;W++){var J=V[W]=p(d(D[Y[W]]));128&J[0]&&(V[W]=new Uint8Array(J.length+1),V[W].set(J,1))}V.length>2&&(z=!0,V.unshift(new Uint8Array([0]))),q[0][0]="1.2.840.113549.1.1.1",H=V;break;default:throw new TypeError("Unsupported key type")}return q.push(new Uint8Array(P(H)).buffer),z?q.unshift(new Uint8Array([0])):q[1]={tag:3,value:q[1]},new Uint8Array(P(q)).buffer}function k(D,H){if(D instanceof ArrayBuffer&&(D=new Uint8Array(D)),H||(H={pos:0,end:D.length}),H.end-H.pos<2||H.end>D.length)throw new RangeError("Malformed DER");var q,z=D[H.pos++],Y=D[H.pos++];if(Y>=128){if(Y&=127,H.end-H.pos<Y)throw new RangeError("Malformed DER");for(var V=0;Y--;)V<<=8,V|=D[H.pos++];Y=V}if(H.end-H.pos<Y)throw new RangeError("Malformed DER");switch(z){case 2:q=D.subarray(H.pos,H.pos+=Y);break;case 3:if(D[H.pos++])throw new Error("Unsupported bit string");Y--;case 4:q=new Uint8Array(D.subarray(H.pos,H.pos+=Y)).buffer;break;case 5:q=null;break;case 6:var W=btoa(h(D.subarray(H.pos,H.pos+=Y)));if(!(W in X))throw new Error("Unsupported OBJECT ID "+W);q=X[W];break;case 48:q=[];for(var J=H.pos+Y;H.pos<J;)q.push(k(D,H));break;default:throw new Error("Unsupported DER tag 0x"+z.toString(16))}return q}function P(D,H){H||(H=[]);var q=0,z=0,Y=H.length+2;if(H.push(0,0),D instanceof Uint8Array){q=2,z=D.length;for(var V=0;V<z;V++)H.push(D[V])}else if(D instanceof ArrayBuffer){q=4,z=D.byteLength,D=new Uint8Array(D);for(V=0;V<z;V++)H.push(D[V])}else if(null===D)q=5,z=0;else if("string"==typeof D&&D in $){var W=p(atob($[D]));q=6,z=W.length;for(V=0;V<z;V++)H.push(W[V])}else if(D instanceof Array){for(V=0;V<D.length;V++)P(D[V],H);q=48,z=H.length-Y}else{if(!("object"==typeof D&&3===D.tag&&D.value instanceof ArrayBuffer))throw new Error("Unsupported DER value "+D);q=3,z=(D=new Uint8Array(D.value)).byteLength,H.push(0);for(V=0;V<z;V++)H.push(D[V]);z++}if(z>=128){var J=z;z=4;for(H.splice(Y,0,J>>24&255,J>>16&255,J>>8&255,255&J);z>1&&!(J>>24);)J<<=8,z--;z<4&&H.splice(Y,4-z),z|=128}return H.splice(Y-2,2,q,z),H}function w(D,H,q,z){Object.defineProperties(this,{_key:{value:D},type:{value:D.type,enumerable:!0},extractable:{value:void 0===q?D.extractable:q,enumerable:!0},algorithm:{value:void 0===H?D.algorithm:H,enumerable:!0},usages:{value:void 0===z?D.usages:z,enumerable:!0}})}function O(D){return"verify"===D||"encrypt"===D||"wrapKey"===D}function T(D){return"sign"===D||"decrypt"===D||"unwrapKey"===D}}));V.default=window.crypto}])}))}}]);