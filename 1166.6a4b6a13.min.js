"use strict";(this["webpackChunkapplication"]=this["webpackChunkapplication"]||[]).push([[1166],{841166:(e,n,t)=>{t.r(n);t.d(n,{DynamicConferenceModule:()=>J});var r=t(667489);var i=t(862926);var o=t(960782);var c=t(827027);var a="[DYNAMIC_CONFERENCE_MODULE][CORE]";var u=i.ModuleLogger.getLogger(a,(function(){var e=[];for(var n=0;n<arguments.length;n++){e[n]=arguments[n]}return e}),c.PHONE_EVENT_DATA_FEATURE_KEY);var l=t(298784);var s=t.n(l);var f=t(295454);var d=t(587040);var p=t(470033);var y=t(360758);var C=t(801348);var h=t(302186);var v=t(476173);var m=t(379269);var g=t(642107);var _=t(274251);var b=t(74387);var D=t(903050);var I=undefined&&undefined.__assign||function(){I=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++){n=arguments[t];for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i))e[i]=n[i]}return e};return I.apply(this,arguments)};var P=undefined&&undefined.__decorate||function(e,n,t,r){var i=arguments.length,o=i<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,t):r,c;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,n,t,r);else for(var a=e.length-1;a>=0;a--)if(c=e[a])o=(i<3?c(o):i>3?c(n,t,o):c(n,t))||o;return i>3&&o&&Object.defineProperty(n,t,o),o};var E=undefined&&undefined.__metadata||function(e,n){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,n)};var A=undefined&&undefined.__awaiter||function(e,n,t,r){function adopt(e){return e instanceof t?e:new t((function(n){n(e)}))}return new(t||(t=Promise))((function(t,i){function fulfilled(e){try{step(r.next(e))}catch(e){i(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){i(e)}}function step(e){e.done?t(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,n||[])).next())}))};var M=undefined&&undefined.__generator||function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(c[Symbol.iterator]=function(){return this}),c;function verb(e){return function(n){return step([e,n])}}function step(c){if(r)throw new TypeError("Generator is already executing.");while(t)try{if(r=1,i&&(o=c[0]&2?i["return"]:c[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;if(i=0,o)c=[c[0]&2,o.value];switch(c[0]){case 0:case 1:o=c;break;case 4:t.label++;return{value:c[1],done:false};case 5:t.label++;i=c[1];c=[0];continue;case 7:c=t.ops.pop();t.trys.pop();continue;default:if(!(o=t.trys,o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){t.label=c[1];break}if(c[0]===6&&t.label<o[1]){t.label=o[1];o=c;break}if(o&&t.label<o[2]){t.label=o[2];t.ops.push(c);break}if(o[2])t.ops.pop();t.trys.pop();continue}c=n.call(e,t)}catch(e){c=[6,e];i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:true}}};var T=60*1e3;var N="*";var S=function(){function DynamicConferenceActionController(e){var n=this;this._conferenceConfig=e;this._conferenceEntity={id:this._conferenceConfig.conferenceId,participantIds:[]};this._hasStart=false;this._isAbandon=false;this._conferenceInitDataBarrier=new i.Barrier;this._notFinishDialFailRegisterFunc=new Map;this._notFinishDialSuccessRegisterFunc=new Map;this._handleConferenceFailCalling=function(e){n._logger.info("add people to conference feedback fail",(0,i.sensitive)(e,["callerId","number"]));r.notificationCenter.emit(y.FY.ENTITY.MULTI_PARTY_CONF_CALL_STATE,i.RESPONSE_STATUS_CODE.NETWORK_ERROR,y.VM.ADD_PEOPLE_TO_CONFERENCE_MISSING_CALL_ERROR);e===null||e===void 0?void 0:e.forEach((function(e){var t=n._notFinishDialFailRegisterFunc.get(e.number);if(t){t();n._notFinishDialFailRegisterFunc.delete(e.number)}}))};this._handleConferenceSuccessCalling=function(e){n._logger.info("add people to conference feedback success",(0,i.sensitive)(e,["callerId","number"]));e===null||e===void 0?void 0:e.forEach((function(e){var t=n._notFinishDialSuccessRegisterFunc.get(e.number);if(t){t();n._notFinishDialSuccessRegisterFunc.delete(e.number)}}))};this._handleMeetingUpdate=function(e){return A(n,void 0,void 0,(function(){var n;return M(this,(function(t){switch(t.label){case 0:n=Array.from(e.body.entities.values())[0];if(!n)return[3,3];if(!n.deleted)return[3,2];this._logger.warn("meeting is deleted, should try reconnect",n.id,n.deleteReason);return[4,this._onConferenceTracingBroken()];case 1:t.sent();return[3,3];case 2:this._assembleAndUpdateDynamicConfEntity();t.label=3;case 3:return[2]}}))}))};this._handleParticipantUpdate=function(e){var t=Array.from(e.body.entities.values());var i=t.map((function(e){return n._transferToConfParticipant(e)}));r.notificationCenter.emitEntityUpdate(b.kT.ENTITY.DYNAMIC_CONFERENCE_PARTICIPANT,i)};this._assembleAndUpdateDynamicConfEntity=s().debounce((function(){var e,t,i;try{if(!n._meetingIdentifier){return}var o=(t=(e=n._meetingInfoCacheController)===null||e===void 0?void 0:e.getEntitiesSync())===null||t===void 0?void 0:t[0];if(o){var c=(i=n._meetingParticipantCacheController)===null||i===void 0?void 0:i.batchGetSync(o.participantIDs);var a=(c===null||c===void 0?void 0:c.reduce((function(e,t){if(n._isAllowedAndValidSession(t.sessionIDs||[])){e.push(n._transferToConfParticipant(t))}return e}),[]))||[];var u=n._sortParticipantList(a);var l=u.map((function(e){return e.id}));if(!s().isEqual(n._conferenceEntity.participantIds,l)){n._conferenceEntity={id:n._conferenceConfig.conferenceId,participantIds:u.map((function(e){return e.id}))};r.notificationCenter.emitEntityUpdate(b.kT.ENTITY.DYNAMIC_CONFERENCE,[n._conferenceEntity]);r.notificationCenter.emit(D.i.buildParticipantListNotifyKey(n._conferenceConfig.conferenceId),l);n._logger.debug("update conference",n._conferenceEntity)}}}catch(e){n._logger.warn("failed to assemble data",e)}}),f.lo.ONE_SECOND);this._logger.log("action controller created",this._conferenceConfig)}DynamicConferenceActionController.prototype.getDynamicConferenceEntity=function(){return this._conferenceEntity};DynamicConferenceActionController.prototype.getParticipantIds=function(){return this._conferenceEntity.participantIds};DynamicConferenceActionController.prototype.batchGetConferenceParticipants=function(e){var n=this;return e.map((function(e){return n.getParticipantById(e)})).filter((function(e){return e}))};DynamicConferenceActionController.prototype.getParticipantById=function(e){var n;var t=D.i.extractRawParticipantId(e);var r=(n=this._meetingParticipantCacheController)===null||n===void 0?void 0:n.getSynchronously(t);return r&&this._transferToConfParticipant(r)||undefined};DynamicConferenceActionController.prototype.startTraceDynamicConference=function(){return A(this,void 0,Promise,(function(){var e,n,t;return M(this,(function(r){switch(r.label){case 0:if(this._hasStart||this._isAbandon){return[2,Promise.resolve()]}r.label=1;case 1:r.trys.push([1,7,,8]);this._hasStart=true;return[4,this._initAccountNumberInfo()];case 2:r.sent();return[4,this._getDefaultConferenceNumber()];case 3:e=r.sent();if(!e){throw Error("can not fetch conference number")}n=this;return[4,this._rcveService.createActiveMeeting({withLocalData:false,media:false,chat:false,dial:false,timeoutRejoin:true})];case 4:n._meetingIdentifier=r.sent().identifier;this._logger.log("local meeting created",this._isAbandon);if(this._isAbandon){return[2]}return[4,this._rcveService.connectToMeeting(this._meetingIdentifier,{phoneNumber:e,code:this._conferenceConfig.hostCode,userAgent:this._buildUserAgent(),type:v.MeetingType.JOIN,isEnableHD:false,joinAudio:false})];case 5:r.sent();this._logger.log("meeting connected",this._isAbandon);if(this._isAbandon){return[2]}return[4,this._doModeratorPatch()];case 6:r.sent();if(this._isAbandon){return[2]}this._assembleAndUpdateDynamicConfEntity();this._onConferenceTracingConnected();return[3,8];case 7:t=r.sent();this._logger.warn("startTraceDynamicConference with error",t);this._onConferenceTracingBroken();return[3,8];case 8:return[2]}}))}))};DynamicConferenceActionController.prototype.stopTraceDynamicConference=function(){return A(this,void 0,void 0,(function(){return M(this,(function(e){switch(e.label){case 0:this._logger.info("stopTraceDynamicConference",this._meetingIdentifier);this._isAbandon=true;return[4,this._stopTraceInternal()];case 1:e.sent();return[2]}}))}))};DynamicConferenceActionController.prototype._stopTraceInternal=function(){return A(this,void 0,void 0,(function(){var e;return M(this,(function(n){switch(n.label){case 0:this._stopListenMeetingChange();n.label=1;case 1:n.trys.push([1,4,,5]);if(!this._meetingIdentifier)return[3,3];return[4,this.leaveDynamicConference()];case 2:n.sent();n.label=3;case 3:return[3,5];case 4:e=n.sent();this._logger.warn("stopTraceDynamicConference failed with",e);return[3,5];case 5:return[2]}}))}))};DynamicConferenceActionController.prototype.endDynamicConference=function(){return A(this,void 0,Promise,(function(){var e,n;var t=this;return M(this,(function(r){switch(r.label){case 0:return[4,this._ensureConferenceDataReady()];case 1:r.sent();if(!this._meetingIdentifier)return[3,3];e=this._getOnlyHostParticipantId()||this._getMatchCurrentExtParticipantId();n=this._conferenceEntity.participantIds.filter((function(n){return n!==e}));this._logger.info("endDynamicConference, remove participant one by one",{needRemoveParticipants:n,currentUserParticipantId:e});return[4,(0,i.runInBand)(n.map((function(e){return function(){return A(t,void 0,void 0,(function(){return M(this,(function(n){switch(n.label){case 0:return[4,this._rcveService.hangUp(this._meetingIdentifier,this._transferToRemoteId(e))];case 1:n.sent();return[2]}}))}))}})))];case 2:r.sent();r.label=3;case 3:return[2]}}))}))};DynamicConferenceActionController.prototype.leaveDynamicConference=function(){return A(this,void 0,Promise,(function(){var e;return M(this,(function(n){switch(n.label){case 0:e=this._meetingIdentifier;if(!e)return[3,2];return[4,this._rcveService.leaveMeeting(this._meetingIdentifier)];case 1:e=n.sent();n.label=2;case 2:e;return[2]}}))}))};DynamicConferenceActionController.prototype.hangUpParticipant=function(e){return A(this,void 0,Promise,(function(){return M(this,(function(n){switch(n.label){case 0:return[4,this._ensureConferenceDataReady()];case 1:n.sent();if(!this._meetingIdentifier)return[3,3];return[4,this._rcveService.hangUp(this._meetingIdentifier,this._transferToRemoteId(e))];case 2:n.sent();n.label=3;case 3:return[2]}}))}))};DynamicConferenceActionController.prototype.muteParticipant=function(e){return A(this,void 0,Promise,(function(){return M(this,(function(n){switch(n.label){case 0:return[4,this._ensureConferenceDataReady()];case 1:n.sent();if(!this._meetingIdentifier)return[3,3];return[4,this._rcveService.muteParticipant(this._meetingIdentifier,this._transferToRemoteId(e))];case 2:n.sent();n.label=3;case 3:return[2]}}))}))};DynamicConferenceActionController.prototype.unmuteParticipant=function(e){return A(this,void 0,Promise,(function(){return M(this,(function(n){switch(n.label){case 0:return[4,this._ensureConferenceDataReady()];case 1:n.sent();return[4,this._rcveService.unmuteParticipantAudio(this._meetingIdentifier,this._transferToRemoteId(e))];case 2:n.sent();return[2]}}))}))};DynamicConferenceActionController.prototype.addParticipantByPhone=function(e){return A(this,void 0,Promise,(function(){var n,t,r,o,c;return M(this,(function(a){switch(a.label){case 0:return[4,this._ensureConferenceDataReady()];case 1:a.sent();return[4,this._phoneParserModule.getPhoneParser(e)];case 2:n=a.sent();t=n?n.getE164():e;r=this._rcveService.registerEventListener(this._meetingIdentifier,v.FY.EVENT.DIAL_FAIL,this._handleConferenceFailCalling);this._notFinishDialFailRegisterFunc.set(t,r);o=this._rcveService.registerEventListener(this._meetingIdentifier,v.FY.EVENT.DIAL_SUCCESS,this._handleConferenceSuccessCalling);this._notFinishDialSuccessRegisterFunc.set(t,o);a.label=3;case 3:a.trys.push([3,5,,6]);return[4,this._rcveService.getCallController(this._meetingIdentifier).callOut("",t)];case 4:a.sent();return[3,6];case 5:c=a.sent();this._logger.warn("callout error",c);if(c instanceof v.MeetingNotExistError){this._logger.warn("add people to conference failed");throw new i.JError(v.RCVE_ERROR_TYPE,y.HI.MEETING_NOT_EXISTS,y.HI.MEETING_NOT_EXISTS)}else{throw c}return[3,6];case 6:return[2]}}))}))};DynamicConferenceActionController.prototype.isDynamicConferenceAlive=function(){return!!this._meetingDataProvider};Object.defineProperty(DynamicConferenceActionController.prototype,"_phoneParserModule",{get:function(){return(0,r.getModule)(g.PHONE_PARSER_MODULE)},enumerable:true,configurable:true});DynamicConferenceActionController.prototype._onConferenceTracingBroken=function(){return A(this,void 0,void 0,(function(){return M(this,(function(e){switch(e.label){case 0:return[4,this._stopTraceInternal()];case 1:e.sent();this._conferenceEntity.participantIds=[];r.notificationCenter.emitEntityUpdate(b.kT.ENTITY.DYNAMIC_CONFERENCE,[this._conferenceEntity]);this._hasStart=false;return[2]}}))}))};DynamicConferenceActionController.prototype._onConferenceTracingConnected=function(){this._startListenMeetingChange();this._conferenceInitDataBarrier.open()};DynamicConferenceActionController.prototype._startListenMeetingChange=function(){this._logger.log("_startListenMeetingChange");r.notificationCenter.onEntityUpdate(v.FY.ENTITY.MEETING_INFO+"."+this._meetingIdentifier,this._handleMeetingUpdate);r.notificationCenter.onEntityUpdate(v.FY.ENTITY.PARTICIPANT_INFO+"."+this._meetingIdentifier,this._handleParticipantUpdate)};DynamicConferenceActionController.prototype._stopListenMeetingChange=function(){this._logger.log("_stopListenMeetingChange");r.notificationCenter.removeListener(v.FY.ENTITY.MEETING_INFO+"."+this._meetingIdentifier,this._handleMeetingUpdate);r.notificationCenter.removeListener(v.FY.ENTITY.PARTICIPANT_INFO+"."+this._meetingIdentifier,this._handleParticipantUpdate)};DynamicConferenceActionController.prototype._sortParticipantList=function(e){return e.sort((function(e,n){var t=e.host||e.moderator;var i=n.host||n.moderator;return t!==i?t?-1:1:r.SortUtils.compareString(e.displayName,n.displayName)}))};DynamicConferenceActionController.prototype._getDefaultConferenceNumber=function(){return A(this,void 0,void 0,(function(){var e;return M(this,(function(n){switch(n.label){case 0:return[4,this._rcInfoModule.getRCConferenceRemoteAndLocal()];case 1:e=n.sent();return[2,s().replace((e===null||e===void 0?void 0:e.phoneNumber)||"","+","")]}}))}))};DynamicConferenceActionController.prototype._buildUserAgent=function(){var e=h.Pal.instance.getPlatformUtils().isElectron()?v.yZ.electron:v.yZ.web;return e+"("+b.i2+")"};DynamicConferenceActionController.prototype._ensureConferenceDataReady=function(){return A(this,void 0,void 0,(function(){var e,n;var t=this;return M(this,(function(r){switch(r.label){case 0:n=new Promise((function(n){e=setTimeout((function(){n(new i.JNetworkError(i.ERROR_CODES_NETWORK.NETWORK_ERROR,"retrieve meeting data timeout "))}),T)}));return[4,Promise.race([function(){return A(t,void 0,void 0,(function(){return M(this,(function(n){switch(n.label){case 0:return[4,this._conferenceInitDataBarrier.wait()];case 1:n.sent();clearTimeout(e);return[2]}}))}))},n])];case 1:r.sent();return[4,this._doModeratorPatchIfNeeded()];case 2:r.sent();return[2]}}))}))};DynamicConferenceActionController.prototype._isAllowedAndValidSession=function(e){var n;var t=(n=this._meetingSessionCacheController)===null||n===void 0?void 0:n.batchGetSync(e);return!(t===null||t===void 0?void 0:t.some((function(e){var n;return(n=e===null||e===void 0?void 0:e.userAgent)===null||n===void 0?void 0:n.includes(b.i2)})))&&(t===null||t===void 0?void 0:t.some((function(e){return!e.deleted})))};DynamicConferenceActionController.prototype._transferToConfParticipant=function(e){var n;var t=this._extractRealPhoneNumber((n=e.callerInfo)===null||n===void 0?void 0:n.callerId);var r=e.displayName||"";if(_.zQ.isE164PhoneNumber(r)&&t&&!_.zQ.isE164PhoneNumber(t)){t=e.displayName;r=""}return{id:this._conferenceConfig.conferenceId+"."+e.id,host:e.host,displayName:r,avatarUrl:e.avatarUrl,remoteId:e.id,moderator:!!e.moderator,serverMute:!!e.serverMute,allowUnmute:!!e.allowUnmute,justCreated:!!e.justCreated,callerInfo:e.callerInfo?I(I({},e.callerInfo),{callerId:t}):undefined}};DynamicConferenceActionController.prototype._transferToRemoteId=function(e){var n=this.getParticipantById(e);return n===null||n===void 0?void 0:n.remoteId};DynamicConferenceActionController.prototype._doModeratorPatchIfNeeded=function(){var e;return A(this,void 0,void 0,(function(){var n;return M(this,(function(t){switch(t.label){case 0:n=(e=this._getAllRawMeetingParticipants())===null||e===void 0?void 0:e.find((function(e){return(e===null||e===void 0?void 0:e.isSelf)&&!(e.moderator||e.host)}));if(!n)return[3,2];return[4,this._rcveService.assignModerator(this._meetingIdentifier,n.id,true,this._conferenceConfig.hostCode)];case 1:t.sent();this._logger.info("assign moderator needed",n);t.label=2;case 2:return[2]}}))}))};DynamicConferenceActionController.prototype._doModeratorPatch=function(){var e;return A(this,void 0,void 0,(function(){var n,t;return M(this,(function(r){switch(r.label){case 0:return[4,this._isMyConference()];case 1:if(r.sent()){this._logger.info("skip moderator patch for user self");return[2]}t=(e=this._getAllRawMeetingParticipants())===null||e===void 0?void 0:e.filter((function(e){return e===null||e===void 0?void 0:e.justCreated}));if(t===null||t===void 0?void 0:t.length){n=t[0]}else{this._logger.info("can not find just created participant");n=this._findSelfParticipantByUserAgent()}if(!n)return[3,3];return[4,this._rcveService.assignModerator(this._meetingIdentifier,n.id,true,this._conferenceConfig.hostCode)];case 2:r.sent();this._logger.info("assign moderator",n);r.label=3;case 3:return[2]}}))}))};DynamicConferenceActionController.prototype._findSelfParticipantByUserAgent=function(){var e=this;var n;var t=this._buildUserAgent();return(n=this._getAllRawMeetingParticipants())===null||n===void 0?void 0:n.find((function(n){var r,i;if(!n.sessionIDs){return false}var o=(r=e._meetingSessionCacheController)===null||r===void 0?void 0:r.batchGetSync(n.sessionIDs);var c=o.some((function(e){return!e.deleted&&e.userAgent===t}));if(c&&((i=n.callerInfo)===null||i===void 0?void 0:i.extensionId)===e._currentExtensionId){return true}return false}))};DynamicConferenceActionController.prototype._getAllRawMeetingParticipants=function(){var e,n,t;var r=(n=(e=this._meetingInfoCacheController)===null||e===void 0?void 0:e.getEntitiesSync())===null||n===void 0?void 0:n[0];return(t=this._meetingParticipantCacheController)===null||t===void 0?void 0:t.batchGetSync(r.participantIDs)};DynamicConferenceActionController.prototype._isMyConference=function(){return A(this,void 0,void 0,(function(){var e;return M(this,(function(n){switch(n.label){case 0:return[4,this._rcInfoModule.getRCConferenceRemoteAndLocal()];case 1:e=n.sent();return[2,(e===null||e===void 0?void 0:e.hostCode)===this._conferenceConfig.hostCode]}}))}))};DynamicConferenceActionController.prototype._getMatchCurrentExtParticipantId=function(){var e=this;var n=this._getAllParticipantEntity();var t=n.reduce((function(n,t){var r;if(((r=t.callerInfo)===null||r===void 0?void 0:r.extensionId)===e._currentExtensionId){n.push(t)}return n}),[]);return t.length===1?t[0].id:undefined};DynamicConferenceActionController.prototype._getOnlyHostParticipantId=function(){var e=this;var n=this._getAllParticipantEntity();var t=n.reduce((function(e,n){if(n.host||n.moderator){e.push(n)}return e}),[]);if(t.length===1){return t[0].id}var r=t.filter((function(n){var t;return((t=n.callerInfo)===null||t===void 0?void 0:t.callerId)===e._extensionNumber}));return r.length===1?r[0].id:undefined};DynamicConferenceActionController.prototype._getAllParticipantEntity=function(){return this.batchGetConferenceParticipants(this.getParticipantIds())};DynamicConferenceActionController.prototype._extractRealPhoneNumber=function(e){if(e){var n=e.includes(N)&&e.startsWith(this._accountMainNumber);return n?s().last(e.split(N)):e}return undefined};DynamicConferenceActionController.prototype._initAccountNumberInfo=function(){var e,n,t,r;return A(this,void 0,void 0,(function(){var i,o;return M(this,(function(c){switch(c.label){case 0:i=this;return[4,(e=this._rcInfoModule.DBConfig)===null||e===void 0?void 0:e.getAccountInfo()];case 1:i._accountMainNumber=((n=c.sent())===null||n===void 0?void 0:n.mainNumber)||"";o=this;return[4,(t=this._rcInfoModule.DBConfig)===null||t===void 0?void 0:t.getExtensionInfo()];case 2:o._extensionNumber=((r=c.sent())===null||r===void 0?void 0:r.extensionNumber)||"";return[2]}}))}))};Object.defineProperty(DynamicConferenceActionController.prototype,"_currentExtensionId",{get:function(){var e;return(e=(0,d.gT)())===null||e===void 0?void 0:e.userConfig.getExtensionId().toString()},enumerable:true,configurable:true});Object.defineProperty(DynamicConferenceActionController.prototype,"_rcInfoModule",{get:function(){return(0,r.getModule)(m.oF)},enumerable:true,configurable:true});Object.defineProperty(DynamicConferenceActionController.prototype,"_rcveService",{get:function(){var e;return(e=(0,r.getModule)(v.el))===null||e===void 0?void 0:e.getMeetingService()},enumerable:true,configurable:true});Object.defineProperty(DynamicConferenceActionController.prototype,"_meetingDataProvider",{get:function(){try{return this._meetingIdentifier&&this._rcveService.getMeetingDataProvider(this._meetingIdentifier)||undefined}catch(e){return undefined}},enumerable:true,configurable:true});Object.defineProperty(DynamicConferenceActionController.prototype,"_meetingInfoCacheController",{get:function(){var e;return(e=this._meetingDataProvider)===null||e===void 0?void 0:e.getEntityControllerByEntityKey(v.FY.ENTITY.MEETING_INFO)},enumerable:true,configurable:true});Object.defineProperty(DynamicConferenceActionController.prototype,"_meetingParticipantCacheController",{get:function(){var e;return(e=this._meetingDataProvider)===null||e===void 0?void 0:e.getEntityControllerByEntityKey(v.FY.ENTITY.PARTICIPANT_INFO)},enumerable:true,configurable:true});Object.defineProperty(DynamicConferenceActionController.prototype,"_meetingSessionCacheController",{get:function(){var e;return(e=this._meetingDataProvider)===null||e===void 0?void 0:e.getEntityControllerByEntityKey(v.FY.ENTITY.SESSION_INFO)},enumerable:true,configurable:true});Object.defineProperty(DynamicConferenceActionController.prototype,"_logger",{get:function(){return u.tags("[DynamicConferenceActionController]",this._conferenceConfig.conferenceId)},enumerable:true,configurable:true});var e;P([i.SingleRequest,E("design:type",Function),E("design:paramtypes",[]),E("design:returntype",typeof(e=typeof Promise!=="undefined"&&Promise)==="function"?e:Object)],DynamicConferenceActionController.prototype,"startTraceDynamicConference",null);P([i.SingleRequest,E("design:type",Function),E("design:paramtypes",[]),E("design:returntype",Promise)],DynamicConferenceActionController.prototype,"_stopTraceInternal",null);P([i.SingleRequest,E("design:type",Function),E("design:paramtypes",[]),E("design:returntype",Promise)],DynamicConferenceActionController.prototype,"_onConferenceTracingBroken",null);return DynamicConferenceActionController}();var w=undefined&&undefined.__awaiter||function(e,n,t,r){function adopt(e){return e instanceof t?e:new t((function(n){n(e)}))}return new(t||(t=Promise))((function(t,i){function fulfilled(e){try{step(r.next(e))}catch(e){i(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){i(e)}}function step(e){e.done?t(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,n||[])).next())}))};var O=undefined&&undefined.__generator||function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(c[Symbol.iterator]=function(){return this}),c;function verb(e){return function(n){return step([e,n])}}function step(c){if(r)throw new TypeError("Generator is already executing.");while(t)try{if(r=1,i&&(o=c[0]&2?i["return"]:c[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;if(i=0,o)c=[c[0]&2,o.value];switch(c[0]){case 0:case 1:o=c;break;case 4:t.label++;return{value:c[1],done:false};case 5:t.label++;i=c[1];c=[0];continue;case 7:c=t.ops.pop();t.trys.pop();continue;default:if(!(o=t.trys,o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){t.label=c[1];break}if(c[0]===6&&t.label<o[1]){t.label=o[1];o=c;break}if(o&&t.label<o[2]){t.label=o[2];t.ops.push(c);break}if(o[2])t.ops.pop();t.trys.pop();continue}c=n.call(e,t)}catch(e){c=[6,e];i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:true}}};var R=u.tags("DynamicConfManagementController");var F=function(){function DynamicConfManagementController(){var e=this;this._dynamicConferenceControllerCache=new Map;this._conferenceToConferenceConfig=new Map;this._toRemoveConferenceIds=new Set;this._debounceStoppingTraceConference=s().debounce((function(){e._toRemoveConferenceIds.forEach((function(n){e._stopTraceInternal(n)}));e._toRemoveConferenceIds.clear()}),f.lo.THIRTY_SECONDS);this._handleOnLine=function(n){R.info("online state change",n);if(n.onLine){e._checkAndStartDynamicConferenceIfNeed()}};this._checkAndStartDynamicConferenceIfNeed=function(){e._dynamicConferenceControllerCache.forEach((function(n,t){if(!e._toRemoveConferenceIds.has(t)&&!n.isDynamicConferenceAlive()){R.info("try start",t);n.startTraceDynamicConference()}}))}}DynamicConfManagementController.prototype.start=function(){r.notificationCenter.on(r.WINDOW_EVENT.ONLINE,this._handleOnLine);r.notificationCenter.on(r.WINDOW_EVENT.FOCUS,this._checkAndStartDynamicConferenceIfNeed)};DynamicConfManagementController.prototype.stop=function(){r.notificationCenter.off(r.WINDOW_EVENT.ONLINE,this._handleOnLine);r.notificationCenter.off(r.WINDOW_EVENT.FOCUS,this._checkAndStartDynamicConferenceIfNeed)};DynamicConfManagementController.prototype.startTraceDynamicConference=function(e){var n;return w(this,void 0,Promise,(function(){return O(this,(function(t){switch(t.label){case 0:this._toRemoveConferenceIds.delete(e);return[4,(n=this.getConferenceActionController(e,true))===null||n===void 0?void 0:n.startTraceDynamicConference()];case 1:t.sent();return[2]}}))}))};DynamicConfManagementController.prototype.getParticipantById=function(e){var n;var t=D.i.extractConferenceId(e);return((n=this.getConferenceActionController(t))===null||n===void 0?void 0:n.getParticipantById(e))||null};DynamicConfManagementController.prototype.stopTraceDynamicConference=function(e){var n=this._dynamicConferenceControllerCache.get(e);if(!(n===null||n===void 0?void 0:n.isDynamicConferenceAlive())){this._stopTraceInternal(e)}else{this._toRemoveConferenceIds.add(e);this._debounceStoppingTraceConference()}};DynamicConfManagementController.prototype.getConferenceActionController=function(e,n){if(n===void 0){n=false}var t;var r=this._dynamicConferenceControllerCache.get(e);if(!r&&n){var i=(t=this._conferenceToConferenceConfig.get(e))===null||t===void 0?void 0:t.hostCode;if(i){r=new S({conferenceId:e,hostCode:i});this._dynamicConferenceControllerCache.set(e,r)}else{R.error("invalid conference id",e)}}return r};DynamicConfManagementController.prototype.getConferenceIdByHostCode=function(e){if(!this._canUseDynamicConference){R.info("can not use dynamic conference");return""}var n=D.i.buildConferenceIdByHostCode(e);var t=this._conferenceToConferenceConfig.get(n);if(!t){this._conferenceToConferenceConfig.set(n,{hostCode:e})}return n};DynamicConfManagementController.prototype._stopTraceInternal=function(e){var n;(n=this.getConferenceActionController(e))===null||n===void 0?void 0:n.stopTraceDynamicConference();this._dynamicConferenceControllerCache.delete(e)};Object.defineProperty(DynamicConfManagementController.prototype,"_canUseDynamicConference",{get:function(){var e,n;return(n=(e=(0,d.gT)())===null||e===void 0?void 0:e.context)===null||n===void 0?void 0:n.entitlement.get(p.H3.RCExtensionFeaturesId.DynamicConferencing)},enumerable:true,configurable:true});DynamicConfManagementController.prototype.getOrCreateRCConferenceForAddPeople=function(e){return w(this,void 0,Promise,(function(){var n,t,r,i,o;return O(this,(function(c){switch(c.label){case 0:if(!e)return[3,3];n=C.CallDataUtils.getInstance().getCallEntity(e);t=!(n===null||n===void 0?void 0:n.conf_info);if(!t)return[3,2];return[4,this._telephonyModule.mergeToRCConferenceCall([e],true)];case 1:t=c.sent();c.label=2;case 2:t;c.label=3;case 3:return[4,this._telephonyModule.getOrCreateRCConferenceForAddPeople()];case 4:r=c.sent();if(!(r===null||r===void 0?void 0:r.hostCode))return[3,7];i=this.getConferenceIdByHostCode(r.hostCode);o=i;if(!o)return[3,6];return[4,this.startTraceDynamicConference(i)];case 5:o=c.sent();c.label=6;case 6:o;return[2,i];case 7:return[2,undefined]}}))}))};Object.defineProperty(DynamicConfManagementController.prototype,"_telephonyModule",{get:function(){return(0,r.getModule)(y.oF)},enumerable:true,configurable:true});return DynamicConfManagementController}();var j=undefined&&undefined.__extends||function(){var extendStatics=function(e,n){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)if(n.hasOwnProperty(t))e[t]=n[t]};return extendStatics(e,n)};return function(e,n){extendStatics(e,n);function __(){this.constructor=e}e.prototype=n===null?Object.create(n):(__.prototype=n.prototype,new __)}}();var U=undefined&&undefined.__awaiter||function(e,n,t,r){function adopt(e){return e instanceof t?e:new t((function(n){n(e)}))}return new(t||(t=Promise))((function(t,i){function fulfilled(e){try{step(r.next(e))}catch(e){i(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){i(e)}}function step(e){e.done?t(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,n||[])).next())}))};var x=undefined&&undefined.__generator||function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(c[Symbol.iterator]=function(){return this}),c;function verb(e){return function(n){return step([e,n])}}function step(c){if(r)throw new TypeError("Generator is already executing.");while(t)try{if(r=1,i&&(o=c[0]&2?i["return"]:c[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;if(i=0,o)c=[c[0]&2,o.value];switch(c[0]){case 0:case 1:o=c;break;case 4:t.label++;return{value:c[1],done:false};case 5:t.label++;i=c[1];c=[0];continue;case 7:c=t.ops.pop();t.trys.pop();continue;default:if(!(o=t.trys,o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){t.label=c[1];break}if(c[0]===6&&t.label<o[1]){t.label=o[1];o=c;break}if(o&&t.label<o[2]){t.label=o[2];t.ops.push(c);break}if(o[2])t.ops.pop();t.trys.pop();continue}c=n.call(e,t)}catch(e){c=[6,e];i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:true}}};var B=function(e){j(DynamicConferenceService,e);function DynamicConferenceService(){return e!==null&&e.apply(this,arguments)||this}DynamicConferenceService.prototype.onStarted=function(){this.dynamicConfManager.start()};DynamicConferenceService.prototype.onStopped=function(){this.dynamicConfManager.stop()};Object.defineProperty(DynamicConferenceService.prototype,"dynamicConfManager",{get:function(){if(!this._dynamicConferenceMangerController){this._dynamicConferenceMangerController=new F}return this._dynamicConferenceMangerController},enumerable:true,configurable:true});DynamicConferenceService.prototype.getActionController=function(e){return this.dynamicConfManager.getConferenceActionController(e)};DynamicConferenceService.prototype.addPeopleToConferenceCall=function(e,n){var t;return U(this,void 0,void 0,(function(){var r,i;return x(this,(function(o){switch(o.label){case 0:return[4,this.dynamicConfManager.getOrCreateRCConferenceForAddPeople(n)];case 1:r=o.sent();i=r;if(!i)return[3,3];return[4,(t=this.getActionController(r))===null||t===void 0?void 0:t.addParticipantByPhone(e)];case 2:i=o.sent();o.label=3;case 3:i;return[2]}}))}))};return DynamicConferenceService}(r.MicroService);var L=undefined&&undefined.__extends||function(){var extendStatics=function(e,n){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)if(n.hasOwnProperty(t))e[t]=n[t]};return extendStatics(e,n)};return function(e,n){extendStatics(e,n);function __(){this.constructor=e}e.prototype=n===null?Object.create(n):(__.prototype=n.prototype,new __)}}();var Y=function(e){L(GetConferenceIdByHostCodeKeyAction,e);function GetConferenceIdByHostCodeKeyAction(n){if(n===void 0){n=r.ActionWeight.NORMAL}return e.call(this,n)||this}Object.defineProperty(GetConferenceIdByHostCodeKeyAction.prototype,"dynamicConfModule",{get:function(){if(!this._dynamicConfModule){this._dynamicConfModule=(0,r.getModule)(b.HB)}return this._dynamicConfModule},enumerable:true,configurable:true});GetConferenceIdByHostCodeKeyAction.prototype.getAction=function(){if(this.dynamicConfModule){return Promise.resolve(this.dynamicConfModule.getConferenceIdByHostCode)}return Promise.resolve(undefined)};return GetConferenceIdByHostCodeKeyAction}(r.AbstractKeyAction);var k=undefined&&undefined.__extends||function(){var extendStatics=function(e,n){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)if(n.hasOwnProperty(t))e[t]=n[t]};return extendStatics(e,n)};return function(e,n){extendStatics(e,n);function __(){this.constructor=e}e.prototype=n===null?Object.create(n):(__.prototype=n.prototype,new __)}}();var G=undefined&&undefined.__decorate||function(e,n,t,r){var i=arguments.length,o=i<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,t):r,c;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,n,t,r);else for(var a=e.length-1;a>=0;a--)if(c=e[a])o=(i<3?c(o):i>3?c(n,t,o):c(n,t))||o;return i>3&&o&&Object.defineProperty(n,t,o),o};var H=undefined&&undefined.__metadata||function(e,n){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,n)};var K=undefined&&undefined.__awaiter||function(e,n,t,r){function adopt(e){return e instanceof t?e:new t((function(n){n(e)}))}return new(t||(t=Promise))((function(t,i){function fulfilled(e){try{step(r.next(e))}catch(e){i(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){i(e)}}function step(e){e.done?t(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,n||[])).next())}))};var W=undefined&&undefined.__generator||function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(c[Symbol.iterator]=function(){return this}),c;function verb(e){return function(n){return step([e,n])}}function step(c){if(r)throw new TypeError("Generator is already executing.");while(t)try{if(r=1,i&&(o=c[0]&2?i["return"]:c[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;if(i=0,o)c=[c[0]&2,o.value];switch(c[0]){case 0:case 1:o=c;break;case 4:t.label++;return{value:c[1],done:false};case 5:t.label++;i=c[1];c=[0];continue;case 7:c=t.ops.pop();t.trys.pop();continue;default:if(!(o=t.trys,o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){t.label=c[1];break}if(c[0]===6&&t.label<o[1]){t.label=o[1];o=c;break}if(o&&t.label<o[2]){t.label=o[2];t.ops.push(c);break}if(o[2])t.ops.pop();t.trys.pop();continue}c=n.call(e,t)}catch(e){c=[6,e];i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:true}}};var V=u.tags("[DynamicConferenceModule]");var q=(0,i.createLogDecorator)(V.tags("[EXECUTE_LOG]"));var J=function(e){k(DynamicConferenceModule,e);function DynamicConferenceModule(n){var t=e.call(this,n)||this;t.getConferenceIdByHostCode=function(e){V.info("getConferenceId by host code",{hostCode:e});return t.dynamicConfService.dynamicConfManager.getConferenceIdByHostCode(e)};V.log("create DynamicConferenceModule");return t}Object.defineProperty(DynamicConferenceModule.prototype,"dynamicConfService",{get:function(){if(!this._service){this._service=new B}return this._service},enumerable:true,configurable:true});DynamicConferenceModule.prototype.onLoad=function(){this.dynamicConfService.start();this._initCommonKeyAction()};DynamicConferenceModule.prototype._initCommonKeyAction=function(){this._commonKeyActionManager.register(o.ACTION_KEY.GET_CONFERENCE_ID_BY_HOST_CODE,new Y)};DynamicConferenceModule.prototype.onUnload=function(){this.dynamicConfService.stop()};DynamicConferenceModule.prototype.getParticipantById=function(e){return this.dynamicConfService.dynamicConfManager.getParticipantById(e)};DynamicConferenceModule.prototype.getSortedParticipantIds=function(e){var n;return(n=this.dynamicConfService.getActionController(e))===null||n===void 0?void 0:n.getParticipantIds()};DynamicConferenceModule.prototype.getDynamicConferenceEntity=function(e){var n;return((n=this.dynamicConfService.getActionController(e))===null||n===void 0?void 0:n.getDynamicConferenceEntity())||null};DynamicConferenceModule.prototype.batchGetConferenceParticipants=function(e,n){var t;return((t=this.dynamicConfService.getActionController(e))===null||t===void 0?void 0:t.batchGetConferenceParticipants(n))||null};DynamicConferenceModule.prototype.startTraceDynamicConference=function(e){return this.dynamicConfService.dynamicConfManager.startTraceDynamicConference(e)};DynamicConferenceModule.prototype.stopTraceDynamicConference=function(e){return this.dynamicConfService.dynamicConfManager.stopTraceDynamicConference(e)};DynamicConferenceModule.prototype.endDynamicConference=function(e){var n;return K(this,void 0,Promise,(function(){return W(this,(function(t){switch(t.label){case 0:return[4,(n=this.dynamicConfService.getActionController(e))===null||n===void 0?void 0:n.endDynamicConference()];case 1:t.sent();return[2]}}))}))};DynamicConferenceModule.prototype.hangUpParticipant=function(e,n){var t;return K(this,void 0,Promise,(function(){return W(this,(function(r){switch(r.label){case 0:return[4,(t=this.dynamicConfService.getActionController(e))===null||t===void 0?void 0:t.hangUpParticipant(n)];case 1:r.sent();return[2]}}))}))};DynamicConferenceModule.prototype.muteParticipant=function(e,n){var t;return K(this,void 0,Promise,(function(){return W(this,(function(r){switch(r.label){case 0:return[4,(t=this.dynamicConfService.getActionController(e))===null||t===void 0?void 0:t.muteParticipant(n)];case 1:r.sent();return[2]}}))}))};DynamicConferenceModule.prototype.unmuteParticipant=function(e,n){var t;return K(this,void 0,Promise,(function(){return W(this,(function(r){switch(r.label){case 0:return[4,(t=this.dynamicConfService.getActionController(e))===null||t===void 0?void 0:t.unmuteParticipant(n)];case 1:r.sent();return[2]}}))}))};DynamicConferenceModule.prototype.addParticipantByPhone=function(e,n){var t;return K(this,void 0,Promise,(function(){return W(this,(function(r){switch(r.label){case 0:return[4,(t=this.dynamicConfService.getActionController(e))===null||t===void 0?void 0:t.addParticipantByPhone(n)];case 1:r.sent();return[2]}}))}))};DynamicConferenceModule.prototype.addPeopleToConferenceCall=function(e,n){return this.dynamicConfService.addPeopleToConferenceCall(e,n)};Object.defineProperty(DynamicConferenceModule.prototype,"_commonKeyActionManager",{get:function(){return(0,r.getModule)(o.COMMON_KEY_ACTION_MODULE).getKeyActionService()},enumerable:true,configurable:true});DynamicConferenceModule.prototype.moduleName=function(){return b.HB};var n,t,i,c,a,u,l,s,f,d,p;G([q({error:true}),H("design:type",Function),H("design:paramtypes",[String]),H("design:returntype",typeof(n=typeof r.Nullable!=="undefined"&&r.Nullable)==="function"?n:Object)],DynamicConferenceModule.prototype,"getParticipantById",null);G([q({error:true}),H("design:type",Function),H("design:paramtypes",[String]),H("design:returntype",typeof(t=typeof r.UndefinedAble!=="undefined"&&r.UndefinedAble)==="function"?t:Object)],DynamicConferenceModule.prototype,"getSortedParticipantIds",null);G([q({error:true}),H("design:type",Function),H("design:paramtypes",[String]),H("design:returntype",typeof(i=typeof r.Nullable!=="undefined"&&r.Nullable)==="function"?i:Object)],DynamicConferenceModule.prototype,"getDynamicConferenceEntity",null);G([q({error:true}),H("design:type",Function),H("design:paramtypes",[String,Array]),H("design:returntype",typeof(c=typeof r.Nullable!=="undefined"&&r.Nullable)==="function"?c:Object)],DynamicConferenceModule.prototype,"batchGetConferenceParticipants",null);G([q({error:true}),H("design:type",Function),H("design:paramtypes",[String]),H("design:returntype",typeof(a=typeof Promise!=="undefined"&&Promise)==="function"?a:Object)],DynamicConferenceModule.prototype,"startTraceDynamicConference",null);G([q({error:true}),H("design:type",Function),H("design:paramtypes",[String]),H("design:returntype",void 0)],DynamicConferenceModule.prototype,"stopTraceDynamicConference",null);G([q({error:true,call:true}),H("design:type",Function),H("design:paramtypes",[String]),H("design:returntype",typeof(u=typeof Promise!=="undefined"&&Promise)==="function"?u:Object)],DynamicConferenceModule.prototype,"endDynamicConference",null);G([q({error:true,call:true}),H("design:type",Function),H("design:paramtypes",[String,String]),H("design:returntype",typeof(l=typeof Promise!=="undefined"&&Promise)==="function"?l:Object)],DynamicConferenceModule.prototype,"hangUpParticipant",null);G([q({error:true,call:true}),H("design:type",Function),H("design:paramtypes",[String,String]),H("design:returntype",typeof(s=typeof Promise!=="undefined"&&Promise)==="function"?s:Object)],DynamicConferenceModule.prototype,"muteParticipant",null);G([q({error:true,call:true}),H("design:type",Function),H("design:paramtypes",[String,String]),H("design:returntype",typeof(f=typeof Promise!=="undefined"&&Promise)==="function"?f:Object)],DynamicConferenceModule.prototype,"unmuteParticipant",null);G([q({error:true,call:true}),H("design:type",Function),H("design:paramtypes",[String,String]),H("design:returntype",typeof(d=typeof Promise!=="undefined"&&Promise)==="function"?d:Object)],DynamicConferenceModule.prototype,"addParticipantByPhone",null);G([q({error:true,call:true}),H("design:type",Function),H("design:paramtypes",[String,Number]),H("design:returntype",typeof(p=typeof Promise!=="undefined"&&Promise)==="function"?p:Object)],DynamicConferenceModule.prototype,"addPeopleToConferenceCall",null);return DynamicConferenceModule}(r.AbstractModule)},903050:(e,n,t)=>{t.d(n,{i:()=>a});var r=t(298784);var i=t.n(r);var o=t(74387);var c=".";var a=function(){function DynamicConferenceUtils(){}DynamicConferenceUtils.buildParticipantListNotifyKey=function(e){return""+o.kT.ENTITY.DYNAMIC_CONFERENCE+c+e};DynamicConferenceUtils.buildConferenceIdByHostCode=function(e){return""+o.x1+c+e};DynamicConferenceUtils.buildParticipantId=function(e,n){return""+e+c+n};DynamicConferenceUtils.extractRawParticipantId=function(e){return i().last(e.split(c))};DynamicConferenceUtils.extractConferenceId=function(e){return e.slice(0,e.lastIndexOf(c))};return DynamicConferenceUtils}()},74387:(e,n,t)=>{t.d(n,{HB:()=>i,kT:()=>o,i2:()=>c,x1:()=>a});var r=t(295454);var i=r.Lb.DYNAMIC_CONFERENCE;var o={ENTITY:{DYNAMIC_CONFERENCE:"ENTITY.DYNAMIC_CONFERENCE",DYNAMIC_CONFERENCE_PARTICIPANT:"ENTITY.DYNAMIC_CONFERENCE_PARTICIPANT"}};var c="SpSessionToExclude";var a="dynamic_conference"}}]);