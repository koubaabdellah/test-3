function GetStartedModal( locationID,modal,modalOffset,closeButton, returnFocus){
    this.modalBackground=$("#modalBackground");//transparent overlay for modal
    this.modal=modal;
    this.locationID=locationID;//area on the page to display modal
    this.closeButton=closeButton;
    this.modalOffset=modalOffset;
    this.returnFocus=returnFocus;
    this.hideBackground=function(){
        $("#modalBackground").attr("aria-hidden",true);
        $("#wrapper").attr("aria-hidden",true);
    };
    this.showBackground=function(){
        $("#modalBackground").attr("aria-hidden",false);
        $("#wrapper").attr("aria-hidden",false);
    };
}

GetStartedModal.prototype={
    constructor:GetStartedModal,
    displayModal:function()
    {
        var self=this;

        this.modalBackground.css("top","0px");
        this.modalBackground.css("height",$(document).height()+"px");
        this.modalBackground.css("width",$(document).width()+"px");
        
        this.modalBackground.show();
        this.modal.show();
        this.modal.attr("aria-hidden",false);
        this.hideBackground();
 
        this.modal.css("top",this.modalOffset+"px");

        this.modal.css("margin-left", ($(document).width()*.5) - (this.modal.width()*.5));

        $("html, body").animate({ scrollTop: this.modal.offset().top }, 200);

        
        $("body").on("keydown",function (e) {    
            //close on tab or esc
            
            if (  e.which ==27) {
                $("body").off("keydown");
                self.modalBackground.hide();
                self.modal.hide();
                self.modal.attr("aria-hidden",false);
                self.showBackground();
            }

            if (e.which == 9  ) {
                self.closeButton.focus();
                e.preventDefault();
            }

            if (e.which == 13  ) {
                e.preventDefault();
                $("body").off("keydown");
                self.modalBackground.hide();
                self.modal.hide();
                self.modal.attr("aria-hidden",false);
                self.showBackground();
                self.returnFocus.focus();
            }
        });
 
        $(".modal-close, .closeButton").on("click",function(event){

            // $("body").die("keydown");
            // event.preventDefault();
            // self.modalBackground.hide();
            // self.modal.hide();
            // self.modal.attr("aria-hidden",false);
            // self.showBackground();
            self.closeModal(event);
        });
    },

    closeModal:function(event)
    {
        var self = this;

            $("body").off("keydown");
            if (event)
                event.preventDefault();
            self.modalBackground.hide();
            self.modal.hide();
            self.modal.attr("aria-hidden",false);
            self.showBackground();
    },

    rePosition:function()
    {
    	var self = this;

		this.modalBackground.css("height",$(document).height()+"px");
	    this.modalBackground.css("width",$(window).width()+"px");

	    this.modal.css("margin-left", ($(window).width()*.5) - (this.modal.width()*.5));
    }

}
 
$(function() {
console.log($("#OfferDetailsModal"),$("#modalContentOfferDetails"),200,$("#OfferDetailsClose"),$("#OfferDetailsModal"));
    var OfferDetailsModal = new GetStartedModal( $("#OfferDetailsModal"),$("#modalContentOfferDetails"),200,$("#OfferDetailsClose"),$("#OfferDetailsModal"));
   
 
    $("#OfferDetailsModal").on("click",function(event){
        event.preventDefault();
        OfferDetailsModal.displayModal();
    });

    $(window).resize(function()
    {
    	OfferDetailsModal.rePosition();
    })

    $("#modalBackground").on("click", function(event){

        OfferDetailsModal.closeModal();
    });
 
});

 


