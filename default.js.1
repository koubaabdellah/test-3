(function(n,require,t){"use strict";var i,r,u,f,e,o,s,h;Object.defineProperty(t,"__esModule",{value:!0});t.convertGForcesToAcceleration=t.convertAccelerationToGForces=t.fromCelsiusToFahrenheit=t.mS2ToThreshold=t.thresholdToMS2=t.kmToMeters=t.metersToKm=t.kWhToLiters=t.intRound=void 0;var c=1/33.7*3.785411784,l=function(n,t){return Math.round(n*Math.pow(10,t))/Math.pow(10,t)};t.intRound=l;i=function(n){return n*c};t.kWhToLiters=i;r=function(n){return n/1e3};t.metersToKm=r;u=function(n){return n*1e3};t.kmToMeters=u;f=function(n){return n*18/1e3/.10197162};t.thresholdToMS2=f;e=function(n){return Math.round(n*.10197162*1e3/18)};t.mS2ToThreshold=e;o=function(n){return n*9/5+32};t.fromCelsiusToFahrenheit=o;s=function(n,i){return t.intRound(n/9.80665,i)};t.convertAccelerationToGForces=s;h=function(n,i){return t.intRound(n*9.80665,i)};t.convertGForcesToAcceleration=h})(geotab,geotab.commonjs.generateRequire("geotab/utils/converters"),geotab.commonjs.generateExport("geotab/utils/converters"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ENTIRE_ORGANIZATION_GROUP_ID=void 0;t.ENTIRE_ORGANIZATION_GROUP_ID="GroupCompanyId"})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/constants/groupConstants"),geotab.commonjs.generateExport("geotab/checkmate/constants/groupConstants"));
(function(n,require,t){"use strict";function yi(n){return String(n||"").replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function pi(n){return n?n.replace(/(&.*?;)/g,function(n){return o[n]||n}):""}function s(n,t,i,r){var e,a,u;if(i===void 0&&(i={}),r===void 0&&(r=!1),typeof n=="function"&&typeof t=="function")return n.toString()===t.toString();if(typeof n!="object"||n===null||typeof t!="object"||t===null)return n===t;if(Array.isArray(n)!==Array.isArray(t))return!1;var o=Object.keys(n),h=o.length,c=Object.keys(t),l=c.length;if(!r&&h!==l)return!1;for(e=h>=l?o:c,a=e.length,u=0;u<a;++u){var f=e[u],v=n[f],y=t[f],p=i.hasOwnProperty(f)?i[f]:s;if(!p(v,y,i,r))return!1}return!0}function wi(n,t){var i=function(n){return n.id||n};return(n||[]).map(i).sort().join("")===(t||[]).map(i).sort().join("")}function bi(n){return n.type.indexOf("key")>-1}function h(n){return{left:n.pageX,top:n.pageY}}function ki(n){if(!n||!n.length)return{x:0,y:0};for(var r=0,u=0,i=n.length-1,t=0;t<i;t++)r+=n[t].x,u+=n[t].y;return{x:r/i,y:u/i}}function c(n){var t=n.target.getBoundingClientRect();return{left:t.left,top:t.top}}function di(n){return bi(n)?c(n):h(n)}function l(n,t,i){return typeof n=="object"?l(n.r,n.g,n.b):"#"+[n,t,i].map(function(n){var t=(n||0).toString(16);return t.length<2?"0"+t:t}).join("")}function gi(n,t,i,r){return(n&&n.andAlso||t&&t.call).call(n||t,i,r)}function nr(t){var u=n.getGlobalObject().document,f=u.createDocumentFragment(),i=u.createElement("div"),r;for(i.innerHTML=t.trim(),r=i.childNodes.length;r;)f.appendChild(i.removeChild(i.childNodes[0])),r-=1;return f}function y(n){return(n||[]).reduce(function(n,t){return n.concat(t)},[])}function tr(n){return t.uniqueArray(n,t.echo)}function w(n){return t.uniqueArray(n,function(n){return n.id})}function ir(n){return n.length&&Array.isArray(n[0])?w(y(n)):n}function rr(n,t,i,r){return n.filter(function(n){for(var e,u=0,f=t;u<f.length;u++)if(e=f[u],i(n,e))return!r;return r})}function ur(n){var i=n,r=function(n){var i=t.isIdEntity(n)?n.id:n;return i===u.ENTIRE_ORGANIZATION_GROUP_ID},f=function(n){return n.relation&&Array.isArray(n.items)};return f(n)&&(!n.items.length||n.items.every(function(n){return!f(n)}))?(i=n.items||[],n.relation==="And")?i.every(r):i.some(r):i&&Array.isArray(i)&&(!i.length||i.some(r))}function fr(n){return Object.keys(n).map(function(t){return n[t]})}function er(n){return Date.parse(n)}function or(n){return new Date(n).toISOString()}function sr(n){return(n||[]).reduce(function(n,t){return n[t.id||t]=t,n},{})}function hr(n){return(n||[]).reduce(function(n,t){return n[t.id||t]=!0,n},{})}function cr(n,t){var r=t?0:1,i=new Date(n),u=i.getUTCHours()*36e5,f=i.getUTCMinutes()*6e4;return new Date(i.setUTCDate(i.getUTCDate()+r)-u-f)}function lr(n,t){t===void 0&&(t=400);var i=undefined,r=undefined;return function(){for(var e=this,f=[],u=0;u<arguments.length;u++)f[u]=arguments[u];r||(r=setTimeout(function(){n.apply(e,i||[]);r=undefined;i=undefined},t));i=f}}function ar(n,t){t===void 0&&(t=400);var i;return function(){for(var f=this,u=[],r=0;r<arguments.length;r++)u[r]=arguments[r];i&&clearTimeout(i);i=setTimeout(function(){n.apply(f,u)},t)}}function vr(){return"id"+Math.random().toString().substr(2)}function d(n){var t=new RegExp("^(.*)(localhost|127\\.0\\.0\\.1|192\\.168\\.(.*)|10\\.(.*)).*$");return!!t.test(n)}function yr(n){return d(n)||g.some(function(t){return n.indexOf(t)>=0})}function pr(n,t){return function(){var i;return function(){for(var u=[],r=0;r<arguments.length;r++)u[r]=arguments[r];return i&&clearTimeout(i),i=setTimeout(function(){i=null;n.apply(null,u)},t)}}()}function dr(n){var t=(n||"").search(/sessionid/ig),i,r;return t>=0?(i=n.substring(t),r=i.indexOf(","),n.substring(0,t)+(r>=0?i.substring(r+1):"")):n}function gr(n,t){var i="",f=function(n){return n.type&&n.urls.length},e=function(n){return o(n).every(function(n){return n.trim().search(rt)===0})},o=function(n){return typeof n.urls=="string"?[n.urls]:n.urls},u,r;try{u=JSON.parse(t).filter(f).filter(e);u.length?(r=JSON.parse(n),r&&r.invalid&&(i="old")):i="empty"}catch(s){i="json"}return{reason:i,isValid:!i}}function r(n){return n.hasOwnProperty("userAuthenticationType")&&n.userAuthenticationType==="MyAdmin"}function tu(n){var i=n||{};return r(i)?nu(i)?t.echo:function(n){return!r(n)||!ft(n,ut)}:function(n){return!r(n)}}function iu(n){var t={},r=function(i){return t[i]||n.translateKey(i)};return{add:function(n){t=i(i({},t),n)},translate:r,translateFn:function(){return r}}}function su(n){for(var i,r={},t=0,u=n;t<u.length;t++)i=u[t],r[i.id]=i;return r}var i=this&&this.__assign||function(){return i=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i.apply(this,arguments)},e,u,o,a,v,p,b,k,g,nt,tt,it,rt,et,st,ht,ct,lt,at,vt,yt,pt,wt,bt,kt,f,dt,gt,ni,ti,ii,ri,ui,fi,ei,oi,si,hi,ci,li,ai,vi;Object.defineProperty(t,"__esModule",{value:!0});t.getPageBody=t.getAddinResourcePath=t.getAddinPrefix=t.memOnce=t.getDbParams=t.translationsAggregator=t.filterUsersFn=t.isMyAdminUser=t.isCustomMapValid=t.clearUrlFromPrivateInfo=t.isObject=t.echo=t.NOOP=t.isWhiteLabeled=t.multiplex=t.isTestDomain=t.isLocalUrl=t.generateId=t.cacheFor=t.debounce=t.throttle=t.expandDate=t.makeBoolHash=t.makeHash=t.msToISO=t.isoToMS=t.hashToArray=t.isEntireOrganization=t.hasCompanyGroup=t.filterItemsByProperties=t.joinArrays=t.uniqueById=t.unique=t.uniqueArray=t.flattenArrays=t.toDocumentFragment=t.callBuilder=t.compareDates=t.compare=t.rgbToHex=t.getClickCoordinates=t.getKeyboardCoordinates=t.getCenterPoint=t.getMouseClickCoordinates=t.compareGroups=t.compareElements=t.unescape=t.htmlEscape=t.RGBA_REGEX_PATTERN_FOR_GET_OPACITY=t.RGBA_REGEX_PATTERN=void 0;t.toLowerAndRemoveSpaces=t.sortByDateProp=t.getStandardKeyCode=t.sanitizeCRLF=t.convertNumberOfBytesToKbOrMb=t.isNumber=t.onKeyPressed=t.dictionaryFromArray=t.getGlobalObj=t.parsePageName=t.secondsToHours=t.pickKeys=t.minMaxInArr=t.hasUser=t.isIdEntity=t.collectUIPageState=t.credentialsToString=t.dateOrUndefinedFromString=t.dateFromString=t.decodeToInt=t.encodeToLong=t.pad=t.isCompanyNameValid=void 0;e=require("./utils/converters");u=require("./checkmate/constants/groupConstants");t.RGBA_REGEX_PATTERN=/rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),?([0,1]?\.?\d*)?\)/i;t.RGBA_REGEX_PATTERN_FOR_GET_OPACITY=/rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),/i;t.htmlEscape=yi;o={"&amp;":"&","&quot;":'"',"&#39;":"'","&apos;":"'","&lt;":"<","&gt;":">"};t.unescape=pi;t.compareElements=s;t.compareGroups=wi;t.getMouseClickCoordinates=h;t.getCenterPoint=ki;t.getKeyboardCoordinates=c;t.getClickCoordinates=di;t.rgbToHex=l;a=function(n,t){var i=(n||"").toUpperCase(),r=(t||"").toUpperCase();return i===r?0:i>r?1:-1};t.compare=a;v=function(n,t){if(typeof n!=typeof t)throw new Error("Incomparable Types");return n instanceof Date&&t instanceof Date?n.getTime()===t.getTime()?0:n>t?-1:1:n===t?0:n>t?-1:1};t.compareDates=v;t.callBuilder=gi;t.toDocumentFragment=nr;t.flattenArrays=y;p=function(n,t){return(n||[]).reduce(function(n,i){var r=t(i);return n.hash[r]||(n.hash[r]=!0,n.arr.push(i)),n},{hash:{},arr:[]}).arr};t.uniqueArray=p;t.unique=tr;t.uniqueById=w;t.joinArrays=ir;t.filterItemsByProperties=rr;b=function(n){return n.some(function(n){return n.id===u.ENTIRE_ORGANIZATION_GROUP_ID})};t.hasCompanyGroup=b;t.isEntireOrganization=ur;t.hashToArray=fr;t.isoToMS=er;t.msToISO=or;t.makeHash=sr;t.makeBoolHash=hr;t.expandDate=cr;t.throttle=lr;t.debounce=ar;k=function(n,t){var i=undefined;return function(){return i===undefined&&(i=n(),setTimeout(function(){i=undefined},t)),i}};t.cacheFor=k;t.generateId=vr;t.isLocalUrl=d;g=["mytest.geotab.com","mytest0.geotab.com","mytest1.geotab.com","mytest2.geotab.com"];t.isTestDomain=yr;t.multiplex=pr;var wr=function(n){for(var i=n.split(":")[0].split("."),t=0;t<i.length;++t)if(isNaN(+i[t]))return!1;return!0},br=function(n){for(var i=n.replace("[","").replace("]","").split(":"),t=0;t<i.length;++t)if(i&&isNaN(+i[t]))return!1;return!0},kr=function(n){var t=n||window.location.host.toLowerCase();return t.indexOf("geotab")===-1&&t.indexOf("localhost")===-1&&!wr(t)&&!br(t)};t.isWhiteLabeled=kr;nt=function(){};t.NOOP=nt;tt=function(n){return n};t.echo=tt;it=function(n){return n!==null&&typeof n=="object"&&!Array.isArray(n)};t.isObject=it;t.clearUrlFromPrivateInfo=dr;rt=/https?:\/\/[^\s/$.?#].[^\s]*$/gi;t.isCustomMapValid=gr;t.isMyAdminUser=r;var ut="@geotab.com",ft=function(n,t){var i=n.name||"";return i.toLowerCase().indexOf(t)!==-1},nu=function(n){return ft(n,ut)};t.filterUsersFn=tu;t.translationsAggregator=iu;et=function(n){return n?{credentials:{database:n}}:{}};t.getDbParams=et;var ot=function(){function n(){}return Object.defineProperty(n.prototype,"value",{get:function(){return""},enumerable:!1,configurable:!0}),n}(),ru=new ot,uu=function(n){var t=ru;return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return t instanceof ot?t=n.apply(null,r):t}};t.memOnce=uu;st=function(n){return"AddIns/"+n.replace(/\s/g,"")};t.getAddinPrefix=st;ht=function(n,i,r){if(i.indexOf("https://")===0)return i;var u=i[0]==="/"?"":"/";return"/"+r+"/"+(t.getAddinPrefix(n)+u+i)};t.getAddinResourcePath=ht;ct=/<body[^>]*>([\s\S]*)<\/body[\s]*>/im;lt=function(n){var t=n.match(ct);return t?t[1]:n};t.getPageBody=lt;var fu=/[<>"'`\\/;:*\-()[\]{}]/i,eu=256,ou=function(n){return n.length<=eu&&n.search(fu)===-1};t.isCompanyNameValid=ou;at=function(n,t){for(var i=""+n;i.length<t;)i="0"+i;return i};t.pad=at;vt=9007199254740991;yt=function(n){if((n||typeof n=="number")&&!isNaN(n)&&n<vt){var t=(+n).toString(16),i=new Array(17-t.length).join("0");return i+t}return isNaN(n)?undefined:"0"};t.encodeToLong=yt;pt=function(n){return n?parseInt(n,16):0};t.decodeToInt=pt;wt=function(n){var t=n instanceof Date?n:new Date(n);return isNaN(t.getTime())?new Date:t};t.dateFromString=wt;bt=function(n){var t=n instanceof Date?n:new Date(n);return isNaN(t.getTime())?undefined:t};t.dateOrUndefinedFromString=bt;kt=function(n){return n?"&userName="+encodeURIComponent(n.userName)+"&sessionId="+n.sessionId+"&database="+n.database:""};t.credentialsToString=kt;f=function(n,t){return Array.prototype.map.call(n.getElementsByTagName(t),function(n){return n.value})};dt=function(n){var t=Array.prototype.map.call(n.getElementsByTagName("input"),function(n){return n.type==="radio"||n.type==="checkbox"?n.checked:n.value});return t.concat(f(n,"textarea"),f(n,"select"))};t.collectUIPageState=dt;gt=function(n){return!!(n&&n.id)};t.isIdEntity=gt;ni=function(n){return t.isIdEntity(n)};t.hasUser=ni;ti=function(n){for(var i=-Number.MAX_VALUE,r=Number.MAX_VALUE,t=0;t<n.length;t++)n[t]>i&&(i=n[t]),n[t]<r&&(r=n[t]);return{min:r,max:i}};t.minMaxInArr=ti;ii=function(n,t){return t.reduce(function(t,r){var u;return i(i({},t),(u={},u[r]=n[r],u))},{})};t.pickKeys=ii;ri=function(n){return e.intRound(n/3600,2)};t.secondsToHours=ri;ui=function(n){var t=n.location.hash.match(/^#(.*?)(,(.*))?$/);return t?t[1]||"":""};t.parsePageName=ui;fi=function(){return typeof window!="undefined"?window:typeof self!="undefined"?self:globalThis};t.getGlobalObj=fi;t.dictionaryFromArray=su;ei=function(n){return function(t){return function(i){var r=i.which||i.keyCode;n.some(function(n){return n===r})&&t(i)}}};t.onKeyPressed=ei;oi=function(n){return!isNaN(parseFloat(n))&&isFinite(n)};t.isNumber=oi;si=function(n,t){var r=1024,i=r*r,u=Math.pow(10,n>2*i?0:2);return(Math.round(n*u/(n>i?i:r))/u).toString()+(n>i?t?"MBps":"MB":t?"KBps":"KB")};t.convertNumberOfBytesToKbOrMb=si;hi=/%0d%0a/gi;ci=function(n){return(n||"").replace(hi,"")};t.sanitizeCRLF=ci;li=function(n){if(n.code)return n.code;switch(n.keyCode){case 8:return"Backspace";case 9:return"Tab";case 13:return"Enter";case 27:return"Escape";case 32:return"Space";case 33:return"PageUp";case 34:return"PageDown";case 35:return"End";case 36:return"Home";case 37:return"ArrowLeft";case 38:return"ArrowUp";case 39:return"ArrowRight";case 40:return"ArrowDown";case 46:return"Delete";default:return undefined}};t.getStandardKeyCode=li;ai=function(n){return function(t,i){return new Date(t[n]).getTime()-new Date(i[n]).getTime()}};t.sortByDateProp=ai;vi=function(n){if(n!==null&&n!==void 0)return n.toLowerCase().replace(/\s/g,"")};t.toLowerAndRemoveSpaces=vi})(geotab,geotab.commonjs.generateRequire("geotab/utils"),geotab.commonjs.generateExport("geotab/utils"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.localizerStrings=void 0;t.localizerStrings=["on","On","off","Off","yes","Yes","no","No","ok","OK","default","Default","all","All","All","All","legend","Legend","once","once","twice","twice","times","times","time","time","Total","Total","Date","Date","Resource","Resource","Type","Type","Active","Active","Forward","Forward","Up","Up","Right","Right","Invalid","Invalid","Trailers","Trailers","Users","Users","Vehicles","Vehicles","Assets","Assets","Asset","Asset","Rules","Rules","Drivers","Drivers","Routes","Routes","RoutePlans","Route plans","Information","Information","Clear","Clear","Close","Close","And","And","Or","Or","Enable","Enable","Disable","Disable","View","View","Edit","Edit","EditMultiple","Edit multiple","Start","Start","End","End","Error","Error","Reminder","Reminder","Description","Description","Groups","Groups","Types","Types","Color","Color","Visibility","Visibility","Shape","Shape","Both","Both","Show","Show","Protocol","Protocol","Telematics","Telematics","Time","Time","Value","Value","Limit","Limit","Source","Source","Reset","Reset","meters","meters","yards","yards","copy","Copy","dontcopy","Don't Copy","add","Add","addGroups","Add Groups","replaceGroups","Replace Groups","overwrite","Overwrite","Web","Web","dontChange","Don't Change","replaceWith","Replace With","New","New","undoChanges","Undo changes","InvalidEmail","The email address is not valid","UserIsNotSelected","The user is unknown","skip","Skip","skipAll","Skip all","addAnnotation","Add annotation","machineName","Machine name","new","New","open","Open","pending","Pending","hold","Hold","solved","Solved","closed","Closed","GeotabEUA","End User Agreement","Accept","Accept","Decline","Decline","Refresh","Refresh","Version","Version","resume","Resume","SelectEntities","Select Entities","SelectData","Select data","ShowAll","Show all","Hide","Hide","Safe","Safe","Unsafe","Unsafe","Origin","Origin","Status","Status","retry","Retry?","Approve","Approve","Title","Title","Fault","Fault","N/A","N/A","Update","Update","Actions","Actions","No change","No change","No Data","No data","English","English","French","French","Spanish","Spanish","Japanese","Japanese","German","German","Polish","Polish","Brazilian-Portuguese","Brazilian-Portuguese","Dutch","Dutch","Italian","Italian","Chinese","Chinese","Africa","Africa","Asia","Asia","Australia & New Zealand","Australia & New Zealand","Central & South America","Central & South America","Europe","Europe","Mexico","Mexico","UK","UK","United States","United States","Australian dollar (AUD)","Australian dollar (AUD)","Brazilian real (BRL)","Brazilian real (BRL)","British pound (GBP)","British pound (GBP)","Canadian dollar (CAD)","Canadian dollar (CAD)","Chinese yuan (CNY)","Chinese yuan (CNY)","European euro (EUR)","European euro (EUR)","Hong Kong dollar (HKD)","Hong Kong dollar (HKD)","Indian rupee (INR)","Indian rupee (INR)","Indonesian rupiah (IDR)","Indonesian rupiah (IDR)","Japanese yen (JPY)","Japanese yen (JPY)","Malaysian ringgit (MYR)","Malaysian ringgit (MYR)","Mexican peso (MXN)","Mexican peso (MXN)","New Zealand dollar (NZD)","New Zealand dollar (NZD)","Norwegian krone (NOK)","Norwegian krone (NOK)","Peruvian sol (PEN)","Peruvian sol (PEN)","Philippine peso (PHP)","Philippine peso (PHP)","Russian rouble (RUB)","Russian rouble (RUB)","Saudi riyal (SAR)","Saudi riyal (SAR)","Singapore dollar (SGD)","Singapore dollar (SGD)","South African rand (ZAR)","South African rand (ZAR)","South Korean won (KRW)","South Korean won (KRW)","Swedish krona (SEK)","Swedish krona (SEK)","Swiss franc (CHF)","Swiss franc (CHF)","Taiwanese dollar (TWD)","Taiwanese dollar (TWD)","Thai baht (THB)","Thai baht (THB)","Turkish lira (TRY)","Turkish lira (TRY)","US dollar (USD)","US dollar (USD)","FedrampUsdLabelText","USD United States Dollar","Albania","Albania","Andorra","Andorra","Armenia","Armenia","Austria","Austria","Azerbaijan","Azerbaijan","Belarus","Belarus","Belgium","Belgium","Bosnia Herzegovina","Bosnia Herzegovina","Bulgaria","Bulgaria","Canada","Canada","Croatia","Croatia","Cyprus","Cyprus","Czech Republic","Czech Republic","Denmark","Denmark","Estonia","Estonia","Faroe Islands","Faroe Islands","Finland","Finland","France","France","Georgia","Georgia","Germany","Germany","Greece","Greece","Hungary","Hungary","Iceland","Iceland","Ireland","Ireland","Italy","Italy","Kazakhstan","Kazakhstan","Latvia","Latvia","Liechtenstein","Liechtenstein","Lithuania","Lithuania","Luxembourg","Luxembourg","Malta","Malta","Moldova","Moldova","Monaco","Monaco","Montenegro","Montenegro","Netherlands","Netherlands","North Macedonia","North Macedonia","Norway","Norway","Poland","Poland","Portugal","Portugal","Romania","Romania","Russia","Russia","San Marino","San Marino","Serbia","Serbia","Slovakia","Slovakia","Slovenia","Slovenia","Spain","Spain","Sweden","Sweden","Switzerland","Switzerland","Tajikistan","Tajikistan","Turkey","Turkey","Turkmenistan","Turkmenistan","Ukraine","Ukraine","United Kingdom","United Kingdom","USA","USA","Uzbekistan","Uzbekistan","Vatican City","Vatican City","European Community","European Community","Rest of Europe","Rest of Europe","MandatoryFields","All fields are required.","ft","ft","kg","kg","lbs","lbs","km","km","mi","mi","km/h","km/h","mph","mph","h","h","{meters}m","{meters}m","yd","yd","none","None","save","Save","delete","Delete","cancel","Cancel","Report","Report","import","Import","makeHistoric","Archive (make historical)","other","Other","totalItems","Total items","gallonUS","gallon (US)","gallonImp","gallon (Imp)","litre","litre","L","L","gal","gal","G","G","Device","Device","Vehicle","Vehicle","VehicleMessagingStatus","Vehicle messaging status","DVIRLogs","Asset Inspection Logs","Reports","Reports","Trailer","Trailer","User","User","Rule","Rule","Zone","Zone","Notification","Notification","Route","Route","Driver","Driver","SystemSettings","System settings","Group","Group","Entity","Entity","ReportTemplate","Report template","EventOccurrence","Event occurrence","EventRule","Event rule","NoDevice","Unknown Vehicle","SortBy","Sort by","SortTooltip","Change sort direction","Code","Code","PC","PC","More formats","More formats","addressLookup","Address Lookup","customer","Customer","office","Office","home","Home","everywhere","Everywhere","Zones","Zones","Address","Address","GroupCompanyId","Company group","GroupAssetInformationId","Asset Information","GroupPowertrainAndFuelTypeId","Powertrain and Fuel Type","GroupInternalCombustionEngineId","Internal Combustion Engine","GroupGasolinePetrolId","Gasoline or Petrol","GroupDieselId","Diesel","GroupEthanolId","Ethanol","GroupBiodieselId","Biodiesel","GroupCompressedNaturalGasId","Compressed Natural Gas","GroupLiquifiedNaturalGasId","Liquified Natural Gas","GroupPropaneLiquifiedPetroleumGasId","Propane or Liquified Petroleum Gas","GroupElectricHybridPluginId","Electric or Hybrid Plug-in","GroupBatteryElectricVehicleId","Battery Electric Vehicle","GroupPluginHybridElectricVehicleId","Plug-in Hybrid Electric Vehicle","GroupManuallyClassifiedPowertrainId","Manually Classified Powertrain","GroupFuelCellElectricVehicleId","Fuel Cell Electric Vehicle","GroupDriverActivityGroupId","Driver activity","GroupBusinessGroupId","Business","GroupPersonalGroupId","Personal","GroupSecurityId","Security root","Everything","Everything","Everyone","Everyone","GroupEverythingSecurityId","Administrator","GroupSupervisorSecurityId","Supervisor","GroupUserSecurityId","Default user","GroupViewOnlySecurityId","View only","GroupDriveUserSecurityId","Drive App user","GroupViewMapOnlySecurityId","View map only","GroupNothingSecurityId","Nothing","GroupDefectsId","All Defect Lists","GroupVehicleDefectsId","Default Vehicle Defects List","GroupTrailerDefectsId","Default Trailer Defects List","DefectLists","Defect Lists","GroupAssetTypeId","Asset Type","GroupVehicleId","Vehicle","GroupTrailerId","Trailer","watermarkText","Select groups...","filterWatermarkText","Groups filter","ClearGroupsFilter","Clear groups filter","View all groups","View all groups","All groups selected","All groups selected","{0} more","{0} more","selectAllText","Select all","selectIndividual","Select individual","SelectAllVehicles","Select all vehicles","SelectAllDrivers","Select all drivers","DeselectAllVehicles","Deselect all vehicles","DeselectAllDrivers","Deselect all drivers","selectAllInFilter","Select all in filter","SelectVisible","Select visible","SelectNone","Select none","SelectMultiple","Select multiple","nothingFoundText","Nothing was found","levelUpText","Up one level","deselectAllText","Remove all","resetSelectedGroups","Clear selection","NoGroupSelected","You have not selected any groups","SelectGroup","Select Group(s)","selectAllGroupText","All in {0}","selectOnlyInGroupText","Only in {0}","selectAllDriversText","All Drivers","selectOnlyDriversText","Only Drivers","selectAllDevicesText","All Devices","selectOnlyDevicesText","Only Devices","DoNotChange","Do not change","AllIn","All in","OnlyIn","Only in","GroupBy","Group by","GroupBy:","Group by:","openFilter","Open filter","closeFilter","Close filter","removeSelection","Reset selection","searchGroupPlaceholderText","Search groups to filter by...","OperatorAnd","AND","OperatorOr","OR","AdvancedGroupsFilter","Advanced groups filter","Cancel","Cancel","ApplyFilters","Apply filters","AdvancedFilterFormDesc","Create conditions below to filter the entire system.","Operator","Operator","AddCondition","Add new condition","RemoveCondition","Remove condition","SourceAIModelId","AI Model","SourceGmcccId","GMCCC","SourceBrpId","BRP","SourceGeotabGoId","Telematics Device","SourceJ1708Id","J1708","SourceJ1939Id","J1939","SourceLegacyId","Manufacturer Specific","SourceObdId","OBD II","SourceSystemId","Telematics System","SourceThirdPartyId","Third-party","SourceObdSaId","OBD with Source Address Information","SourceProprietaryId","Manufacturer Specific","SourceLevcId","London Electric Vehicle Company (LEVC)","ControllerGeotabGoId","Geotab GO Controller","ControllerGmcccFaultId","GMCCC Engine","ControllerBrpFaultId","BRP Engine","ControllerObdBodyId","OBD Body","ControllerObdChassisId","OBD Chassis","ControllerObdNetworkingId","OBD Networking","ControllerObdPowertrainId","OBD Powertrain","ControllerNoneId","No Controller","EngineWatermarkText","Type or select entity from list...","UnitOfMeasureNoneId","None","UnitOfMeasureDegreesCelsiusId","°C","UnitOfMeasureDegreesFahrenheitId","°F","UnitOfMeasureKilometersPerHourId","km/h","UnitOfMeasureNewtonsId","N","UnitOfMeasureNewtonMetersId","N m","UnitOfMeasureMetersPerSecondSquaredId","m/s²","UnitOfMeasureMetersId","{meters}m","UnitOfMeasureGramsId","g","UnitOfMeasureCubicMetersId","m³","UnitOfMeasureLitersId","L","UnitOfMeasureCubicMetersPerSecondId","m³/s","UnitOfMeasureRevolutionsPerMinuteId","RPM","UnitOfMeasureHertzId","Hz","UnitOfMeasureSecondsId","s","UnitOfMeasureVoltsId","V","UnitOfMeasureAmpsId","A","UnitOfMeasureWattsId","W","UnitOfMeasureOhmsId","Ohms","UnitOfMeasurePascalsId","Pa","UnitOfMeasureBytesId","B","UnitOfMeasurePartsPerMillionId","ppm","UnitOfMeasurePercentageId","%","UnitOfMeasureRadiansId","rad","UnitOfMeasureRevolutionsId","rev","UnitOfMeasureCountId","count","UnitOfMeasurePulsesPerMeterId","pulses/m","UnitOfMeasureOhmsPerSecondId","Ohms/s","UnitOfMeasureGramsPerSecondId","g/s","UnitOfMeasureKilometersPerKilogramId","km/kg","UnitOfMeasureKilometersPerLiterId","km/L","UnitOfMeasureKilogramsPerKilometerId","kg/km","UnitOfMeasureLitersPerLaneKilometerId","L/lane km","UnitOfMeasureLitersPerTonneId","L/tonne","UnitOfMeasureGramsPerSquareMeterId","g/m^2","UnitOfMeasureKiloWattHoursId","kWh","UnitOfMeasureKilometersPerKiloWattHourId","km/kWh","WorkTime","Work time","WorkHours","Work Hours","WorkTimeAllHoursId","All hours","WorkTimeStandardHoursId","Standard hours","WorkTimeLunchHoursId","Lunch hours","WorkTimeEarlyLeaveHoursId","Early departure hours","WorkTimeLateArrivalHoursId","Late arrival hours","Uploader","Uploader","ReprocessingQueueWatcher","Reprocessing Queue Watcher","ServiceManager","Service Manager","LiveDownloader","Live Downloader","GoPatrolDownloader","GO Patrol Downloader","GoSafeDownloader","GO Safe Downloader","Gps2GoDownloader","GPS2GO Downloader","NotificationSender","Notification Email Sender","CustomReportScheduler","Custom Report Scheduler","WebServer","Web Server","RadioDownloader","Radio Downloader","WorkHours:","Work Hours:","StatusUnknown","Unknown","StatusDisabled","Disabled","StatusDisconnected","Disconnected","StatusConnected","Connected","StatusDebug","Debug","StatusIdle","Idle","StatusException","Exception","StatusDriving","Driving","StatusStopped","Stopped","StatusCharging","Charging","StatusCustomerStop","Stopped Inside Zone","StatusUnlocked","Unlocked","StatusRunningNoAidingDataAvailable","Running without available aiding data","StatusRunning","Running","StatusFTDINotInstalled","FTDI not installed","StatusTryingToLock","Trying to lock","StatusAuthenticationFailed","Authentication failed","StatusAuthenticationNotSupported","Authentication not supported","StatusAuthenticationSchemeNotProvided","Authentication scheme not provided","StatusUnknownResponseFromServer","Unknown response from server","StatusServerNotFound","Server not found","StatusProxyServerNotFound","Proxy server not found","StatusTimeout","Timeout","StatusProxyTimeout","Proxy timeout","StatusDeviceRegistrationFailed","Device registration failed","StatusConnecting","Connecting","StatusNoDevices","No Devices","UpdateMessageCountsFailed","Update message counts failed","InvalidOrbcommCustomer","Invalid Orbcomm Customer","ThreadFinishTimeout","Thread finish timeout","StatusWaitingForUpgrade","Waiting for upgrade","StatusDatabaseVersionDoesnotMatch","Database version does not match","StatusUserCleared","User cleared","StatusMissing","Missing","StatusServiceManagerConnected","Service manager connected","CacheCleared","Cache cleared","CacheBusy","Cache busy","StatusExceptionOccurred","Exception occurred","CheckmateException","The application exception","KeyDownloaderNonDataKeyInserted","Non-data Key Inserted","LogNewsPopup","News","LogOnly","Log only","Email","Email","LogPopup","Popup","LogUrgentPopup","Urgent","Alarm","Alarm","WebService","Web service","TextMessage","Text message","ChangeStatus","Change status","BeepThreeTimesRapidly","Beep three times rapidly","BeepThreeTimes","Beep three times","BeepTenTimesRapidly","Beep ten times rapidly","ReportTemplateZoneList","Default Zone List","ReportTemplateTripsDetail","Default Trips Detail Report","ReportTemplateRiskManagement","Default Risk Management Report","ReportTemplateDebug","Default Log Data and Collisions Report","ReportTemplateExceptionsDetail","Default Exceptions Detail Report","ReportTemplateExceptionsSummary","Default Exceptions Summary Report","ReportTemplateTripsSummary","Default Trips Summary Report","ReportTemplateTimeCard","Default Time Card Report","ReportTemplateAuditLog","Default Audit Log","ReportTemplateUserList","Default User List","ReportTemplateFailureMode","Default Failure Mode List","ReportTemplateDiagnosticList","Default Diagnostic List","ReportTemplateZoneVisitsDetail","Default Zone Visit Details Report","ReportTemplateZoneVisitsSummary","Default Zone Visit Summary Report","ReportTemplateRouteSummary","Default Route Summary Report","ReportTemplateUnassignedRoute","Default Unmatched Route Report","ReportTemplateNotification","Default Notification List","ReportTemplateFuelTax","Default Fuel Tax Report","ReportTemplateCongregation","Default Congregation Report","ReportTemplateEngineSummary","Default Engine Summary Report","ReportTemplateEngineFault","Default Engine Fault Report","ReportTemplateEngineStatus","Default Engine Status Report","ReportTemplateDevice","Default Device Report","ReportTemplateRouteDirections","Default Route Directions","ReportTemplateReminder","Default Reminders","ReportTemplateEventRuleDevice","Default Reminder Rule Device List","ReportTemplateEventHistory","Default Event History","ReportTemplateGroupsList","Default Group List","ReportTemplateDeviceInstallHistory","Default Device Installation History Report","ReportTemplateEngineStatusStatistics","Default Fuel and EV Energy Usage Report","ReportTemplateTextMessage","Default Text Message Report","ReportTemplateRouteComparisonDetail","Default Planned vs. Actual Route Report","ReportTemplateHosLog","Default HOS Logs","ReportTemplateDVIRLog","Default Asset Inspection Logs","ReportTemplateHosViolation","Default HOS Violation Report","ReportTemplateHosAvailability","Default HOS Availability Report","ReportTemplateChargeEvent","Default EV Charging Report","ReportTemplateMaterialManagement","Default Material Management","ReportTemplateRouteCompletion","Default Route Completion Report","Standard","Standard","ReportTemplateAdvancedZoneList","Advanced Zone List","ReportTemplateAdvancedTripsDetail","Advanced Trips Detail Report","ReportTemplateAdvancedRiskManagement","Advanced Risk Management Report","ReportTemplateAdvancedDebug","Advanced Log Data and Collisions Report","ReportTemplateAdvancedExceptionsDetail","Advanced Exceptions Detail Report","ReportTemplateAdvancedExceptionsSummary","Advanced Exceptions Summary Report","ReportTemplateAdvancedTripsSummary","Advanced Trips Summary Report","ReportTemplateAdvancedTimeCard","Advanced Time Card Report","ReportTemplateAdvancedAuditLog","Advanced Audit Log","ReportTemplateAdvancedUserList","Advanced User List","ReportTemplateAdvancedFailureMode","Advanced Failure Mode List","ReportTemplateAdvancedDiagnosticList","Advanced Diagnostic List","ReportTemplateAdvancedZoneVisitsDetail","Advanced Zone Visit Details Report","ReportTemplateAdvancedZoneVisitsSummary","Advanced Zone Visit Summary Report","ReportTemplateAdvancedRouteSummary","Advanced Route Summary Report","ReportTemplateAdvancedUnassignedRoute","Advanced Unmatched Route Report","ReportTemplateAdvancedNotification","Advanced Notification List","ReportTemplateAdvancedFuelTax","Advanced Fuel Tax Report","ReportTemplateAdvancedCongregation","Advanced Congregation Report","ReportTemplateAdvancedEngineSummary","Advanced Engine Summary Report","ReportTemplateAdvancedEngineFault","Advanced Engine Fault Report","ReportTemplateAdvancedEngineStatus","Advanced Engine Status Report","ReportTemplateAdvancedDevice","Advanced Device Report","ReportTemplateAdvancedRouteDirections","Advanced Route Directions","ReportTemplateAdvancedReminder","Advanced Reminders","ReportTemplateAdvancedEventRuleDevice","Advanced Device Reminder Rule List","ReportTemplateAdvancedEventHistory","Advanced Event History","ReportTemplateAdvancedGroupsList","Advanced Group List","ReportTemplateAdvancedDeviceInstallHistory","Advanced Device Installation History Report","ReportTemplateAdvancedEngineStatusStatistics","Advanced Fuel and EV Energy Usage Report","ReportTemplateAdvancedChargeEvent","Advanced EV Charging Report","ReportTemplateAdvancedTextMessage","Advanced Text Message Report","ReportTemplateAdvancedRouteComparisonDetail","Advanced Planned vs. Actual Route Report","ReportTemplateAdvancedHosLog","Advanced HOS Logs","ReportTemplateAdvancedDVIRLog","Advanced Asset Inspection Logs","ReportTemplateAdvancedHosViolation","Advanced HOS Violation Report","ReportTemplateAdvancedFillUps","Advanced Fill-Ups Report","ReportTemplateFillUps","Fill-Ups Report","ReportTemplateAdvancedHosAvailability","Advanced HOS Availability Logs","ReportTemplateAdvancedMaterialManagement","Advanced Material Management","ReportTemplateAdvancedRouteCompletion","Advanced Route Completion Report","Activity Summary (today)","Activity Summary (today)","Basic Driver Score (last week)","Basic Driver Score (last week)","Business vs Personal (last week)","Business vs Personal (last week)","Number of Stops (yesterday)","Number of Stops (yesterday)","Percentage of time Idling (yesterday)","Percentage of time idling (yesterday)","Watchdog Report","Watchdog Report","Trip Categorization Report Template","Trip Categorization Report","ShortReportTemplateExceptionsDetail","Details","ShortReportTemplateAdvancedExceptionsDetail","Details","ShortReportTemplateExceptionsSummary","Summary","ShortReportTemplateAdvancedExceptionsSummary","Summary","ShortReportTemplateEngineSummary","Summary","ShortReportTemplateAdvancedEngineSummary","Summary","ShortReportTemplateEngineFault","Details","ShortReportTemplateAdvancedEngineFault","Details","ShortReportTemplateZoneVisitsDetail","Details","ShortReportTemplateZoneVisitsSummary","Summary","NoNetworkConnection","No Network Connection","ErrorReported","Error has been reported","{0}. Please contact support.","{0}. Please contact support.","WarningFailedAdd","Failed to create a new item. No network connection.","WarningFailedSet","Failed to save changes. No network connection.","WarningFailedRemove","Failed to remove item. No network connection.","WarningFailedGet","Failed to get data. No network connection.","EngineTypeNoneId","Unassigned Engine Type","EngineTypeGenericId","Generic Engine Type","DistanceFromOneToAnother","Distance from one to another","engineHours","Engine hours","Engine","Engine","NoFailureModeId","Unknown Failure Mode","UnknownDriverId","Unknown driver","NoDeviceLabel","No vehicle","Unidentified","Unidentified","UnidentifiedDriver","Unidentified driver","DescriptionEmpty","The description cannot be empty.","DeviceSelectedException","There must be at least one device selected. Please select a device.","SelectDevice","Select a vehicle.","DistributionListNewsId","System News","DistributionListImportExportId","Import/Export Notification","AddDistributionList","Add Distribution List","DistributionListEdit","Distribution List Edit","Suspend","Suspend","Terminate","Terminate","ActiveService","Active service","yourPlan","Your plan","ThirdPartyDataService","Third-party Data via IOX-RS232, IOX-USB, or IOX-CAN","GenericThirdPartyDeviceService","Hardware Add-Ons via IOX-RS232, IOX-USB, or IOX-CAN","GarminMessagingService","Garmin Dispatch and Messaging","EngineDataService","Engine Data","AccelerometerDataService","Accelerometer Data","IOXBluetoothService","IOX Bluetooth (IOX-BT)","IridiumService","Iridium Satellite","ValorDataService","Valor (Temperature/Tire Pressure)","ExternalBuzzerService","External Buzzer","DigitalInputService","Digital Input (IOX-AUXM, IOX-ALERT)","ThirdPartyHOSService","Third-party Hours of Service","NfcService","NFC Driver Identification","GoTalkService","GO TALK","MobileyeService","Mobileye","WiFiService","Wi-Fi","SaltSpreadersService","Salt Spreaders","ActiveTrackingService","Active Tracking","HIDService","HID Reader","BluetoothService","Bluetooth Beacon","OutputService","IOX Relay Output","AnalogService","IOX Analog Input","GarminHOSService","Garmin Hours of Service","DriveAppHosService","Drive App Hours of Service","DriverIdRelay","Driver ID relay:","CAN Message:","CAN Message:","Auxiliaries","Auxiliaries","Ignition","Ignition","Devices","Devices","ViewDeviceOnMap","View device on map","ShowDeviceDetails","Show device details","vin","VIN","LicensePlate","License plate","SerialNumber","Serial number","DeviceType","Device type","DeviceSerialNoLengthException","The serial number must be 12 characters long.","InvalidValue","Invalid Value","MoreThanDriversSelectedException","There are more than 5 drivers selected, please remove {0} drivers.","MinimumOverlapTime","Minimum overlap time","MinimumNumberCongregationDevices","Minimum number of congregating vehicles","DevicesWithIssuesOnly","Devices with issues only","ShowDismissedFaults","Show dismissed faults","MinimumPercentageStopTime","Minimum percentage stop time","QuickImport","Quick import","QuickImportServerError","// Server Errors (duplicate entries, invalid serial numbers, etc.).// The following were not added. At least one in each group below is incorrect.","editing","Editing","MinimumOverlapTime:","Minimum overlap time:","MinimumNumberCongregationDevices:","Minimum number of congregating vehicles:","Enable hotspot","Enable hotspot","NewInstallation","New installation","DrawZoneNotification","Click on the map to add a zone point.","watermarkTextVehicleVINZone","Vehicle, VIN, zone, route, or address...","watermarkTextAssetVINZone","Asset, VIN, zone, route, or address...","watermarkTextLiveData","Name, VIN, or serial number","DeviceSearch","Search for device","SelectDriversWatermark","Select drivers from the list","SelectDevicesWatermark","Select devices from the list","SelectAssetsWatermark","Select an asset...","SelectRulesWatermark","Select rules from the list","SelectZonesWatermark","Select zones from the list","SelectZones","Select Zones","SelectHOSLogs","Select HOS logs","Select zone types","Select zone types","Diagnostics","Diagnostics","Diagnostic","Diagnostic","DiagnosticType","Diagnostic type","SearchDiagnostics","Search diagnostics","DiagnosticSource","Diagnostic source","DisplayAllDiagnostics","Display all diagnostics","EmptyName","The name cannot be empty.","ShowLegend","Show legend","EditZone","Edit zone","EditRouteDetails","Edit route sequence","AuditTypes","Audit types","EntityType","Entity type","About","About","ChangeCurrentReport","Change current report","Show report formats","Show report formats","EstimateRunTime","Estimated run time","Available","Available","NotAvailable","Not available","Availability","Availability","HTMLReport","HTML report","EmailSent","Email sent","Toggle column presence","Toggle column presence","Add to bulk edit","Add to bulk edit","Remove selection","Remove selection","Hide the main menu","Hide the main menu","Show the main menu","Show the main menu","Reset to default","Reset to default","Check all","Check all","Uncheck all","Uncheck all","Accept all","Accept all","Reject all","Reject all","Total items {0}","Total items {0}","Add page to bookmarks","Add page to bookmarks","Remove page from bookmarks","Remove page from bookmarks","You can bookmark a maximum of four pages. Please remove a bookmarked page to add a new one.","You can bookmark a maximum of four pages. Please remove a bookmarked page to add a new one.","Dashboard","Dashboard","A graphical summary for the various metrics of your organization.","A graphical summary for the various metrics of your organization.","View the current or archived (historical) positions of your vehicles.","View the current or archived (historical) positions of your vehicles.","Vehicles & Assets","Vehicles & Assets","View and set up devices.","View and set up devices.","View and send text messages to drivers.","View and send text messages to drivers.","More","More","ResellerSupport","Reseller Support","Use my selected options","Use my selected options","Use default options","Use default options","Report options","Report options","For reference, your default report options are","For reference, your default report options are:","pickReportOptionsQuestion","The options you have selected are different from the default options in this report. Which options would you like to use?","RanReport","Ran report","RanReportFromTo","Ran report from {0} to {1}","RanReportSummary","Ran report summary from {0} to {1}","ViewMap","View Map","DeviceList","Vehicles & Devices List","TripsReport","Activity & Trips Report","FromTo","From {0} to {1} UTC","UTC","UTC","Rest","Rest","Duty","Duty","Drive","Drive","NoModifications","No modifications","Modification","Modification","ShowModifications","Show modifications","ShowOnlyYardMoves","Show Only Yard Moves","Modifications","Show Modifications:","Statuses","Statuses","Map","Map","Nearest","Nearest","NearestTitle","Find vehicles closest to the center of the map","CancelNearestTitle","Cancel find nearest vehicle mode","Views","Views","Advanced","Advanced","MapType","Map type","ClearMap","Clear map","ShowLogDetails","Show Collision & Log Data","Live Map","Live Map","MapBox","MapBox","Transport","Transport","Cycle","Cycle","Roadmap","Roadmap","Satellite","Satellite","Terrain","Terrain","LockMap","Lock this view","MyLocation","My location","NoNearestAssets","No assets were found. Please adjust filters to return more results.","ArrivalAndDistance","{0} and {1} away","NoNearestETA","No vehicles can drive to this destination.","SaveRoute","Save route","StreetView","Show street view","FindAddress","Find address","InsertWayPoint","Add waypoint","RemoveRouteWaypoint","Remove waypoint","ListRoutes","List routes","WebRequest","Web request","TextTemplate","Text Template","SelectUser","Please select at least one user","SelectUsers","Select users","ShowTrip","Show trip","Estimate","Estimate","ShowRoute","Show route","GpsTextMessageSendText","Send","DeleteMessage","Delete message","ExpandMessage","Expand Message","UndoMessageRemoval","Message was removed.","UndoMessageRemovalExtraInfo","Message from {0} to {1} was removed.","UndoGroupMessageRemoval2Devices","Group message from {0} to {1} and {2} was removed.","UndoGroupMessageRemovalDevices","Group message from {0} to {1} and other {2} vehicles was removed.","ReplyToVehicle","Reply to Vehicle","TooLongGPSMessage","Text message cannot be over 5000 characters.","RemoveExistingStops","Remove existing stops","Reply","Reply","Options","Options","Message","Message","Sent","Sent","Delivered","Delivered","MessagesToShow","Messages to show","Undelivered","Undelivered","SystemMessages","System Messages","UndoChanges","Undoing changes","Close Live Chat","Close Live Chat","Dismiss","Dismiss","Close notification","Close notification","MissingLoggingData","Missing logging data","BasicAuthentication","Basic Authentication","WindowsAuthentication","Windows Authentication","ProblemFeedback","Feedback","Getting Started","Getting Started","today","Today","live","Live","tomorrow","Tomorrow","yesterday","Yesterday","thisweek","This week","lastweek","Last week","thismonth","This month","lastmonth","Last month","nextweek","Next week","nextmonth","Next month","PreviousDay","Previous 24 hours","PreviousWeek","Previous 7 days","PreviousTwoWeeks","Previous 14 days","PreviousHour","Previous hour","StartDate","Start date","EndDate","End date","SubPeriods","Sub-periods","Daily","Daily","Weekly","Weekly","Monthly","Monthly","BiWeekly","Every 2 weeks","FourWeeks","Every 4 weeks","Hourly","Every hour","ThirtyMinutes","Every 30 minutes","FiveMinutes","Every 5 minutes","EveryMinute","Every minute","forever","Forever","duePeriod","Due period","Upcoming","Upcoming","Overdue","Overdue","DueToday","Due today","DueSoon","Due soon","NextTwoWeeks","Next 2 weeks","LastWorkingWeek","Last working week","ThisWorkingWeek","This working week","WorkingWeek","Working week","ThreeMonths","3 months","lastThreeMonths","Last 3 months","lastSixMonths","Last 6 months","lastTwelveMonths","Last 12 months","yearToDate","Year to date","previousFourWeeks","Previous 4 weeks","previousThirtyDays","Previous 30 days","EndsAt","End date","AWeek","A week","Never","Never","EveryTwoWeeks","Every two weeks","EveryTwoMonths","Every two months","EveryThreeMonths","Every three months","EverySixMonths","Every six months","EverySevenMonths","every seven months","EveryEightMonths","every eight months","EveryNineMonths","every nine months","EveryTenMonths","every ten months","EveryElevenMonths","every eleven months","Yearly","Every year","EveryTwoYears","Every two years","EveryThreeYears","Every three years","WithCustomFrequency","with a custom frequency","lastquarter","Last quarter","previousquarter","Previous quarter","Quarterly","Quarterly","days","d","hours","h","{minutes}m","{minutes}m","seconds","s","B","B","KB","KB","MB","MB","GB","GB","TB","TB","PB","PB","fullYear","year","fullYears","years","fullMonth","month","fullMonths","months","fullDay","day","fullDays","days","fullHour","hour","fullHours","hours","fullMinute","minute","fullMinutes","minutes","fullSeconds","seconds","fullSecond","second","Millisecond","Millisecond","TimeZone","Time zone","Normal","Normal","System","System","None","None","ZoneStopExceptionRules","Zone Stop Exception","Speed","Speed","Login","Log in","DbUnavailable","Your database is under maintenance","InvalidUser","Invalid user name or password","CommonPasswordsException","Common passwords are not allowed","PasswordsDoNotMatch","Passwords do not match","PasswordIsBlank","Password cannot be blank","ResetPassExpired","The link to reset your password has expired. Please click 'Forgot password?' to receive another link.","Custom","Custom","Transparency:","Transparency:","Installer","Installer","TypeToFilterEntities","Type to filter entities...","PleaseWaitDiagnostics","Please wait...","January","January","February","February","March","March","April","April","May","May","June","June","July","July","August","August","September","September","October","October","November","November","December","December","Jan_short","Jan","Feb_short","Feb","Mar_short","Mar","Apr_short","Apr","May_short","May","Jun_short","Jun","Jul_short","Jul","Aug_short","Aug","Sep_short","Sep","Oct_short","Oct","Nov_short","Nov","Dec_short","Dec","Sunday","Sunday","Monday","Monday","Tuesday","Tuesday","Wednesday","Wednesday","Thursday","Thursday","Friday","Friday","Saturday","Saturday","Sun","Sun","Mon","Mon","Tue","Tue","Wed","Wed","Thu","Thu","Fri","Fri","Sat","Sat","ChangePassword","Change password","FileSizeTooBig","File size is too big","InvisibleRule","Invisible rule","ActualMoreThanLimit","Actual > Limit","ActualLessThanLimit","Actual < Limit","RemoveAll","Remove all","SelectAll","Select all","EnableCustomerZones","Enable customer zones","EnableHomeZones","Enable home zones","EnableOfficeZones","Enable office zones","ShowTraffic","Show traffic","ShowRoutes","Show routes","SnapTripsToRoad","Snap trips to road","InterpolatedRouteMessage","This segment of the trip was estimated because the device did not record any GPS coordinates during this span. Lines shown for this segment may not represent the vehicle's true activity.","ReportPeriod","Report period","InvalidDataInDocument","The uploaded Excel document contains invalid data. Contact your administrator.","NoExceptions","No exceptions","UploadingAccessDeniedError","Access to the file or folder is denied.","SupportServicesAgreement","Support Services via the Fleet Management Application","AcceptSupportServiceAgreement","Support Services via the Fleet Management Application was accepted","GoFirmware1","New GO device, type is still unknown.","GoFirmware2","GO Lite Key","GoFirmware3","GO2 Key and Radio (stream mode)","GoFirmware4","GO2 Live (Sony Ericsson GM28)","GoFirmware5","GO2A Key and Radio (stream mode)","GoFirmware6","GO2A Live (Sony Ericsson GM28)","GoFirmware7","GO2 Lite Live (Sony Ericsson GM28)","GoFirmware8","GO2 Integrated Live (contact support - unsupported firmware version)","GoFirmware9","GO2 J1708 Key and Radio (contact support - custom firmware version)","GoFirmware10","GO2 J1708 Key and Radio (stream mode)","GoFirmware11","GO2 J1708 (contact support - custom firmware version)","GoFirmware12","GO2 J1708 Key and Radio (ack mode)","GoFirmware13","Reserved (contact support — unsupported firmware version)","GoFirmware14","GO2A Key and Radio (ack mode)","GoFirmware15","GO2A Key and Radio (contact support - custom firmware version)","GoFirmware16","GO2 J1708 Live (Sony Ericsson GM28)","GoFirmware17","GO2 J1708 Live (Sony Ericsson GT48)","GoFirmware18","GO2 J1708 Key and Radio (stream)","GoFirmware19","GO2 J1708 External 802.11 (Lantronix)","GoFirmware20","GO2A Live (MultiTech MTCBA)","GoFirmware21","GO2 J1708 Live (MultiTech MTCBA-G)","GoFirmware22","GO2A Integrated Live (Siemens MC55/56)","GoFirmware23","GO2 J1708 (custom firmware - serial upload)","GoFirmware24","GO2A Live (MultiTech MTCBA-GSM)","GoFirmware25","GO2 Lite Live (MultiTech MTCBA-GSM)","GoFirmware26","GO2A Live (MultiTech MTCBA-CDMA)","GoFirmware27","GO2 J1708 Live (MultiTech MTCBA-CDMA)","GoFirmware28","GO2A Live (contact support - custom firmware version)","GoFirmware29","GO2A Lite Live (MultiTech Quad Band MTCBA-G)","GoFirmware30","GO2A Live (MultiTech Quad Band MTCBA-G-F4)","GoFirmware31","GO2A Lite Live (MultiTech Quad Band MTCBA-G-F4)","GoFirmware32","GO3 J1939 Key and Radio (ack mode)","GoFirmware34","GO3 OBD II Key and Wi-Fi","GoFirmware35","GO3 J1939 Key and Wi-Fi","GoFirmware36","GO3 J1708 Key and Radio (ack mode)","GoFirmware37","GO3 J1708 Key and Wi-Fi","GoFirmware38","GO3 GMLAN J1939 Key and Radio (ack mode)","GoFirmware39","GO3 OBD II Key and Radio (ack mode)","GoFirmware40","GO2 Live (MultiTech Quad Band MTCBA-G-F4)","GoFirmware41","GO2 Lite Live (MultiTech Quad Band MTCBA-G-F4)","GoFirmware43","GO2A ZeroSpeedUpload Key and Radio (ack mode)","GoFirmware65","GO4V1 J1939 Live","GoFirmware66","GO4V1 J1708 Live","GoFirmware67","GO4V1 OBD II Live","GoFirmware68","GO4V1 J1939 Key and Radio (ack mode)","GoFirmware69","GO4V1 J1708 Key and Radio (ack mode)","GoFirmware70","GO4V1 OBD II Key and Radio (ack mode)","GoFirmware71","GO4V1 J1939 Wi-Fi","GoFirmware72","GO4V1 J1708 Wi-Fi","GoFirmware73","GO4V1 OBD II Wi-Fi","GoFirmware75","GO4V2 OBD II J1939 Key and Radio (ack mode)","GoFirmware76","GO4V2 OBD II J1939 Wi-Fi","GoFirmware77","GO4V1 GMLAN J1939 Key and Radio (ack mode)","GoFirmware78","GO4V2 OBD II J1939 Key, Ack Mode Radio & Iridium","GoFirmware79","GO4V2 OBD II J1939 Live & Iridium","GoFirmware80","GO4V2 OBD II J1939 Live","GoFirmware81","GO4V3 OBD II J1939 J1708 Live & Iridium","GoFirmware82","GO4V3 OBD II J1939 J1708 Key, Ack Mode Radio & Iridium","GoFirmware83","GO4V3 OBD II J1939 J1708 UPS Live & Iridium","GoFirmware84","GO4V3 OBD II J1939 J1708 UPS Key, Ack Mode Radio & Iridium","GoFirmware85","GO4V3 Live J1708","GoFirmware86","GO4V3 J1708 UPS Key and Radio (ack mode)","GoFirmware87","GO4V3 OBD II J1939 J1708 Live with Sensomatix","GoFirmware92","GO5 Live with Sensomatix","GoFirmware100","GO5 Live","ViewNameAlreadyAssignedMessage","A view with that name already exists.","MultipleSelectMenu","Multiple Selection Menu","EditDevice","Edit device","EditAsset","Edit asset","NavigateToAsset","Navigate to asset","NavigateHere","Navigate here","EditZoneShape","Change zone shape","Square","Square","Circle","Circle","noGroups","No Groups","unspecified","Unspecified","Unsupported","Unsupported","CustomDevice","Third-party device","GoDriveDevice","Drive device","CustomVehicleDevice","Third-party device","OldGeotab","Old Device Version","UntrackedAsset","Untracked Asset","EditMap","Edit map","SendRoute","Send route to vehicle","SendZone","Dispatch vehicle here","EditRoute","Edit route","DispatchAsset","Dispatch asset to location","IndividualEntities","Individual devices or drivers","Date of Installation","Date of Installation","IndividualVehiclesOrDrivers","Individual vehicles or drivers","ConfirmDeleteChildlessGroup","Are you sure you want to delete group '{0}'?","ConfirmRemoval","Confirm removal","NoAddressNotification","Sorry, we can't find the address. Try another location.","ResetStops","Reset stops","ResetStopsNotification","Clear all stops before sending","ClearStatus","Clear this status","Download","Download","DownloadPDF","Download PDF","DownloadExcel","Download Excel file","ViewInBrowser","View in browser","Unspecified","Unspecified","ReportAccessibilityNote","To view the full report, download and open it in PDF or Excel format.","UnsafeContentLoading","Loading potentially unsafe content","UnsafeContentLoadingWarning","This page may contain scripts that can compromise your data. If you don't trust this page, click Cancel and contact your administrator.","ProceedText","Proceed","UnsafeAddInContentLoadingWarning","This page has an Add-In that may contain scripts that can compromise your data. If you don't trust the Add-In, click Cancel and contact your administrator.","CurrentUserGroupsChangeWarning","The group clearances of your account were changed. The page will be reloaded.","AddinRedirectWarning","A Map Add-In is attempting to redirect you to another web site. To protect your data and remain inside the portal, all Map Add-Ins have been blocked.","NoEmailAddressError","To submit your request, please provide a valid email address. If you do not have an email address, please contact Support by telephone or by Live Chat","MultipleOrganizationFoundError","We are having trouble identifying your user credentials. Please contact Support by telephone or by Live Chat to correct the issue.","NoTicketFound","This ticket could not be found.","MissingFirstAndLastName","Please provide a valid first and last name to submit your request.","TicketsNotSupported","Support Services, including training tickets, are not supported for your database.","TicketsNotSupportedForUser","Support Services, including training tickets, are not supported for current user.","NotSavedChagesWarning","Your changes have not been saved. Please refresh the page and try again.","EntityWasRemovedWarning","The {0} has been removed by another user.","EntityWasSetWarning","The {0} has been edited by another user.","EntitiesWasRemovedWarning","The {0} has been removed by another user.","EntitiesWasSetWarning","The {0} has been edited by another user.","CurrentUserSecurityGroupsChangeWarning","The security clearances of your account were changed. The page will be reloaded to reflect this.","EmptyGroupsWarning","Groups cannot be empty.","CodeLengthWarning","Code must be an integer between 0 and 255.","ZeroVehiclesSelected","There are 0 vehicles selected","WorkHolidayNotAvailable","This work holiday is not available","SelectZone","Please select at least one zone","MissingClosingBracket","Open bracket is missing a closing bracket","ClosedBracketMatchingOpen","Closed bracket doesn't have a matching open one","MustHaveValue","must have a value","Recipient","The recipient","Name","Name","ChangeAuthTypeRule","You cannot revert back to MyAdmin authentication after you have changed your authentication preferences. You can switch between SAML and Basic authentication at any time.","ID","ID","Distance","Distance","ETA","ETA","Trip","Trip","Trips","Trips","Day","Day","Week","Week","Month","Month","Wrappers","Wrappers","Logic","Logic","IsDriving","Driving","TripDistance","Trip distance","TripDuration","Trip duration","DVIRDefect","Asset Inspection defect","EVChargeSort","EV Charge","Defect Recorded","Defect Recorded","PreTrip","Pre-trip","InTrip","In-trip","PostTrip","Post-trip","AfterRuleWorkHours","After work hours rule","RuleWorkHours","Work hours rule","AfterDeviceWorkHours","After work hours device","DeviceWorkHours","Device work hours","IsValueMoreThan","Is value more than","IsValueLessThan","Is value less than","IsValueEqualTo","Is value equal to","InvertResult","Invert result","RemoveLabel","Remove","MakeDefault","Set as default","SearchZoneOrAddress","Search zones or addresses","ClickToSet","Click to set","Click to read the notification","Click to read the notification","ToggleDetails","Click to toggle details","HugeAmountOfDataInRequestWarning","You have requested a very large amount of data. Please use the search and filter options to narrow your results.","SelectZoneWarning","Please select a zone.","Reminders","Reminders","Events","Events","ShowOnMap","Show on map","FuelUsed","Fuel used","ZeroSpeed","Zero speed","Enabled","Enabled","scriptErrorWarning","It's likely that one of your browser's plugins threw this error. Disable the plugin and try again.","FuelEconomy","Fuel Economy","EnergyEconomy","Charge Economy","FuelEnergyEconomy","Fuel and Charge Economy","PercentOfFull","{0}% full","ReportForLastDays","Last {0} days","FuelText","Fuel","BatteryText","Battery","ServiceOffline","Service Offline","serviceOfflineWarning","The service is temporarily offline for maintenance. This message will disappear when the maintenance is over.","OldVersion","Old version: {0}","NewVersion","New version: {0}","UpdateReady","Update Ready","ApplicationUpdatedNewVersion","The application has been updated to a new version.","PageReloadUpdateLatestVersion","This page will reload to update to the latest version.","bigPdfDocument","First {0} pages are shown in preview.","wrongNameOfAddinPage","Add-In name can't contain special symbols (like <, >, &, $, %, #, etc)","FileMustBeXls","File must be .xlsx or .xlsm","DatabaseVersionOld","Your database is under maintenance","unsigned","unsigned","WrongPageWarning","You do not have access to this page.","ClickToUseTemplate","Click here to use this template anyway.","DeniedAccessToFS","The file can't be retrieved because it is in use by another program.","DeniedAccessToPopup","Pop-ups are currently disabled in your browser. Pop-ups must be enabled to download reports.","CacheBusyWarning","Web server is busy processing data. Please try again later.","SelectedFilePathLength","The name of the selected file is too long. Rename the file and try again.","PasswordPolicyUpperCaseException","Password policy requires an upper case character.","PasswordPolicyLowerCaseException","Password policy requires a lower case character.","PasswordPolicyNumberException","Password policy requires a numeric character.","PasswordPolicySymbolException","Password policy requires a non-alphanumeric character.","PasswordPolicyMinimumLengthException","Password policy requires a minimum length of {0} characters.","PasswordPolicyNotInCommonListException","Passwords cannot be one of the top 100 popular passwords.","PasswordPolicyContainUserNameException","The password cannot contain the user name.","RemovedEntityWarning","There is no {0} with such ID. Probably, it was removed","DefaultProviderWasChanged","Default map provider was changed","DiagnosticDuplicateException","A diagnostic with this code already exists.","DiagnosticArgumentNullException","Diagnostic must have a controller","InvalidCustomMap","{0} map has invalid options","RelationEntityWarning","This entity has been changed or removed by another user while you were offline. Please reload the page.","DataSourceAndReportSheetMiss","Data or report sheet missing.","ReportDataSourceInExcelAndInArgsAreDifferent","The template type of the Excel file is different from the one that you are editing.","NoFirstRowInDataSheet","No first row in data sheet","NoFirstCellInDataSheet","No first cell in data sheet","NoCommentFieldDataSheet","No comment field in the first cell of data sheet","NoMatchingReportDataSoruce","No matching report data source","ReportDataVersionFormatWrong","The data version format for the report is incorrect.","TooManyRowsInReportTemplate","There are more than 1000 rows in the report sheet. Please reduce the size of the report.","NoReferenceReportSheet","There is no Excel reference between the Data Sheet and the Report Sheet.","EmptyReportHeading","The report heading is empty in the Report Sheet.","EmptyUrl","Web request URL can't be empty","EmptyDistributionList","You have not selected a distribution list","UriFormat","Invalid URL","IELongURLMessage",'Use the "Select All" option to restore filter options after reloading the page',"Add new template","Add new template","{device} broke the rule {rule}","{device} broke the rule {rule}","{device} broke the rule '{rule}'","{device} broke the rule '{rule}'","Default email template","Default email template","Send Rule Name","Send Rule Name","UnknownEmailTemplate","You have selected an unknown email template.","UnknownWebRequest","You've selected an unknown web request template","UnknownTextRequest","You've selected an unknown text template","UnknownTextMessageTemplate","You've selected an unknown text template","Say Rule Name","Say Rule Name","EmptyPopupTemplate","Alert must have a message","Token{0}IsUnknown","Token {0} is unknown.","UndoRouteRemoval","Route {0} was removed","NoResultsFound","No results found.","multipleEditErrorWarning","{0} cannot be changed because of an error: {1}","ClearCacheWarning","You're using an old version of the application. Clear browser's cache and refresh the page.","ClearCacheWarningWithRefresh","You're using an old version of the application.","OldBrowserVersionError","You are using a very old version of your browser. Please update your browser to minimize unexpected errors.","ReportCannotBeOver3MB","The report's size cannot be over 3 MB.","NoFirstRowDataSheet","No first row in data sheet","NoCommentFirstCell","No comment in the first cell of data sheet","NoMatchingReportType","No matching report type","ReportTypeVersionFormatWrong","Report type version format is wrong","MalformedHyperlink","Your report contains a malformed hyperlink","SavedChanges","Your changes have been saved.","Open a Geotab Training Ticket","Open a Geotab Training Ticket","Geotab Training Tickets","Geotab Training Tickets","Open a Geotab Support Ticket","Open a Geotab Support Ticket","Geotab Support Tickets","Geotab Support Tickets","Live Chat with Geotab","Live Chat with Geotab","Contact","Contact","AddinDownloadError","The Add-In cannot be installed. Check your Internet connection or try again later.","AddinErrorWarning","Add-In '{0}' threw an error. Please contact your administrator","AddinFileLoadWarning","This Add-In page cannot be opened because connection to a third party server is forbidden. Please contact Support for assistance.","EntitiesLoaderSearchLimit","Some results cannot be displayed. Search string limit is {0} comma separated items.","NoAccessToGeolocation","Access to geolocation is denied","GeolocationNoSupport","Geolocation is not supported by this browser.","Add-in data","Add-in data","From {address1} to {address2}","From {address1} to {address2}","for {duration}","for {duration}","for {distance}","for {distance}","to {endOfPeriodDateTime}","to {endOfPeriodDateTime}","from {startOfPeriodDateTime}","from {startOfPeriodDateTime}","To {someone}","To {someone}","To: {someone}","To: {someone}","From {someone}","From {someone}","From: {someone}","From: {someone}","at {time}","at {time}","at {address}","at {address}","DriverAndVehicleTooltipName","{0} in {1}","HistoricDriverTooltipName","driven by {0}","TooltipMovingPattern","Driving {0} on {1} at {2}","TooltipStoppedPattern","Stopped for {0}. Arrived on {1} at {2}.","TooltipStoppedPatternWithNoDuration","Stopped. Arrived on {0} at {1}","TooltipMovingPatternWithNoDuration","Driving on {0} at {1}","TooltipNoDataPattern","No communication on {0} at {1}","TooltipStopExceptionPattern","stopped for {0}, arrived on {1} at {2},","TooltipStopExceptionPatternWithNoDuration","stopped, arrived on {0} at {1},","AllExceptionsPattern","{0} at {1}","ExceptionLinePattern","{0} on {1}","NotAllExceptionShown","and {0} more","NoRecentData","No communication for {0}","NoCommunication","No communication","Duration","Duration","SpeedLimit","Speed limit","SpeedLimitAsMeasurement","Roads with speed limit","LiveVehiclesRequestException","Couldn't get log data for {0}","ago","ago","DeviceTripPoi","{0} away","ApproxDeviceTripPoi","approx. {0} away","showVehicleSpeed","Show vehicle speed","ExceptionsGroup","Group of exceptions","Exceptions","Exceptions","Exception","Exception","Violators","Violators","FailedToLoadMap","Failed to load map: {0}. Check your network connection status or try another map provider.","googlev3","Google Maps","osm","MapBox","geo","Custom map tiles (ESRI shapefile required)","here","HERE Maps","Overlayers","Overlayers","BaseLayers","Base layers","ResetToDefaultFilterText","Reset selection","EverythingInFilterText","Everything in {0}","Stop","Stop","AssignStatusGroup","Select status group","mileage","Mileage","ThisGroup","this group","RelationViolationException","There are assets assigned to group '{0}'. Please reassign the assets listed below and try again.","RelationViolationExceptionForUnknownAssets","{0} group cannot be removed because there are assets assigned to it.","GroupHasntBeenRemoved","Group has not been removed","RelationViolationExceptionForLimitedRights","{0} group cannot be removed because you do not have access to the assigned assets: {1}.","LongTermStorageIsNotAvailable","Login requires browser storage capability, which is currently disabled or unsupported by your browser.","LogoutAll","logged off of everywhere","tooManyEventsInLogPointNotification","There are too many events at this location to display. You can view them by clicking the trip, then selecting Show Collision and Log Data from the dropdown menu.","Warning","Warning","Warning:","Warning:","HighlightGroups","Highlight groups","Highlight","Highlight","HighlightAssets","Highlight assets","ByGroup","By group","ByStatus","By status","AddNewHighlightAssets","New highlight","true","true","false","false","True","True","False","False","ShowHelp","Show help","SendFeedback","Send feedback","Notifications","Notifications","Messages","Messages","NumberedOneAlert","You have 1 alert","NumberedMultAlerts","You have {0} alerts","NumberedOneUrgentAlert","You have 1 urgent alert","NumberedOneAdditionalUrgentAlert","You have 1 additional urgent alert","NumberedMultUrgentAlerts","You have {0} urgent alerts.","NumberedMultAdditionalUrgentAlerts","You have {0} additional urgent alerts","BrokeRule","{0} broke the rule '{1}' at {2}","BrokeRuleDriver","{0} ({3}) broke the rule '{1}' at {2}","UrgentNotificationFrom","Urgent notification from","UrgentNotification","Urgent notification","UpgradeDevices","Upgrade your devices now.","Sharpen Your Fleet Management Skills","Sharpen Your Fleet Management Skills","New Company Profile: click here to learn more!","New Company Profile: click here to learn more!","ConfirmEmail","Almost finished... We need to confirm your email address. To complete the subscription process, please click the link in the email we just sent you.","Subscribed","Subscribed","TooManyClicks","Error: Too many subscribe attempts for this email address. Please try again later.","limitedDevicesAmountText","Only {0} devices have been shown. Use the search bar or sort by groups to narrow down the results.","listBuilderLimitedText","There are {0} additional results not displayed. Use the search and/or options to narrow the results.","listBuilderPreLimitedText","There are {0} additional results not displayed from the {1} results. Use the search and/or options to narrow the results.","listBuilderPartlyLimitedText","Some results are not displayed. Use the search and/or options to narrow the results.","NoActivityWarningLabel","No activity. Select different devices or change the date range.","NoDataWarningLabel","There are no conversations for the selected options or date range. Please select different options or change the date range.","DriverLicenseWarning","Driver's license number and License state/province must be set at the same time.","MaxPCLimitPerDayWarning","Maximum personal conveyance limit must be greater than 0.","customExemptHOSNameConflictWarning","The exempted HOS name cannot be blank and must not conflict with an existing HOS status name.","customExemptHOSAbbreviationWarning","The exempted HOS abbreviation cannot be more than four characters and must not conflict with an existing HOS status abbreviation.","CanadaMaxPCLimitPerDayWarning","Maximum personal conveyance limit on Canada ruleset is 75 km.","LicenseStateLengthWarning","Enter an abbreviation for License state/province using only the first two letters.","DriverLicenseDuplicateException","A driver with the same license number already exists in this state/province.","SearchVehicles","Search vehicles","SearchAssets","Search assets...","SearchRules","Search rules","SearchRoute","Search Route","Search","Search","City","City","Region","Region","PostalCode","Postal code","Country","Country","UnknownAddress","Unknown address","itemsOfTypeNotFoundText","Some items of type '{0}' couldn't be found: {1}","Progress","Progress:","typeIsNotSupportedText","'{0}' type is not supported!","DragAndDropFiles","Drop your file here or click to browse your computer","DropFilesHere","Drop file here or click to browse","DropOrSelectFiles","Drop your file here to upload, or browse your computer.","SelectFileUpload","Select a file to upload","UploadingProgress","Uploading progress","Browse","Browse","Size","Size","Zipped","Zipped","ZippedSize","Zipped size","SelectedFoldersWarning","Folders cannot be selected","SelectFilesWarning","There are no files selected for uploading.","SelectedFileSizeTooBig","The size of the selected file is too large. It must be less than {0} MB.","UploadAfterZipping","Your upload will start when zipping is completed.","SelectServersWarning","There are no servers selected for uploading","Server","Server","PleaseWait","Please wait","uploadSuccess","Uploaded","uploadFailed","Upload failed","uploadCanceled","Upload cancelled","CancelUpload","Cancel Upload","Processing","Processing","SelectNewFile","Select a new file","unauthorizedFileTypeMessage","The format of the uploaded file is not supported. Please select a {0} file to attach.","FileContentErrorMessage","The file is corrupted. Select another file and try again.","FileNameWarning","The file name contains illegal characters. Please rename the file.","UploadingFile","Uploading file...","showHistoricalText","Show archived (historical)","hideHistoricalText","Hide archived (historical)","momentAgoText","a moment ago","secondsAgoText","{0} seconds ago","minuteAgoText","a minute ago","minutesAgoText","{0} minutes ago","HourAgoText","an hour ago","HoursAgoText","{0} hours ago","DayAgoText","a day ago","DaysAgoText","{0} days ago","MonthAgoText","a month ago","MonthsAgoText","{0} months ago","YearAgoText","one year ago","YearsAgoText","{0} years ago","TypeMessageText","Type a message here","ShowOptions","Show options","Apply","Apply","NewCannedRepliesPlaceholder","Enter each canned reply on a new line.","Link","Link","ShowLatestAndInProgressTrip","Always show latest trip and current trip in progress","TripInProgress","Trip is currently in progress","DatePickerDatePeriod","Date Period","DatePicker","Date picker","DisplayOptions","Display Options","ApplyChanges","Apply changes","Selected","Selected","All drivers","All Drivers","PleaseSelectDevice","Please select at least one device","PleaseSelectDriver","Please select at least one driver","PleaseSelectTrailer","Please select at least one trailer.","SelectDriver","Select driver","SelectRoute","Select Route","RouteType","Route type","Visible","Visible","NotVisible","Not visible","Loading","Loading...","Calculating...","Calculating...","TripsOptions","Trips Options","MM/dd/yy","MM/dd/yy","dd/MM/yy","dd/MM/yy","d.M.yy","d.M.yy","dd.MM.yy","dd.MM.yy","yy-MM-dd","yy-MM-dd","MM-dd-yy","MM-dd-yy","dd-MM-yy","dd-MM-yy","MMMM dd, yy","MMMM dd, yy","dd MMMM yy","dd MMMM yy","yyyy-MM-dd","yyyy-MM-dd","yyyy MMM dd","yyyy MMM dd","dd MMM yyyy","dd MMM yyyy","MM/dd/yyyy","MM/dd/yyyy","MMM/dd/yy","MMM/dd/yy","MMM/dd/yyyy","MMM/dd/yyyy","MMM/d/yy","MMM/d/yy","dd/MM/yyyy","dd/MM/yyyy","dd/MMM/yy","dd/MMM/yy","d/MMM/yy","d/MMM/yy","dd.MM.yyyy","dd.MM.yyyy","HH:mm:ss","HH:mm:ss","H:mm:ss","H:mm:ss","h:mm:ss tt","h:mm:ss tt","hh:mm:ss tt","hh:mm:ss tt","differentForEachUser","Different for each user","RunBy","View by","HideZeroDistanceRows","Hide zero distance rows","RunReportBy","Run report by","exceptionRules","Exception rules","reminderRule","Reminder rule","IgnoreStopsShorterThan","Ignore stops shorter than","IgnoreStopsLongerThan","Exclude stops over","IgnoreStopsLongerThan:","Exclude stops over:","IncludeHistoricData","Include archived (historical) data","ExcludeStopsZoneTypes","Exclude stops in zone types","AllRules","All rules","AllZoneTypes","All zone types","LogType","Log type","AllSources","All Sources","ReportType","Report type","Details","Details","Summary","Summary","ZoneTypes","Zone Types","ZonesView","View zones by type","ZoneType","Zone type","SelectAllZone","Select all Zones","SelectedZones","Selected zones","ReprocessOptions","Reprocess options","RestoringRouteWithoutZonesWarning","Someone removed all waypoints connected to the route. They can't be restored.","communityData","Community {road speed}","commercialData","Commercial","SpeedDataProvider","Road speed provider","ShowStopsInsideZones","Indicate stops within zone","IncludeUnmatched","Include Unmatched","ZoneTypes:","Zone Types:","ZoneTypeCustomerId","Customer","ZoneTypeOfficeId","Office","ZoneTypeHomeId","Home","OnlyDefective","Only Defective","OnlyRepaired","Only Repaired","OnlyCertified","Only Certified","RepairedAndCertified","Repaired and Certified","ShowMaintenanceHistory","Show completed maintenance","Critical","Critical","exceptionRules:","Exception rules:","RunReportBy:","Run report by:","VehiclesAndAssets","Vehicles & Assets","ExcludeStopsZoneTypes:","Exclude stops in zone types:","ShowTruckSpeedLimit","Show truck speed limit","MaintenanceType","Maintenance type","ReminderName","Reminder Name","ShowSkippedReminders","Show skipped reminders","OtherFilters","Other Filters","ShowHistoricVehicles","Show archived (historical) vehicles","ShowHistoricAssets","Show archived assets","Status:","Status:","HighestDensity","highest density","LowestDensity","lowest density","NotificationTemplateRemoveMessage","Are you sure you want to remove this template with all linked notifications and distribution lists?","HostedMapsDisclaimer","In addition, it is possible to request hosted maps. Please see the {0} for more information.","MaximumDistanceBetweenDevices","Maximum distance between devices:","IncludeSystemMessages","Include system messages","HideRowsZeroDistance","Hide rows with zero distance","AlwaysShowDevicesDrivers","Always show devices or drivers","CountStopsOver","Only count stops over","DueEngineHoursLimit","Due engine hours limit","ReminderRules","Reminder rules","ShowOnlyActive","Show only active","EmailReport","Email report","TypeOfReport","Type of report:","DateRange","Date range","RefreshPeriod","Refresh period:","NextRun","Next run:","ReportForGroups","Belonging to:","GroupingOptions","Grouping options","GroupingLevel","Grouping level","WhoCanSeeReport","Who can see this report:","RedirectReport","Redirect report:","RedirectReportsTo","Redirect to:","WhenSendReport","Redirect when SendReport becomes:","ContinueQuestion","Would you like to continue?","longRunningTitle","Long Running Report","fewMomentsForReport","Your report will take a few moments to prepare.","fewMinutesForReport","Your report will take a few minutes to prepare.","fiveMinutesForReport","Your report will take quite a while to prepare (more than 5 minutes).","tenMinutesForReport","Your report will take quite a while to prepare (more than 10 minutes).","oneMinuteForReport","Your report will take about a minute to prepare.","DateRange:","Date range:","ReportDataConfiguration","Report data configuration","Load 100 more rows","Load 100 more rows","Import Excel report","Import Excel report","maintenanceType","Maintenance type","EraseCurrentDate","Erase the current date","CloseWithoutChange","Close without changes","Prev","Prev","Next","Next","ShowPreviousMonth","Show the previous month","ShowNextMonth","Show the next month","ShowCurrentMonth","Show the current month","ShowDifferentMonth","Show a different month","ShowDifferentYear","Show a different year","WeekYear","Week of the year","SelectDate","Select a date","DayStatus","Set DD as the first day of the week","Now","Now","Done","Done","AllDone","All Done","ChooseTime","Choose time","Ready","Ready","Open","Open","Resize","Resize","IncidentCount","Incident Count","Occurrences","Occurrences","TryingToReachServer","Trying to reach the server...","FailedToReachServerNTimes","Failed to reach the server {0} times consecutively","SelectMonth","Select month","SelectYear","Select year","SelectHour","Select hour","SelectMinute","Select minute","SelectSecond","Select second","SelectTimezone","Select timezone","OriginalSize","Reset to original size","NextMonthNav","Go to next month","PrevMonthNav","Go to previous month","ShowAllCharging","Show all charging (inside and outside zones)","SelectZonesAndZoneTypes","Select zones and zone types","ZonesAndZoneTypes","Zones and zone types","DeselectAllZones","Deselect all zones","SelectAllZoneTypes","Select all zone types","DeselectAllZoneTypes","Deselect all zone types","SearchHOSDrivers","Search HOS drivers","ViewLogs","View logs","IncludeSystemLogs","Include system logs","IncludeIntermediateLogs","Include intermediate logs","Workday","Workday","On-duty","On-duty","Driving","Driving","AnnotationWeatherConditions","Adverse driving conditions","AnnotationExemptionOffDutyDeferral","Off-duty deferral exemption","DayOne","Day one","DayTwo","Day two","DeferralDuration","{0} minutes deferred","AnnotationExemption","16-hour exemption","AnnotationIgnoredHosLog","This log has been ignored: {0}","Authority","Authority","AuthorityChanged","Authority changed from '{0}' to '{1}'.","EnginePowerup","Engine power up","EngineShutdown","Engine shutdown","EnginePowerupPC","PC Engine power up","EngineShutdownPC","PC Engine shutdown","PowerCompliance","Power compliance","EngineSyncCompliance","Engine sync compliance","TimingCompliance","Timing compliance","PositioningCompliance","Positioning compliance","DataRecordingCompliance","Data recording compliance","DataTransferCompliance","Data transfer compliance","OtherCompliance","Other compliance","MissingElementCompliance","Missing data compliance","UnidentifiedDrivingCompliance","Unidentified driving compliance","CanadaCycleOne","Canadian cycle set to Cycle 1","CanadaCycleTwo","Canadian cycle set to Cycle 2","OperatingZoneCanadaSouthOf60","Operating zone set to South of 60 in Canada","OperatingZoneCanadaNorthOf60","Operating zone set to North of 60 in Canada","OperatingZoneAmerica","Operating zone set to United States","InvalidRuleset","Invalid Ruleset","HourCycleOnDutyLimit","{0}-hour cycle on-duty limit","HourRestLimit","{0}-hour rest limit","HourDrivingLimit","{0}-hour driving limit","HourOnDutyLimit","{0}-hour on-duty limit","HourWorkdayLimit","{0}-hour workday limit","LimitNotRequiredCycle","Cycle limit not required","LimitNotRequiredRest","Rest limit not required","LimitNotRequiredDrive","Drive limit not required","LimitNotRequiredOn-duty","On-duty limit not required","LimitNotRequiredWorkday","Workday limit not required","HourCycleOnDutyLimitViolation","Maximum {0} hour(s) on duty in {1} days violation","HourCycleDrivingLimitViolation","Exceeded driving limit in {0} days violation","HourDutySinceCycleRestViolation","Maximum {0} hour(s) on-duty since {1}-hour consecutive off-duty","CycleRestViolation","Driving without {0} period(s) of {1}-hour consecutive off-duty in the preceding {2} days.","DutySinceCycleRestViolation","Maximum {0} hour(s) on-duty since cycle rest violation.","HourRestLimitViolation","Driving after more than {0}-hour rest limit violation","HourDrivingLimitViolation","Maximum {0}-hour driving limit violation","HourOnDutyLimitViolation","Maximum {0}-hour on-duty limit violation","HourWorkdayLimitViolation","Maximum {0}-hour workday limit violation","HourDailyRestLimitViolation","Minimum {0}-hour rest per day violation","HourDailyOffLimitViolation","Minimum {0}-hour off-duty per day violation","HourDailyDrivingLimitViolation","Maximum {0} hour(s) driving per day violation","HourDailyOnDutyLimitViolation","Maximum {0} hour(s) on-duty per day violation","AustraliaWorkViolationHours","Work time violation. Exceeded the Work limit for the period of {0} hours.","AustraliaWorkViolationDays","Work time violation. Exceeded the Work limit for the period of {0} days.","AustraliaRestViolationHours","Rest violation. Insufficient Rest for the period of {0} hours.","AustraliaRestViolationDays","Rest violation. Insufficient Rest for the period of {0} days.","AustraliaWorkExemptionViolation","Work Exemption violation","dateTimeInYourTimezone","{0} in your time zone","AddHOSLog","Add HOS Log","HOSLogEdit","HOS Log Edit","Codriver","Co-driver","Connected","Power connected","Disconnected","Power disconnected","Send","Send","Webservices","Web Services","TransferEldComment","Comments and/or Officer code:","Transfer","Transfer","EmailEntry","Enter an email address:","ChangedRuleSetAnnotation","Ruleset changed to {0} on {1}","ChangedRuleSetAnnotationCustomStartOfDay","Ruleset changed to {0} (start of day: {2}) on {1}","RuleSetValidationError","You cannot switch to this ruleset until you complete a cycle reset for the previous {0} ruleset.","StartOfDayValidationError","You cannot change the start of day for this ruleset until you complete a cycle reset.","Verified","Verified","Unverified","Unverified","Edited","Edited","Violation","Violation","Personal Conveyance","Personal Conveyance","Yard move","Yard move","Available tomorrow","Available tomorrow","Cycle Available Tomorrow","Cycle Available Tomorrow","WorkExemption","Work Exemption","HosEnabled","HOS enabled","HosDisabled","HOS disabled","Rested","Rested","NextRest","Next rest in","WorkHoursLeft","Work hours left","WorkHoursLeftIn","Work hours left in {0}","HrsPeriod","{0}h period","DaysPeriod","{0} day period","DaysConsecutive","{0} consecutive","Australia","Australia","BaseTime","Base time","EndDateEwd","Ends {0}","BreakTime","{0} break","SecurityAboutCheckmate","View About page","SecurityAccidentDebugReport","Log data and collisions report","SecurityAccidentWizard","Create or download collision keys","SecurityAddInReports","View Add-In Reports","SecurityAuditLog","View the audit log","SecurityAuxiliaryReport","Auxiliary report","SecurityChangePassword","Change your own password","SecurityCheck","Security Check","SecurityCongregationReport","Congregation report","SecurityCreateExtractKey","Create data extract key","SecurityCreateFirmwareKey","Create firmware upgrade key","SecurityCreateKeyBackup","Create key backup","SecurityCreateProgrammingKey","Create programming key","SecurityCreateTestKey","Create test key","SecurityCreateWifiKey","Create Wi-Fi setup key","SecurityCustomerVisitsReport","Zone visits report","SecurityDeleteGpsTextMessage","Delete messages","SecurityDemonstrationMode","Switch to demonstration mode","SecurityDeviceAdmin","Administer devices","SecurityDeviceAdminDeleteUnplugReplace","Administer devices (delete/unplug/replace)","SecurityDeviceAdminAdvanced","Administer the device's advanced settings","SecurityDeviceAdminDriverFeedback","Administer device's driver feedback settings","SecurityDeviceInstallHistoryReport","Install history report","SecurityDeviceList","List devices","SecurityDeviceStatus","View device status on the home page","SecurityDisplayMap","Display the map and show live tracking","SecurityDriverBlacklist","Manage list of blocked drivers","SecurityEditDeviceOdometer","Administer vehicle odometer","SecurityEditDistributionList","Administer distribution lists","SecurityEditException","Administer exception rules","SecurityEditNotificationEmailTemplate","Edit notification template","SecurityEngineDiagnosticList","View engine diagnostics","SecurityEngineFailureModeList","View engine failure modes","SecurityEngineFlashCodelist","View flash codes","SecurityEngineManagementReport","View engine management report","SecurityEngineStatusDataGraph","Engine status data graph","SecurityEngineTypeList","View engine types","SecurityEngineUnitOfMeasureList","View engine units of measurement","SecurityExceptionsList","View exception rules","SecurityExceptionsReport","View exceptions","SecurityExportFromOtherDatabase","Export database","SecurityFuelTax","Fuel Tax Report (IFTA)","SecurityFuelTransactionList","View fill-ups, EV charging, and fuel transactions","SecurityFuelTransactionAdmin","Administer fuel transactions","SecurityFuelUsageReport","Fuel and EV energy usage report","SecurityImportFromOtherDatabase","Import database","SecurityImportZones","Import zones from Excel file","SecurityInternetSettings","Configure Internet settings (enable/disable proxy server)","SecurityKeyInformation","Assign driver","SecurityLaunchAddIn","Launch custom reports or Add-Ins","SecurityManageHOSLogs","Administer HOS Logs","SecurityManageReportTemplates","Manage custom reports","SecurityMaterialManagementReport","View Material Management reports","SecurityRouteCompletionReport","View Route Completion reports","SecurityMessageInbox","View Message Inbox","SecurityMileageSummaryDashboard","View dashboard","SecurityNodesList","Administer groups and security clearances","SecurityNotificationList","View notifications","SecurityOrganizeViews","Configure map views","SecurityPrepareDisconnectedUpload","Prepare uploads at disconnected site","SecurityPurgeData","Purge archived (historical) data from the database","SecurityRadioDownloaderList","Administer radio downloaders","SecurityReadKeyInformation","Read key information","SecurityReminderReport","View reminders","SecurityReminderRuleList","Administer reminders","SecurityEventOccurrenceList","Manage maintenance events","SecurityReprocessData","Reprocess exceptions data","SecurityRequestDeviceLocation","Request device location via Iridium satellite network","SecurityRestoreKeyBackup","Restore key backup","SecurityRiskManagementReport","Risk management report","SecurityRouteComparisonReport","Planned vs. actual route report","SecurityRouteList","Administer routes","SecurityRouteSummaryReport","Route summary report","SecuritySecurityClearanceList","View security clearances","SecuritySendExternalRelayInstruction","Send external relay instruction","SecuritySendGpsTextMessage","Send messages","SecuritySendMessage","Send a message to a device","SecurityStartFullVersion","Start full version","SecurityServicesSettings","Configure services (enable/disable service, configure downloaders)","SecuritySpeedProfileReport","Speed profile report","SecuritySystemHealthMonitoring","View system health notifications","SecuritySystemSettings","Change system settings","SecurityTimeCardReport","Time card report","SecurityTrackHistoricData","Track all archived (historical) data on map","SecurityTripsActivityReport","Trips and activity report","SecurityUnassignedRouteReport","Unmatched route report","SecurityUserList","List Users/Drivers","SecurityUserAdmin","Administer Users/Drivers","SecurityUserSettings","Change your own user options","SecurityViewGpsTextMessage","View messages","SecurityViewHOSLogs","View HOS Logs","SecurityViewReportTemplate","View custom reports","SecurityWorkHolidayList","Administer work hours and work holidays","SecurityWorkTimeList","View work hours","SecurityZoneAdmin","Administer zones","SecurityZoneList","View zones","SecurityZoneTypeList","Administer zone types","SecurityViewDVIRLogs","View Asset Inspection logs","SecurityManageDVIRLogs","Administer Asset Inspection logs","SecurityRepairDVIR","Mark Asset Inspection logs as repaired","SecurityCertifyDVIR","Mark Asset Inspection logs as certified","SecurityInspectDVIR","Perform Asset Inspections","SecurityViewTrailers","View trailers","SecurityManageTrailers","Administer trailers","SecurityViewAdvancedHelp","View advanced help items","SecurityViewBusinessIntelligence","View business intelligence data","SecurityEditRoadSpeeds","Update posted road speeds","SecurityViewMarketplacePaidItems","View paid items in the Marketplace","SecurityPurchaseMarketplacePaidItems","Purchase paid items in the Marketplace","SecurityViewCertificates","View certificates","SecurityManageCertificates","Administer certificates","SecurityViewBinaryData","View binary data","SecurityManageAddInData","Manage Add-In data","SecurityViewAddInData","View Add-In data","SecurityAccelerometerDataClearance","View accelerometer features","SecurityAuxiliaryClearance","View auxiliary features","SecurityDeviceCurrentStatusClearance","View device status information","SecurityDriverIdentificationClearance","View driver identification features","SecurityEngineStatusDataClearance","View engine measurement related features","SecurityFeaturePreviewClearance","Administer feature preview","SecurityGoTalkClearance","View GO TALK features","SecurityManageAddinsClearance","Administer Add-Ins","SecurityNewsNotificationsClearance","Administer news notification settings","SecurityProductGuideClearance","View Product Guide","SecurityResellerControlClearance","Administer Reseller access settings","SecurityServicePlansClearance","View device service plans","SecurityActiveTrackingClearance","Administer Active Tracking feature","SecurityStatusGroupsClearance","Administer Garmin status groups","SecurityEditTripTypeChangeData","Put vehicles into Personal Mode and Business Mode","SecurityViewTripTypeChangeData","View changes to trip types","SecurityDirectSupportAdmin","Administer support and training tickets","SecurityViewGroups","View groups","SecurityAdministerWiFiHotspotSettings","Administer Wi-Fi hotspot settings","SecurityViewWiFiHotspotSettings","View Wi-Fi hotspot settings","SecurityViewMedia","View media files","SecurityViewBinaryDataFiles","View binary data files","SecurityViewActiveInsights","View Active Insights","SecurityViewAnalyticsLab","View Analytics Lab experiments","SecurityManageMedia","Administer media files","SecurityManageBinaryDataFiles","Administer binary data files","SecurityInstallRecord","View and accept device installation records","SecurityEditDeviceShare","Administer device share","SecurityViewDeviceShare","View device share","SecurityEditUserDeviceLink","Administer user device link","SecurityViewUserDeviceLink","View user device link","SecurityViewShareableLink","View shareable link","SecurityCreateShareableLink","Create shareable link","SecurityDeleteShareableLink","Delete shareable link","SecurityViewSharedDevice","View shared device","SecurityIgnoreHOSLogs","Ignore HOS logs","SecurityViewGroupFilter","View group filters","SecurityModifyGroupFilter","Manage group filters","SecurityManageDriverActivityGroup","Manage driver activity group","SecurityAdministerPropertySet","Administer Property Sets","SecurityViewPropertySet","View Property Sets","SecurityAdministerProperty","Administer Properties","SecurityViewProperty","View Properties","SecurityExceptionEventReviewer","Administer Exception Event review","SecurityExceptionEventReviewParticipant","Participate in Exception Event review","SecurityResetPassword","Reset other users' passwords","ViewAddinClearance",'View "{0}" add-in',"RunForWorkTimes","View work hours for","Unknown","Unknown","Admin","Admin","AssignDriver","Assign driver","Dispatch","Dispatch","RequestCurrentLocation","Request current location","ShowCollisionLogData","Show Log Data and Collisions","AssignStatusGroups","Assign status groups","ShowSpeedProfile","Show speed profile","SendTextMessage","Send text message","SearchDriver","Search for a driver","SearchDrivers","Search for drivers","ShowOnlyDriversViolation","Show only drivers in violation","DefaultDriverForVehicle","Default for this vehicle:","NotFound","Not Found","UploadingInterrupted","The file upload was interrupted. Please try again.","NameCannotBeEmpty","The name cannot be empty.","TypeAndPressAdd","Type here and press Add when done...","TypeHereOrSelectAnItem","Type here or select item","DistributionList","Distribution list","RemoveDistributionList?","Remove distribution list?","DistributionListWillBeDeleted","This distribution list will be permanently deleted and will not be recoverable.","DistributionListNameCannotStartWithSymbol@","Name of distribution list cannot start with symbol '@'","EditDistributionList","Edit distribution list","DistributionListNotFound","Distribution list doesn't exist","UnsavedChangesWarning","You have unsaved changes that will be lost if you continue. Are you sure you want to leave this page?","ProtectRawDataWarning","This feature has been temporarily disabled to preserve data integrity. For more information about this limitation and to find out when full service will be restored, please contact support.","DuplicateRecipient","This recipient is already in your list.","RemoveRecipient","Remove recipient","ThereAreNotAnyRecipientsYet","There are no notifications set up for this exception rule.","Save and go","Save and go","GoWithoutSaving","Proceed without saving","Adding","Adding","Editing","Editing","Support","Support","SelectAssetWatermark","Select asset","SelectRuleWatermark","Select rule","SelectTypeWatermark","Select type","SelectCurrencyWatermark","Select currency","UnplannedMaintenance","Unplanned maintenance","AddMaintenanceTypePrompt","Enter a maintenance type name","MaintenanceTypeNamePlaceholder","Maintenance type name","AddType","Add type","Defects","Defects","Certification","Certification","Comments","Comments","Inspection Type","Inspection Type","Asset Name","Asset Name","Asset Type","Asset Type","Date & Time","Date & Time","AddMaintenanceType","Add Maintenance Type","BlankMaintenanceTypeNameError","Please enter a maintenance type name.","MaintenanceTypeNameTooLongError","Maintenance type names cannot be longer than 50 characters.","DuplicateMaintenanceTypeError","This maintenance type already exists. Please choose a unique name for your new maintenance type.","MaintenanceReminder","Maintenance Reminder","NorthAmerica","North America","Odometer","Odometer","Hubometer","Hubometer","AddMaintenance","Add maintenance","EventTypeOilChangeId","Oil change","EventTypeTireRotationId","Tire rotation","EventTypeLeaseExpiryId","Lease expiry","EventTypeLicensePlateExpiryId","License expiry","ReloadNow","Reload the page","LanguageChangedReload","Another user changed your language to {0}. You need to reload the page for the change to take effect.","SwitchLanguageBack","Switch back to {0}","ExperimentalSettingsChangedReload","Your experimental settings have changed. {LINK} for the settings to take effect.","RequestDetails","The user of {0} would like to extend telematics services to you. Click below to view details and to accept or reject the request.","DataStreamDetails","View extended services","SerialNumberExist","A device with this serial number already exists.","SuccessfullyAccepted","You have successfully accepted extended services from {0}. To terminate this service, contact your Reseller.","Reject","Reject","ReviewLater","Review later","IncomingData","You have an incoming extended services request from {0}.","EnterDescription","Please enter the vehicle description and click Accept to extend the services to your database. If you do not wish to accept this request, click Reject.","DescriptionName","Description/Name:","SubscriptionPlan","Subscription plan:","DatabaseName","Database name","RequsetAttention","Note: Upon accepting the request, you will be charged for this service based on your Rate Plan with your Reseller. If you have any questions about accepting extended services, contact the sender of the request.","DeviceSharePlanExcludingLocationAndSpeed","{plan} - excluding location and speed","DeviceSharePlanExcludingLocation","{plan} - excluding location","NewDataStreamTitle","New extended services","AutoRejectExistingSingleDeviceShare","The user of {0} attempted to extend a service to you that already exist in your database. The request has been rejected.","AutoRejectExistingMultipleDeviceShare","The user of {0} attempted to extend multiple services to you that already exist in your database. The request has been rejected.","AlreadySharesSingleDeviceError","This device is already shared with {0}.","AlreadySharesMultipleDeviceError","Some devices are already shared with {0}.","DatabseDoesNotExistShareError","The database {0} does not exist. Please check the name and try again.","CannotBeSharedSingleError","This device cannot be shared.","CannotBeSharedMultipleError","Some devices cannot be shared.","SingleDuplicateDeviceShareError","This device is already shared with {0}.","MultipleDuplicateDeviceShareError","Some devices are already shared with {0}.","NoSerialNumberOnSingleShareError","The serial number provided is not associated with any device.","NoSerialNumberOnMultipleShareError","Some serial numbers provided are not associated with any device.","DeviceShareWithCurrDbError","You cannot share devices with the same database where they were created.","CancelPendingOutgoingShareError","You can only cancel pending outgoing device shares.","TerminateDeviceShareError","You can only terminate active incoming device shares.","UpdateDeviceSharePlanError","You can only update device plans for pending outgoing device shares.","AcceptOrDeclineIncomingShareOnlyError","Only pending, incoming extended services can be accepted or declined.","AddinsInstalled","Add-Ins have been successfully installed.","AddinInstalled","{0} has been successfully installed.","AddinIn1LevelMenuInstalled","{0} has been successfully installed. It can be accessed from the main menu.","AddinInDeepLevelMenuInstalled","{0} has been successfully installed. It can be accessed from {1}.","CustomButtonInstalled","{0} custom button has been added to the {1} page.","CustomButtonsInstalled","Custom buttons have been added to the following pages: {1}.","MultipleAddinInstalled","Multiple Add-Ins have been installed.","AddinRemoved","{0} has been uninstalled.","MultipleAddinsRemoved","Multiple Add-Ins have been uninstalled.","RegionalSettingsChanged","Regional settings have changed","ExperimentalSettingsChanged","Experimental settings have changed","ReloadPageToTakeEffect","Do you want to reload the page now?","AndMore","and {0} more","WorkTimeNotFound","Work time was not found","ConnectionNotReliable","Connection to the server is not reliable","Reconnecting1","Trying to reach the server...","Reconnecting2","Still trying to reach the server...","Reconnecting3","No success so far, but we're still trying to connect...","Reconnected","Whew! We're back online","noAddress","No address has been provided.","CustomerDuration","Customer Duration","NonCustomerDuration","Non-Customer Duration","startWorkingDayFrom","Start from","RuleHarshBrakingId","Harsh Braking","RuleJackrabbitStartsId","Hard Acceleration","RuleHarshCorneringId","Harsh Cornering","RulePostedSpeedingId","Speeding","RuleSeatbeltId","Seat belt","RuleAfterHoursUsageId","After Hours Usage","RuleAccidentId","Possible Collision","RuleIdlingId","Idling","RuleLateArrivalId","Late Arrival","RuleEarlyLeaveId","Early Leave","RuleUnauthorizedHomeStopId","Unauthorized Home Stops","RuleAtOfficeLongerThanId","Too Much Office Time","RuleLongLunchId","Long Lunch","RuleLongStopsDuringWorkHoursId","Long Stops During Work Hours","RuleEngineLightOnId","Engine Light On","RuleAlternatorFailedId","Battery Drain","RuleUnauthorizedDeviceRemovalId","Unauthorized Device Removal","RuleEngineAbuseId","Engine Abuse","RuleFleetIdlingId","Fleet Idling","RuleReverseAtStartId","Backing Up When Leaving","RuleApplicationExceptionId","Application Exception","RuleEngineFaultExceptionId","Engine Fault Exception","RuleLightsLeftOnId","Battery Drain","RuleDVIRPostTripMissingId","Post-Trip Asset Inspection Missing","RuleDVIRPreTripMissingId","Pre-Trip Asset Inspection Missing","RuleFMCSAELDYardMoveExemptionId","Yard Move Exemption","RuleVehicleMovementWithinZonesId","Vehicle movement within zones","RuleMaterialManagementSolidApplicationId","Solid Application","RuleMaterialManagementPreWetApplicationId","Pre-wet Application","RuleMaterialManagementLiquidApplicationId","Liquid Application","RuleMaterialManagementDeadheadId","Deadhead","RuleMaterialManagementPlowActiveId","Plow Active","RuleMaterialManagementUnloadId","Unloading Material","RuleDvirDefectId","Defect Recorded","RuleEVDoneChargingId","EV Done Charging","RuleEVEnterChargingZoneWithLowChargeId","EV Enters Charging Zone with Low Charge","RuleEVExitChargingZoneWithLowChargeId","EV Exits Charging Zone with Low Charge","RuleEVLowChargeId","EV Low Charge","Product Guide","Product Guide","humanize_now","Just moments ago","humanize_mm","A minute_minutes","humanize_hh","An hour_hours","humanize_dd","A day_days","humanize_past","{d} ago","UserHosRuleSetSet","Edit user HOS ruleset","UserHosRuleSetInsert","Add user HOS ruleset","UserHosRuleSetRemove","Remove user HOS ruleset","hos_ruleSetLabel","Hours of Service Ruleset","hos_origin_Automatic","Automatic system log","hos_origin_Manual","Manual driver log","hos_origin_OtherUser","Other authenticated user","hos_origin_Unassigned","Unassigned driver log","ruleSetCustomStartOfDay","{0} (start of day: {1})","ruleSetChangedTo","Ruleset changed to {0}","ruleSetChangedToCustomStartOfDay","Ruleset changed to {0} (start of day: {1})","LoginAnnotation","Assigned to {0}","LogoffAnnotation","Unassigned from {0}","No Ruleset (7-day cycle)","No Ruleset (7-day cycle)","No Ruleset (8-day cycle)","No Ruleset (8-day cycle)","No Ruleset (Canada)","No Ruleset (Canada)","Washington Intrastate Logging/Dumptruck 80-hour/7-day","Washington Intrastate Logging/Dumptruck 80-hour/7-day","Washington Intrastate Logging/Dumptruck 90-hour/8-day","Washington Intrastate Logging/Dumptruck 90-hour/8-day","USA Property 60-hour/7-day","USA Property 60-hour/7-day","USA Property 60-hour/7-day without rest requirement","USA Property 60-hour/7-day without rest requirement","USA Property 60-hour/7-day (16-hour exemption)","USA Property 60-hour/7-day (16-hour exemption)","USA Property 60-hour/7-day (16-hour exemption) without rest requirement","USA Property 60-hour/7-day (16-hour exemption) without rest requirement","USA Property 70-hour/8-day","USA Property 70-hour/8-day","USA Property 70-hour/8-day without rest requirement","USA Property 70-hour/8-day without rest requirement","USA Property 70-hour/8-day (16-hour exemption)","USA Property 70-hour/8-day (16-hour exemption)","USA Property 70-hour/8-day (16-hour exemption) without rest requirement","USA Property 70-hour/8-day (16-hour exemption) without rest requirement","USA Property Short-haul 60-hour/7-day","USA Property Short-haul 60-hour/7-day","USA Property Short-haul 70-hour/8-day","USA Property Short-haul 70-hour/8-day","USA Property Short-haul 60-hour/7-day 12hr Workday","USA Property Short-haul 60-hour/7-day 12hr Workday","USA Property Short-haul 70-hour/8-day 14hr Workday","USA Property Short-haul 70-hour/8-day 14hr Workday","USA Passenger Short-haul 60-hour/7-day","USA Passenger Short-haul 60-hour/7-day","USA Passenger Short-haul 70-hour/8-day","USA Passenger Short-haul 70-hour/8-day","USA Passenger 60-hour/7-day","USA Passenger 60-hour/7-day","USA Passenger 70-hour/8-day","USA Passenger 70-hour/8-day","USA Salesperson","USA Salesperson","USA Salesperson Non-CDL Short Haul","USA Salesperson Non-CDL Short Haul","Canada South of 60 7-Day Cycle 1","Canada South of 60 7-Day Cycle 1","Canada South of 60 14-Day Cycle 2","Canada South of 60 14-Day Cycle 2","Canada South of 60 7-Day Cycle 1 Team","Canada South of 60 7-Day Cycle 1 Team","Canada South of 60 14-Day Cycle 2 Team","Canada South of 60 14-Day Cycle 2 Team","Canada North of 60 7-Day Cycle 1","Canada North of 60 7-Day Cycle 1","Canada North of 60 14-Day Cycle 2","Canada North of 60 14-Day Cycle 2","Canada South of 60 Oil Permit","Canada South of 60 Oil Permit","Canada North of 60 Oil Permit","Canada North of 60 Oil Permit","Canada South of 60 Oil Permit Team","Canada South of 60 Oil Permit Team","Canada North of 60 Oil Permit Team","Canada North of 60 Oil Permit Team","California Property Intrastate","California Property Intrastate","California Oil Well Property Intrastate","California Oil Well Property Intrastate","California Oil Transport Property Intrastate","California Oil Transport Property Intrastate","California Oil Well Property Intrastate with rest requirement","California Oil Well Property Intrastate with rest requirement","California Oil Transport Property Intrastate with rest requirement","California Oil Transport Property Intrastate with rest requirement","California Passenger Intrastate","California Passenger Intrastate","California Flammable Liquid","California Flammable Liquid","California Flammable Liquid with rest requirement","California Flammable Liquid with rest requirement","California School Pupil","California School Pupil","California School Pupil with rest requirement","California School Pupil with rest requirement","California Farm Product","California Farm Product","California Farm Product with rest requirement","California Farm Product with rest requirement","Texas Intrastate","Texas Intrastate","Texas Short-haul 60-hour/7-day Intrastate","Texas Short-haul 60-hour/7-day Intrastate","Texas Short-haul 70-hour/8-day Intrastate","Texas Short-haul 70-hour/8-day Intrastate","USA Florida 70-hour/7-Day","USA Florida 70-hour/7-Day","USA Florida 80-hour/8-Day","USA Florida 80-hour/8-Day","USA Florida Short-haul 70-hour/7-Day","USA Florida Short-haul 70-hour/7-Day","USA Florida Short-haul 80-hour/8-Day","USA Florida Short-haul 80-hour/8-Day","USA Property 60-hour/7-day without 34-hour restart","USA Property 60-hour/7-day without 34-hour restart","USA Property 70-hour/8-day without 34-hour restart","USA Property 70-hour/8-day without 34-hour restart","USA Property Short-haul 60-hour/7-day without 34-hour restart","USA Property Short-haul 60-hour/7-day without 34-hour restart","USA Property Short-haul 70-hour/8-day without 34-hour restart","USA Property Short-haul 70-hour/8-day without 34-hour restart","Brazil Property Short-haul","Brazil Property Short-haul","USA Property 60-hour/7-day 24-hour restart","USA Property 60-hour/7-day 24-hour restart","USA Property 60-hour/7-day 24-hour restart (16-hour exemption)","USA Property 60-hour/7-day 24-hour restart (16-hour exemption)","USA Property 70-hour/8-day 24-hour restart","USA Property 70-hour/8-day 24-hour restart","USA Property 70-hour/8-day 24-hour restart (16-hour exemption)","USA Property 70-hour/8-day 24-hour restart (16-hour exemption)","USA Property Short-haul 60-hour/7-day 24-hour restart","USA Property Short-haul 60-hour/7-day 24-hour restart","USA Property Short-haul 70-hour/8-day 24-hour restart","USA Property Short-haul 70-hour/8-day 24-hour restart","USA Property Short-haul 60-hour/7-day 12hr Workday 24-hour restart","USA Property Short-haul 60-hour/7-day 12hr Workday 24-hour restart","USA Property Short-haul 70-hour/8-day 14hr Workday 24-hour restart","USA Property Short-haul 70-hour/8-day 14hr Workday 24-hour restart","USA Oil Well 60-hour/7-day","USA Oil Well 60-hour/7-day","USA Oil Well 60-hour/7-day (16-hour exemption)","USA Oil Well 60-hour/7-day (16-hour exemption)","USA Oil Well 70-hour/8-day","USA Oil Well 70-hour/8-day","USA Oil Well 70-hour/8-day (16-hour exemption)","USA Oil Well 70-hour/8-day (16-hour exemption)","USA Oil Transport 60-hour/7-day without rest requirement","USA Oil Transport 60-hour/7-day without rest requirement","USA Oil Transport 60-hour/7-day (16-hour exemption) without rest requirement","USA Oil Transport 60-hour/7-day (16-hour exemption) without rest requirement","USA Oil Transport 70-hour/8-day without rest requirement","USA Oil Transport 70-hour/8-day without rest requirement","USA Oil Transport 70-hour/8-day (16-hour exemption) without rest requirement","USA Oil Transport 70-hour/8-day (16-hour exemption) without rest requirement","USA Oil Well 60-hour/7-day without rest requirement","USA Oil Well 60-hour/7-day without rest requirement","USA Oil Well 60-hour/7-day (16-hour exemption) without rest requirement","USA Oil Well 60-hour/7-day (16-hour exemption) without rest requirement","USA Oil Well 70-hour/8-day without rest requirement","USA Oil Well 70-hour/8-day without rest requirement","USA Oil Well 70-hour/8-day (16-hour exemption) without rest requirement","USA Oil Well 70-hour/8-day (16-hour exemption) without rest requirement","USA Texas Oil Transport 70-hour/7-day","USA Texas Oil Transport 70-hour/7-day","USA Texas Oil Well 70-hour/7-day","USA Texas Oil Well 70-hour/7-day","Carrier Exemption","Carrier Exemption","Non-CDL short-haul 60-hour/7-day","Non-CDL Short-haul 60-hour/7-day","Non-CDL short-haul 70-hour/8-day","Non-CDL Short-haul 70-hour/8-day","North Dakota 70-hour/7-day","North Dakota 70-hour/7-day","South Carolina 70-hour/7-day","South Carolina 70-hour/7-day","South Carolina 80-hour/8-day","South Carolina 80-hour/8-day","Maryland Short Haul 70-hour/7-day","Maryland Short Haul 70-hour/7-day","Maryland Short Haul 80-hour/8-day","Maryland Short Haul 80-hour/8-day","North Dakota Short Haul 70-hour/7-day","North Dakota Short Haul 70-hour/7-day","Alaska Passenger 70-hour/7-day","Alaska Passenger 70-hour/7-day","Alaska Passenger 80-hour/8-day","Alaska Passenger 80-hour/8-day","Alaska Property 70-hour/7-day","Alaska Property 70-hour/7-day","Alaska Property 80-hour/8-day","Alaska Property 80-hour/8-day","Nebraska 70-hour/7-day","Nebraska 70-hour/7-day","Nebraska 80-hour/8-day","Nebraska 80-hour/8-day","California Property Intrastate with rest requirement","California Property Intrastate with rest requirement","Oregon 70-hour/7-day","Oregon 70-hour/7-day","Oregon 80-hour/8-day","Oregon 80-hour/8-day","Australia Standard Hours Solo with Exemption Hours","Australia Standard Hours Solo with Exemption Hours","LPer100km","L/100 km","kmPerL","km/L","MPGUS","MPG (US)","MPGImp","MPG (Imp)","Metric","Metric","USImperial","US/Imperial","LitersEPer100Km","L-e/100 km","KmPerLitersE","km/L-e","KiloWhPer100Km","kWh/100 km","WhPerKm","Wh/km","KmPerKiloWh","km/kWh","MPGEUS","MPG-e (US)","MPGEImperial","MPG-e (Imp.)","KiloWhPer100Miles","kWh/100 mi","WhPerMile","Wh/mi","MilePerKiloWh","mi/kWh","KmPerGallon","km/gallon","GallonPer100Km","gal/100km","KiloWhPerKm","kWh/km","KiloWhPerMile","kWh/mi","NotSupported","Not supported","NoDataInSearchRange","Try searching by month","DiagnosticFuelLevelId","Fuel level","DiagnosticFuelUnitsId","Fuel level (volume)","DiagnosticDeviceTotalFuelId","Total fuel used","ThirdPartyAux4","Third-party aux 4","ThirdPartyAux5","Third-party aux 5","ThirdPartyAux6","Third-party aux 6","ThirdPartyAux7","Third-party aux 7","ThirdPartyAux8","Third-party aux 8","Aux1","Aux 1","Aux2","Aux 2","Aux3","Aux 3","Aux4","Aux 4","Aux5","Aux 5","Aux6","Aux 6","Aux7","Aux 7","Aux8","Aux 8","BeAtLeastCharacters","Be at least {0} characters","HaveLowerCaseLetter","Have at least one lower case letter","HaveUpperCaseLetter","Have at least one upper case letter","HaveNumber","Have at least one number","HaveSpecialSymbol","Have at least one special symbol ($, @, etc.)","NotPopularPasswordsMember","Not be included in the top 100 popular passwords","NotUserName","Must not contain the user name","PasswordMust","Password must:","PasswordIsNotSuitable","New password is not suitable under the password policy.","Database","Database","DeviceComments","Device Comments","DeviceGroups","Device Groups","EvBatteryCharge","EV Battery Charge %","EvChargeState","EV Charging State","DeviceId","Device ID","DeviceWithDriverName","Device With Driver Name","DiagnosticCode","Diagnostic code","DriverComment","Driver Comment","DriverName","Driver Name","DriverFirstName","Driver First Name","DriverGroups","Driver Groups","DriverLastName","Driver Last Name","Timezone","Timezone","Latitude","Latitude","Longitude","Longitude","ZoneComment","Zone Comment","ZoneId","Zone ID","NonFuel","Non-Fuel","Regular","Regular","Midgrade","Mid-Grade","Premium","Premium","Super","Super","Diesel","Diesel","E85","E85","CNG","CNG","LPG","LPG","UserView","View users","UserRemove","Remove user","UserSet","Edit user","UserInsert","Add user","DeviceView","View devices","DeviceRemove","Remove device","DeviceInsert","Add device","DeviceSet","Edit device","{0} does not have a route assigned.","{0} does not have a route assigned.","ZoneView","View zones","ZoneRemove","Remove zone","ZoneInsert","Add zone","ZoneInsertSimple","Add square zone here","ZoneSet","Edit zone","ZoneEdit","Zone Edit","ZoneTypeView","View zone type","ZoneTypeRemove","Remove zone type","ZoneTypeInsert","Add zone type","ZoneTypeSet","Edit the zone type","RouteView","View routes","RouteRemove","Remove route","RouteInsert","Add route","RouteSet","Edit route","InvalidName","Name is invalid in column ({column})","ZoneNotFound","Zone not found for Segment in column ({column})","MultipleZonesFound","Multiple zones exist with Segment name from column ({column})","SameZoneName","Segment name duplicated in column ({column})","InvalidPassCount","Invalid pass count in column ({column})","ServerUpgrade","Upgrade server","DatabaseUpgrade","Upgrade database","DatabaseMigrate","Migrate database","ExportDatabase","Export database","ImportDatabase","Import database","SysSetCompanyGUID","Edit company GUID","SysSettingsSetAll","Edit system settings","EventRemove","Remove event","EventInsert","Add event","EventSet","Edit event","EventRuleRemove","Remove event rule","EventRuleInsert","Add event rule","EventRuleSet","Edit event rule","EventRuleView","View event rules","EventTypeRemove","Remove event type","EventTypeInsert","Add event type","EventTypeSet","Edit event type","ExceptionRuleView","View exception rules","ExceptionRuleRemove","Remove exception rule","ExceptionRuleInsert","Add exception rule","ExceptionRuleSet","Edit exception rule","DistributionListView","View distribution lists","DistributionListRemove","Remove distribution list","DistributionListInsert","Add distribution list","DistributionListSet","Edit distribution list","UomRemove","Remove unit of measurement","UomInsert","Add unit of measurement","UomSet","Edit unit of measurement","DiagnosticView","View diagnostics","DiagnosticRemove","Remove diagnostic","DiagnosticInsert","Add diagnostic","DiagnosticSet","Edit diagnostic","FailureModeView","View failure modes","FailureModeRemove","Remove failure mode","FailureModeInsert","Add failure mode","FailureModeSet","Edit the failure mode","WorkTimesView","View work hours","WorkTimesRemove","Remove work hours","WorkTimesInsert","Add work hours","WorkTimesSet","Edit work hours","WorkHolidaysView","View work holidays","WorkHolidaysRemove","Remove work holidays","WorkHolidaysInsert","Add work holiday","WorkHolidaysSet","Edit work holiday","EngineTypeView","View engine types","EngineTypeRemove","Remove engine type","EngineTypeInsert","Add engine type","EngineTypeSet","Edit the engine type","FlashCodeRemove","Remove flash code","FlashCodeInsert","Add flash code","FlashCodeSet","Edit flash code","ShowHistoricVehicle","Show archived (historical) vehicle:","HistoricDeviceRemove","Remove archived (historical) device","HistoricDeviceInsert","Add archived (historical) device","HistoricDeviceSet","Edit archived (historical) device","HistoricDeviceMakeHistoric","Archived device (made historical)","HistoricDeviceUnMakeHistoric","Replaced archived (historical) device","ProcessManualUpdate","Reprocess data","ReportZoneVisitsDetail","Report: Zone Visit Details","ReportZoneVisitsSummary","Report: Zone Visit Summary","ReportCongregation","Report: Congregation","ReportAuxiliary","Report: Auxiliary Status","ReportStatusData","Report: Status Data","ReportFuelTax","Report: Fuel Tax","ReportExceptionsDetail","Report: Exceptions Detail","ReportExceptionsSummary","Report: Exceptions Summary","ReportDebug","Report: Log Data and Collisions","ReportDevice","Report: Device","ReportDiagnosticList","Report: Diagnostic List","ReportRouteSummary","Report: Route Summary","ReportRiskManagement","Report: Risk Management","ReportSpeedProfile","Report: Speed Profile","ReportUnassignedRoute","Report: Unmatched Route","ReportUserList","Report: User List","ReportTripsDetail","Report: Trips Detail","ReportTripsSummary","Report: Trips Summary","ReportTimeCard","Report: Time Card","ReportReminders","Report: Reminders","ReportEventOccurrences","Report: Maintenance History","ReportRouteComparisonDetail","Report: Route Comparison Detail","ReportRouteDirection","Report: Route Direction","ReportEngineFault","Report: Engine Faults","ReportEngineStatus","Report: Engine Status","ReportEngineStatusStatistics","Report: Engine Status Statistics","ReportChargeEvent","Report: EV Charging","ReportEngineSummary","Report: Engine Summary","ReportEventHistory","Report: Event History","ReportEventRuleDevice","Report: Device Event Rules","ReportDeviceInstallHistory","Report: Device Installation History","ReportGroupsList","Report: Groups List","ReportHosLogs","Report: HOS Logs","ReportHosViolation","Report: HOS Violation","ReportHosAvailability","Report: HOS Availability","ReportDVIRLog","Report: Asset Inspection Logs","ReportAuditLog","Report: Audit Logs","ReportTextMessage","Report: Text Message","ReportNotification","Report: Notification","ReportFillUps","Report: Fill-Ups","ReportExceptionsSummaryGraph","Report: Exceptions Summary Graph","ReportTripsIdlingSummaryGraph","Report: Trips Idling Summary Graph","ReportFleetSummaryGraph","Report: Fleet Summary Graph","ReportCustomerStopGraph","Report: Customer Stop Graph","ReportTripsDensitySummaryGraph","Report: Trips Density Summary Graph","ReportZoneList","Report: Zone List","EventRules","Report: Event Rules","ReportRouteCompletion","Route Completion Report","MaterialManagement","Material Management","CustomReportScheduleInsert","Add notification for report","CustomReportScheduleSet","Edit notification for report","CustomReportScheduleRemove","Remove notification for report","CustomReportSendError","Report not sent","ShowMap","Show map","ExcelReportView","View Excel reports","ExcelReportRemove","Removed Excel report","ExcelReportEdit","Edited Excel report","ExcelReportInsert","Add Excel report","KeyCreate","Create key","KeyBackup","Saved key backup","KeyRestore","Restore key","KeyDataDownload","Download key data","UserLogin","User login","UserLogoff","User logout","UserLoginFailure","User failed login attempt","UserLockout","User locked out","UserUnlocked","User login reset","RequestLocation","Request device location","ResetPassword","Reset password","SetPassword","Set Password","AcceptSupportService","Accept support services","GpsTextMessageSend","Send message","GpsTextMessageDelete","Delete message","GpsTextMessageView","View messages","NotificationView","View notifications","NotificationsDismiss","Dismiss notifications","SecurityGroupView","View security groups","NodeView","View groups","NodeRemove","Remove group","NodeSet","Edit group","NodeInsert","Add group","HosLogEdit","Edit HOS log","HosLogAdd","Add HOS log","HosLogRemove","Remove HOS log","ExceptionEventAttachmentAdd","Add exception event attachment","ExceptionEventAttachmentRemove","Remove exception event attachment","ExceptionEventCommentAdd","Add exception event comment","ExceptionEventEdit","Edit exception event","TripAnnotationInsert","Add trip annotation","TripAnnotationSet","Edit trip annotation","TripAnnotationRemove","Remove trip annotation","DisplayMeasurementProfileInsert","Add display measurement profile","DisplayMeasurementProfileRemove","Remove display measurement profile","DisplayMeasurementProfileSet","Edit display measurement profile","DisplayMeasurementProfileDetailInsert","Add display measurement profile detail","DisplayMeasurementProfileDetailRemove","Remove display measurement profile detail","DisplayMeasurementProfileDetailSet","Edit display measurement profile detail","UserDisplayProfileInsert","Add user display profile","UserDisplayProfileRemove","Remove user display profile","UserDisplayProfileSet","Edit user display profile","DeviceDataPrivacyChangeInsert","Add device data privacy change","DeleteDatabase","Delete database","TrailerView","View trailers","TrailerRemove","Remove trailer","TrailerSet","Edit trailer","TrailerInsert","Add trailer","TrailerAttachmentInsert","Add trailer attachment","TrailerAttachmentSet","Edit trailer attachment","TrailerAttachmentRemove","Remove trailer attachment","SupportTicketInsert","Add support ticket","TrainingTicketInsert","Add training ticket","SupportTicketSet","Edit support ticket","TrainingTicketSet","Edit training ticket","ShipmentLogInsert","Add shipment log","ShipmentLogSet","Edit shipment log","ShipmentLogRemove","Remove shipment log","DvirLogRemove","Remove Asset Inspection log","DvirLogSet","Edit Asset Inspection log","DvirLogAdd","Add Asset Inspection log","ChangeAsset","Change asset","ChangeDriver","Change driver","ChangeDefects","Change defects","DefectGroupView","View defects","ChangeCertifiedBy","Change certified by","DriveLockUserCleared","Drive lock screen cleared by user","DvirDefectTypeNormal","Minor","DvirDefectTypeCritical","Major","DvirDefectTypeUnregulated","Unregulated","DvirDefectTypeNormalAbbr","N{DvirDefectTypeAbbr}","DvirDefectTypeCriticalAbbr","C{DvirDefectTypeAbbr}","DvirDefectTypeUnregulatedAbbr","U{DvirDefectTypeAbbr}","ELDDataTransfer","ELD data transfer","StatusDataInsert","Add status data","StatusDataSet","Edit status data","NotificationTemplateView","View notification templates","NotificationTemplateRemove","Remove notification templates","NotificationTemplateSet","Edit notification templates","NotificationTemplateInsert","Add notification templates","FuelTransactionView","View fill-ups","FuelTransactionRemove","Remove fuel transaction","FuelTransactionInsert","Add fuel transaction","FuelTransactionSet","Edit fuel transaction","FuelTransactionImport","Import fuel transaction","FillUpsGraph","View fill-ups graph","CertificateInsert","Add certificate","CertificateRemove","Remove certificate","CertificateSet","Edit certificate","TripTypeChangeInsert","Add trip type change","TripTypeChangeRemove","Remove trip type change","HardwarePurchase","Purchase hardware","MediaFileView","View media file","MediaFileRemove","Remove media file","MediaFileInsert","Add media file","MediaFileSet","Edit media file","MediaFileUpload","Upload media file","BinaryDataFileView","View binary data files","BinaryDataFileRemove","Remove binary data file","BinaryDataFileInsert","Add binary data file","BinaryDataFileSet","Edit binary data file","BinaryDataFileUpload","Upload binary data file","WiFiView","View Wi-Fi","WiFiRemove","Remove Wi-Fi","WiFiSet","Edit Wi-Fi","WiFiInsert","Add Wi-Fi","UserSupportInsert","Add user support contact","UserSupportRemove","Remove user support contact","OverTheAirUpdate","Over-the-air update","SkipHosVerify","Skip workflow: HOS log verification","SkipHosClaimUnassigned","Skip workflow: unassigned HOS log claim","SkipDvirInspect","Skip workflow: Asset Inspection","ButtonAddinLoadingError","The button Add-In '{0}' could not be loaded.","ShowWeather","Show weather","Thunderstorm","thunderstorm","ThunderstormLightRain","thunderstorm with light rain","ThunderstormRain","thunderstorm with rain","ThunderstormHeavyRain","thunderstorm with heavy rain","ThunderstormLight","light thunderstorm","ThunderstormHeavy","heavy thunderstorm","ThunderstormRagged","ragged thunderstorm","ThunderstormLightDizzle","thunderstorm with light drizzle","ThunderstormDizzle","thunderstorm with drizzle","ThunderstormHeavyDizzle","thunderstorm with heavy drizzle","Drizzle","drizzle","DrizzleLight","light intensity drizzle","DrizzleHeavy","heavy intensity drizzle","DrizzleLightRain","light intensity drizzle rain","DrizzleRain","drizzle rain","DrizzleHeavyRain","heavy intensity drizzle rain","DrizzleShowerRain","shower rain and drizzle","DrizzleHeavyShowerRain","heavy shower rain and drizzle","DrizzleShower","shower drizzle","RainLight","light rain","RainModerate","moderate rain","RainHeavy","heavy intensity rain","RainVeryHeavy","very heavy rain","RainExtreme","extreme rain","RainFreezing","freezing rain","RainLightShower","light intensity shower rain","RainShower","shower rain","RainHeavyShower","heavy intensity shower rain","RainRaggedShower","ragged shower rain","Snow","snow","SnowLight","light snow","SnowHeavy","heavy snow","SnowSleet","sleet","SnowShowerSleet","shower sleet","SnowLightRainAndSnow","light rain and snow","SnowRainAndSnow","rain and snow","SnowLightShower","light shower snow","SnowShower","shower snow","SnowHeavyShower","heavy shower snow","AtmosphereMist","mist","AtmosphereSmoke","smoke","AtmosphereHaze","haze","AtmosphereSandDustWhirls","sand, dust whirls","AtmosphereFog","fog","AtmosphereSand","sand","AtmosphereDust","dust","AtmosphereVolcanicAsh","volcanic ash","AtmosphereSqualls","squalls","AtmosphereTornado","tornado","ClearSky","clear sky","CloudsFew","few clouds","CloudsScattered","scattered clouds","CloudsBroken","broken clouds","CloudsOvercast","overcast clouds","ExtremeTornado","tornado","ExtremeTropicalStorm","tropical storm","ExtremeHurricane","hurricane","ExtremeCold","cold","ExtremeHot","hot","ExtremeWindy","windy","ExtremeHail","hail","AdditionalCalm","calm","AdditionalLightBreeze","light breeze","AdditionalGentleBreeze","gentle breeze","AdditionalModerateBreeze","moderate breeze","AdditionalFreshBreeze","fresh breeze","AdditionalStrongBreeze","strong breeze","AdditionalHighWind","high wind, near gale","AdditionalGale","gale","AdditionalSevereGale","severe gale","AdditionalStorm","storm","AdditionalViolentStorm","violent storm","AdditionalHurricane","hurricane","Map View","Map View","Change to miles","Change to miles","Change to km","Change to km","Choose view","Choose view","Zoom out","Zoom out","Zoom in","Zoom in","Invalidname","Name is invalid in column ({column})","Invalidpoints","Points are invalid in column ({column})","Invalidaddress","Address is invalid in column ({column})","Invalidlat","Latitude is invalid in column ({column})","Invalidlng","Longitude is invalid in column ({column})","AndOthers","... and {count} more.","Invalidpolygon","Polygon requires three or more points.","PDF","PDF","Excel","Excel","Purge","Purge","DriverChangeInsert","Assign driver","DriverChangeRemove","Remove driver","PostedRoadSpeedSet","Set posted road speed","RadioDownloaderView","View radio downloaders","MiscPageView","View custom page","AboutView","View about","CreditsView","View credits","DashboardView","View dashboard","KeyInsert","Insert key","PasswordResetRequest","Password Reset Request","dashboard","Dashboard","map","Map","devices","Devices","device","Device","riskmanagement","Risk management","timecardreport","Time card report","logdetails","Log details","hoslogs","HOS logs","hoslog","HOS log","hosviolations","HOS violations","hosavailability","HOS availability","fuelusage","Fuel usage","fuelevents","Fuel events","fuelevent","Fuel event","dvirs","DVIRs","dvir","Asset Inspection","reminderdue","Reminder due","maintenancehistory","Maintenance history","reminderrules","Reminder rules","reminderrule","Reminder rule","zones","Zones","zone","Zone","zonevisits","Zone visits","routes","Routes","route","Route","rules","Rules","rule","Rule","exceptions","Exceptions","groupstree","Groups","customreports","Custom reports","customreport","Custom report","users","Users","user","User","auditlogs","Audit logs","notifications","Notifications","systemsettings","System settings","options","Options","tripshistory","Trips history","tripssummary","Trips summary","enginefaults","Engine faults","faultdetails","Fault details","enginemeasurements","Engine measurements","assetMonitoring","Asset Monitoring","MMRouteSelectorPlaceholder","Select route groups/routes...","materialManagement","Material Management","SelectRuleHelp","Select route completion service rule(s).","RouteCompletion","Route Completion","SearchRule","Search rule","serviceRule:","Service rule:","serviceRule","Service Rule","RCRuleSelectPlaceholder","Select rule...","PleaseSelectRule","Please select one rule.","SearchGroups","Search group","SearchRoutes","Search routes","RouteGroupsRoutes","Route groups or routes","ServiceGroup","Service group","ServiceGroup:","Service group:","PleaseSelectGroup","Please select one group.","SelectServiceGroups","Select service groups","DeviceShareViewed","View device share","DeviceShareInsert","Add device share","DeviceShareSet","Edit device share","DeviceShareRemove","Remove device share","ReprocessRequestInsert","Add reprocess request","ReprocessRequestSet","Edit reprocess request","ReprocessRequestRemove","Remove reprocess request","DeviceReprocessRequestInsert","Add device reprocess request","DeviceReprocessRequestRemove","Remove device reprocess request","DeviceReprocessRequestSet","Edit device reprocess request","InstallationDate","Installation date","InstallationStatus","Installation status","VehicleName","Vehicle name","InstallerName","Installer name","ServicePerformed","Service performed","InstallerCompany","Installer company","WorkReference","Work reference","MakeAndModel","Make and model","Harness","Harness","IOX","IOX","HarnessComment","Harness comment","AuxiliaryPorts","Auxiliary ports","LastDeviceCommunication","Last device communication","LastValidGpsRecord","Last valid GPS record","LastValidEngineRecord","Last valid engine record","SimActive","SIM active","EngineProtocol","Engine protocol","PossibleIssues","Possible issues","ResultComment","Result comments","InstallerComment","Installer comments","Photo1","Installation Photo 1","Photo2","Installation Photo 2","Photo3","Installation Photo 3","Photo4","Installation Photo 4","First0Results","First {0} Results","No status","No status","Pass","Pass","Fail","Fail","InstallationPhotos","Installation Photos","RequestReplacement","Replacement Request","Success","Success! {MessageText}","SecurityManageTripAnnotation","Administer trip annotations","SecurityViewTripAnnotation","View trip annotations","mapLegend","Map Legend","MaintenanceNotificationRuleRemove","Remove maintenance notification rule","MaintenanceNotificationRuleInsert","Insert maintenance notification rule","MaintenanceNotificationRuleSet","Update maintenance notification rule","MaintenanceNotificationRuleView","View maintenance notification rule"]})(geotab,geotab.commonjs.generateRequire("geotab/localizerStrings"),geotab.commonjs.generateExport("geotab/localizerStrings"));
(function(n,require,t){"use strict";function l(){return document?document.body:{}}function f(n,t){for(var r=t.split(" "),i=0;i<r.length;i++)r[i]&&ot(n,r[i])}function b(n,t){for(var r=t.split(" "),i=0;i<r.length;i++)r[i]&&st(n,r[i])}function ct(){return document.createDocumentFragment()}function lt(n,t,i){i===!1||typeof i!="boolean"&&v(n,t)?b(n,t):f(n,t)}function k(n,t){for(var r=Object.keys(t),i=0;i<r.length;++i)n.style[r[i]]=t[r[i]]}function e(n,t,i){var f=ht(n),r,u;if(t)for(u=Object.keys(t),r=0;r<u.length;++r)(w[u[r]]||w.default)(f,u[r],t[u[r]]);return i&&k(f,i),f}function at(n){for(var t=n.parentNode,i=l();t&&t!==i;)t=t.parentNode;return!!t}function vt(n){var r=[],t=document.createElement("DIV"),i;if(n)for(t.innerHTML=n,i=t.children.length;i;)r.push(t.removeChild(t.children[0])),i--;return r}function d(n){return i(n,"none")}function g(n){return r(n)!=="none"}function yt(n,t){t===!1||typeof t!="boolean"&&g(n)?d(n):p(n)}function nt(n,t,i){n.style.display=i?t:"none"}function pt(n,t){nt(n,"block",t)}function wt(n,t){t===void 0&&(t=!0);n&&(t?n.setAttribute("disabled","disabled"):n.removeAttribute("disabled"))}function bt(n,i){var r=n,u=r&&(r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector);return u?t.closestByCondition(r,function(n){return u.bind(n)(i)},document.body)||null:null}function kt(n){for(var t=n.lastChild;t;)n.removeChild(t),t=n.lastChild}function dt(n,t,i){var r=et()?{passive:!0,capture:!1}:!1;return n.addEventListener(t,i,r),function(){n.removeEventListener(t,i,r)}}function s(n,t){var i=document.createElementNS(a,"use");return i.setAttributeNS(ut,"href","#geo-"+n),t&&(i.className.baseVal=t),i}function gt(n,t,i){return h(n,t,i)}function ni(n,t,i){return h(n,(t||"")+" geotabButtonIcons",i)}function ti(n,t,i){i===void 0&&(i=!0);var r=e("svg",{"class":(i?"svgIcon geotabButtonIcons ":"")+(t?t:""),focusable:"false"});return n.reduce(function(n,t){return n.appendChild(s(t.icon,t.className)),n},r)}function ii(n,t){var i=t||{screenX:0,screenY:0,clientX:0,clientY:0},r;return typeof MouseEvent=="function"?r=new window.MouseEvent("click",{screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:n,detail:0,view:window,bubbles:!0,cancelable:!0}):(r=document.createEvent("MouseEvents"),r.initMouseEvent("click",!0,!0,window,0,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,n)),n.dispatchEvent(r)}var c,o,tt,h,it,rt;Object.defineProperty(t,"__esModule",{value:!0});t.getPageScrollingElement=t.sendClick=t.insertElementAfter=t.createMultipleIcons=t.createIcon=t.createPureIcon=t.createUse=t.addPassiveListener=t.empty=t.closestByCondition=t.closest=t.toggleDisable=t.toggleBlock=t.toggleDisplay=t.toggle=t.isVisible=t.hide=t.changeDisplay=t.show=t.extend=t.textToHTML=t.isElementInDOM=t.create=t.css=t.toggleClasses=t.createDocumentFragment=t.removeClasses=t.hasClass=t.addClasses=void 0;c=require("../utils");var a="http://www.w3.org/2000/svg",ut="http://www.w3.org/1999/xlink",ft={path:!0,circle:!0,svg:!0,use:!0,rect:!0,text:!0},et=c.memOnce(function(){var n=document.createElement("DIV"),t=!1,i=function(){},r=Object.defineProperty({},"passive",{get:function(){t=!0}});try{n.addEventListener("wheel",i,r);n.removeEventListener("wheel",i,r)}catch(u){}return t}),u=function(n){var t=typeof n.className=="string"?n:n.className,i=typeof n.className=="string"?"className":"baseVal";return{get:function(){return t[i]},set:function(n){t[i]=n}}},v=function(n,t){return n&&u(n).get().indexOf(t)!==-1},ot=function(n,t){if(n.classList)n.classList.add(t);else{var i=u(n);i.get().indexOf(t)<0&&i.set(i.get()+(i.get()?" ":"")+t)}},st=function(n,t){if(n.classList)n.classList.remove(t);else{for(var f=u(n),r=f.get().split(" "),i=0;i<r.length;i++)if(t===r[i]){r.splice(i,1);break}f.set(r.join(" "))}},y=function(n){return Object.prototype.toString.call(n).indexOf("Object")!==-1},ht=function(n){return ft.hasOwnProperty(n.toLowerCase())?document.createElementNS(a,n):document.createElement(n)},i=function(n,t){return n.style.display=t,n},r=function(n){if(n.currentStyle)return n.currentStyle.display;if(window.getComputedStyle){var t=window.getComputedStyle(n);return t.getPropertyValue("display")}return undefined},p=function(n){var f=l(),e,t,u;return r(n)!=="none"&&n.style.display!=="none"?n:(i(n,""),r(n)==="none"&&(e=n.nodeName,t=document.createElement(e),f.appendChild(t),u=r(t),u==="none"&&(u="block"),f.removeChild(t),i(n,u)),n)},w={"class":function(n,t,i){f(n,i)},value:function(n,t,i){n.value=i},"default":function(n,t,i){n.setAttribute(t,i)}};t.hasClass=v;t.changeDisplay=i;t.show=p;t.addClasses=f;t.removeClasses=b;t.createDocumentFragment=ct;t.toggleClasses=lt;t.css=k;t.create=e;t.isElementInDOM=at;t.textToHTML=vt;o=function(){for(var u=[],e=0;e<arguments.length;e++)u[e]=arguments[e];var l=u.length,s,t,f,c=!1,r,i=u[0],h=1,n;for(typeof i=="boolean"&&(c=i,i=u[1],h++);h!==l;){for(s=u[h],t=Object.keys(s),n=0;n<t.length;n++)f=s[t[n]],c&&(y(f)||Array.isArray(f))?(r=i[t[n]],r=i[t[n]]=y(r)||Array.isArray(r)?r:Array.isArray(f)?[]:{},o(c,r,f)):i[t[n]]=s[t[n]];h++}return i};t.extend=o;t.hide=d;t.isVisible=g;t.toggle=yt;t.toggleDisplay=nt;t.toggleBlock=pt;t.toggleDisable=wt;t.closest=bt;tt=function(n,t,i){for(var r=n;r&&r!==i;){if(t(r))return r;r=r.parentNode}return undefined};t.closestByCondition=tt;t.empty=kt;t.addPassiveListener=dt;t.createUse=s;h=function(n,t,i){var r=e("svg",{"class":"geo-icon "+(t?t:"")});return i&&r.setAttribute("focusable",i),r.appendChild(s(n)),r};t.createPureIcon=gt;t.createIcon=ni;t.createMultipleIcons=ti;it=function(n,t,i){var r,u;if(i===undefined){if(r=t.firstChild,r){t.insertBefore(n,r);return}t.appendChild(n);return}if(t===i.parentElement){if(u=i.nextElementSibling||undefined,u!==undefined){t.insertBefore(n,u);return}t.appendChild(n)}};t.insertElementAfter=it;t.sendClick=ii;rt=function(){return document.querySelector("#checkmateContent")||window};t.getPageScrollingElement=rt})(geotab,geotab.commonjs.generateRequire("geotab/vanillaExtension/vanilla"),geotab.commonjs.generateExport("geotab/vanillaExtension/vanilla"));
(function(n,require,t){"use strict";function l(n){var u=0,i=n.match(v),t,r;if(i)for(t=1;t<i.length;t++)r=i[t],r&&(u+=+r*c[t-1]);return u}function p(n){return typeof n=="object"&&n.hasOwnProperty("getAllDays")&&n.hasOwnProperty("add")&&n.hasOwnProperty("getAllMilliseconds")&&n.hasOwnProperty("isEmpty")}function a(n){return!n||n==="00:00:00"||n==="00:00:00.000"||n.getAllMilliseconds&&n.getAllMilliseconds()===0}function i(n){var l=n?o(n):0,v=function(n){return function(){var i=t(n)(),r=h[n];return r!==1?i%r:i}},t=function(n){return function(){var t=l<0?-1:1,i=Math.abs(l);return t*Math.floor(i/(c[n]||1))}},p;return p={isEmpty:function(){return a(this)},toString:function(n){return y(this,!!n)},getMilliseconds:v(r),getSeconds:v(u),getMinutes:v(f),getHours:v(e),getDays:v(s),getAllMilliseconds:t(r),getAllSeconds:t(u),getAllMinutes:t(f),getAllHours:t(e),getAllDays:t(s),add:function(n){return i(this.getAllMilliseconds()+o(n))},negate:function(){return i(-l)},isNegative:function(){return l<0},substract:function(n){return i(n).negate().add(p)},addToDate:function(n){var t=new Date(n.getTime());return t.setMilliseconds(t.getMilliseconds()+l),t},valueOf:function(){return this.getAllMilliseconds()}}}Object.defineProperty(t,"__esModule",{value:!0});t.isEmpty=t.isTimespan=t.toAllMilliseconds=void 0;var v=/(\d+\.)?(\d{2}):(\d{2}):(\d{2})\.?(\d{3})?/,r=4,u=r-1,f=u-1,e=f-1,s=e-1,h=[1,24,60,60,1e3],c=h.concat(1).reverse().reduce(function(n,t,i){return n.unshift((n[n.length-i]||1)*t),n},[]).slice(1),y=function(n,t){var f=n.isNegative()?"-":"",r=Math.abs(n.getDays()),u=(r?r.toString()+".":"")+[n.getHours(),n.getMinutes(),n.getSeconds()].map(function(n){return(n<10?"0":"")+Math.abs(n).toString()}).join(":"),i;return t||(i="00"+Math.abs(n.getMilliseconds()),i=i.slice(i.length-3),u+="."+i),f+u},o=function(n){switch(typeof n){case"string":return l(n);case"object":return n.hasOwnProperty("getAllMilliseconds")?n.getAllMilliseconds():o(n.toString());case"number":return n;default:return 0}};t.toAllMilliseconds=l;t.isTimespan=p;t.isEmpty=a;t.default=i})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/timespan"),geotab.commonjs.generateExport("geotab/checkmate/timespan"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ePromise=void 0;var i=function(n){var u="pending",f="fulfilled",t=u,e,r=[],s=function(n){return function(i){if(t===u)if(n===f&&c(i))i.then(h,o);else if(e=i,t=n,r)for(var s=0;s<r.length;s++)l(r[s])}},h=s(f),o=s("rejected"),c=function(n){return n&&typeof n.then=="function"},l=function(n){if(t===u)r.push(n);else{var o=void 0,i=void 0,h=t===f,s=!1;h?o=n.onResolved:(o=n.onRejected,s=!o);try{i=o?o(e):e}catch(l){i=l;s=!0}c(i)?i.then(function(t){return n.resolve(t),t},function(t){return n.reject(t),t}):s?n.reject(i):n.resolve(i)}},a=function(n,t){return i(function(i,r){window.setTimeout(function(){l({onResolved:n||null,onRejected:t||null,resolve:i,reject:r})},1)})},v=function(n){return a(null,n)};if(typeof n=="function")try{n(h,o)}catch(y){o(y)}else throw new TypeError("Promise resolver "+n+" is not a function");return{"catch":v,then:a}};t.ePromise=i;i.resolve=function(n){return i(function(t){t(n)})};i.reject=function(n){return i(function(t,i){i(n)})};i.all=function(n){return i(function(t,r){var f=0,u=[],e=!1,s=function(n){return n&&typeof n.then=="function"?n:i.resolve(n)},o=n.length;o?n.map(s).forEach(function(n,i){u[i]=undefined;n.then(function(n){e||(f++,u[i]=n,f===o&&t(u))},function(n){f++;r(n);e=!0})}):t(u)})};i.race=function(n){return i(function(t,i){n.forEach(function(n){n.then(function(n){t(n)},function(n){i(n)})})})}})(geotab,geotab.commonjs.generateRequire("geotab/promisePolyfill"),geotab.commonjs.generateExport("geotab/promisePolyfill"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=require("./promisePolyfill"),u=require("./utils"),i=u.getGlobalObj();i.geotab=i.geotab||{};i.Promise?(n.promise=function(n){return new Promise(n)},n.promise.all=function(n){return Promise.all(n)},n.promise.race=function(n){return Promise.race(n)},n.promise.resolve=function(n){return Promise.resolve(n)},n.promise.reject=function(n){return Promise.reject(n)}):n.promise=r.ePromise;Object.freeze(n.promise);t.default=n.promise})(geotab,geotab.commonjs.generateRequire("geotab/promise"),geotab.commonjs.generateExport("geotab/promise"));
(function(n,require,t){"use strict";var i=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),r,u,f,e,o,s,h;Object.defineProperty(t,"__esModule",{value:!0});t.AuthenticationError=t.ResetPasswordError=t.TimeoutException=t.NotSevereError=t.NotSupported=t.AbortException=t.CustomException=void 0;r=function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.isHandled=!1,t}return i(t,n),t}(Error);t.CustomException=r;u=function(n){function t(){var t=n.call(this,"Aborted.")||this;return t.isAborted=!0,t}return i(t,n),t}(Error);t.AbortException=u;f=function(n){function t(t){var i=n.call(this,t+" not supported")||this;return i.isNotSupported=!0,i}return i(t,n),t}(r);t.NotSupported=f;e=function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.isSevere=!1,t}return i(t,n),t}(r);t.NotSevereError=e;o=function(n){function t(t){var i=n.call(this,(t||"Operation")+" is failed due to timeout")||this;return i.isTimeout=!0,i}return i(t,n),t}(r);t.TimeoutException=o;s=function(n){function t(){var t=n.call(this,"Reset password is required")||this;return t.isResetPassword=!0,t.isAuthenticationRequiredException=!0,t}return i(t,n),t}(Error);t.ResetPasswordError=s;h=function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.isAuthenticationException=!0,t}return i(t,n),t}(Error);t.AuthenticationError=h})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/exceptions/commonExceptions"),geotab.commonjs.generateExport("geotab/checkmate/exceptions/commonExceptions"));
(function(n,require,t){"use strict";function u(n){return!!n&&n.hasOwnProperty("then")&&n.hasOwnProperty("catch")}function e(n){var t=i();return s(n)?n.done(t.resolve).fail(t.reject):u(n)?n.then(t.resolve,t.reject):t.resolve(n),t.promise()}function i(){var i,r,u=n.promise(function(n,t){r=n;i=t}),t=function(n){var e,u;return e={resolve:function(n){r(n)},reject:function(n){i(n)},then:function(i,r){return t(n.then(i,r)).promise()},"catch":function(i){return t(n.catch(i)).promise()},always:function(i){return t(n.then(i,i)).promise()},promise:function(){return u||(u=f(f({},e),{reject:undefined,resolve:undefined})),u}}};return t(u)}function k(n){return function(t){var r=i();return setTimeout(function(){return r.resolve(t)},n),r}}var f=this&&this.__assign||function(){return f=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},f.apply(this,arguments)},o,s,h,c,l,a,v,r,y,p,w,b;Object.defineProperty(t,"__esModule",{value:!0});t.catchError=t.resolved=t.reject=t.resolve=t.delayResult=t.timeoutPromise=t.waitPromise=t.allSettled=t.race=t.together=t.Deferred=t.promisify=t.isPromiseLike=void 0;require("../promise");o=require("./exceptions/commonExceptions");s=function(n){return!!n&&typeof n=="object"&&n.hasOwnProperty("done")&&n.hasOwnProperty("fail")};t.isPromiseLike=u;t.promisify=e;t.Deferred=i;h=function(n){var r=function(n){var t=i(),r=[];return n.reduce(function(n,t){return n.then(function(n){return r.push(n),t})}).then(function(n){r.push(n);t.resolve(r)},t.reject),t.promise()},f=function(n){return u(n)?n:e(n)};return n.length>0?r(n.map(f)):t.resolve([])};t.together=h;c=function(n){var t=i();return n.forEach(function(n){var i=u(n)?n:e(n);i.then(t.resolve,function(n){t.reject(n)})}),t.promise()};t.race=c;l=function(n){return t.together(n.map(function(n){var t=u(n)?n:e(n);return t.then(function(n){return{value:n,status:"fulfilled"}},function(n){return{reason:n,status:"rejected"}})}))};t.allSettled=l;a=function(n,t){var r=i();return setTimeout(function(){r.resolve(t)},n),r.promise()};t.waitPromise=a;v=function(n,t){t===void 0&&(t=undefined);var r=i();return setTimeout(function(){r.reject(t||new o.TimeoutException)},n),r.promise()};t.timeoutPromise=v;t.delayResult=k;r=function(t,i){var f,u=n.promise(function(n,r){i?n(t):r(t)});return f={then:function(n,t){return r(u.then(n,t),!0)},"catch":function(n){return r(u.catch(n),!0)},always:function(n){return r(u.then(n,n),!0)},promise:function(){return f}}};y=function(n){return r(n,!0)};t.resolve=y;p=function(n){return r(n,!1)};t.reject=p;w=function(){var n=i(),t=n.promise();return n.resolve(undefined),function(){return t}};t.resolved=w();b=function(n,t){return function(i){return n(i),t}};t.catchError=b})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/deferred"),geotab.commonjs.generateExport("geotab/checkmate/deferred"));
(function(n,require,t){"use strict";function e(n){var t=new Date(typeof n=="string"?n:n.valueOf());return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}function o(n){var t=new Date(typeof n=="string"?n:n.valueOf());return t.setHours(23),t.setMinutes(59),t.setSeconds(59),t.setMilliseconds(0),t}function l(){var o,s,h={},a,n={},u="America/New_York",f,c=!1,d=function(){Object.keys(n).forEach(function(t){n[t].hasOwnProperty("yearDstLookup")&&(n[t].yearDstLookup={})})},v=function(n){var t;return(n===void 0&&(n=!1),!n)?(t=(new Date).getFullYear(),new Date(t,6,15).getTimezoneOffset()):(s===undefined&&(t=(new Date).getFullYear(),s=new Date(t,6,15).getTimezoneOffset()),s)},g=function(n){return-n.getTimezoneOffset()},y=v(),l=function(n,t,i,r){return r===void 0&&(r=!1),p(n,g(n),t,i,r)},nt=function(n){var t=n.timeZoneId;return h.hasOwnProperty(t)||(h[t]=i(n.timeZoneInfo.offsetFromUtc).getTime()/6e4),h[t]},p=function(i,r,e,o,s){var p,tt,it;s===void 0&&(s=!1);var c=e,l=i.getUTCFullYear(),rt=o===undefined?!c:o;c=c||f;n.hasOwnProperty(c)||(p="timeZone missing. Remember to 'changeTimeZone' when new timezone is needed.",console&&(typeof console.warn=="function"?console.warn(p):console.log(p)),c=u);var h=n[c],k=nt(h),g=v(s);y!==g&&d();y=g;h.yearDstLookup=h.yearDstLookup||{};var w=h.yearDstLookup,b=l.toString(),a=[];return w.hasOwnProperty(b)?a=w[b]:(h.adjustmentRules&&h.adjustmentRules.length>0&&(tt=h.adjustmentRules.filter(function(n){var t=new Date(n.dateStart).getUTCFullYear(),i=new Date(n.dateEnd).getUTCFullYear();return l>=t&&l<=i}),a=tt),w[b]=a),it=k+t.getDSTOffset(a,l,k,rt,i),it-r},w=function(n){for(var f,u,t,i=0;i<n.length;++i)n[i]&&(f={timeZoneId:n[i]},t?t=t.andAlso("GetDaylightSavingRules",f):o&&(t=o.call("GetDaylightSavingRules",f)));return t?(u=r.Deferred(),t.beginInvoke(function(n){(Array.isArray(n)?n:[n]).forEach(e);u.resolve()},function(n){a(n);u.reject(n)}),u.promise()):r.resolve(undefined)},b=function(n){return n&&typeof n!="string"?(e(n),n.timeZoneId):n||f||u},e=function(t){if(t&&(t.timeZoneId||t.timeZoneInfo)){var i=t.timeZoneId||t.timeZoneInfo.id||"";n[i]=t}},k;return k={initialize:function(n,t,i,r,s){var l=function(){c=!0;f=i||f;s&&s()},h;o=n;a=t;r?(r.forEach(function(n){e(n)}),l()):i&&(h=[i],i!==u&&h.push(u),w(h).then(l,t))},setTimeZoneInfo:function(t,i){n[t]=i},hasTimeZoneInfo:function(t){return n.hasOwnProperty(t)},toLocalDateTime:function(n,t,i){i===void 0&&(i=!1);var o=b(t),r=n instanceof Date?n:new Date(n),f=c?l(r,o,!0,i)*6e4:0,u=new Date(r.getTime()+f),e=u.getTimezoneOffset()-r.getTimezoneOffset();return e&&(u=new Date(r.getTime()+f+e*6e4)),u},toReverseOffsetDateTime:function(n,t,i){i===void 0&&(i=!1);var u=b(t),r=n instanceof Date?n:new Date(n),f=c?l(r,u,!1,i)*6e4:0;return new Date(r.getTime()-f)},getDefaultTimeZone:function(){return u},getOffset:function(n,t,i){return l(n,t,i)},getUtcOffset:function(n,t,i){return p(n,0,t,i)},addTimeZone:e,populateTimeZone:function(t){return n[t]?r.resolve(n[t]):w([t]).then(function(){return n[t]})},requestTimeZone:function(n){return k.populateTimeZone(n).then(function(t){if(!t)throw new Error("Unknown timezone id: "+n);return t})},timeSpanParse:i}}var r,i,u;Object.defineProperty(t,"__esModule",{value:!0});t.getDSTOffset=t.getTransitionDate=t.getEndOfDay=t.getStartOfDay=void 0;r=require("./deferred");t.getStartOfDay=e;t.getEndOfDay=o;i=function(n){var f=0,t=typeof n=="string"?n:n.toString(),e=t.charAt(0)==="-",r,o;e&&(t=t.slice(1));t=t.split(":");var i=t[0],s=parseInt(t[1],10),u=t[2]||"0.0";return t=u.split("."),u=parseInt(t[0],10),t.length===2?(o=t[1].concat("000"),r=parseInt(o.substr(0,3),10)||0):r=0,t=i.split("."),t.length===2?(f=parseInt(t[0],10),i=parseInt(t[1],10)):i=parseInt(i,10),r=(e?-1:1)*((((f*24+i)*60+s)*60+u)*1e3+r),t=new Date,t.setTime(r),t};u=function(n,t,i){var r=new Date(t,6,15),u,e=n.month-1,f;if(r.setUTCFullYear(t),r.setUTCMonth(e),r.setUTCDate(1),r.setUTCHours(0),r.setUTCMinutes(0),r.setUTCSeconds(0),r.setUTCMilliseconds(0),n.isFixedDateRule)r.setUTCDate(n.day),u=r;else{var o={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6}[n.dayOfWeek],s=r.getUTCDay(),h=r.getUTCDate()-s,c=n.week-1;o<s&&(h+=7);u=r;u.setUTCDate(h+7*c+(o||0));c===4&&u.getUTCMonth()===e+1&&u.setUTCDate(u.getUTCDate()-7)}f=new Date(n.timeOfDay);f.setUTCFullYear(1970);var l=u.getTime()+f.getTime(),a=new Date(u.getTime()+f.getTime()),v=a.getTimezoneOffset();return{userTimeZone:new Date(l-i*6e4),browserTimeZone:new Date(l+v*6e4)}};t.getTransitionDate=u;var f=function(n,r,u){var h=i(n.daylightDelta).getTime()/6e4,c=t.getTransitionDate(n.daylightTransitionStart,r,u),l=t.getTransitionDate(n.daylightTransitionEnd,r,u+h),f=c.userTimeZone,e=l.userTimeZone,o=c.browserTimeZone,s=l.browserTimeZone;return{firstHalfTransitionDate:f<e?f:e,secondHalfTransitionDate:f<e?e:f,firstHalfTransitionDateForReverse:o<s?o:s,secondHalfTransitionDateForReverse:o<s?s:o,isDaylightSavingTimeSupported:!0,delta:h,reverse:n.daylightTransitionStart.month>n.daylightTransitionEnd.month}},s=function(n,t){var r=i(n.daylightDelta).getTime()<i(t.daylightDelta).getTime(),u=r?t:n;return{dateStart:n.dateStart,dateEnd:n.dateEnd,daylightDelta:u.daylightDelta,daylightTransitionEnd:r?n.daylightTransitionStart:n.daylightTransitionEnd,daylightTransitionStart:r?n.daylightTransitionEnd:n.daylightTransitionStart}},h=function(n,t,i,r){var o;if(n.length===1)return f(n[0],t,i);var u=n.sort(function(n,t){return n.dateStart<t.dateStart?-1:1}),c=u.filter(function(n){var i=new Date(n.dateStart).getUTCFullYear(),r=new Date(n.dateEnd).getUTCFullYear();return t===i&&t===r})[0],l=r.getUTCMonth(),h=l<6,e=u.filter(function(n){var i,r;return h?(i=new Date(n.dateStart).getUTCFullYear(),i<t):(r=new Date(n.dateEnd).getUTCFullYear(),r>t)});return e.length===0&&(e=h?u.slice(0,1):u.slice(-1)),o=e[0],f(s(c||o,o),t,i)},c=function(n,t,i,r,u){if(n.length===0)return 0;var f=h(n,t,i,u),e=r?f.firstHalfTransitionDate:f.firstHalfTransitionDateForReverse,o=r?f.secondHalfTransitionDate:f.secondHalfTransitionDateForReverse;if(u.getTime()>=e.getTime()&&u.getTime()<o.getTime()){if(!f.reverse)return f.delta}else if(f.reverse)return f.delta;return 0};t.getDSTOffset=c;t.default=l})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/dstCalculator"),geotab.commonjs.generateExport("geotab/checkmate/dstCalculator"));
(function(n,require,t){"use strict";function c(n){var t=[],i=["placeholder","title","aria-label"],r=function(n){var u=n&&n.childNodes,f=u?u.length:0,h=function(n){var t=n&&n.className;return typeof t=="string"&&t.indexOf("noTranslate")===-1},c,a=function(n){for(var r=[],t=0;t<i.length;t++)n.getAttribute(i[t])&&r.push(i[t]);return r},l=function(n,i){n.nodeType===1&&h(n)&&e.indexOf(n.nodeName.toLowerCase())===-1&&(a(n).forEach(function(i){t.push({attr:i,element:n})}),i&&o.indexOf(n.nodeName.toLowerCase())===-1&&r(n));n.nodeType!==3||s.test(n.data)||t.push({text:!0,parent:n,element:n})};if(l(n,!1),h(n))while(f--)c=u[f],l(c,!0)};return n.forEach(function(n){n&&r(n[0]||n)}),t}function i(n,t){for(var f,u,i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(f=h[n],u=0,!f)throw new Error("Pluralization function for "+n+" is not specified");return t.replace(/\{[^\}]*:?[^\}:]*\}/g,function(n){var r=n.substring(1,n.length-1),t=r.split(":"),s=t[0],h=t[1],c=i[u++],e,o,l;if(i.length<u)throw new Error("Invalid amount of arguments: at least "+u+" expected but only "+i.length+" given");if(t.length>2){for(e=r.indexOf(":"),o=r.indexOf(":",e+1);o>-1;)e=o,o=r.indexOf(":",e+1);t=[r.substring(0,e),r.substring(e+1,r.length)]}return t.length===2?(s=t[0],h=t[1]):(s="num form",h=t[0]),l=h.split("|"),s.replace("num",c.toString()).replace("form",f(c,l)||"")})}function l(n,t){t.forEach(function(t){if(t&&t.querySelectorAll){var r=t.querySelectorAll("*[data-plural]");Array.prototype.forEach.call(r,function(t){var u=t.textContent||"",e=t.getAttribute("data-plural")||"",r=parseInt(e);if(isNaN(r))try{r=JSON.parse(e)}catch(o){r=0}t.textContent=i.apply(this,Array.isArray(r)?f([n,u],r):[n,u,r])})}})}function a(n,t){for(var o=t.length,i,f,e,r=0;r<o;r++)if(i=n[r],f=u(t[r]),i.text){e=i.element.splitText!==undefined?"nodeValue":"textContent";try{i.element[e]=f||""}catch(s){}}else i.attr&&i.element.setAttribute(i.attr,f)}function v(n){return n.map(function(n){return r(n.text?n.element.textContent:n.attr&&n.element.getAttribute(n.attr))})}function u(n){return n.replace(y,'"').replace(p,"#").replace(w,"'")}var f=this&&this.__spreadArray||function(n,t){for(var i=0,u=t.length,r=n.length;i<u;i++,r++)n[r]=t[i];return n},r;Object.defineProperty(t,"__esModule",{value:!0});t.decodeSymbols=t.getSentences=t.replaceOldText=t.pluralizeHtml=t.pluralize=t.getNodesForTranslation=void 0;var e=["html","head","style","title","link","meta","script"],o=["iframe"],s=/^\s*$/,h={en:function(n,t){return t[Number(1!=+n)]},fr:function(n,t){return t[Number(+n>=2)]},es:function(n,t){return t[Number(1!=+n)]},ja:function(n,t){return t[0]},de:function(n,t){return t[Number(1!=+n)]},pl:function(n,t){var i=+n;return t[Number(1===i?0:i%10>=2&&4>=i%10&&(10>i%100||i%100>=20)?1:2)]},"pt-BR":function(n,t){return t[Number(+n>=2)]},nl:function(n,t){return t[Number(1!=+n)]},it:function(n,t){return t[Number(1!=+n)]},"zh-Hans":function(n,t){return t[0]},th:function(n,t){return t[0]},id:function(n,t){return t[0]},cs:function(n,t){var i=+n;return t[Number(1===i?0:i>=2&&i<=4?1:2)]},sv:function(n,t){return t[Number(1!=+n)]}};t.getNodesForTranslation=c;t.pluralize=i;t.pluralizeHtml=l;t.replaceOldText=a;r=function(n){return n.replace(/\s{2,}/g," ")};t.getSentences=v;var y=/&quot;/g,p=/(&#035;)|(&#35;)/g,w=/(&#039;)|(&#39;)/g;t.decodeSymbols=u})(geotab,geotab.commonjs.generateRequire("geotab/translatorTools"),geotab.commonjs.generateExport("geotab/translatorTools"));
(function(n,require,t){"use strict";function f(n,t){var f=t,e=[],o=function(n,t){return{original:n,translation:t.length>0?t:n,dict:n.reduce(function(n,i,r){return n[i]=t[r]||i,n},{})}},h=function(){var t=e.slice(),r=t.reduce(function(n,t){return n.concat(t.sentences)},[]),u=function(n){for(var f=0,r=0;r<t.length;++r){var u=t[r],e=n.slice(f,f+u.sentences.length).map(i.decodeSymbols),s=o(u.sentences,e);u.resolve(s);f+=u.sentences.length}};e.length=0;n({sentences:r,language:f}).then(u,function(){return u(r)})},s=function(n){e.length||setTimeout(h,1);var t=r.Deferred();return e.push({sentences:n,resolve:t.resolve}),t.promise()};return{translateHtml:function(n){if(f==="en")return i.pluralizeHtml(f,n),r.resolve(o([],[]));var t=i.getNodesForTranslation(n),u=i.getSentences(t);return u.length>0?s(u).then(function(r){return i.replaceOldText(t,r.translation),i.pluralizeHtml(f,n),r}):r.resolve(o([],[]))},translateSentences:function(n){return f!=="en"?s(n):r.resolve(o(n,[]))},translate:s,pluralize:function(n){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return i.pluralize.apply(i,u([f,n],r))}}}var u=this&&this.__spreadArray||function(n,t){for(var i=0,u=t.length,r=n.length;i<u;i++,r++)n[r]=t[i];return n},i,r;Object.defineProperty(t,"__esModule",{value:!0});t.Translator=void 0;i=require("./translatorTools");r=require("./checkmate/deferred");t.Translator=f})(geotab,geotab.commonjs.generateRequire("geotab/translatorClass"),geotab.commonjs.generateExport("geotab/translatorClass"));
(function(n,require,t){"use strict";function l(n){if(u(n)){var t=r.Deferred();return n.done(t.resolve).fail(t.reject),t.promise()}return r.resolve(n)}function a(n){if(n){var t=i("Resolved task");return t.resolve(n),t}return o()}var f=this&&this.__assign||function(){return f=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},f.apply(this,arguments)},u,s,h,i,o;Object.defineProperty(t,"__esModule",{value:!0});t.resolveTask=t.resolved=t.toTask=t.isTaskPromise=t.isTask=t.taskHistory=t.taskToSimplePromise=t.taskToPromise=void 0;var r=require("./deferred"),c=require("./exceptions/commonExceptions"),e=function(n){return n&&typeof n=="object"&&["abort","andThen","resolve","done"].every(function(t){return n.hasOwnProperty(t)})};t.isTask=e;u=function(n){return n&&typeof n=="object"&&["andThen","done","fail"].every(function(t){return n.hasOwnProperty(t)})};t.isTaskPromise=u;s=function(n){if(e(n))return n;var t=i("Decorated promise"+(n.getName?" for "+n.getName():"")),r=function(n){t.reject(typeof n=="string"?{message:n}:n)},f=function(n){return t.resolve(n)};return u(n)?n.done(f).fail(r):n.then(f,r),t};t.toTask=s;t.taskToPromise=l;h=function(n){return u(n)?new Promise(function(t,i){return n.done(function(n){return t(n)}).fail(function(n){return i(n)})}):new Promise(function(t,i){return r.resolve(n).then(function(n){return t(n)}).catch(function(n){return i(n)})})};t.taskToSimplePromise=h;i=function(n){var o=n||"",a=r.Deferred(),b="resolve",k="reject",v=function(n){var t=n?b:k;return function(n){return s=t,y=new Date,a[t](n),u}},s="pending",d=new Date,y,p=function(n){return n.getHours()+":"+n.getMinutes()+":"+n.getSeconds()+"."+n.getMilliseconds()},h=function(n){return function(t){return a[n](t),u}},u={getName:function(){return o},setName:function(n){o=n},resolve:v(!0),reject:v(!1),done:h("then"),fail:h("catch"),always:h("always"),toString:function(){var n=s!=="pending"?(s==="resolve"?"succeeded":"failed")+": "+p(y):"in progress";return o+", started: "+p(d)+", "+n},promise:function(){return g},abort:function(){this.reject(new c.AbortException)},andThen:function(n){var c=this,o=this.getName(),s=" => ",l=o+s+"@anonymous",t=i(l),u,h=function(n){return function(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];setTimeout(function(){n.apply(c,i)},1)}},f=this;return this.done(h(function(){for(var h,c=[],i=0;i<arguments.length;i++)c[i]=arguments[i];try{u=n.apply(this,c)}catch(l){t.reject(l)}finally{f=null}e(u)?(u.done(t.resolve).fail(t.reject),h=u.getName(),h&&t.setName(o+s+h)):r.isPromiseLike(u)?u.then(t.resolve,t.reject):t.resolve(u)})),this.fail(h(t.reject),t),t.abort=function(n){return function(){n.apply(t,[]);u&&u.abort&&u.abort();f&&f.abort&&f.abort()}}(t.abort),t}},g=f(f({},u),{resolve:undefined,reject:undefined,abort:undefined}),w,l;return t.taskHistory.length>=70&&t.taskHistory.shift(),w=u.toString(),l={name:w},t.taskHistory.push(l),u.always(function(){setTimeout(function(){l.name=u.toString()},0)}),u};t.taskHistory=function(){var n=[];return n.toString=function(){return n.map(function(n,t){return(t>9?"":"0")+"\t\t"+n.name.replace(/^id\d+:\s/,"")}).join("\r\n")},n}();o=function(){var n=i("Always resolved task");return n.resolve(),function(){return n}}();t.resolved=o;t.default=i;t.resolveTask=a})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/task"),geotab.commonjs.generateExport("geotab/checkmate/task"));
(function(n,require,t){"use strict";function i(){var n=[],t=function(t){return function(){n=n.filter(function(n){return n!==t})}};return{add:function(i){i&&(n.push(i),i.always(t(i)))},count:function(){return n.length},last:function(){return n[n.length-1]},abort:function(){for(var t=n.length-1;t>=0;t--)n[t].abort()}}}Object.defineProperty(t,"__esModule",{value:!0});t.Tasks=void 0;t.Tasks=i})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/tasks"),geotab.commonjs.generateExport("geotab/checkmate/tasks"));
(function(n,require,t){"use strict";function i(){var n={},t="__allEvents",r=function(t,i){n[t]=n[t]||[];n[t].indexOf(i)===-1&&n[t].push(i)},u=function(t,i){n.hasOwnProperty(t)&&(n[t]=n[t].filter(function(n){return n!==i}))},e=function(t,i){return!n.hasOwnProperty(t)||n[t].length===0?!1:!!i&&n[t].indexOf(i)!==-1},f=function(i,r,u){for(var s,o=n[i]||[],e=0;e<o.length;++e)if(s=o[e].apply(r,Array.isArray(u)?u:u?[u]:[]),s===!1)break;i!==t&&f(t,r,[].concat(i).concat([u]))},i={attachToAll:function(n){r(t,n)},detachFromAll:function(n){u(t,n)},attachEvent:r,detachEvent:u,detachEvents:function(t){n[t]&&(n[t].length=0)},fireEvent:f,hasEventHandler:e,redirectAllEventsTo:function(n){var t=this;i.attachToAll(function(i,r){n.fireEvent(i,t,r)})},stopRedirectingAllEvents:function(){i.detachEvents(t)}};return i}var r,u;Object.defineProperty(t,"__esModule",{value:!0});t.ComplexEventHandler=t.SimpleEventHandler=void 0;t.default=i;r=function(){function n(){this.simpleEventCache={}}return n.prototype.attach=function(n,t){return this.simpleEventCache[n]=this.simpleEventCache[n]||[],this.simpleEventCache[n].push(t),this},n.prototype.detach=function(n,t){return n?t?this.simpleEventCache[n]=(this.simpleEventCache[n]||[]).filter(function(n){return n!==t}):this.simpleEventCache[n]&&(this.simpleEventCache[n].length=0):this.simpleEventCache={},this},n.prototype.fire=function(n,t){var i=this;(this.simpleEventCache[n]||[]).forEach(function(n){n.call(i,t)})},n}();t.SimpleEventHandler=r;u=function(){function n(){var n=this;this.attachEvent=function(t,i){n.eventHandler.attachEvent(t,i)};this.detachEvent=function(t,i){n.eventHandler.detachEvent(t,i)};this.fireEvent=function(t,i,r){n.eventHandler.fireEvent(t,i,r)};this.attachToAll=function(t){n.eventHandler.attachToAll(t)};this.detachFromAll=function(t){n.eventHandler.detachFromAll(t)};this.detachEvents=function(t){n.eventHandler.detachEvents(t)};this.hasEventHandler=function(t,i){return n.eventHandler.hasEventHandler(t,i)};this.redirectAllEventsTo=function(t){n.eventHandler.redirectAllEventsTo(t)};this.stopRedirectingAllEvents=function(){n.eventHandler.stopRedirectingAllEvents()};this.eventHandler=i()}return n}();t.ComplexEventHandler=u})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/eventHandler"),geotab.commonjs.generateExport("geotab/checkmate/eventHandler"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.createMonthDaysNames=t.dayNames=t.monthNames=void 0;t.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];t.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var i=function(n){var i=function(t,i,r){return i===void 0&&(i=0),r===void 0&&(r=""),(t||[]).map(function(t){var u=i?t.substring(0,i):t;return n(u+r)||u})};return{monthNames:i(t.monthNames),dayNames:i(t.dayNames),shortMonthNames:i(t.monthNames,3,"_short"),shortDayNames:i(t.dayNames,3)}};t.createMonthDaysNames=i})(geotab,geotab.commonjs.generateRequire("geotab/utils/dateConstants"),geotab.commonjs.generateExport("geotab/utils/dateConstants"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.timeSpanStrFromSeconds=void 0;var i=function(n,t,i){var r=Math.floor(n/86400),f=Math.floor((n-r*86400)/3600),e=Math.floor((n-r*86400-f*3600)/60),o=Math.floor(n-r*86400-f*3600-e*60),u=[];return r>0&&u.push(r+i("days")),(u.length>0||f>0)&&u.push(f+i("hours")),(!t||r===0)&&(u.length>0||e>0)&&u.push(e+i("{minutes}m").replace("{minutes}","")),t&&(r!==0||f!==0)||u.push(o+i("seconds")),u.join(" ")||"0"};t.timeSpanStrFromSeconds=i})(geotab,geotab.commonjs.generateRequire("geotab/utils/timeSpanStrFromSeconds"),geotab.commonjs.generateExport("geotab/utils/timeSpanStrFromSeconds"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getUnitConverter=void 0;var i=function(n,t){var i=t.factorFromBase,r=t.inversionOperation,u=t.offsetFromBase;return r?n===0?0:i/n:n*i+u},r=function(n){return["factorFromBase","inversionOperation","offsetFromBase"].every(function(t){return n.hasOwnProperty(t)})},u=function(n){return!n||!r(n)?function(n){return n}:function(t){return i(t,n)}};t.getUnitConverter=u})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/unitProfileUtils/conversionUtils"),geotab.commonjs.generateExport("geotab/checkmate/ui/unitProfileUtils/conversionUtils"));
(function(n,require,t){"use strict";var i,r,u;Object.defineProperty(t,"__esModule",{value:!0});t.emptyUserProfileUtils=t.getUserProfileUtils=void 0;i=require("../../unitProfileUtils/conversionUtils");r=function(n,t){var r={getDiagnosticUnit:function(t){if(!t)return"";var i=n()[t];return i?i.displayUnitOfMeasure.name||"":""},convertDiagnosticValue:function(n,t){return r.getDiagnosticConverter(t)(n)},getDiagnosticConverter:function(t){if(!t)return function(n){return n};var r=n()[t];return r?i.getUnitConverter(r.displayUnitOfMeasure):i.getUnitConverter(undefined)},convertUnitOfMeasure:function(n,t){return r.getMeasureConverter(t)(n)},getMeasureConverter:function(n){return n?i.getUnitConverter(t(n)):function(n){return n}},haveDiagnostic:function(t){return t?!!n()[t]:!1},haveUnitOfMeasure:function(n){return n?!!t(n):!1},toDiagnosticString:function(n,t,i){return i===void 0&&(i=0),r.convertDiagnosticValue(n!==null&&n!==void 0?n:0,t).toFixed(i)+" "+r.getDiagnosticUnit(t)}};return r};t.getUserProfileUtils=r;u=function(){return{getDiagnosticUnit:function(){return""},convertDiagnosticValue:function(n){return n},getDiagnosticConverter:function(){return function(n){return n}},convertUnitOfMeasure:function(n){return n},getMeasureConverter:function(){return function(n){return n}},toDiagnosticString:function(){return""},haveDiagnostic:function(){return!1},haveUnitOfMeasure:function(){return!1}}};t.emptyUserProfileUtils=u()})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/userProfileUtils/userProfileUtils"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/userProfileUtils/userProfileUtils"));
(function(n,require,t){"use strict";var r,i,a,v;Object.defineProperty(t,"__esModule",{value:!0});t.calcDefaultFuelEconomy=t.calcDefaultElectricEconomy=t.encodeElectricEconomy=t.decodeElectricEconomy=t.encodeFuelEconomy=t.decodeFuelEconomy=void 0;var u="KmPerLiter",f="a_HZoTxg_rUOGSX5XVOnfYQ",e="KmPerKiloWh",o="ay3JpoFMbTUuWgdqIB2QMZg",s=(r={},r[u]=f,r.LitersPer100Km="a-77YrC_4KkiKuXfqGZh0ZQ",r.MPGUS="anI_5JpwYokOoCTjjJJHU5g",r.MPGImperial="aMgMYFiNIB0GStkiPM0YTlg",r.KmPerGallon="afqRfBWFR5kaWQEDSJrg1mQ",r.GallonPer100Km="aEPMdl1iOgk-ia7XFr7uB1g",r),h=(i={},i[e]=o,i.LitersEPer100Km="aTB5aeOlSpUqp_wwgB2_kZQ",i.KmPerLitersE="ap_oO9hVVH0am7mh2oK7zjw",i.KiloWhPer100Km="aXwITt8SqfU2IbT2azhhK4A",i.WhPerKm="at-I_KA1klkOVypzl5MU0tw",i.MPGEUS="agP52xQMFQkC8WOLwlu9hKw",i.MPGEImperial="aBgv-Cu_t6EiOPG5IsQEPsg",i.KiloWhPer100Miles="aGB46Sa9dD0SniCTgj1IwrA",i.WhPerMile="a_07hqyKuQE-aQbXpOzd2Lg",i.MilePerKiloWh="a_fBy0nwcH06vrcfYpdK1Dg",i.KiloWhPerMile="a7TzDTM11KkesP6Yh_-s7ZA",i.KiloWhPerKm="aRVcW0uREakCooqJb-Y86cw",i),c=function(n,t){return function(i){var r=Object.keys(n).filter(function(t){return n[t]===i})[0];return r!==null&&r!==void 0?r:t}},l=function(n,t){return function(i){var r=n[i];return r!==null&&r!==void 0?r:t}};t.decodeFuelEconomy=c(s,u);t.encodeFuelEconomy=l(s,f);t.decodeElectricEconomy=c(h,e);t.encodeElectricEconomy=l(h,o);a=function(n,t){return t/n};t.calcDefaultElectricEconomy=a;v=function(n,t){return t/n};t.calcDefaultFuelEconomy=v})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/unitOfMeasureConverters/unitOfMeasureConverters"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/unitOfMeasureConverters/unitOfMeasureConverters"));
(function(n,require,t){"use strict";function it(n){n===void 0&&(n=nt.emptyUserProfileUtils);var rt=1.609344,gt=.9144,lt=3.785411784,at=4.54609188,oi=2.2046213,ni=3.28084,pt,ht,et=undefined,ot={language:"en",longDateFormat:""},it,ft,vt,yt,ut=w.default(),wt=!1,bt,si=function(n){var t,r={},i;if(n.length%2!=0)throw new Error("incorrect data items");for(t=0;t<n.length;t+=2){if(i=n[t],r[i])throw new Error(i+" already added");r[i]=n[t+1]}return r},y=si(p.localizerStrings),hi=function(){var n={en:"Cannot load translations due to network error. Would you like to continue in English?",fr:"Impossible de charger les traductions en raison d’une erreur de réseau. Voulez-vous continuer en anglais ?",es:"No se han podido cargar las traducciones debido a un error en la red. ¿Quiere continuar en inglés?",ja:"ネットワークエラーのため、翻訳を読込みできません。英語で続行されますか？",de:"Aufgrund eines Netzwerkfehlers kann die von Ihnen gewählte Sprache nicht geladen werden. Möchten Sie auf Englisch fortfahren?",pl:"Nie można załadować tłumaczenia z powodu błędu sieci. Czy chcesz kontynuować w języku angielskim?","pt-BR":"Não é possível carregar as traduções devido a um erro de rede. Gostaria de continuar em inglês?",nl:"Vertalingen kunnen niet worden geladen vanwege een netwerkfout. Wilt u doorgaan in het Engels?",it:"Impossibile caricare traduzioni a causa di un errore di rete. Continuare in inglese?","zh-Hans":"由于网络错误原因，无法加载转换。您是否要继续采用英语？",th:"ไม่สามารถโหลดการแปลได้เนื่องจากข้อผิดพลาดของเครือข่าย คุณต้องการดำเนินการต่อด้วยภาษาอังกฤษหรือไม่",id:"Tidak dapat memuat terjemahan karena kesalahan jaringan. Anda ingin melanjutkan dalam bahasa Inggris?",cs:"Nelze nahrát překlady kvůli chybě sítě. Chcete pokračovat v angličtině?",sv:"Det går inte att läsa in översättningar på grund av nätverksfel. Vill du fortsätta på engelska?"};return window.confirm(n[ot.language]||n.en)},ci=function(n){var t=Object.keys(y);return n.translate(t.map(function(n){return y[n]})).then(function(n){var i=n.translation;t.forEach(function(n,t){y[n]=i[t]})})},ct=a.createMonthDaysNames(f.echo),st=function(n,t){var i=new Date(n);i.setTime(Math.round(i.getTime()/1e3)*1e3);var r=function(n,t){t===void 0&&(t=2);for(var i=n.toString();i.length<t;)i="0"+i;return i},u="get",c=i[u+"Date"](),l=i[u+"Day"](),o=i[u+"Month"](),h=i[u+"FullYear"](),e=i[u+"Hours"](),a=i[u+"Minutes"](),v=i[u+"Seconds"](),s=i[u+"Milliseconds"](),y={d:c,dd:r(c),ddd:ct.shortDayNames[l],dddd:ct.dayNames[l],M:o+1,MM:r(o+1),MMM:ct.shortMonthNames[o],MMMM:ct.monthNames[o],y:parseInt(h.toString().slice(2)),yy:h.toString().slice(2),yyyy:h,h:e%12||12,hh:r(e%12||12),H:e,HH:r(e),m:a,mm:r(a),s:v,ss:r(v),l:r(s,3),L:r(s>99?Math.round(s/10):s),t:e<12?"a":"p",tt:e<12?"am":"pm",T:e<12?"A":"P",TT:e<12?"AM":"PM"};return f.htmlEscape(t).replace(/d{1,4}|M{1,4}|yy(?:yy)?|y|([HhmsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,function(n){return n in y?y[n]:n.slice(1,n.length-1)})},ti=function(n,t){return g.timeSpanStrFromSeconds(n,t,function(n){return y[n]})},ii=function(n,t){var i=c.isTimespan(n)?n.toString():n,r=ut.timeSpanParse(i).valueOf()/1e3;return ti(r,t)||""},li=function(n,t,i){var r=f.pad(n,2),u=f.pad(t,2),e=f.pad(i,2),o=r+":"+u+":"+e;return ii(o,!1)},tt,kt,ri="Sunday",dt=k.Tasks(),ui=function(n,t){var i=n.search(/h/i),r=n||ei,u=t===undefined?fi:t;return i!==-1&&(r=n.substr(0,i-1)||ei,u=n.substr(i)||fi),{date:r.trim(),time:u.trim()}},fi="HH:mm:ss",ei="MM/dd/yy";return tt=h.extend(d.default(),u({setCultureInfo:function(n,t,r,u,f,e,o){return o===void 0&&(o=i.resolve(void 0)),tt.initialize(n,t,e,r.language,r.isMetric,r.fuelEconomyUnit,r.electricEnergyEconomyUnit,r.dateFormat,r.timeZoneId,null,r.firstDayOfWeek,u,f,o)},getStateTask:function(){return dt.last()||l.resolved()},getCultureInfo:function(){return t.cultureInfo(ot&&ot.language,it,ft,vt,yt,ht,kt,ri)},initialize:function(n,t,r,e,o,s,c,p,w,k,d,g,nt,rt){var ti;rt===void 0&&(rt=i.resolve(void 0));var st=wt?tt.getCultureInfo():null,lt=l.default("localizerInitializationTask"),fi=function(){var n=tt.getCultureInfo();st&&n&&(!v(st,n)||ii)&&(gt={previous:st,current:h.extend({},n,{language:e}),isMetricChanged:st.isMetric!==n.isMetric,isFuelEconomyUnitChanged:st.fuelEconomyUnit!==n.fuelEconomyUnit,isEnergyEconomyUnitChanged:st.electricEnergyEconomyUnit!==n.electricEnergyEconomyUnit,isDateTimeChanged:st.dateFormat!==n.dateFormat||st.timeFormat!==n.timeFormat,isLanguageChanged:st.language!==e,isTimeZoneChanged:st.timeZoneId!==n.timeZoneId,isFirstDayOfWeekChanged:st.firstDayOfWeek!==n.firstDayOfWeek,showChanged:g},gt.isTimeZoneChanged?ut.populateTimeZone(gt.current.timeZoneId).then(si,r):si())},li=function(n){if(at)return i.resolve(undefined);var t=ot.language==="en";return t?i.resolve(undefined):ci(n)},ei=function(n){return i.together([li(n),rt.always(f.NOOP)]).then(oi,ai)},oi=function(){at=!0;fi();nt&&nt();lt.resolve()},ai=function(n){n.isAborted||n.name==="ServerStopped"||(fi(),hi()?oi():(r&&r(n),lt.reject(n)))},ii=ot.language!==e,at=!ii&&wt,gt,si=function(){tt.fireEvent("cultureInfoChange",tt,gt)},ni=ui(p);return dt.abort(),dt.add(lt),ot=at?ot:{language:e,longDateFormat:p},it=o,vt=c,ft=s,yt=ni.date,ht=ni.time,pt=ni.date+" "+ni.time,kt=w,ri=d,ti=b.Translator(t,ot.language),et=ti,tt.fireEvent("cultureInfoReady",tt,tt.getCultureInfo()),bt||(bt=u({},y)),y=ii&&!at||!y?u({},bt):y,w||k?ut.initialize(n,r,w,k,function(){return ei(ti)}):ei(ti),wt=!0,lt.done(function(){ct=a.createMonthDaysNames(function(n){return y[n]})}),lt},getCurrentTimeZoneId:function(){return kt},getTimeZoneOffsetDescription:function(n,t){var r=function(n,t){var i=t?typeof t=="string"?new Date(t):t:new Date,r=ut.getOffset(i,n)-i.getTimezoneOffset(),u=Math.floor(r/60),f=r%60;return tt.translateKey("UTC")+(u>=0?"+":"")+u+(f?":"+f:"")};return ut.hasTimeZoneInfo(n)?i.resolve(r(n,t)):ut.populateTimeZone(n).then(function(){return r(n,t)})},getVolumeAbbreviation:function(){return ft==="MPGUS"||ft==="MPGImperial"?y.gal:y.L},timeSpanParse:ut.timeSpanParse,timespanToSeconds:function(n){return n.valueOf()/1e3},getDisplayTimeSpan:ii,getDisplayTimeSpanFromSeconds:ti,getDisplayTimeSpanFromTime:li,timespanFromSeconds:function(n,t){return c.default(n*1e3).toString(t)},splitPatternTimeAndDate:ui,parseDateToString:st,dateToString:function(n,t){return st(typeof n=="string"?new Date(n):n,t)},toShortDateTime:function(n,t,i){return st(tt.toLocalDateTime(n,t),i||pt)},toShortDate:function(n,t,i){return st(tt.toLocalDateTime(n,t),i||yt)},returnDateFormat:function(){return yt},returnTimeFormat:function(){return ht},returnShortTimeFormat:function(n){return(n||ht).replace(":ss","")},toLongDate:function(n,t,i){return st(tt.toLocalDateTime(n,t),i||ot.longDateFormat||pt)},toLocalDateTime:function(n,t){return ut.toLocalDateTime(n,t)},toReverseOffsetDateTime:function(n,t){return ut.toReverseOffsetDateTime(n,t)},toShortTime:function(n,t,i){return st(tt.toLocalDateTime(n,t),i||tt.returnShortTimeFormat())},toLongTime:function(n,t){return st(tt.toLocalDateTime(n,t),ht)},populateTimeZone:function(n){return ut.populateTimeZone(n)},toLocalVolume:function(n){return ft==="MPGUS"?n/lt:ft==="MPGImperial"?n/at:n},toMetricVolume:function(n){return ft==="MPGUS"?n*lt:ft==="MPGImperial"?n*at:n},toLocalEnergyEconomy:function(t,i){var f,o,u;if(!t||!i)return null;if(f=r.encodeElectricEconomy(vt),n.haveUnitOfMeasure(f))return o=n.getMeasureConverter(f),o(r.calcDefaultElectricEconomy(t,i));switch(vt){case"LitersEPer100Km":return e.kWhToLiters(t)/i*100;case"KmPerLitersE":return i/e.kWhToLiters(t);case"KiloWhPer100Km":return t/i*100;case"WhPerKm":return t*1e3/i;case"KmPerKiloWh":return i/t;case"MPGEUS":return i*lt/(e.kWhToLiters(t)*rt);case"MPGEImperial":return i*at/(e.kWhToLiters(t)*rt);case"KiloWhPer100Miles":return t/(i/rt)*100;case"WhPerMile":return t*1e3/(i/rt);case"MilePerKiloWh":return i/rt/t;case"KiloWhPerMile":return u=s.getUnitConverter({factorFromBase:1.609344,offsetFromBase:0,inversionOperation:!0}),u(r.calcDefaultElectricEconomy(t,i));case"KiloWhPerKm":return u=s.getUnitConverter({factorFromBase:1,offsetFromBase:0,inversionOperation:!0}),u(r.calcDefaultElectricEconomy(t,i));default:return null}},toLocalFuelEconomy:function(t,i){var f,e,u;if(!t||!i)return null;if(f=r.encodeFuelEconomy(ft),n.haveUnitOfMeasure(f))return e=n.getMeasureConverter(f),e(r.calcDefaultFuelEconomy(t,i));switch(ft){case"LitersPer100Km":return t/i*100;case"KmPerLiter":return i/t;case"MPGUS":return i*lt/(t*rt);case"MPGImperial":return i*at/(t*rt);case"KmPerGallon":return u=s.getUnitConverter({factorFromBase:3.78541181779,offsetFromBase:0,inversionOperation:!1}),u(r.calcDefaultFuelEconomy(t,i));case"GallonPer100Km":return u=s.getUnitConverter({factorFromBase:26.417205,offsetFromBase:0,inversionOperation:!0}),u(r.calcDefaultFuelEconomy(t,i));default:return null}},toMetricDistance:function(n){return it?n:n*rt},toLocalDistance:function(n){return it?n:n/rt},getDistanceAbbreviation:function(){return it?y.km:y.mi},getShortDistanceAbbreviation:function(){return it?y["{meters}m"].replace("{meters}",""):y.yd},toLocalDistanceString:function(n,t){return t===void 0&&(t=0),tt.toLocalDistance(n).toFixed(t)+" "+tt.getDistanceAbbreviation()},toMetricDistanceMetreEquivalent:function(n){return it?n:n*gt},toLocalDistanceMetreEquivalent:function(n){return it?n:n/gt},getDistanceMetreEquivalentAbbreviation:function(){return it?y.meters:y.yards},getShortDistanceMetreEquivalentAbbreviation:function(){return it?y["{meters}m"].replace("{meters}",""):y.yd},toMetricDistanceMetreFeetEquivalent:function(n){return it?n:n/ni},toLocalDistanceMetreFeetEquivalent:function(n){return it?n:n*ni},getShortDistanceMetreFeetEquivalentAbbreviation:function(){return it?y["{meters}m"].replace("{meters}",""):y.ft},toLocalDistanceMetreFeetEquivalentString:function(n,t){return t===void 0&&(t=0),tt.toLocalDistanceMetreFeetEquivalent(n).toFixed(t)+" "+tt.getShortDistanceMetreFeetEquivalentAbbreviation()},toMetricSpeed:function(n){return it?n:n*rt},toLocalSpeed:function(n){return it?n:n/rt},getSpeedAbbreviation:function(){return it?y["km/h"]:y.mph},toLocalSpeedString:function(n){return tt.toLocalSpeed(n).toFixed(0)+" "+tt.getSpeedAbbreviation()},toLocalWeight:function(n){return it?n:n*oi},toLocalWeightString:function(n){return tt.toLocalWeight(n).toFixed(2)+" "+tt.getWeightAbbreviation()},getWeightAbbreviation:function(){return it?y.kg:y.lbs},getTemperatureAbbreviation:function(){return it?y.UnitOfMeasureDegreesCelsiusId:y.UnitOfMeasureDegreesFahrenheitId},toLocalTemperature:function(n){return it?n:e.fromCelsiusToFahrenheit(n)},translateSentences:function(n){return et?et.translateSentences(n):i.reject(new o)},translateSentencesWithKeys:function(n){return et===undefined?i.reject(new o):et.translateSentences(n.map(function(n){return n[0]})).then(function(t){return u(u({},t),{dict:t.translation.reduce(function(t,i,r){return t[n[r][1]||n[r][0]]=i,t},{})})})},translateSentencesArray:function(n){return et?et.translateSentences(n).then(function(n){return n.translation}):i.reject(new o)},translateHtml:function(n){return et?et.translateHtml(Array.isArray(n)?n:[n]):i.reject(new o)},translatePage:function(n){var t=document.head?document.head.getElementsByTagName("title")[0]:null,r=" | ",i=(n[0]?n[0]:n).getElementsByClassName("translatePagePhrases")[0],u=t?(t.textContent||"").split(r):[],f;return t&&(t.textContent=u.shift()||""),i&&Array.prototype.forEach.call(i.children,function(n){n.id||n.getAttribute("data-key")||n.setAttribute("data-key",n.textContent)}),f=[n],t&&f.push(t),tt.translateHtml(f).then(function(){var n={};return i&&(Array.prototype.forEach.call(i.children,function(t){var i=t.id||t.getAttribute("data-key");i&&(n[i]=t.textContent)}),i.parentNode&&i.parentNode.removeChild(i)),t&&(t.textContent=t.textContent+(u.length?r+u.join(r):"")),n})},hasKey:function(n){return n in y},translateKey:function(n){return y[n]||n},getDstCalculator:function(){return ut}},n))}var y=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),u=this&&this.__assign||function(){return u=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},u.apply(this,arguments)},v,o;Object.defineProperty(t,"__esModule",{value:!0});t.LocalizerConstructor=t.cultureInfo=void 0;var f=require("./utils"),p=require("./localizerStrings"),h=require("./vanillaExtension/vanilla"),c=require("./checkmate/timespan"),w=require("./checkmate/dstCalculator"),b=require("./translatorClass"),l=require("./checkmate/task"),k=require("./checkmate/tasks"),d=require("./checkmate/eventHandler"),i=require("./checkmate/deferred"),e=require("./utils/converters"),a=require("./utils/dateConstants"),g=require("./utils/timeSpanStrFromSeconds"),nt=require("./checkmate/ui/modules/userProfileUtils/userProfileUtils"),r=require("./checkmate/ui/modules/unitOfMeasureConverters/unitOfMeasureConverters"),s=require("./checkmate/ui/unitProfileUtils/conversionUtils"),tt=function(n,t,i,r,u,f,e,o){return{language:n,isMetric:t,fuelEconomyUnit:i,dateFormat:u,timeFormat:f,timeZoneId:e,firstDayOfWeek:o,electricEnergyEconomyUnit:r}};t.cultureInfo=tt;v=function(n,t){return n===t||n&&t&&Object.keys(t).every(function(n,t){return function(i){return n[i]===t[i]}}(n,t))};o=function(n){function t(){var t=n.call(this,"Translator isn't available")||this;return t.isTranslationError=!0,t}return y(t,n),t}(Error);t.LocalizerConstructor=it})(geotab,geotab.commonjs.generateRequire("geotab/localizer"),geotab.commonjs.generateExport("geotab/localizer"));
(function(n,require,t){"use strict";function s(n,t){var tt=t||{},a=tt.panes||{},it="hiddenPane",w="resizerBarHidden",ct=function(n,t,r,u){var f,s=n+"ResizerBar",h="auto";switch(n){case"north":case"south":f=i.create("div",{"class":"resizerWidthBar "+s},{height:h,display:t?"block":"none"});f.innerHTML=e(h,u);break;case"west":case"east":f=i.create("div",{"class":"resizerHeightBar "+s},{width:0,display:t?"block":"none"});f.innerHTML=o()}return r&&f&&(f.className+=" "+r),f},lt=function(n){return n==="east"||n==="west"?"width":"height"},y={north:["top"],west:["left","top","bottom"],south:["bottom"],east:["right","top","bottom"]},at={top:"north",right:"east",left:"west",bottom:"south"},c={north:{top:["center","west","east"]},west:{left:["center"]},east:{right:["center"]},south:{bottom:["center","west","east"]}},ut=function(n,t,i){n.insertBefore(t,i)},ft=function(t,i,r){r.nextSibling?n.insertBefore(i,r.nextSibling):t.appendChild(i)},vt={north:ft,west:ft,east:ut,south:ut},yt=function(n){return c.hasOwnProperty(n)?Object.keys(c[n])[0]:null},b=0,k=function(){clearTimeout(b);b=0;p={}},p={},pt=function(n,t,i){if(!s[t].parentNode)return 0;var r=!1,u="none";try{r=s[t].parentNode===document.body}catch(f){u=f.message}throw new Error(n.message+" Get "+i+" for #"+s[t].id+"."+t+"\n                Pane (has parent: true, is parent body: "+r.toString()+", second error: "+u+").");},d=function(n,t){var i=at[n];if(s.hasOwnProperty(i)){var r=n==="top"||n==="bottom"?"height":"width",u=t&&a[i]&&a[i].isOver,f=a[i]&&typeof a[i][r]!="undefined";if(!u){if(f)return a[i][r];if(b=b||setTimeout(k,1),p[i])return p[i][r];try{p[i]=s[i].getBoundingClientRect()}catch(e){return pt(e,i,r)}return p[i][r]}}return 0},rt=function(n,t){var r,i,u=t||l[n];if(u)for(r=y[n]||y[n.split("-")[1]]||[],i=0;i<r.length;i++)u.style[r[i]]=d(r[i])+"px"},v=function(n){var t=s[n];return t&&t.className.indexOf(it)===-1},et=function(n){var r,t,u,f;if(s[n]&&v(n)){if(k(),i.addClasses(s[n],it),l.hasOwnProperty(n))if(r=l[n],t=ht(n),r.style[y[n][0]]=0,u=a[n],u&&(u.hideResizerWithPane||u.hideResizer)&&g(n,!1),i.addClasses(l[n],w),t.double){var p=r.querySelectorAll("button"),e=p[0],o=p[1],b=r.classList.contains("resizerBarHidden"),d=r.classList.contains("extended"),tt=b?"false":"true",rt=d?"false":"true";e.setAttribute("aria-label",t.label(!0));e.setAttribute("title",t.label(!0));e.setAttribute("aria-expanded",tt);o.setAttribute("aria-label",t.label(!1));o.setAttribute("title",t.label(!1));o.setAttribute("aria-expanded",rt)}else f=r.querySelector("button"),f.setAttribute("aria-label",t.label(!1)),f.setAttribute("title",t.label(!1)),f.setAttribute("aria-expanded","false");c.hasOwnProperty(n)&&nt(c[n]);h.fireEvent("hide."+n,this);h.fireEvent("resize."+n,this);h.fireEvent("resize.all",this)}},ot=function(n){var t,i=a[n];return(t=i===null||i===void 0?void 0:i.hideResizer)!==null&&t!==void 0?t:!1},st=function(n){var u;if(s[n]&&!v(n)){if(k(),i.removeClasses(s[n],it),l.hasOwnProperty(n)){var t=l[n],r=ht(n),o=y[n];if(ot(n)||v(t)||g(n,!0),t.style[o[0]]=d(o[0])+"px",i.removeClasses(t,w),r.double){var a=t.querySelectorAll("button"),f=a[0],e=a[1],p=t.classList.contains("resizerBarHidden"),b=t.classList.contains("extended"),tt=p?"false":"true",rt=b?"false":"true";f.setAttribute("aria-label",r.label(!0));f.setAttribute("title",r.label(!0));f.setAttribute("aria-expanded",tt);e.setAttribute("aria-label",r.label(!1));e.setAttribute("title",r.label(!1));e.setAttribute("aria-expanded",rt)}else u=t.querySelector("button"),u.setAttribute("aria-label",r.label(!0)),u.setAttribute("title",r.label(!0)),u.setAttribute("aria-expanded","true")}c.hasOwnProperty(n)&&nt(c[n]);h.fireEvent("show."+n,this);h.fireEvent("resize."+n,this);h.fireEvent("resize.all",this)}},wt=function(n,t){c.hasOwnProperty(n)&&(t&&(s[n].style[lt(n)]=t+"px",l.hasOwnProperty(n)&&(l[n].style[y[n]]=t+"px")),k(),nt(c[n]),rt(n),h.fireEvent("resize."+n,this),h.fireEvent("resize.all",this))},bt=function(){var n,t=Object.keys(c);for(h.fireEvent("resize.all",this),n=0;n<t.length;n++)nt(c[t[n]]),h.fireEvent("resize."+t[n],this)},kt=function(n){if(s.hasOwnProperty(n)){var t=yt(n);if(t!==null)return d(t)}return 0},dt=function(n,t,i){s.hasOwnProperty(n)&&(a[n]=r(r({},a[n]||{}),t),typeof t.hideResizerWithPane=="boolean"&&ni(n,t.hideResizerWithPane),i||this.resize(n))},s=["north","west","east","south","center"].reduce(function(t,i){var r=Array.prototype.filter.call(n.getElementsByClassName(i+"Pane"),function(t){return t.parentNode===n})[0];return r&&(t[i]=r,r.id||(r.id=f.generateId())),t},{}),gt=function(n){return function(){return(v(n)?et:st)(n)}},g=function(n,t){l[n]&&(l[n].style.display=t?"block":"none")},ni=function(n,t){if(ot(n)){g(n,!1);return}var i=!v(n);(i||!t)&&g(n,!t)},l=(tt.resizers||[]).reduce(function(t,r){var f=r.paneName,a,y,e,o;if(s.hasOwnProperty(f)){var u=ct(f,!!r.initShown,r.className,r.double),h=s[f],p=vt[f];if(u&&h)if(rt(f,u),p(n,u,h),a=typeof r.clickHandler=="function"?r.clickHandler:gt(f),y=u.querySelectorAll(".resizerButton"),t[f]=u,e=v(f),r.double){var c=y[0],l=y[1],b=u.classList.contains("resizerBarHidden"),k=u.classList.contains("extended"),d=b?"false":"true",g=k?"false":"true";c.addEventListener("click",a,!1);c.setAttribute("aria-controls",h.id);c.setAttribute("aria-label",r.label(!0));c.setAttribute("title",r.label(!0));c.setAttribute("aria-expanded",d);l.addEventListener("click",a,!1);l.setAttribute("aria-controls",h.id);l.setAttribute("aria-label",r.label(!1));l.setAttribute("title",r.label(!1));l.setAttribute("aria-expanded",g);e||i.addClasses(u,w)}else o=y[0],o.addEventListener("click",a,!1),o.setAttribute("aria-controls",h.id),o.setAttribute("aria-label",r.label(e)),o.setAttribute("title",r.label(e)),o.setAttribute("aria-expanded",e?"true":"false"),e||i.addClasses(u,w)}return t},{}),nt=function(n){for(var i,u=Object.keys(n),r,t=0;t<u.length;t++)for(r=n[u[t]],i=0;i<r.length;i++)s.hasOwnProperty(r[i])&&(s[r[i]].style[u[t]]=d(u[t],!0)+"px"),rt(r[i])},ht=function(n){for(var i=tt.resizers||[],t=0;t<i.length;t++)if(i[t].paneName===n)return i[t];return null},h=u.default();return i.extend({isVisible:v,hide:et,show:st,resize:wt,resizeAll:bt,getPaneSize:kt,setPaneConfig:dt},h)}var r=this&&this.__assign||function(){return r=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=require("./vanilla"),u=require("../checkmate/eventHandler"),f=require("../utils"),e=function(n,t){return"<button class='geo-resize-button resizerButton "+(t?"unextenderButton":"")+"' style='height:"+n+'\'>\n                <svg class="geo-resize-button__icon upArrow"><use xlink:href="#geo-up-arrow-new"><\/use><\/svg>\n                <svg class="geo-resize-button__icon downArrow"><use xlink:href="#geo-down-arrow-new"><\/use><\/svg>\n            <\/button>\n            '+(t?"<button class='geo-resize-button resizerButton "+(t?"extenderButton":"")+"' style='height:"+n+'\'>\n                <svg class="geo-resize-button__icon upArrow"><use xlink:href="#geo-up-arrow-new"><\/use><\/svg>\n                <svg class="geo-resize-button__icon downArrow"><use xlink:href="#geo-down-arrow-new"><\/use><\/svg>\n            <\/button>':"")},o=function(){return'<div class=\'verticalResizer\'>\n                <div>\n                    <button class=\'geo-resize-button resizerButton\'>\n                        <svg class="geo-resize-button__icon leftArrow"><use xlink:href="#geo-left-arrow-new"><\/use><\/svg>\n                        <svg class="geo-resize-button__icon rightArrow"><use xlink:href="#geo-right-arrow-new"><\/use><\/svg>\n                    <\/button>\n                <\/div>\n            <\/div>'};t.default=s})(geotab,geotab.commonjs.generateRequire("geotab/vanillaExtension/vanillaLayout"),geotab.commonjs.generateExport("geotab/vanillaExtension/vanillaLayout"));
(function(n,require,t){"use strict";function g(){return s()}function h(n,i,u){return n.map(function(n){var f=r({},n),e=t.getMenuItemHash(n);return i[e]={item:f,isRemoved:!1,parent:u},t.isHeaderMenuItem(f)&&(f.children=h(f.children,i,i[e])),f})}function nt(){var n={},t=h(s(),n);return{tree:t,hash:n}}var r=this&&this.__assign||function(){return r=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},r.apply(this,arguments)},i=this&&this.__spreadArray||function(n,t){for(var i=0,u=t.length,r=n.length;i<u;i++,r++)n[r]=t[i];return n},u,f,e,o;Object.defineProperty(t,"__esModule",{value:!0});t.cloneMenu=t.getMenuTree=t.getMenuItemHash=t.getMenuItemLinkPair=t.isLinkMenuItem=t.isHeaderMenuItem=void 0;u=function(n){return n.hasOwnProperty("children")};t.isHeaderMenuItem=u;f=function(n){return n.hasOwnProperty("link")};t.isLinkMenuItem=f;e=function(n){if(t.isHeaderMenuItem(n))return[n.category,""];var i=n.dataAttr||{};return i.href?[i.href,""]:i.type?[n.link,i.type]:[n.link,""]};t.getMenuItemLinkPair=e;o=function(n){var i=t.getMenuItemLinkPair(n),r=i[0],u=i[1];return u?r+"_"+u:r};t.getMenuItemHash=o;var c=function(){return[{icon:"geo-main-menu-bookmarks",category:"Bookmarks",title:"Bookmarks",alwaysPresent:!0,children:[]}]},l=function(){return[{icon:"geo-main-menu-help",category:"GettingStartedLink",title:"Getting Started & Help",children:[{title:"Geotab Community",link:"https://community.geotab.com/",description:"A user forum for questions and issues regarding the product.",icon:"geo-main-menu-forum",dataAttr:{skipFromSearch:!0,external:!0,href:"helpForum"}},{title:"In-App Help",link:"selfHelp",icon:"geo-main-menu-help",dataAttr:{isActionButton:!0}},{title:"Support",category:"support",icon:"geo-main-menu-support",children:[{title:"Live Chat with Geotab",link:"liveChat",dataAttr:{href:"liveChat",isActionButton:!0,skipFromSearch:!0}},{title:"Contact Information",link:"contact"}]},{title:"Additional Resources",category:"additionalResources",icon:"geo-main-menu-additionalResources",children:[{title:"Product Guide",link:"helpGuide",description:"The Product Guide provides an introduction to the application and its features."},{title:"Release Notes",link:"releaseNotes",description:"Hardware and Software Updates"},{title:"Additional Training",link:"https://www.geotab.com/training/",description:"Additional videos available on YouTube.",dataAttr:{external:!0,href:"videoresources"}},{title:"Blog",link:"helpResources",description:"Additional videos and training materials."}]}]}]},a=function(){return[{icon:"geo-main-menu-dashboardAnalytics",category:"dashboardAnalytics",description:"A graphical summary for the various metrics of your organization.",title:"Dashboard & Analytics",children:[{icon:"geo-main-menu-dashboard",link:"dashboard",description:"A graphical summary for the various metrics of your organization.",title:"Dashboard"},{icon:"geo-main-menu-lightbulb",link:"activeInsights",description:"Your data insight concierge for MyGeotab",title:"Active Insights"},{icon:"geo-main-menu-analyticsLab",link:"analyticsLab",description:"Analytics Lab is an environment to showcase experimental data solutions",title:"Analytics Lab"},{icon:"geo-main-menu-trends",link:"trends",description:"What does the average commercial vehicle fleet look like?",title:"Fleet Industry Trends"}]}]},v=function(){return[{icon:"geo-main-menu-map",title:"Map",category:"MapLink",children:[{icon:"geo-main-menu-map",link:"map",description:"View the current or archived (historical) positions of your vehicles.",title:"Map"},{icon:"geo-main-menu-trips-history",link:"tripsHistory",description:"View the archived (historical) trips for the devices",title:"Trips History"},{icon:"geo-main-menu-route-completion",link:"routeCompletion",description:"Open route completion report",title:"Route Completion"},{title:"Routes",category:"RoutesLink",icon:"geo-main-menu-routes",children:[{title:"Routes",link:"routes",badge:"pro",description:"View and set up routes and route plans for drivers"},{title:"Planned vs. Actual Route Report",link:"routePlanActual",description:"A report showing driver deviations from pre-defined routes"},{title:"Route Summary",link:"routeSummaryReport",description:"A report showing a summary of all the routes driven in a specified time period"},{title:"Unmatched Route",link:"unmatchedRoute",description:"A report showing the routes where planned stops do not correlate with actual stops"},{title:"Import Routes",link:"importRoutes",description:"Bulk import routes into the application"}]},{icon:"geo-main-menu-location-sharing",link:"assetLocationSharing",description:"Open asset location sharing",title:"Asset Location Sharing"}]},{icon:"geo-main-menu-devices",link:"devices",description:"View and set up devices.",title:"Vehicles & Assets"}]},y=function(){return[{icon:"geo-main-menu-activity",category:"ActivityLink",title:"Activity",children:[{title:"Risk Management",link:"riskManagement",description:"A report that can showcase which drivers or vehicles could have risky driving behavior &mdash; useful for improving safety.",icon:"geo-main-menu-risk"},{title:"Speed Profile",link:"speedProfile",description:"Graph the speed of a vehicle over a period of time.",icon:"geo-main-menu-speedProfile"},{title:"Driver Congregation",link:"driversCongregating",description:"Find when and where vehicles gather together.",icon:"geo-main-menu-driverCongregation"},{title:"Work Hours",category:"WorkTimeLink",icon:"geo-main-menu-workHours",children:[{title:"Time Card Report",link:"timeCardReport",description:"Display the time spent by drivers on various activities."},{title:"Work Hours",link:"workTimes",description:"View and set up work hours or shifts for your organization."},{title:"Work Holidays",link:"workHolidays",description:"View and set up holidays for your organization."}]},{title:"IFTA Report",link:"iftaMiles",description:"Produce an IFTA report for vehicles — including the miles driven per state/province.",icon:"geo-main-menu-iftaReport"},{title:"Log Data & Collisions",link:"logDetails",description:"View a detailed list of every device log.",icon:"geo-main-menu-logDataCollisions"},{title:"HOS",badge:"pro",category:"HosLink",icon:"geo-main-menu-hos",children:[{title:"Logs",link:"hosLogs",description:"View Hours of Service (HOS) duty status logs."},{title:"Unidentified Driving",link:"unidentifiedDriving",description:"View and manage unassigned logs."},{title:"Violations",link:"hosViolations",description:"View Hours of Service (HOS) violations."},{title:"Availability",link:"hosAvailability",description:"View Hours of Service (HOS) availability."}]}]}]},p=function(){return[{icon:"geo-main-menu-engine",category:"EngineMaintenanceLink",title:"Engine & Maintenance",children:[{title:"Engine and Device",category:"DataEngineLink",icon:"geo-main-menu-engine",children:[{title:"Asset Monitoring",link:"assetMonitoring",description:"Monitor assets while tracking their locations on the map."},{title:"Faults",link:"engineFaults",description:"A report of all recorded engine faults."},{title:"Measurements",link:"engineMeasurements",description:"A report of all recorded engine measurements."},{title:"Diagnostics",link:"engineDiagnostics",description:"A list of all engine diagnostics."}]},{title:"Fuel and EV Energy Usage",link:"fuelUsage",badge:"pro",description:"A report on the fuel and EV energy consumption of your vehicles.",icon:"geo-main-menu-fuelUsage"},{title:"Asset Inspection",link:"dvirs",badge:"pro",description:"Asset Inspection",icon:"geo-main-menu-dvir"},{title:"Trailers",link:"trailers",badge:"pro",description:"A list of trailers",icon:"geo-main-menu-trailers"},{category:"RemindersLink",title:"Maintenance",icon:"geo-main-menu-reminders",children:[{title:"Reminders",link:"maintenanceReminders",description:"View and set up maintenance reminders for vehicles"},{title:"Upcoming Maintenance",link:"upcomingMaintenance",description:"View upcoming maintenance reminders"},{title:"Maintenance Records",link:"maintenanceRecords",description:"View and add completed maintenance records"}]}]}]},w=function(){return[{icon:"geo-main-menu-zones",category:"ZoneAndMessagesLink",title:"Zones & Messages",children:[{title:"Zones",link:"zones",description:"View and set up zones.",icon:"geo-main-menu-zones"},{title:"Import Zones",link:"importZones",description:"Import zones or customers from an Excel spreadsheet into the application",icon:"geo-main-menu-importZones"},{title:"Zone Visits",link:"customerVisits",description:"A report on the activity of drivers at customer sites.",icon:"geo-main-menu-zoneVisits"},{title:"Messages",link:"gpsTextMessages",description:"View and send text messages to drivers.",icon:"geo-main-menu-messages"},{title:"Messages",link:"messages",description:"View and send text messages to drivers.",icon:"geo-main-menu-messages",counterBadge:!0}]}]},b=function(){return[{icon:"geo-main-menu-exceptions",category:"RuleAndGroupsLink",title:"Rules & Groups",children:[{title:"Rules",link:"rules",description:"View and set up exception rules for your vehicles.",icon:"geo-main-menu-rules"},{title:"Exceptions",link:"exceptions",description:"A report showing all exception rule violations.",icon:"geo-main-menu-exceptions"},{title:"Groups",link:"groupsTree",description:"A graphical tool to view and set up hierarchical groups for users, zones, vehicles, drivers, rules, and reports.",icon:"geo-main-menu-groups"}]}]},k=function(){return[{icon:"geo-main-menu-administration",category:"AdministrationLink",title:"Administration",children:[{title:"Report Setup",category:"Reports",icon:"geo-main-menu-reportSetup",children:[{title:"Report Views",link:"customReports",description:"A list of Excel-based reports.",dataAttr:{type:"normal",href:"reportViews"}},{title:"Dashboard",link:"customReports",description:"A list of Excel-based dashboard reports.",dataAttr:{type:"dashboard",href:"dashboardReports"}},{title:"Emailed Reports",link:"customReports",description:"A list of Excel-based email reports.",dataAttr:{type:"email",href:"emailedReports"}}]},{title:"Users",link:"users",description:"View and set up users and their data access.",icon:"geo-main-menu-users"},{title:"System",category:"SystemLink",icon:"geo-main-menu-system",children:[{title:"System Settings",link:"systemSettings",description:"Configure settings that apply to the entire database."},{title:"Audit Log",link:"auditLogs",description:"A list of all events audited by the system."}]},{title:"About",link:"about",icon:"geo-main-menu-about",description:"View the application's version and license details."}]}]},d=function(){return[{icon:"geo-main-menu-marketplace",category:"MarketplaceLink",title:"Marketplace",link:"marketplace"}]},s=function(){return i(i(i(i(i(i(i(i(i(i([],c()),l()),a()),v()),y()),p()),w()),b()),k()),d())};t.getMenuTree=g;t.cloneMenu=nt})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/mainMenu/mainMenuTree"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/mainMenu/mainMenuTree"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.postponedRender=void 0;var i=require("../../../utils"),r="data-postponed-render",u=function(n,t,u,f){var o=i.generateId(),e=" "+r+'="'+o+'" ';return u.then(function(n){var i=f.querySelector("["+e.trim()+"]");i&&t(i,n)}),n(e)};t.postponedRender=u})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/views/postponedRender"),geotab.commonjs.generateExport("geotab/checkmate/ui/views/postponedRender"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.resetSvgColors=void 0;var i=function(n){return!!n.style},r=function(n){return n&&(n.removeAttribute("fill"),n.removeAttribute("stroke"),i(n)&&(n.style.fill="",n.style.stroke="")),n};t.resetSvgColors=r})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/addinsTools/resetSvgColors"),geotab.commonjs.generateExport("geotab/checkmate/addinsTools/resetSvgColors"));
(function(n,require,t){"use strict";var r=this&&this.__spreadArray||function(n,t){for(var i=0,u=t.length,r=n.length;i<u;i++,r++)n[r]=t[i];return n},u,f,e,o,i,s;Object.defineProperty(t,"__esModule",{value:!0});t.SAFE_SVG_CONFIG=t.sanitizeElement=t.createSanitizer=void 0;u=require("../../utils");f=function(n){var i=n.allowedTags.length===0?undefined:u.makeBoolHash(n.allowedTags);return{sanitizeElement:function(r){return t.sanitizeElement(r,i,n)}}};t.createSanitizer=f;e=function(n,t,i){var u=n.tagName.toLowerCase(),f;return t&&!t.hasOwnProperty(u)?undefined:(f=i.allowedAttributesByTag[u]?r(r([],i.allowedAttributesByTag[u]),i.allowedAttributes):i.allowedAttributes,(f.length>0||!i.allowEventAttributes)&&o(n,f,i.allowEventAttributes),n)};t.sanitizeElement=e;o=function(n,t,r){for(var e=n.attributes,h=e.length,f=h-1;f>=0;--f){var o=e[f],u=o.name,c=!r&&u.indexOf(s)===0,l=t.length>0&&u.indexOf(i)!==0&&t.indexOf(u.toLowerCase())<0;(l||c)&&(n.setAttribute(i+u,o.value),n.removeAttribute(u))}};t.SAFE_SVG_CONFIG={allowedTags:["a","circle","clipPath","defs","desc","discard","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","g","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","svg","switch","symbol","text","textPath","title","tspan","use","view"],allowedAttributes:[],allowedAttributesByTag:{},allowEventAttributes:!1};i="data-";s="on"})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/addinsTools/sanitize"),geotab.commonjs.generateExport("geotab/checkmate/addinsTools/sanitize"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.forEachElement=void 0;var i=function(n,i,r){for(var u,e=n.children,o=e.length,f=o-1;f>=0;--f){if(u=e[f],i(u)===undefined){n.removeChild(u);continue}r&&t.forEachElement(u,i,r)}return n};t.forEachElement=i})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/addinsTools/traverseTree"),geotab.commonjs.generateExport("geotab/checkmate/addinsTools/traverseTree"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.svgIconloader=t.parseSvgIcon=void 0;var i=require("../deferred"),r=require("./resetSvgColors"),u=require("./sanitize"),e=require("./traverseTree"),o=function(n,t){var f,o;if(!n)throw new Error("Couldn't get content of the icon");var s=t(n),h=s[0],i=s[1];if(h||!i)throw new Error(h||"Cound't parse SVG icon");if(f=u.createSanitizer(u.SAFE_SVG_CONFIG).sanitizeElement,i.removeAttribute("width"),i.removeAttribute("height"),o=r.resetSvgColors(f(i)),!o)throw new Error("Cound't sanitize SVG icon");return e.forEachElement(o,function(n){return r.resetSvgColors(f(n))},!0)};t.parseSvgIcon=o;var f=".svg",s=1e4,h=function(n,t){var e,r,u;return(t===void 0&&(t=s),e=n.substring(n.length-f.length),e!==f)?i.reject(new Error("Only SVG icons supported")):typeof fetch!="undefined"?fetch(n,{headers:{"Content-Type":"text/plain"}}).then(function(n){return n.text()}).then(function(n){return n.length>t||new Blob([n]).size>t?i.reject(new Error("Icon size is too big")):n}):(r=new XMLHttpRequest,u=i.Deferred(),r.open("GET",n,!0),r.setRequestHeader("Content-Type","text/plain"),r.onreadystatechange=function(){r.readyState===4&&(r.status===200?u.resolve(r.responseText):u.reject(new Error("Can't load SVG icon")))},r.timeout=3e4,r.ontimeout=function(){u.reject(new Error("Timeout"))},r.onerror=function(){u.reject(new Error("Can't load SVG icon"))},r.send(null),u.promise())};t.svgIconloader=h})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/addinsTools/loadIcon"),geotab.commonjs.generateExport("geotab/checkmate/addinsTools/loadIcon"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.parseSVG=void 0;var i=function(n){var u=new DOMParser,t=undefined,i,r;try{t=u.parseFromString(n,"image/svg+xml")}catch(f){return[f.message,undefined]}return t?(i=t.querySelector("parsererror"),i)?[i.textContent||"Coudn't parse SVG icon",undefined]:(r=t.querySelector("svg"),!r)?["SVG document doesn't contain image",undefined]:[undefined,r]:["SVG file is empty",undefined]};t.parseSVG=i})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/addinsTools/parseSvg"),geotab.commonjs.generateExport("geotab/checkmate/addinsTools/parseSvg"));
(function(n,require,t){"use strict";function g(n){var i=n.children.length===0?' disabled="disabled" ':"";return'<li class="mainMenuHeader" data-href="'+n.category+'" role="none">\n                <button class="mainMenuHeaderLink geo-menu-item geo-menu-item--first-lvl" role="menuitem" aria-label="'+n.title+'" data-sub-menu '+i+">\n                    "+t.makeIcon(n)+'\n                    <span class="geo-menu-item__label">'+n.title+'<\/span>\n                    <svg class="geo-menu-item__expand"><use xlink:href="#geo-menu-arrow-down"><\/use><\/svg>\n                <\/button>\n                '+h(n.title,n.children||[],n.category,!1)+"\n            <\/li>"}function nt(n){var i=n.dataAttr&&n.dataAttr.external,r=i?'href="'+n.link+'" target="_blank" data-orig="'+n.link+'"':'data-orig="'+n.link+'"';return'<li class="mainMenuHeader" role="none">\n                <a class="mainMenuHeaderLink geo-menu-item geo-menu-item--first-lvl" role="menuitem" '+r+' title="'+(n.description||"")+'" aria-label="'+n.title+'" '+e(n.dataAttr)+">\n                    "+t.makeIcon(n)+'\n                    <span class="geo-menu-item__label">'+n.title+"<\/span>\n                <\/a>\n            <\/li>"}function h(n,i,r,u){u===void 0&&(u=!1);var f=c.generateId();return'<div role="menu" class="mainMenuHeaderSubMenu" aria-label="'+n+'" aria-owns="'+f+'">\n                <ul id="'+f+'" role="none" class="geo-navigation__sub-menu" data-header="'+r+'">'+i.reduce(function(n,i){return n+t.makeLevel2Menu(i,u)},"")+"<\/ul>\n            <\/div>"}function tt(n,i){return i===void 0&&(i=!1),'<li class="mainMenuOption" role="none" data-href="'+n.category+'">\n                <button class="geo-menu-item '+(i?"geo-menu-item--third-lvl":"geo-menu-item--secondary geo-menu-item--expanded")+'" role="menuitem" aria-label="'+n.title+'" data-sub-menu>\n                    '+(i?"":t.makeIcon(n))+'\n                    <div class="geo-menu-item__label">'+n.title+'...<\/div>\n                    <svg class="geo-menu-item__expand--second"><use xlink:href="#geo-arrow-right"><\/use><\/svg>\n                <\/button>\n                '+h(n.title,n.children||[],n.category,!0)+"\n            <\/li>"}function it(n,i){i===void 0&&(i=!1);var o=e(n.dataAttr),r=n.dataAttr||{},u=r.external,s=u?'href="'+n.link+'" target="_blank" data-orig="'+n.link+'"':'data-orig="'+n.link+'"',h=n.description||"",f=r.isActionButton?"button":"a";return'<li class="mainMenuOption" role="none">\n                <'+f+' class="geo-menu-item '+(i?"geo-menu-item--third-lvl":"geo-menu-item--secondary geo-menu-item--expanded")+'" role="menuitem" '+s+' title="'+h+'" aria-label="'+n.title+'" '+o+">\n                    "+(i?"":t.makeIcon(n))+'\n                    <div class="geo-menu-item__label">\n                        <span class="geo-menu-item__title">'+n.title+"<\/span>\n                        "+t.getCounterBadge(n)+"\n                        "+(u?'<svg class="svgIcon geotabActiveIcons geo-menu-item__external"><use xlink:href="#geo-open-link"><\/use><\/svg>':"")+"\n                    <\/div>\n                <\/"+f+">\n            <\/li>"}var u,o,s;Object.defineProperty(t,"__esModule",{value:!0});t.makeMainMenu=t.makeMainMenuLayout=t.getCounterBadge=t.makeIcon=t.makeLevel2Menu=t.makeLevel1Menu=void 0;var i=require("./mainMenuTree"),c=require("../../../../utils"),l=require("../../views/postponedRender"),r=require("../../../../vanillaExtension/vanilla"),a=require("../../../addinsTools/loadIcon"),v=require("../../../addinsTools/parseSvg"),y="default",p=function(n){return i.isHeaderMenuItem(n)?g(n):nt(n)};t.makeLevel1Menu=p;u=function(n,t){return t===void 0&&(t=!1),i.isHeaderMenuItem(n)?tt(n,t):it(n,t)};t.makeLevel2Menu=u;var f=function(n,t){return'<div class="geo-menu-item__icon-slot" '+t+">"+n+"<\/div>"},w=function(n){return'<svg class="geo-menu-item__icon"><use xlink:href="#'+n+'"><\/use><\/svg>'},b=function(n,t){t===void 0&&(t=!0);var i=n.icon||"",u=t?y:"";return n.svgIcon?l.postponedRender(function(n){return f("",n)},function(n,t){var i=t?t:r.createPureIcon("puzzle");r.addClasses(i,"geo-menu-item__icon");i.setAttribute("focusable","false");n.appendChild(i)},n.svgIcon.then(function(n){return a.parseSvgIcon(n,v.parseSVG)}).catch(function(){return undefined}),document):f(w(i?i:u),"")};t.makeIcon=b;var k=function(n,t){return" data-"+n+(t?'="'+t+'"':"")},e=function(n){return n?Object.keys(n).reduce(function(t,i){return t+k(i,n[i])},""):""},d=function(n){return n.counterBadge?'<span class="menu-badge geo-menu-item__badge" style="display:none;"><\/span>':""};t.getCounterBadge=d;o=function(){return'<div class="geo-small-menu-toggle">\n                <button id="smallInnerMenuToggle" class="header-input header-input--menu-styled">\n                    <svg class="svgIcon geo-small-menu-toggle__icon"><use xlink:href="#geo-cross-thin"><\/use><\/svg>\n                <\/button>\n            <\/div>\n            <div class="mainMenuSearchBar">\n                <div class="mainMenuSearch search-bar">\n                    <button class="mainMenuSearchButton search-bar__button" aria-label="Search menu" title="Search the menu (Shift+F)">\n                        <svg class="svgIcon mainMenuSearchIcon search-bar__icon" focusable="false"><use xlink:href="#geo-loupe"><\/use><\/svg>\n                    <\/button>\n                    <div class="search-bar__input-wrapper mainMenuHidden mainMenuSearchWrapper">\n                        <svg class="search-bar__input-icon" focusable="false"><use xlink:href="#geo-loupe"><\/use><\/svg>\n                        <input type="text" placeholder="Search pages" class="mainMenuSearchInput search-bar__input" autocomplete="off" aria-label="Search menu">\n                    <\/div>\n                    <button class="mainMenuSearchCancelButton mainMenuHidden search-bar__cancel" aria-label="Cancel search" title="Cancel search" tabindex="-1">\n                        <svg class="svgIcon mainMenuCloseIcon search-bar__icon search-bar__icon--small" focusable="false"><use xlink:href="#geo-cross-thin"><\/use><\/svg>\n                    <\/button>\n                    <div class="mainMenuSearchLogo search-bar__search-logo">\n                        <div class="mainMenuCompanyLogo"><\/div>\n                    <\/div>\n                    <div class="mainMenuHidden noResultsString">No results found.<\/div>\n                <\/div>\n            <\/div>\n            <div id="navigationContainer" class="navigationContainer navigationContainer--short">\n                <div id="navigationId" class="scrollHost hardwareAccelerationClass geo-navigation__links"><\/div>\n                <button class="mainMenuScrollUp" title="Scroll up" aria-hidden="true"><svg class="svgIcon geotabButtonIcons"><use xlink:href="#geo-arrow-up"><\/use><\/svg><\/button>\n                <button class="mainMenuScrollDown" title="Scroll down" aria-hidden="true"><svg class="svgIcon geotabButtonIcons"><use xlink:href="#geo-arrow-down"><\/use><\/svg><\/button>\n            <\/div>\n            <div class="mainMenuResults search-result mainMenuHidden" tabindex="-1"><\/div>\n            <button id="innerMenuToggle" class="geo-navigation__collapse geo-menu-item geo-menu-item--first-lvl">\n                <div class="geo-menu-item__icon-slot geo-menu-item__icon-slot--blank">\n                    <svg class="geo-menu-item__icon geo-menu-item__icon--colored"><use xlink:href="#geo-thin-arrow-left"><\/use><\/svg>\n                <\/div>\n                <span class="geo-menu-item__label">Collapse<\/span>\n            <\/button>\n            <div class="geo-navigation__shadow"><\/div>'.trim()};t.makeMainMenuLayout=o;s=function(n){return'<ul class="mainMenu" role="menu">'+n.reduce(function(n,i){return n+t.makeLevel1Menu(i)},"")+"<\/ul>"};t.makeMainMenu=s})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/mainMenu/mainMenu_html"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/mainMenu/mainMenu_html"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(){this.lastFocused={value:null,prev:null,next:null,remove:function(){},isLast:function(){return!0}}}return n.prototype.add=function(n){var t={value:n,prev:this.lastFocused,next:null,remove:function(n){this.next&&(n&&(this.next.value=this.value),this.next.prev=this.prev||null);this.prev&&(this.prev.next=this.next||null);this.value=null},isLast:function(){return!this.next}};return this.lastFocused.next=t,this.lastFocused=t,t},n}(),r=new i;t.default=r})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/focusTools/focusStack"),geotab.commonjs.generateExport("geotab/checkmate/ui/focusTools/focusStack"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.FOCUSABLE_SELECTOR=void 0;t.FOCUSABLE_SELECTOR="a[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, textarea, [tabindex='0'], [contenteditable]"})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/focusTools/focusUtils"),geotab.commonjs.generateExport("geotab/checkmate/ui/focusTools/focusUtils"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=require("../../../vanillaExtension/vanilla"),u=require("./focusStack"),i=require("./focusUtils"),f=function(){function n(){var n=this;this.focusableSelector=i.FOCUSABLE_SELECTOR;this.trapPopupFocus=function(t){if(t.keyCode===9&&n.container){var u=n.container.querySelectorAll(n.focusableSelector),i=n.getFirstFocusable(u),r=n.getLastFocusable(u);t.shiftKey?document.activeElement===i&&(t.preventDefault(),r&&n.focusElement(r)):document.activeElement===r&&(t.preventDefault(),i&&n.focusElement(i))}}}return n.prototype.isRecoursivelyVisible=function(n){for(var t=n;t&&t!==this.container&&t.parentNode;){if(!r.isVisible(t))return!1;t=t.parentNode}return!0},n.prototype.isFocusable=function(n){var t=n.getAttribute("tabindex");return t!=="-1"&&this.isRecoursivelyVisible(n)},n.prototype.getFirstFocusable=function(n){for(var t,i=0;i<n.length;i++)if(t=n[i],this.isFocusable(t))return this.isRadio(t)?this.getFocusableRadio(t):t;return null},n.prototype.getLastFocusable=function(n){for(var t,i=n.length-1;i>=0;i--)if(t=n[i],this.isFocusable(t))return this.isRadio(t)?this.getFocusableRadio(t):t;return null},n.prototype.isRadio=function(n){return n.nodeName==="INPUT"&&(n.getAttribute("type")||"").toLowerCase()==="radio"},n.prototype.getFocusableRadio=function(n){var i=n.getAttribute("name"),t;return i&&this.container&&(t=this.container.querySelector("input[name='"+i+"']:checked"),t)?t:n},n.prototype.focusElement=function(n){if(n.nodeName.toLowerCase()==="input"&&n.getAttribute("type")==="radio"){var i=n.getAttribute("name")||"",t=document.querySelector("input[name='"+i+"']:checked");t?t.focus():n.focus()}else n.focus()},n.prototype.isElementInsideContainer=function(n,t){for(var i=n;i;){if(i===t)return!0;i=i.parentNode}return!1},n.prototype.trap=function(n,t){if(t===void 0&&(t=!1),this.container=n,this.focused=u.default.add(document.activeElement),this.container.addEventListener("keydown",this.trapPopupFocus,!1),!t){var f=this.container.querySelectorAll(i.FOCUSABLE_SELECTOR),r=this.getFirstFocusable(f);r&&this.focusElement(r)}},n.prototype.untrap=function(n){var r=n&&n.type!=="click",u=n&&n.pageX===0&&n.pageY===0,f=!n||r||u,t,i;this.focused&&(f&&this.focused.isLast()&&this.focused.value&&this.focused.value.focus(),t=this.focused.next&&this.focused.next.value?this.focused.next.value:null,i=t&&this.container?this.isElementInsideContainer(t,this.container):!1,this.focused.remove(i));this.focused=null;this.container&&(this.container.removeEventListener("keydown",this.trapPopupFocus,!1),this.container=null)},n}();t.default=f})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/focusTools/trapFocus"),geotab.commonjs.generateExport("geotab/checkmate/ui/focusTools/trapFocus"));
(function(n,require,t){"use strict";function r(n,t){var u=t?180:0,r=n.querySelector("."+i);r&&(r.style.transform="rotate("+u+"deg)")}Object.defineProperty(t,"__esModule",{value:!0});var i="toRotate";t.default=r})(geotab,geotab.commonjs.generateRequire("geotab/utils/rotateAnchor"),geotab.commonjs.generateExport("geotab/utils/rotateAnchor"));
(function(n,require,t){"use strict";function h(n,h){var rt,st=t.BOTTOM_RIGHT,at="data-popup-id",a=n,c=r({parent:document.body},h),b=function(n,t){n in c&&c[n].apply(w,[t])},ft=!1,v=!1,p=!1,et="popupWindowTrigger",si=c.fullWidth?" geo-popup--flex-width":"",hi=c.withHeader?" geo-popup--no-padding":"",ut="geo-popup",ci=ut+si+hi,y=c.trapFocus!==!1?new o.default:null,l=function(n){return n&&(i.hide(n),i.addClasses(n,ci)),n}(c.content),nt,k=c.position||t.BOTTOM_RIGHT,vt=c.hasOwnProperty("disabled")?c.disabled:!1,bt=function(){for(var n=l.parentNode,t;n!==c.parent&&n&&n.parentNode;){if(t=window.getComputedStyle(n).position||"",t==="relative"||t==="absolute")return n;n=n.parentNode}return n&&n.parentNode?c.parent:null},tt=bt(),li=function(n,t,r){if(!i.isVisible(n))return!1;var u=n.getBoundingClientRect();return t>=u.left&&t<=u.right&&r>=u.top&&r<=u.bottom},ai=function(n){var r=n.style.display,i,t=document.activeElement;return n.style.visibility="hidden",n.style.display="block",n.style.top="0",n.style.left="0",i=n.getBoundingClientRect(),n.style.visibility="",n.style.display=r,t&&t.focus&&t.focus(),i},d=function(n){return n+(typeof n=="string"?"":"px")},vi=function(n,t){Object.keys(t).forEach(function(i){n.style[i]=d(t[i])})},kt=function(n){var u=i.isVisible(n)&&n.offsetWidth&&n.offsetHeight,t=i.closest(n.parentNode,"."+ut),r=t&&ti(t);return u?n:r?kt(r):null},dt=(rt={},rt[t.LEFT]=function(n,t,i,r,u){return{left:n.left+n.width-i.left,top:n.top+(u?-5-r.top:0)}},rt[t.BOTTOM_LEFT]=function(n,t,i,r,u){return{left:Math.max(n.left+n.width-t.width-i.left,0),top:n.top+n.height+(u?-1-i.top:0)}},rt[t.TOP]=function(n,t,i){return{left:Math.max(n.left-i.left,0),top:n.top-t.height-1-i.top}},rt.def=function(n,t,i,r,u){return{left:Math.max(n.left-i.left,0),top:Math.floor(n.top-(u?r.top:0)+n.height)}},rt),yi=function(n,t,i,r){var u,f;return(l.style.left=d(n.left||0),l.style.top=d(n.top||0),u=l.getBoundingClientRect(),u.top<0)?(c.autoHeight||(l.style.height=d(i.height+u.top)),f=l.offsetHeight,{left:Math.max(t.left-r.left,0),top:Math.max(0,t.top-f-1-r.top)}):n},pi=function(n,t,i,r){var e=c.parent.offsetHeight+r-n.top-i.top-t.height;if(e<0&&(n.height=Math.floor(t.height+e),c.minHeight&&n.height<c.minHeight)){var o=c.minHeight-n.height,u=n.top-o,f=Math.abs(i.top);f>Math.abs(u)||u>0?(n.top=u,n.height=c.minHeight):(n.top=Math.max(u,-f),n.height=c.minHeight-(f-u))}return n},wi=function(){var n=l.getBoundingClientRect();return!n.width&&!n.height?ai(l):n},bi=function(n){var e=kt(nt)||nt,h=e.getBoundingClientRect(),y=!!(i.isVisible(e)&&e.offsetWidth&&e.offsetHeight),a=l.parentNode.getBoundingClientRect(),o=(tt||c.parent).getBoundingClientRect().height,s,v;tt||(tt=bt()||c.parent);var u=tt.getBoundingClientRect(),p=tt===c.parent?tt.scrollTop-(window.scrollY||0):tt.scrollTop,f=wi(),r=(dt[k]||dt.def)(h,f,a,u,y);k===t.TOP&&(r=yi(r,h,f,a));s=r.top;v=r.left;c.addAutoScroll?r=pi(r,f,u,p):s+f.height>=o&&(r.top=Math.floor(o-f.height),r.top<=0&&(r.top=0,r.bottom=0,r.overflowY="auto"));c.calcMaxHeight&&(l.style.maxHeight=d(o-s-u.top));v+f.width>=u.width&&(r.left=Math.floor(u.width-f.width),r.left<-u.left&&(r.left=-u.left));vi(l,i.extend(r||{},n||{}))},ht=function(){var r={},n,i;if(!l||l.style.display!=="none"){if(c.calculatePosition){if(n=c.calculatePosition(l,nt),!n)return;r=n}c.autoHeight&&(l.style.height="auto");c.calcMaxHeight&&(l.style.maxHeight="none");l.style.bottom="auto";i=a.getBoundingClientRect();c.parent.offsetHeight-i.top-i.height-Math.min(200,l.offsetHeight)<0&&(k=c.position||t.TOP);bi(r);k=c.position||t.BOTTOM_RIGHT}},gt=function(n){var t=function(){c.closeOnSelect===!0&&c.content.addEventListener("click",pt,!1);ft=!1;b("onShowEnd",n);b("onPositionChanged",n);a.setAttribute("aria-expanded","true");y&&y.trap(l,c.preventReFocusing&&c.preventReFocusing())};return l.style.display==="none"&&!vt&&i.isVisible(a)?(l.setAttribute("data-open",Date.now().toString()),ft=!0,b("onShow",n),l.style.display="block",f.default(a,!0),ht(),t(),c.content.addEventListener("keydown",yt,!1),!1):!0},yt=function(n){n.keyCode===27&&it(n)},ki=function(n){n&&l.getAttribute("data-filter")!==n&&l.id!==n||it(null,!1,!0)},ct,it=function(n,t,r){var o=function(){var i;v=!1;b("onHideEnd",n);a.setAttribute("aria-expanded","false");c.content.removeEventListener("keydown",yt,!1);di();t&&(i=lt(a),i&&i.popupWin&&i.popupWin.close(!0,!0))},u="popupWindowHiding",e=function(){ct=0;y&&y.untrap(n);i.removeClasses(l,u);i.hide(l);f.default(a,!1);o()};ct&&clearTimeout(ct);l.removeAttribute("data-open");(ni()||v)&&(v||b("onHide",n),v=!0,s()&&!r?(i.addClasses(l,u),ct=setTimeout(e,150)):e())},di=function(){var n=l.getElementsByClassName(et);return Array.prototype.forEach.call(n,function(n){n.popupWin&&n.popupWin.close()}),null},gi=function(n){for(var t=n;t;){if(i.hasClass(t,et)||i.hasClass(t,ut))return t;t=t.parentNode}return null},pt=function(n){if(!p){var t=gi(n.target)!==c.content;if(t||v)return!0;n.hideOnSelect=!0;c.content.removeEventListener("click",pt,!1);it(n,!0)}return!1},ni=function(){return i.isVisible(l)},nr=function(){var n=l.getBoundingClientRect();l.scrollHeight>l.offsetHeight&&l.offsetHeight+n.top>window.innerHeight+c.parent.scrollTop&&(l.style.height=d(window.innerHeight+c.parent.scrollTop-n.top))},tr=function(n){for(var i=l,t=n;t&&t!==i&&t!==c.parent;)t=t.parentNode;return t===i},lt=function(n){for(var i=function(n){var t=(typeof n.className=="string"?n.className:"").split(" ");return t.indexOf(ut)>-1},t=n;t;){if(i(t))return t;t=t.parentNode}return null},ti=function(n){for(var u=n.id,r=document.getElementsByClassName(et),t,i=0;i<r.length;i++)if(t=r[i],t.getAttribute(at)===u)return t;return null},ii=function(n){for(var t=n.target,i,r;t&&t!==c.parent;){if(t===a||t===l)return!0;t=t.parentNode}for(i=lt(n.target);i;){if(i===l)return!0;r=ti(i);i=a?lt(r):null}return!1},ot,ri=function(n){var t=n,r=Date.now();c.keepVisible||p||!t||ii(t)||(ot=window.requestAnimationFrame(function(){var n=!li(l,t.pageX,t.pageY)&&!tr(t.target),u=i.isVisible(l)&&!v,f=parseInt(l.getAttribute("data-open")||"")<r;n&&u&&f&&it(t,!1,!0)}))},ui=function(n){p||!i.isVisible(l)||v||ii(n)||w.close()},ir=function(n){for(var t=n;t&&t!==c.parent;){if(t.style.display==="none")return!1;t=t.parentNode}return!!t},fi=function(n){var r=n,t;!p&&i.isVisible(l)&&!v&&l.parentNode&&(t=lt(nt),nt&&(ir(nt)||t&&!i.isVisible(t))?(b("onWindowResize",r),ht(),b("onPositionChanged",r)):w.close())},w={open:function(){return gt(null),w},close:function(n,t){return ot&&window.cancelAnimationFrame(ot),it(null,n===!0,t===!0),w},isVisible:ni,resize:function(){!v&&l.parentNode&&(nr(),ht(),b("onPositionChanged"))},isOpening:function(){return ft},isHiding:function(){return v},position:function(){return k||st},disable:function(){vt=!0;it(null)},enable:function(){vt=!1},pause:function(){p||(i.removeClasses(l,ut),p=!0)},unpause:function(){p&&(i.addClasses(l,ut),p=!1)},getDimensions:function(){return l.getBoundingClientRect()},destroy:function(){g.forEach(function(n){return n()});g.length=0;window.removeEventListener("resize",fi,!1);c.content.removeEventListener("keypress",yt,!1);c.content.removeEventListener("click",pt,!1);e.unsubscribe(ei);ot&&window.cancelAnimationFrame(ot)},setOptions:function(n){var t=c.width!==(n===null||n===void 0?void 0:n.width),r=((n===null||n===void 0?void 0:n.position)||st)!==c.position;c=i.extend({},c,n||{});t&&wt(c.width);r&&(k=c.position||st,ht());y===null||y===void 0?void 0:y.untrap(null);y=c.trapFocus?new o.default:null;l.style.display!=="none"&&(y===null||y===void 0?void 0:y.trap(l,c.preventReFocusing&&c.preventReFocusing()))},getContainer:function(){return l},setTrigger:function(n){a!==n&&(oi(n,a),f.default(n,l.style.display!=="none"||ft),w.resize())}},rr=function(n){var t=n;p||(v?i.hide(l):ft&&i.show(l),l.style.display!=="none"?it(t):gt(t))},g=[],ei=u.generateId(),oi=function(n,t){t&&(i.removeClasses(t,et),t.removeAttribute("aria-haspopup"),t.popupWin=undefined,t.removeAttribute(at),t.removeAttribute("aria-controls"),g.forEach(function(n){return n()}));a=n;i.addClasses(n,et);n.setAttribute("aria-haspopup","true");n.popupWin=w;n.setAttribute(at,l.id);n.setAttribute("aria-controls",l.id);nt=c.target?c.target:n;i.removeClasses(n,"geo-caption--hidden");g.push(i.addPassiveListener(n,"click",rr));g.push(i.addPassiveListener(c.parent,"click",ri));g.push(i.addPassiveListener(c.parent,"wheel",ui));s()&&(g.push(i.addPassiveListener(c.parent,"touchstart",ri)),g.push(i.addPassiveListener(c.parent,"touchmove",ui)))},wt;return c.addAutoScroll&&i.addClasses(l,"scrollHost touchScrollClass hardwareAccelerationClass"),[t.TOP,t.LEFT,t.BOTTOM_LEFT,t.BOTTOM_RIGHT].indexOf(k)===-1&&(k=st),l.id||(l.id=u.generateId()),l.popupWin=w,wt=function(n){n!==undefined&&(l.style.width=d(n))},wt(c.width),c.minWidth&&(l.style.minWidth=d(c.minWidth)),oi(a),e.subscribe(ei,ki),window.addEventListener("resize",fi,!1),i.removeClasses(a,"geo-caption--hidden"),w}var r=this&&this.__assign||function(){return r=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});t.BOTTOM_RIGHT=t.BOTTOM_LEFT=t.LEFT=t.TOP=void 0;var i=require("../../vanillaExtension/vanilla"),u=require("../../utils"),o=require("./focusTools/trapFocus"),f=require("../../utils/rotateAnchor"),s=u.memOnce(function(){return typeof window!="undefined"?"ontouchstart"in window:!1}),e=function(){var n={},t=function(t,i){n[t]=i},i=function(t){n.hasOwnProperty(t)&&delete n[t]},r=function(t){Object.keys(n).forEach(function(i){n[i](t)})};return{subscribe:t,unsubscribe:i,trigger:r}}();t.TOP="top";t.LEFT="left";t.BOTTOM_LEFT="bottom_left";t.BOTTOM_RIGHT="bottom_right";t.default=h;h.clearAll=function(n){e.trigger(n)}})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/popupWindow"),geotab.commonjs.generateExport("geotab/checkmate/ui/popupWindow"));
(function(n,require,t){"use strict";function i(n){return n.hasOwnProperty("open")}function o(n){return i(n)&&n.type==="popup"}var f=this&&this.__assign||function(){return f=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},f.apply(this,arguments)},s;Object.defineProperty(t,"__esModule",{value:!0});t.MainMenuRenderer=t.MainMenuMode=void 0;var e=require("./mainMenu_html"),r=require("../../../../vanillaExtension/vanilla"),h=require("../../popupWindow"),c=require("../../../../utils"),l=require("./../../focusTools/focusUtils"),a=require("../../../eventHandler"),u;(function(n){n.ORIGINAL="original";n.WIDE="wide";n.NARROW="narrow"})(u=t.MainMenuMode||(t.MainMenuMode={}));s=function(){function n(n,t,i){var r=this;this.main=n;this.sub=t;this.linkWatcher=i;this.currMode=u.ORIGINAL;this.mainMenuClass="mainMenu";this.expandedMenuItem="mainMenuHeaderExpanded";this.expandedMenuTrigger="geo-menu-item--expanded";this.activeMenuItem="geo-menu-item--active";this.tree=[];this.navigation={};this.eventHandler=new a.SimpleEventHandler;this.keyDownListener=function(n){if(r.isMenuVisible())switch(n.keyCode){case 40:r.focusNext(r.currentTrigger);n.preventDefault();break;case 38:r.focusPrev(r.currentTrigger);n.preventDefault();break;case 39:r.isTextInput(r.currentTrigger)||(r.focusChild(r.currentTrigger),n.preventDefault());break;case 37:r.isTextInput(r.currentTrigger)||(r.focusParent(r.currentTrigger),n.preventDefault());break;case 9:r.changeTabbableItem()}};this.refreshLinks=function(){var n=r.searchMenuElementsInDOM(["*[data-orig]"]);Array.prototype.forEach.call(n,r.refreshLink)};this.refreshLink=function(n){var t=n.getAttribute("data-orig")||"",i=n.getAttribute("data-type")||"",u=n.hasAttribute("data-external")||n.nodeName==="button";t&&n.setAttribute("href",r.linkWatcher.getMenuLink(t,i,u))}}return n.prototype.initTree=function(){var t=this,r=this.menu.querySelectorAll(".mainMenuHeader > .mainMenuHeaderLink"),n;this.accordion=this.makeTabs(Array.prototype.map.call(r,function(n){return n}));n=this.accordion.getTabs();this.tree=n.map(function(n){return n});this.tree.forEach(function(n){return i(n)&&t.initSubMenus(n,2)});this.updateNavigation();this.initKeyboard()},n.prototype.initSubMenus=function(n,t){var u=this,e=n.subMenu,f=[],r=e.firstElementChild,i;if(r)for(i=0;i<r.children.length;i++)r.children[i].firstElementChild&&f.push(r.children[i].firstElementChild);n.children=f.map(function(n){if(n.hasAttribute("data-sub-menu")){var i=u.makePopup(n,n.nextElementSibling,t,!1);return u.initSubMenus(i,t+1),i}return u.makeLink(n,t)})},n.prototype.updateNavigation=function(){this.navigation={};this.updateNavigationLevel(this.tree,null,null)},n.prototype.updateNavigationLevel=function(n,t,r){for(var e=function(u){var e=n[u],l=function(){if(e.level===1){var r=u>0?n[u-1]:n[n.length-1];return i(r)&&r.isOpened()&&r.children.length>0?r.children[r.children.length-1]:r}return e.level===2&&t&&!o(t)?u>0?n[u-1]:t:u>0?n[u-1]:n[n.length-1]},a=function(){return e.level===1?i(e)&&e.isOpened()&&e.children.length>0?e.children[0]:u<n.length-1?n[u+1]:n[0]:e.level===2&&r&&t&&!o(t)?u<n.length-1?n[u+1]:r:u<n.length-1?n[u+1]:n[0]},v=function(){return t?t:null},y=function(){return i(e)&&e.children.length>0?e.children[0]:null},p={control:e,prev:l,next:a,parent:v,child:y},s=e.focusable,h;s.id=s.id||c.generateId();f.navigation[s.id]=p;i(e)&&(h=u<n.length-1?n[u+1]:n[0],f.updateNavigationLevel(e.children,e,h))},f=this,u=0;u<n.length;u++)e(u)},n.prototype.getNavigationItem=function(n){return this.navigation[n.id]||null},n.prototype.initKeyboard=function(){var i,n,t;for(this.sub.addEventListener("keydown",this.keyDownListener,!1),i=this.tree.length,n=0;n<i;++n)if(t=this.tree[n],t&&this.canElementBeFocused(t.focusable)){this.focusTrigger(this.tree[n].focusable);break}},n.prototype.setTabIndex=function(n){this.forEachTreeItem(function(t){return t.trigger.setAttribute("tabindex",t.trigger===n?"0":"-1")});this.currentTrigger=n;this.eventHandler.fire("focus")},n.prototype.focusTrigger=function(n){this.setTabIndex(n);n.focus()},n.prototype.forEachTreeItem=function(n,t){var r=this,u=t||this.tree;u.forEach(function(t){n(t);i(t)&&r.forEachTreeItem(n,t.children)})},n.prototype.canElementBeFocused=function(n){return!n.disabled},n.prototype.focusNext=function(n){var i=this.getNavigationItem(n),t;if(i){for(t=i.next();!this.canElementBeFocused(t.focusable);)t=this.getNavigationItem(t.focusable).next();this.focusTrigger(t.focusable)}},n.prototype.focusPrev=function(n){var i=this.getNavigationItem(n),t;if(i){for(t=i.prev();!this.canElementBeFocused(t.focusable);)t=this.getNavigationItem(t.focusable).prev();this.focusTrigger(t.focusable)}},n.prototype.focusChild=function(n){var t=this.getNavigationItem(n),r;t&&i(t.control)&&(t.control.isOpened()||t.control.open(),r=t.child(),r&&this.focusTrigger(r.focusable))},n.prototype.focusParent=function(n){var t=this.getNavigationItem(n),r;t&&(t.control.level===1&&i(t.control)&&t.control.close(),r=t.parent(),r&&i(r)&&(r.close(),this.focusTrigger(r.focusable)))},n.prototype.changeTabbableItem=function(){var n,t;if(this.currentTrigger)for(n=this.navigation[this.currentTrigger.id];n&&n.control.level>2||this.currMode===u.NARROW&&n.control.level>1;)if(t=n.parent(),t)this.setTabIndex(t.trigger),i(t)&&t.close(),n=this.navigation[t.focusable.id];else break},n.prototype.isTextInput=function(n){return n.nodeName.toLowerCase()==="input"&&n.getAttribute("type")==="text"},n.prototype.getMenuItemByTriggerLevel=function(n,t){for(var u,f,r=0;r<n.length;r++)if(u=n[r],u.trigger===t)return n[r];for(r=0;r<n.length;r++)if(u=n[r],i(u)&&(f=this.getMenuItemByTriggerLevel(u.children,t),f))return f;return null},n.prototype.getMenuItemByTrigger=function(n){return this.getMenuItemByTriggerLevel(this.tree,n)},n.prototype.getParentOfMenuItemLevel=function(n,t){var r,u,f;if(i(n)){for(r=0;r<n.children.length;r++)if(u=n.children[r],u.trigger===t)return n;for(r=0;r<n.children.length;r++)if(u=n.children[r],i(u)&&(f=this.getParentOfMenuItemLevel(u,t),f))return f}return undefined},n.prototype.getCounterBadgeElement=function(n){return n.querySelector(".menu-badge")||undefined},n.prototype.getParentOfMenuItem=function(n){for(var i,t=0;t<this.tree.length;t++)if(i=this.getParentOfMenuItemLevel(this.tree[t],n),i)return i;return undefined},n.prototype.makeTabs=function(n){var u=this,e=function(n,f){var s=function(n,f){t.forEach(function(n){return i(n)&&n.close()});a.children.length&&r.addClasses(n,u.expandedMenuItem);r.addClasses(f,u.expandedMenuTrigger)},o=function(n,t){r.removeClasses(t,u.expandedMenuTrigger);r.removeClasses(n,u.expandedMenuItem)},h=function(n){return n.classList.contains(u.expandedMenuItem)},e=f.parentNode,c=function(n){h(e)?o(e,n.currentTarget):s(e,n.currentTarget)},l=function(){return u.setTabIndex(n)},a;return n.addEventListener("click",c,!1),n.addEventListener("focus",l,!1),a={level:1,trigger:n,focusable:n,subMenu:f,isOpened:function(){return h(e)},open:function(){return s(e,n)},close:function(){return o(e,n)},destroy:function(){o(e,n);n.removeEventListener("click",c,!1);n.removeEventListener("focus",l,!1)},children:[],type:"tab"}},o=function(n){var r=function(){t.forEach(function(n){return i(n)&&n.close()})},f=function(){return u.setTabIndex(n)};return n.addEventListener("click",r,!1),n.addEventListener("focus",f,!1),{level:1,trigger:n,focusable:u.getFirstFocusable(n),destroy:function(){n.removeEventListener("click",r,!1);n.removeEventListener("focus",f,!1)}}},f=function(n){var t=n.nextElementSibling;return t&&t.classList.contains("mainMenuHeaderSubMenu")?e(n,t):o(n)},t=n.map(f),s=function(n){for(var r,u=0;u<t.length;u++){if(r=t[u],n&&r.trigger===n){i(r)&&r.close();break}i(r)&&r.close()}},h=function(n){var i=f(n);return t.push(i),i},c=function(n){for(var r,i=0;i<t.length;i++)if(r=t[i],n&&r.trigger===n){r.destroy();t.splice(i,1);break}},l=function(n){for(var i=0;i<t.length;i++)if(t[i].trigger===n)return t[i];return null};return{getTabs:function(){return t},getTab:l,addTab:h,removeTab:c,deactivateTab:s,destroy:function(){t.forEach(function(n){return n.destroy()})}}},n.prototype.isFocusOn=function(n){for(var t=document.activeElement;t&&t!==document.body;)if(t=t.parentNode,t===n)return!0;return!1},n.prototype.makePopup=function(n,t,i,u){var e=this,s=t.children[0],f,c=function(){if(n.removeEventListener("click",c,!1),s){var t=s.parentNode;t.style.display="block";f=h.default(n,{content:t,withHeader:!0,minWidth:200,position:"left",closeOnSelect:!0,trapFocus:!1,onShowEnd:function(){l.children.length?e.focusTrigger(l.children[0].focusable):f.close()},onHide:function(i){e.isFocusOn(e.sub)?(i instanceof KeyboardEvent||e.isFocusOn(t))&&e.focusTrigger(n):e.setTabIndex(n)},onHideEnd:function(){u&&window.setTimeout(function(){e.accordion&&e.accordion.deactivateTab(n)},1)},calculatePosition:function(){var r=n.getBoundingClientRect(),u=e.sub.getBoundingClientRect(),i=t.getBoundingClientRect(),f=r.left+r.width,o=window.innerWidth,s=f-u.left;f+i.width>o&&(s-=f+i.width-o);var h={left:s+5},c=r.top-u.top,l=window.innerHeight-u.top,a=c+i.height>l;return h.top=a?l-i.height:c,h},onPositionChanged:function(){var f=t.offsetHeight,n=t.offsetTop,i=t.parentNode,r=i?i.parentNode:null,e=r?r.offsetHeight:0,u=e-n-f;u<0&&(t.style.top=n+u+"px")}});f.open()}},o=r.create("DIV",{"class":"mainMenu"},{display:"none"}),a=function(){return e.setTabIndex(n)},l;return o.style.zIndex=(10004+i).toString(),o.appendChild(t.removeChild(s)),n.addEventListener("click",c,!1),n.addEventListener("focus",a,!1),this.sub.appendChild(o),l={level:i,trigger:n,focusable:n,children:[],subMenu:o,isOpened:function(){return f&&f.isVisible()},open:function(){return f?f.open():c()},close:function(){return f&&f.close()},destroy:function(){var i=o.removeChild(s);n.removeEventListener("click",c,!1);n.removeEventListener("focus",a,!1);f&&(f.close(),f.destroy());t.appendChild(i);o.parentNode&&o.parentNode.removeChild(o)},type:"popup"}},n.prototype.getFirstFocusable=function(n){var t=n.nodeName.toLowerCase(),i;return t==="a"||t==="button"?n:(i=n.querySelector(l.FOCUSABLE_SELECTOR),i||n)},n.prototype.makeLink=function(n,t){var r=this,i=function(){return r.setTabIndex(n)};return n.addEventListener("focus",i,!1),this.refreshLink(n),{level:t,trigger:n,counter:this.getCounterBadgeElement(n),focusable:this.getFirstFocusable(n),destroy:function(){n.removeEventListener("focus",i,!1)}}},n.prototype.setWideMode=function(){var n=this;this.tree.forEach(function(t,r){if(n.accordion&&i(t)&&t.type!=="tab"){var u=n.accordion.getTab(t.trigger);u.children=t.children;n.tree[r]=u;t.destroy()}});this.updateNavigation()},n.prototype.setNarrowMode=function(){var n=this;this.accordion&&this.accordion.deactivateTab();this.tree.forEach(function(t,r){var u,e;i(t)&&(u=n.makePopup(t.trigger,t.subMenu,1,!0),u.children=t.children,e=f(f({},u),{open:function(){u.open();t.open()},close:function(){u.close();t.close()}}),n.tree[r]=e)});this.updateNavigation()},n.prototype.makeSelector=function(n){var t=this;return n.map(function(n){return"."+t.mainMenuClass+" "+n}).join(", ")},n.prototype.searchMenuElementInDOM=function(n){var i=this.makeSelector(n),t=this.sub.querySelector(i);return t?t:undefined},n.prototype.searchMenuElementsInDOM=function(n){var t=this.makeSelector(n);return Array.prototype.slice.call(this.sub.querySelectorAll(t),0)},n.prototype.searchMenuItemInDOM=function(n,t){for(var i,e,f=n?'="'+n+'"':"",o=["*[data-orig"+f+"]","*[data-href"+f+"]"],r=this.searchMenuElementsInDOM(o),s=r.length,u=0;u<s;++u)if(i=r[u],e=i.dataset.type||"",i.hasAttribute("data-orig")&&e===t)return i.parentNode||undefined;return r[0]},n.prototype.findNextHeader=function(n){for(var t=n;t&&t.getAttribute("data-header");)t=t.nextElementSibling;return t},n.prototype.getItemIndex=function(n){for(var i=-1,r=n.parentNode.parentNode,t=0;t<r.children.length;t++)if(r.children[t]===n.parentNode){i=t;break}return i},n.prototype.initTopLevelItem=function(n){var r,t,f;this.accordion&&(r=this.getItemIndex(n),r>-1&&(t=this.accordion.addTab(n),this.tree.splice(r,0,t),i(t)&&this.currMode===u.NARROW&&(f=this.makePopup(t.trigger,t.subMenu,1,!0),f.children=t.children,this.tree[r]=f),this.updateNavigation()));this.refreshLink(n)},n.prototype.initInsertedItem=function(n,t){var r=this.getMenuItemByTrigger(t),u,f;r&&(i(r)?(u=void 0,u=n.nextElementSibling?this.makePopup(n,n.nextElementSibling,r.level+1,!1):this.makeLink(n,r.level+1),f=this.getItemIndex(n),r.children.splice(f,0,u)):this.refreshLink(n),this.updateNavigation())},n.prototype.cleanupTree=function(n){var t=this;(n||this.tree).forEach(function(n){i(n)&&(t.cleanupTree(n.children),n.children=[]);n.destroy();t.updateNavigation()})},n.prototype.isMenuVisible=function(){return!this.main.classList.contains("mainMenuHidden")},n.prototype.toggleParents=function(n,t){var u=this.getParentOfMenuItem(n),i;u&&(i=u.trigger,r.toggleClasses(i,this.activeMenuItem+" "+this.expandedMenuItem,t),this.toggleParents(i,t))},n.prototype.build=function(n){this.main.innerHTML=e.makeMainMenu(n);this.menu=this.main.firstChild;this.linkWatcher.attach("onChange",this.refreshLinks)},n.prototype.insertNewPage=function(n,t,i,u,f,o,s){var l=this,c,p,w,b,v,k;if(s===void 0&&(s=!1),this.menu){var h=t?this.searchMenuItemInDOM(t,""):undefined,a=h?h.firstElementChild:undefined,d=!!(h&&i&&(f||o)),g=i&&h?e.makeLevel2Menu(n,s):e.makeLevel1Menu(n),y=r.textToHTML(g);h?d?(c=this.searchMenuElementInDOM(['*[data-header="'+t+'"]']),p=c&&c.children[0],y.forEach(function(n){c&&(f&&p?c.insertBefore(n,p):c.appendChild(n),a&&(a.disabled=!1,l.initInsertedItem(n.firstElementChild,a)))})):(w=this.findNextHeader(h.nextElementSibling),b=h.parentNode,y.forEach(function(n){if(w?b.insertBefore(n,w):b.appendChild(n),a){var t=l.getParentOfMenuItem(a);t?l.initInsertedItem(n.firstElementChild,t.trigger):l.initTopLevelItem(n.firstElementChild)}})):(v=this.menu,k=v.firstChild,y.forEach(function(n){u&&k?v.insertBefore(n,k):v.appendChild(n);l.initTopLevelItem(n.firstElementChild)}))}},n.prototype.removePage=function(n,t,r){var f=n?this.searchMenuItemInDOM(n,t):null,o,u,s,e;if(f){for(o=this.getMenuItemByTrigger(f.firstElementChild),o&&o.destroy(),u=this.getParentOfMenuItem(f.firstElementChild),s=u&&i(u)?u.children:this.tree,e=0;e<s.length;e++)if(s[e]===o){s.splice(e,1);break}u&&i(u)&&u.children.length===0&&(u.trigger.disabled=!0,u.close());r&&this.accordion&&this.accordion.removeTab(f);f&&f.parentNode&&f.parentNode.removeChild(f);this.updateNavigation()}},n.prototype.updateCounterBadge=function(n,t){var u=this.searchMenuElementInDOM(['*[data-orig="'+n+'"]']),i;u&&(i=this.getMenuItemByTrigger(u),i&&i.counter)&&(r.toggleDisplay(i.counter,"",!!t),i.counter.textContent=t)},n.prototype.activateItem=function(n,t){var f=this,e=t?n+"_"+t:n,o,u,i;(this.activeElt===null||this.active!==e)&&(this.activeElt&&(r.removeClasses(this.activeElt,this.activeMenuItem+" "+this.expandedMenuItem),o=Array.prototype.slice.call(this.sub.getElementsByClassName(this.activeMenuItem)),o.forEach(function(n){r.removeClasses(n,f.activeMenuItem+" "+f.expandedMenuItem)})),u=this.searchMenuElementsInDOM(['*[data-orig="'+n+'"]']),i=u.filter(function(n){return(n.dataset.type||"")===t})[0]||u[0],i&&(r.addClasses(i,this.activeMenuItem+" "+this.expandedMenuItem),this.toggleParents(i,!0),this.activeElt=i),this.active=e)},Object.defineProperty(n.prototype,"mode",{get:function(){return this.currMode},set:function(n){if(this.currMode!==n){this.currMode=n;switch(this.currMode){case u.ORIGINAL:this.cleanupTree();this.accordion&&this.accordion.destroy();this.accordion=undefined;this.main.removeAttribute("tabindex");break;case u.WIDE:this.accordion||this.initTree();this.setWideMode();this.main.setAttribute("tabindex","-1");this.changeTabbableItem();break;case u.NARROW:this.accordion||this.initTree();this.setNarrowMode();this.main.setAttribute("tabindex","-1");this.changeTabbableItem()}}},enumerable:!1,configurable:!0}),n.prototype.show=function(){r.removeClasses(this.main,"mainMenuHidden")},n.prototype.hide=function(){r.addClasses(this.main,"mainMenuHidden")},n.prototype.clear=function(){this.linkWatcher.detach("onChange",this.refreshLinks);this.tree=[];this.navigation={};this.activeElt=null;this.mode=u.ORIGINAL;r.empty(this.main)},n.prototype.subscribeToFocus=function(n){this.eventHandler.attach("focus",n)},n}();t.MainMenuRenderer=s})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/mainMenu/mainMenuRenderer"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/mainMenu/mainMenuRenderer"));
(function(n,require,t){"use strict";function u(n){var u=[],t,r,i,f;if(n.length>0){for(t={parentName:n[0].parentName||undefined,items:[n[0]]},r=1;r<n.length;r++)i=n[r],f=t.parentName,i.parentName!==f?(u.push(t),t={parentName:i.parentName,items:[i]}):t.items.push(i);u.push(t)}return u}function f(n,t){var i=u(n);return'<ul class="search-result__list">'+i.map(function(n){return e(n,t)}).join("")+"<\/ul>"}function i(n,t){var i=!!(n.dataAttr&&n.dataAttr.external),r=n.dataAttr&&n.dataAttr.type?n.dataAttr.type:"";return t.getMenuLink(n.link,r,i)}function e(n,t){return'<div class="search-result__group">\n                '+(n.parentName?'<div class="search-result__group-name">'+n.parentName+"<\/div>":"")+'\n                <div class="search-result__group-items">'+n.items.map(function(n){return o(n,t)}).join("")+"<\/div>\n            <\/div>"}function o(n,t){var u=!!(n.dataAttr&&n.dataAttr.external),e=u?' target="_blank"':"",f=n.dataAttr&&n.dataAttr.type?n.dataAttr.type:"",o=i(n,t),s=u?'data-external="'+u+'"':"",h='data-orig="'+n.link+'"',c=f?'data-type="'+f+'"':"",l='title="'+(n.description||"")+'"';return'<li class="search-result__item">\n                <a href="'+o+'" class="search-result__link mainMenuSearchLink" '+e+" "+l+" "+h+" "+c+" "+s+">\n                    "+r.makeIcon(n)+'\n                    <div class="search-result__label">\n                        <span class="search-result__text">'+n.title+"<\/span>\n                    <\/div>\n                    "+(u?'<svg class="search-result__external""><use xlink:href="#geo-open-link"><\/use><\/svg>':"")+"\n                <\/a>\n            <\/li>"}function s(n){return'<ul class="search-result__list">\n                <li class="search-result__item">\n                    <div class="search-result__no-results">'+n+"<\/div>\n                <\/li>\n            <\/ul>"}Object.defineProperty(t,"__esModule",{value:!0});t.getNoResultsHtml=t.getMenuItemLink=t.getResultsHtml=void 0;var r=require("./mainMenu_html");t.getResultsHtml=f;t.getMenuItemLink=i;t.getNoResultsHtml=s})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/mainMenu/mainMenuSearch_html"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/mainMenu/mainMenuSearch_html"));
(function(n,require,t){"use strict";function e(n,t){var f=0;return t.forEach(function(t){n.forEach(function(n,e){i(n,t)?f+=1e4-e*1e3:r(n,t)?f+=100-e*10:u(n,t)&&(f+=10-e)})}),f}Object.defineProperty(t,"__esModule",{value:!0});t.getSearchWeight=t.getSearchKeywords=void 0;var i=function(n,t){return n===t},r=function(n,t){return n.indexOf(t)===0},u=function(n,t){return n.indexOf(t)>-1},f=function(n){return n===void 0&&(n=""),n.toLowerCase().split(" ").map(function(n){return n.trim()})};t.getSearchKeywords=f;t.getSearchWeight=e})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/mainMenu/searchWeigher"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/mainMenu/searchWeigher"));
(function(n,require,t){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});t.MainMenuSearch=void 0;var u=require("./mainMenuSearch_html"),e=require("./mainMenuRenderer"),f=require("../../../../vanillaExtension/vanilla"),r=require("./searchWeigher"),o=function(){function n(n,t,i,r,u){var f=this,o;this.container=n;this.mainMenuRenderer=t;this.linkWatcher=i;this.menuResizer=r;this.translate=u;this.pages=[];this.wasMenuCollapsed=!0;this.searchBoxClickListener=function(){f.wasMenuCollapsed=f.menuResizer.isCollapsed();f.mainMenuRenderer.mode===e.MainMenuMode.NARROW&&f.menuResizer.expand();f.show(f.searchWrapper);f.show(f.cancelButton);f.hide(f.searchButton);f.hide(f.companyLogo);f.searchInput.focus()};this.cancelSearchClickListener=function(){f.cancelSearch();f.searchButton.focus()};this.searchInputChangeListener=function(n){n.keyCode===27?(f.cancelSearch(),f.searchButton.focus()):f.updateResults()};this.cancelOnEscape=function(n){n.keyCode===27&&(f.cancelSearch(),f.searchButton.focus())};this.searchInputBlurListener=function(){f.searchInput.value.trim()===""&&f.cancelSearch()};this.refreshLinks=function(){var n=f.container.querySelectorAll(".mainMenuSearchLink");Array.prototype.forEach.call(n,function(n){var t=n.getAttribute("data-orig"),i=n.getAttribute("data-type")||"",r=n.hasAttribute("data-external");n.setAttribute("href",f.linkWatcher.getMenuLink(t,i,r))})};this.onClickListener=function(n){f.isClickOnLink(n.target)&&setTimeout(function(){f.cancelSearch();f.searchButton.focus()},1)};this.triggerSearchListener=function(n){if(n.keyCode===70&&n.shiftKey){var t=document.activeElement;t&&!f.isTextInput(t)&&(f.searchBoxClickListener(),n.preventDefault())}};o=this.container.querySelector(".mainMenuSearchBar");o&&(this.searchButton=this.container.querySelector(".mainMenuSearchButton"),this.cancelButton=this.container.querySelector(".mainMenuSearchCancelButton"),this.searchInput=this.container.querySelector(".mainMenuSearchInput"),this.searchWrapper=this.container.querySelector(".mainMenuSearchWrapper"),this.searchInput.classList.contains("search-bar__input")&&(this.searchInput.addEventListener("focus",this.manageFocus(!0),!1),this.searchInput.addEventListener("blur",this.manageFocus(!1),!1)),this.companyLogo=this.container.querySelector(".mainMenuSearchLogo"),this.resultsContainer=this.container.querySelector(".mainMenuResults"),this.searchButton.addEventListener("click",this.searchBoxClickListener,!1),this.companyLogo.addEventListener("click",this.searchBoxClickListener,!1),this.cancelButton.addEventListener("click",this.cancelSearchClickListener,!1),this.searchInput.addEventListener("keyup",this.searchInputChangeListener,!1),this.searchInput.addEventListener("blur",this.searchInputBlurListener,!1),this.resultsContainer.addEventListener("keyup",this.cancelOnEscape,!1),this.resultsContainer.addEventListener("click",this.onClickListener,!1),document.body.addEventListener("keydown",this.triggerSearchListener,!1));this.linkWatcher.attach("onChange",this.refreshLinks)}return n.prototype.show=function(n){f.removeClasses(n,"mainMenuHidden")},n.prototype.hide=function(n){f.addClasses(n,"mainMenuHidden")},n.prototype.updateResults=function(){var n,t;this.searchInput.value!==""?(this.showResults(),this.cancelButton.setAttribute("tabindex","0"),n=this.getResults(this.searchInput.value),n.length>0?(this.resultsContainer.innerHTML=u.getResultsHtml(n,this.linkWatcher),t=this.resultsContainer.querySelector(".mainMenuSearchLink"),t&&t.setAttribute("tabindex","0")):this.resultsContainer.innerHTML=u.getNoResultsHtml(this.translate("NoResultsFound"))):(this.showMenu(),this.cancelButton.setAttribute("tabindex","-1"))},n.prototype.showResults=function(){this.show(this.resultsContainer);this.mainMenuRenderer.hide()},n.prototype.showMenu=function(){this.mainMenuRenderer.show();this.hide(this.resultsContainer)},n.prototype.manageFocus=function(n){var t=this;return function(){var i=t.container.querySelector(".search-bar");i&&i.classList[n?"add":"remove"]("search-bar--active")}},n.prototype.getResults=function(n){for(var f,t,o,l,a=function(n,t){return n.weight===t.weight?n.title.length!==t.title.length?n.title.length<t.title.length?-1:1:n.title.localeCompare(t.title):n.weight>t.weight?-1:1},h=r.getSearchKeywords(n.trim()),c=this.pages,e={},s=0;s<c.length;s++)f=c[s],t=r.getSearchWeight(f.keywords,h)*1e4,t===0&&(t=r.getSearchWeight(f.parentKeywords,h)),t>0&&(t+=f.extraWeight||0,o=u.getMenuItemLink(f,this.linkWatcher),(!e[o]||t>e[o].weight)&&(e[o]=i(i({},f),{weight:t})));return l=Object.keys(e).map(function(n){return e[n]}),l.sort(a)},n.prototype.isClickOnLink=function(n){for(var t=n;t&&t!==this.container;){if(t.classList.contains("mainMenuSearchLink"))return!0;t=t.parentNode}return!1},n.prototype.isTextInput=function(n){var t=n.nodeName.toLowerCase(),i=n.getAttribute("type");return t==="textarea"||t==="select"||t==="input"&&i!=="checkbox"&&i!=="radio"||n.getAttribute("contenteditable")==="true"},n.prototype.cancelSearch=function(){this.showMenu();this.resultsContainer.innerHTML="";this.hide(this.cancelButton);this.hide(this.searchWrapper);this.show(this.companyLogo);this.show(this.searchButton);this.searchInput.value="";this.wasMenuCollapsed&&this.menuResizer.collapse()},n.prototype.addPages=function(n){var t=this;n.forEach(function(n){var u=n.alias||n.title,f=r.getSearchKeywords(u),e=n.parentName?r.getSearchKeywords(n.parentName):[];t.pages.push(i(i({},n),{keywords:f,parentKeywords:e}))});this.updateResults()},n.prototype.removePage=function(n){for(var t=0;t<this.pages.length;t++)if(this.pages[t].link===n.link){this.pages.splice(t,1);this.updateResults();break}},n.prototype.clear=function(){this.cancelSearch()},n}();t.MainMenuSearch=o})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/mainMenu/mainMenuSearch"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/mainMenu/mainMenuSearch"));
(function(n,require,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},r.apply(this,arguments)},f=this&&this.__spreadArray||function(n,t){for(var i=0,u=t.length,r=n.length;i<u;i++,r++)n[r]=t[i];return n},u,e,o;Object.defineProperty(t,"__esModule",{value:!0});t.collectAllSearchPages=t.getMenuIcon=t.getMainMenuItemIcon=void 0;u=require("./mainMenuTree");e=function(n,i){return t.getMenuIcon(n[i])};t.getMainMenuItemIcon=e;o=function(n){for(var t=n;t!==undefined;){if(t.item.icon)return t.item.icon;t=t.parent}return""};t.getMenuIcon=o;var i=function(n,i,r,u){var f=n.item;return{title:f.title,link:f.link,alias:i,dataAttr:f.dataAttr,extraWeight:u,parentName:r,icon:t.getMenuIcon(n)}},s=function(n){return{title:"Options",description:"User options",link:"options",parentName:"Users",icon:t.getMainMenuItemIcon(n,"users")}},h=function(n){var u=s(n);return[{title:"Add Device",link:"deviceSerialNo",parentName:"Devices",icon:t.getMainMenuItemIcon(n,"devices")},{title:"Transfer ELD Logs",link:"transferEld",parentName:"HOS",icon:t.getMainMenuItemIcon(n,"hosLogs")},{title:"HOS Recaps",link:"hosRecaps",parentName:"HOS",icon:t.getMainMenuItemIcon(n,"hosLogs")},{title:"Controllers",link:"engineControllers",parentName:"Engine & Maintenance",icon:t.getMainMenuItemIcon(n,"engineDiagnostics")},{title:"Fill-Ups",link:"fuelEvents",parentName:"Engine & Maintenance",icon:t.getMainMenuItemIcon(n,"fuelUsage")},{title:"EV Charging",link:"evCharging",parentName:"Engine & Maintenance",icon:t.getMainMenuItemIcon(n,"fuelUsage")},{title:"Fill-Ups Graph",link:"fuelEventsGraph",parentName:"Engine & Maintenance",icon:t.getMainMenuItemIcon(n,"fuelUsage")},{title:"Zone Types",link:"zoneTypes",parentName:"Zones & Messages",icon:t.getMainMenuItemIcon(n,"zones")},{title:"Defect Lists",link:"defectLists",parentName:"Engine & Maintenance",icon:t.getMainMenuItemIcon(n,"dvirs")},{title:"Add Defect List",link:"defectList",parentName:"Engine & Maintenance",icon:t.getMainMenuItemIcon(n,"dvirs")},{title:"Add Trailer",link:"trailer",parentName:"Engine & Maintenance",icon:t.getMainMenuItemIcon(n,"trailers")},{title:"Change Password",link:"changePassword",parentName:"Options",icon:t.getMainMenuItemIcon(n,"users")},{title:"Notifications",link:"notifications",parentName:"Activity",icon:t.getMainMenuItemIcon(n,"users")},r({},u),{title:"My Reports",link:"myReports",parentName:"Users",icon:t.getMainMenuItemIcon(n,"users")},{title:"Trips Summary",link:"tripsSummary",parentName:"Map",icon:t.getMainMenuItemIcon(n,"tripsHistory")},{title:"Fleet Summary Graph",link:"fleetSummaryReport",parentName:"Activity",icon:t.getMainMenuItemIcon(n,"tripsHistory")},{title:"Customer stops",link:"customerStopsReport",parentName:"Activity",icon:t.getMainMenuItemIcon(n,"zoneVisits")},{title:"Security Clearances",link:"clearances",parentName:"Users",icon:t.getMainMenuItemIcon(n,"users")},{title:"Notification Templates",link:"notificationTemplates",parentName:"Rules & Groups",icon:t.getMainMenuItemIcon(n,"rules")},{title:"Add Email Template",link:"notificationTemplateEmail",parentName:"Rules & Groups",icon:t.getMainMenuItemIcon(n,"rules")},{title:"Add Web Template",link:"notificationTemplateWebRequest",parentName:"Rules & Groups",icon:t.getMainMenuItemIcon(n,"rules")},{title:"Add Text Template",link:"notificationTemplateText",parentName:"Rules & Groups",icon:t.getMainMenuItemIcon(n,"rules")},{title:"Distribution Lists",link:"distributionLists",parentName:"Rules & Groups",icon:t.getMainMenuItemIcon(n,"rules")},{title:"Add Distribution List",link:"distributionList",parentName:"Rules & Groups",icon:t.getMainMenuItemIcon(n,"rules")},{title:"Exceptions summary",link:"exceptionsSummary",parentName:"Rules & Groups",icon:t.getMainMenuItemIcon(n,"exceptions")},{title:"Add Rule",link:"rule",parentName:"Rules & Groups",icon:t.getMainMenuItemIcon(n,"rules")},{title:"Trips Density",link:"tripsDensity",parentName:"Activity",icon:t.getMainMenuItemIcon(n,"tripsHistory")},{title:"Engine Data Profile",link:"engineDataProfile",parentName:"Engine & Maintenance",icon:t.getMainMenuItemIcon(n,"tripsHistory")},{title:"Trips idling summary",link:"tripsIdlingSummary",parentName:"Activity",icon:t.getMainMenuItemIcon(n,"tripsHistory")},{title:"Add Work Hours",link:"workTime",parentName:"Activity",icon:t.getMainMenuItemIcon(n,"WorkTimeLink")},{title:"Add Work Holiday",link:"workHoliday",parentName:"Activity",icon:t.getMainMenuItemIcon(n,"WorkTimeLink")},{title:"Device Installation History",link:"deviceInstallHistory",parentName:"Devices",icon:t.getMainMenuItemIcon(n,"devices")},{title:"New Installed Device(s)",link:"deviceInstallation",parentName:"Devices",icon:t.getMainMenuItemIcon(n,"devices")},i(n.devices,"Vehicle"),i(n.devices,"Device"),i(n.hosLogs,"HOS","HOS",3),i(n.hosViolations,"HOS","HOS",2),i(n.hosAvailability,"HOS","HOS",1),i(n.hosLogs,"ELD","HOS",3),i(n.hosViolations,"ELD","HOS",2),i(n.hosAvailability,"ELD","HOS",1),{title:"HOS Recaps",link:"hosRecaps",alias:"ELD",parentName:"HOS",icon:t.getMainMenuItemIcon(n,"hosLogs")},{title:"Add HOS Log",link:"hosLog",alias:"ELD",parentName:"HOS",icon:t.getMainMenuItemIcon(n,"hosLogs")},i(n.dvirs,"DVIR","Engine & Maintenance"),{title:"Add Inspection",link:"dvir",alias:"DVIR",parentName:"Engine & Maintenance",icon:t.getMainMenuItemIcon(n,"dvirs")},i(n.map,"GPS","Map"),i(n.routeCompletion,"Trip","Map"),i(n.tripsHistory,"Trip","Map"),i(n.users,"Driver","Administration"),i(n.engineFaults,"Engine","Engine & Maintenance",2),i(n.engineMeasurements,"Engine","Engine & Maintenance",1),i(n.zones,"geofence","Zones & Messages",2),i(n.importZones,"geofence","Zones & Messages",1),{title:"Add Zone Type",link:"zoneType",parentName:"Zones & Messages",icon:t.getMainMenuItemIcon(n,"zones")},i(n.rules,"Safety","Rules & Groups"),i(n.rules,"Speeding","Rules & Groups"),i(n.rules,"harsh","Rules & Groups"),i(n.rules,"cornering","Rules & Groups"),i(n.rules,"braking","Rules & Groups"),r(r({},u),{alias:"Change Password",extraWeight:-1}),r(r({},u),{alias:"language"}),r(r({},u),{alias:"feature preview"}),r(r({},u),{alias:"Time"}),r(r({},u),{alias:"Units"}),{title:"Add User",link:"user",parentName:"Users",icon:t.getMainMenuItemIcon(n,"users")},{title:"Add Custom Profile",link:"customUnitProfile",parentName:"Users",alias:"Units",icon:t.getMainMenuItemIcon(n,"users")},i(n.devices,"edit",undefined,6),i(n.users,"edit","Administration",5),i(n.zones,"edit","Zones & Messages",4),i(n.hosLogs,"edit","HOS",3),i(n.rules,"edit","Rules & Groups",2),i(n.systemSettings,"edit","Administration",1),{title:"Credits",link:"credits",parentName:"Administration",icon:t.getMainMenuItemIcon(n,"about")},{title:"Material Management",link:"materialManagement",parentName:"Material Management",icon:t.getMainMenuItemIcon(n,"rules")},{title:"Maintenance Types",link:"maintenanceTypes",parentName:"Maintenance",icon:t.getMainMenuItemIcon(n,"reminders")},{title:"Add Reminder",link:"maintenanceReminder",parentName:"Maintenance",icon:t.getMainMenuItemIcon(n,"reminders")},{title:"Active Insights Electrical Systems Rating",link:"activeinsightselectricalsystemsrating",parentName:"Dashboard & Analytics",icon:t.getMainMenuItemIcon(n,"activeInsights")},{title:"Active Insights New Zone Detail",link:"activeinsightsnewzonedetail",parentName:"Dashboard & Analytics",icon:t.getMainMenuItemIcon(n,"activeInsights")},{title:"Active Insights New Zones",link:"activeinsightsnewzones",parentName:"Dashboard & Analytics",icon:t.getMainMenuItemIcon(n,"activeInsights")},{title:"Active Insight",link:"activeinsight",parentName:"Dashboard & Analytics",icon:t.getMainMenuItemIcon(n,"activeInsights")},{title:"Active Insight Detail",link:"activeinsightdetail",parentName:"Dashboard & Analytics",icon:t.getMainMenuItemIcon(n,"activeInsights")}]},c=function(n){return!!(n.dataAttr&&n.dataAttr.isActionButton)},l=function(n){var i=n||u.cloneMenu().hash,e=Object.keys(i).map(function(n){var f=i[n],e=f.item,o=f.parent&&u.isHeaderMenuItem(f.parent.item)?f.parent.item.title:undefined;return r(r({},e),{parentName:o,icon:t.getMenuIcon(f)})}).filter(function(n){return u.isLinkMenuItem(n)&&!c(n)});return f(f([],h(i)),e)};t.collectAllSearchPages=l})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/mainMenu/mainMenuSearchPages"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/mainMenu/mainMenuSearchPages"));
(function(n,require,t){"use strict";var i,r,u;Object.defineProperty(t,"__esModule",{value:!0});t.MainMenuScroll=t.getScrollWidth=void 0;i=require("../../../../vanillaExtension/vanilla");r=function(){var n=document.createElement("div"),t,i;return n.style.visibility="hidden",n.style.overflow="scroll",document.body.appendChild(n),t=document.createElement("div"),n.appendChild(t),i=n.offsetWidth-t.offsetWidth,n.parentNode&&n.parentNode.removeChild(n),i};t.getScrollWidth=r;u=function(){function n(n,t,i){var r=this;this.container=n;this.contentContainer=t;this.scrollableElement=i;this.controlsHeight=30;this.containerHeight=0;this.getControls();this.scrollDown&&this.scrollDown.addEventListener("click",function(){r.scroll()},!1);this.scrollUp&&this.scrollUp.addEventListener("click",function(){r.scroll(!1)},!1);this.containerHeight=this.container.offsetHeight;window.addEventListener("resize",function(){var n=r.container.offsetHeight;r.containerHeight!==n&&(r.scrollPosition=0,r.containerHeight=n)})}return n.prototype.getControls=function(){this.scrollUp=this.container.querySelector(".mainMenuScrollUp");this.scrollDown=this.container.querySelector(".mainMenuScrollDown");this.scrollOverlay=this.container.querySelector(".mainMenuScrollOverlay")},n.prototype.toggleControls=function(n,t){this.scrollUp&&i.toggle(this.scrollUp,n);this.scrollDown&&i.toggle(this.scrollDown,t)},n.prototype.animateScroll=function(n){var r=this,f=this.scrollPosition,t=f,u=15,e=function(){f>n?t-u<n?t=n:t-=u:t+u>n?t=n:t+=u;t===n?(r.scrollPosition=n,setTimeout(function(){r.scrollOverlay&&i.hide(r.scrollOverlay)},500)):(r.scrollableElement.scrollTop=t,window.requestAnimationFrame(e))};this.scrollOverlay&&i.show(this.scrollOverlay);window.requestAnimationFrame(e)},n.prototype.scroll=function(n){n===void 0&&(n=!0);var i=this.container.offsetHeight,f=this.contentContainer.offsetHeight,r=f-i,t=0,u=this.controlsHeight*2;n?(t=this.scrollPosition+i-u,t>r&&(t=r)):(t=this.scrollPosition-i+u,t<0&&(t=0));this.animateScroll(t)},n.prototype.updateScrollControls=function(){var n=this.container.offsetHeight,i=this.contentContainer.offsetHeight,t=this.contentContainer.offsetHeight-n;i>n?this.scrollPosition===0?this.toggleControls(!1,!0):this.scrollPosition>0&&this.scrollPosition<t?this.toggleControls(!0,!0):this.scrollPosition>=t?this.toggleControls(!0,!1):this.toggleControls(!1,!1):this.toggleControls(!1,!1)},Object.defineProperty(n.prototype,"scrollPosition",{get:function(){return this.scrollableElement.scrollTop},set:function(n){this.scrollableElement.scrollTop=n;this.updateScrollControls()},enumerable:!1,configurable:!0}),n.prototype.destroy=function(){this.scrollUp&&this.container.removeChild(this.scrollUp);this.scrollDown&&this.container.removeChild(this.scrollDown)},n}();t.MainMenuScroll=u})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/mainMenu/mainMenuScroll"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/mainMenu/mainMenuScroll"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.MenuShadow=void 0;var i=function(){function n(n,t){var i=this;this.scrollElement=n;this.menuElement=t;this.shadowHeight=9;this.createShadows=function(){i.topShadow=document.createElement("div");i.topShadow.className="menu-shadow menu-shadow--top";i.scrollElement.appendChild(i.topShadow);i.botShadow=document.createElement("div");i.botShadow.className="menu-shadow menu-shadow--bot";i.scrollElement.appendChild(i.botShadow)};this.alignShadows=function(){var n=i.scrollElement.getBoundingClientRect(),t=i.menuElement.offsetTop;i.topShadow.style.top=n.top-t+"px";i.botShadow.style.top=n.bottom-t-i.shadowHeight+"px";i.topShadow.style.width=i.scrollElement.offsetWidth+"px";i.botShadow.style.width=i.scrollElement.offsetWidth+"px"};this.handleScroll=function(){i.topShadow.style.visibility=i.scrollElement.scrollTop!==0?"visible":"hidden";i.botShadow.style.visibility=i.scrollElement.scrollTop+i.scrollElement.offsetHeight<i.scrollElement.scrollHeight?"visible":"hidden"};this.resize=function(){i.alignShadows();i.handleScroll()};this.createShadows();this.alignShadows();this.handleScroll();this.scrollElement.addEventListener("scroll",this.handleScroll,!1);window.addEventListener("resize",this.resize,!1)}return n}();t.MenuShadow=i})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/mainMenu/menuShadow"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/mainMenu/menuShadow"));
(function(n,require,t){"use strict";var h=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),r,i,f,e,o,u,s;Object.defineProperty(t,"__esModule",{value:!0});t.loadContent=t.inlineScript=t.loadStyle=t.loadScript=t.JS_TYPE=void 0;r=require("../vanillaExtension/vanilla");i=require("../checkmate/deferred");t.JS_TYPE="text/javascript";f=function(n,u,f,e,o){f===void 0&&(f=t.JS_TYPE);e===void 0&&(e=!0);o===void 0&&(o="");var h=i.Deferred(),s=r.create("script");return s.async=e,s.type=f,o.length>0&&(s.integrity=o,s.setAttribute("crossorigin","anonymous")),s.src=n,s.addEventListener("error",function c(n){s.removeEventListener("error",c,!1);h.reject(n)},!1),s.addEventListener("load",function l(){s.removeEventListener("load",l,!1);h.resolve(undefined)},!1),u.appendChild(s),h.promise()};t.loadScript=f;e=function(n,t){var u=r.create("link");return u.href=n,u.rel="stylesheet",t.appendChild(u),i.resolve(undefined)};t.loadStyle=e;o=function(n,t,u){if(!n)return i.reject(new Error("No script text"));var f=r.create("script");return f.text=n,f.type=u,t.appendChild(f),i.resolve(undefined)};t.inlineScript=o;u=function(n){function t(t,i){var r=n.call(this,t)||this;return r.status=i,r}return h(t,n),t}(Error);s=function(n){var t=new XMLHttpRequest,r=i.Deferred();return t.open("GET",n,!0),t.setRequestHeader("Content-Type","text/plain"),t.onreadystatechange=function(){t.readyState===4&&(t.status===200?r.resolve(t.responseText):r.reject(new u("Can't load content",t.status)))},t.timeout=3e4,t.ontimeout=function(){r.reject(new u("Timeout",408))},t.onerror=function(){return r.reject(new u("Can't load content",t.status||0))},t.send(null),r.promise()};t.loadContent=s})(geotab,geotab.commonjs.generateRequire("geotab/utils/loadFiles"),geotab.commonjs.generateExport("geotab/utils/loadFiles"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.fetchIcons=void 0;var f=require("../../../../utils"),i=require("../../../../utils/loadFiles"),r=require("../../../../vanillaExtension/vanilla"),u=require("../../../deferred"),e=function(n,t){return f.isWhiteLabeled(t.domain)?i.loadContent(window.location.origin+"/"+n+"/brands/"+t.domain+"/mainMenuIcons.svg").catch(function(){return undefined}):u.resolve(undefined)},o=function(n,t){if(t){var i=r.textToHTML(t)[0];return n.appendChild(i),Array.prototype.map.call(i.children,function(n){return n.id})}return[]},s=function(n,t,f){return u.together([i.loadContent(window.location.origin+"/"+t+"/geotab/checkmate/ui/modules/mainMenu/mainMenuIcons.svg"),e(t,f)]).then(function(t){var s=t[0],h=t[1],e=o(n,h),f=r.textToHTML(s)[0],u,i;if(e.length>0)for(u=f.children,i=u.length-1;i>=0;--i)e.indexOf(u[i].id)>=0&&f.removeChild(u[i]);n.appendChild(f)})};t.fetchIcons=s})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/mainMenu/fetchIcons"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/mainMenu/fetchIcons"));
(function(n,require,t){"use strict";var c=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),u=this&&this.__assign||function(){return u=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},u.apply(this,arguments)},h;Object.defineProperty(t,"__esModule",{value:!0});t.MainMenu=t.fetchIcons=t.MainMenuMode=void 0;var i=require("./mainMenuTree"),f=require("../../../../utils"),e=require("../../../../vanillaExtension/vanilla"),r=require("./mainMenuRenderer");Object.defineProperty(t,"MainMenuMode",{enumerable:!0,get:function(){return r.MainMenuMode}});var l=require("./mainMenuSearch"),a=require("./mainMenu_html"),v=require("../../../eventHandler"),o=require("./mainMenuSearchPages"),s=require("./mainMenuScroll"),y=require("./menuShadow"),p=require("./fetchIcons");Object.defineProperty(t,"fetchIcons",{enumerable:!0,get:function(){return p.fetchIcons}});h=function(n){function t(t,i,u,f,e,o){var h=n.call(this)||this;return h.mainMenuContainer=t,h.hasAccessToPage=i,h.lang=u,h.resizer=f,h.localizer=e,h.linkWatcher=o,h.newPagesHash={},h.collapsedMenuScrollDisabled=s.getScrollWidth()>0,t.innerHTML=a.makeMainMenuLayout(),h.menuContainer=h.mainMenuContainer.querySelector("#navigationId"),h.popupsContainer=h.mainMenuContainer.querySelector("#navigationContainer"),h.innerMenuToggle=h.mainMenuContainer.querySelector("#innerMenuToggle"),h.innerSmallMenuToggle=h.mainMenuContainer.querySelector("#smallInnerMenuToggle"),h.innerMenuToggle&&h.innerMenuToggle.addEventListener("click",function(){h.resizer.isCollapsed()?(h.resizer.expand(),h.mode=r.MainMenuMode.WIDE):(h.resizer.collapse(),h.mode=r.MainMenuMode.NARROW)},!1),h.innerSmallMenuToggle&&h.innerSmallMenuToggle.addEventListener("click",function(){h.resizer.collapse()},!1),h.renderer=new r.MainMenuRenderer(h.menuContainer,h.popupsContainer,h.linkWatcher),h.search=new l.MainMenuSearch(h.mainMenuContainer,h.renderer,h.linkWatcher,h.resizer,h.localizer.translateKey),h.renderer.subscribeToFocus(function(){h.menuScroll&&h.menuScroll.updateScrollControls()}),h}return c(t,n),t.prototype.createDependencyItem=function(n){return{inside:[],after:[],item:n}},t.prototype.getPath=function(n){return n.path||""},t.prototype.resolveDependencies=function(n,t){var r=this,u=function(n){return i.getMenuItemHash(r.generateNewMenu(n))},o=n.reduce(function(n,t){return n[u(t)]=t,n},{}),h=function(n,t,i){for(var f,e,r=n.length-1;r>=0;r--)if(f=n[r],e=f.item&&u(f.item)||"",t[e]&&e!==i)return f;return null},s=function(n,t){var d=n.tree,f=n.hash,c=n.wholeHash,v=e.extend({},t),y=u(v),b,w,k;if(!f[y]){var l=r.createDependencyItem(v),a=r.getPath(v),p=a[a.length-1]==="/",i=p?a.substring(0,a.length-1):a;f[y]=l;c[y]=l;f[i]||(o[i]?s(n,o[i]):(c[i]&&(b=c[i][p?"inside":"after"],w=h(b,c,y),w&&w.item&&(i=u(w.item),v.path=i,p=!1,b.push(l))),f[i]=r.createDependencyItem(null),c[i]=c[i]||f[i],d.push(f[i])));k=f[i];p?k.inside.push(l):k.after.push(l)}return n},f=function(n,t){return t.item&&n.push(t.item),t.inside.reduceRight(f,n),t.after.reduceRight(f,n),n},c=n.reduce(s,{wholeHash:t,hash:{},tree:[]});return c.tree.reduce(f,[])},t.prototype.clear=function(){this.renderer.clear()},t.prototype.generateNewMenu=function(n){var e=n.menuName?typeof n.menuName=="string"?n.menuName:n.menuName[this.lang]||"":"",t=f.htmlEscape(e)||"**Unknown add-in",i=f.htmlEscape((n.hash||n.menuId||"").replace(/\//i,"")),r=n.icon,u=n.svgIcon;return n.menuId?{title:t,category:i,icon:r,svgIcon:u,children:[]}:{title:t,link:i,icon:r,svgIcon:u,dataAttr:n.dataAttr}},t.prototype.getMenuItemName=function(n){return i.isHeaderMenuItem(n)||i.isLinkMenuItem(n)?n.title:""},t.prototype.generateNewCustomPage=function(n){return{hash:i.isHeaderMenuItem(n)?"":n.link,menuId:i.isHeaderMenuItem(n)?n.category:undefined,path:"",icon:n.icon,menuName:this.getMenuItemName(n)}},t.prototype.findItem=function(n,t){for(var i=0;i<n.length;++i)if(n[i]===t)return i;return-1},t.prototype.findAliveParent=function(n){for(var t=n;t&&t.isRemoved;)t=t.parent;return t},t.prototype.insertPages=function(n){var t=this;this.resolveDependencies(n,this.newPagesHash).forEach(function(n){var c,y=t.currMenuHash,s=t.currMenuTree,e,h=t.getPath(n),l=h.replace(/\//i,""),r=y[l],p=!r||r.isRemoved,w=!p&&h[h.length-1]==="/",b=h==="/",f=t.generateNewMenu(n),a,v,k;r=t.findAliveParent(r);l=r?i.getMenuItemHash(r.item):"";r?w?(i.isHeaderMenuItem(r.item)&&r.item.children.unshift(f),e={item:f,parent:r,isRemoved:!1}):(a=(r.parent?r.parent.item.children:s)||[],v=t.findItem(a,r.item),v>=0?a.splice(v,0,f):s.push(f),e={item:f,isRemoved:!1,parent:r.parent}):(b?s.unshift(f):s.push(f),e={item:f,parent:undefined,isRemoved:!1});k=e.parent?!!e.parent.parent:!1;y[i.getMenuItemHash(f)]=e;t.renderer.insertNewPage(f,l,!!e.parent,b,w,p,k);!i.isLinkMenuItem(f)||((c=f.dataAttr)===null||c===void 0?void 0:c.skipFromSearch)||t.search.addPages([u(u({},f),{icon:r?o.getMenuIcon(r):"",parentName:r&&i.isHeaderMenuItem(r.item)?r.item.title:undefined})])})},t.prototype.deletePages=function(n){var t=this,r=[];this.resolveDependencies(n||[],{}).reverse().forEach(function(n){var c=t.generateNewMenu(n),e=i.getMenuItemHash(c),u=t.currMenuHash[e],o,s,h,f;delete t.newPagesHash[e];u&&(o=(u.parent?u.parent.item.children:t.currMenuTree)||[],s=t.findItem(o,u.item),u.isRemoved=!0,s>=0&&o.splice(s,1),i.isHeaderMenuItem(u.item)&&u.item.children.length&&(h=u.item.children.map(function(n){return t.generateNewCustomPage(n)}),t.removeItems(h),r=r.concat(h)),delete t.currMenuHash[e],i.isLinkMenuItem(u.item)&&t.search.removePage(u.item),f=u.parent?u.parent.item:undefined,f&&f.children.length===0&&!f.alwaysPresent&&t.removeItems([t.generateNewCustomPage(f)]));var l=i.getMenuItemLinkPair(c),a=l[0],v=l[1];t.renderer.removePage(a,v,n.menuId)});r.length&&(this.insertPages(r),r.length=0)},t.prototype.filterTree=function(n,t){for(var r,f,e,o,u=n.length-1;u>=0;--u)if(r=n[u],i.isHeaderMenuItem(r)){if(r.children=this.filterTree(r.children,t),r.alwaysPresent)continue;r.preventCollapsing||r.children.length!==1||(f=r.children[0],t[r.category].isRemoved=!0,e=i.getMenuItemHash(f),o=i.getMenuItemHash(r),n.splice(u,1,f),t[e].parent=t[o].parent,f.icon||(f.icon=r.icon));r.children.length===0&&(t[r.category].isRemoved=!0,n.splice(u,1))}else{var s=i.getMenuItemHash(r),h=r.dataAttr&&r.dataAttr.external,c=i.isLinkMenuItem(r)&&!h?r.link:s;this.hasAccessToPage(c)||(n.splice(u,1),t[s].isRemoved=!0)}return n},t.prototype.setSearchPages=function(n){var t=this,f=function(n){var t=i.getMenuItemHash(n),r=n.dataAttr||{},u=r.external;return i.isLinkMenuItem(n)&&!u?n.link:t},r=o.collectAllSearchPages(n).filter(function(n){var i,r=f(n),u=(i=n.dataAttr)===null||i===void 0?void 0:i.skipFromSearch;return t.hasAccessToPage(r)&&!u}),e=r.reduce(function(n,t){return n.push(t.title),t.alias&&n.push(t.alias),t.parentName&&n.push(t.parentName),t.description&&n.push(t.description),n},[]);this.localizer.translateSentences(e).then(function(n){var i=n.dict||{},f=r.map(function(n){var t=u({},n);return t.title=i[t.title],t.description&&(t.description=i[t.description]),t.alias&&(t.alias=i[t.alias]),t.parentName&&(t.parentName=i[t.parentName]),t});t.search.addPages(f)})},t.prototype.toggleCollapsedMenuScroll=function(n){n===void 0&&(n=!1);e.toggleClasses(this.menuContainer,"geo-navigation__links--collapsed",n)},t.prototype.build=function(){var n=i.cloneMenu(),r=n.tree,t=n.hash;this.clear();this.currMenuHash=t;this.currMenuTree=this.filterTree(r,this.currMenuHash);this.renderer.build(this.currMenuTree);this.setSearchPages(t);this.menuContainer.firstElementChild&&this.collapsedMenuScrollDisabled&&(this.toggleCollapsedMenuScroll(!0),this.menuScroll&&this.menuScroll.destroy(),this.menuScroll=new s.MainMenuScroll(this.popupsContainer,this.menuContainer.firstElementChild,this.popupsContainer.firstElementChild),this.menuScroll.updateScrollControls());this.menuShadow=new y.MenuShadow(this.menuContainer,this.mainMenuContainer)},t.prototype.updateCounterBadge=function(n,t){this.renderer.updateCounterBadge(n,t)},t.prototype.removeItems=function(n){this.deletePages(n);this.menuShadow&&this.menuShadow.resize()},t.prototype.addItems=function(n){this.insertPages(n);this.menuScroll&&this.menuScroll.updateScrollControls();this.menuShadow&&this.menuShadow.resize()},t.prototype.getItem=function(n){var t=this.currMenuHash[n];return t&&t.item},t.prototype.activateItem=function(n,t){this.renderer.activateItem(n,t)},t.prototype.doesMenuItemExist=function(n){var t=this.currMenuHash[n];return!!(t&&!t.isRemoved)},t.prototype.getFullPath=function(n){for(var i=[],t=this.currMenuHash[n];t;)i.push(this.getMenuItemName(t.item)),t=t.parent;return i},Object.defineProperty(t.prototype,"mode",{get:function(){return this.renderer.mode},set:function(n){var t=this.renderer.mode;this.renderer.mode=n;t!==n&&this.mode===r.MainMenuMode.NARROW&&this.search.cancelSearch();this.collapsedMenuScrollDisabled&&this.toggleCollapsedMenuScroll(n===r.MainMenuMode.NARROW);this.menuScroll&&this.menuScroll.updateScrollControls()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"filter",{get:function(){return this.linkWatcher.filter},set:function(n){this.linkWatcher.filter=n},enumerable:!1,configurable:!0}),t}(v.SimpleEventHandler);t.MainMenu=h})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/mainMenu/mainMenu"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/mainMenu/mainMenu"));
(function(n,require,t){"use strict";var f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt;Object.defineProperty(t,"__esModule",{value:!0});t.isWebGLSupported=t.isAndroidDevice=t.isiOSDevice=t.isMobileApp=t.isMobileSDKApp=t.isWebViewApp=t.isIFrameHosted=t.isBrowserSupportColorPicker=t.shouldNativeDatePickerBeShown=t.isBrowserSupportPointerEvents=t.getMaxBrowserUrlLength=t.isBrowserSupportTouchEvents=t.isOldBrowser=t.isBrowserSupportTimeInput=t.isBrowserSupportLocalDateTimeInput=t.isBrowserSupportDateTimeInput=t.isBrowserSupportDateInput=t.isRunningStandalone=t.isMobile=void 0;var i=require("../utils"),it=i.memOnce(function(){var n=typeof navigator!="undefined"?navigator:window.navigator;return/(iPhone)|(iPod)|(Mobile Safari)/i.test(n.userAgent)||/(Android).+(Mobile).+(Firefox)/i.test(n.userAgent)||/(iPad)|(Android 3)|(Android 4)/i.test(n.userAgent)?!0:!1}),rt=i.memOnce(function(){var t,n=document.createElement("IFRAME"),r="blank.html",u=function(){if(n.contentWindow){for(var u=n.contentWindow.location,i="#";i.length<6e3;)i+="111111111111111111111111111111111111111111111111111111111111111111111111111111111111";u.replace(r+i);i.length!==u.hash.length&&(t=u.hash.length&&1950);t=t||0}},i=function(){try{u()}catch(f){t=0}var r=n.parentNode;r&&r.removeChild(n);n.removeEventListener("load",i,!1)};return n.setAttribute("src",r+"#1"),n.addEventListener("load",i,!1),n.style.display="none",document.body.appendChild(n),function(){return t===undefined&&i(),t}}),ut=function(){var n=!0;try{document.createEvent("TouchEvent")}catch(t){n=!1}return n}(),r=i.memOnce(function(){var n=document.createElement("input");return function(t,i){return n.setAttribute("type",t),n.setAttribute("value",i),n.type===t&&n.value!==i}}),u=i.memOnce(function(n){var t=r();return t(n,"2013-1-1")}),ft=i.memOnce(function(){for(var t=[function(){return typeof HTMLElement.prototype.insertAdjacentHTML=="function"},function(){return!!window.requestAnimationFrame},function(){return!!document.documentElement&&!!document.documentElement.classList},function(){return typeof matchMedia=="function"},function(){return!!window.FormData},function(){return!!window.crypto},function(){try{eval("() => {}")}catch(n){return!1}return!0},function(){try{eval("async () => {}")}catch(n){if(n instanceof SyntaxError)return!1;throw n;}return!0}],n=t.shift();n;){if(!n())return!0;n=t.shift()}return!1}),et=i.memOnce(function(){return window.matchMedia("(display-mode: standalone)").matches||"standalone"in window.navigator&&!!window.navigator.standalone}),ot=i.memOnce(function(){return window.navigator.userAgent.match(/Android|iPhone|iPad|iPod|IEMobile/i)}),st=function(){return it()};t.isMobile=st;f=function(){return et()};t.isRunningStandalone=f;e=function(){return u("date")};t.isBrowserSupportDateInput=e;o=function(){var n=r();return n("datetime","2013-1-1")};t.isBrowserSupportDateTimeInput=o;s=function(){var n=r();return n("datetime-local","2013-1-1")};t.isBrowserSupportLocalDateTimeInput=s;h=function(){return u("time")};t.isBrowserSupportTimeInput=h;c=function(){return ft()};t.isOldBrowser=c;l=function(){return ut};t.isBrowserSupportTouchEvents=l;a=function(){var n=rt()();return n?n:0};t.getMaxBrowserUrlLength=a;v=function(){return!!window.PointerEvent};t.isBrowserSupportPointerEvents=v;y=function(){return ot()};t.shouldNativeDatePickerBeShown=y;p=function(){var n=r();return n("color","hello world")};t.isBrowserSupportColorPicker=p;w=function(){try{return window.self!==window.top}catch(n){return!0}};t.isIFrameHosted=w;b=function(){var n=window;return!!(n&&(n.isInWebView&&n.isInWebView.call(n)||n.device))};t.isWebViewApp=b;k=function(){var n=typeof navigator!="undefined"?navigator:window.navigator;return/(NativeSDK|MobileSDK)/i.test(n.userAgent)};t.isMobileSDKApp=k;d=function(){return t.isWebViewApp()||t.isMobileSDKApp()};t.isMobileApp=d;g=function(n){return n.device&&n.device.platform==="iOS"};t.isiOSDevice=g;nt=function(n){return(n.navigator.userAgent||"").toLowerCase().indexOf("android")>=0};t.isAndroidDevice=nt;tt=function(){var t=document.createElement("canvas"),n=t.getContext("webgl");return!!(n&&n instanceof WebGLRenderingContext)};t.isWebGLSupported=tt})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/browser"),geotab.commonjs.generateExport("geotab/checkmate/browser"));
(function(n,require,t){"use strict";var u=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});t.MenuResizer=void 0;var i=require("../../../../vanillaExtension/vanilla"),r=require("../../../browser"),f=require("../../../eventHandler"),e=700,o=function(n){function t(t,i,u,f,e){var o=n.call(this)||this,s;return o.menuContainer=t,o.menuButton=i,o.translate=f,o.overlayElement=e,o.widthToStartHiding=949,o.hiddenPositionX=-266,o.collapsedPositionX=-216,o.visibleSwipeStartFrom=266,o.collapsedClass="menuCollapsed",o.newCollapsedClass="geo-navigation__links--collapsed",o.hiddenClass="menuHidden",o.animatedClass="animated",o.hiddenOverlayClass="menu-overlay--hidden",o.isMobileDev=r.isMobile(),o.collapsed=!1,o.isHidden=!1,o.smallScreenSize=!1,o.mainMenuSize=0,o.initialized=!1,o.menuCollapseState=function(n){var t="geotabMainMenuCollapsed";return{get:function(){return n.getItem(t)||!1},set:function(i){n.setItem(t,i,!0)}}}(u),o.isBodyWidthBiggerThan=function(n){return window.matchMedia("(min-width: "+n+"px)").matches},s=o.menuCollapseState.get(),o.isMobileDev=r.isMobile(),o.collapsed=o.isMobileDev||s,o}return u(t,n),t.prototype.initialize=function(){var n=this;this.menuContainer.classList.add("menuClass--updated");this.menuButton.style.display="";this.menuButton.classList.add("menu-toggle");this.isCollapsed()||this.isSmallScreenSize()?this.collapse():this.expand();window.setTimeout(function(){i.addClasses(n.menuContainer,n.animatedClass)},1);this.menuButton.addEventListener("click",function(){n.isCollapsed()||n.isHidden?n.expand():n.collapse();n.fire("change",n.isCollapsed())},!1);this.overlayElement.addEventListener("click",function(){n.isCollapsed()||n.isHidden?n.expand():n.collapse();n.fire("change",n.isCollapsed())},!1);this.initialized=!0},t.prototype.toggleCollapseButton=function(n){var t=this.menuContainer.querySelector(".geo-navigation__collapse"),r,u;t&&(t.classList[n?"add":"remove"]("geo-navigation__collapse--collapsed"),r=this.translate(n?"Show the main menu":"Hide the main menu"),t.setAttribute("aria-label",r),t.setAttribute("title",r),u=t.querySelector(".geo-menu-item__icon"),u&&i.toggleClasses(u,"geo-menu-item__icon--rotated",n))},t.prototype.setMenuButtonState=function(n){var t=this.menuButton.getElementsByClassName("menuToggle_hide")[0],i=this.menuButton.getElementsByClassName("menuToggle_show")[0],r=n?[i,t]:[t,i],u=r[0],f=r[1];u.style.display="block";f.style.display="none";this.menuButton.setAttribute("aria-label",u.getAttribute("title"))},t.prototype.getMenuVisibleWidth=function(){var n=this.visibleSwipeStartFrom;return this.isHidden?n+this.hiddenPositionX:this.isCollapsed()?n+this.collapsedPositionX:n},t.prototype.triggerWindowResize=function(){var t="resize",n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0);n.eventName=t;window.dispatchEvent(n)},t.prototype.resize=function(){if(this.mainLayout){var n=this.getMenuVisibleWidth();this.mainLayout.setPaneConfig("west",{isOver:window.innerWidth<this.widthToStartHiding,width:n},!1)}this.triggerWindowResize()},t.prototype.abate=function(){var n=this;i.removeClasses(this.menuContainer,this.hiddenClass);i.addClasses(this.menuContainer,this.collapsedClass);i.addClasses(this.menuContainer,this.newCollapsedClass);i.addClasses(this.overlayElement,this.hiddenOverlayClass);this.toggleCollapseButton(!0);this.collapsed=!0;this.menuCollapseState.set(!0);this.isHidden=!1;window.setTimeout(function(){n.resize();n.setMenuButtonState(!0)},200)},t.prototype.expand=function(){var n=this;i.removeClasses(this.menuContainer,this.collapsedClass+" "+this.hiddenClass+" "+this.newCollapsedClass);i.removeClasses(this.overlayElement,this.hiddenOverlayClass);this.toggleCollapseButton(!1);this.collapsed=!1;this.menuCollapseState.set(!1);this.isHidden=!1;window.setTimeout(function(){n.resize();n.setMenuButtonState(!1)},200)},t.prototype.hide=function(){var n=this;i.removeClasses(this.menuContainer,this.collapsedClass);i.removeClasses(this.menuContainer,this.newCollapsedClass);i.addClasses(this.menuContainer,this.hiddenClass);i.addClasses(this.overlayElement,this.hiddenOverlayClass);this.collapsed=!1;this.menuCollapseState.set(!1);this.isHidden=!0;window.setTimeout(function(){n.resize();n.setMenuButtonState(!0)},200)},t.prototype.collapse=function(){window.innerWidth<this.widthToStartHiding?this.hide():this.abate()},t.prototype.resizeLayout=function(){this.mainLayout&&!this.isBodyWidthBiggerThan(e+this.mainMenuSize)!==this.isSmallScreenSize()&&((this.isCollapsed()||this.isHidden)&&(this.isSmallScreenSize()?this.abate():this.hide()),this.smallScreenSize=!this.smallScreenSize,this.isSmallScreenSize()?this.isMobileDev||this.collapse():this.isCollapsed()||this.isMobileDev||this.expand(),this.resize());this.mainLayout&&!this.initialized&&this.initialize()},t.prototype.setLayout=function(n){this.mainLayout=n;this.mainMenuSize=this.mainLayout.getPaneSize("west")},t.prototype.isCollapsed=function(){return this.collapsed},t.prototype.isMobile=function(){return this.isMobileDev},t.prototype.isSmallScreenSize=function(){return this.smallScreenSize},t}(f.SimpleEventHandler);t.MenuResizer=o})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/mainMenu/mainMenuResizer"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/mainMenu/mainMenuResizer"));
(function(n,require,t){"use strict";function c(n){var s=function(n,t){return n.getItem(t)!==null};return n&&h.push(n),o()?(i=f.localStorage,r=f.sessionStorage):(i=i||t.genDummyStorage(),r=r||t.genDummyStorage()),{getItem:function(n){var t=r.getItem(n)||i.getItem(n);if(typeof t=="string")try{return JSON.parse(t)}catch(u){return t}else return t},setItem:function(n,t,f){var o=function(t,u){var e=u;e!==null&&e!==undefined&&typeof e!="string"&&(e=JSON.stringify(e));f?i.setItem(t,e):s(i,n)||r.setItem(t,e)};if(e)u[n]=t;else{this.removeItem(n);try{o(n,t)}catch(c){e||(e=!0,h.forEach(function(n){return n()}));i.clear();r.clear();try{Object.keys(u).forEach(function(n){o(n,u[n]);delete u[n]})}catch(n){console.error(n)}finally{e=!1;u={}}throw c;}}},removeItem:function(n){s(i,n)&&i.removeItem(n);s(r,n)&&r.removeItem(n)},isPermanent:function(n){return s(i,n)},listItems:function(){var n=[];for(var t in r)n.push(t);for(t in i)n.push(t);return n},hasItem:function(n){return r.getItem(n)!==null||i.getItem(n)!==null}}}function y(){return o()}function p(n,t,i){var e=c(),f=!!i,r,u;return o()||(u=n("LongTermStorageIsNotAvailable"),r=f?new Error(u):{message:n("Warning:")+" "+u,toString:function(){return this.message}},r.isSevere=f,t(r)),e}var l;Object.defineProperty(t,"__esModule",{value:!0});t.clearAllKeysStartWith=t.CreateWithCaution=t.Supported=t.Html5Storage=t.genDummyStorage=void 0;var s=require("../../utils"),f=s.getGlobalObj(),a=function(n){var i="__LocalStorageTest",t,r;try{if(n in f){if(t=f[n],r="SomeValueString",t.setItem(i,r),r!==t.getItem(i))throw new Error("Not avaliable");return t.removeItem(i),!0}return!1}catch(u){return window.DOMException&&u.code===window.DOMException.QUOTA_EXCEEDED_ERR?!0:!1}},o=s.memOnce(function(){return a("localStorage")}),i,r,e=!1,u={},h=[],v=function(){return{getItem:function(n){return n in this?this[n]:null},setItem:function(n,t){return this[n]=t},hasItem:function(n){return n in this},removeItem:function(n){return n in this?delete this[n]:!1},clear:function(){var n=this;Object.keys(this).forEach(function(t){["getItem","setItem","hasItem","removeItem","clear"].indexOf(t)===-1&&delete n[t]})}}};t.genDummyStorage=v;t.Html5Storage=c;t.Supported=y;t.CreateWithCaution=p;l=function(n,t){n.listItems().filter(function(n){return n.indexOf(t)===0}).forEach(function(t){n.removeItem(t)})};t.clearAllKeysStartWith=l})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/storage/html5Storage"),geotab.commonjs.generateExport("geotab/checkmate/storage/html5Storage"));
(function(n,require,t){"use strict";function f(){var n=r.Html5Storage(function(){f().forEach(function(t){n.setItem(i+t,n.getItem(i+t),!0)})}),f=function(){return n.listItems().filter(function(n){return n.indexOf(i)===0}).map(function(n){return n.slice(i.length)})},u=function(i){var r=(i||"").toLowerCase();return n.hasItem(t.toTokenKey(i))?i:f().map(function(n){return(n||"").toLowerCase()}).filter(function(n){return n===r})[0]||undefined};return{getItem:function(t){var r=u(t)||t;return n.getItem(i+r)},setItem:function(i,r,f){var e=u(i),o=e||i;n.setItem(t.toTokenKey(o),r,f)},removeItem:function(i){var r=u(i);typeof r=="string"&&n.removeItem(t.toTokenKey(r))},isPermanent:function(t){return n.isPermanent(i+(u(t)||t))},listItems:f}}Object.defineProperty(t,"__esModule",{value:!0});t.toTokenKey=void 0;var r=require("./html5Storage"),i="sTokens_",u=function(n){return i+n};t.toTokenKey=u;t.default=f})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/storage/tokensCollection"),geotab.commonjs.generateExport("geotab/checkmate/storage/tokensCollection"));
(function(n,require,t){"use strict";function o(t){var o=f.default(),s=r.Html5Storage(),c=function(t){var i=t.currentUser,f=t.getCurrentPage&&t.getCurrentPage(),r=f&&f.getOriginalPage(),h=r&&r.getMap&&r.getMap(),l=h&&h.getCurrentProviderName(),u=!1,c=function(n){return n.id||n};try{u=!(window.parent===window&&window.top===window)}catch(a){u=!0}return i?{language:i.language,zoneDisplayMode:i.zoneDisplayMode,isMetric:i.isMetric,defaultOpenStreetMapStyle:i.defaultOpenStreetMapStyle,defaultHereMapStyle:i.defaultHereMapStyle,defaultMapEngine:i.defaultMapEngine,companyGroups:(i.companyGroups?i.companyGroups.map(c):[]).join(","),securityGroups:(i.securityGroups?i.securityGroups.map(c):[]).join(","),currentMapProvider:l,startVersion:t.startVersion,isInIframe:u,isInWebView:e.isWebViewApp(),versionOnBrowserStart:n.version?n.version():"NoVersion",isOldVersion:n.isOldVersion,sessionVersion:s.getItem("geoSessionVersion"),featurePreview:i.featurePreview,wasUserOnline:t.networkStateMonitor&&!t.networkStateMonitor.isNetworkConnectionLost(),tokens:(o.listItems()||[]).map(function(n){return{database:n,date:o.getItem(n).date}})}:undefined},l=function(){return[{name:"navigationHistory",location:"geotab.checkmate.address.history"}].reduce(function(t,i){var r=n.provide(i.location,n.getGlobalObject());return r&&r.length&&r.push&&(t[i.name]=r.slice()),t},{})},a=function(){var n=document.getElementsByTagName("script");return{foreignScripts:Array.prototype.filter.call(n,function(n){return n.src&&n.src.indexOf(location.host)<0}).map(function(n){return n.src}),currentURLWithHash:i.clearUrlFromPrivateInfo(window.location.href),localStorageKeys:["GeoIFrameReferrer","logAboutIFrameSentV2","oldTripsHistoryLongUrl","newTripsHistoryLongUrl"].map(function(n){return[n,s.getItem(n)]}),isLocalStorageSupported:r.Supported(),documentMode:window.document.documentMode,wasDiscarded:window.document.wasDiscarded,oscpu:navigator.oscpu,isNetworkStable:!0,periods:"",platform:navigator.platform,userAgent:navigator.userAgent}},v=function(n){var r=function(n){var t=/at\s[a-zA-Z0-9\s\.\]\[]*\(http[s]?/img.exec(n);return t&&t[0]?t[0].substr(3,t[0].length-10):""},u=function(n,t,i,u){return{url:n,lineNumber:t,columnNumber:i||0,module:n,at:r(u)}},t;return n.stack?(t=/(http[s]?:\/\/[\w\d\.\(\):\/#,!]+)/img,n.stack.toString().split("\n").map(function(n){var r=n.search(t),f=r!==-1?n.substr(r,n.length-r):"";if(f){var i=f.split(":"),e=i[i.length-2].search(/\D/img)===-1?parseInt(i.pop()||"0",10):0,o=parseInt(i.pop()||"0",10),s=i.join(":");return u(s,o,e,n)}return""}).filter(i.echo)):undefined},y=function(n,t){return n.serviceOfflineManager&&(t.clientSettings.currentVersion=n.serviceOfflineManager.checkVersion().then(function(n){return t.clientSettings&&(t.clientSettings.currentVersion=n),n})),t},p=function(n){return n.message||h(n)},h=function(n){return n.data?n.data.type:n.name||"Unknown error object (body parser)"},w=function(t){var r=n.getSharedVariable("default"),f=r.connection&&r.connection.token||{},e={general:{message:p(t),name:h(t),timeStamp:(new Date).toISOString(),lineNumber:t.line||t.lineNo||t.lineNumber||0,columnNumber:t.columnNumber||0,flags:Object.keys(t||{}).filter(function(n){return n.match(/(is).*(Exception)/ig)&&t[n]}),url:i.clearUrlFromPrivateInfo(t.href||""),database:f.database||"",userName:f.userName||""},ajax:t.ajax||undefined,tasks:(u.taskHistory||[]).slice().map(function(n){return n.name}),history:l(),browser:a()||{},clientSettings:c(r)||{},stack:v(t),isSerious:!0,originalError:t,toString:function(){try{return JSON.stringify(e)}catch(n){return"Can't stringify error object neither in full form nor in compact. "+n.toString()}}};return y(r,e)};return w(t)}Object.defineProperty(t,"__esModule",{value:!0});t.ErrorBodyParser=void 0;var u=require("../task"),f=require("../storage/tokensCollection"),r=require("../storage/html5Storage"),i=require("../../utils"),e=require("../browser");t.ErrorBodyParser=o})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/exceptions/errorBodyParser"),geotab.commonjs.generateExport("geotab/checkmate/exceptions/errorBodyParser"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.template=void 0;t.template='<div class="reportError">\n    <div class="reportError-title"><\/div>\n    <div class="reportError-control">\n        <div class="reportError-counter"><\/div>\n        <button class="reportError-report geo-button">Report<\/button>\n        <button class="reportError-closeHolder" aria-label="Close">\n            <svg class="reportError-close svgIcon geotabButtonIcons"><use xlink:href="#geo-close-cross"><\/use><\/svg>\n        <\/button>\n    <\/div>\n<\/div>'})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/components/errorReporter/reportError_html"),geotab.commonjs.generateExport("geotab/checkmate/components/errorReporter/reportError_html"));
(function(n,require,t){"use strict";function o(n,t,u){var e=[],c=t?t.translateKey:function(n){return n},o,l=function(n){n&&n.parentNode&&n.parentNode.removeChild(n)},s=i.extend({container:document.body,errorShowPeriod:1e4},u||{}),a=function(){var n=i.textToHTML(f.template)[0],t=n.getElementsByClassName("reportError-report")[0],r=n.getElementsByClassName("reportError-counter")[0],u=n.getElementsByClassName("reportError-closeHolder")[0],e=n.getElementsByClassName("reportError-title")[0];return i.addClasses(n,"errorMessage"),i.show(n),t.textContent=c("Report"),{container:n,title:e,button:t,counter:r,closeCross:u}},v=function(){var t,n;return function(u,f,o,h){var v=function(){clearTimeout(t);o?o(e):f()},c=function(){clearTimeout(t);n&&(n.button.removeEventListener("click",v,!1),n.closeCross.removeEventListener("click",c,!1),l(n.container),n=undefined,e=[])},y,p;return e=u,n&&n.container.parentNode||(n=a(),i.toggle(n.button,!h),h||n.button.addEventListener("click",v,!1),n.closeCross.addEventListener("click",c,!1),s.container.appendChild(n.container)),n.counter.textContent=e.length.toString(),i.toggle(n.counter,e.length>1),y=e.map(function(n){return n.general.message}).filter(r.echo),p=/127\.0\.0\.1/.test(window.location.host),i.toggleClasses(n.container,"fullMessage",p),n.title.innerHTML=r.unique(y).map(r.htmlEscape).join("<br>"),clearTimeout(t),t=setTimeout(c,s.errorShowPeriod),{element:n,destructor:c}}}(),h=function(i,u,f){var l=!1,e=setTimeout(function(){c(!1)},5e3),a,s,y=u?function(n){return l=!0,a.button.disabled=!0,u(n,p,p),!0}:r.NOOP,p=function(n,t){s.destructor();t&&t.length&&h(t,u,f)},c=function(n){if(!l){e&&clearTimeout(e);e=0;var t=n?o.reportingDialog:null;s=v(i,y,t,f);a=s.element}};o?c(!0):n().then(function(n){o=n(y,t);e&&c(!0)},r.NOOP)};return{displayError:function(n,t,i){if(n===null||n===undefined)throw new Error("EmptyExceptionParam");h(n,t,!!i)}}}var u;Object.defineProperty(t,"__esModule",{value:!0});t.errorReporterLoader=t.ReportError=void 0;var i=require("../../../vanillaExtension/vanilla"),r=require("../../../utils"),f=require("./reportError_html"),e=require("../../deferred");t.ReportError=o;u=function(){var t=e.Deferred();return n.lazyRequire(["geotab.checkmate.components.errorReporter.errorReporter"],function(i,r){if(!(r&&r.length)){var u=n.commonjs.requireRef("geotab.checkmate.components.errorReporter.errorReporter");if(u.errorReporter)return t.resolve(u.errorReporter),!0}return t.reject(new Error("Can't load error reporter module")),!0}),t.promise()};t.errorReporterLoader=u})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/components/errorReporter/reportError"),geotab.commonjs.generateExport("geotab/checkmate/components/errorReporter/reportError"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.template=void 0;t.template='<div class="notification">\n    <div class="notification-iconHolder notification-typeIcon"><\/div>\n    <h2 class="notification-title"><\/h2>\n    <div class="notification-control">\n        <div class="notification-counterContainer noTranslate" style="display:none"><span>(<\/span><span class="notification-counter"><\/span><span>)<\/span><\/div>\n        <div class="notification-dismissButtonHolder" style="display:none">\n            <button class="geo-button notification-dismissButton ellipsis"><\/button>\n        <\/div>\n    <\/div>\n    <button class="notification-iconHolder notification-iconHolder-close">\n        <svg class="svgIcon notification-icon notification-closeButton"><use xlink:href="#geo-cross-thin"><\/use><\/svg>\n    <\/button>\n<\/div>'})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/notifier_html"),geotab.commonjs.generateExport("geotab/checkmate/ui/notifier_html"));
(function(n,require,t){"use strict";function c(n,t){var a=r.extend({separated:!1,container:document.body,popupMessagePeriodMultiplier:1e3},t||{}),c=a.separated?f():o,y={warning:"notification-warning",info:"notification-info",news:"notification-news"},nt=function(n){n&&n.parentNode&&(g.forEach(function(t){var i=n.getElementsByClassName(t.className)[0];i&&i.removeEventListener("click",t.handler,!1)}),n.parentNode.removeChild(n))},tt=["message","name","title"],it=function(n){return tt.reduce(function(n,t){return n.hasOwnProperty(t)&&(n[t]=i.htmlEscape(n[t])),n},n)},rt=/([^\s]{55,})/gi,ut=function(n){return n?n+": ":""},ft=function(n){return n?'<div class="notification-message-title">'+n+"<\/div>":""},et=function(n,t){var r="",u,f;return n.message&&(r=n.message.replace(rt,function(n,t){for(var u=t.length,i=0,r=[];i<=u;)r.push(t.substring(i,i+55)),i+=55;return r.join(" ")})),u=n.url?"<a title='"+i.htmlEscape(n.urlTitle||"")+"' href='' class='notification-message-link geo-link geo-link--"+t+"'>"+r+"<\/a>":r,f=ut(n.name)||ft(n.title),""+f+u+" "},ot=function(n){return n.type?y[n.type]:y.info},st=function(n){return"<svg class='svgIcon geotabButtonIcons notification-icon  "+(n.type==="warning"?"notification-iconType":"")+"'>\n                <use xlink:href=\"#geo-"+{warning:"attention",info:"info-circled",news:"checked-new"}[n.type||"info"]+'"><\/use>\n            <\/svg>'},p=function(n){var t=w(n.target);n.target.removeEventListener("click",p,!1);t&&e.together(t.notifications.map(function(t){return t.button&&t.button.click&&t.button.click(n)||e.resolved()})).then(function(){t&&t.hide()})},ht=function(n,t){var u=t.button,i;u&&(i=n.getElementsByClassName("notification-dismissButton")[0],r.show(i.parentNode),i.textContent=u.title,i.setAttribute("title",u.title))},ct="{LINK}",w=function(n){var t=r.closest(n,"*[data-notification-key]"),i=t&&t.getAttribute("data-notification-key");return i&&c.get(i)},lt=function(n){var t=w(n.target);t&&(t.notifications.forEach(function(t){t.link&&t.link.click&&t.link.click(n)}),t&&t.hide())},b={strong:function(n){return"<strong>"+i.htmlEscape(n)+"<\/strong>"},link:function(n,t,r){return r?'<a class="notification-link geo-link geo-link--'+t+'" href="'+i.htmlEscape(r)+'">'+i.htmlEscape(n)+"<\/a>":i.htmlEscape(n)},def:i.htmlEscape},at=function(n,t,r,u){var f=r?' target="'+r+'" ':"";return'<a href="'+(t||"javascript:void(0);")+'" '+f+' class="notification-link geo-link geo-link--'+u+'">'+i.htmlEscape(n)+"<\/a>"},vt=function(n,t,i,r){var u=r.link,f=t,o,e;u&&(u.click||u.href)&&!r.url&&(o=at(u.name,u.href||"",u.target||"",i),e=t.split(ct),f=(e.shift()||"")+o,e.length>0&&(f+=e.join()));r.placeholders&&r.placeholders.length&&(f=r.placeholders.reduce(function(n,t,r){var u=b[t.type]||b.def;return n.replace("{"+r+"}",u(t.text,i,t.additional))},f));n.innerHTML=f},k=function(n){var t=r.closest(n.target,"*[data-notification-key]");t&&d(t)},v=function(n){var t=c.get(l(n)),i;if(t)t.notifications.push(n),i=t.container.getElementsByClassName("notification-counter")[0],i.textContent=t.notifications.length.toString(),r.show(i.parentNode);else return wt(n);return t},d=function(n){var i=n.getAttribute("data-notification-key")||"",t=c.get(i);t&&(nt(t.container),t.notifications.forEach(function(n){n.dismiss&&n.dismiss()}),c.remove(i))},yt=function(n){var t=!0;return n.parentElement&&(t=r.isVisible(n.parentElement)),r.isVisible(n)&&t},pt=[{className:"notification-iconHolder-close",labelName:"Close notification",titleName:"Close notification"}],g=[{className:"notification-link",handler:lt},{className:"notification-dismissButton",handler:p},{className:"notification-iconHolder-close",handler:k},{className:"notification-message-link",handler:k}],wt=function(t){var i=r.textToHTML(h.template)[0],b=t.type||u.INFO,k=ot(t),nt=l(t),tt=function(){return d(i)},it={hide:tt,key:nt,container:i,notifications:[]},e,o,v,y,p,f,w;for(r.addClasses(i,k+" logpopup"),i.setAttribute("data-notification-key",nt),t.group&&i.setAttribute("data-group",t.group),a.container.appendChild(i),e=i.querySelector(".notification-typeIcon"),o=i.querySelector(".notification-iconHolder-close"),e&&(e.innerHTML=st(t)),o&&r.addClasses(o,"notification-iconHolder-close--"+(t.type||"info")),v=i.getElementsByClassName("notification-title")[0],vt(v,et(t,b),b,t),t.url&&(y=v.getElementsByClassName("notification-message-link")[0],y&&(y.href=t.url)),ht(i,t),g.forEach(function(n){var t=i.getElementsByClassName(n.className)[0];t&&t.addEventListener("click",n.handler,!1)}),pt.forEach(function(t){var r=i.getElementsByClassName(t.className)[0];r&&r.setAttribute("aria-label",n(t.labelName));r&&r.setAttribute("title",n(t.titleName))}),p=i.querySelectorAll(s.FOCUSABLE_SELECTOR),f=0;f<p.length;f++)if(w=p[f],yt(w)&&k!=="notification-info"){w.focus();break}return t.seconds&&setTimeout(tt,t.seconds*a.popupMessagePeriodMultiplier),c.add(t,it)},l=function(n){var t=n.message||"";return n.group?t=n.group:(n.url||n.button||n.link||n.unique)&&(t=(n.message||"")+i.generateId()),t.trim()};return{displayWarning:function(n){return v({message:i.htmlEscape(n).trim(),type:u.WARNING})},displayInfo:function(n,t){return v({message:i.htmlEscape(n).trim(),seconds:t,unique:!0})},displayPopupNotification:function(n){return v(it(n))},hideMessage:function(n){var i=typeof n=="string"?n.trim():l(n),t=c.get(i);t&&t.hide()},hasMessage:function(n){var t=typeof n=="string"?n.trim():l(n);return!!c.get(t)}}}var f,o;Object.defineProperty(t,"__esModule",{value:!0});t.NotificationType=void 0;var r=require("../../vanillaExtension/vanilla"),i=require("../../utils"),e=require("../deferred"),s=require("./focusTools/focusUtils"),h=require("./notifier_html"),u;(function(n){n.WARNING="warning";n.INFO="info";n.NEWS="news"})(u=t.NotificationType||(t.NotificationType={}));f=function(){var n={};return{add:function(t,i){var r=i.key;return n[r]=n[r]||i,n[r].notifications.push(t),i},get:function(t){return n[t]},remove:function(t){delete n[t]}}};o=f();t.default=c})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/notifier"),geotab.commonjs.generateExport("geotab/checkmate/ui/notifier"));
(function(n,require,t){"use strict";function i(n){var t=n||"",u='(sessionId|password|session)(\\\\?"\\s*):(\\s*\\\\?")',e=function(n,t){var r=t,s="******",h=r.substr(n),c=n+1,f=(h.match(new RegExp(u,"i"))||[])[0];if(f){for(var e=h.substr(f.length),i=e.indexOf('"'),o=f.length;i>=0&&e[i-1]==="\\";)o+=i+1,e=e.substr(i+1),i=e.indexOf('"');o+=i;r=r.substr(0,n)+f+s+r.substr(n+o);c=n+f.length+s.length}return{origStr:r,index:c}},i=new RegExp(u,"gi"),r;for(i.lastIndex=0,r=i.exec(t);r;){var f=e(r.index,t),o=f.origStr,s=f.index;t=o;i.lastIndex=s;r=i.exec(t)}return t}function r(n){var t=JSON.stringify(n);try{return i(t)}catch(r){return t}}Object.defineProperty(t,"__esModule",{value:!0});t.tryStringifySanitized=t.sanitizeJsonString=void 0;t.sanitizeJsonString=i;t.tryStringifySanitized=r})(geotab,geotab.commonjs.generateRequire("geotab/json"),geotab.commonjs.generateExport("geotab/json"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var h=require("../vanillaExtension/vanilla"),u=require("../utils"),f=require("./deferred"),o=require("./exceptions/errorBodyParser"),i=require("./components/errorReporter/reportError"),c=require("./eventHandler"),s=require("./ui/notifier"),r=require("../json"),l=require("./storage/html5Storage"),a=require("./browser"),e=[],v=function(n){return e.reduce(function(n,t){for(var i=0;i<n.length;i++)if(t.message===n[i].message){n[i].dates.push(t.errorTimeSpan);break}return i===n.length&&(t.dates=[t.errorTimeSpan],n.push(t)),n},[]).map(function(n,t){return t+1+". "+n.message+(n.isExternal?" (external script error)":"")+(n.isSevere?"":" (is not severe) ")+" at: "+n.dates.join(", ")+";\r\n"}).join(n||"\r\n")},y=function(){var b="addin-",k="i=AddIns.",p,w=s.default(function(n){return n}),y,g=a.isOldBrowser(),d=l.Html5Storage(),t=function(){var n=[],t=function(n){return function(t){return t.general.message===n.general.message}},i=function(n,t){return n?" "+t+": "+n:""},r=function(n){return(n||[]).map(function(n){return(n.module||"")+": "+n.lineNumber+":"+(n.columnNumber||"0")+i(n.source,"Source")+i(n.at,"at")}).join(", ")},u=function(n,t){return t+1+") "+n.general.message+"; Stack: "+r(n.stack)+";\n"};return{getErrors:function(){return n.slice(0)},addError:function(i){n.some(t(i))||n.push(i)},toString:function(){return n.filter(function(n){return n&&n.general}).map(u).join("")},clear:function(i){if(!i){n.length=0;return}n=n.filter(function(n){return!i.some(t(n))})}}}(),nt=function(s,l){var p=s,a=l,ot=function(){var t=function(n){return"\r\n//======"+n+"=======\r\n"},i=function(n){return n.stack?t("StackTrace")+JSON.stringify(n.stack):""},f=function(n){var i=n.clientSettings.currentVersion,t=n.ajax&&n.ajax.response&&n.ajax.response.error,r,u,f;return t?(r=t.data?t.data.type:"",(r||"")+t.message+i):(u=n.stack||[n.general],f=function(n){return n?(n.module||"")+":"+(n.lineNumber||0)+":"+(n.columnNumber||0):""},(u.map(f).join("")||"undefined module")+i)},e=function(i){var u=n.startTime.toISOString();return t("AliveSince")+u+t("History")+r.tryStringifySanitized(i.history)};return function(n,t){return{error:{message:n.general.message,url:n.general.url||u.clearUrlFromPrivateInfo(window.location.href),lineNumber:"lineNumber"in n.general?n.general.lineNumber:-1,stackTrace:i(n),hash:f(n),comment:t,tasks:n.tasks&&n.tasks.length?n.tasks.join("\r\n"):"",timeStamp:n.general.timeStamp||(new Date).toISOString(),clientSettings:r.tryStringifySanitized(n.clientSettings)||"",errorSource:n.general.source||"",previousErrors:v(),user:n.general.userName||p&&p.token.userName||"",database:n.general.database||"",browserProperties:JSON.stringify(n.browser),ajaxCall:n.ajax&&n.ajax.request?r.tryStringifySanitized(n.ajax.request):"",ajaxError:n.ajax&&n.ajax.response?r.tryStringifySanitized(n.ajax.response):"",otherDetails:e(n),tag:n.ajax?"server":"javascript"}}}}(),nt=function(){var n=[],t,i=function(){return Date.now()},u=function(){t||(t=i(),n.push({from:t,to:null}));r()},f=function(){t&&(n[n.length-1].to=i(),t=null);r()},e=function(t,u){var f,s=u||i(),o,e;for(r(),o=t||(n.length?n[0].from:i()),f=0;f<n.length;f++)if(e=n[f],e.from>=o&&(!e.to||e.to<=s))return!0;return!1},r=function(){var t=(new Date).valueOf()-6e5;n=n.filter(function(n){return!n.to||n.to>=t})};return{setConnectionLost:u,setConnectionFound:f,isUnstableInPeriod:e,toString:function(){return n.map(function(n){return new Date(n.from).toISOString()+"-"+new Date(n.to).toISOString()}).join("; ")}}}(),st=function(n,i,r){var u=t.getErrors(),e=u.slice(0),f=function(o){var s=ot(o,n);p&&p.call("AddClientError",s).beginInvoke(function(n){u.length?f(u.shift()):(w.displayInfo(a.translateKey("ErrorReported"),5),t.clear(e),i&&i.apply(this,[n,t.getErrors()]))},function(n){r&&r(n);tt.call(this,n)})};p&&u.length&&f(u.shift())},ft={},ht=function(){return Array.prototype.filter.call(document.getElementsByTagName("script"),function(n){return n.src&&n.src.indexOf(location.host)<0})},it=!1,rt=new c.SimpleEventHandler,ct=function(n){var i=n&&n.method==="ExecuteMultiCall",t={Add:"WarningFailedAdd",Set:"WarningFailedSet",Remove:"WarningFailedRemove",Get:"WarningFailedGet"},r=function(n){var t=n&&n.params;return t&&(t.typeName!=="Audit"||n.method!=="Add")};return Object.keys(((i?n.params.calls:[n])||[]).filter(r).reduce(function(n,i){return n[t[i.method]||t.Get]=!0,n},{}))},lt=function(n){var t=[{flag:"isInvalidOperationException",phrases:["outside user data scope","id is not in the system"]},{flag:"isRelationViolatedException",phrases:[]}],r=function(n){for(var i=0;i<t.length;++i)if(n[t[i].flag])return t[i].phrases;return null},i=r(n),u=function(t){return(n.message||"").toLowerCase().indexOf(t)>-1};return i&&(!i.length||i.some(u))&&nt.isUnstableInPeriod()},at=u.memOnce(function(n,t){var i=f.Deferred();return n.call("Get",{typeName:"User",search:{id:t.id}}).beginInvoke(function(n){i.resolve(n[0]&&n[0].securityGroups[0].id===t.securityGroups[0].id)},function(){i.resolve(!0)}),i.promise()}),vt=[{check:function(n){return n.isNotSupportedException},subdue:function(n){return n.ignore=!!d.getItem("SecurityGroupChanged"),n.isSevere=!1,n.message=a.translateKey("CurrentUserSecurityGroupsChangeWarning"),rt.fire("userSecurityGroupsException"),n},isBugAsync:function(){var t=n.getSharedVariable("default"),i=d.getItem("SecurityGroupChanged"),r=i&&new Date(i),e=new Date,u=t&&t.currentUser;return!p||r&&e-r<=6e4?f.resolve(!1):u?at(p,u):f.resolve(!0)}}],yt=["__gCrWeb","Expected ')'","fidoCallback"],pt=function(n){return yt.some(function(t){return(n||"").toLowerCase().indexOf(t.toLowerCase())>-1})},wt=function(n){return(n.message||"").indexOf("Access is denied")>=0},bt=function(t,i){return t.isAborted||n.isOldVersion||pt(t.message)||wt(t)||i},tt=function(i){var h=i.message,u="",f=function(){return p&&p.token&&!(p.token.database===""&&p.token.userName===""&&p.token.sessionId==="")},s=function(n){var i=o.ErrorBodyParser(n);i.browser.isNetworkStable=!nt.isUnstableInPeriod();i.browser.isNetworkStable||(i.browser.periods=nt.toString());t.addError(i);setTimeout(function(){y&&y.displayError(t.getErrors(),st,!f())},0)},c=function(n){setTimeout(function(){w.displayWarning(n)},0)},g=function(t,i,r){var e="#"+b,o=location.hash||"",c=o.indexOf(e)>-1,s=((c?o:i||"").split(",")[0]||"").replace(e,""),l=i.indexOf("/AddIns/")>-1,h=i.indexOf(k)>-1,u,f;return t.isAddin=!0,h&&(u=Object.keys(n.customButtons||{}).filter(function(t){return i.indexOf(n.customButtons[t].hash)>-1}),u.length>0&&(s=u[0])),!i||r||l||h||location.href.indexOf(i)>-1?(t.isSevere=!1,t.message=a.translateKey("AddinErrorWarning").replace("{0}",s.replace(/[\(\)\.=+\[\]%<>]/gi,""))):(f=i.replace("RequiredScripts?","").split("&").filter(function(n){return!n.indexOf("i=")}).map(decodeURIComponent).filter(function(n){return n.search(/http[s]?:\/\//i)!==-1}),f.length&&(t.isSevere=!1,t.message=a.translateKey("AddinErrorWarning").replace("{0}",f[0].split("/").pop()||""))),t},tt=function(t,i,r){var e=window.location.hash||"",f,u;return!ht().length||r||ft[i]?t.ignore=!0:(f=(e.split(",")[0]||"").substring(1),u=Object.keys(n.customButtons||{}).filter(function(t){return n.customButtons[t].page===f}),t.ignore=!0,u.length?(t.isAddin=!0,t.message=a.translateKey("AddinErrorWarning").replace("{0}",u.join(", "))):(i&&(ft[i]=!0),t.message=a.translateKey("scriptErrorWarning")+" (with "+(i?i:"unknown")+" url)")),t},ut=function(n){return n.href||n.url||""},l=function(n){return(n||"").split("#")[0]},ot=function(n,t){return l(n)===l(t)},at=function(n){return n.linenumber||n.lineNumber},vt=function(n,t,i){return n.isAddin||t.indexOf(b)!==-1||i.indexOf(k)>-1},yt=function(n){var t=n,i=ut(t),u=at(t),f=location.hash||"",e=ot(i,location.href),r=et(i),o=vt(t,f,i),s=t.message||t.customMessage||"Unknown error without message";switch(!0){case bt(t,e):t.ignore=!0;break;case kt(t.message):t.ignore=t.ignore||i.indexOf("RequiredScripts")>=0;break;case s.indexOf("Script error")>=0&&!u||r||gt(t)&&!t.isMapError:t=tt(t,i,r);break;case o:t=g(t,i,r);break;case t.isOutOfMemory:t.isSevere=!1;t.isOutOfMemoryException=!0;t.message=a.translateKey("HugeAmountOfDataInRequestWarning");break;case t.isCacheBusyException:t.isSevere=!1;t.message=a.translateKey("CacheBusyWarning");break;case lt(t):t.isSevere=!1;t.message=a.translateKey("RelationEntityWarning");break;case t.isDbUnavailableException:t.ignore=it}return t},v=function(n){return n.data?n.data.type:n.name||""},pt=function(n){var t=typeof n=="object"?n:{message:n&&n.toString?n.toString():"",url:"",lineNumber:0};return t.message||(t.customMessage=v(t)||"Unknown unhandled error (error handler)"),t=t.isHandled?t:yt(t),ni(t)},wt=function(n){return n&&n[n.length-1]==="."?n.slice(0,-1):n},ni=function(n){if(!f()){var t="{0}. Please contact support.",i=function(){var n="Error";return a?a.translateKey(n):n};t=a?a.translateKey(t):t;n.message=t.replace("{0}",wt(n.message)||i())}return n},ti=function(n){if(n.isAddin&&console.error){var t=new Error(n.message);n.data&&(u+=n.data.join("\n")+"\n");t.message!==h&&(u+="Actual error message: '"+h+"'\n");t.stack=(n.stack||"").replace(/.*(RequiredScripts|geotab\.js)[^\n]*/gim,"").replace(/[\n]{2}/mig,"");console.error(u,t)}},r=pt(i),d;e.push({isExternal:et(r.href||r.url||""),isSevere:r.isSevere!==!1&&!r.ignore,message:r.customMessage||r.message,errorTimeSpan:(new Date).toISOString()});ti(r);r.isNetworkException?(r.isTimeout?(r.message="This page is not responding",it||dt(r.requestStartTimeSpan)||r.ignore||(nt.isUnstableInPeriod(r.requestStartTimeSpan,new Date)?ct(r.ajax&&r.ajax.request).forEach(function(n){w.displayWarning(a.translateKey(n))}):s(r))):(r.method==="Authenticate"&&v(r)==="UnknownError"||r.xhrStatus===500)&&s(r),rt.fire("networkError",r)):r.isSevere!==!1&&f()?r.ignore||s(r):r.isOutOfMemoryException?c(r.message):r.ignore||(d=o.ErrorBodyParser(r),c(d.general.message))},kt=function(n){return n?["Unexpected token","Unexpected end of input","Unexpected identifier"].some(function(t){return n.indexOf(t)>=0}):!1},dt=function(n){var i=(new Date).getTime(),t=p&&p.timeoutInMilliseconds;return n&&t?i-n-600>t:!1},et=function(n){return n&&n.split("?")[0].indexOf(window.location.hostname)===-1&&n.indexOf("RequiredScripts")===-1},gt=function(n){for(var i=new RegExp(location.protocol+"//[^/]*?/","ig"),u=location.hostname,r=(n.stack||"").toString(),t=i.exec(r);t;){if(t[0].indexOf(u)===-1)return!0;t=i.exec(r)}return!1},ni=function(n){var t=n,i=t&&vt.filter(function(n){return n.check(t)})[0];i&&p?i.isBugAsync().then(function(n){n||(t=i.subdue(t));tt(t)}):tt(t)},ti=function(n,t,i,r){var f=r||0,u;return typeof n=="object"&&n instanceof Event?(u=n.target?n.target:n.srcElement,{message:n.type+"(A script hasn't loaded)",href:u&&u.hasAttribute("src")?u.getAttribute("src"):"UnknownUrl",isNetworkException:!0,lineNumber:i,columnNumber:f}):{message:(n||"").toString(),href:t,lineNumber:i,columnNumber:f}},ut;return u.isLocalUrl(location.host)&&(ut="Unhandled Error: ",window.addEventListener("unhandledrejection",function(n){if(n.reason&&!n.reason.isAborted&&!n.reason.isServerException&&!n.reason.code&&!n.reason.isCustomError){if(n.reason&&n.reason.message){var t=n.reason.message;n.reason.message=t.indexOf(ut)===0?t:""+ut+t}tt(n.reason)}},!1)),g||(window.onerror=function(n,t,i,r,u){var f=u&&typeof u=="object"?u:ti(n,t,i,r);f.href||(f.href=t||"");tt(f)}),a&&(y=i.ReportError(i.errorReporterLoader,a)),h.extend(rt,{errors:e,handleError:ni,setConnection:function(n){p=n},connectionLost:function(){it=!0;nt.setConnectionLost()},connectionFound:function(){it=!1;nt.setConnectionFound()},setLocalizer:function(n){a=n;y=i.ReportError(i.errorReporterLoader,a)}})};return n.showErrorBar=function(){var n=t.getErrors();n.length&&y?y.displayError(n):console.log("there are no errors")},{getAllErrors:function(){return t.getErrors()},clearAllErrors:function(){return t.clear()},getAllErrorsString:function(){return t.toString()},getInstance:function(n,t,i){return p=p||nt(n,t),w=s.default(t.translateKey),i||(p.setLocalizer(t),p.setConnection(n)),p}}}();t.default=y})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/errorHandler"),geotab.commonjs.generateExport("geotab/checkmate/errorHandler"));
(function(n,require,t){"use strict";function e(n,f,e){var h=i({method:"POST",timeout:t.defaultTimeout,headers:{Accept:"application/json;","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}},n),a=h.success||u.NOOP,s=h.error||u.NOOP,c={json:function(n){var t={success:null,error:null};try{t.success=JSON.parse(n)}catch(i){t.error=i}return t},def:function(n){return{success:n,error:null}}},v=function(n){return typeof n=="string"?n:Object.keys(n||{}).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(n[t])}).join("&")},y=function(n){try{return n.responseText}catch(t){s(n,t.message,new l)}return""},p=function(n){var o=n.method==="GET",i=new XMLHttpRequest,l=o&&n.data?"?"+r(v(n.data)):"",u,h;return i.open(n.method||"POST",n.url+l,!0),f&&i.setRequestHeader("Page-name",f),u=n.headers||{},Object.keys(u).forEach(function(n){i.setRequestHeader(r(n),r(u[n]))}),i.onreadystatechange=function(){if(i.readyState===4){if(i.status===200){var r=c[n.type||"def"]||c.def,t=r(y(i));t.success?a(t.success):s(i,"parsererror",t.error)}else s(i,"",{});i.onreadystatechange=null;i.ontimeout=null;i.onerror=null}},i.timeout=n.timeout||t.defaultTimeout,i.ontimeout=function(n){s(i,"timeout",n)},i.onerror=function(n){s(i,"Error during request",n)},h=!o&&n.data?n.data:null,i.send(h),e&&e.add(n.data),i},o,w=setTimeout(function(){o=p(h)},1);return{getXhrRequest:function(){return{readyState:o?o.readyState:0,status:o?o.status:0,statusText:o?o.statusText:"",responseText:o?o.responseText:""}},abort:function(){clearTimeout(w);o&&o.abort()}}}var s=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i.apply(this,arguments)},f,r,o;Object.defineProperty(t,"__esModule",{value:!0});t.pTransport=t.defaultTimeout=void 0;var u=require("../utils"),h=require("./deferred"),c=require("./exceptions/commonExceptions"),l=function(n){function t(){var t=n.call(this,"The browser is running out of memory")||this;return t.isOutOfMemory=!0,t}return s(t,n),t}(c.CustomException);t.defaultTimeout=18e4;f=/(%0d|%0a|\n|\r)]/gi;r=function(n){return function(t){return(t||"").replace(n,"")}}(f);t.default=e;o=function(n,t){var r=h.Deferred();return e(i(i({},n),{success:r.resolve,error:function(n,t,i){r.reject(i||new Error(t))}}),t),r.promise()};t.pTransport=o})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/transport"),geotab.commonjs.generateExport("geotab/checkmate/transport"));
(function(n,require,t){"use strict";var i,r;Object.defineProperty(t,"__esModule",{value:!0});t.createExceptionMatcher=t.parseServerExpection=void 0;i=function(n){var t=n&&n.error,r=t&&t.data||{},i={errorName:"UnknownError",message:"Unknown error (default message)",info:{},errorData:r},u;if(t&&(i.message=t.message,i.errorName=r.type||"",u=r.info,u))try{i.info=JSON.parse(u)}catch(f){}return i};t.parseServerExpection=i;r=function(n){return function(t,i){return n.some(function(n){var r=n.name,u=n.condition;return r===t&&i&&u(i)})}};t.createExceptionMatcher=r})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/exceptions/serverExceptionParser"),geotab.commonjs.generateExport("geotab/checkmate/exceptions/serverExceptionParser"));
(function(n,require,t){"use strict";function h(n,t){var o,c=t,u=i.parseServerExpection(n),r=u.errorName,l=u.message,h=u.info,f=u.errorData;return f.hasOwnProperty("requestIndex")&&t&&t.params.calls&&(c=t.params.calls[f.requestIndex]),o={name:r,message:l,data:h,ajax:{request:t,response:n,failedRequest:c,requestIndex:f.hasOwnProperty("requestIndex")?f.requestIndex:null},toString:function(){return r+":"+l},isAuthenticationException:e(r,h),isServerException:!0,isDBInitializingException:s(r,h)},o["is"+r]=!0,o}Object.defineProperty(t,"__esModule",{value:!0});var i=require("./serverExceptionParser"),r=["LoginException","SqlLoginFailedException","InvalidUser","InvalidUserException","InvalidMyAdminUserException","TokenExpired","DatabaseVersionOldException"],u=[{name:"DbUnavailableException",condition:function(n){return n.state==="UnknownDatabase"}}],f=i.createExceptionMatcher(u),e=function(n,t){return r.some(function(t){return t===n})||f(n,t)},o=[{name:"DbUnavailableException",condition:function(n){return n.state==="Initializing"}}],s=i.createExceptionMatcher(o);t.default=h})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/exceptions/serverException"),geotab.commonjs.generateExport("geotab/checkmate/exceptions/serverException"));
(function(n,require,t){"use strict";function a(n,t,f,e){var h=function(n){try{return!n||n===""}catch(t){return!0}},o=function(n,t,i,u){return r(r({},u||{}),{name:n,ajax:i,message:t})},v=function(n,r,u){switch(n){case 200:try{var f=JSON.parse(u);return f&&f.error?s.default(f,e):o(i.unknownError,t||i.unknownError,{response:u})}catch(c){return h(u)?o(i.internetConnectionReset,""):o(i.parsererror,"Parser Error")}case 12007:return o(i.cannotResolveServerName,r);case 12029:return o(i.internetCannotConnect,r);case 12030:case 12031:return o(i.internetConnectionReset,r);case 12152:return h(u)?o(i.internetConnectionReset,r):o(i.parsererror,r);case 0:return o(i.serverStopped,r);case 400:return o(i.internetCannotConnect,r);case 404:return o(i.internetCannotConnect,r);case 408:return o(i.requestTimeout,r);case 504:return o(i.internetCannotConnect,r);case 503:return o(i.internetCannotConnect,r);case 502:return o(i.serverStopped,r);default:return undefined}},y=function(n){try{return n?n.status:0}catch(t){return 0}},c=y(n),p=function(n){return n.hasOwnProperty("getXhrRequest")},w=function(n){if(p(n))return n.getXhrRequest();try{return{readyState:n.readyState,status:n.status,statusText:n.statusText,responseText:n.responseText}}catch(t){return undefined}},b=function(n){var u=w(n),s;if(!u)return undefined;var h=u.readyState,f=u.statusText,c=u.responseText,r=u.status;return!h||h<4?undefined:(s=v(r,f,c),s)?s:r>=12001&&r<=12156?o(i.internetConnectionError,"Connection Error #"+r):r>=500?o(i.internalServerError,t||f,{request:e||""}):f.length>0?o(f+" ("+r+")",f):undefined},k=function(n){if(h(n))return"<empty>";var t=(n.responseText||"").replace(/\r/g,"").split("\n"),i=t[0].slice(0,100);return t.length>1?"..."+t[Math.floor(t.length/2)].slice(0,100)+"...":i},d=function(n){var r=n&&b(n);return r?r:t===i.parsererror&&n&&h(n)?o(i.internetConnectionReset,i.parsererror):t===i.timeout?o(i.timeout,i.timeout,undefined,{isTimeout:!0}):t&&t.indexOf(i.dbUnavailable)>-1?o(i.dbUnavailable,i.dbUnavailable):o(i.unknownError,t||"")},g=function(n){return o(n.name,n.message)},nt=function(n,t){var i=f instanceof Error;return i?g(n):d(t)},tt=function(n){return n?{isParserException:!0}:{isNetworkException:!0,isConnectionInterruptedException:t===i.error&&c!==500,isWebsocketDown:t===i.websocketDown}},l=nt(f,n),a=t===i.parsererror;return u.extend(l,tt(a),{requestStartTimeSpan:0,ajax:u.extend({request:e,response:a&&n?k(n):""},l.ajax||{}),xhrStatus:c})}var o=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),r=this&&this.__assign||function(){return r=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},r.apply(this,arguments)},e;Object.defineProperty(t,"__esModule",{value:!0});t.ParseException=t.isNetworkException=void 0;var u=require("../../vanillaExtension/vanilla"),s=require("./serverException"),f=require("./serverExceptionParser"),i={internalServerError:"InternalServerError",internetCannotConnect:"InternetCannotConnect",internetConnectionReset:"InternetConnectionReset",internetConnectionError:"InternetConnectionError",cannotResolveServerName:"CannotResolveServerName",serverStopped:"ServerStopped",timeout:"timeout",parsererror:"parsererror",error:"error",unknownError:"UnknownError",requestTimeout:"RequestTimeout",websocketDown:"ChannelConnectionFailed",dbUnavailable:"DbUnavailableException"},h=[{name:"DbUnavailableException",condition:function(n){return n.state==="ConnectionFailure"||n.state==="OperationAborted"||n.state==="Initializing"}}],c=f.createExceptionMatcher(h),l=function(n){if(!n)return!0;var t=f.parseServerExpection(n),i=t.errorName,r=t.info;return c(i,r)};t.isNetworkException=l;t.default=a;e=function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.message=i.parsererror,t}return o(t,n),t}(Error);t.ParseException=e})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/exceptions/networkException"),geotab.commonjs.generateExport("geotab/checkmate/exceptions/networkException"));
(function(n,require,t){"use strict";function e(n){return n===void 0&&(n=""),{database:n,userName:"",sessionId:""}}function v(n,t,v,y,p){var g=y||function(){return""},nt=function(n){return n===null||n===undefined||n.error||n.result&&n.result.error},b=function(n){return f.extend(!0,{},n||{})},tt=function(n,t,i){if(u.isNetworkException(n)){var r=h.parseServerExpection(n);return u.default(t,r.message,r,i)}return s.default(n,i)},it=function(n,t,i){return encodeURIComponent(JSON.stringify(k(n,t,i)))},k=function(n,t,r){var u=t?r:undefined;if(n.length===1){var f=n[0],o=f[0],e=f[1];return{method:o,params:i(i({},e),{credentials:e.credentials||u})}}return{method:c,params:{calls:n.map(function(n){var t=n[0],i=n[1];return{method:t,params:i}}),credentials:u}}},d=function(n,t,r,f){var e=n.slice(),o=function(){var n=k(e,t,f.token);return{url:f.url,timeout:f.timeoutInMilliseconds,method:e.length===0?e[0][0]:"",params:i(i({},n.params),{credentials:undefined})}},s;return s={isSecure:function(){return t},getCalls:function(){return e.slice()},beginInvoke:function(n,s,h,c){var k=(new Date).getTime(),v=undefined,y=function(t){if(nt(t))s(tt(t,v,o()));else{w.fireEvent("requestSucceeded",w);var i=t.hasOwnProperty("result")?t.result:t;n(i)}},b=!1,d=function(n,t,i){return u.default(n,t,i,o())},rt=function(n,t,r){if(!b){var u=i(i({},d(n,t,r)),{requestStartTimeSpan:k});return s(u),w.fireEvent("requestFailed",w,u),u}return r};return t&&!(f.token&&f.token.sessionId)?(y(l()),a):(v=w.transport({url:f.url,method:"POST",data:"JSON-RPC="+it(e,t,f.token),type:"json",timeout:h||r||f.timeoutInMilliseconds,success:y,error:rt},c||g(),p),{abort:function(){b=!0;v&&v.abort()}})},andAlso:function(n,t){return e.push([n,b(t)]),s}}},w=f.extend(!0,{url:n||"/apiv1",timeoutInMilliseconds:typeof t=="number"?t:r.defaultTimeout,transport:r.default,token:v||e(),call:function(n,t,i,u){return d([[n,b(t)]],typeof i=="boolean"?i:!0,u||w.timeoutInMilliseconds||r.defaultTimeout,w)},multiCall:function(n,t,i){return d(n,typeof t=="boolean"?t:!0,i||w.timeoutInMilliseconds||r.defaultTimeout,w)}},o.default());return w}var i=this&&this.__assign||function(){return i=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});t.createToken=void 0;var o=require("./eventHandler"),r=require("./transport"),f=require("../vanillaExtension/vanilla"),u=require("./exceptions/networkException"),s=require("./exceptions/serverException"),h=require("./exceptions/serverExceptionParser");t.createToken=e;var c="ExecuteMultiCall",l=function(){return{error:{message:"Invalid credentials",data:{type:"InvalidUserException"}}}},a={abort:function(){}};t.default=v})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/connection"),geotab.commonjs.generateExport("geotab/checkmate/connection"));
(function(n,require,t){"use strict";function i(n,t,i){var r=i||[];return(t||Object.keys(n)).reduce(function(t,i){return r.indexOf(i)===-1&&Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:function(){return n[i]},set:function(t){n[i]=t}}),t},{})}Object.defineProperty(t,"__esModule",{value:!0});t.default=i})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/proxyObject"),geotab.commonjs.generateExport("geotab/checkmate/proxyObject"));
(function(n,require,t){"use strict";function l(n,h){var c=e.default(h.url||"",h.timeoutInMilliseconds,h.token,h.getPageName,h.logger),a,w,b=!1,k,l=!1,d=(new Date).getTime(),p=function(t,i,r,u){var e=function(n){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];a.token=n;l=!1;i.apply(this,f([n],r))};l||(l=!0,t?n.beginGetTokenWithUI(c,t,e,r,u):n.beginGetToken(c,e,r,u))},v=[],y=[],g=function(n,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];for(t.length=0;n.length;)n.shift().apply(this,r)},nt=!1,rt=function(){nt=!0;n&&typeof n.lockToken=="function"&&c.token&&n.lockToken(c.token)},ut=["Get","Set","Add","Remove","GetCountOf"],tt=function(n){var t=n[0],i=n[1];return ut.indexOf(t)!==-1?t+"<"+(i.typeName||"??")+">("+((i.search||i.entity||{}).id||"...")+")":t},ft=function(n){if(n.length===1)return tt(n[0]);var t=3,i=n.length-t,r=i>0?i+" more":"";return"ExecuteMultiCall("+n.slice(0,t).map(tt).join(", ")+r+")"},it=function(n){var t;return d=(new Date).getTime(),t={andAlso:function(i,r){return n.andAlso(i,r),t},getCalls:function(){return n.getCalls()},isSecure:function(){return n.isSecure()},beginInvoke:function(t,i,r,f){var o=i,s;if(!o)throw new Error("beginInvoke requires an errorCallback");var e=u.default(ft(n.getCalls())),h=function(t){return!nt&&n.isSecure()&&rt(),e.resolve(t)},c=e.andThen(function(n){return t(n),n}).fail(function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];n[0]&&n[0].name===n[0].message&&n[0].name==="abort"&&(n[0].isAborted=!0);o.apply(e.promise(),n)});return b?e.reject(k):(s=function(){e.fail(function(n){n&&n.isAborted&&t&&t.abort&&t.abort()});var t=n.beginInvoke(h,w(n,h,function(n){e.reject.call(e,n)}),r,f)},l&&n.isSecure()?(v.push(s),y.push(function(n){var i=o,t=null;return o=function(n){return t=i.call(e.promise(),n)},e.reject.call(e,n),t})):s()),c}}};return w=function(n,i,r){var f=function(n){l=!1;var t=r(n);return g(y,v),t},e=function(n){l=!1;u(n)},u=function(u){u&&t.isAuthError(u)&&h.handleAuthError!==!1?(v.push(function(){n.beginInvoke(i,r)}),y.push(r),p(null,function(){g(v,y)},e,u)):f(u)};return u},h.token&&h.token.sessionId&&n&&n.cacheToken&&n.cacheToken(r.extend({},h.token),h.token.rememberMe||!1),a=r.extend(s.default(c,["url","timeoutInMilliseconds","transport","token","attachEvent","detachEvent"]),{setTimeoutInMilliseconds:function(n){this.timeoutInMilliseconds=n},shutdown:function(n,t){b=!0;k=r.extend(new Error(n||"UnknownReason"),{isConnectionShutDownException:!0,innerException:t})},call:function(n,t,i,r){return it(c.call.apply(c,[n,t,i,r]))},multiCall:function(n,t,i){return it(c.multiCall.apply(c,[n,t,i]))},invalidateToken:function(t,f,e,s,h,c){if(!n.beginGetTokenWithUI)throw new Error("NotSupported");n.clearCachedToken();var a=r.extend({destroy:i.NOOP,showErrorMessage:i.NOOP,setSavedTokens:i.NOOP,setEnabledState:i.NOOP,showWaiting:i.NOOP,hideWaiting:i.NOOP,show:i.NOOP,close:i.NOOP,getLanguage:i.NOOP,getCredentialsForStep:function(n,i,r){r({database:f,userName:t,password:e,rememberMe:s})}},o.default()),l=u.default("Invalidating token for current user");return p(a,function(n){l.resolve(n);h(n)},function(n){l.reject(n);c(n)}),l.promise()},requestToken:function(n,t){var i=a.token;p(null,function(){var t=a.token;a.token=i;n(t)},t)},setTransport:function(n){this.transport=n},getTransport:function(){return this.transport},getIdlePeriod:function(){return Date.now()-d},getCredentials:function(){return{database:this.token.database,userName:this.token.userName,sessionId:this.token.sessionId}},getBasicConnection:function(){return c},setHandleAuth:function(n){return h.handleAuthError=n}})}var f=this&&this.__spreadArray||function(n,t){for(var i=0,u=t.length,r=n.length;i<u;i++,r++)n[r]=t[i];return n};Object.defineProperty(t,"__esModule",{value:!0});t.isAuthError=void 0;var e=require("./connection"),u=require("./task"),o=require("./eventHandler"),s=require("./proxyObject"),r=require("../vanillaExtension/vanilla"),i=require("../utils"),h=["isAuthenticationException","isExpiredPasswordException"],c=function(n){return h.some(function(t){return n[t]})};t.isAuthError=c;t.default=l})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/interactiveConnection"),geotab.commonjs.generateExport("geotab/checkmate/interactiveConnection"));
(function(n,require,t){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i.apply(this,arguments)},r=this&&this.__spreadArray||function(n,t){for(var i=0,u=t.length,r=n.length;i<u;i++,r++)n[r]=t[i];return n},f,u,e,o,s,h,c,l,a,v,p,w,b,k,d,g,nt,tt,it;Object.defineProperty(t,"__esModule",{value:!0});t.compareFilters=t.doesItemMatchFilterState=t.getDefaultState=t.setFirstLeafItem=t.getFirstLeafItem=t.isFilterStateLeafItem=t.tryToConvertToSimpleState=t.clearFilterState=t.simplifyFilterState=t.getId=t.toFilterState=t.filterFilterState=t.mapFilterState=t.getFilterStateUniqueGroups=t.getFilterStateGroupHash=t.isFilterState=t.DEFAULT_RELATION_OPERATOR=void 0;f=require("../../../constants/groupConstants");u=require("../../../../utils");t.DEFAULT_RELATION_OPERATOR="Or";e=function(n){return n&&n.relation!==undefined};t.isFilterState=e;o=function(n){return u.makeHash(t.getFilterStateUniqueGroups(n))};t.getFilterStateGroupHash=o;s=function(n){var i=[],r=function(n,u){return u===void 0&&(u=[]),n.items.reduce(function(n,u){if(t.isFilterState(u))return r(u,n);var f=u.id;return i.indexOf(f)===-1&&n.push(u),i.push(f),n},u)};return r(n)};t.getFilterStateUniqueGroups=s;h=function(n,r){var u=function(n){return i(i({},n),{items:n.items.map(function(n){return t.isFilterState(n)?u(n):r(n)})})};return u(n)};t.mapFilterState=h;c=function(n,r){var u=function(n){return i(i({},n),{items:n.items.reduce(function(n,i){if(t.isFilterState(i)){var f=u(i);f.items.length&&n.push(f)}else r(i)&&n.push(i);return n},[])})},f=u(n);return f.items.length?f:t.getDefaultState()};t.filterFilterState=c;l=function(n){var r=function(n){return typeof n=="string"?{id:n}:n},f;return t.isFilterState(n)?t.mapFilterState(n,function(n){return r(n)}):(f=function(n){return typeof n=="string"||u.isIdEntity(n)},Array.isArray(n)&&n.length&&n.every(f))?i(i({},t.getDefaultState()),{items:n.map(function(n){return r(n)})}):t.getDefaultState()};t.toFilterState=l;a=function(n){var i=function(n){return n.relation==="And"&&!(t.isFilterStateLeafItem(n)&&n.items.length===1)?!1:n.items.every(function(n){return t.isFilterState(n)?i(n):!0})};return i(n)};v=function(n){return u.isIdEntity(n)?n.id:n};t.getId=v;var y=function(n){return n.filter(function(n){return!t.isFilterState(n)})},rt=function(n){var u=n[0]||[],i=y(u).map(t.getId);return n.reduce(function(n,u){var e=u.filter(t.isFilterState),o=y(u),f=o.filter(function(n){return i.indexOf(t.getId(n))===-1}),s=f.map(t.getId);return i=i.concat(s),n.concat(r([],f),r([],e))})},ut=function(n){var r=function(n){var u=n.items.reduce(function(u,f){var h;if(t.isFilterState(f)){var o=r(f),e=u[u.length-1],s=o.items.length===1?n.relation:o.relation;if(!e||!t.isFilterState(e))return u.push(o),u;if(h=e.items.length===1?n.relation:e.relation,s===h&&s===n.relation)return u[u.length-1]=i(i({},u[u.length-1]),{relation:n.relation,items:rt([e.items,o.items])}),u}return u.push(f),u},[]),f=n.relation;return u.length===1&&t.isFilterState(u[0])&&(f=u[0].relation,u=u[0].items),i(i({},n),{relation:f,items:u})};return r(n)};t.simplifyFilterState=ut;p=function(n){return t.filterFilterState(n,function(n){return n.id!==f.ENTIRE_ORGANIZATION_GROUP_ID})};t.clearFilterState=p;w=function(n){if(t.isFilterState(n)){var i=t.clearFilterState(n);return a(i)?t.getFilterStateUniqueGroups(i):i}return n};t.tryToConvertToSimpleState=w;b=function(n){var i=n.items||[];return!i.length||!i.some(t.isFilterState)};t.isFilterStateLeafItem=b;k=function(n){var r=n.items||[],i=r.filter(function(n){return t.isFilterState(n)&&n.items.length});return i.length?t.getFirstLeafItem(i[0]):n};t.getFirstLeafItem=k;d=function(n,r){var f=t.getFirstLeafItem(n),u=function(n){return n===f?r(n):i(i({},n),{items:n.items.map(function(n){return t.isFilterState(n)?u(n):i({},n)})})};return u(n)};t.setFirstLeafItem=d;g=function(){return{relation:t.DEFAULT_RELATION_OPERATOR,items:[{id:f.ENTIRE_ORGANIZATION_GROUP_ID}]}};t.getDefaultState=g;nt=function(n,i){var r=function(n){return t.isFilterState(n)?u(n):i(n.id)},u=function(n){var t=n.items,i=n.relation;return i==="Or"?t.some(r):t.every(r)};return u(n)};t.doesItemMatchFilterState=nt;tt=function(n,i){var e=function(n,i){return t.isFilterState(n)&&t.isFilterState(i)?f(n,i):!t.isFilterState(n)&&!t.isFilterState(i)?t.getId(n)===t.getId(i):!1},u=function(n,i){return!t.isFilterState(n)&&!t.isFilterState(i)?t.getId(n)>t.getId(i)?-1:1:0},f=function(n,t){var o=n.relation===t.relation,i,f;return o?(i=r([],n.items),f=r([],t.items),!i||!f||i.length!==f.length)?!1:(i.sort(u),f.sort(u),i.every(function(n,t){var i=f[t];return i?e(n,i):!1})):!1};return f(n,i)};it=function(n,i){var r=t.toFilterState(n),u=t.toFilterState(i);return tt(r,u)};t.compareFilters=it})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/advancedGeotabEntitiesNavigator/advancedEntitiesNavigatorUtilites"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/advancedGeotabEntitiesNavigator/advancedEntitiesNavigatorUtilites"));
(function(n,require,t){"use strict";function v(n,t){for(var i,f,e={},o=t||r.echo,s=n.length,u=0;u<s;u++)i=n[u],i&&(f=typeof i=="string"?{id:i}:i,e[f.id]=o(f));return e}function y(n){return n.reduce(function(n,t){return h(t,null,n)},{})}function it(n,t){return n.length!==t.length?!1:(n.sort(function(n,t){return n.id.localeCompare(t.id)}),t.sort(function(n,t){return n.id.localeCompare(t.id)}),n.every(function(n,i){return n.id===t[i].id}))}function rt(n){return l(n,null,{})}function ut(n){return n.map(function(n){return{id:n.id}})}function ft(n,t){var u=t||function(n){return s.extend({},n,{parent:undefined})},r=n.reduce(function(n,t){return n[t.id]=u(t),n},{}),i=n.reduce(function(n,t){var i=r[t.id];return i.children=(t.children||[]).map(function(t){var u=r[t.id];return u&&(u.parent=i),n[t.id]&&(n[t.id]=undefined),u}).filter(function(n){return n!==undefined}),i.parent===undefined&&(n[i.id]=i),n},{});return Object.keys(i).filter(function(n){return i[n]!==undefined}).map(function(n){return i[n]})}function p(n,t,i){var r=[],o=i||function(n,t){return!!u[t.id]},u,f=function(n){o(t,n)&&r.push(n);n.children&&n.children.forEach(f)},e;return i||(e=Array.isArray(t)?t:[t],u=v(e)),n.forEach(f),r}function et(n){return n.filter(function(n){return n&&n.id})}function ot(n){var u=[],i,r,f=n.length,t,e;if(f)for(i=0;i<f;i+=1)if(t=n[i],Array.isArray(t))for(e=t.length,r=0;r<e;r+=1)u.push(t[r]);else u.push(t);return u}function f(n,t,i){for(var r,f,s=n?n.length:0,u=0;u<s;u++)if(r=i[n[u].id],f=r?e(r):[],o(t,f,i)||(r===null||r===void 0?void 0:r.id)===t)return n[u].id;return undefined}function i(n,t,i){for(var u=i[n],f=[],s=t?t.length:0,h=u?e(u):[],r=0;r<s;r++)o(t[r].id,h,i)&&f.push(t[r].id);return f}function st(n,t,r){var u=f(t,n.id,r)||i(n.id,t,r);return a(t,Array.isArray(u)?u:[u],n)}function ht(n,t,r){return n.reduce(function(n,t){var e=f(n,t.id,r),u;return e?n:(u=i(t.id,n,r),a(n,u,t))},t)}function ct(n,t){for(var u="",i,r=0;r<n.length;r++)for(i=0;i<t.length;i++)n[r].id===t[i].id&&t[i].name&&(u+=(u?", ":"")+t[i].name);return u}function lt(n,t,i,f,e,o){if(f===void 0&&(f="groups"),e===void 0&&(e=undefined),o===void 0&&(o=!1),r.isEntireOrganization(i))return n;var s=e||function(n){return n[f]},h=u.toFilterState(i);return w(n,t,h,s,o)}function at(n,t){var i=r.isEntireOrganization(n);return i&&t[0].id!==d.ENTIRE_ORGANIZATION_GROUP_ID?t:n}var w,b,k;Object.defineProperty(t,"__esModule",{value:!0});t.filterGroups=t.isIdEntity=t.getFilterValue=t.filterEntitiesByGroups=t.getEntityGroupsNames=t.mergeGroups=t.addNewGroupToArray=t.findChildrenOfParent=t.findParentForGroup=t.unwrapEntities=t.removeSystem=t.findGroupsInTree=t.createLinkedTree=t.slimNodes=t.populateParentNodes=t.compareEntityArrays=t.MinDate=t.MaxDate=t.treeToDictionary=t.entityToDictionary=void 0;var s=require("../vanillaExtension/vanilla"),r=require("../utils"),d=require("./constants/groupConstants"),u=require("./ui/modules/advancedGeotabEntitiesNavigator/advancedEntitiesNavigatorUtilites"),e=function(n){return c(n)?n.children:tt(n)?n.groups:[]},g=new Date(Date.UTC(1986,0,1)),nt=new Date(Date.UTC(2050,0,1)),h=function(n,t,i){var r,u=n.children||n.groups;if(n.parent=t,i[n.id]=n,u)for(r=0;r<u.length;++r)h(u[r],n,i);return i},o=function(n,t,i){for(var s,f,r=[],h=t.length,u=0;u<h;u++){if(t[u].id===n)return!0;s=i[t[u].id];f=e(s);f&&f.length&&r.push.apply(r,f)}return r.length?o(n,r,i):!1},c=function(n){return!!n.children},tt=function(n){return!!n.groups},l=function(n,t,i){for(var r,f,e,o,u=0;u<n.length;u++)if(r=n[u],r&&(f=r.id,e=s.extend({},r,{parent:t}),i[f]=e,o=c(r)?r.children:r.groups,o&&l(o,e,i),f==="GroupCompanyId"))break;return i},a=function(n,t,i){var r=n.filter(function(n){return t.indexOf(n.id)<0});return r.push(i),r};t.MinDate=g;t.MaxDate=nt;t.entityToDictionary=v;t.treeToDictionary=y;t.compareEntityArrays=it;t.populateParentNodes=rt;t.slimNodes=ut;t.createLinkedTree=ft;t.findGroupsInTree=p;t.removeSystem=et;t.unwrapEntities=ot;t.findParentForGroup=f;t.findChildrenOfParent=i;t.addNewGroupToArray=st;t.mergeGroups=ht;t.getEntityGroupsNames=ct;t.filterEntitiesByGroups=lt;w=function(n,t,r,e,o){return o===void 0&&(o=!1),n.filter(function(n){var s=e(n)||[];return u.doesItemMatchFilterState(r,function(n){return s.some(function(r){var u,e;return r.id===n?!0:(u=f([{id:n}],r.id,t),u===n)?!0:o?(e=i(r.id,[{id:n}],t),e.length>0):!1})})})};t.getFilterValue=at;b=function(n){return!!n&&!!n.id};t.isIdEntity=b;k=function(n,t,f){var e=y(f);return r.isEntireOrganization(t)?n:p(n,undefined,function(n,r){return u.doesItemMatchFilterState(u.toFilterState(t),function(n){return r.id===n||!!i(n,[r],e).length})})};t.filterGroups=k})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/entityUtilities"),geotab.commonjs.generateExport("geotab/checkmate/entityUtilities"));
(function(n,require,t){"use strict";var i,r,u;Object.defineProperty(t,"__esModule",{value:!0});t.getSecurityIdentifierId=t.isAddinSecurityIdentifier=void 0;i=function(n){return!!n.customPageName};t.isAddinSecurityIdentifier=i;r=function(n){return(n.isSystemSecurityId?n.customPageName:n.customPageName+"_"+n.name)||""};u=function(n){return t.isAddinSecurityIdentifier(n.securityId)?r(n.securityId):n.securityIdentifier};t.getSecurityIdentifierId=u})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/security/securityIdentifiersUtils"),geotab.commonjs.generateExport("geotab/checkmate/security/securityIdentifiersUtils"));
(function(n,require,t){"use strict";function e(n){var e=function(n){return n.reduce(function(n,t){var i=r.getSecurityIdentifierId(t);return n[i]=t.isAdd,n},{})},o=function(n,t){var u,s,o;return t.length===0?n:(u=t.filter(function(n){return n.securityIdentifier===f}),u.length>0)?(s=u[0],{isEverything:!0,permission:n.permission.map(function(n){return i(i({},n),{isAdd:s.isAdd})})}):(o=e(t),{isEverything:!1,permission:n.permission.map(function(n){var t=r.getSecurityIdentifierId(n);return o.hasOwnProperty(t)?i(i({},n),{isAdd:o[t]}):n})})},s=function(n){for(var t={isEverything:!1,permission:n[0].securityFilters},i=1;i<n.length;i++)t=o(t,n[i].securityFilters||[]);return t},t=u.populateParentNodes(u.createLinkedTree(n.map(function(n){return i({},n)}))),h=function(n){for(var t=n,i=[];t;)i.push(t),t=t.parent;return i=i.reverse(),s(i)},c=function(n){return t.hasOwnProperty(n.id)?h(i({},t[n.id])):{isEverything:!1,permission:[]}};return{getUiConfiguration:function(n){var i=c(n),t=i.permission.filter(function(n){return n.isAdd}).map(function(n){return r.getSecurityIdentifierId(n)});return{acl:t,containsAny:t.length>0,isEverything:i.isEverything,hasAccessTo:function(n){return!!(t.length&&t.indexOf(n)>-1)}}}}}var i=this&&this.__assign||function(){return i=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var u=require("./entityUtilities"),r=require("./security/securityIdentifiersUtils"),f="Everything";t.default=e})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/securityCalculator"),geotab.commonjs.generateExport("geotab/checkmate/securityCalculator"));
(function(n,require,t){"use strict";function r(n,t,r){var u=window.open(n,"_blank","toolbar=yes,scrollbars=yes,resizable=yes"),f=i.Deferred(),e,o;if(!u)return f.reject(undefined),f.promise();e=function(){window.removeEventListener("message",o,!1);clearInterval(h);u&&u.close();u=null};o=function(n){if(window.location.href.indexOf(n.origin)!==-1)try{var i=JSON.parse(n.data);i.credentials=i.credentials||{};i.credentials.userName||(i.credentials.userName=t.userName.toLowerCase());i.credentials.database||(i.credentials.database=t.database||r);!i.path&&i.server&&(i.path=i.server,delete i.server);e();f.resolve(i)}catch(u){e();f.reject("InvalidUser")}};window.addEventListener("message",o,!1);var s=function(){u&&u.closed&&(e(),f.reject(undefined))},h=setInterval(s,5e3);return f.promise()}Object.defineProperty(t,"__esModule",{value:!0});t.samlLogin=void 0;var i=require("./deferred");t.samlLogin=r})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/samlLoginUtils"),geotab.commonjs.generateExport("geotab/checkmate/samlLoginUtils"));
(function(n,require,t){"use strict";function r(n,t,r){r===void 0&&(r=["https"]);var u=i(n),f=!0,e=u.host.split("."),o=u.host.slice(u.host.indexOf(".")+1),s=e.length<=2||!t.some(function(n){return o===n}),h=!r.some(function(n){return u.scheme===n});return(h||s)&&(f=!1),f}function i(n){var t=n.split("://",2),r="",i;t.length===2?(r=t[0],i=t[1]):i=t[0];var u=i.split("#"),l=u[0],a=u.slice(1),v=a.join("#"),f=l.split("?"),y=f[0],e=f[1],p=e===void 0?"":e,o=y.split("/"),w=o[0],b=o.slice(1),k=b.join("/"),s=w.split(":"),h=s[0],d=h===void 0?"":h,c=s[1],g=c===void 0?"":c;return{scheme:r,host:d,port:g,path:k,query:p,fragment:v}}Object.defineProperty(t,"__esModule",{value:!0});t.parseServerName=t.isValidServerName=void 0;t.isValidServerName=r;t.parseServerName=i})(geotab,geotab.commonjs.generateRequire("geotab/utils/parseServerName"),geotab.commonjs.generateExport("geotab/utils/parseServerName"));
(function(n,require,t){"use strict";function u(n,t){return n.zone===t.zone&&n.domain===t.domain&&n.subDomain===t.subDomain}function f(n){var t={prefix:"",prefixNumber:"",domain:"",subDomain:"",zone:""},f=function(n){var i=t,r,u,f;return n.length>1&&(r=n.pop()||"",u=n.pop()||"",isNaN(+r)&&isNaN(+u)&&(i.zone=r,i.domain=u,f=n.shift()||"",i.prefixNumber=(f.match(/\d+$/i)||[""]).shift()||"",i.prefix=f.replace(i.prefixNumber,""),i.subDomain=n.length>0?n.join(""):"")),i},r=n.indexOf("."),u=n.indexOf(":"),e=u!==-1&&(r===-1||r>u),o=i.parseServerName(n);return e?t:f(o.host.split("."))}function e(n){return[n.prefix+n.prefixNumber,n.subDomain,n.domain,n.zone].filter(r).join(".")}Object.defineProperty(t,"__esModule",{value:!0});t.createVendorHost=t.parseVendorHost=t.compareVendors=void 0;var i=require("../../../../utils/parseServerName"),r=function(n){return n};t.compareVendors=u;t.parseVendorHost=f;t.createVendorHost=e})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/vendorHost/vendorHost"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/vendorHost/vendorHost"));
(function(n,require,t){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0});t.apiMultiTransport=t.apiTransport=void 0;var i=require("./deferred"),u=require("./exceptions/serverException"),f=require("./transport"),e=function(n,t,r,e){return f.pTransport({url:r||"/apiv1",type:"json",data:"JSON-RPC="+encodeURIComponent(JSON.stringify({method:n,params:t||{}}))},e).then(function(r){return r.error?i.reject(u.default(r,{method:n,params:t||{}})):r.hasOwnProperty("result")?r.result:r})};t.apiTransport=e;r=function(n,r,u){return n.length>0?t.apiTransport("ExecuteMultiCall",{calls:n.map(function(n){var t=n[0],i=n[1];return{method:t,params:i}})},r,u):i.reject(new Error("No requests"))};t.apiMultiTransport=r})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/apiTransport"),geotab.commonjs.generateExport("geotab/checkmate/apiTransport"));
(function(n,require,t){"use strict";var r,u,f;Object.defineProperty(t,"__esModule",{value:!0});t.saveRedirectToken=t.SAVED=t.READY=void 0;var e=require("../../vanillaExtension/vanilla"),i=require("../deferred"),o=require("../exceptions/commonExceptions");t.READY="redirect_ready";t.SAVED="redirect_saved";r=1e4;u=function(n,t,u,s,h,c){var l=e.create("iframe",{src:"https://"+s+"/"+u+"/redirect.html"},{display:"none"}),v,a;return h.appendChild(l),v=JSON.stringify({key:t,value:JSON.stringify(n)}),i.race([new Promise(function(n){a=f(l,v,"https://"+s,n);c.addEventListener("message",a,!1)}),i.timeoutPromise(r,new o.TimeoutException)]).then(function(n){return h.removeChild(l),c.removeEventListener("message",a,!1),n},function(n){return h.removeChild(l),c.removeEventListener("message",a,!1),i.reject(n)})};t.saveRedirectToken=u;f=function(n,i,r,u){return function(f){var e=f;if(n.contentWindow&&e.origin===r)switch(e.data){case t.READY:n.contentWindow.postMessage(i,r);return;case t.SAVED:u(undefined);return;default:return}}}})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/storage/redirectStorage"),geotab.commonjs.generateExport("geotab/checkmate/storage/redirectStorage"));
(function(n,require,t){"use strict";function p(t,p,w,b,k,d,g){var tt="ThisServer",et=w?function(){var n=w.getItem(b);return n===null&&b.indexOf("%")>-1&&(n=w.getItem(decodeURI(b))),n}:function(){return null},lt=function(n){return n&&{database:n.database,sessionId:n.sessionId,userName:n.userName}},it=w?function(n,t){var r=t||w.isPermanent(b);w.setItem(n.database,i(i({},n),{rememberMe:undefined,date:n.date||new Date}),r)}:f.NOOP,ot=w?function(){return w.removeItem(b)}:f.NOOP,rt=w?function(){return w.isPermanent(b)}:f.NOOP,st="CannotConnectToServer",at=function(n){return["DatabaseVersionOld","DbUnavailable","InvalidUser"].some(function(t){return t===n})},vt=function(n){return["OverLimit"].some(function(t){return t===n})},ht=function(n,t){return["InternetCannotConnect","ServerStopped"].some(function(i){var f=u.parseVendorHost(o.parseServerName(location.host).host).domain,r=u.parseVendorHost(o.parseServerName(t).host).domain;return i===n&&r&&r!==f})},nt,ct,ut=null,yt=function(n,t){return n+(n[n.length-1]==="/"?"":"/")+t+"/"},pt=function(n){return yt(window.location.protocol+"//"+window.location.host,n)},wt=function(n,t){var i=r.Deferred(),u=n.token.database||t.database||"";return t&&u&&t.userName&&t.verificationToken?n.call("VerifyUser",{userName:t.userName,verificationToken:t.verificationToken,database:u},!1).beginInvoke(function(){i.resolve(!0)},function(n){i.reject(n)}):i.reject(undefined),i.promise()},bt=function(n){for(var t,i,f,e,o=Date.now(),s=function(n,t){return{name:n,activePreiod:t,href:pt(n)}},r=[],u=0,h=n.length;u<h;u++)t=n[u],i=w.getItem(t),i&&i.database&&(f=o-new Date(i.date).getTime(),f<12096e5?r.push(s(t,f)):w.removeItem(t));return e=function(n,t){return n.activePeriod-t.activePeriod},r.sort(e),r.splice(0,3)},ft=function(n){setTimeout(function(){window.location.replace(n+window.location.hash)},1)},kt=function(n){return!!(n&&n.isExpiredPasswordException)},dt=function(n){return!!(n&&n.isAuthenticationException)},gt=function(n){return!!(n&&n.isResetPassword)},ni=function(){var t=!0,n=undefined;return function(){return t?(t=!1,e.isMobileApp()||e.isIFrameHosted()):(n===undefined&&(n=e.isMobileApp()),n)}}();if(!t)throw new Error("WrongUIParam");return nt=c.extend(h.default(),{getTokenFromStorage:et,clearCachedToken:function(){ot()},lockToken:function(n){ct=n.userName},cacheToken:function(n,t){it(n,t)},beginGetToken:function(n,i,r,u){nt.beginGetTokenWithUI(n,t,i,r,u)},setExpiredSessionCallback:function(n){ut=n},beginGetTokenWithUI:function(t,f,e,o,h){var ii=function(n,t,i){var r=n.name?n.name.replace("Exception",""):n.toString(),u;f.setEnabledState(!0);f.hideWaiting();f.getCredentialsForStep(i?"one":"two",t,i?pt:ui,o);at(r)||ht(r,t.serverName)?(u=ht(r,t.serverName)?st:r,f.showErrorMessage(u),nt.fireEvent("AttemptFail",nt)):(vt(r)&&(n.isSevere=!1),o(n))},yi=function(n){return n.indexOf("https:")===0?n.split("/")[2]:n},fi=function(){f.setEnabledState(!0);f.detachEvent("stepBack",li);f.destroy()},yt=function(t,r,h){var c=lt(t&&t.credentials),w;if(t.path&&t.path!==tt&&t.path.replace(/^.*\/\//,"").replace(/\/$/,"")!==n.location.host){var a=yi(t.path),b=window.location.href.split("#")[0],l="https://"+a+"/",k=!!c.database;if(!k){ft(l);return}var v=u.parseVendorHost(l.split("://")[1]),d=u.parseVendorHost(location.host.split(":")[0]),p=!!v&&u.compareVendors(v,d);if(p&&it({target:t.path,database:c.database},r),h&&p){w=i(i({},c),{origin:b,target:l,rememberMe:r||!1});y.saveRedirectToken(w,s.toTokenKey(c.database),c.database,a,g,window).then(function(){fi();ft(l+c.database+"/")}).catch(function(){f.setEnabledState(!0);f.hideWaiting();f.getCredentialsForStep("two",c,ui,o);f.showErrorMessage(st)});return}if(t.path!==tt){ft(l+c.database+"/");return}}else fi(),it(t.credentials,r),e(c,r)},pi=function(n,t){var i=function(n){return typeof n=="string"?n.toLowerCase():n};return n.userName!==""&&t.userName!==n.userName||n.database!==""&&i(t.database)!==i(n.database)},ei=function(n,i){var u=r.Deferred();return t.call(n,i,!1).beginInvoke(function(n){u.resolve(n)},function(n){u.reject(n)}),u.promise()},wi=function(n,t){return!n||!t||!t.sessionId?r.resolve(undefined):ei("Get",{credentials:t,typeName:"User",search:{name:t.userName}}).then(function(t){var i=t[0];return!i||i.language===n||i.acceptedEULA?r.reject(new a.AbortException):i}).then(function(r){return ei("Set",{credentials:t,typeName:"User",entity:i(i({},r),{language:n})})}).catch(function(){return r.resolve(undefined)})},oi=function(n){var r=t.token?t.token.database:"",i;f.showWaiting();f.setEnabledState(!1);i=n.serverName;i&&i.indexOf("/apiv1")===-1&&(i=i+"/apiv1");v.apiTransport("Authenticate",{database:n.database||r,userName:(n.userName||"").trim(),password:n.password},i||t.url,"login").then(function(t){wi(n.newUserLanguage,t&&t.credentials).then(function(){n.serverName&&t.path===tt&&window.location.origin!==n.serverName&&(t.path=n.serverName);yt(t,"rememberMe"in n?n.rememberMe:rt(),!0)})}).catch(function(t){ii(t,n,!1)})},si=function(i){var r=t.token?t.token.database:"",u=function(){f.hideWaiting();f.setEnabledState(!0);f.getCredentialsForStep("two",{userName:i.userName,database:i.database,rememberMe:i.rememberMe},ui,o)},e=i.database||r,s=(i.userName||"").trim();t.call("RedirectToSamlLoginUrl",{database:e,userName:s},!1).beginInvoke(function(t){if(t&&typeof t=="string"){var h="//"+n.location.host+"/apiv1/RedirectToSamlLoginUrl?"+["database="+encodeURIComponent(e||'""'),"userName="+encodeURIComponent(s),"redirect=true"].join("&");l.samlLogin(h,i,r).then(function(n){f.hideWaiting();yt(n,rt(),!0)}).catch(function(n){n?ii(n,i,!0):(f.setEnabledState(!0),f.hideWaiting(),f.getCredentialsForStep("one",i,pt,o))})}else u()},function(n){n&&n.isAuthenticationException&&r!==""?ii(n,i,!0):u()})},c=et(),bi=c&&c.source,hi=gt(h),ri=kt(h),ki=function(n){return n&&(dt(h)||hi||ri)},ci=wt(t,k),pt=function(n){f.showWaiting();f.setEnabledState(!1);ci.then(function(){si(n)},function(){si(n)})},ui=function(n){f.showWaiting();f.setEnabledState(!1);ci.then(function(){oi(n)},function(){oi(n)})},li=function(n){f.getCredentialsForStep("one",i(i({},t.token),{userName:n||t.token.userName}),pt,o)},ai,vi,ti;if(f.attachEvent("stepBack",li),!c||ki(h)||pi(t.token,c))if(ot(),ct&&ut!==null)ut();else{if(d()){location.reload();return}if(ri||hi)ai=ri?"passwordExpiry":"resetPassword",vi=!!t.token.rememberMe,p.beginGetCredentials(t.token,ai,function(n){yt(n,vi,!1)},o);else{if(bi==="ResetPassword"&&nt.fireEvent("ResetPassword"),w){if(ti=bt(w.listItems()),ni()&&ti.length===1&&(!b||b==="default.html")){window.location.replace(ti[0].href);return}f.setSavedTokens(ti,b)}f.getCredentialsForStep("one",t.token,pt,o)}}else yt({credentials:c,path:c.target||tt},c.rememberMe||rt(),!1)}})}var i=this&&this.__assign||function(){return i=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s=require("./storage/tokensCollection"),r=require("./deferred"),h=require("./eventHandler"),c=require("../vanillaExtension/vanilla"),f=require("../utils"),l=require("./samlLoginUtils"),e=require("./browser"),a=require("./exceptions/commonExceptions"),u=require("./ui/modules/vendorHost/vendorHost"),o=require("../utils/parseServerName"),v=require("./apiTransport"),y=require("./storage/redirectStorage");t.default=p})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/dialogTokenReceiver"),geotab.commonjs.generateExport("geotab/checkmate/dialogTokenReceiver"));
(function(n,require,t){"use strict";function r(n,t,r){var u={active:0,inactive:1,establishing:2,disconnecting:3},e,s=typeof n=="function"?n:function(){return["dataupdate",n.token.database].join("|")},l=function(n){var t=n;h.isKnownHash(t.senderId)||(r&&(t=r(t)),c(t,t.data))},a=function(){t.subscribe(s(),l);e=u.active},v=function(){t.unsubscribe(s());e=u.inactive},y=function(){var n=Object.keys(f).length;n&&[u.active,u.establishing].indexOf(e)===-1?a():n||[u.inactive,u.disconnecting].indexOf(e)!==-1||v()},c=function(n,t,i){var r=f[n.type],u=r&&r[n.verb],e={type:n.type,verb:n.verb,data:t},o=function(n,t){n.forEach(function(n){n.subscriber!==i&&n.handler(t)})};r&&(u&&o(u,e),o(r,e))},h=function(){var n=[],t=[];return{getHashKey:function(r){var f=n.indexOf(r),u;return f!==-1?t[f]:(u=i.generateId(),n.push(r),t.push(u),u)},getObjectByHash:function(i){var r=t.indexOf(i);return n[r]||null},isKnownHash:function(n){return this.getObjectByHash(n)!==null}}}(),f={},o=function(n){return(n||"").split(",").reduce(function(n,t){var i=t.split("."),r=(i[0]||"").trim(),u=(i[1]||"").trim();return r&&n.push({type:r,verb:u||null}),n},[])};return{attachEvent:function(n,t,i){if(!n)throw new Error("Empty events names are not allowed yet!");if(!i)throw new Error("Event handler must be a function");if(!t)throw new Error("Subscriber parameter is mandatory");o(n).forEach(function(n){var r,u,e={subscriber:h.getHashKey(t),handler:i};n.type&&(r=f[n.type]||(f[n.type]=[]),n.verb&&(u=r[n.verb]||(r[n.verb]=[])),(u||r).push(e))});y()},hasEvent:function(n,t){return o(n).every(function(n){var i=f[n.type],r=i&&i[n.verb];return r&&r.some(function(n){return n.handler===t})})},fireEvent:function(n,i,r,u){var e=o(n),f=e[0],l=h.getHashKey(i);if(e.length!==1||!f.type||!u&&!f.verb)throw new Error("Event must include only one event type and one verb! Instead got: "+(n||"empty"));u||t.notify(s(),{type:f.type,verb:f.verb,senderId:l,data:r});c(f,r,l)},detachEvent:function(n,t,i){o(n).forEach(function(n){var r=f,t="type",u;n[t]&&r[n[t]]&&(u=r[n[t]],n.verb&&(t="verb",r=u,u=r[n[t]]),i?r[n[t]]=(u||[]).filter(function(n){return i!==n.handler}):delete r[n[t]])})}}}Object.defineProperty(t,"__esModule",{value:!0});t.NotificationCenter=void 0;var i=require("../utils");t.NotificationCenter=r})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/notificationCenter"),geotab.commonjs.generateExport("geotab/checkmate/notificationCenter"));
(function(n,require,t){"use strict";function u(n,t,u,f,e,o,s,h){o===void 0&&(o=!1);var a=o,y=u,w={},rt=function(n){var u=n.result?n.result.messages:n.messages,f,i,t,r;if(u)try{for(i=0;i<u.length;i++){t=u[i];for(f in c)c.hasOwnProperty(f)&&(r=c[f],t.subscriptionId===r.id&&r.callback&&(t.data.senderId&&w[t.data.senderId]?delete w[t.data.senderId]:r.callback(t.data)))}}finally{}else if(n!==!0)return!1;return!0},ut=function(n){e===null||e===void 0?void 0:e.error("ChannelError "+(n&&n.message))},v,b=function(){v&&(clearTimeout(v),v=null)},k=function(n){b();v=setTimeout(ht,n)},d=!1,ft=function(){h&&h();nt();d=!1},et=function(n){rt(n)||(e===null||e===void 0?void 0:e.log("subscriptions will be invalidated"),it(!0,function(){return tt(!0).catch(g)}))},ot=function(n){var t=n&&n.isAborted;t||f(n);d=!t},st=function(){ct();a||g()},g=function(){Object.keys(c).length&&k(d?5e3:1e3)},l,ht=function(){b();l&&l.isConnected()||(l=t.getConnection(),l===null||l===void 0?void 0:l.listen(n,ft,et,ot,st))},nt=function(){var n;return function(t){t===void 0&&(t=0);n&&clearTimeout(n);n=setTimeout(it,t)}}(),ct=function(){e===null||e===void 0?void 0:e.log("flagging subscriptions as deprecated");Object.keys(c).forEach(function(n){delete c[n].id})},it=function(){var n;return function(t,i){n?n.then(function(){return tt(!1)}).catch(i!==null&&i!==void 0?i:function(){}):n=tt(t).then(function(){n=null},function(){i&&i();n=null})}}(),tt=function(t){var r,e,u;return(t===void 0&&(t=!1),r=Object.keys(c).filter(function(n){return t||!c[n].hasOwnProperty("id")}),e=!1,r.length>0)?(u=i.Deferred(),y.call("Subscribe",{topicIds:r,channelId:n}).beginInvoke(function(n){for(var i,f,t=0;t<r.length;t++)i=c[r[t]],i&&(f=!i.id||i.id<n[t],f&&(i.id=n[t],e=!0));e?a||(s&&s(n),k(1e3)):u.reject(new Error("Can't be subscribed"));u.resolve(undefined)},function(n){u.reject(n);n&&!n.isAborted&&(n.isDBInitializingException&&nt(5e3),f(n))}),u.promise()):(s&&s(),i.resolved())},c={},p,lt=function(){k(5e3)},at=function(){return!!v};return p={getChannelId:function(){return n},getSubscriptions:function(){return Object.keys(c)},subscribe:function(n,t){if(c[n])throw new Error("Already subscribed to "+n);return c[n]={callback:t},a||(at()||lt(),nt()),!a},unsubscribe:function(n,t){var r=i.Deferred(),u=c[n],e=function(){delete c[n];r.resolve()},o=t?ut:f;return u||r.reject(new Error("Not subscribed to "+n)),a?r.resolve():u.id?y.call("Unsubscribe",{subscriptionIds:[u.id]}).beginInvoke(e,o):e(),r.promise()},notify:function(n,t){a||(w[t.senderId]=!0,y.call("Notify",{topicId:n,data:t}).beginInvoke(r.NOOP,f))},shutdown:function(){return b(),l&&l.isConnected()&&l.disconnect(),l=null,i.together(p.getSubscriptions().map(function(n){return p.unsubscribe(n)})).then(r.NOOP)},suspend:function(){return a=!0,p.shutdown()},resume:function(){a=!1;g()},setConnection:function(n){y=n}}}Object.defineProperty(t,"__esModule",{value:!0});var r=require("../../utils"),i=require("../deferred");t.default=u})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/channel/cometChannel"),geotab.commonjs.generateExport("geotab/checkmate/channel/cometChannel"));
(function(n,require,t){"use strict";function u(t){var o=document.getElementsByTagName("head")[0],s=0,h=window.location.protocol+"//"+n.location.host+"/apiv1/Comet",e=!1,f=!1,u=i.resolved();return window.addEventListener("beforeunload",function(){e=!0},!1),{listen:function(n,c,l,a,v){var w='"',y=document.createElement("script"),p="ncjson"+(new Date).getTime()+"_"+ ++s+"_"+r.generateId(),b=!1,g=function(n){a(n)},k=r.multiplex(function(){return e||(b||(d(),b=!0,g()),u.reject()),!1},100),nt=setTimeout(k,t),d=function(){if(y){clearTimeout(nt);nt=0;y.src="";y.removeEventListener("error",k,!1);y&&y.parentNode&&y.parentNode.removeChild(y);for(var n in y)y.hasOwnProperty(n)&&delete y[n]}window[p]&&delete window[p]},tt=function(n){try{b||(b=!0,c(),l(n))}finally{d()}},it="?"+encodeURIComponent("channelId")+"="+encodeURIComponent(w+n+w)+"&";y.addEventListener("error",k,!1);y.setAttribute("id","geotabComet_"+p);y.src=h+it+"JSONP="+w+p+w;y.async=!0;window[p]=function(n){try{u.resolve(JSON.parse(decodeURIComponent(n)))}catch(t){u.reject();g({message:t.message+" (Comet request failed. Returned data: "+n+")",type:t.type})}};f=!0;u=i.default("cometRequestTask"+p).done(tt).fail(d);o.appendChild(y);u.always(function(){f=!1;v()})},disconnect:function(){u.abort()},isConnected:function(){return f}}}Object.defineProperty(t,"__esModule",{value:!0});var i=require("../task"),r=require("../../utils");t.default=u})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/channel/jsonp"),geotab.commonjs.generateExport("geotab/checkmate/channel/jsonp"));
(function(n,require,t){"use strict";function i(t,i){var u=!1,r,e=function(){r&&(i===null||i===void 0?void 0:i.warn("It seems like device was asleep."),r.send("PING"))},f=function(){u&&(u=!1,r&&r.close(),t&&t.unsubscribe(e),i===null||i===void 0?void 0:i.warn("Closing websocket."))},o=function(i,r,o,s,h){var l="wss://"+n.location.host+"/"+n.location.database+"/?channelId="+i,a=function(n){try{o(JSON.parse(n.data))}catch(t){s(t)}},v=function(n){s(n);f()},y=function(n){h(n);f()},c=null;try{c=new WebSocket(l)}catch(p){s(new Error(p.message+". WebSocket threw an error."))}return c&&(u=!0,c.onopen=r,c.onmessage=a,c.onerror=v,c.onclose=y,t&&t.awaken(e)),c};return{listen:function(n,t,f,e,s){u?i===null||i===void 0?void 0:i.warn("websocket is already opened."):r=o(n,t,f,e,s)},disconnect:function(){r&&u&&(r.close(),r=null,f())},isConnected:function(){return u}}}Object.defineProperty(t,"__esModule",{value:!0});t.default=i})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/channel/webSocket"),geotab.commonjs.generateExport("geotab/checkmate/channel/webSocket"));
(function(n,require,t){"use strict";function u(t){return{monitor:function(u){var s=i.Deferred(),e=!1,f=function(){var i=10,t=0,n;return{increment:function(){t++;n&&(n(),n=null)},reset:function(){t=0;n=null},isTooBig:function(){return t>i},onNextIncrement:function(t){n=t}}}(),h=1e3,o,c=function(){o.listen=u.listen;o.disconnect=u.disconnect};return o={listen:function(i,o,l,a,v){var p=Date.now(),y=!1;u.listen(i,function(){y=!0;f.reset();o.call(u)},l,function(n){a.call(u,n)},function(i){var o=Date.now();!y&&o-p<h&&navigator.onLine&&(f.increment(),f.isTooBig()&&!e&&(e=!0,t.call("GetVersion",r.getDbParams(t.token.database||n.location.database),!1).beginInvoke(function(){f.onNextIncrement(function(){setTimeout(function(){c();s.resolve(undefined)},0)})},function(){e=!1;f.reset()})));v.call(u,i)})},disconnect:function(){u.disconnect()},isConnected:function(){return u.isConnected()},onPermanentFail:function(n){s.then(n)}}}}}Object.defineProperty(t,"__esModule",{value:!0});t.WebSocketConnectionStabilityMonitor=void 0;var i=require("../deferred"),r=require("../../utils");t.WebSocketConnectionStabilityMonitor=u})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/channel/webSocketConnectionStabilityMonitor"),geotab.commonjs.generateExport("geotab/checkmate/channel/webSocketConnectionStabilityMonitor"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(n){this.callbacks=[];this.logger=n||null}return n.prototype.tick=function(){var t=this;this.from=Date.now();this.timerId=setTimeout(function(){if(t.to=Date.now(),(t.to-(t.from||0))/n.durationInMs>n.deviationAllowed)try{t.callbacks.forEach(function(n){return n()})}catch(i){t.logger&&t.logger.error("One of sleep mode detector listeners has thrown an error. It won't break anything, but WHY?? "+i)}t.tick()},n.durationInMs)},n.prototype.awaken=function(n){this.callbacks.push(n);this.timerId||this.tick()},n.prototype.unsubscribe=function(n){for(var t=0;t<this.callbacks.length;t++)this.callbacks[t]===n&&(this.callbacks.splice(t,1),t--);this.timerId&&!this.callbacks.length&&clearTimeout(this.timerId);this.timerId=null},n.durationInMs=5e3,n.deviationAllowed=1.2,n}();t.default=i})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/channel/sleepModeDetector"),geotab.commonjs.generateExport("geotab/checkmate/channel/sleepModeDetector"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=require("./jsonp"),r=require("./webSocket"),u=require("./webSocketConnectionStabilityMonitor"),f=require("./sleepModeDetector"),e=function(){function n(n){this.connection=n;this.currentTransport=null}return n.prototype.getConnection=function(){var t=this,n,e;return this.currentTransport===null&&(n=function(){return i.default(4e4)},e=function(){var e=r.default(new f.default,console),i=u.WebSocketConnectionStabilityMonitor(t.connection).monitor(e);i.onPermanentFail(function(){console.error("webSockets are shutdown permanently. Switching to JSONP");t.currentTransport=n()});return i},this.currentTransport=typeof WebSocket!="undefined"?e():n()),this.currentTransport},n}();t.default=e})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/channel/channelTransportFactory"),geotab.commonjs.generateExport("geotab/checkmate/channel/channelTransportFactory"));
(function(n){if(typeof exports=="object"&&typeof module!="undefined")module.exports=n();else if(typeof define=="function"&&define.amd)define([],n);else{var t;t=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this;t.uuidv4=n()}})(function(){return function n(t,i,r){function u(f,o){var h,c,s;if(!i[f]){if(!t[f]){if(h=typeof require=="function"&&require,!o&&h)return h(f,!0);if(e)return e(f,!0);c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c;}s=i[f]={exports:{}};t[f][0].call(s.exports,function(n){var i=t[f][1][n];return u(i?i:n)},s,s.exports,n,t,i,r)}return i[f].exports}for(var e=typeof require=="function"&&require,f=0;f<r.length;f++)u(r[f]);return u}({1:[function(require,n){function r(n,t){var r=t||0,u=i;return u[n[r++]]+u[n[r++]]+u[n[r++]]+u[n[r++]]+"-"+u[n[r++]]+u[n[r++]]+"-"+u[n[r++]]+u[n[r++]]+"-"+u[n[r++]]+u[n[r++]]+"-"+u[n[r++]]+u[n[r++]]+u[n[r++]]+u[n[r++]]+u[n[r++]]+u[n[r++]]}for(var i=[],t=0;t<256;++t)i[t]=(t+256).toString(16).substr(1);n.exports=r},{}],2:[function(require,n){(function(t){var i,r=t.crypto||t.msCrypto,u,f;r&&r.getRandomValues&&(u=new Uint8Array(16),i=function(){return r.getRandomValues(u),u});i||(f=new Array(16),i=function(){for(var n=0,t;n<16;n++)(n&3)==0&&(t=Math.random()*4294967296),f[n]=t>>>((n&3)<<3)&255;return f});n.exports=i}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],3:[function(require,n){function r(n,r,u){var o=r&&u||0,f,e;if(typeof n=="string"&&(r=n=="binary"?new Array(16):null,n=null),n=n||{},f=n.random||(n.rng||t)(),f[6]=f[6]&15|64,f[8]=f[8]&63|128,r)for(e=0;e<16;++e)r[o+e]=f[e];return r||i(f)}var t=require("./lib/rng"),i=require("./lib/bytesToUuid");n.exports=r},{"./lib/bytesToUuid":1,"./lib/rng":2}]},{},[3])(3)});
(function(n,require,t){"use strict";function i(){return window.uuidv4()}Object.defineProperty(t,"__esModule",{value:!0});require("../js/uuid");t.default=i})(geotab,geotab.commonjs.generateRequire("geotab/uuid"),geotab.commonjs.generateExport("geotab/uuid"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=require("../eventHandler"),u=require("./cometChannel"),f=require("./channelTransportFactory"),e=require("../exceptions/networkException"),o=require("../../uuid"),i=require("../deferred"),s=function(){function t(t,i,s){var h=this,c=o.default(),l=new f.default(t);this.eventHandler=r.default();this.cometChannel=u.default(c,l,t,function(n){i(e.default(null,"ChannelConnectionFailed",n,null))},console,s,function(n){h.fireEvent("subscriptionsUpdated",h,n)});n.getGlobalObject().addEventListener("unload",function(){h.destroy()},!1);console.log("WebSocketChannel initialized.")}return t.prototype.isActive=function(){return!!this.cometChannel},t.prototype.getChannelId=function(){return this.cometChannel?this.cometChannel.getChannelId():""},t.prototype.subscribe=function(n,t){this.cometChannel&&(this.cometChannel.getSubscriptions().indexOf(n)===-1?(this.cometChannel.subscribe(n,function(i){console.log("Received notification for "+n);t(i)}),console.log("Subscribing to "+n)):console.log("Already subscribed to "+n))},t.prototype.unsubscribe=function(n){var r=this,t=i.Deferred();return this.cometChannel?(this.cometChannel.getSubscriptions().indexOf(n)!==-1?this.cometChannel.unsubscribe(n).then(function(){r.cometChannel&&!r.cometChannel.getSubscriptions().length?r.cometChannel.shutdown().then(t.resolve):t.resolve()}):t.resolve(),t.promise()):i.resolve(undefined)},t.prototype.notify=function(n,t){this.cometChannel&&this.cometChannel.notify(n,t)},t.prototype.destroy=function(){if(this.cometChannel){var n="shutting comet down: "+this.getChannelId();console&&(typeof console.warn=="function"?console.warn(n):console.log(n));this.cometChannel.suspend();this.cometChannel=null}},t.prototype.attachEvent=function(n,t){this.eventHandler.attachEvent(n,t)},t.prototype.fireEvent=function(n,t,i){this.eventHandler.fireEvent(n,t,i)},t.prototype.attachToAll=function(n){this.eventHandler.attachToAll(n)},t}();t.default=s})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/channel/WebSocketChannel"),geotab.commonjs.generateExport("geotab/checkmate/channel/WebSocketChannel"));
(function(n,require,t){"use strict";function r(n,t,r){return new i.default(n,t,!!r)}Object.defineProperty(t,"__esModule",{value:!0});var i=require("./WebSocketChannel");t.default=r})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/channel/channel"),geotab.commonjs.generateExport("geotab/checkmate/channel/channel"));
(function(n,require,t){"use strict";function i(){var t="checkmate-alarm",n=[],u=!0,i=function(){var u=document.getElementById(t);u&&(n.length?(u.src="",u.src=n.shift()||"",r()):(u.removeEventListener("ended",i,!1),document.getElementsByTagName("body")[0].removeChild(u)))},r=function(){var n=document.getElementById(t);u=!1;n.addEventListener("ended",i,!1);n.play().catch(i)};return{play:function(i){var f=document.getElementById(t);n=i;f?(f.pause(),f.src="",f.src=n.shift()||""):document.getElementsByTagName("body")[0].appendChild(function(){return f=document.createElement("audio"),f.id=t,f.src=n.shift()||"",f}());u?window.addEventListener("click",r,{once:!0}):r()}}}Object.defineProperty(t,"__esModule",{value:!0});t.default=i})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/sound"),geotab.commonjs.generateExport("geotab/checkmate/sound"));
(function(n,require,t){"use strict";var i,r,u;Object.defineProperty(t,"__esModule",{value:!0});t.getNotificationSource=t.translateNotificationState=void 0;i=["StatusUnknown","StatusDisabled","StatusDisconnected","StatusConnected","StatusDebug","StatusIdle","StatusStopped","StatusUnlocked","StatusRunningNoAidingDataAvailable","StatusRunning","StatusFTDINotInstalled","StatusTryingToLock","StatusAuthenticationFailed","StatusAuthenticationNotSupported","StatusAuthenticationSchemeNotProvided","StatusUnknownResponseFromServer","StatusServerNotFound","StatusProxyServerNotFound","StatusTimeout","StatusProxyTimeout","StatusDeviceRegistrationFailed","StatusConnecting","StatusNoDevices","UpdateMessageCountsFailed","InvalidOrbcommCustomer","ThreadFinishTimeout","StatusWaitingForUpgrade","StatusDatabaseVersionDoesnotMatch","StatusUserCleared","StatusMissing","StatusServiceManagerConnected","CacheCleared","CacheBusy","StatusExceptionOccurred","CheckmateException","KeyDownloaderNonDataKeyInserted"];r=function(n,t){return i.indexOf(n)!==-1?t(n):n.replace("Status","")};t.translateNotificationState=r;u=function(n,t){switch(n){case"Uploader":case"ServiceManager":case"LiveDownloader":case"GoPatrolDownloader":case"GoSafeDownloader":case"Purge":case"Gps2GoDownloader":case"NotificationSender":case"CustomReportScheduler":case"ReprocessingQueueWatcher":case"WebServer":return t(n);default:return n}};t.getNotificationSource=u})(geotab,geotab.commonjs.generateRequire("geotab/utils/notificationUtils"),geotab.commonjs.generateExport("geotab/utils/notificationUtils"));
(function(n,require,t){"use strict";var i,r;Object.defineProperty(t,"__esModule",{value:!0});t.MediaLoaderBase=t.FILE_NOT_FOUND_ERROR=void 0;i=require("../deferred");t.FILE_NOT_FOUND_ERROR="not found";r=function(){function n(n){var r=this;this.credentials=n;this.cache={};this.getMediaFile=function(n){var f=i.Deferred(),u=new XMLHttpRequest,e="JSON-RPC="+encodeURIComponent(JSON.stringify(r.setPayloadParams(n)));return u.open("POST","/apiv1"),u.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),u.responseType="blob",u.onreadystatechange=function(){if(u.readyState===4)if(u.status===200){var i=new FileReader;i.readAsDataURL(u.response);i.onloadend=function(){var r=i.result;r===null||r===""||r.startsWith("data:application/json")?f.resolve({id:n,error:t.FILE_NOT_FOUND_ERROR}):f.resolve({id:n,content:r})}}else f.resolve({id:n,error:t.FILE_NOT_FOUND_ERROR})},u.send(e),f.promise()}}return n.prototype.load=function(n){var t=this;return i.together(n.map(function(n){return t.cache[n]||(t.cache[n]=t.getMediaFile(n)),t.cache[n]}))},n.prototype.clearCache=function(){this.cache={}},n.prototype.getMedia=function(n){return this.load([n]).then(function(n){return n[0]})},n}();t.MediaLoaderBase=r})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/media/mediaLoaderBase"),geotab.commonjs.generateExport("geotab/checkmate/media/mediaLoaderBase"));
(function(n,require,t){"use strict";var u=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),i,r;Object.defineProperty(t,"__esModule",{value:!0});t.AudioStreamLoader=void 0;i=require("./mediaLoaderBase");r=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return u(t,n),t.prototype.setPayloadParams=function(n){return{method:"GetNotificationAudioStream",params:{credentials:this.credentials,notificationBinaryFile:{id:n}}}},t}(i.MediaLoaderBase);t.AudioStreamLoader=r})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/media/audioStreamLoader"),geotab.commonjs.generateExport("geotab/checkmate/media/audioStreamLoader"));
(function(n,require,t){"use strict";function i(n){for(var i=n.length,r=new ArrayBuffer(i),u=new Uint8Array(r),t=0;t<i;t++)u[t]=n.charCodeAt(t);return r}function r(n){var t=n.substring(n.indexOf("base64,")+7);return i(atob(t))}function u(n){var t=r(n),i=n.substring(n.indexOf("data:")+5,n.indexOf(";base64,")),u=new Blob([t],{type:i});return URL.createObjectURL(u)}Object.defineProperty(t,"__esModule",{value:!0});t.createObjectURLFromBase64data=t.base64DatatoBinary=t.convertToBinary=void 0;t.convertToBinary=i;t.base64DatatoBinary=r;t.createObjectURLFromBase64data=u})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/media/mediaUtils"),geotab.commonjs.generateExport("geotab/checkmate/media/mediaUtils"));
(function(n,require,t){"use strict";var i,r;Object.defineProperty(t,"__esModule",{value:!0});t.isValidExternalNotificationLinkDomian=t.getNotificationLinkDomian=void 0;i=function(n){try{var t=new URL(n);return t.hostname.split(".").slice(-2).join(".")}catch(i){return undefined}};t.getNotificationLinkDomian=i;r=function(n,i){var r=["geotab.com",t.getNotificationLinkDomian(i)];return r.indexOf(n)!==-1};t.isValidExternalNotificationLinkDomian=r})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/notifications/utils"),geotab.commonjs.generateExport("geotab/checkmate/ui/notifications/utils"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.createNewsNotification=void 0;var i=require("../notifier"),r=require("./utils"),u=function(n,t,u,f){var e=r.getNotificationLinkDomian(n.htmlInfo);return e===undefined?{type:i.NotificationType.NEWS,message:f(n.info),url:u("notification",{id:n.id}),urlTitle:f("Click to read the notification")}:r.isValidExternalNotificationLinkDomian(e,t)?{type:i.NotificationType.NEWS,link:{name:f(n.info),href:n.htmlInfo,target:"_blank"}}:undefined};t.createNewsNotification=u})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/notifications/newsNotificationFactory"),geotab.commonjs.generateExport("geotab/checkmate/ui/notifications/newsNotificationFactory"));
(function(n,require,t){"use strict";function a(n,t,a,v,y,p,w){var et=2,tt=u.default(a),vt=o.default(),it=[],ot=[],ct={},g={},b={},k={},yt={exception:"Exception"},rt={exception:p("ExceptionsReport"),trips:p("DisplayMap")&&p("TripsActivityReport")},d={urgent:{web:undefined},popup:{web:undefined}},ut=!1,nt=function(n){return Object.keys(n).length},pt=function(n){return b.hasOwnProperty(n)?k.hasOwnProperty(n)?"individualUrgent":"urgent":g.hasOwnProperty(n)?"popup":null},wt=function(n){for(var i=function(){setTimeout(function(){ot.forEach(function(n){v(n,f.NOOP)});ot=[]},1)},t=0;t<n.length;t++)n[t].type==="Info"?(ot.push(n[t]),it.push(tt.displayPopupNotification({name:a("Notifications"),message:"Info: "+n[t].info,seconds:5,dismiss:i}))):g[n[t].id]={dateTime:n[t].dateTime,deviceId:n[t].deviceId};Object.keys(g).length&&at()},bt=function(n){n.forEach(function(n){var u=ct[n.id],t;u&&u.hasBeenDisplayed||(t=l.createNewsNotification(n,location.origin,y,a),t!==undefined)&&(it.push(tt.displayPopupNotification(r(r({},t),{button:{title:a("Dismiss"),click:function(){var t=i.Deferred();return v(n,function(){t.resolve(null)}),t.promise()}}}))),ct[n.id]={hasBeenDisplayed:!0})})},kt=function(n,r){var f=[];n.forEach(function(n){var e=i.Deferred(),h,o,l,c;if(r)b[n.id]={dateTime:n.dateTime,deviceId:n.deviceId,hasBeenDisplayed:!1};else{if(nt(k)>=et){ut=!0;b[n.id]={dateTime:n.dateTime,deviceId:n.deviceId,hasBeenDisplayed:!1};return}o=n.type===yt.exception;o?t.exceptionEvents.getItemById(n.exceptionEvent.id).then(function(r){var u=n.recipient;w.isDefault(u)?i.together([t.devices.getItemById(r.device.id),t.rules.getItemById(r.rule.id)]).then(function(n){var t=n[0],i=n[1];e.resolve(w.localize(u,t.name,i.name))}):e.resolve(n.fullInfo)}):(l=n.source?a("UrgentNotificationFrom")+" "+s.getNotificationSource(n.source,a):a("UrgentNotification"),e.resolve(l));(!o||rt.exception)&&(h=y("notification",{id:n.id}));c=ft(n);c&&(!o||rt.trips)&&(h=y("tripsHistory",c));b[n.id]={dateTime:n.dateTime,deviceId:n.deviceId,hasBeenDisplayed:!0};e.then(function(t){nt(k)>=et?b[n.id]={dateTime:n.dateTime,deviceId:n.deviceId,hasBeenDisplayed:!1}:k[n.id]={web:tt.displayPopupNotification({type:u.NotificationType.WARNING,name:a("Notifications"),message:t,url:h,button:{title:a("Dismiss"),click:function(){var t=i.Deferred();return v(n,function(){t.resolve(null)}),t.promise()}},dismiss:function(){b[n.id]={dateTime:n.dateTime,deviceId:n.deviceId,hasBeenDisplayed:!1};delete k[n.id]}})}});f.push(e)}});Object.keys(b).length&&i.together(f).then(function(){lt()})},dt=new h.AudioStreamLoader({database:n.token.database,userName:n.token.userName,sessionId:n.token.sessionId}),gt=function(n){var t=n&&n.length?n.map(function(n){return n.recipient.notificationBinaryFile.id}).filter(f.echo):[];dt.load(t).then(function(n){return n.filter(function(n){return n.content}).map(function(n){return c.createObjectURLFromBase64data(n.content||"")})}).then(function(n){return vt.play(n)})},ni=function(){if(nt(k)>0){for(var n in b)if(b.hasOwnProperty(n)){if(k.hasOwnProperty(n))continue;delete b[n]}}else b={}},st=function(n){d.urgent.web&&(d.urgent.web.hide(),d.urgent.web=undefined);n&&ni()},ht=function(n){d.popup.web&&(d.popup.web.hide(),d.popup.web=undefined);n&&(g={})},ti=function(){var n=d.urgent.web;return!!(n&&n.container.parentNode)},ii=function(n){return n?{single:"NumberedOneAdditionalUrgentAlert",multiple:"NumberedMultAdditionalUrgentAlerts"}:{single:"NumberedOneUrgentAlert",multiple:"NumberedMultUrgentAlerts"}},lt=function(){var n,t,i,r;if(st(!1),n=nt(b)-nt(k),n>0){var f=ii(ut),o=n>1?a(f.multiple).replace("{0}",n.toString()):a(f.single),e=y("notifications",{});if(n===1){for(i in b)if(!b[i].hasBeenDisplayed){t=b[i];break}t&&(r=ft(t),r&&rt.trips&&(e=y("tripsHistory",r)))}d.urgent.web=tt.displayPopupNotification({name:a("Notifications"),message:o,url:e,urlTitle:a("Click to read the notification"),type:u.NotificationType.WARNING})}},ri=function(){var n=d.popup.web;return!!(n&&n.container.parentNode)},at=function(){var n,t,r,u,i;ht(!1);n=nt(g);t=y("notifications",{});n>0&&(r=n>1?a("NumberedMultAlerts").replace("{0}",n.toString()):a("NumberedOneAlert"),n===1&&(u=g[Object.keys(g)[0]],i=ft(u),i&&rt.trips&&(t=y("tripsHistory",i))),d.popup.web=tt.displayPopupNotification({name:a("Notifications"),message:r,urlTitle:a("Click to read the notification"),url:t}))},ui=function(n){var i,t,u,r;if(nt(g)!==0||nt(b)!==0){for(nt(k)<et&&(ut=!1),i=0;i<n.length;i++){t=n[i].id;u=pt(t);switch(u){case"individualUrgent":r=k[t];r.web&&r.web.hide();delete k[t];delete b[t];break;case"urgent":delete b[t];break;case"popup":delete g[t]}}ti()&&lt();ri()&&at()}},fi=function(){ht(!0);st(!0);k={};d={urgent:{web:undefined},popup:{web:undefined}}},ei=function(){ht(!0);st(!0);Object.keys(k).forEach(function(n){var t=k[n];t.web&&t.web.hide()});it.forEach(function(n){n.hide()});it.length=0;ut=!1},ft=function(n){var i=n.deviceId?n.deviceId:n.device?n.device.id:null,r=n.dateTime,t;return i&&r?(t=new Date(r),{routes:{},devices:[i],tripLogPoint:t.toISOString(),includeHistoricData:!0,dateRange:{startDate:new Date(t.getTime()-e).toISOString(),endDate:new Date(t.getTime()+e).toISOString()}}):undefined};return{showPopup:wt,showUrgentPopup:kt,showNewsPopup:bt,playAlarm:gt,reset:fi,notificationDismissed:ui,allNotificationsDismissed:ei,tripsHistoryLink:ft}}var r=this&&this.__assign||function(){return r=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=require("../deferred"),o=require("../sound"),u=require("./notifier"),s=require("../../utils/notificationUtils"),f=require("../../utils"),h=require("../media/audioStreamLoader"),c=require("../media/mediaUtils"),l=require("./notifications/newsNotificationFactory"),e=72e5;t.default=a})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/notificationsAlerter"),geotab.commonjs.generateExport("geotab/checkmate/ui/notificationsAlerter"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getRequestQuota=t.MOBILE_SPEED_POINTS=t.DESKTOP_SPEED_POINTS=t.NOTIFICATIONS_QUOTA=t.ROUTES_QUOTA=t.MOBILE=t.DESKTOP=void 0;var i=require("../utils"),r=require("./browser");t.DESKTOP=500;t.MOBILE=150;t.ROUTES_QUOTA=100;t.NOTIFICATIONS_QUOTA=400;t.DESKTOP_SPEED_POINTS=1e3;t.MOBILE_SPEED_POINTS=100;t.getRequestQuota=i.memOnce(function(){return r.isMobile()?t.MOBILE:t.DESKTOP})})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/requestQuotas"),geotab.commonjs.generateExport("geotab/checkmate/requestQuotas"));
(function(n,require,t){"use strict";function a(n,t,a,v,y,p,w){var ft=h.NOTIFICATIONS_QUOTA,pt=y||f.default(n,a),nt,wt=function(){var n=!0;return function(){return n&&window.setTimeout(function(){n=!1},1),n}}(),it=!1,b=[],bt=function(n){if(c.indexOf(n)!==-1)return"attention";switch(n){case"StatusDisabled":case"StatusNoDevices":case"StatusUnlocked":case"StatusStopped":case"StatusUserCleared":return"close-cross";case"StatusIdle":case"CacheCleared":case"StatusConnected":case"StatusConnecting":case"StatusServiceManagerConnected":case"StatusRunning":return"check";case"StatusWaitingForUpgrade":case"StatusTryingToLock":case"CacheBusy":case"StatusDebug":return"info-circled";case"StatusUnknown":case"StatusMissing":return"question-mark";default:return"info-circled"}},et=function(n){return n.dateTimeEnd?new Date(n.dateTimeEnd)<new Date:!1},tt=function(n){nt=null;b=[];g.fireEvent("notificationsUpdated");n||g.detachEvents("notificationsUpdated");k.allNotificationsDismissed()},ot=function(t,i){var r=function(){rt(t);k.notificationDismissed([t]);d.fireEvent("Notification.Dismiss",{},{id:t.id});i&&i()};return n.call("DismissNotification",{notification:{id:t.id}}).beginInvoke(r,function(n){n&&n.isRelationViolatedException?r():a(n)})},kt=function(t){return n.setTimeoutInMilliseconds(9e5),n.call("DismissAllUserNotifications",{}).beginInvoke(function(){n.setTimeoutInMilliseconds(i.defaultTimeout);tt(!0);k.allNotificationsDismissed();d.fireEvent("Notifications.Dismiss",{},{});t&&t()},function(t){n.setTimeoutInMilliseconds(i.defaultTimeout);a(t)})},rt=function(n,t){for(var i=0;i<b.length;i++)if(b[i].id===n.id){b.splice(i,1);t||g.fireEvent("notificationsUpdated");break}k.notificationDismissed([n])},dt=function(n){var t=n?n.exceptionEvent:null;return t&&t.name?"{"+(t.name||"?")+"}-{"+v.toLongTime(new Date(t.activeFrom))+"}-"+(t.duration===0)?"":"{"+t.duration.toString()+"}":n?n.info:""},gt=function(n){return n.notificationApplicationExceptionData?n.notificationApplicationExceptionData:n.notificationExceptionForUsersData},ni=function(n,t,i,r,u){return n?n.info:t?t.info:i?i.info.textFullInfo||i.info.textInfo:u?u.info:dt(r)},ut=function(n){var t={},u=n.notificationNewsData,i=n.notificationInfoData,e=n.notificationMaintenanceReminderData,r=gt(n),f=n.notificationExceptionData;return n.state||(t.state=i?i.state:r?r.description:null,t.machineName=i?i.machineName:r?r.machineName:"",t.source=i?i.source:r?r.source:"",t.fullInfo=ni(i,r,u,f,e),t.info=u&&u.info.textInfo?u.info.textInfo:t.fullInfo?t.fullInfo.length>200?t.fullInfo.substr(0,200):t.fullInfo:"",t.recipient=n.recipient,t.id=n.id,t.dateTime=n.dateTime,t.dateTimeEnd=n.dateTimeEnd,t.version=n.version,t.htmlInfo=u&&u.info?u.info.htmlInfo:null,f&&f.exceptionEvent&&(t.exceptionEvent=f.exceptionEvent)),i?t.type="Info":r?t.type="ApplicationException":f?(t.type="Exception",t.state="Alert"):e&&(t.type="MaintenanceReminder"),t.icon=bt(t.state),t.isDismissed=et(n),t},ti=function(n){return(n||[]).filter(function(n){return!(n.notificationNewsData&&n.notificationNewsData.info&&l.indexOf(n.notificationNewsData.info.htmlInfo||"")>=0)})},st=function(n){var r=ti(n),u={},e=[],o={LogNewsPopup:k.showNewsPopup,LogPopup:k.showPopup,LogUrgentPopup:k.showUrgentPopup,Alarm:k.playAlarm},h=function(n){return n.id&&n.hasOwnProperty("version")&&n.recipient.recipientType&&n.recipient.recipientType!=="Email"},f={},i,c=wt(),t,s;if(r&&r.length){for(r.sort(function(n,t){if(n.dateTime&&t.dateTime){var i=new Date(t.dateTime).getTime(),r=new Date(n.dateTime).getTime();return i-r}return-1}),i=0;i<b.length;i++)f[b[i].id]=i;for(i=0;i<r.length;i++)t=ut(r[i]),h(t)&&(f&&f.hasOwnProperty(t.id)?(s=f[t.id],b[s]=t):(b.push(t),f[t.id]=b.length-1),!t.isDismissed&&t.recipient.recipientType?(u[t.recipient.recipientType]||(u[t.recipient.recipientType]=[]),u[t.recipient.recipientType].push(t)):e.push(t));Object.keys(o).forEach(function(n){u[n]&&o[n](u[n],c)});k.notificationDismissed(e);nt=r[0]?r[0].version:null;g.fireEvent("notificationsUpdated")}},ht=function(t){return n.call("GetUserNotifications",{startAfterVersion:nt}).beginInvoke(function(n){st(n);nt&&ct(nt).then(function(n){n.forEach(function(n){rt(n,!0)})});t&&t()},function(n){g.fireEvent("notificationsUpdateFailed",g,[n])})},ii=function(){var t=[],r=function(n){return n.sort(function(n,t){var i,r;return n.dateTime&&t.dateTime?(i=new Date(t.dateTime),r=new Date(n.dateTime),i-r):-1})},i=function(u){var f=e.Deferred();return n.call("GetUserNotifications",{startAfterVersion:u,resultsLimit:ft,isGetDismissed:!0}).beginInvoke(function(n){var o=null,s,u,e;if(n&&n.length){for(u=r(n),e=0;e<u.length;e++)s=u[e],s.isDismissed=!0,t.push(ut(s));o=u[0]?u[0].version:null;u.length===ft&&o!==null?i(o):f.resolve(t)}else f.resolve(t)},function(n){f.reject(n)}),f.promise()};return{fetch:function(n){return t=[],i(n||null)}}},ct=function(n){return ii().fetch(n)},ri=function(n){return!n.type&&!n.verb?{type:"Notifications",verb:"Add",data:n}:n},ui=function(){return["notifications",n.token.database.toLowerCase(),n.token.userName.toLowerCase()].join("|")},d=r.NotificationCenter(ui,pt,ri),lt=function(){var n=[],t;return function(i){t||(t=setTimeout(function(){var i=n.slice(0);n=[];st(i);t=undefined},1500));n.push.apply(n,i.data)}}(),at=function(){tt(!0)},vt=function(n){rt(n.data)},fi=function(){d.attachEvent("Notifications.Add",{},lt);d.attachEvent("Notifications.Dismiss",{},at);d.attachEvent("Notification.Dismiss",{},vt);ht()},ei=function(){d.detachEvent("Notifications.Add",{},lt);d.detachEvent("Notifications.Dismiss",{},at);d.detachEvent("Notification.Dismiss",{},vt)},yt=function(){var n="TextTemplateDefaultExceptionRulePopupId";return{isDefault:function(t){return t&&t.notificationBinaryFile&&t.notificationBinaryFile.id===n},localize:function(n,t,i){return v.translateKey(n.notificationBinaryFile.text).replace("{device}",t).replace("{rule}",i)}}}(),g,k=s.default(n,t,v.translateKey,ot,p,w,yt);return g=u.extend(o.default(),{isRunning:function(){return it},start:function(){it||(it=!0,tt(),fi())},stop:function(){it=!1;tt();ei()},dismissOne:function(n,t){return ot(n,t)},dismissAll:function(n){return kt(n)},update:function(n){return tt(),ht(n)},getNotifications:function(){return b},getDismissedNotifications:function(n){return ct(n)},getNotificationsCount:function(){return b&&b.length?b.length:0},getTemplateHelper:function(){return yt},isNotificationDismissed:et,getDeviceDataForNotification:k.tripsHistoryLink,processNotification:ut})}Object.defineProperty(t,"__esModule",{value:!0});t.NotificationsService=void 0;var r=require("./notificationCenter"),u=require("../vanillaExtension/vanilla"),f=require("./channel/channel"),e=require("./deferred"),o=require("./eventHandler"),s=require("./ui/notificationsAlerter"),i=require("./transport"),h=require("./requestQuotas"),c=["StatusAuthenticationFailed","StatusAuthenticationNotSupported","StatusAuthenticationSchemeNotProvided","StatusDisconnected","StatusProxyServerNotFound","StatusProxyTimeout","StatusUnknownResponseFromServer","StatusFTDINotInstalled","StatusDatabaseVersionDoesnotMatch","StatusRunningNoAidingDataAvailable","StatusExceptionOccurred","StatusTimeout","ThreadFinishTimeout","StatusServerNotFound","StatusDeviceRegistrationFailed","UpdateMessageCountsFailed","InvalidOrbcommCustomer","Alert"],l=["geotab.checkmate.news.blog.blog"];t.NotificationsService=a})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/notificationsService"),geotab.commonjs.generateExport("geotab/checkmate/notificationsService"));
(function(n,require,t){"use strict";function r(n,t,r){var f={},o={Remove:t||i.NOOP,Set:r||i.NOOP},s=function(n){return function(t){return n.indexOf(t.id||t)!==-1}},e=function(n){var r=n.data||[],t=f[n.type],u=t&&t.data,i,h,e;u&&(!u.length||r.some(s(u)))&&(i=(n.verb==="Set"?t.setCallback:t.removeCallback)(n.type,r),i!==!1&&(h=typeof i=="string"?i:"",e=o[h]||o[n.verb],e&&e(n.type,r)))},u;return u={lock:function(t,r,o,h,c){var v=!1,a=r?Array.isArray(r)?r:[r]:[],l;f[t]||(v=!0,f[t]={data:[],setCallback:o||i.NOOP,removeCallback:h||i.NOOP});l=f[t];(v||!a.every(s(l.data))||a.length!==l.data.length)&&(l.data.length||(n.attachEvent(t+".Set",c||u,e),n.attachEvent(t+".Remove",c||u,e)),a&&(l.data=l.data.concat(a)),l.setCallback=o||l.setCallback||i.NOOP,l.removeCallback=h||l.removeCallback||i.NOOP)},unlock:function(t,i,r,o){var s=f[t],h=s?s.data.slice():[],l=r||[],a=function(){n.detachEvent(t+".Set",o||u,e);n.detachEvent(t+".Remove",o||u,e);s.data.length=0;s.setCallback=null;s.removeCallback=null;f[t]=undefined},c;s&&(l.length?(c=l.reduce(function(n,t){return n[t]=!0,n},{}),h=h.filter(function(n){return c[n]}),h.length?s.data=s.data.filter(function(n){return!c[n]}):h=null):a(),s.data.length||a(),i&&h&&n.fireEvent(t+"."+i,o||u,h))},change:function(t,i,r,e){var h=f[t],o=h?h.data.slice():[],s=r||[];s.length&&(o.length&&(s=s.filter(function(n){return o.indexOf(n)>-1})),o=s.length?s:null);i&&o&&n.fireEvent(t+"."+i,e||u,o)},fire:function(n,t,i){e({data:i?i.slice():[],type:n,verb:t})},carryLocker:function(n,t,i){var r;return r={lock:function(f,e,o){u.lock(n,f,e||t,o||i,r)},unlock:function(t,i){u.unlock(n,t,i,r)},change:function(t,i){u.change(n,t,i,r)},fire:function(t,i){u.fire(n,t,i)}}}}}Object.defineProperty(t,"__esModule",{value:!0});t.ResourcesLocker=void 0;var i=require("../utils");t.ResourcesLocker=r})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/resourcesLocker"),geotab.commonjs.generateExport("geotab/checkmate/resourcesLocker"));
(function(n,require,t){"use strict";function w(n){return c.indexOf(n)>=0}var i=this&&this.__spreadArray||function(n,t){for(var i=0,u=t.length,r=n.length;i<u;i++,r++)n[r]=t[i];return n},e,o,s,h,c,l,a;Object.defineProperty(t,"__esModule",{value:!0});t.filterHiddenClearance=t.isSystemSecurityGroup=t.isSystemGroup=t.getDefectDescription=t.getGroupDescriptionRecursiveFn=t.getGroupDescriptionRecursive=t.getGroupDescription=void 0;var v=require("../utils"),r=["GroupEverythingSecurityId","GroupSupervisorSecurityId","GroupUserSecurityId","GroupViewOnlySecurityId","GroupDriveUserSecurityId","GroupViewMapOnlySecurityId","GroupNothingSecurityId"],u=["GroupSecurityId"],y=i(i(i(i(i([],["GroupCompanyId","GroupDriverActivityGroupId","GroupBusinessGroupId","GroupPersonalGroupId","GroupAssetInformationId","GroupAssetTypeId","GroupVehicleId","GroupTrailerId","GroupPowertrainAndFuelTypeId","GroupInternalCombustionEngineId","GroupGasolinePetrolId","GroupDieselId","GroupEthanolId","GroupBiodieselId","GroupCompressedNaturalGasId","GroupLiquifiedNaturalGasId","GroupPropaneLiquifiedPetroleumGasId","GroupElectricHybridPluginId","GroupBatteryElectricVehicleId","GroupPluginHybridElectricVehicleId","GroupManuallyClassifiedPowertrainId","GroupFuelCellElectricVehicleId"]),u),["GroupRootId"]),r),["GroupDefectsId"]),f=v.makeBoolHash(y),p=function(n,t){return f.hasOwnProperty(n.id)?t(n.id):n.name||""};t.getGroupDescription=p;e=function(n,i){for(var u=n.name,r=n.realParent||n.parent;r&&r.id!=="-1";)u=t.getGroupDescription(r,i)+"/"+u,r=r.parent;return u};t.getGroupDescriptionRecursive=e;o=function(n){return function(i){return t.getGroupDescriptionRecursive(i,n)}};t.getGroupDescriptionRecursiveFn=o;s=function(n,i){switch(n.name){case"** Default Vehicle Defects **":case"Default Vehicle Defects List":return i("GroupVehicleDefectsId");case"** Default Trailer Defects **":case"Default Trailer Defects List":return i("GroupTrailerDefectsId");default:return t.getGroupDescription(n,i)}};t.getDefectDescription=s;h=function(n){return!!(n&&f[n])};t.isSystemGroup=h;c=i(i([],u),r);t.isSystemSecurityGroup=w;l=["GroupViewMapOnlySecurityId"];a=function(n){return l.indexOf(n.id)<0};t.filterHiddenClearance=a})(geotab,geotab.commonjs.generateRequire("geotab/utils/groupUtils"),geotab.commonjs.generateExport("geotab/utils/groupUtils"));
(function(n,require,t){"use strict";var u=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});t.CurrentUserWatcher=void 0;var i=require("../utils"),f=require("../utils/groupUtils"),e=require("../checkmate/eventHandler"),r=function(n){return n?{id:n.id,securityGroups:n.securityGroups||[],companyGroups:n.companyGroups||[],featurePreview:n.featurePreview||""}:undefined},o=function(n){function t(t,u,f,e,o){var s=n.call(this)||this;return s.connection=t,s.store=u,s.localizer=f,s.notificationCenter=e,s.errorHandler=o,s.subscriber={},s.userChangedHandler=function(n){if(s.userToTrack!==undefined){var u=n.data||[],t=s.userToTrack;u.some(function(n){return(n.id||n)===t.id})&&s.connection.call("Get",{typeName:"User",search:{id:t.id}}).beginInvoke(function(n){var f=n[0],u=r(f);if(s.userToTrack=u,u===undefined||u.companyGroups.length===0){s.fire("currentUserCompanyGroupsUpdate",u);return}s.localizer.setCultureInfo(s.connection,function(n){return s.store.call("Translate",n,!1)},f,!0,i.NOOP,s.errorHandler);i.compareGroups(u.securityGroups,t.securityGroups)||s.fire("currentUserSecurityGroupsUpdate",t);i.compareGroups(u.companyGroups,t.companyGroups)||s.fire("currentUserCompanyGroupsUpdate",t);u.featurePreview!==t.featurePreview&&s.fire("currentUserFeaturePreviewUpdate",t);s.fire("currentUserUpdate",f)},s.errorHandler)}},s.groupsChangedHandler=function(n){if(s.userToTrack!==undefined){var t=s.userToTrack,i=n.data||[],r=t.securityGroups[0]||{};i.some(function(n){return(n.id||n)===r.id})&&s.fire("currentUserSecurityGroupsUpdate",s.userToTrack)}},s}return u(t,n),t.prototype.start=function(n){return(this.stop(),this.userToTrack=r(n),this.userToTrack===undefined||!this.userToTrack.id)?this:(this.notificationCenter.attachEvent("User.Set",this.subscriber,this.userChangedHandler),this.userToTrack.securityGroups.length&&!f.isSystemGroup(this.userToTrack.securityGroups[0].id)&&this.notificationCenter.attachEvent("Group.Set",this.subscriber,this.groupsChangedHandler),this)},t.prototype.stop=function(){this.notificationCenter.detachEvent("User.Set",this.subscriber,this.userChangedHandler);this.notificationCenter.detachEvent("Group.Set",this.subscriber,this.groupsChangedHandler)},t}(e.SimpleEventHandler);t.CurrentUserWatcher=o})(geotab,geotab.commonjs.generateRequire("geotab/services/currentUserWatcher"),geotab.commonjs.generateExport("geotab/services/currentUserWatcher"));
typeof rison=="undefined"&&(window.rison={});rison.uri_ok={"~":!0,"!":!0,"*":!0,"(":!0,")":!0,"-":!0,_:!0,".":!0,",":!0,":":!0,"@":!0,$:!0,"'":!0,"/":!0},function(){for(var n,r,i=[],t=0;t<16;t++)for(n=0;n<16;n++)t+n!==0&&(r=String.fromCharCode(t*16+n),/\w|[-_.\/~]/.test(r)||i.push("\\u00"+t.toString(16)+n.toString(16)));rison.not_idchar=i.join("")}();rison.not_idchar=" '!:(),*@$";rison.not_idstart="-0123456789",function(){var n="[^"+rison.not_idstart+rison.not_idchar+"][^"+rison.not_idchar+"]*";rison.id_ok=new RegExp("^"+n+"$");rison.next_id=new RegExp(n,"g")}();rison.quote=function(n){return/^[-A-Za-z0-9~!*()_.',:@$\/]*$/.test(n)?n:encodeURIComponent(n).replace(/%2C/g,",").replace(/%3A/g,":").replace(/%40/g,"@").replace(/%24/g,"$").replace(/%2F/g,"/").replace(/%20/g,"+")},function(){var i={"'":!0,"!":!0},t=function(t){t&&typeof t.toJSON=="function"&&(t=t.toJSON());var i=n[typeof t];if(i)return i(t)},n={array:function(n){for(var i=["!("],f,e=n.length,u,r=0;r<e;r+=1)u=t(n[r]),typeof u=="string"&&(f&&(i[i.length]=","),i[i.length]=u,f=!0);return i[i.length]=")",i.join("")},boolean:function(n){return n?"!t":"!f"},"null":function(){return"!n"},number:function(n){return isFinite(n)?String(n).replace(/\+/,""):"!n"},object:function(i){if(i){if(i instanceof Array)return n.array(i);if(typeof i.__prototype__=="object"&&typeof i.__prototype__.encode_rison!="undefined")return i.encode_rison();var u=["("],s,r,o,h,e,f=[];for(r in i)f[f.length]=r;for(f.sort(),e=0;e<f.length;e++)r=f[e],o=t(i[r]),typeof o=="string"&&(s&&(u[u.length]=","),h=isNaN(parseInt(r))?n.string(r):n.number(r),u.push(h,":",o),s=!0);return u[u.length]=")",u.join("")}return"!n"},string:function(n){return n===""?"''":rison.id_ok.test(n)?n:(n=n.replace(/(['!])/g,function(n,t){return i[t]?"!"+t:t}),"'"+n+"'")},undefined:function(){return}};rison.encode=function(n){return t(n)};rison.encode_object=function(t){if(typeof t!="object"||t===null||t instanceof Array)throw new Error("rison.encode_object expects an object argument");var i=n[typeof t](t);return i.substring(1,i.length-1)};rison.encode_array=function(t){if(!(t instanceof Array))throw new Error("rison.encode_array expects an array argument");var i=n[typeof t](t);return i.substring(2,i.length-1)};rison.encode_uri=function(t){return rison.quote(n[typeof t](t))}}();rison.decode=function(n){var t=function(n){throw Error("rison decoder error: "+n);},i=new rison.parser(t);return i.parse(n)};rison.decode_object=function(n){return rison.decode("("+n+")")};rison.decode_array=function(n){return rison.decode("!("+n+")")};rison.parser=function(n){this.errorHandler=n};rison.parser.WHITESPACE="";rison.parser.prototype.setOptions=function(n){n.errorHandler&&(this.errorHandler=n.errorHandler)};rison.parser.prototype.parse=function(n){this.string=n;this.index=0;this.message=null;var t=this.readValue();return!this.message&&this.next()&&(t=this.error("unable to parse string as rison: '"+rison.encode(n)+"'")),this.message&&this.errorHandler&&this.errorHandler(this.message,this.index),t};rison.parser.prototype.error=function(n){return typeof console!="undefined"&&console.log("rison parser error: ",n),this.message=n,undefined};rison.parser.prototype.readValue=function(){var n=this.next(),u=n&&this.table[n],f,t,i,r;return u?u.apply(this):(f=this.string,t=this.index-1,rison.next_id.lastIndex=t,i=rison.next_id.exec(f),i.length>0)?(r=i[0],this.index=t+r.length,r):n?this.error("invalid character: '"+n+"'"):this.error("empty expression")};rison.parser.parse_array=function(n){for(var i=[],t,r;(t=n.next())!==")";){if(!t)return n.error("unmatched '!('");if(i.length)t!==","&&n.error("missing ','");else{if(t===",")return n.error("extra ','");--n.index}if(r=n.readValue(),typeof r=="undefined")return undefined;i.push(r)}return i};rison.parser.bangs={t:!0,f:!1,n:null,"(":rison.parser.parse_array};rison.parser.prototype.table={"!":function(){var i=this.string,t=i.charAt(this.index++),n;return t?(n=rison.parser.bangs[t],typeof n=="function")?n.call(null,this):typeof n=="undefined"?this.error('unknown literal: "!'+t+'"'):n:this.error('"!" at end of input')},"(":function(){for(var r={},n,u=0,t,i;(n=this.next())!==")";){if(u)n!==","&&this.error("missing ','");else{if(n===",")return this.error("extra ','");--this.index}if(t=this.readValue(),typeof t=="undefined")return undefined;if(this.next()!==":")return this.error("missing ':'");if(i=this.readValue(),typeof i=="undefined")return undefined;r[t]=i;u++}return r},"'":function(){for(var u=this.string,n=this.index,r=n,i=[],t;(t=u.charAt(n++))!=="'";){if(!t)return this.error('unmatched "\'"');if(t==="!"){if(r<n-1&&i.push(u.slice(r,n-1)),t=u.charAt(n++),"!'".indexOf(t)>=0)i.push(t);else return this.error('invalid string escape: "!'+t+'"');r=n}}return r<n-1&&i.push(u.slice(r,n-1)),this.index=n,i.length===1?i[0]:i.join("")},"-":function(){var t=this.string,i=this.index,f=i-1,r="int",u="-",e={"int+.":"frac","int+e":"exp","frac+e":"exp"},n;do{if(n=t.charAt(i++),!n)break;if(!("0"<=n)||!(n<="9")){if(u.indexOf(n)>=0){u="";continue}r=e[r+"+"+n.toLowerCase()];r==="exp"&&(u="-")}}while(r);return(this.index=--i,t=t.slice(f,i),t==="-")?this.error("invalid number"):Number(t)}},function(n){for(var t=0;t<=9;t++)n[String(t)]=n["-"]}(rison.parser.prototype.table);rison.parser.prototype.next=function(){var n,i=this.string,t=this.index;do{if(t===i.length)return undefined;n=i.charAt(t++)}while(rison.parser.WHITESPACE.indexOf(n)>=0);return this.index=t,n};
(function(n,require,t){"use strict";function o(n){var r="",u,h,e,t,c,o,s;return n.groups.page&&(r=n.groups.page),u=n.groups.groups,h=u?Object.keys(u).filter(function(n){return u[n]!==undefined}):[],h.length>0&&(e=rison.encode(u),r+=(r!==""?",":"")+e.substr(1,e.length-2)),n.settings&&(t=n.settings,t.filter&&(c=f(t.filter),t=i(i({},n.settings),{filter:c})),o=Object.keys(t).filter(function(n){return t[n]!==undefined}),o.length>0&&(s=rison.encode(o.length!==2?t:{settings:t}),r+=(r!==""?",":"")+s.substr(1,s.length-2))),r}function s(n){var t={groups:{page:""},settings:{}},i=function(n){var o=n.indexOf(","),f=o>=0?n.substr(0,o):n,i=n,u,s,h;return f.indexOf(":")===-1&&(t.groups.page=f,i=n.substring(f.length+1,n.length)),i=i[i.length-1]===","?i.substring(0,i.length-1):i,u=rison.decode("("+i+")"),s=u.settings||{},r.forEach(function(n){t.settings[n]=u[n]||s[n];u[n]=undefined}),u.settings=undefined,t.groups.groups=u.groups?u.groups:u,t.settings.filter&&(h=e(t.settings.filter),t.settings.filter=h),t};try{return i(decodeURIComponent(n))}catch(u){throw new Error("Invalid URL");}}var i=this&&this.__assign||function(){return i=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i.apply(this,arguments)},r;Object.defineProperty(t,"__esModule",{value:!0});t.decode=t.encode=void 0;require("../../../js/rison");var u=require("./modules/advancedGeotabEntitiesNavigator/advancedEntitiesNavigatorUtilites"),f=function(n){var i=function(n){return!!n.relation},t=function(n){var u,f=Array.isArray(n)?n:n.items,r=Array.isArray(n)?"Or":n.relation;return f.reduce(function(n,u){var e=r==="And"?n[r]:n,o,f;return i(u)?(o=u.items,o.length===1?(f=o[0],e.push(i(f)?t(f):f)):e.push(t(u))):e.push(u),n},r==="And"?(u={},u[r]=[],u):[])},r=Array.isArray(n)?n[0]:n.items[0];return r==="GroupCompanyId"?undefined:t(n)},e=function(n){var f=function(n){return Array.isArray(n)?"Or":"And"},i=function(n,t){return{relation:t,items:n}},r=function(n){var t=f(n),u=Array.isArray(n)?n:n[t],e=u.some(function(n){return typeof n!="string"}),o=u.map(function(n){return typeof n=="string"?e?i([n],t):n:r(n)});return i(o,t)},t=r(n);return u.isFilterStateLeafItem(t)&&t.relation==="Or"?t.items:t};t.encode=o;r=["filter","token"];t.decode=s})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/urlCoder"),geotab.commonjs.generateExport("geotab/checkmate/ui/urlCoder"));
(function(n,require,t){"use strict";function l(n){i.push(n);r||(r=!0,window.addEventListener("hashchange",s,!0))}function a(){window.removeEventListener("hashchange",s,!0);r=!1}function v(n,t){(n||window.location.hash)&&(t?window.location.hash="#"+n.replace(f,""):window.location.replace("#"+n.replace(f,"")));o(!0)}function h(){return window.location.hash.replace(f,"")}Object.defineProperty(t,"__esModule",{value:!0});t.history=t.get=t.set=t.destroy=t.change=void 0;var c=require("../utils"),e=window.location.hash,i=[],r=!1,u=function(){var t=[];return{add:function(i){t.push({url:c.clearUrlFromPrivateInfo(i),offset:(new Date).getTime()-n.startTime.getTime()})},all:t}}(),o=function(n){var t;if(e!==window.location.hash)for(e=window.location.hash,u.add(window.location.hash),t=0;t<i.length;t++)i[t](!n)},s=function(){o(!1)},f=/#/;t.change=l;t.destroy=a;t.set=v;t.get=h;t.history=u.all;u.add("#"+h())})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/address"),geotab.commonjs.generateExport("geotab/checkmate/address"));
(function(n,require,t){"use strict";function s(){var c=function(){var t,i={},r=n||{};for(t in r)i[t]={};return i},a=function(n){var t,i=c();if(!n)return!1;for(t in i)if(!(t in n))return!1;return!0},v=function(){return r.decode(u.get())||{}},n=null,t={},e=function(n){var t=r.encode(n);return t?"#"+t:""},s=function(n,t){var i=typeof n=="string"?n:e(n);u.set(i,t)},y=function(t){var r=function(r){var u={};return u[t]=r||{},i.extend({},n,u)};return{getHash:function(n){return e(r(n))},setHash:function(t,i){n=r(t);s(n,i)}}},p=function(i){var r=n||{};return t[i]||(r[i]=r[i]||{},t[i]=o(i,r[i],y(i))),t[i]},w=function(n){var t=n;return a(t)||(t=c(),s(t,!1)),t},l="",b=function(){window.location.hash=l},h=function(){var n;try{n=w(v());l=window.location.hash.slice(1)}catch(t){b();n||(n=h())}return n};return n=h(),u.change(function(i){n=h();var r=n||{};Object.keys(r).forEach(function(n){var u=t[n],o,e;u&&(o=u.get(),e=r[n],f(o,e)||u.set(e,!1,i))})}),{getState:p,getHash:function(n){return n?e(n):u.get()},setHash:function(n,t){s(n,t)},encodeUrl:r.encode,decodeUrl:r.decode}}Object.defineProperty(t,"__esModule",{value:!0});var i=require("../../vanillaExtension/vanilla"),e=require("../eventHandler"),r=require("./urlCoder"),u=require("../address"),f=function(n,t){return!n||!t?!1:JSON.stringify(n)===JSON.stringify(t)},o=function(n,t,r){var u=t,o;return o=i.extend({get:function(){return i.extend({},u)},set:function(n,t,e){var s,h=n||{};f(u,h)||(s=i.extend({},u),u=h,e||r.setHash(u,t),o.fireEvent("change",this,[u,s,!!e]))},add:function(n,t,r){var f={},e;typeof n=="string"?f[n]=t:f=n;e=i.extend({},u,f);o.set(e,r)},remove:function(n,t){var r=i.extend({},u);delete r[n];o.set(r,t)},getHash:function(n){return r.getHash(i.extend(!0,{},n||{}))},getName:function(){return n}},e.default())};t.default=s})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/urlState"),geotab.commonjs.generateExport("geotab/checkmate/ui/urlState"));
(function(n,require,t){"use strict";function u(n){return n&&!Array.isArray(n)?[n]:n||[]}function f(n){return n[0]||null}function i(n){if(n){if(Array.isArray(n))return n.forEach(i),Object.freeze(n);if(typeof n=="object")return e.forEach(function(t){n[t]&&typeof n[t]=="object"&&i(n[t])}),Object.freeze(n)}return n}function r(n){return n&&(Array.isArray(n)?n.forEach(r):typeof n=="object"&&(Object.keys(n).forEach(function(t){r(n[t])}),Object.freeze(n))),n}Object.defineProperty(t,"__esModule",{value:!0});t.deepFreeze=t.freeze=t.toResultObject=t.toResultArray=void 0;t.toResultArray=u;t.toResultObject=f;var e=["children","details"];t.freeze=i;t.deepFreeze=r})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/entitiesLoaderModules/utils"),geotab.commonjs.generateExport("geotab/checkmate/entitiesLoaderModules/utils"));
(function(n,require,t){"use strict";function i(n,t,i){var r={},f=i||function(n){switch(n){case null:return"null";case undefined:return"undefined";default:return n.toString()}},u=0,o=function(){u===0&&h()},s=function(){var n=Date.now(),t=Object.keys(r).reduce(function(t,i){return r[i].timestamp<=n?(delete r[i],t):t+1},0);e();t>0&&o()},h=function(){e();u=setTimeout(s,n)},e=function(){u!==0&&(clearTimeout(u),u=0)},c=function(t,i){var u=f(t);r[u]={timestamp:Date.now()+n,key:u,value:i};o()},l=function(n){var u=f(n),i=r[u];return i?(t&&(i.timestamp=Infinity),i.value):null},a=function(n){var i=f(n),u=r[i]!==undefined,t;if(u&&delete r[n],t=Object.keys(r).length,t>0){o();return}e()},v=function(){r={};e()};return{getItem:l,setItem:c,deleteItem:a,hasItem:function(n){return f(n)in r},keys:function(){return Object.keys(r)},clear:v}}Object.defineProperty(t,"__esModule",{value:!0});t.default=i})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/models/cache"),geotab.commonjs.generateExport("geotab/checkmate/ui/models/cache"));
(function(n,require,t){"use strict";function u(n,t){var u=function(n,t,i,r){return(n||0).toString()+"_"+(t||0).toString()+"_"+i.toString()+"_"+r.toString()},f=+t.milliseconds,e=function(n){var t={},u="GetAddresses",f=function(n,i){var r=(n||!1)+"_"+(i||!1);return t.hasOwnProperty(r)||(t[r]={requests:[],isMoving:n,isHosAddress:i}),t[r]},i=0,e=function(){i||(i=setTimeout(function(){Object.keys(t).forEach(function(i){var r=t[i];n(u,{coordinates:r.requests.map(function(n){return n.coord}),movingAddresses:r.isMoving,hosAddresses:r.isHosAddress}).then(function(n){n.forEach(function(n,t){r.requests[t].def.resolve(n)})},function(n){r.requests.forEach(function(t){t.def.reject(n)})})});t={};i=0},1))};return{getAddress:function(n,t,i,u){var s=f(i,u),o=r.Deferred();return s.requests.push({def:o,coord:{x:t,y:n}}),e(),o.promise()}}};return{name:n,init:function(n,r){var o=i.default(f||1,!!t.updateTTLOnAccess),s=o.getItem,h=function(n,t){o.setItem(n,t.then(Object.freeze))},c=o.deleteItem,l=e(r);return{getItemByCoordinates:function(n,t,i,r){r===void 0&&(r=!1);var a=function(n){return function(t){for(var i=0,r=0;r<n.length;r++)if(i=t[n[r]],typeof i!="undefined")return i;return i}},e=typeof n=="object",v=e?a(["latitude","lat","y"])(n):n,y=e?a(["longitude","lng","x"])(n):t,p=!!(e?t:i),o=u(v,y,p,r),f=s(o);return f||(f=l.getAddress(v,y,p,r),h(o,f),f.catch(function(){c(o)})),f},clearCache:function(){o.clear()}}}}}function f(n,t,i){if(!n){i.hide();return}t.call("AutoCompleteAddress",{address:n}).then(function(n){var t=(Array.isArray(n)?n:[]).map(function(n){return{value:n,name:n,label:n}});i.setItems(t);i.show()})}Object.defineProperty(t,"__esModule",{value:!0});t.AddressAutoCompleteWithVanilla=void 0;var i=require("../ui/models/cache"),r=require("../deferred");t.default=u;t.AddressAutoCompleteWithVanilla=f})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/entitiesLoaderModules/addressModule"),geotab.commonjs.generateExport("geotab/checkmate/entitiesLoaderModules/addressModule"));
(function(n,require,t){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i.apply(this,arguments)},r;Object.defineProperty(t,"__esModule",{value:!0});t.entityCRUDProvider=void 0;r=function(n,t){var r=function(i){return function(r){return t(i,{typeName:n,entity:r})}};return{getItem:function(r,u){var f=i(i({typeName:n},r?{search:r}:{}),u||{});return t("Get",f)},setItem:r("Set"),removeItem:r("Remove"),addItem:r("Add"),countItem:function(i){var r={typeName:n,search:i};return t("GetCountOf",r)}}};t.entityCRUDProvider=r})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/entitiesLoaderModules/entityCRUDProvider"),geotab.commonjs.generateExport("geotab/checkmate/entitiesLoaderModules/entityCRUDProvider"));
(function(n,require,t){"use strict";function h(n,t,s,h){var l=+s.milliseconds,a=typeof s.unwrapCollections=="undefined"?!0:!!s.unwrapCollections,c="list_";return{name:n,init:function(n,v){var w=(h||o.entityCRUDProvider)(t,v),b=[],y=[],tt=function(n){return y.indexOf(n.id)===-1},g=function(n){return!!n&&n.id!==undefined},p=e.default(l||1,!!s.updateTTLOnAccess),it=p.getItem,k=p.deleteItem,rt=function(n,t){var r=function(n){return n.id||n};return b.indexOf(n)<0&&(b.push(n),t.then(function(t){t.length<f&&t.filter(g).forEach(function(n){p.setItem(r(n),i.resolve(Object.freeze(n)))});b=b.filter(function(t){return t!==n})})),t},ut=function(){return p.keys().filter(function(n){return n.indexOf(c)===0})},d=function(){ut().forEach(k)},ft=function(n){if(!n)throw new Error((t||"Item")+" id cannot be empty");return y.indexOf(n)!==-1?i.resolve(null):nt(n,{id:n},r.toResultObject)},et=function(n,t){return d(),k(n),w.setItem(t)},nt=function(n,t,r,u){var f=it(n),e;return f?f:(e=w.getItem(t,u).then(function(n){return f=r(n),g(f)?Object.freeze(f):f},function(t){return p.deleteItem(n),i.reject(t)}),p.setItem(n,e),e)};return{getItemById:function(n){return ft(n)},getItemsByValue:function(n,t){var i=c+JSON.stringify(n)+JSON.stringify(t),u=nt(i,n,r.toResultArray,t);return a?rt(i,u).then(function(n){return y.length>0?n.filter(tt):n.slice()}):u},clearCache:p.clear,setItem:function(n){return y.indexOf(n.id)!==-1?i.reject(new u.NotSevereError("Cannot update item scheduled for removal")):et(n.id,n)},removeItem:function(n){var r=n.id,f;return y.indexOf(r)!==-1?i.reject(new u.NotSevereError((t||"Item")+" with id "+r+" is already scheduled for removal")):(y.push(r),k(r),d(),f=w.removeItem(n),f.always(function(){y=y.filter(function(n){return n!==r})}),f)},addItem:function(n){return d(),w.addItem(n)},countOf:w.countItem,typeName:t||"Unknown"}}}}var f;Object.defineProperty(t,"__esModule",{value:!0});t.SortDirection=void 0;var e=require("../ui/models/cache"),i=require("../deferred"),r=require("./utils"),u=require("../exceptions/commonExceptions"),o=require("./entityCRUDProvider"),s;(function(n){n.ASC="Asc";n.DESC="Desc"})(s=t.SortDirection||(t.SortDirection={}));f=3e4;t.default=h})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/entitiesLoaderModules/entityModule"),geotab.commonjs.generateExport("geotab/checkmate/entitiesLoaderModules/entityModule"));
(function(n,require,t){"use strict";function f(n,t,f){var e=function(n){return function(){throw new r.NotSupported(n);}};return{name:n,init:function(r,o){var s=function(n,r){var u=function(n,t){return function(){for(var e,u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];return(e=u[0],u.length===1&&i.isPromiseLike(e))?e:n.apply(t,[{call:function(n,t){return r(n,t).promise()}}].concat(u))}};return["getItem","setItem","addItem","removeItem","countItem"].reduce(function(n,i){return n[i]=i in t?u(t[i],t):e(i),n},{})},h=f.preventRequestJoining!==!0?o:function(n,t){r.sendRequests();var i=o(n,t);return r.sendRequests(),i};return u.default(n,f.typeName||"NONAME",f,s).init(r,h)}}}Object.defineProperty(t,"__esModule",{value:!0});var i=require("../deferred"),r=require("../exceptions/commonExceptions"),u=require("./entityModule");t.default=f})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/entitiesLoaderModules/methodModule"),geotab.commonjs.generateExport("geotab/checkmate/entitiesLoaderModules/methodModule"));
(function(n,require,t){"use strict";function r(n){return n.state&&n.state==="Inactive"?!0:!1}function u(n,t){return i.default(n,{getItem:function(n,t){return t.includeModifications=!0,n.call("Get",{typeName:"DutyStatusLog",search:t}).then(function(n){var c=[],o={},s,l,u,f,h,a,t;if(n){for(s=0,l=n;s<l.length;s++)t=l[s],u=t.parentId||t.id,o.hasOwnProperty(u)?o[u].push(t):o[u]=[t];for(u in o){if(f=o[u],f.length===1){f[0].state==="Rejected"||r(f[0])||c.push(f[0]);continue}f.sort(function(n,t){return parseInt(t.version,16)-parseInt(n.version,16)});var i=void 0,e=void 0,v=[];for(h=0,a=f;h<a.length;h++)t=a[h],t.state==="Requested"?e=t:t.state!=="Active"||i?v.push(t):i=t;(i||e)&&(i||(i=i||e,e=null),i.id=u,i.modifications=v,c.push(i));e&&i.modifications.push(e)}}return c})},setItem:function(n,t){return delete t.modifications,t.resolvedEditId&&(t.id=t.resolvedEditId,delete t.resolvedEditId),n.call("Set",{typeName:"DutyStatusLog",entity:t})},addItem:function(n,t){return n.call("Add",{typeName:"DutyStatusLog",entity:t})},removeItem:function(n,t){return n.call("Remove",{typeName:"DutyStatusLog",entity:t})}},t)}Object.defineProperty(t,"__esModule",{value:!0});var i=require("./methodModule");t.default=u})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/entitiesLoaderModules/dutyStatusLogsWithModificationsModule"),geotab.commonjs.generateExport("geotab/checkmate/entitiesLoaderModules/dutyStatusLogsWithModificationsModule"));
(function(n,require,t){"use strict";function f(n,t,f){return{name:n,init:function(e,o){var s=u.default(n,t,f).init(e,o);return r.extend(s,{warmUp:function(){s.getItemsByValue(null,undefined)},isEntireOrganization:function(n){return!!(n&&(n.id||n)===i)},getRelationshipSummary:function(){return s.getItemsByValue(null,undefined).then(function(n){var u=n.reduce(function(n,t){return t.children.forEach(function(i){n[i.id]=t.id||t}),n},{}),r=function(n,t){var i=u[n];return!!i&&(i===t||r(i,t))},t;return t={isParentOf:function(n,i){return t.isChildOf(i,n)},isChildOf:function(n,t){return n===i||!n?!1:t===i||r(n,t)},isRelativeOf:function(n,i){return n===i||t.isParentOf(n,i)||t.isChildOf(n,i)}}})}})}}}Object.defineProperty(t,"__esModule",{value:!0});var r=require("../../vanillaExtension/vanilla"),u=require("./entityModule"),i="GroupCompanyId";t.default=f})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/entitiesLoaderModules/groupsModule"),geotab.commonjs.generateExport("geotab/checkmate/entitiesLoaderModules/groupsModule"));
(function(n,require,t){"use strict";function o(n){var o=function(n,t){var i=t&&t.length?t.map(function(n){return n.name}):[];return r(r({},n),{tripAddress:i.join(", ")||n.formattedAddress||n.street,isZone:!!i.length,zones:t||[]})},t,s=function(){var r,u=i.promisify(null),n=null;return function(i){return n?n:(clearTimeout(r),r=setTimeout(function(){n=null},1),n=t?i.groups.getRelationshipSummary():u)}}(),c=function(n,t,i){var r=function(n,t){return i.isRelativeOf(n,t)};return n.some(function(n){return u.isFilterState(t)?u.doesItemMatchFilterState(t,function(t){return r(n.id,t)}):t.some(function(t){return r(n.id,t.id)})})},h=function(n,t,i){return t&&i?c(n.groups,t,i):!0};return{name:n,init:function(n){var r=function(t){return n.zones.getItemById(t.id)};if(!("addresses"in n))throw new Error("No addresses module found in entitiesLoader. Initializing addresses first");if(!("exceptionEvents"in n))throw new Error("No exceptionEvents module has been found in entitiesLoader.");return{getItemByCoordinates:function(u,f,c){return n.addresses.getItemByCoordinates(u,f,c).then(function(u){return u.zones&&u.zones.length?i.together([i.promisify(t),s(n),i.together(u.zones.map(r))]).then(function(n){var i=n[0],r=n[1],f=n[2],s=(new Date).toISOString(),t=f;return t=t.filter(function(n){return n&&n.displayed&&n.activeTo>s&&n.mustIdentifyStops}),t=t.filter(function(n){return n&&h(n,i,r)}),o(u,t.slice(0,e))}):o(u,u.zones)})},getItemByTrip:function(r){var e=function(n){var t=new Date(n.stop).getTime(),i=t-1e3,r=new Date(i).toISOString(),u=function(n,t){return n>t?n:t};return u(r,n.start)},c=function(t){return n.exceptionEvents.getItemsByValue({fromDate:e(t),toDate:t.nextTripStart,deviceSearch:{id:t.device.id}})},l=function(t){return t.stopPoint?n.addresses.getItemByCoordinates(t.stopPoint,!1):i.promisify({formattedAddress:""})},a=function(r){var u=i.promisify(t),f=s(n),e=function(n){return i.together([i.promisify(n),u,f]).then(function(n){var t=n[0],i=n[1],r=n[2];return t.filter(function(n){return n&&h(n,i,r)})})};return c(r).then(v).then(y).then(p).then(w).then(b).then(e)},v=function(n){return Object.keys(n.reduce(function(n,t){return n[t.rule.id]=!0,n},{}))},y=function(t){return i.together(t.map(n.rules.getItemById))},p=function(n){return n.filter(k)},w=function(n){return Object.keys(n.reduce(function(n,t){return n[t.condition.zone.id]=!0,n},{}))},b=function(t){return i.together(t.map(n.zones.getItemById))},k=function(n){return n.condition.conditionType==="ZoneStop"},u,f;return u=l(r),f=a(r),i.together([u,f]).then(function(n){var t=n[0],i=n[1];return o(t,i)})},setFilter:function(n){t=n&&f.isEntireOrganization(n)?null:n}}}}}var r=this&&this.__assign||function(){return r=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=require("../deferred"),u=require("../ui/modules/advancedGeotabEntitiesNavigator/advancedEntitiesNavigatorUtilites"),f=require("../../utils"),e=6;t.default=o})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/entitiesLoaderModules/tripAddressModule"),geotab.commonjs.generateExport("geotab/checkmate/entitiesLoaderModules/tripAddressModule"));
(function(n,require,t){"use strict";function f(n,t){var i=r(t,u);return n.filter(function(n){return i.belongsToValidPeriod(n.dateTime)})}function e(n,t){var f=r(t,u);return n.reduce(function(n,t,r){if(f.belongsToValidPeriod(t.dateTime))n.push(t);else{var u=n[r-1],e=void 0;e=u?{latitude:u.latitude,longitude:u.longitude}:{latitude:0,longitude:0};n.push(i(i({},t),e))}return n},[])}var i=this&&this.__assign||function(){return i=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i.apply(this,arguments)},r,u;Object.defineProperty(t,"__esModule",{value:!0});t.fixInvalidLogs=t.removeInvalidLogs=void 0;r=function(n,t){var i=n.slice().sort(function(n,t){return n.dateTime===t.dateTime?0:n.dateTime>t.dateTime?1:-1}),r=function(n){for(var t=i.length-1;t>-1;t--)if(i[t].dateTime<=n)return t;return-1};return{belongsToValidPeriod:function(n){var u=r(n),f=u===-1?i.length-1:u+1;return u!==-1?t(i[u]):f!==-1?!t(i[f]):!0}}};u=function(n){return n.data};t.removeInvalidLogs=f;t.fixInvalidLogs=e})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/tripsProcessing/logRecordsProcessor"),geotab.commonjs.generateExport("geotab/checkmate/tripsProcessing/logRecordsProcessor"));
(function(n,require,t){"use strict";function f(n){var f=function(n){if(!("logRecords"in n))throw new Error("validLogRecordsModule depends on logRecords module which was not initialized");if(!("statusData"in n))throw new Error("validLogRecordsModule depends on statusData module which was not initialized");},e=function(n){return r.extend({},n,{diagnosticSearch:{id:"DiagnosticPositionValidId"}})},t=function(n,t,i){return u.together([n.logRecords.getItemsByValue(t,i),n.statusData.getItemsByValue(e(t),i)])};return{name:n,init:function(n){return f(n),{getItemsByValue:function(r,u){return t(n,r,u).then(function(n){var t=n[0],r=n[1];return i.removeInvalidLogs(t,r)})},getFixedItemsByValue:function(r,u){return t(n,r,u).then(function(n){var t=n[0],r=n[1];return i.fixInvalidLogs(t,r)})}}}}}Object.defineProperty(t,"__esModule",{value:!0});var r=require("../../vanillaExtension/vanilla"),u=require("../deferred"),i=require("../tripsProcessing/logRecordsProcessor");t.default=f})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/entitiesLoaderModules/validLogRecordsModule"),geotab.commonjs.generateExport("geotab/checkmate/entitiesLoaderModules/validLogRecordsModule"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DEFAULT_MODULES=void 0;var s=require("./entitiesLoaderModules/addressModule"),h=require("./entitiesLoaderModules/dutyStatusLogsWithModificationsModule"),i=require("./entitiesLoaderModules/entityModule"),c=require("./entitiesLoaderModules/groupsModule"),o=require("./entitiesLoaderModules/methodModule"),l=require("./entitiesLoaderModules/tripAddressModule"),a=require("./entitiesLoaderModules/validLogRecordsModule"),u=0,f=2e4,r=7e4,e=12e4;t.DEFAULT_MODULES=[i.default("devices","Device",{milliseconds:f}),i.default("trailers","Trailer",{milliseconds:f}),i.default("rules","Rule",{milliseconds:r}),i.default("zones","Zone",{milliseconds:r}),i.default("supportTickets","SupportTicket",{milliseconds:r,unwrapCollections:!1}),i.default("trainingTickets","TrainingTicket",{milliseconds:r,unwrapCollections:!1}),i.default("routes","Route",{milliseconds:r,unwrapCollections:!1}),i.default("logRecordZoneDistance","LogRecordZoneDistance",{milliseconds:r}),i.default("eventRules","EventRule",{milliseconds:r}),i.default("certificates","Certificate",{milliseconds:r}),i.default("eventOccurrences","EventOccurrence",{milliseconds:r}),i.default("eventOccurrencesDue","EventOccurrenceDue",{milliseconds:r}),i.default("eventTypes","EventType",{milliseconds:r}),i.default("statusData","StatusData",{milliseconds:r}),i.default("tripTypeChange","TripTypeChange",{milliseconds:e,unwrapCollections:!1}),i.default("logRecords","LogRecord",{milliseconds:e,unwrapCollections:!1}),i.default("unitsOfMeasure","UnitOfMeasure",{milliseconds:r}),i.default("workTimes","WorkTime",{milliseconds:e}),i.default("exceptionEvents","ExceptionEvent",{milliseconds:r,unwrapCollections:!1}),i.default("exceptionEventsNoCache","ExceptionEvent",{milliseconds:u,unwrapCollections:!1}),i.default("faultData","FaultData",{milliseconds:r}),i.default("engineTypes","EngineType",{milliseconds:r}),i.default("failureModes","FailureMode",{milliseconds:r}),i.default("addins","AddIn",{milliseconds:r}),c.default("groups","Group",{milliseconds:f}),i.default("users","User",{milliseconds:f}),i.default("driverChanges","DriverChange",{milliseconds:u}),i.default("trips","Trip",{milliseconds:e,unwrapCollections:!1}),i.default("tripsNoCache","Trip",{milliseconds:u,unwrapCollections:!1}),i.default("deviceStatusInfo","DeviceStatusInfo",{milliseconds:u}),i.default("systemSettings","SystemSettings",{milliseconds:r}),i.default("workHolidays","WorkHoliday",{milliseconds:u}),i.default("hosAvailability","DutyStatusAvailability",{milliseconds:u}),i.default("driverRegulation","DriverRegulation",{milliseconds:u}),i.default("groupZoneMetadata","GroupZoneMetadata",{milliseconds:r}),o.default("setDeviceDenyList",{setItem:function(n,t){return n.call("SetDeviceBlackList",{devices:t.devices,drivers:t.drivers})}},{milliseconds:u}),o.default("timeZones",{getItem:function(n){return n.call("GetTimeZones")}},{milliseconds:12e5}),o.default("daylightSavingRules",{getItem:function(n,t){return n.call("GetDaylightSavingRules",{timeZoneId:t})}},{milliseconds:e}),i.default("zoneTypes","ZoneType",{milliseconds:r}),i.default("diagnostics","Diagnostic",{milliseconds:e,unwrapCollections:!1}),o.default("recentStatusDiagnostics",{getItem:function(n,t){return n.call("GetRecentStatusDiagnostics",t)}},{milliseconds:e}),i.default("controllers","Controller",{milliseconds:e}),i.default("auditLogs","Audit",{milliseconds:f}),o.default("speedLimitsForReport",{getItem:function(n,t){return n.call("GetRoadMaxSpeedsForDevice",t)}},{milliseconds:e,unwrapCollections:!1}),o.default("nearestRoads",{getItem:function(n,t){return n.call("GetNearestRoad",{coordinate:t}).then(function(n){return n?[n]:[]})}},{milliseconds:e,unwrapCollections:!1,preventRequestJoining:!0}),o.default("reportSchedules",{getItem:function(n,t){return n.call("GetReportSchedules",t)}},{milliseconds:e,typeName:"CustomReportSchedule"}),i.default("customReportSchedules","CustomReportSchedule",{milliseconds:u}),i.default("notificationBinaryFile","NotificationBinaryFile",{milliseconds:r}),i.default("distributionList","DistributionList",{milliseconds:r}),i.default("reportTemplates","ReportTemplate",{milliseconds:r}),i.default("fuelUpEvents","FuelUpEvent",{milliseconds:r}),i.default("fillUp","FillUp",{milliseconds:r}),i.default("fuelUsed","FuelUsed",{milliseconds:r}),i.default("chargeEvent","ChargeEvent",{milliseconds:r}),i.default("fuelTransaction","FuelTransaction",{milliseconds:r}),i.default("dvirLogs","DVIRLog",{milliseconds:r,unwrapCollections:!1}),i.default("dutyStatusLogs","DutyStatusLog",{milliseconds:r}),h.default("dutyStatusLogsWithModifications",{milliseconds:r}),i.default("dutyStatusViolation","DutyStatusViolation",{milliseconds:u}),i.default("annotationLogs","AnnotationLog",{milliseconds:r}),i.default("shipmentLogs","ShipmentLog",{milliseconds:r}),i.default("trailerAttachments","TrailerAttachment",{milliseconds:r}),i.default("recipients","Recipient",{milliseconds:r}),i.default("maintenanceNotificationRules","MaintenanceNotificationRule",{milliseconds:r}),s.default("addresses",{milliseconds:f,unwrapCollections:!1,updateTTLOnAccess:!0}),l.default("tripAddresses"),i.default("textMessages","TextMessage",{milliseconds:u}),i.default("textMessagesNoCache","TextMessage",{milliseconds:u,unwrapCollections:!1}),o.default("systemTime",{getItem:function(n){return n.call("GetSystemTimeUtc").then(function(n){return{id:"1",systemTime:n}})}},{milliseconds:u}),i.default("userHosRuleSets","UserHosRuleSet",{milliseconds:r}),i.default("userSupport","UserSupport",{milliseconds:r}),a.default("validLogRecords"),i.default("defects","Defect",{milliseconds:f}),i.default("wifiHotspots","WifiHotspot",{milliseconds:f}),i.default("userLoginStatus","UserLoginStatus",{milliseconds:u}),i.default("deviceInstallationRecords","InstallRecord",{milliseconds:u}),i.default("deviceShare","DeviceShare",{milliseconds:u}),i.default("shareableLinks","ShareableLink",{milliseconds:u}),i.default("displayUnitOfMeasure","DisplayUnitOfMeasure",{milliseconds:e}),i.default("displayMeasurementProfile","DisplayMeasurementProfile",{milliseconds:u}),i.default("displayMeasurementProfileDetail","DisplayMeasurementProfileDetail",{milliseconds:u}),i.default("userDisplayProfile","UserDisplayProfile",{milliseconds:u}),i.default("mediaFiles","MediaFile",{milliseconds:r}),o.default("advancedStatusData",{getItem:function(n,t){return n.call("GetAdvancedStatusData",t)}},{milliseconds:f}),o.default("advancedStatusDataWithSearch",{getItem:function(n,t){return n.call("GetAdvancedStatusDataWithSearch",t)}},{milliseconds:f}),i.default("ioxAddOn","IoxAddOn",{milliseconds:f}),i.default("exceptionEventComments","ExceptionEventComment",{milliseconds:f}),i.default("exceptionEventAttachments","ExceptionEventAttachment",{milliseconds:f}),i.default("energySnapshots","EnergySnapshotRecord",{milliseconds:r}),i.default("deviceReplacementInfo","DeviceReplacementInfo",{milliseconds:r}),i.default("fuelAndEnergySnapshotProcessing","FuelAndEnergySnapshotProcessing",{milliseconds:r})]})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/entitiesLoaderModules"),geotab.commonjs.generateExport("geotab/checkmate/entitiesLoaderModules"));
(function(n,require,t){"use strict";function f(n,t,f){t===void 0&&(t=r.DEFAULT_MODULES);f===void 0&&(f=undefined);var o,e,s=[],c=[],y=function(n,t,i,r){return function(){n.detachEvent(t,i,r)}},l=function(){e&&(clearTimeout(e),e=null)},a=function(n){o&&(o.beginInvoke(i.NOOP,i.NOOP,n,f),u.deepFreeze(o),o=null,l())},p=function(){e||(l(),e=setTimeout(function(){e=null;a()},0))},v=function(t,r,u){var s,e;return(p(),s=typeof u=="boolean"?u:!0,s)?(o=(o||n).call(t,r,u)).promise():(e=n.call(t,r,u),e.beginInvoke(i.NOOP,i.NOOP,undefined,f),e.promise())},h={getCredentials:function(){var t=n.token;return t?{database:t.database,sessionId:t.sessionId,userName:t.userName}:undefined},call:v,sendRequests:a,listenToDataMutationEvents:function(n){if(s.length!==0){var t=s[0];n.hasEvent(t.typeName+".Set",t.clearCache)||s.forEach(function(t){var i=t.typeName,r;i&&t.clearCache&&(r=i+".Set,"+i+".Remove,"+i+".Add",n.attachEvent(r,h,t.clearCache),c.push(y(n,r,h,t.clearCache)))})}},destroy:function(){c.forEach(function(n){n()});s.forEach(function(n){n.clearCache&&n.clearCache()});s.length=0;e&&clearTimeout(e)}};return t.forEach(function(n){var t=n.init(h,v);s.push(t);h[n.name]=t}),h}Object.defineProperty(t,"__esModule",{value:!0});t.DEFAULT_MODULES=void 0;var i=require("../utils"),u=require("./entitiesLoaderModules/utils"),r=require("./entitiesLoaderModules");Object.defineProperty(t,"DEFAULT_MODULES",{enumerable:!0,get:function(){return r.DEFAULT_MODULES}});t.default=f})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/entitiesLoader"),geotab.commonjs.generateExport("geotab/checkmate/entitiesLoader"));
(function(n,require,t){"use strict";function s(n,t){var i=o[t]||o.en;return"https://docs.google.com/forms/d/"+i+"/viewform?entry.974667310=Grammar/translation+correction&entry.1340886904="+n}var u=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),h,r,c,l;Object.defineProperty(t,"__esModule",{value:!0});t.PageTooltipHelp=t.pageTooltipHelpFactory=t.createLink=void 0;var i=require("../../../vanillaExtension/vanilla"),f=require("../../eventHandler"),a=function(){return i.create("DIV",{"class":"help-tooltip"})},e=function(n,t){Array.prototype.forEach.call(n,t)},o={en:"1v7ETn3AfOwb67qdIXCwGxK47Ov4M4KR39zBvUvTq3WQ",de:"1l6pMveiAJsCqiqsJkahlm88YGyE-yLJ7zSIjKsI50Eg",fr:"13Nz3htkck9MW38K745cxoWf0CBbGvmP2vpvBySb9z2A",es:"1b6TjksWcs_Ybzcx-h7L7yxvbjnLFPI98Efs4cR4aV68",ja:"1PtntEVCznPjehQfX52ucx-qXgtilEqLWBMiH6EfD2QA",pl:"1m2ReQ39oyTtYQ6BVouYs3oeJExfLdwr3if0gtkf06AI","pt-BR":"1O27byHVatKh-D2mBzHDI15UiofmMcvhf919sNMygls0",nl:"19zNjGboK2gtE1mZBWiaLwvbRY-6UPSXULhmfIQUVqD4",it:"10HX1dJzPJAAUt2XlEHVCVmako99cl2uJjZ0iHLT_j7k","zh-Hans":"14pauZZLketACY5OsG_xZ2Qakpkls85BRX_amKeG9vmo",th:"1uwSzfNUtGog9RpIDF6AqVXV6xb-tIDViGe633g-3c3M",id:"1chdNpveyIRfKJLlRWlCDEqk4uCFHcQT5S6586VsRvu4",cs:"1IN_p3mx_ntn6UUA3VxvuQE52GtJKvgPb1D4dEi2iYR4",sv:"1I0lVYAjWXpSKkn6o6DGrMUF55hFf8xL7iMxLB51Rq7k"};t.createLink=s;h=function(n,t,i){return n?new r(n,t,i):new c};t.pageTooltipHelpFactory=h;r=function(n){function t(t,r,u){var f=n.call(this)||this,o,e,s;return f.checker=t,o=t.id,e=o&&t.parentElement&&t.parentElement.querySelector('[for="'+o+'"]'),e&&e.children.length===0&&(e.appendChild(i.createPureIcon("question-mark","help-section__label-icon geo-icon--big")),s=i.create("span",{"class":"help-section__label-text geo-caption__content"}),s.textContent=u.helpTitle,e.appendChild(s),e.className+=" noTranslate responsive"),f.container=r,f.checker&&(f.checker.addEventListener("click",function(){f.shown=f.checker.checked},!1),f.editButton=new l(f.checker,u.pageName,u.language,u.feedbackTitle)),f}return u(t,n),t.prototype.toggleHelpElements=function(n){e(this.container.getElementsByClassName("help-visible"),function(t){t.style.display=n?"block":"none"})},t.prototype.toggleTooltipHelpElement=function(n,t){i.toggleClasses(n,"help-tooltip",t)},t.addTooltip=function(n,t){if(!i.hasClass(n,"help-ignore")){var r=a(),u=n.parentNode,f=i.create("DIV");return f.textContent=n.title,r.appendChild(f),t&&n.nextElementSibling?u.insertBefore(r,n.nextElementSibling):u.appendChild(r),r}return null},Object.defineProperty(t.prototype,"shown",{get:function(){return this.checker.checked},set:function(n){var o=this,u,f,r;if(n)this.editButton.added=!0,e(this.container.querySelectorAll(".checkmateField [title], .checkboxCheckmateField[title], .addToolTipHelp[title], .help-content"),function(n){var f=n.parentNode&&n.parentNode.children||[],u=f[f.length-1],r=n,s=i.hasClass(n,"help-content"),h=i.hasClass(n.parentNode,"help-content-group"),e=u&&i.hasClass(u,"help-tooltip"),c=n.className.indexOf("help-after")!==-1;s||e&&!h?u&&e&&(r=null):r=t.addTooltip(n,c);r&&o.toggleTooltipHelpElement(r,!0)});else for(u=this.container.getElementsByClassName("help-tooltip"),f=u.length,this.editButton.added=!1;f--;)r=u[0],this.toggleTooltipHelpElement(r,!1),!r.hasAttribute("data-leave")&&r.parentNode&&r.parentNode.removeChild(r);this.checker.checked!==n&&(this.checker.checked=n);this.toggleHelpElements(n);this.fire("change",{shown:n})},enumerable:!1,configurable:!0}),t.prototype.refresh=function(){this.shown&&(this.shown=!0)},t}(f.SimpleEventHandler);t.PageTooltipHelp=r;c=function(n){function t(){return n.call(this)||this}return u(t,n),Object.defineProperty(t.prototype,"shown",{get:function(){return!1},set:function(){},enumerable:!1,configurable:!0}),t.prototype.refresh=function(){return},t}(f.SimpleEventHandler);l=function(){function n(n,t,r,u){this.link=i.create("a",{"class":"help-section__link help-section__label geo-button noTranslate",target:"blank",href:s(t,r)});this.link.appendChild(i.createPureIcon("pencil-icon","help-section__label-icon geo-icon--big"));var f=i.create("span",{"class":"help-section__label-text"});f.textContent=u;this.link.appendChild(f);this.button=n}return Object.defineProperty(n.prototype,"added",{get:function(){return!!this.link.parentNode},set:function(n){n&&!this.link.parentNode?this.button.parentNode&&this.button.parentNode.appendChild(this.link):!n&&this.link.parentNode&&this.link.parentNode.removeChild(this.link)},enumerable:!1,configurable:!0}),n}()})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/help/pageTooltipHelp"),geotab.commonjs.generateExport("geotab/checkmate/ui/help/pageTooltipHelp"));
(function(n,require,t){"use strict";function i(n,t){return(n||"").toLowerCase().split(",").some(function(n){return n===t.toLowerCase()})}function r(n,t){return i(n.featurePreview||"",t)}Object.defineProperty(t,"__esModule",{value:!0});t.hasFeature=t.containsFeature=void 0;t.containsFeature=i;t.hasFeature=r})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/featurePreview/featurePreview"),geotab.commonjs.generateExport("geotab/checkmate/featurePreview/featurePreview"));
(function(n,require,t){"use strict";var i,r;Object.defineProperty(t,"__esModule",{value:!0});t.features=t.isHiddenShareableFunctionality=t.featuresHiddenForFedRamp=t.Features=void 0,function(n){n.ROUTE_PAGE="route_page";n.MOBILE_VIEW="mobile_view";n.EXCEPTION_DETAILS="exception_details";n.MAP_WEATHER="map_weather";n.REPLAY_TRIPS="replay_trips";n.ROAD_SPEED_DETAILS="road_speed_details";n.INTERACTIVE_DASHBOARDS="interactive_dashboards";n.ACTIVE_GRAPHS="active_graphs";n.DISPLAY_CURRENT_TRIPS="display_current_trips";n.ASSET_MONITORING_PAGE="asset_monitoring_page";n.NOTIFICATION_TYPE_FILTER="notification_type_filter";n.DEVICE_INSTALLATION="device_installation";n.ADVANCED_FILTER="advanced_filter";n.POTENTIAL_FUEL_RISK="potential_fuel_risk";n.LAB_HOS_RULESETS="lab_hos_rulesets";n.USER_EXPIRED_ALERT="user_expired_alert";n.USER_TIMEOUT_PERIOD="user_timeout_period";n.USER_MAINTENANCE="user_maintenance";n.INCLUDE_EMAIL_ATTACHMENT="include_email_attachment";n.PRIVACY_MODE="privacy_mode";n.DRIVE_TRIP_CATEGORIZATION="drive_trip_categorization";n.ADVANCED_ENGINE_DATA_PROFILE="advanced_engine_data_profile";n.SHAREABLE_LINK="shareable_link";n.UNIDENTIFIED_DRIVING_PAGE="unidentified_driving_page";n.WIFI_MAX_TIER_USAGE_RULE="wifi_max_tier_usage_rule"}(i=t.Features||(t.Features={}));t.featuresHiddenForFedRamp=[i.SHAREABLE_LINK,i.WIFI_MAX_TIER_USAGE_RULE];r=function(n,i){return i?t.featuresHiddenForFedRamp.indexOf(n)===-1:!0};t.isHiddenShareableFunctionality=!0;t.features=[{value:i.ROUTE_PAGE,title:"Route page",description:"The redesigned Route edit page and newly added Route view page provide more detailed information about routes and route stops."},{value:i.MOBILE_VIEW,title:"New map mobile layout",description:"A new experience is available for mobile users when landing on the map page.\n    The redesigned page makes interacting with the map more mobile friendly, with familiar, easy to use, intuitive controls."},{value:i.EXCEPTION_DETAILS,title:"Exception details",description:"See more information about your exception with flexible tools and visualizations. Learn details such as location, duration and driver contact information."},{value:i.MAP_WEATHER,title:"Show weather information on the map",description:"Displays weather information on the map, including current temperature and forecast for the day."},{value:i.REPLAY_TRIPS,title:"Replay trips",description:"Allows you to replay trips on the Trips History page."},{value:i.ROAD_SPEED_DETAILS,title:"Road speed details",description:"Display more detailed information about road speed on the map."},{value:i.INTERACTIVE_DASHBOARDS,title:"Interactive dashboard reports",description:"Interactive Charts lets you visualize, create and display interactive widgets from Excel reports.\n    Widgets, such as the Watchdog Report, can be displayed on your Dashboard, then actioned in Vehicles & Assets.\n    The report types Device Report, Exceptions summary, Trips detail, and Risk management have a new Interactive Chart setting."},{value:i.ACTIVE_GRAPHS,title:"Active graph",description:"Display more detailed information on Custom Reports page"},{value:i.DISPLAY_CURRENT_TRIPS,title:"Display current trips",description:"A new option on the Trips History page to view current trips along with previous trips that have already occurred."},{value:i.ASSET_MONITORING_PAGE,title:"Asset Monitoring page",description:"The Asset Monitoring page allows you to see asset details while tracking their position on the map.                       You can monitor the asset's temperature, loaded state, fuel level, and more."},{value:i.NOTIFICATION_TYPE_FILTER,title:"Notifications type",description:"Shows a new filter on the Notifications page."},{value:i.DEVICE_INSTALLATION,title:"New installation record notification",description:"Fleet personnel can be notified when a new installation record is created to review the information and make the necessary updates to their assets.\n    If your asset does not have the license plate recorded, for example, and the installer entered it as part of the installation, you can review and accept it with a click of a button."},{value:i.ADVANCED_FILTER,title:"Advanced Groups filter",description:"Adds new options on the Groups filter on the top left to allow for advanced group filtering. You can use the new AND operator, and combine various conditions as well."},{value:i.POTENTIAL_FUEL_RISK,title:"Potential fuel risk",description:"Indicates fuel risk on the Fill-Ups page."},{value:i.LAB_HOS_RULESETS,title:"Upcoming HOS rulesets",description:"Before HOS rulesets are fully developed, you can try out the work in progress, and provide feedback."},{value:i.USER_EXPIRED_ALERT,title:"Expired user alert",description:"Sends an alert about users that can no longer access the application."},{value:i.USER_TIMEOUT_PERIOD,title:"User timeout period",description:"Allows you to enable a setting under User Account Policy\n    to specify that users should be logged out of the application after a determined inactivity period."},{value:i.USER_MAINTENANCE,title:"User maintenance",description:"Adds account suspension section in the System Settings."},{value:i.INCLUDE_EMAIL_ATTACHMENT,title:"Emailed reports options",description:"Allows you to decide how to send emailed reports: as attachments or download links."},{value:i.PRIVACY_MODE,title:"Allows privacy mode",description:"If enabled, the user can define private data in System settings and define the data available for recording"},{value:i.DRIVE_TRIP_CATEGORIZATION,title:"Trip categorization",description:"Categorize and add remarks to your previous trips in the Drive App."},{value:i.ADVANCED_ENGINE_DATA_PROFILE,title:"Advanced engine data profile page",description:"Enabled advanced engine data profile page helps users to view and compare all diagnostics provided by a vehicles visualized along of the trip with a map component."},{value:i.SHAREABLE_LINK,title:"Allows shareable link",description:"Allows you to share vehicle location publicly for period of time and manage shareable links.",visible:function(n){return r(i.SHAREABLE_LINK,n)&&!t.isHiddenShareableFunctionality}},{value:i.UNIDENTIFIED_DRIVING_PAGE,title:"Unidentified driving page",description:"A compact, dedicated view of unidentified driving activity with predictive text and simplified edit capabilities."},{value:i.WIFI_MAX_TIER_USAGE_RULE,title:"WiFi hotspot usage",description:"Allows you to configure a stock rule that will trigger when hotspot usage exceeds the configured percentage value.",visible:function(n){return r(i.WIFI_MAX_TIER_USAGE_RULE,n)}}]})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/featurePreview/features"),geotab.commonjs.generateExport("geotab/checkmate/featurePreview/features"));
(function(n,require,t){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i.apply(this,arguments)},r,u;Object.defineProperty(t,"__esModule",{value:!0});t.MessagesPageLinks=t.useNewMessagePage=t.LEGACY_TEXTMESSAGING=void 0;t.LEGACY_TEXTMESSAGING="LEGACY_TEXTMESSAGING";r=function(n){return(n||"").toUpperCase().indexOf(t.LEGACY_TEXTMESSAGING)===-1};t.useNewMessagePage=r;u=function(){function n(n){this.redirectToNewPage=t.useNewMessagePage(n)}return n.prototype.isNewMessageWithContent=function(n){return n.routeId||n.zoneId||n.address||this.isLatLngValid(n)},n.prototype.isLatLngValid=function(n){return typeof n.lat=="number"&&typeof n.lng=="number"},Object.defineProperty(n.prototype,"page",{get:function(){return this.redirectToNewPage?"messages":"gpsTextMessageSend"},enumerable:!1,configurable:!0}),n.prototype.createMessageLink=function(n){return this.isNewMessageWithContent(n)?this.redirectToNewPage?{selection:{devices:[n.deviceId]},location:i({route:n.routeId,zone:n.zoneId,address:n.address},this.isLatLngValid(n)?{lat:n.lat,lng:n.lng}:{}),isNewThread:!0}:{route:n.routeId?{id:n.routeId}:undefined,zone:n.zoneId?{id:n.zoneId}:undefined,location:this.isLatLngValid(n)?{x:n.lng,y:n.lat}:undefined,address:n.address?n.address:undefined}:this.redirectToNewPage?{isNewThread:!0}:{}},n.prototype.openChatMessage=function(n){return this.redirectToNewPage?{chatWith:{users:n.users||[],devices:n.devices||[]},location:this.isLatLngValid(n)?i({address:n.address},this.isLatLngValid(n)?{lat:n.lat,lng:n.lng}:{}):undefined,message:n.message,isNewThread:!1}:{deviceId:n.devices&&n.devices.length>0?{id:n.devices[0]}:undefined,location:this.isLatLngValid(n)?{x:n.lng,y:n.lat}:undefined,address:n.address?n.address:undefined,message:n.message}},n}();t.MessagesPageLinks=u})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/messagesTools/tools/messagesPageLinks"),geotab.commonjs.generateExport("geotab/checkmate/ui/messagesTools/tools/messagesPageLinks"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.hasAccessToUserProfile=t.userProfileClearances=void 0;t.userProfileClearances=["EngineManagementReport","EngineStatusDataGraph","ReminderReport","ViewHOSLogs","DeviceList","ExceptionsReport","AccidentDebugReport","ManageReportTemplates","FuelUsageReport","EditException","DeviceAdminDeleteUnplugReplace","DisplayMap","TripsActivityReport","ImportFromOtherDatabase","SpeedProfileReport","DeviceAdmin","FuelTax","ManageDVIRLogs"];var i=function(n){return t.userProfileClearances.some(n)};t.hasAccessToUserProfile=i})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/userProfileUtils/hasAccessToUserProfile"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/userProfileUtils/hasAccessToUserProfile"));
(function(n,require,t){"use strict";function e(n,t,e,o,s){var b=function(){return!!n.changePassword},h=function(){return!s},a=function(){return t.length>0},v=function(n,i){return typeof n=="function"?n(i):t.indexOf(n)!==-1},k=function(n,t){return n.some(function(n){return v(n,t)})},c=function(n){return function(t){return k(n,t)}},d=function(n,t){return n.every(function(n){return v(n,t)})},y=function(n){return function(){return o.toUpperCase().indexOf(n)>=0}},g=function(n){return function(){return o.toUpperCase().indexOf(n)===-1}},p=[c(["DeviceAdmin","DeviceAdminAdvanced","DeviceAdminDeleteUnplugReplace"])],l={helpguide:["ProductGuideClearance"],helpresources:["ViewAdvancedHelp",e],releasenotes:["ViewAdvancedHelp",e],contact:["ViewAdvancedHelp"],helpforum:["ViewAdvancedHelp",e],videoresources:["ViewAdvancedHelp",e],dashboard:["MileageSummaryDashboard"],map:["DisplayMap"],assetmonitoring:["DisplayMap","DeviceList",function(){return r.hasFeature(n,i.Features.ASSET_MONITORING_PAGE)}],devices:["DeviceList"],device:p,devicestatus:["DeviceCurrentStatusClearance","DeviceInstallHistoryReport"],deviceserialno:p,riskmanagement:["RiskManagementReport"],speedprofile:["SpeedProfileReport"],driverscongregating:["CongregationReport"],timecardreport:["TimeCardReport"],workhourdetailedit:["WorkTimeList"],deviceinstallhistory:["DeviceInstallHistoryReport"],deviceinstallation:["InstallRecord"],worktimes:["WorkTimeList"],worktime:["WorkTimeList","WorkHolidayList"],workholidays:["WorkHolidayList"],workholiday:["WorkHolidayList"],iftamiles:["FuelTax"],logdetails:["AccidentDebugReport"],hoslogs:["ViewHOSLogs"],hoslog:["ManageHOSLogs"],transfereld:["ViewHOSLogs"],hosviolations:["ViewHOSLogs"],hosavailability:["ViewHOSLogs"],hosrecaps:["ViewHOSLogs"],trailers:["ViewTrailers"],trailer:["ManageTrailers"],enginecontrollers:["EngineDiagnosticList"],enginecontroller:["EngineDiagnosticList"],enginediagnostics:["EngineDiagnosticList"],enginediagnostic:["EngineDiagnosticList"],enginetypes:["EngineTypeList"],enginetype:["EngineTypeList"],fuelusage:["FuelUsageReport"],fuelevents:["FuelTransactionList"],fuelevent:["FuelTransactionList"],fueleventsgraph:["FuelTransactionList"],evcharging:["FuelTransactionList"],dvirs:["ViewDVIRLogs"],dvir:["ManageDVIRLogs"],zones:["ZoneList"],zone:["ZoneAdmin"],zonetypes:["ZoneTypeList"],zonetype:["ZoneTypeList"],importzones:["ImportZones"],customervisits:["CustomerVisitsReport","ZoneList"],routeplanactual:["RouteComparisonReport"],routesummaryreport:["RouteSummaryReport"],unmatchedroute:["UnassignedRouteReport"],routes:["RouteList"],route:["RouteList"],editroute:["RouteList"],routeview:["RouteList"],importroutes:["RouteList"],gpstextmessages:["ViewGpsTextMessage",y(u.LEGACY_TEXTMESSAGING)],gpstextmessagesend:["ViewGpsTextMessage","SendGpsTextMessage",y(u.LEGACY_TEXTMESSAGING)],messages:["ViewGpsTextMessage",g(u.LEGACY_TEXTMESSAGING)],rules:["ExceptionsList"],rule:["ExceptionsList","EditException"],exceptions:["ExceptionsReport"],exception:["ExceptionsReport",function(){return r.hasFeature(n,i.Features.EXCEPTION_DETAILS)}],defectlist:["NodesList"],defectlists:["ViewDVIRLogs"],customreports:["ViewReportTemplate"],customreport:["ManageReportTemplates"],users:["UserList"],user:["UserAdmin"],changepassword:[c(["ChangePassword",b])],systemsettings:["SystemSettings"],auditlogs:["AuditLog"],databaseexport:["ExportFromOtherDatabase"],about:["AboutCheckmate"],credits:["AboutCheckmate"],notifications:["NotificationList"],notification:["NotificationList"],options:[c(["UserSettings","UserAdmin"])],tripshistory:["TripsActivityReport"],tripssummary:["TripsActivityReport"],fleetsummaryreport:["TripsActivityReport"],customerstopsreport:["CustomerVisitsReport"],clearances:["SecurityClearanceList"],clearance:["NodesList"],group:["NodesList"],groupstree:["ViewGroups"],notificationtemplates:["EditNotificationEmailTemplate"],notificationtemplateemail:["EditNotificationEmailTemplate"],notificationtemplatewebrequest:["EditNotificationEmailTemplate"],notificationtemplatetext:["EditNotificationEmailTemplate"],distributionlist:["EditDistributionList"],distributionlists:["EditDistributionList"],exceptionssummary:["ExceptionsReport"],tripsidlingsummary:["TripsActivityReport"],fleet:["TripsActivityReport"],customerstops:["CustomerVisitsReport"],tripsdensity:["TripsActivityReport"],enginefaults:["EngineManagementReport"],faultdetails:["EngineManagementReport"],enginemeasurements:["EngineManagementReport"],enginedataprofile:["EngineManagementReport"],driverblocklist:["DriverBlacklist"],supporttickets:["DirectSupportAdmin",e],supportticket:["DirectSupportAdmin",e],trainingtickets:["DirectSupportAdmin",e],trainingticket:["DirectSupportAdmin",e],marketplace:["ViewAdvancedHelp",e,h],livechat:[e,h,a],selfhelp:[e,h,a],trends:["ViewBusinessIntelligence",e],analyticslab:["ViewAnalyticsLab",e,h],analyticslabexperiment:["ViewAnalyticsLab",e,h],activeinsights:["ViewActiveInsights",e,h],activeinsightselectricalsystemsrating:["ViewActiveInsights",e,h],activeinsightsnewzones:["ViewActiveInsights",e,h],activeinsightsnewzonedetail:["ViewActiveInsights",e,h],activeinsight:["ViewActiveInsights",e,h],activeinsightdetail:["ViewActiveInsights",e,h],materialmanagement:["MaterialManagementReport"],maintenancereminders:["ReminderReport"],maintenancetypes:["ReminderReport","ReminderRuleList"],maintenancerecords:["ReminderReport"],maintenancerecord:["ReminderReport"],maintenancereminder:["ReminderReport"],maintenancermindernotificationeditor:["ReminderReport"],upcomingmaintenance:["ReminderReport"],routecompletion:["RouteCompletionReport"],myreports:[],styleguide:[],vindecoder:[],deviceodometerreconcile:[],assetlocationsharing:["ViewShareableLink",function(){return r.hasFeature(n,i.Features.SHAREABLE_LINK)},h,function(){return!i.isHiddenShareableFunctionality}],unidentifieddriving:["ViewHOSLogs","ManageHOSLogs",function(){return r.hasFeature(n,i.Features.UNIDENTIFIED_DRIVING_PAGE)}],customunitprofile:[c(f.userProfileClearances),c(["UserSettings","UserAdmin"])]},nt=function(n){return(n||"").replace("#","").replace(/\/.*/,"").toLowerCase()},w=function(n){return l[nt(n)]};return{hasAccessToPage:function(n){var t=w(n);return t?d(t,n):!1},getCid:function(n){return w(n)},addCid:function(n,t){var i=(n||"").toLowerCase();i&&!l[i]&&(l[i]=t?[t]:[])},removeCid:function(n){var t=(n||"").toLowerCase();t&&l.hasOwnProperty(t)&&(l[t]=undefined)}}}Object.defineProperty(t,"__esModule",{value:!0});t.PagesSecurity=void 0;var r=require("./featurePreview/featurePreview"),i=require("./featurePreview/features"),u=require("./ui/messagesTools/tools/messagesPageLinks"),f=require("./ui/modules/userProfileUtils/hasAccessToUserProfile");t.PagesSecurity=e})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/pagesSecurity"),geotab.commonjs.generateExport("geotab/checkmate/pagesSecurity"));
(function(n,require,t){"use strict";function i(n,t){return'<div class="geo-dialog '+(n?"geo-dialog--large":"")+'" role="dialog" style="display:none;">\n            <div class="geo-dialog__header">\n                <div class="geo-dialog__title ellipsis"><\/div>\n                <button class="geo-dialog__close-button" style="display:none;" title="'+t("Close")+'" aria-label="'+t("Close")+'">\n                    <svg focusable=\'false\' class="svgIcon"><use xlink:href="#geo-cross-thin"><\/use><\/svg>\n                <\/button>\n            <\/div>\n            <div class="geo-dialog__content"><\/div>\n            <div class="geo-dialog__footer"><\/div>\n        <\/div>'}Object.defineProperty(t,"__esModule",{value:!0});t.vanillaDialogTemplate=void 0;t.vanillaDialogTemplate=i})(geotab,geotab.commonjs.generateRequire("geotab/vanillaExtension/vanillaDialog_html"),geotab.commonjs.generateExport("geotab/vanillaExtension/vanillaDialog_html"));
(function(n,require,t){"use strict";function h(n,t,f){var ft={parentNode:document.body,addCloseButton:!0,wrapHeader:!0,isModal:!1,buttons:[]},l=n?typeof n=="string"?i.textToHTML(n)[0]:n:i.create("DIV"),g=l&&l.parentNode,c=i.extend(!0,{},ft,t),y=c.trapFocus!==!1?new o.default:null,h=s(c,f),nt=f||function(n){return n},p,v,et=function(n,t){return i.create(n?"a":"button",t)},ot=function(n){var t='<svg class="geo-icon geo-icon--large geo-caption__pre-content"><use xlink:href="#'+n+'"><\/use><\/svg>';return i.textToHTML(t)[0]},st=function(n,t){var o=t.className,f=t.link||"",r=et(f,{"class":""+(o?o:"geo-button")+(""+(t.icon?" geo-caption":"")),id:t.id||u.generateId()}),e;return f&&(r.href=f),t.icon?(e=i.create("span",{"class":"geo-caption__content"}),e.textContent=n,r.appendChild(e),r.prepend(ot(t.icon))):r.textContent=n,r},a=c.isModal?i.create("div",{"class":"vanillaDialogShield"}):undefined,w=function(n){return v.isShown()&&(h.elem.style.display="none",a&&(a.style.display="none"),v.fireEvent("dialogClose",v,p),p=null,window.removeEventListener("resize",b,!1),c.closeButtonCallback&&c.closeButtonCallback(n),y&&y.untrap(null)),v},tt=function(n){n.keyCode===27&&(w(),n.stopPropagation(),n.preventDefault())},k=c.buttons.map(function(n){var t=st(nt(n.name),n),i=n.click?function(t){n.click&&n.click.call(this,t,p,v)}:w;return t.addEventListener("click",i,!1),h.footer.elem.appendChild(t),{elem:t,handler:i}}),it=function(n){var o=h.center.elem.scrollTop;i.css(h.center.elem,{height:"auto",maxHeight:"auto"});var r=h.elem.getBoundingClientRect().height,s=c.parentNode.getBoundingClientRect().height,u=h.header.elem.getBoundingClientRect().height,f=h.center.elem.getBoundingClientRect(),t=l.getBoundingClientRect(),e=h.footer.elem.getBoundingClientRect().height,a=t.top-f.top+(f.bottom-t.bottom),v=t.height+a+u+e-2;i.css(h.center.elem,{paddingBottom:n?0:"",paddingTop:n?0:"",height:n||v>r?Math.min(s,r+2)-u-e-2+"px":""});i.css(h.elem,{top:n?"0px":""});h.center.elem.scrollTop=o},b=function(){it(!1);var t=c.parentNode.getBoundingClientRect(),r=h.elem.getBoundingClientRect(),f=c.parentNode.scrollTop||window.pageYOffset,n=r.height-t.height,u=(c.top||(t.height-r.height)/2)+f;n=n<=0?0:n;i.css(h.elem,{top:(u>0?Math.round(u):0)+"px",left:(t.width-r.width)/2+"px"});a&&!n?a.style.bottom=-n+"px":n&&it(!0)},d=function(n,t){var i=t?h.elem:h.center.elem;n&&(i.style[t?"maxWidth":"maxHeight"]=n+"px")},rt=function(n,t,i){return{get:function(){return t?t(n.textContent||""):n.textContent||""},set:function(t){n.textContent=i?i(t):t},hide:function(){n.style.display="none"},show:function(){n.style.display="block"},toggle:function(t){n.style.display=t?"block":"none"}}},ht=function(n){return r(r({},rt(n)),{disable:function(){n.disabled=!0},enable:function(){n.disabled=!1},focus:function(){n.focus()},button:n})},ut;return k.length||(h.footer.elem.style.display="none"),c.addCloseButton&&(h.header.closeButton.style.display="block",h.header.closeButton.addEventListener("click",function(){return w()},!1),h.elem.addEventListener("keydown",tt,!1),k.push({elem:h.header.closeButton,handler:function(){return w()}})),h.header.title.id=u.generateId(),h.elem.setAttribute("aria-labelledby",h.header.title.id),h.elem.setAttribute("aria-modal",c.isModal?"true":"false"),ut=typeof c.title=="string"?c.title:"",h.header.title.textContent=ut||l.getAttribute("title")||nt("Information"),i.toggleClasses(h.header.elem,"hidden",!c.addCloseButton&&c.title===!1),i.toggleClasses(h.center.elem,"geo-dialog__content--full-size-content",!!c.fullSizeContent),l&&(h.center.elem.appendChild(l.parentNode?l.parentNode.removeChild(l):l),l.style.display="block",c.parentNode.appendChild(h.elem),c.width&&d(c.width,!0),c.height&&d(c.height)),a&&c.parentNode.appendChild(a),v=i.extend({element:h.elem,container:h.center.elem,title:rt(h.header.title),buttons:k.map(function(n){return ht(n.elem)}),parentNode:c.parentNode,shield:a,close:w,show:function(n){return v.isShown()||(h.elem.style.display="block",a&&(a.style.display="block"),window.addEventListener("resize",b,!1),b(),p=n,v.fireEvent("dialogShow",v,p),y&&y.trap(h.elem)),v},isShown:function(){return h.elem.style.display!=="none"},destroy:function(){if(w(),p=null,h.elem.removeEventListener("keydown",tt,!1),k.forEach(function(n){n.elem.removeEventListener("click",n.handler,!1)}),k.length=0,h.elem.parentNode){var n=l.parentNode&&l.parentNode.removeChild(l);g&&n&&g.appendChild(n);h.elem.parentNode.removeChild(h.elem);a&&c.parentNode.removeChild(a)}window.removeEventListener("resize",b,!1);y&&y.untrap(null)},resizeTo:function(n,t){d(n,!0);d(t);b()},resize:b},e.default())}var r=this&&this.__assign||function(){return r=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});t.VanillaDialog=void 0;var i=require("./vanilla"),f=require("./vanillaDialog_html"),e=require("../checkmate/eventHandler"),u=require("../utils"),o=require("../checkmate/ui/focusTools/trapFocus"),s=function(n,t){var s;t===void 0&&(t=u.echo);var e={header:"geo-dialog__header",title:"geo-dialog__title",closeButton:"geo-dialog__close-button",content:"geo-dialog__content",footer:"geo-dialog__footer"},h=f.vanillaDialogTemplate(n.large||!1,t).trim(),r=i.textToHTML(h)[0],o=r.getElementsByClassName(e.header)[0];return n.id&&(r.id=n.id),n.zIndex&&(r.style.zIndex=n.zIndex.toString()),s=o.getElementsByClassName(e.title)[0],n.wrapHeader||i.removeClasses(s,"ellipsis"),{elem:r,header:{elem:o,title:s,closeButton:o.getElementsByClassName(e.closeButton)[0]},center:{elem:r.getElementsByClassName(e.content)[0]},footer:{elem:r.getElementsByClassName(e.footer)[0]}}};t.VanillaDialog=h})(geotab,geotab.commonjs.generateRequire("geotab/vanillaExtension/vanillaDialog"),geotab.commonjs.generateExport("geotab/vanillaExtension/vanillaDialog"));
(function (geotab, require, exports){ exports.default = "<div id=\"loginDialogId\" class=\"loginDialog\" style=\"display:none\"><div class=\"loginFields smallStaff loginLinksField\"><div class=\"fieldLabel\"><button id=\"addDataBaseId\" class=\"addDatabaseButton\">Options</button></div><div id=\"loginRegistrationLink\" class=\"newCustomerTranslation fieldLabel rightAlign\"><span>New customer? </span><a href=\"/registration.html\" id=\"register\" class=\"link\">Register</a></div></div><div class=\"loginbrandId\"><div class=\"companyLogoContainer\"></div></div><div class=\"loginContainer\"><div class=\"lineWaiting\" id=\"loginWaiting\"><div class=\"bg\"></div></div><div class=\"animatedElement\"><div class=\"slider\" id=\"loginSlider\"><div id=\"loginStep1\" class=\"slide\"><form id=\"loginFormId\" action=\"/blank.html\" method=\"post\"><div class=\"loginFields\"><label class=\"fieldLabel ellipsis\" for=\"userEmailId\" tabindex=\"-1\">User (Email)</label><input id=\"userEmailId\" type=\"text\" name=\"login\" class=\"actionPart loginFields__input geo-text-input\" /></div><div class=\"loginFields\" style=\"display:none\"><input type=\"password\" name=\"password\" class=\"actionPart loginFields__input geo-text-input\" autocomplete=\"off\" /></div><input type=\"submit\" id=\"userSubmitButtonId\" style=\"display:none\" value=\"Login\" /></form><div class=\"loginFields\" id=\"databaseField\" style=\"display:none\"><label class=\"fieldLabel ellipsis\" for=\"databaseId\">Database</label><input id=\"databaseId\" type=\"text\" name=\"database\" class=\"actionPart loginFields__input geo-text-input\" /></div><div class=\"loginFields\" id=\"serverField\" style=\"display:none\"><label class=\"fieldLabel ellipsis\" for=\"serverId\">Server</label><input id=\"serverId\" type=\"text\" name=\"server\" class=\"actionPart loginFields__input geo-text-input\" /></div><div class=\"alert alert--error\" style=\"display:none\"><label id=\"errorMessageInputId\"></label></div><div class=\"loginFields\" id=\"loginField\"><div class=\"fieldLabel savedSessions\"><div class=\"inlineList\" id=\"savedSessions\" style=\"display:none\"></div></div><div class=\"actionPart\"><button id=\"loginInputId\" class=\"geo-button geo-button--action\">Next</button></div></div></div><div id=\"loginStep2\" class=\"slide\" style=\"display:none\"><form id=\"loginFormStep2Id\" action=\"/blank.html\" target=\"loginDialogProxyForm\" method=\"post\"><div class=\"loginFields\"><label class=\"fieldLabel ellipsis\" for=\"userEmailStep2Id\" tabindex=\"-1\">User (Email)</label><input id=\"userEmailStep2Id\" type=\"text\" class=\"actionPart loginFields__input geo-text-input\" /></div><div class=\"loginFields loginNoPaddingBottom\"><label class=\"fieldLabel ellipsis\" for=\"userPasswordId\">Password</label><div class=\"loginUserPasswordContainer\"><input id=\"userPasswordId\" type=\"password\" name=\"password\" class=\"actionPart loginFields__input geo-text-input\" maxlength=\"255\" autocomplete=\"off\" /></div></div><div class=\"loginFields\"><div class=\"loginSpace\"></div><div class=\"loginCapsWarning loginHide\" id=\"loginCapsWarning\">Warning: Caps Lock is on</div></div><input type=\"submit\" id=\"userSubmitButtonStep2Id\" style=\"display:none\" value=\"Login\" /></form><div class=\"loginFields\" id=\"databaseFieldStep2\" style=\"display:none\"><label class=\"fieldLabel ellipsis\" for=\"databaseIdStep2\">Database</label><input id=\"databaseIdStep2\" type=\"text\" name=\"database\" class=\"actionPart loginFields__input geo-text-input\" /></div><div class=\"loginFields\" id=\"serverFieldStep2\" style=\"display:none\"><label class=\"fieldLabel ellipsis\" for=\"serverIdStep2\">Server</label><input id=\"serverIdStep2\" type=\"text\" name=\"server\" class=\"actionPart loginFields__input geo-text-input\" /></div><div class=\"alert alert--error\" style=\"display:none\"><label id=\"errorMessageInputStep2Id\"></label></div><div class=\"loginFields\" id=\"loginFieldStep2\"><div class=\"actionPart stepBackButton\"><button id=\"loginInputBackStep2Id\" class=\"geo-button\">Back</button></div><div class=\"actionPart\"><button id=\"loginInputStep2Id\" class=\"geo-button loginTranslation geo-button--action\">Log in</button></div></div></div></div></div><div class=\"loginFields smallStaff loginLinksField\"><div class=\"fieldLabel\" style=\"display:none\"><a id=\"forgotPassword\" href=\"/resetPassword.html\" title=\"Forgot password?\" class=\"link\">Forgot password?</a></div><div class=\"fieldLabel ellipsis rightAlign\"><input id=\"rememberMeInputId\" name=\"rememberMe\" checked=\"checked\" type=\"checkbox\" /><label for=\"rememberMeInputId\" class=\"rememberMeTranslation ellipsis\">Remember me</label></div></div></div></div>";
 })(geotab, geotab.commonjs.generateRequire("geotab/checkmate/ui/ifrLoginDialog.html"), geotab.commonjs.generateExport("geotab/checkmate/ui/ifrLoginDialog.html"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PasswordField=void 0;var i=require("../../../../vanillaExtension/vanilla"),r=function(){function n(n,t){if(this.input=n,this.labels=t,this.isVisible=!1,!this.input.parentNode)throw new Error("input must have a parent");this.parent=this.input.parentNode;this.initButton();i.addClasses(this.parent,"password-field");i.addClasses(this.input,"password-field__input");i.addClasses(this.button,"password-field__button help-ignore")}return n.prototype.addButton=function(){var n=document.createElement("button");return n.type="button",this.setLabel(n,this.labels.showPassword),n},n.prototype.initButton=function(){this.button=this.addButton();this.showIcon=i.createPureIcon("eye-open","password-field__icon");this.button.appendChild(this.showIcon);this.hideIcon=i.createPureIcon("eye-close","password-field__icon");this.button.appendChild(this.hideIcon);this.button.addEventListener("click",this.togglePassword.bind(this),!1);this.parent.appendChild(this.button);i.hide(this.hideIcon)},n.prototype.setLabel=function(n,t){n.setAttribute("title",t);n.setAttribute("aria-label",t)},n.prototype.togglePassword=function(){this.isVisible?this.hidePassword():this.showPassword()},n.prototype.showPassword=function(){this.isVisible||(i.hide(this.showIcon),i.show(this.hideIcon),this.input.type="text",this.setLabel(this.button,this.labels.hidePassword),this.isVisible=!0)},n.prototype.setLabels=function(n){this.labels=n;this.setLabel(this.button,this.isVisible?this.labels.hidePassword:this.labels.showPassword)},n.prototype.hidePassword=function(){i.show(this.showIcon);i.hide(this.hideIcon);this.input.type="password";this.setLabel(this.button,this.labels.showPassword);this.isVisible=!1},n.prototype.disableAutocomplete=function(){this.input.setAttribute("autocomplete","new-password")},n}();t.PasswordField=r})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/passwordField/passwordField"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/passwordField/passwordField"));
(function(n,require,t){"use strict";function p(t,p,w){var pt=[],wt=[],b,k,ni,ei,ti,lt,bt,kt,dt,ft,vi,ii,et,oi,ri,gt,yi,pi,at,vt,d,ot,si,ui,hi,fi,tt,it,ci,g,st,yt,ur=t.localizer||h.LocalizerConstructor(),rt=p,nt=!1,ut=function(n,t){n&&(n.parentNode.style.display=t?"block":"none")},fr=function(n){if(!n)return"";var t=r.parseServerName(n.toLowerCase());return t.scheme="https",t.scheme+"://"+t.host},wi=function(t,i,u,f){var o=r.parseServerName(window.location.href).host,s=o.slice(o.indexOf(".")+1)||"",e={database:u?u:n.location.database,serverName:fr(f),userName:t,password:i,rememberMe:!!kt.checked,newUserLanguage:rt},h;if(!t||!i&&!nt)return li("InvalidUser"),!1;if(!nt&&e.serverName&&!r.isValidServerName(e.serverName,[s]))return h=ht.translate(rt,"WrongDomain").replace("{0}",s),li(h),!1;for(ut(lt),ut(bt);pt.length;)pt.shift()(e);return wt=[],!0},bi=function(n,t){n.getModifierState&&n.getModifierState("CapsLock")?t.classList.remove("loginHide"):t.classList.add("loginHide")},er=function(){var n=document;n.msCapsLockWarningOff===!1&&(n.msCapsLockWarningOff=!0);d.addEventListener("mousedown",function(n){bi(n,ii)});d.addEventListener("keyup",function(n){bi(n,ii)});vi=new v.PasswordField(d,{showPassword:"Show password",hidePassword:"Hide password"})},or=function(){var s=function(){i.sendClick(yi)},h=function(){i.sendClick(pi)},u=function(n){var t=this,i=this.value;n.keyCode===13&&setTimeout(function(){t.value===i&&nt&&s()},1)},c,o,v,r;b=i.textToHTML(l.default)[0];ft=b.querySelector("#loginFormId");et=b.querySelector("#loginFormStep2Id");oi=b.querySelector("#loginStep2");ii=b.querySelector("#loginCapsWarning");c=function(){var n=function(n){return window[n]?n:undefined};return n("transitionend")||n("MSTransitionEnd")||n("oTransitionEnd")||n("webkitTransitionEnd")||"transitionend"}();ri=b.querySelector("#loginSlider");ri.addEventListener(c,function(n){n.preventDefault();nt?i.hide(oi):d.focus()},!1);gt=b.querySelector("#forgotPassword");yi=ft.querySelector("#userSubmitButtonId");pi=et.querySelector("#userSubmitButtonStep2Id");at=ft.querySelector("#userEmailId");vt=et.querySelector("#userEmailStep2Id");d=et.querySelector("#userPasswordId");ni=b.querySelector("#loginInputId");ei=b.querySelector("#loginInputStep2Id");ti=b.querySelector("#loginInputBackStep2Id");lt=b.querySelector("#errorMessageInputId");bt=b.querySelector("#errorMessageInputStep2Id");kt=b.querySelector("#rememberMeInputId");dt=b.querySelector("#loginWaiting");ot=b.querySelector("#addDataBaseId");si=b.querySelector("#databaseField");hi=b.querySelector("#serverField");ui=b.querySelector("#databaseFieldStep2");fi=b.querySelector("#serverFieldStep2");ci=b.querySelector("#loginField");g=b.querySelector("#databaseId");st=b.querySelector("#databaseIdStep2");tt=b.querySelector("#serverId");it=b.querySelector("#serverIdStep2");yt=b.querySelector("#savedSessions");o=b.querySelector("#register");o.href="/registration.html";tr(o);e.default.getInstance(null,ur,!0);k=f.VanillaDialog(b,{title:!1,width:400,isModal:!0,addCloseButton:!1});k.attachEvent("dialogClose",function(){while(wt.length)wt.shift()(i.extend(new Error("LoginDialogClosed:AuthenticationRequired"),{isSevere:!1,isAuthenticationRequiredException:!0}));pt=[];ct.destroy()});var t=function(n,t,r){i.isVisible(n)&&(r.value=t.value)},y=function(n){return n.value.trim().replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"')},n=ft.getAttribute("action")||"";ft.setAttribute("action","https://"+window.location.host+(n[0]==="/"?n:"/"+n));ft.addEventListener("submit",function(n){return n.preventDefault(),t(si,g,st),t(hi,tt,it),wi(y(at),d.value.trim(),g.value.trim(),tt.value.trim()),!1},!1);n=et.getAttribute("action")||"";et.setAttribute("action","https://"+window.location.host+(n[0]==="/"?n:"/"+n));et.addEventListener("submit",function(n){return n.preventDefault(),t(ui,st,g),t(fi,it,tt),wi(vt.value.trim(),d.value.trim(),st.value.trim(),it.value.trim()),!1},!1);v=function(){var n=[si,ui];a.isMobileApp()&&(n.push(hi,fi),tt.value=window.location.host,it.value=window.location.host);n.forEach(i.show);i.hide(ot)};ot.addEventListener("click",function(){v();yt.childElementCount>0&&i.show(yt);g.focus()},!1);g.addEventListener("keypress",u,!1);at.addEventListener("keypress",u,!1);tt.addEventListener("keypress",u,!1);r=function(n){var t=this,i=this.value;n.keyCode===13&&setTimeout(function(){t.value!==i||nt||h()},1)};d.addEventListener("keypress",r,!1);st.addEventListener("keypress",r,!1);it.addEventListener("keypress",r,!1);er();ni.addEventListener("click",s,!1);ei.addEventListener("click",h,!1);ti.addEventListener("click",function(n){n.preventDefault();pt=[];wt=[];t(ui,st,g);t(fi,it,tt);rr.fireEvent("stepBack",{},[vt.value.trim()])},!1);di();ut(lt);ut(bt)},li=function(n){var t=nt?lt:bt;t.textContent=ht.translate(rt,n)||n;ut(t,!0)},ai="en",sr=function(n,t){at.value=n;vt.value=n;d.value="";at.focus();kt.checked=t!==!1},hr=function(n,t,i){vt.value=n;d.value=t;kt.checked=i!==!1},ki=function(n){var t=[ft,ci];n?(t.forEach(i.show),g.removeAttribute("tabindex")):(t.forEach(i.hide),g.setAttribute("tabindex","-1"))},cr=function(n,t,r){i.show(oi);ut(bt);i.show(gt.parentElement);ki(!1);i.addClasses(ri,"stepTwo");hr(n,t,r)},lr=function(n,t){ut(lt);i.hide(gt.parentElement);ki(!0);i.removeClasses(ri,"stepTwo");sr(n,t)},ar=function(){k&&(at.value="",g.value="",tt.value=window.location.host)},vr=function(){k&&(vt.value="",d.value="",st.value="",it.value=window.location.host)},yr=function(n){rt=n;k&&(ut(lt),di())},di=function(){var t=ht.get("en"),i=Object.keys(t).map(function(n){return t[n]}),n=i.concat(["Remember me","Log in","New customer?","Register","User (Email)","Password","Language:","Forgot password?","Database","Log in to another database","Go back","Next","Warning: Caps Lock is on","Show password","Hide password","Options","Server"]);rt!=="en"?y.apiTransport("Translate",{sentences:n,language:rt},undefined,"loginDialog").then(function(t){gi(n,t,rt)}):gi(n,n,rt)},gi=function(n,t,i){var r=n.reduce(function(n,i,r){return n[i]=t[r],n},{});k&&pr(k.element,r);ht.set(i,r);wr(r);ai=i},pr=function(n,t){var i,f,r,u;n.getElementsByClassName("rememberMeTranslation")[0].textContent=t["Remember me"];n.getElementsByClassName("loginTranslation")[0].textContent=t["Log in"];ti.textContent=t["Go back"];ni.textContent=t.Next;i=n.getElementsByClassName("newCustomerTranslation")[0];i.children[0].textContent=t["New customer?"]+" ";f=i.getElementsByClassName("link")[0];f.textContent=t.Register;n.querySelector("label[for=databaseId]").textContent=t.Database;n.querySelector("label[for=databaseIdStep2]").textContent=t.Database;n.querySelector("label[for=serverId]").textContent=t.Server;n.querySelector("label[for=serverIdStep2]").textContent=t.Server;n.querySelector("label[for=userEmailId]").textContent=t["User (Email)"];n.querySelector("label[for=userEmailStep2Id]").textContent=t["User (Email)"];n.querySelector("label[for=userPasswordId]").textContent=t.Password;vi.setLabels({showPassword:t["Show password"],hidePassword:t["Hide password"]});ii.textContent=t["Warning: Caps Lock is on"];r=t["Log in to another database"];ot.textContent=t.Options;ot.title=r;ot.setAttribute("aria-label",r);u=t["Forgot password?"];gt.title=u;gt.textContent=u;tr(n.querySelector("#register"))},wr=function(n){var t=c.default(function(n){return ht.translate(ai,n)}),i=ht.translate(ai,"ResetPassExpired"),r=ht.translate("en","ResetPassExpired");n[r]&&t.hasMessage(i)&&(t.hideMessage(i),t.displayWarning(n[r]))},ht=function(){var t={"Close notification":"Close notification",WrongDomain:"A valid URL must contain {0}.",CannotConnectToServer:"This server is currently unavailable. Please verify the server name, or try again later.",DbUnavailable:"Your database is under maintenance",InvalidUser:"Invalid user name or password",ResetPassExpired:"The link to reset your password has expired. Please click 'Forgot password?' to receive another link."},n={en:t};return{get:function(t){return n[t]?n[t]:null},set:function(i,r){n[i]||(n[i]=Object.keys(t).reduce(function(n,i){return n[i]=r[t[i]],n},{}))},translate:function(t,i){return n[t]&&n[t][i]||n.en[i]||i}}}(),nr=function(t){var i=u.Deferred();return n.load(t,function(n){i.resolve(n)},function(){i.resolve("")}),i.promise()},br=function(n,t){var i=new o.default(function(i){if(n||t){var r="brands/"+n+"/registration.html",f="brands/"+t+"/registration.html";u.together([nr(r),nr(f)]).then(function(r){var u=r[0],f=r[1],e=u?n:t;i(u||f?"/brands/"+e+"/registration.html":"/registration.html")})}else i("/registration.html")});return function(){return i}}(w.prefix,w.domain),tr=function(n){br().then(function(t){n.href=t})},ct,ir=function(){k||or()},rr=s.default(),kr=function(){var n,i=document.querySelector("#brandId");i&&((n=t.languageSelector)===null||n===void 0?void 0:n.setTopPosition(i.offsetHeight))};return t.languageSelector&&t.languageSelector.setOnChange(yr),ct=i.extend(rr,{show:function(){ct.fireEvent("open");ir();k&&k.show();t.languageSelector&&(kr(),t.languageSelector.show())},close:function(){ct.fireEvent("close");ct.hideWaiting();k&&k.close();t.languageSelector&&t.languageSelector.hide()},showWaiting:function(){dt&&i.show(dt)},hideWaiting:function(){dt&&i.hide(dt)},showErrorMessage:li,setEnabledState:function(n){[ni,ot,kt,ei,ti].forEach(function(t){t&&(t.disabled=!n)})},setSavedTokens:function(n,t){var e,f,u,r;for(t===void 0&&(t=""),e=function(n,t){var r=i.create("div",{"class":"inlineItem"}),u=i.create("a",{"class":"link",href:t});return u.textContent=n,r.appendChild(u),r},ir(),i.empty(yt),f=n.length,u=0;u<f;u++)r=n[u],r.name&&r.name!==t&&yt.appendChild(e(r.name,r.href));f>0&&(i.show(yt),i.addClasses(ci,"activeSessions"))},getCredentialsForStep:function(n,t,i,r){k&&k.isShown()||ct.show();nt=n==="one";t&&(nt?lr(t.userName||"",t.rememberMe):cr(t.userName||"",t.password||"",t.rememberMe));pt.push(i);wt.push(r)},destroy:function(){nt=!0;ar();vr();ct.close()}})}Object.defineProperty(t,"__esModule",{value:!0});var i=require("../../vanillaExtension/vanilla"),f=require("../../vanillaExtension/vanillaDialog"),e=require("../errorHandler"),o=require("../../promise"),s=require("../eventHandler"),h=require("../../localizer"),c=require("./notifier"),l=require("./ifrLoginDialog.html"),a=require("../browser"),u=require("../deferred"),v=require("./modules/passwordField/passwordField"),r=require("../../utils/parseServerName"),y=require("../apiTransport");t.default=p})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/ifrLoginDialog"),geotab.commonjs.generateExport("geotab/checkmate/ui/ifrLoginDialog"));
(function(n,require,t){"use strict";function s(n){var t=n("ConnectionNotReliable"),i=n("Reconnecting1"),r=n("Reconnecting2"),u=n("Reconnecting3"),s=n("Reconnected"),h=e([i,r,u],5e3);return o(f(),t,"state-warning",h,"state-error",s,"state-success")}Object.defineProperty(t,"__esModule",{value:!0});var i=require("../../vanillaExtension/vanilla"),r=function(){return'<div class="networkStateMonitor">\n        <span class="networkStateMonitor-message"><\/span>\n    <\/div>'},u=function(){var n,t,i=function(){clearTimeout(t);t=null;n=!1};return{set:function(r){i();n=!0;t=setTimeout(i,r)},reset:i,isSet:function(){return n}}},f=function(){var f=function(){var n=i.textToHTML(r())[0];return document.body.appendChild(n),n},n,t,u=function(){clearTimeout(t);t=null};return{show:function(r,e,o){n||(n=f());u();var s=n.querySelector(".networkStateMonitor-message");s.className="networkStateMonitor-message "+e;s.textContent=r;i.show(n);o&&(t=setTimeout(function(){return n&&i.hide(n)},o))},getDisplayedMessage:function(){return n&&i.isVisible(n)?(n.textContent||"").trim():""},hide:function(){u();n&&i.hide(n)}}},e=function(n,t){var i,r,u=function(){clearTimeout(r);i=0},f=function(){return function(){r||(r=setTimeout(function(){i+=1;i>=n.length&&(i=0);r=null},t))}}();return{next:function(){var t=n[i];return f(),t},reset:u}},o=function(n,t,i,r,f,e,o){var l=2e4,c=5e3,s=u(),h=!1,a=0;return{show:function(){s.reset();h?n.show(r.next(),f,a):(n.show(t,i,l),r.reset(),h=!0)},hide:function(i){var r=h&&n.getDisplayedMessage()!==t&&!i,u=!r&&(!s.isSet()||i);r?(n.show(e,o,c),s.set(c)):u&&(s.reset(),n.hide());h=!1}}};t.default=s})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/networkStateMonitorDisplay"),geotab.commonjs.generateExport("geotab/checkmate/ui/networkStateMonitorDisplay"));
(function(n,require,t){"use strict";function e(n,t,e,o){var h=!1,c=u.default(),v=f.default(t),y=!1,w=function(){c.fireEvent("NetworkConnectionFound",c,{wasServiceAlive:s});n.connectionFound()},p=function(){c.fireEvent("NetworkConnectionLost",c,{isServiceAlive:s});n.connectionLost()},l=function(n){h&&w();h=!1;v.hide(!!n)},b=function(){h||p();h=!0;s&&!y&&v.show()},s=!0,a;return o&&(o.attachEvent("ServiceStopped",function(){s=!1;l(!0);p()}),o.attachEvent("ServiceStarted",function(){l();s=!0}),o.attachEvent("subscriptionsUpdated",function(){l();s=!0})),window.addEventListener("beforeunload",function(){y=!0},!1),a=r.multiplex(b,0),n.attach("networkError",function(n){a(n)}),e.attachEvent("requestFailed",function(n){n.isParserException||a(n)}),e.attachEvent("requestSucceeded",function(){s&&l()}),i.extend(c,{isNetworkConnectionLost:function(){return h}})}Object.defineProperty(t,"__esModule",{value:!0});var i=require("../../vanillaExtension/vanilla"),r=require("../../utils"),u=require("../eventHandler"),f=require("./networkStateMonitorDisplay");t.default=e})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/networkStateMonitor"),geotab.commonjs.generateExport("geotab/checkmate/ui/networkStateMonitor"));
(function(n,require,t){"use strict";function c(n,i,e,h){var a=function(n){return n.filter(function(n){return f.isCustomMapValid(n.createMapOptions,n.createLayersDictionary).isValid}).map(function(n){var t=n.id;return{id:t,alias:t,serverType:t,providerKey:"",keyRequired:!1,isCustom:!0,canDrawRoute:!1,name:n.name,createMapOptions:n.createMapOptions,createLayersDictionary:n.createLayersDictionary}})},v=["TripsActivityReport","DisplayMap","UserSettings","ViewSharedDevice"].some(e),c=u(u([],o()),a(h)),l;return v?(l=r.together(c.map(function(t){return t.keyRequired?s(n,t):r.resolve(t)})).then(function(n){return t.createProvidersPermissions(n)},function(n){return i(n),t.createProvidersPermissions(c)}),n.sendRequests(),l):r.resolve(t.createProvidersPermissions(c))}var i=this&&this.__assign||function(){return i=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i.apply(this,arguments)},u=this&&this.__spreadArray||function(n,t){for(var i=0,u=t.length,r=n.length;i<u;i++,r++)n[r]=t[i];return n},e,o,s;Object.defineProperty(t,"__esModule",{value:!0});t.loadProvidersSupport=t.createProvidersPermissions=t.compareCustomProviders=void 0;var f=require("../../utils"),r=require("../deferred"),h=function(n,t){return n.length===t.length&&n.every(function(n){return t.some(function(t){return n.createMapOptions===t.createMapOptions&&n.createLayersDictionary===t.createLayersDictionary})})};t.compareCustomProviders=h;e=function(n){var u=function(n,t){return n[t.alias]=t.id,n},r=n.reduce(u,{}),e=f.makeHash(n),t=n.filter(function(n){return!n.keyRequired||!!n.providerKey}),o=function(n){return n&&n.id},i=function(t){for(var i,r=0;r<n.length;++r)if(i=n[r],i.serverType===t||i.id===t||i.alias===t)return i;return null};return{getProvider:i,getAllProviders:function(){return n.slice(0)},isAvailable:function(n){var r=i(n);return r?t.some(function(n){return n.id===r.id}):!1},getUsableProviders:function(){return t.slice(0)},getProviderAPIKey:function(n){var u=r[n]||o(i(n))||"",t=e[u];return t&&t.keyRequired&&t.providerKey||""},setUnusableProvider:function(n){var i=r[n]||n;t=t.filter(function(n){return n.id!==i})},getRouteProviders:function(){return t.filter(function(n){return n.canDrawRoute})}}};t.createProvidersPermissions=e;o=function(){return[{id:"googlev3",name:"googlev3",serverType:"GoogleMaps",alias:"google",providerKey:"",keyRequired:!0,canDrawRoute:!0,isCustom:!1},{id:"here",name:"here",alias:"here",serverType:"Here",providerKey:"",keyRequired:!0,canDrawRoute:!0,isCustom:!1},{id:"osm",name:"osm",alias:"openLayers",serverType:"MapBox",providerKey:"",keyRequired:!0,canDrawRoute:!0,isCustom:!1},{id:"geo",alias:"geo",serverType:"Geo",providerKey:"",keyRequired:!0,canDrawRoute:!1,isCustom:!0,name:"Geo",init:function(n,t,r){return t?i(i({},r),{createMapOptions:JSON.stringify({units:"meters",projection:"EPSG:3857"}),createLayersDictionary:JSON.stringify([{name:"Geotab",type:"osm",urls:["https://"+location.host+'/apiv1/GetMapTile?credentials={"userName":"'+t.userName+'","sessionId":"'+t.sessionId+'","database":"'+t.database+'"}&x={x}&y={y}&z={z}&mapKey="'+n+'"']}])}):r}}]};s=function(n,t){return n.call("GetMapKey",{provider:t.serverType}).then(function(r){var u=i(i({},t),{providerKey:r||""});return u.init!==undefined?u.init(r||"",n.getCredentials(),u):u})};t.loadProvidersSupport=c})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/mapProvidersSupport"),geotab.commonjs.generateExport("geotab/checkmate/ui/mapProvidersSupport"));
(function(n,require,t){"use strict";var e=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),i,u,f;Object.defineProperty(t,"__esModule",{value:!0});t.UserActivityTracker=t.ActivityTracker=t.ArtificialEventTarget=void 0;var o=require("./storage/html5Storage"),s=require("./eventHandler"),r=require("../utils"),h=function(){function n(){this.handlers=[]}return n.prototype.addEventListener=function(n,t,i){this.handlers.push({event:n,func:t,flag:i})},n.prototype.removeEventListener=function(n,t,i){this.handlers=this.handlers.filter(function(r){var u=r.event,f=r.func,e=r.flag;return u!==n||f!==t||e!==i})},n.prototype.dispatchEvent=function(n){var t=this;return n&&this.handlers.forEach(function(i){var r=i.event,u=i.func;n.type===r&&u.call(t,n)}),!n},n}();t.ArtificialEventTarget=h;i=function(){function n(n,t,i){var r=this;i===void 0&&(i=function(){return!0});this.source=n;this.eventsToBeTracked=t;this.eventsFilter=i;this.listeners=[];this.isStarted=!1;this.active=function(n){r.eventsFilter(n)&&r.listeners.forEach(function(t){t(n)})}}return n.prototype.listen=function(n){return this.listeners.push(n),this},n.prototype.unlisten=function(n){return this.listeners=this.listeners.filter(function(t){return t!==n}),this},n.prototype.start=function(){var n=this;return this.isStarted||(this.isStarted=!0,this.eventsToBeTracked.forEach(function(t){n.source.addEventListener(t,n.active,!1)})),this},n.prototype.stop=function(){var n=this;return this.isStarted=!1,this.eventsToBeTracked.forEach(function(t){n.source.removeEventListener(t,n.active,!1)}),this},n}();t.ActivityTracker=i;u=function(){function n(){this.trackers=[];this.actions=[];this.started=!1}return n.prototype.add=function(n){this.trackers.push(n);this.actions&&this.started&&this.actions.forEach(function(t){n.listen(t)})},n.prototype.remove=function(n){this.trackers=this.trackers.filter(function(t){return t!==n});this.actions&&this.actions.forEach(function(t){n.unlisten(t)})},n.prototype.listen=function(n){return this.actions.push(n),this.trackers.forEach(function(t){t.listen(n)}),this},n.prototype.unlisten=function(n){return this.actions=this.actions.filter(function(t){return t!==n}),this.trackers.forEach(function(t){t.unlisten(n)}),this},n.prototype.start=function(){var n=this;return this.started=!0,this.trackers.forEach(function(t){n.actions.forEach(function(n){t.listen(n)})}),this},n.prototype.stop=function(){var n=this;return this.started=!1,this.trackers.forEach(function(t){n.actions.forEach(function(n){t.unlisten(n)})}),this},n}();f=function(n){function t(t,r){var f=n.call(this)||this;return f.period=0,f.isTracking=!1,f.isPaused=!1,f.lastActivityTimespan=Date.now(),f.storageKey="tabIsAlive_checkAvaliability",f.fireInactive=function(){f.clearStorage();f.fire("inactive",undefined)},f.restart=function(){f.stopTimer();f.lastActivityTimespan=Date.now();f.period&&f.isTracking&&!f.isPaused&&(f.timer=setTimeout(f.fireInactive,f.period))},f.updateStorage=function(){f.storage.setItem(f.storageKey,"tabIsAlive_"+Math.random(),!0)},f.storageUpdateListener=function(n){if(n.key)switch(n.key){case f.storageKey:f.restart()}else f.restart()},f.period=f.toMs(r),f.storage=o.Html5Storage(),f.activityTracker=new i(t,["mousemove","touchmove","pointermove","keydown","wheel","resize","click"]).listen(f.updateStorageListener()).listen(f.moveListener()),f.anotherTabActivityTraker=new i(t,["storage"]).listen(f.storageUpdateListener),f.thirdPartyFrames=(new u).listen(f.updateStorageListener()).listen(f.moveListener()),f}return e(t,n),t.prototype.stopTimer=function(){this.timer&&clearTimeout(this.timer)},t.prototype.toMs=function(n){return n?n*6e4:0},t.prototype.clearStorage=function(){this.storage.hasItem(this.storageKey)&&this.storage.removeItem(this.storageKey)},t.prototype.updateStorageListener=function(){return r.throttle(this.updateStorage,1e3)},t.prototype.moveListener=function(){return r.throttle(this.restart,300)},Object.defineProperty(t.prototype,"lastActivity",{get:function(){return this.lastActivityTimespan},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeout",{get:function(){return this.period||0},enumerable:!1,configurable:!0}),t.prototype.addActivityTracker=function(n){return this.thirdPartyFrames.add(n),this},t.prototype.removeActivityTracker=function(n){return this.thirdPartyFrames.remove(n),this},Object.defineProperty(t.prototype,"paused",{get:function(){return this.isPaused},set:function(n){this.isPaused!==n&&(this.isPaused=n,this.isPaused?this.stopTimer():this.restart())},enumerable:!1,configurable:!0}),t.prototype.isRunning=function(){return this.isTracking},t.prototype.start=function(n){var t=this.toMs(n)||this.period;return this.period!==t&&(this.stop(),this.period=t),this.period&&!this.isTracking&&(this.isTracking=!0,this.restart(),this.activityTracker.start(),this.anotherTabActivityTraker.start(),this.thirdPartyFrames.start(),this.fire("started",this.period)),this},t.prototype.stop=function(){var n=this.isTracking;return this.stopTimer(),this.isTracking=!1,this.activityTracker.stop(),this.anotherTabActivityTraker.stop(),this.thirdPartyFrames.stop(),this.clearStorage(),n&&this.fire("stopped",undefined),this},t}(s.SimpleEventHandler);t.UserActivityTracker=f})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/userActivityTracker"),geotab.commonjs.generateExport("geotab/checkmate/userActivityTracker"));
(function(n,require,t){"use strict";function r(n){var t=i[n.toLowerCase()];return t?t:undefined}Object.defineProperty(t,"__esModule",{value:!0});var i={device:"devices",tripshistory:"map",worktime:"workTimes",workholiday:"workHolidays",hoslog:"hosLogs",enginediagnostic:"engineDiagnostics",dvir:"dvirs",defectlist:"defectLists",trailer:"trailers",zone:"zones",zonetype:"zoneTypes",route:"routes",gpstextmessagesend:"gpsTextMessages",rule:"rules",notificationtemplateemail:"notificationTemplates",notificationtemplatewebrequest:"notificationTemplates",notificationtemplatetext:"notificationTemplates",distributionlist:"distributionLists",group:"groupsTree",customreport:"customReports",user:"users",clearance:"clearances",engineController:"engineControllers",fuelevent:"fuelEvents",notification:"notifications",enginetype:"engineTypes",supportticket:"supportTickets",trainingticket:"trainingTickets",customunitprofile:"options",exception:"exceptions"};t.default=r})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/relatedPagesList"),geotab.commonjs.generateExport("geotab/checkmate/relatedPagesList"));
(function(n,require,t){"use strict";var u=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),i,r;Object.defineProperty(t,"__esModule",{value:!0});t.SessionRestorer=void 0;i=require("./eventHandler");r=function(n){function t(t){var i=n.call(this)||this;return i.tracker=t,i.timerId=undefined,i.minTimeout=1e4,i.maxTimeout=3e4,i.started=!1,t.isRunning()&&i.start(t.timeout),t.attach("started",function(n){i.start(n)}),t.attach("stopped",function(){i.stop()}),i}return u(t,n),t.prototype.postponeFireRestore=function(){var n=this;setTimeout(function(){n.fire("restore",undefined)},1)},t.prototype.fireRestore=function(){var n=this;this.lastActivityNotification<this.tracker.lastActivity&&(this.lastActivityNotification=Date.now(),this.fire("restore",undefined));this.timerId=setTimeout(function(){n.fireRestore()},this.getNewPeriod())},t.prototype.getNewPeriod=function(){var t=Date.now()-this.lastActivityNotification,n=this.timeout-t;return n>this.minTimeout?Math.min(n/2,this.maxTimeout):500},t.prototype.start=function(n){this.timeout=n;this.started||(this.started=!0,this.postponeFireRestore(),this.lastActivityNotification=Date.now(),this.fireRestore())},t.prototype.stop=function(){var n=this.started;this.started=!1;clearTimeout(this.timerId);this.timerId=undefined;n&&this.postponeFireRestore()},t.prototype.isStarted=function(){return this.started},t}(i.SimpleEventHandler);t.SessionRestorer=r})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/sessionRestorer"),geotab.commonjs.generateExport("geotab/checkmate/sessionRestorer"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.template=void 0;t.template='<div class="resetPasswordDialog">\n    <div class="lineWaiting" id="resetPasswordDialog_waiting">\n        <div class="bg"><\/div>\n    <\/div>\n    <div class="checkmateField alert alert--error" id="resetPasswordDialog_warning" style="display: none"><\/div>\n    <div class="checkmateFormPage">\n        <fieldset>\n            <div class="checkmateField">\n                <label class="label" for="resetPasswordDialog_userName">Current user:<\/label>\n                <input id="resetPasswordDialog_userName" title="Your current user name" type="text" class="geo-text-input" disabled="disabled">\n            <\/div>\n            <div class="checkmateField">\n                <label class="label" for="resetPasswordDialog_newPassword">New password:<\/label>\n                <div class="addToolTipHelp" title="Your new password.">\n                    <input id="resetPasswordDialog_newPassword" title="Your new password." type="password" class="geo-text-input">\n                <\/div>\n            <\/div>\n            <div class="checkmateField">\n                <label class="label" for="resetPasswordDialog_newPasswordVerify">Retype new password:<\/label>\n                <div class="addToolTipHelp" title="Retype your new password.">\n                    <input id="resetPasswordDialog_newPasswordVerify" title="Retype your new password." type="password" class="geo-text-input">\n                <\/div>\n            <\/div>\n        <\/fieldset>\n    <\/div>\n    <div class="resetPasswordDialog_warnings" style="display: none">\n        <span data-warning="passwordExpiry">Your current password has expired and must be reset.<\/span>\n        <span data-warning="passwordMatch">Passwords must match.<\/span>\n        <span data-warning="passwordEmpty">Password cannot be empty.<\/span>\n        <span data-warning="passwordReuse">Your new password cannot be the same as the old password. Please try another password.<\/span>\n    <\/div>\n<\/div>'})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/resetPasswordDialog/resetPasswordDialog_html"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/resetPasswordDialog/resetPasswordDialog_html"));
(function(n,require,t){"use strict";var u=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});t.ResetPasswordDialog=void 0;var i=require("../../../../vanillaExtension/vanilla"),f=require("../../../../vanillaExtension/vanillaDialog"),e=require("../../../eventHandler"),r=require("../../modules/passwordField/passwordField"),o=require("./resetPasswordDialog_html"),s=function(n){function t(t,u){var e=n.call(this)||this,s,h;return e.warningTexts={},e.disabled=!1,e.collectTranslations=function(n){var i=n.getElementsByClassName("resetPasswordDialog_warnings")[0],r,t,u;if(i&&i.children.length>0)for(r=i.children,t=r.length-1;t>=0;--t)u=r[t],e.warningTexts[u.getAttribute("data-warning")||""]=u.textContent||"";return n},s=i.textToHTML(o.template)[0],e.userNameField=s.querySelector("#resetPasswordDialog_userName"),e.newPassField=s.querySelector("#resetPasswordDialog_newPassword"),e.newPassVerifyField=s.querySelector("#resetPasswordDialog_newPasswordVerify"),e.warningField=s.querySelector("#resetPasswordDialog_warning"),e.waitingElt=s.querySelector("#resetPasswordDialog_waiting"),h={showPassword:t.translateKey("Show password"),hidePassword:t.translateKey("Hide password")},new r.PasswordField(e.newPassField,h),new r.PasswordField(e.newPassVerifyField,h),e.dialog=e.translate(s,t).then(e.collectTranslations).then(function(n){return f.VanillaDialog(n,{isModal:!0,addCloseButton:!1,parentNode:u,title:t.translateKey("ChangePassword"),buttons:[{id:"resetPasswordDialog_save",name:t.translateKey("save"),click:function(n,t,i){e.saveClicked(i)}}]})}).then(function(n){return e.newPassVerifyField.addEventListener("keyup",function(t){t.keyCode!==13||e.disabled?i.toggleClasses(e.newPassVerifyField,"passwordMismatch",e.localValidate()!==""):e.saveClicked(n)},!1),n}),e}return u(t,n),t.prototype.translate=function(n,t){return t.translateHtml(n).then(function(){return n},function(){return n})},t.prototype.showWarning=function(n){n?(this.warningField.style.display="block",this.warningField.textContent=this.warningTexts[n]||n):this.warningField.style.display="none"},t.prototype.toggleWaiting=function(n){this.waitingElt.style.display=n?"block":"none"},t.prototype.localValidate=function(){var n=this.newPassField.value,t=this.newPassVerifyField.value;return n.length===0?"passwordEmpty":n!==t?"passwordMatch":""},t.prototype.saveClicked=function(n){var t=this.localValidate();t?this.showWarning(t):(this.disabled=!0,n.buttons[0].disable(),this.toggleWaiting(!0),this.fire("apply",{password:this.newPassField.value}))},Object.defineProperty(t.prototype,"passwordField",{get:function(){return this.newPassField},enumerable:!1,configurable:!0}),t.prototype.warn=function(n){return this.disabled=!1,this.showWarning(n),this.toggleWaiting(!1),this.dialog.then(function(n){n.buttons[0].enable()})},t.prototype.ask=function(n){return this.disabled=!1,this.userNameField.value=n,this.dialog.then(function(n){n.buttons[0].enable();n.show()})},t.prototype.close=function(){var n=this;return this.disabled=!0,this.toggleWaiting(!1),this.dialog.then(function(t){t.close();t.buttons[0].enable();n.disabled=!0;n.newPassField.value="";n.newPassVerifyField.value=""})},t}(e.SimpleEventHandler);t.ResetPasswordDialog=s})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/resetPasswordDialog/resetPasswordDialog"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/resetPasswordDialog/resetPasswordDialog"));
(function(n,require,t){"use strict";function i(n,t){return'<div id="passwordCheckList" class="passwordCheckList">\n                <span>'+t("PasswordMust")+"<\/span>\n                <ul>"+n.map(r).join("")+'<\/ul>\n                <button class="passwordCloseButton" tabindex="-1" title='+t("Close")+" aria-label="+t("Close")+'>\n                    <svg focusable="false" class="svgIcon"><use xlink:href="#geo-close-cross"><\/use><\/svg>\n                <\/button>\n            <\/div>'}function r(n){var t=n.id,i=n.name;return'<li id="passwordStrength_'+t+'" data-policy="'+t+'" class="checklistPositive passwordPolicyRule">\n                <svg focusable="false" class="svgIcon geotabButtonIcons">\n                    <use xlink:href="#geo-check" class="checkPassed"><\/use>\n                    <use xlink:href="#geo-close-cross" class="checkFailed"><\/use>\n                <\/svg>\n                <span class="policyText">'+i+"<\/span>\n            <\/li>"}Object.defineProperty(t,"__esModule",{value:!0});t.checkListRules=void 0;t.checkListRules=i})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/passwordStrengthPopup/passwordStrengthPopup_html"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/passwordStrengthPopup/passwordStrengthPopup_html"));
(function(n,require,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});t.PasswordStrengthPopup=void 0;var i=require("../../../../vanillaExtension/vanilla"),u=require("./passwordStrengthPopup_html"),f=[{id:"lengthItem",name:"BeAtLeastCharacters"},{id:"isLowerCase",name:"HaveLowerCaseLetter"},{id:"isUpperCase",name:"HaveUpperCaseLetter"},{id:"isNumeric",name:"HaveNumber"},{id:"isNonAlphanumeric",name:"HaveSpecialSymbol"},{id:"isCommonPassword",name:"NotPopularPasswordsMember"},{id:"isNotUserName",name:"NotUserName"}],e=function(){function n(n,t,e){var c=this,o,s,h;this.eltToBlame=n;this.parentContainer=t;this.shown=!1;o=f.map(function(n){return r(r({},n),{name:e(n.name)})});this.minLengthLabel=e("BeAtLeastCharacters");s=u.checkListRules(o,e);this.popup=i.textToHTML(s)[0];h=this.popup.querySelector(".passwordCloseButton");h.addEventListener("click",function(){c.hide()},!1)}return n.prototype.setChecklistPositioning=function(n){var t=this.popup,e=t.parentNode===document.body;i.css(t,{opacity:"0",top:"0px",left:"0px"});var v=t.getBoundingClientRect(),f=n.parentNode||n,o=f.getBoundingClientRect(),r=v.width,y=v.height,p=window.getComputedStyle(t,":after").borderTopWidth,s=p?parseInt(p.replace("px",""))*1.5:0,h=document.body.clientWidth,w=document.getElementById("checkmateContent"),b=document.getElementById("menuId"),k=w&&w.querySelector(".checkmateFormPage fieldset"),nt=h-(b?b.clientWidth:0)-(k?k.clientWidth:0),a=o.width,d=e?o.top+window.pageYOffset:f.offsetTop,c=e?f.offsetParent&&r>=f.offsetParent.clientWidth?0:o.left:f.offsetLeft,g=c+a,l=nt>=r+s&&h-g>=r+s,u=function(n){return(n<0?0:n)+"px"},tt=function(){return a>=r||e?e&&h-c<r?u(h-r):u(c):u(c-(r-a))};i.toggleClasses(t,"bottom",!l);i.toggleClasses(t,"left",l);i.css(t,{opacity:"",top:l?u(d-y/2+o.height/2):u(d-y-s),left:l?u(g+s):tt()})},n.prototype.togglePolicy=function(n,t){var i=this.popup.querySelector("#passwordStrength_"+n);i.style.display=t?"block":"none"},n.prototype.applyResults=function(n){Array.prototype.forEach.call(this.popup.getElementsByClassName("passwordPolicyRule"),function(t){var r=t.getAttribute("data-policy")||"";i.toggleClasses(t,"checklistPositive",n[r]);i.toggleClasses(t,"checklistNegative",!n[r])})},n.prototype.updatePolicy=function(n){this.togglePolicy("isLowerCase",n.isLowerCaseRequired);this.togglePolicy("isUpperCase",n.isUpperCaseRequired);this.togglePolicy("isNumeric",n.isNumericRequired);this.togglePolicy("isNonAlphanumeric",n.isNonAlphanumericRequired);var t=this.popup.querySelector("#passwordStrength_lengthItem .policyText");t.textContent=this.minLengthLabel.replace("{0}",n.minimumLength.toString())},n.prototype.isShown=function(){return this.shown},n.prototype.show=function(n){n.accepted?this.hide():(this.popup.parentNode||this.parentContainer.appendChild(this.popup),this.shown=!0,this.applyResults(n),this.setChecklistPositioning(this.eltToBlame))},n.prototype.hide=function(){this.popup.parentNode&&this.parentContainer.removeChild(this.popup);this.shown=!1},n.prototype.resize=function(){this.isShown()&&this.setChecklistPositioning(this.eltToBlame)},n}();t.PasswordStrengthPopup=e})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/passwordStrengthPopup/passwordStrengthPopup"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/passwordStrengthPopup/passwordStrengthPopup"));
(function(n,require,t){"use strict";var i=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});t.ChangePasswordDialog=void 0;var r=require("../resetPasswordDialog/resetPasswordDialog"),u=require("../../../deferred"),f=require("../passwordStrengthPopup/passwordStrengthPopup"),e=require("../../../eventHandler"),o=require("../../../../utils"),s=function(t){function e(n,i,u,e,s){var h=t.call(this)||this,c;return h.userName=i,h.currPolicy={minimumLength:8,isLowerCaseRequired:!1,isUpperCaseRequired:!1,isNumericRequired:!1,isNonAlphanumericRequired:!1},h.policyViolationException="PasswordPolicyViolationException",h.isStarted=!1,h.wasPopupShown=!1,h.resizer=o.throttle(function(){h.passwordStrengthPopup.resize()},200),h.userNames=[i,u,e],h.resetPasswordDialog=new r.ResetPasswordDialog(n,document.body),c=h.resetPasswordDialog.passwordField,h.passwordStrengthPopup=new f.PasswordStrengthPopup(c,document.body,n.translateKey),c.addEventListener("blur",function(){var n=c.value;h.getPasswordCalculator().then(function(t){h.passwordStrengthPopup.show(t(n))})},!1),c.addEventListener("keyup",function(){if(h.passwordStrengthPopup.isShown()||h.wasPopupShown){h.wasPopupShown=!0;var n=c.value;h.getPasswordCalculator().then(function(t){h.passwordStrengthPopup.show(t(n))})}},!1),s.addEventListener("resize",h.resizer,!1),h}return i(e,t),e.prototype.getPasswordCalculatorConstructor=function(){if(!this.passwordCalculatorConstructor){var t=u.Deferred();n.lazyRequire(["geotab.checkmate.ui.passwordTools.passwordStrengthCalculator"],function(){t.resolve(n.commonjs.requireRef("geotab.checkmate.ui.passwordTools.passwordStrengthCalculator").strengthCalculator)});this.passwordCalculatorConstructor=t.promise()}return this.passwordCalculatorConstructor},e.prototype.getNewPasswordCalculator=function(n){var t=this;return this.getPasswordCalculatorConstructor().then(function(i){return i(n,t.userNames)})},e.prototype.getPasswordCalculator=function(){return this.passwordCalculator?this.passwordCalculator:(this.passwordCalculator=this.getNewPasswordCalculator(this.currPolicy),this.passwordCalculator)},Object.defineProperty(e.prototype,"policy",{get:function(){return this.currPolicy},set:function(n){this.currPolicy=n;this.passwordCalculator&&(this.passwordCalculator=this.getNewPasswordCalculator(this.currPolicy));this.passwordStrengthPopup.updatePolicy(this.currPolicy)},enumerable:!1,configurable:!0}),e.prototype.warn=function(n){var t=this;n===this.policyViolationException?this.getPasswordCalculator().then(function(n){t.passwordStrengthPopup.show(n(t.resetPasswordDialog.passwordField.value))}):this.resetPasswordDialog.warn(n)},e.prototype.start=function(n){var t=this,i;this.isStarted||(this.isStarted=!0,i=this.resetPasswordDialog.ask(this.userName),n&&i.then(function(){t.resetPasswordDialog.warn(n)}),this.resetPasswordDialog.attach("apply",function(i){var r=i.password;t.getPasswordCalculator().then(function(i){var u=i(r);u.accepted?t.fire("apply",{password:r}):(t.passwordStrengthPopup.show(u),t.resetPasswordDialog.warn(n||""))})}))},e.prototype.close=function(){this.isStarted=!1;this.wasPopupShown=!1;this.resetPasswordDialog.close();this.passwordStrengthPopup.hide();this.resetPasswordDialog.detach("apply")},e}(e.SimpleEventHandler);t.ChangePasswordDialog=s})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/changePasswordDialogWithValidation/changePasswordDialog"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/changePasswordDialogWithValidation/changePasswordDialog"));
(function(n,require,t){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});t.PasswordChangeTokenReceiver=void 0;var r=require("./ui/modules/changePasswordDialogWithValidation/changePasswordDialog"),u=require("./exceptions/commonExceptions"),f=require("./apiTransport"),e=function(){function n(n){var t=this;this.context=n;this.validErrors=[{is:function(n){return!!n.data&&n.data.type==="PasswordPolicyViolationException"},message:function(){return"PasswordPolicyViolationException"}},{is:function(n){return n.message.indexOf(" reuse ")>-1},message:function(){return"passwordReuse"}}];this.validErrorsIter=function(n){return function(t,i){return t||(i.is(n)?i.message(n):"")}};this.systemSettingsListenerConstructor=function(n){return function(){t.callWithOldToken(t.context.connection.url,"Get",{typeName:"SystemSettings",credentials:i({},n)}).then(function(n){if(n&&n.length){var i=t.getDialog();i.policy=n[0].passwordPolicy}})}}}return n.prototype.stripToken=function(n){return{database:n.database,sessionId:n.sessionId,userName:n.userName}},n.prototype.isLoginError=function(n){var t="InvalidUserException";return n&&(n.name===t||(n.errors||[]).some(function(n){return n.name===t}))},n.prototype.callWithOldToken=function(n,t,r){return f.apiTransport(t,i({},r),n,"passwordUpdate")},n.prototype.setNewPassword=function(n,t,r,u){return this.callWithOldToken(n,"Set",{typeName:"User",entity:{id:t.id,isDriver:t.isDriver,password:r,changePassword:!1},credentials:i({},u)})},n.prototype.getDialog=function(){if(!this.dialog){var n=this.currUser;this.dialog=new r.ChangePasswordDialog(this.context.localizer,n.name,n.firstName,n.secondName,window);this.dialog.policy=this.context.systemSettings.passwordPolicy}return this.dialog},n.prototype.listenToChanges=function(n){(this.systemSettingsListener=this.systemSettingsListenerConstructor(n),this.context.systemSettingsWatcher)&&this.context.systemSettingsWatcher.attach("SystemSettingsUpdated",this.systemSettingsListener)},n.prototype.stopListenToChanges=function(){this.context.systemSettingsWatcher&&this.context.systemSettingsWatcher.detach("SystemSettingsUpdated",this.systemSettingsListener)},n.prototype.beginGetCredentials=function(n,t,i,r){var f=this,e,o;this.currUser=this.context.currentUser;e=this.getDialog();o=this.stripToken(n);this.listenToChanges(o);e.detach("apply");e.attach("apply",function(t){var s=t.password;f.setNewPassword(f.context.connection.url,f.currUser,s,o).then(function(){return f.callWithOldToken(f.context.connection.url,"Authenticate",{database:n.database,userName:n.userName,password:s})}).then(function(n){n?(e.close(),f.stopListenToChanges(),i(n)):r(new Error("Couldn't authenticate"))}).catch(function(n){var t=n||new Error("Couldn't reset password. Please contact your administrator."),i=f.validErrors.reduce(f.validErrorsIter(t),"");i?e.warn(i):f.isLoginError(t)?(e.close(),r(new u.AuthenticationError(t.message||"Token is expired"))):(e.warn(t.message),r(t))})}).start(t==="passwordExpiry"?t:"")},n}();t.PasswordChangeTokenReceiver=e})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/passwordChangeTokenReceiver"),geotab.commonjs.generateExport("geotab/checkmate/passwordChangeTokenReceiver"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.isSameAddinFn=void 0;var i=function(n){return n.id?function(t){return n.id===t.id}:n.url?function(t){return n.url===t.url}:n.name?function(t){return n.name===t.name}:function(){return!1}};t.isSameAddinFn=i})(geotab,geotab.commonjs.generateRequire("geotab/services/addinsListWarcher/compareAddins"),geotab.commonjs.generateExport("geotab/services/addinsListWarcher/compareAddins"));
(function(n,require,t){"use strict";var r=this&&this.__spreadArray||function(n,t){for(var i=0,u=t.length,r=n.length;i<u;i++,r++)n[r]=t[i];return n},f;Object.defineProperty(t,"__esModule",{value:!0});t.EmptyAddinsStorage=t.AddinsStorage=void 0;var u=require("../../services/addinsListWarcher/compareAddins"),i=require("../deferred"),e=function(){function n(n,t,r){this.addins=n;this.resolver=t;this.hasAccessToAddin=r;this.removed=i.resolve([])}return n.prototype.mergeAddins=function(n,t){return i.together([n,t]).then(function(n){var t=n[0],i=n[1],f=i.filter(function(n){return!t.some(u.isSameAddinFn(n))});return r(r([],t.map(function(n){var t=i.filter(u.isSameAddinFn(n));return t.length>0?t[0]:n})),f)}).catch(function(){return n})},n.prototype.add=function(n){this.addins=this.mergeAddins(this.addins,this.resolver.resolve(n))},n.prototype.remove=function(n){this.removed=this.mergeAddins(this.removed,this.resolver.resolve(n));this.addins=this.addins.then(function(t){return i.together(n.map(function(n){return JSON.parse(n)})).then(function(n){return t.filter(function(t){return n.some(u.isSameAddinFn(t))})}).catch(function(){return t})})},n.prototype.list=function(n,t){var i=this,u=t?this.addins:this.removed;return u.then(function(n){return n.filter(i.hasAccessToAddin)}).then(function(n){return n.reduce(function(n,t){return r(r([],n),t.items)},[])}).then(function(t){return t.filter(function(t){return n.indexOf(t.type)>=0})})},n.prototype.listAddins=function(n){return n?this.addins:this.removed},n}();t.AddinsStorage=e;f=function(){function n(){}return n.prototype.add=function(){},n.prototype.remove=function(){},n.prototype.list=function(){return i.resolve([])},n.prototype.listAddins=function(){return i.resolve([])},n}();t.EmptyAddinsStorage=f})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/addinsTools/addinsStorage"),geotab.commonjs.generateExport("geotab/checkmate/addinsTools/addinsStorage"));
(function(n,require,t){"use strict";function s(n,t){var b=t&&t.timeBeforeSpinner||100,h={container:n,insertWaitingToContainer:t&&t.insertWaitingToContainer,zIndex:t&&t.zIndex,transparentBackground:t===null||t===void 0?void 0:t.transparentBackground},a=h.insertWaitingToContainer?h.container:document.body,s,c=function(){var n,t=!1,r=!1;return{start:function(u){var f={};n||(n=i.createPureIcon("spinner","waitingElement"));s&&s.appendChild(n);u&&u<40&&(r=!0,f.backgroundSize=u+"px");f.display="block";i.css(n,f);t=!0},stop:function(){var u={};t&&(u.display="none",r&&(u.backgroundSize="40px"),n.parentNode&&n.parentNode.removeChild(n),i.css(n,u),t=!1)},isActive:function(){return t}}}(),l=[],k=function(n,t,r){n&&r&&(t?i.addClasses(n,r):i.removeClasses(n,r))},d={display:"none",border:"none",zIndex:h.zIndex||""},v=function(){return c.isActive()},g,y=function(n){return(clearTimeout(g),!v())?!1:n===!0?(w(),!0):(g=setTimeout(function(){v()&&w()},200),!0)},tt=function(n){var i=document.defaultView&&document.defaultView.getComputedStyle(n),r=function(n,t,i){return t.currentStyle?t.currentStyle[i]:n.getPropertyValue(i)},t=function(n,t){return parseInt(r(i,n,t),10)||0};return{left:t(n,"margin-left"),top:t(n,"margin-top"),right:t(n,"margin-right"),bottom:t(n,"margin-bottom")}},it={left:0,top:0,right:0,bottom:0},w=function(){var l=c.isActive(),r=0,u=0,v=!1,f=a===h.container,o;if(s)if(h.container&&h.container.parentNode&&h.container.style.display!=="none"){var n=h.container.getBoundingClientRect(),t=f?it:tt(h.container),e=f?0:n.top-t.top,y=f?0:n.left-t.left;l&&c.stop();o=document.body.offsetHeight;r=(n.height+e>o?o-e:n.height)+t.top+t.bottom;u=n.width+t.left+t.right;i.css(s,{top:Math.floor(e+window.pageYOffset)+"px",left:Math.floor(y)+"px",width:Math.floor(Math.max(u,0))+"px",height:Math.floor(Math.max(r,0))+"px"});l&&c.start(Math.min(n.height,n.width));v=!0}else c.stop(),s.style.display="none";return{isVisible:v,width:u,height:r}},rt=function(){for(var i=document.getElementsByClassName("lockAreaThrobber"),t,n=0;n<i.length;n++)if(t=i[n],t.style.display==="none")return t;return null},ut=function(){s=rt();s||(s=i.create("div",{"class":"lockAreaThrobber"}));window.addEventListener("resize",y,!1);d&&i.css(s,d)},ft=function(){var n;s||ut();h.container&&!v()&&(n=w());s&&(h.transparentBackground&&k(s,h.transparentBackground,f),n.isVisible&&(s.style.display="block",c.start(Math.min(n.height,n.width))),s.parentNode&&s.parentNode===a||a&&a.appendChild(s),l&&s.setAttribute("data-tasts",l.map(function(n){return e.htmlEscape(n.getName()||"")}).join(", ")))},et=function(){s&&(k(s,!1,f),window.removeEventListener("resize",y,!1),c.stop(),s.style.display="none",s=null)},ot=function(){window.removeEventListener("resize",y,!1);c.stop();s&&s.parentNode&&s.parentNode.removeChild(s);s=null},nt,p=0,st=function(){return v()||p>0},ht=function(){p++==0&&(nt=setTimeout(function(){ft()},b))},ct=function(){--p<=0&&(clearTimeout(nt),et(),p=0)},lt=function(n){return function(){l=l.filter(function(t){return t!==n});st()&&l.length===0&&ct()}};return{destroy:ot,resize:y,displayProgress:function(n){var t=n;t&&(u.isTask(t)||u.isTaskPromise(t)||!o.isPromiseLike(t)||(t=u.toTask(t)),u.isTask(t)&&(l.push(t),l.length===1&&ht(),t.always(lt(t))))},setOptions:function(n){h=r(r({},h),n);h.timeBeforeSpinner&&(b=h.timeBeforeSpinner||(h.container?100:1e3))}}}var r=this&&this.__assign||function(){return r=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var e=require("../../utils"),u=require("../task"),o=require("../deferred"),i=require("../../vanillaExtension/vanilla"),f="lockAreaThrobber--transparent";t.default=s})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/waiting"),geotab.commonjs.generateExport("geotab/checkmate/ui/waiting"));
(function(n,require,t){"use strict";var f,e;Object.defineProperty(t,"__esModule",{value:!0});t.getLanguageName=t.setDefaultLanguage=t.getDefaultLanguage=void 0;var i=require("../checkmate/storage/html5Storage"),r={en:"English",fr:"French",es:"Spanish",ja:"Japanese",de:"German",pl:"Polish","pt-BR":"Brazilian-Portuguese",nl:"Dutch",it:"Italian","zh-Hans":"Chinese",th:"Thai",id:"Indonesian",cs:"Czech",sv:"Svenska"},u="geotabDefaultLanguage",o=function(){var t=i.Html5Storage(),n=t.getItem(u)||window.navigator.language||window.navigator.userLanguage||"en";return r.hasOwnProperty(n)?n:"en"};t.getDefaultLanguage=o;f=function(n){var t=i.Html5Storage();try{t.setItem(u,n,!0)}catch(r){console.error(r)}};t.setDefaultLanguage=f;e=function(n,t){return t(r[n]||n)};t.getLanguageName=e})(geotab,geotab.commonjs.generateRequire("geotab/utils/languageUtils"),geotab.commonjs.generateExport("geotab/utils/languageUtils"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ControlAnalytics=void 0;var i=function(){function n(n,t){this.page=n;this.analytics=t}return n.prototype.log=function(n,t){this.analytics.addInteraction(this.page,n,t)},n.prototype.bindButton=function(n){var t=this;n.addEventListener("click",function(){t.log("click",n.id)},!1)},n.prototype.bindToggleButton=function(n){var t=this;n.addEventListener("change",function(){t.log("toggle",n.id+" "+(n.checked?"on":"off"))},!1)},n.prototype.bindRadioButton=function(n){var t=this;n.addEventListener("click",function(){t.log("toggle",""+(n.value||n.id))},!1)},n.prototype.bindTabs=function(n){var t=this;n.attach("onAfterChange",function(i){var u=i.current,r=n.getIdByIndex(u);r&&t.log("change tab",r)})},n.prototype.bindToolbarButton=function(n){var t=this;n.click(function(){var r,i=n.elem,u;if(Array.isArray(i)){for(u=0;i.length;u++)if(i[u].id){r=i[u].id;break}}else r=i.id;r&&t.log(r,"")})},n.prototype.report=function(n,t){t===void 0&&(t="");this.log(n,t)},n}();t.ControlAnalytics=i})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/auditTools/controlAnalytics"),geotab.commonjs.generateExport("geotab/checkmate/ui/auditTools/controlAnalytics"));
(function(n,require,t){"use strict";function h(t,r){if(n.TEST_MODE)return e.resolve(undefined);f(window)("js",new Date);f(window)("config",t,{send_page_view:!1,custom_map:r});var s=e.Deferred(),u=o.create("SCRIPT");return u.async=!1,u.src="https://www.googletagmanager.com/gtag/js?id="+t+"&l="+i,u.type="text/javascript",u.addEventListener("error",s.reject,!1),u.addEventListener("load",function(){return s.resolve()},!1),document.head.appendChild(u),s.promise()}function f(n){return r(n)}function c(n){n[i]&&delete n[i];var t=function(){};r=function(){return t}}function l(n){n[i]&&delete n[i];r=u()}var u,r;Object.defineProperty(t,"__esModule",{value:!0});t.clearGtagForTests=t.clearGtag=t.getGtag=t.injectGtag=void 0;var e=require("../../deferred"),o=require("../../../vanillaExtension/vanilla"),s=require("../../../utils"),i="dataLayer";t.injectGtag=h;u=function(){return s.memOnce(function(n){n[i]=n[i]||[];return function(){n[i]&&n[i].push(arguments)}})};r=u();t.getGtag=f;t.clearGtag=c;t.clearGtagForTests=l})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/auditTools/gtag"),geotab.commonjs.generateExport("geotab/checkmate/ui/auditTools/gtag"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.createGoogleAnalytics=void 0;var i=require("./gtag"),r="UA-40679036-1",u=function(){function n(n,t){this.win=n;this.customGetGtag=t;this.includes=["includeHistoricData","includeHistoric","entityType","templateId","showHistoric"]}return n.prototype.isPageDifferent=function(n,t){return t.groups&&(!n||t.page!==n.page)},n.prototype.isStateDifferent=function(n,t){return n&&t&&t.groups&&this.includes.some(function(i){return n.groups[i]!==t.groups[i]})},n.prototype.collect=function(n){return this.includes.reduce(function(t,i){return t+(n.groups.hasOwnProperty(i)?(t?",":"")+i+"="+n.groups[i]:"")},"")},n.prototype.geoGa=function(n,t){(this.customGetGtag||i.getGtag)(this.win)("event",n,t)},n.prototype.addPage=function(n){var t=n&&n.page||"default";this.isPageDifferent(this.oldState,n)&&(this.oldState=n,this.geoGa("page_view",{page_title:t,page_path:"/#"+t}))},n.prototype.addEvent=function(n){this.isStateDifferent(this.oldState,n)&&(this.oldState=n,this.geoGa("apply",{event_category:"options",event_label:this.collect(n)}))},n.prototype.addInteraction=function(n,t,i){this.geoGa(t,{event_category:n,event_label:i})},n.prototype.setIsReportingAllowed=function(n,t,u){var f=t||r;n?i.injectGtag(f,u||{}):i.clearGtag(this.win)},n}(),f=function(){function n(){}return n.prototype.addPage=function(){},n.prototype.addEvent=function(){},n.prototype.addInteraction=function(){},n.prototype.setIsReportingAllowed=function(){},n}(),e=function(n,t,i){return n?new f:new u(t,i)};t.createGoogleAnalytics=e})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/auditTools/googleAnalytics"),geotab.commonjs.generateExport("geotab/checkmate/ui/auditTools/googleAnalytics"));
(function(n,require,t){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i.apply(this,arguments)},u,r,f;Object.defineProperty(t,"__esModule",{value:!0});t.updateTicketsMainMenu=t.removeTicketsFromMainMenu=t.ticketPages=void 0;u=require("../../../utils");r=function(n){return[{menuName:n("Open a Geotab Support Ticket"),icon:"geo-main-menu-support",hash:"supportTickets",path:"GettingStartedLink/"},{menuName:n("Open a Geotab Training Ticket"),icon:"geo-main-menu-support",hash:"trainingTickets",path:"GettingStartedLink/"}]};t.ticketPages=["supportTickets","supportTicket","trainingTickets","trainingTicket"];f=function(n,i){n.removeItems(r(u.echo));t.ticketPages.forEach(function(n){i.removeCid(n)})};t.removeTicketsFromMainMenu=f;var e=function(n,i){return function(){return t.removeTicketsFromMainMenu(n,i),!1}},o=function(n,t){var u=r(t);return n.doesMenuItemExist("liveChat")?u.map(function(n){return i(i({},n),{path:"liveChat"})}):n.doesMenuItemExist("support")?u.map(function(n){return i(i({},n),{path:"support/"})}):u},s=function(n,i,r,u){var f=o(n,r);t.ticketPages.forEach(function(n){i.addCid(n,"")});n.addItems(f);u.attachEvent("supportTicketsDeclined",{},e(n,i))};t.updateTicketsMainMenu=s})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/tickets/updateTicketsMainMenu"),geotab.commonjs.generateExport("geotab/checkmate/ui/tickets/updateTicketsMainMenu"));
(function(n,require,t){"use strict";var i=this&&this.__spreadArray||function(n,t){for(var i=0,u=t.length,r=n.length;i<u;i++,r++)n[r]=t[i];return n};Object.defineProperty(t,"__esModule",{value:!0});t.hasDomainAccessToWhiteLabelPageFn=void 0;var r=require("../checkmate/ui/tickets/updateTicketsMainMenu"),u=require("../utils"),f={vodafoneautomotive:["marketplace"],mittaflotaconectada:["trends"],att:i(i([],r.ticketPages),["helpForum"])},e=function(n){return function(t){return n.indexOf(t)>=0}},o=function(t){return u.isWhiteLabeled(n.location.host)?e(f[t]||[]):function(){return!0}};t.hasDomainAccessToWhiteLabelPageFn=o})(geotab,geotab.commonjs.generateRequire("geotab/utils/domainSpecificUtils"),geotab.commonjs.generateExport("geotab/utils/domainSpecificUtils"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.WebSocketNotifications=void 0;var i=function(){function n(n){this.channel=n;this.topics={}}return n.prototype.handleTopic=function(n){var t=this;return function(i){t.notify(n,i)}},n.prototype.createSubscribtion=function(n,t){var i=this;return{notify:function(r){(i.topics[n]||[]).filter(function(n){return n!==t}).forEach(function(n){n(r)})},unsubscribe:function(){i.unsubscribe(n,t)}}},n.prototype.subscribe=function(n,t){var i=this.topics[n];return(i===undefined||i.length===0)&&(this.channel.subscribe(n,this.handleTopic(n)),this.topics[n]=[]),this.topics[n].push(t),this.createSubscribtion(n,t)},n.prototype.unsubscribe=function(n,t){t===undefined&&(this.topics[n]=[]);this.topics[n]=(this.topics[n]||[]).filter(function(n){return n!==t});var i=this.topics[n];(i===undefined||i.length===0)&&this.channel.unsubscribe(n)},n.prototype.notify=function(n,t){(this.topics[n]||[]).forEach(function(n){n(t)})},n}();t.WebSocketNotifications=i})(geotab,geotab.commonjs.generateRequire("geotab/services/webSocketNotifications/webSocketsNotifications"),geotab.commonjs.generateExport("geotab/services/webSocketNotifications/webSocketsNotifications"));
(function(n,require,t){"use strict";function e(n){var s=function(){return!!(n&&n.getAttribute("disabled"))},t={label:null,checker:null,enable:i.NOOP,disable:i.NOOP,click:i.NOOP,unclick:i.NOOP,change:i.NOOP,destroy:i.NOOP,isDisabled:function(){return!1}},e=[],h=[],c=function(n){for(var t=0;t<e.length;t++)if(e[t]===n){e.splice(t,1);break}},l=n&&n.getAttribute("for"),o=l&&document.getElementById(l);return{BUTTON:!0,A:!0,LABEL:!0}[n.nodeName]&&(t.label=n,t.checker=o,t.enable=function(){s()&&(u.removeClasses(n,f),n.removeAttribute("disabled"),o?o.removeAttribute("disabled"):(n.removeEventListener("click",r,!0),c(r)))},t.disable=function(){s()||(n.setAttribute("disabled","disabled"),n.tagName!=="BUTTON"&&u.addClasses(n,f),o?o.setAttribute("disabled","disabled"):n.tagName==="A"&&(n.addEventListener("click",r,!0),e.push(r)))},t.isDisabled=s,t.click=function(t){e.push(t);n.addEventListener("click",t,!1)},t.unclick=function(t){c(t);n.removeEventListener("click",t,!1)},t.change=function(n){t.checker&&(h.push(n),t.checker.addEventListener("change",n,!1))},t.destroy=function(){e.forEach(function(t){n.removeEventListener("click",t,!1)});e.length=0;h.forEach(function(t){n.removeEventListener("change",t,!1)});h.length=0}),t}Object.defineProperty(t,"__esModule",{value:!0});t.createButtonSwitcher=void 0;var u=require("./vanilla"),i=require("../utils"),r=function(n){return n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation(),!1},f="buttonDisabled geo-button--disabled";t.createButtonSwitcher=e})(geotab,geotab.commonjs.generateRequire("geotab/vanillaExtension/vanillaButtonSwitcher"),geotab.commonjs.generateExport("geotab/vanillaExtension/vanillaButtonSwitcher"));
(function(n,require,t){"use strict";function s(){return o(),{attachEvent:i.attachEvent,detachEvent:i.detachEvent}}Object.defineProperty(t,"__esModule",{value:!0});var u=require("../utils"),f=require("./eventHandler"),i=f.default(),e={orientationchange:"resize"},r=function(n){i.fireEvent(e[n.type]||n.type,window,[n])},o=u.memOnce(function(){return window.addEventListener("resize",r,!1),window.addEventListener("orientationchange",r,!1),!0});t.default=s})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/windowObserver"),geotab.commonjs.generateExport("geotab/checkmate/windowObserver"));
(function(n,require,t){"use strict";function c(n,t){var u=t,yt=document.body,pt="flex",ut=!1,wt=["toolbarSeparatedBlock","toolbar-item","geo-switch-button"],c=i.create("DIV",{"class":"geo-popup geo-popup--padding toolbar-popup"},{display:"none"}),bt={A:!0,INPUT:!0,BUTTON:!0},v={},ft=s(),et=!1,tt=function(n){return n.nodeName&&bt[n.nodeName]||n.className&&typeof n.className=="string"&&wt.some(function(t){return n.className.indexOf(t)>-1})},kt=function(n){var h=function(){var n=this;return this.buttonControl||(this.buttonControl=["hide","show","toggle","isShown","disable","enable","click","change","mouseover","mouseout","isDisabled","resize"].reduce(function(t,i){return t[i]=n.control[i]||n[i],t},{}),this.buttonControl.elem=this.elem,this.buttonControl.checker=this.checker,this.buttonControl.shownElem=this.shownElem),this.buttonControl},r=function(n){return n.shownElem||n.elem},o=function(n){return function(t){this.isItBlock||(this.shownElem||this.elem).addEventListener(n,t,!1)}},t={isInToolbar:n.parentNode===c?!1:!0,control:null,size:0,buttonsParent:undefined,resizible:n.hasAttribute("data-toolbar-resizible"),getFacade:h,resize:function(){var n=r(this);t.size=a(n)||t.size},hide:function(){i.hide(r(this));y();b()},show:function(n){var u=r(this);i.show(u);n&&i.changeDisplay(u,n);t.size=t.size||a(r(this));y();b()},isShown:function(){return r(this).style.display!=="none"},toggle:function(n,t){return n?this.show(t):this.hide()},click:o("click"),change:o("change"),mouseover:o("mouseover"),mouseout:o("mouseout"),elemId:n.id},e,s;return n.nodeName==="A"||n.nodeName==="BUTTON"||n.nodeName==="INPUT"&&n.getAttribute("type")!=="checkbox"&&n.getAttribute("type")!=="radio"?t.elem=n:u&&n.nodeName==="INPUT"&&n.id?(e=u.querySelector("label[for='"+n.id+"']"),t.elem=[n,e],t.checker=n,t.shownElem=e):i.hasClass(n,"geo-switch-button")?(e=n.querySelector(".geo-switch-button__label"),s=n.querySelector(".geo-switch-button__input"),t.elem=n,t.checker=s,t.shownElem=e,t.isItBlock=!0):(t.elem=n,t.isItBlock=!0),t.control=f.createButtonSwitcher(r(t)),t},dt={visibility:"hidden",display:""},gt={display:"none",visibility:"visible"},ni=function(n){for(var i=[],t=n;t&&t!==yt;)t.style.display==="none"&&i.push(t),t=t.parentNode;return i},it=function(n,t){if(n.style.display==="none"){i.css(n,dt);t();i.css(n,gt);return}t()},ot=function(n,t){var i=ni(n);i.length?i.reduce(function(n,t){return function(){it(t,n)}},t)():t()},ti=function(){var n=0;return function(t){var r=Array.isArray(t)?t[1]:t,i;return!n&&r&&(i=window.getComputedStyle(r),n=parseInt(i.marginRight||"")+parseInt(i.marginLeft||"")),n}}(),a=function(n){var t=function(n){for(var t=n;t&&t.className.indexOf("geo-page-toolbar")!==-1;){if(t.style.display==="none")return t;t=t.parentElement}return undefined},i=function(n){var i=0,r=t(n);return r?(it(r,function(){i=n.offsetWidth}),i):n.offsetWidth};return n.offsetWidth||i(n)},st=function(n){var t=0;return ot(n,function(){t=a(n)}),t},k=function(n,t){for(var e=tt(n)?[n]:n.childNodes,r,o=e.length,i,f=[],u=0;u<o;u++)r=e[u],tt(r)?(i=kt(r),i.size=a(i.shownElem||i.elem),i.buttonsParent=t?n:undefined,f.push(i)):r.childNodes.length&&(f=f.concat(k(r,!0)));return f},ii=function(){var n=window.getComputedStyle(u);return parseInt(n.paddingRight||"0")+parseInt(n.paddingLeft||"0")},ri=function(n){for(var t=0;t<e.length;t++)if(n===e[t].shownElem||n===e[t].elem)return e[t];return null},rt=function(n,t){var o=function(n){for(var i,r=0;r<e.length;r++)i=e[r],n&&n!==i.shownElem&&n!==i.elem||i.isInToolbar&&(i.size=(t?0:i.size)||a(i.shownElem||i.elem))},f="auto",r;u&&(r=n&&ri(n),r?r.isInToolbar?r.size=a(r.shownElem||r.elem):it(c,function(){if(f!==c.style.left&&(c.style.left=f,c.offsetWidth),r){var n=r.shownElem||r.elem;i.addClasses(n,"recalcSize");r.size=a(n);i.removeClasses(n,"recalcSize")}}):(w=w||st(l),ot(u,o)))},l=i.textToHTML(h(n))[0],p,w=0,e=[],ui=function(n){var t=n.shownElem||n.elem;t.style.display==="inline-block"&&(t.style.display="block")},d=function(n,t,i){if(n.length)d(n[1],t,i),d(n[0],t,n[1]);else{var r=n.parentNode?n.parentNode.removeChild(n):n;i&&i.parentNode===t?t.insertBefore(r,i):t.appendChild(r)}},ht=function(){return!e.some(function(n){return!n.isInToolbar&&n.isShown()})},fi=function(){var n=!ht(),t=l.style.display==="none";n&&t?l.style.display=pt:n||t||(l.style.display="none",p&&p.close())},y=function(){g||ei()},ei=function(){var i,t,b=e.length,s=0,h=0,r=-1,v=!1,f=function(n,t){if(d(n.elem,c,t?null:c.childNodes[0]),ui(n),n.isInToolbar=!1,n.buttonsParent&&!n.buttonsParent.children.length){var i=n.buttonsParent.parentNode;i&&i.removeChild(n.buttonsParent)}nt(n.elemId+"resize")},k=function(n){return n.isShown()?n.resizible?a(n.shownElem||n.elem):n.size+ti(n.elem):0},y,n,o;for(w=w||a(l),y=i=st(u)-ii(),t=0;t<b;t++)n=e[t],o=k(n),i-=o,i<0&&n.isInToolbar?(f(n,v),v=!0):i>=0&&!n.isInToolbar&&(n.buttonsParent&&!n.buttonsParent.parentNode&&u&&u.insertBefore(n.buttonsParent,l),d(n.elem,n.buttonsParent||u,n.buttonsParent?null:l),n.isInToolbar=!0,nt(n.elemId+"resize")),n.isInToolbar?(s+=o,r=t):h++;if(h&&r>-1&&y-s<w){for(t=r;t&&!e[t].isShown();--t)f(e[t]);f(e[t])}p&&ht()&&p.close();fi()},ct=function(n){if(!isNaN(n))return n;for(var t=0;t<e.length;t++)if(e[t].elemId===n)return t;return null},lt=function(){u&&(u.className="geo-page-toolbar",u.appendChild(l),u.appendChild(c));p=o.default(l,{content:c,closeOnSelect:!1,calculatePosition:function(n){var i,t;for(n.style.left="",i=n.style.display!=="none",i||(n.style.display="block"),n.offsetWidth<l.parentNode.offsetWidth-l.offsetLeft&&(n.style.left=l.offsetLeft+"px"),t=e.length-1;t>=0;t--)if(e[t].isInToolbar)break;else nt(e[t].elemId+"resize")}})},at=function(n){!u&&n&&(u=n,e=k(u),lt())},g=!0,oi=function(){u&&g&&(g=!1,ft.attachEvent("resize",y),y())},si=function(){ft.detachEvent("resize",y);g=!0;p&&p.close()},hi=function(n,t,i){var f=n[0],r,e=[];if(t&&(u||c)){var s=i?"label":"checker",o=t.buttonsParent||t.isItBlock&&t.elem||t.control&&t.control[s]||t.elem,h=t.isInToolbar&&u?u:c;r=h.insertBefore(f,i?o.nextSibling:o)}else c.childNodes.length?r=c.appendChild(f):u&&(r=u.insertBefore(f,l));return r&&e.push(r),n.slice(1).reduce(function(n,t){var i=n[n.length-1];return i.parentNode&&(i.nextSibling?i.parentNode.insertBefore(t,i.nextSibling):i.parentNode.appendChild(t),n.push(t)),n},e).filter(tt)[0]},nt=function(n,t){v.hasOwnProperty(n)&&v[n].forEach(function(n){n(t)})},b=function(){if(u&&et){var t=i.isVisible(u),n=e.some(function(n){return n.isShown()});t!==n&&(i.toggle(u,n),nt("toggle"))}},vt;return u&&(e=k(u),lt()),vt={add:function(n,t,u){var s=typeof n=="string"?i.textToHTML(n):Array.isArray(n)?n:[n],o=t&&ct(t),f;at(this.toolbar);var h=!isNaN(o)&&e[o],c=hi(s,h,u),l=s.map(function(n){return n.offsetWidth||a(n)});return c&&(f=k(c),f.forEach(function(n,t){n.size||(n.size=l[t])}),h?e.splice.apply(e,r([o+(u?1:0),0],f)):e=e.concat(f),ut&&(rt(null,!1),y()),f[0])?f[0].getFacade():e[isNaN(o)?e.length-1:o+(u?1:0)].getFacade()},get:function(n){var t=ct(n);return typeof t=="number"?e[t].getFacade():null},cleanup:function(){e=e.filter(function(n){var t=Array.isArray(n.elem)?n.elem:[n.elem];return t.some(function(n){return n.parentNode!==null})});vt.resize()},addEvent:function(n,t){v.hasOwnProperty(n)?v[n].push(t):v[n]=[t]},removeEvent:function(n,t){var i,r;if(v.hasOwnProperty(n))if(i=v[n],t){for(r=0;r<i.length;r++)if(i[r]===t){i.splice(r,1);break}}else i.length=0,delete v[n]},toolbar:u,resize:function(n,t){t===void 0&&(t=!0);n&&rt(n,!0);u&&t&&y();b()},recalculate:function(n){n&&at(n);u&&u.parentNode&&(ut=!0,rt(null,!0),y(),b())},focus:oi,blur:si,isToolbarInitialized:function(){return!!u},disable:function(){e.forEach(function(n){n.control&&n.control.disable()})},enable:function(){e.forEach(function(n){n.control&&n.control.enable()})},setAutoHide:function(n){et=n;b()}}}var r=this&&this.__spreadArray||function(n,t){for(var i=0,u=t.length,r=n.length;i<u;i++,r++)n[r]=t[i];return n};Object.defineProperty(t,"__esModule",{value:!0});t.GeotabToolbar=void 0;var u=require("../../utils"),i=require("../../vanillaExtension/vanilla"),f=require("../../vanillaExtension/vanillaButtonSwitcher"),e=require("../windowObserver"),o=require("./popupWindow"),s=u.memOnce(function(){return e.default()}),h=function(n){return('\n    <button class="geo-page-toolbar__item geo-button geo-caption" title="'+n("Show more")+'" style="display:none;" data-toolbar-resizible="true">\n        <span class="geo-caption__content noTranslate">'+n("More")+'<\/span>\n        <svg class="geo-caption__post-content geo-icon geo-icon--micro toRotate"><use xlink:href="#geo-new-arrow-down" focusable="false"><\/use><\/svg>\n    <\/button>\n').trim()};t.GeotabToolbar=c})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/geotabToolbar"),geotab.commonjs.generateExport("geotab/checkmate/ui/geotabToolbar"));
(function(n,require,t){"use strict";var r,u,i,f;Object.defineProperty(t,"__esModule",{value:!0});t.DeviceReplacementManager=t.ReplacementStatus=void 0;r=require("../../../deferred");u=require("../../../../utils"),function(n){n.Eligible="DeviceReplacementStatusEligibleId";n.Requested="DeviceReplacementStatusRequestedId";n.Completed="DeviceReplacementStatusCompletedId"}(i=t.ReplacementStatus||(t.ReplacementStatus={}));f=function(){function n(n,t,i){this.entitiesLoader=n;this.user=t;this.localizer=i}return n.prototype.isAdmin=function(){return(this.user.securityGroups||[]).some(function(n){return n.id==="GroupEverythingSecurityId"})&&u.isEntireOrganization(this.user.companyGroups)},n.prototype.searchDevices=function(n){return this.entitiesLoader.devices.getItemsByValue(n,{})},n.prototype.getReplacementStatus=function(){return this.isAdmin()?this.status=this.status||this.getCountOfDevicesWithReplacementInfo({status:i.Eligible}).then(function(n){return{isReplacementAvailable:n!==0,devicesCount:n}}):r.resolve({isReplacementAvailable:!1,devicesCount:0})},n.prototype.getDeviceWithReplacementInfo=function(n){if(!this.isAdmin())return r.resolve([]);var t={};return n&&(t.serialNumber=n===null||n===void 0?void 0:n.serialNumber),t.includeDeviceReplacementInfo=!0,this.searchDevices(t).promise()},n.prototype.getDevicesWithReplacementInfo=function(n){var i=this,t,r;return this.entitiesLoader.sendRequests(),r=(t=n===null||n===void 0?void 0:n.map(function(n){return i.getDeviceWithReplacementInfo.bind(i)(n)}))!==null&&t!==void 0?t:[this.getDeviceWithReplacementInfo.bind(this)()],this.entitiesLoader.sendRequests(),r},n.prototype.getCountOfDevicesWithReplacementInfo=function(n){return this.isAdmin()?this.entitiesLoader.deviceReplacementInfo.countOf(n):r.resolve(0)},n.prototype.getCountOfEligibleDevices=function(){return this.isAdmin()?this.getCountOfDevicesWithReplacementInfo({status:i.Eligible}):r.resolve(0)},n.prototype.sendDevicesToReplacement=function(n,t,i){return t===void 0&&(t=""),i===void 0&&(i=""),this.isAdmin()?this.entitiesLoader.call("AddReplacementRequest",{inputDevices:n,comments:t.trim(),shipToAddress:i.trim()}):r.resolve({})},n.prototype.getReplacementStatusMessage=function(n,t){var f,r={reasonForReplacement:t("No replacement required"),replacementStatusDetail:t("Not applicable"),eligible:!1},u;if(!n||!n.deviceReplacementInfo||(u=n.deviceReplacementInfo.status,!u))return r;if(n.deviceReplacementInfo.terminationDate&&(r.reasonForReplacement=t(((f=n.deviceReplacementInfo.type)!==null&&f!==void 0?f:"")+". The device will be terminated on {date}.").replace("{date}",this.localizer.toShortDate(n.deviceReplacementInfo.terminationDate))),u===i.Completed)if(n.deviceReplacementInfo.completionDate)r.replacementStatusDetail=t("The replacement device was ordered on {date}.").replace("{date}",this.localizer.toShortDate(n.deviceReplacementInfo.completionDate));else throw new Error("Error: Replacement infos status is 'Completed' but the completion date is empty");else if(u===i.Requested)if(n.deviceReplacementInfo.creationDate)r.replacementStatusDetail=t("The replacement requested was initiated on {date}.").replace("{date}",this.localizer.toShortDate(n.deviceReplacementInfo.creationDate));else throw new Error("Error: Replacement infos status is 'Requested' but the requested date is empty");else r.replacementStatusDetail=t("Eligible for replacement request."),r.eligible=!0;return r},n.isEligible=function(n){var t;return((t=n.deviceReplacementInfo)===null||t===void 0?void 0:t.status)===i.Eligible},n.isRequested=function(n){var t;return((t=n.deviceReplacementInfo)===null||t===void 0?void 0:t.status)===i.Requested},n.isCompleted=function(n){var t;return((t=n.deviceReplacementInfo)===null||t===void 0?void 0:t.status)===i.Completed},n}();t.DeviceReplacementManager=f})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/deviceTools/deviceReplacement/deviceReplacementManager"),geotab.commonjs.generateExport("geotab/checkmate/ui/deviceTools/deviceReplacement/deviceReplacementManager"));
(function(n,require,t){"use strict";function e(n,t){var e=f.default(n,undefined,["call"]),o=t?t:900;return e.call=function(t,f,e){var h=n.call.apply(n,[t,f,e]),c=h.beginInvoke.bind(h),s=[],l=function(n,t){for(var r=n.length,e=Math.round(r/t)||1,u=Math.ceil(r/e),f=[],i=0;i<r;)f.push(n.slice(i,i+u)),i+=u;return f};return h.beginInvoke=function(t,f,e,a){var p=[],v=h.getCalls(),w=function(n,t){var u=typeof t=="function"?t:function(){return t},f=n?"resolve":"reject",e=s.map(function(n,t){return n&&n[f].call(n,u(t))}).filter(i.echo);return s.length=0,r.together(e)},y=function(n){var i=w(!0,function(t){return n[t]});return t(n),i},b=function(n){w(!1,n);f(n)},g=function(n){return function(){return y(n)}},k=o,d=v&&v.length>k?l(v,k):[];return v.length>1&&d.length>1?d.reduce(function(t){return function(r,f){var o=function(){var r=n.multiCall(f,undefined,e);return r.beginInvoke(function(n){n.length===1?t.push(n[0]):t.splice.apply(t,u([t.length,1],n))},i.NOOP,e,a)};return r&&r.andThen(o)||o()}}(p),null).andThen(g(p)).fail(b):c(i.NOOP,i.NOOP,e,a).andThen(function(n){return v.length===1?y([n]):y(n)}).fail(b)},function(n){var t=function(){return s[s.length-1]},i=function(){return s.push(null),t()},u=function(){var n=r.Deferred();return s[s.length-1]=n,n},f=n.andAlso;i();n.andAlso=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return i(),f.apply(n,r)};n.call=n.andAlso;n.promise=function(){var n=t();return n||(n=u()),n.promise()}}(h),h},e}var u=this&&this.__spreadArray||function(n,t){for(var i=0,u=t.length,r=n.length;i<u;i++,r++)n[r]=t[i];return n};Object.defineProperty(t,"__esModule",{value:!0});var r=require("./deferred"),i=require("../utils"),f=require("./proxyObject");t.default=e})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/sliceableConnection"),geotab.commonjs.generateExport("geotab/checkmate/sliceableConnection"));
(function(n,require,t){"use strict";var i,r,u;Object.defineProperty(t,"__esModule",{value:!0});t.getAddinType=t.AddinType=void 0,function(n){n.PAGE="page";n.BUTTON="button";n.MENU="menu";n.MAP="map";n.TRIPS_HISTORY="historical";n.DRIVE="drive";n.TAB="tab";n.UNKNOWN="unknown"}(i=t.AddinType||(t.AddinType={}));r="DriveAppLink/";u=function(n){return n.path===r?i.DRIVE:n.page&&n.tabTitle?i.TAB:n.url?i.PAGE:n.menuId?i.MENU:n.click?i.BUTTON:n.mapScript?n.page==="tripsHistory"?i.TRIPS_HISTORY:i.MAP:i.UNKNOWN};t.getAddinType=u})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/addinsTools/classifyAddin"),geotab.commonjs.generateExport("geotab/checkmate/addinsTools/classifyAddin"));
(function(n,require,t){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i.apply(this,arguments)},r,u;Object.defineProperty(t,"__esModule",{value:!0});t.getEmptyAddin=t.toStoredAddin=void 0;r=require("../classifyAddin");u=function(n,i){return n&&n.name&&n.items&&n.items.length>0?o(n,i||""):t.getEmptyAddin()};t.toStoredAddin=u;var f=function(n,t){return{isSigned:!!n.isSigned,addinName:n.name,support:n.supportEmail,version:n.version||"1.0",originalUrl:t}},e=function(n,t){var u=f(n,t);return(n.items||[]).map(function(n){return{type:r.getAddinType(n),meta:i({},u),data:n}}).filter(function(n){return n.type!=="unknown"})},o=function(n,t){return{url:t,name:n.name||"",isSigned:n.isSigned,items:e(n,t),enableViewSecurityId:n.enableViewSecurityId||!1,securityIds:n.securityIds||[]}},s=function(){return{name:"",url:"",items:[],enableViewSecurityId:!1,isSigned:!1,securityIds:[]}};t.getEmptyAddin=s})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/addinsTools/parsers/storedAddin"),geotab.commonjs.generateExport("geotab/checkmate/addinsTools/parsers/storedAddin"));
(function(n,require,t){"use strict";var u;Object.defineProperty(t,"__esModule",{value:!0});t.EmptyAddinResolver=t.AddinResolver=void 0;var i=require("../../deferred"),r=require("../parsers/storedAddin"),f=function(){function n(n){var t=this;this.resolutionCache={};this.resolveAddin=function(n){var r=t.resolutionCache[n],i;return r?r:(i=t.resolver(n).then(function(i){return i.items.length===0&&(t.resolutionCache[n]=undefined),i}),t.resolutionCache[n]=i,i)};this.resolver=function(t){return n(t).then(function(n){return r.toStoredAddin(n,t.url||"")},r.getEmptyAddin)}}return n.prototype.resolve=function(n){return i.together(n.map(this.resolveAddin)).then(function(n){return n.filter(function(n){return n.items.length>0})})},n}();t.AddinResolver=f;u=function(){function n(){}return n.prototype.resolve=function(){return i.resolve([])},n}();t.EmptyAddinResolver=u})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/addinsTools/addinLoaders/addinResolver"),geotab.commonjs.generateExport("geotab/checkmate/addinsTools/addinLoaders/addinResolver"));
(function(n,require,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0});t.parseEulaPath=void 0;var r={br:{en:2,"pt-BR":1}},u={en:2},f=5,e=2,o=function(n,t,o){return i(n.map(function(n){var c=n.split("\\")[1],o=c.split("_"),i=o[1],l=o[2],a=o[3],s=(a||"").split(".")[0].toLowerCase(),h=r[s]||u,v=i===t?e:f,y=h.hasOwnProperty(i)?h[i]:v;return{version:parseInt(l),path:n,language:i,jurisdiction:s,priority:y}}),o.toLowerCase()).sort(function(n,t){return n.priority>t.priority?1:-1})};t.parseEulaPath=o;i=function(n,t){var i=n.filter(function(n){return n.jurisdiction===t});return i.length>0?i:n.filter(function(n){return!n.jurisdiction})}})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/eula/parseEula"),geotab.commonjs.generateExport("geotab/checkmate/eula/parseEula"));
(function (geotab, require, exports){ exports.default = "<div class=\"demo-warning\"><p>Welcome to your demo database!</p><p>This database has assets, reports, and rules setup automatically. You can also setup additional reports and rules as necessary.</p><p><span class=\"demo-warning__alert\">Attention:</span><br /> <span class=\"demo-warning__desc\">This database will be expiring on {0}. Once expired, all data will be deleted and you will no longer have access. If you would like to have access to a demo environment again, please register a new demo database from the registration page.</span></p></div>";
 })(geotab, geotab.commonjs.generateRequire("geotab/checkmate/ui/views/demoWarning.html"), geotab.commonjs.generateExport("geotab/checkmate/ui/views/demoWarning.html"));
(function(n,require,t){"use strict";function e(n,i){var r=t.getDate(n);return r.setMilliseconds(r.getMilliseconds()+i),r}function o(n,t){var r=n.getDate(),i;return n.setDate(1),n.setMonth(n.getMonth()+t),i=new Date(n.getTime()),i.setMonth(n.getMonth()+1),n.setDate(Math.min(r,Math.round((i.getTime()-n.getTime())/864e5))),n}function s(n){return new Date(n.getFullYear(),n.getMonth()+1,0).getDate()}function r(n,t,i){var f=i.toLocalDateTime(n,t),h=new Date(f.getTime()+36e5),c=h.getTimezoneOffset()-f.getTimezoneOffset(),o,s;f.setMinutes(f.getMinutes()+c);var l=u.getStartOfDay(f),r=i.toReverseOffsetDateTime(l,t),e=new Date(r.getTime());return e.setUTCMinutes(e.getUTCMinutes()+60),o=i.getOffset(e,t,!0)-i.getOffset(r,t,!0),s=e.getTimezoneOffset()-r.getTimezoneOffset(),r.setUTCMinutes(r.getUTCMinutes()+o-s),r}function h(n,t,i){var u=r(n,t,i);return u.setUTCHours(u.getUTCHours()+30),r(u,t,i)}function c(n,t){var i,u,f,r;return n<t&&n.setDate(n.getDate()+1),i=n.getTime()-t.getTime(),u=Math.floor(i/36e5),i-=u*36e5,f=Math.floor(i/6e4),r=new Date,r.setMinutes(f),r.setHours(u),r}function l(n){return new Date(n.getTime())}var u,f,i;Object.defineProperty(t,"__esModule",{value:!0});t.cloneDate=t.getTimeDifferenceInHoursMinutes=t.getNextDayStart=t.getStartOfDayUserTimezone=t.getAmountOfDaysInMonth=t.addMonths=t.addWeeks=t.addDays=t.addHours=t.addMinutes=t.addSeconds=t.addMilliseconds=t.getDate=t.MIN_DATE=void 0;u=require("./dstCalculator");t.MIN_DATE=new Date(Date.UTC(1986,0,1));f=function(n){return typeof n=="string"?new Date(n):n};t.getDate=f;t.addMilliseconds=e;i=function(n){return function(t,i){return e(t,i*n)}};t.addSeconds=i(1e3);t.addMinutes=i(6e4);t.addHours=i(36e5);t.addDays=i(864e5);t.addWeeks=i(6048e5);t.addMonths=o;t.getAmountOfDaysInMonth=s;t.getStartOfDayUserTimezone=r;t.getNextDayStart=h;t.getTimeDifferenceInHoursMinutes=c;t.cloneDate=l})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/date"),geotab.commonjs.generateExport("geotab/checkmate/date"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.requestSystemSettingsFn=void 0;var u=require("../../checkmate/deferred"),i=function(n,t){return{systemSettings:n,isNewVersion:t}},f=function(n,t){return t.getItemsByValue().then(function(r){return n!==r[0].dataVersion?i(r[0],!0):(t.clearCache(),i(r[0],!1))})},e=4,r=function(n,t,i){return f(n,t).then(function(f){return f.isNewVersion||i===e?f.systemSettings:u.waitPromise(100).then(function(){return r(n,t,i+1)})})},o=function(n,t){var i=n;return function(){return r(i,t,1).then(function(n){return i=n.dataVersion,n})}};t.requestSystemSettingsFn=o})(geotab,geotab.commonjs.generateRequire("geotab/services/systemSettingsWatcher/systemSettingsVersioning"),geotab.commonjs.generateExport("geotab/services/systemSettingsWatcher/systemSettingsVersioning"));
(function(n,require,t){"use strict";var u=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});t.SystemSettingsWatcher=void 0;var i=require("../../checkmate/deferred"),f=require("../../checkmate/eventHandler"),r=require("../../checkmate/ui/mapProvidersSupport"),e=require("./systemSettingsVersioning"),o=function(n){function t(t,u,f,o,s){var h=n.call(this)||this;return h.notificationCenter=t,h.entitiesLoader=u,h.hasAccessTo=f,h.errorHandler=o,h.getCurrentUserMapEngine=s,h.subscriber={},h.ssUpdateQueue=i.resolve(undefined),h.updateFunc=function(){h.ssUpdateQueue=h.ssUpdateQueue.then(function(){var n=h.currentSystemSettings&&h.currentSystemSettings.mapProvider,t=h.currentSystemSettings&&h.currentSystemSettings.customWebMapProviderList,u=e.requestSystemSettingsFn(h.currentSystemSettings.dataVersion,h.entitiesLoader.systemSettings);return u().then(function(u){return(h.currentSystemSettings=u,!h.currentSystemSettings)?i.resolve(undefined):(h.fire("SystemSettingsUpdated",u),n!==u.mapProvider||!r.compareCustomProviders(t||[],u.customWebMapProviderList||[]))?r.loadProvidersSupport(h.entitiesLoader,h.errorHandler,h.hasAccessTo,u.customWebMapProviderList).then(function(n){var i=h.getCurrentUserMapEngine(),t=n.getUsableProviders(),r=t.filter(function(n){return n.serverType===i}),u=r[0]||t[0];h.fire("MapProviderChange",{provider:u,providersPermissions:n})}):i.resolve(undefined)},h.errorHandler)})},h}return u(t,n),t.prototype.start=function(n){return(this.stop(),this.currentSystemSettings=n,!n)?this:(this.notificationCenter.attachEvent("SystemSettings.Set",this.subscriber,this.updateFunc),this)},t.prototype.stop=function(){this.notificationCenter.detachEvent("SystemSettings.Set",this.subscriber,this.updateFunc)},t}(f.SimpleEventHandler);t.SystemSettingsWatcher=o})(geotab,geotab.commonjs.generateRequire("geotab/services/systemSettingsWatcher/systemSettingsWatcher"),geotab.commonjs.generateExport("geotab/services/systemSettingsWatcher/systemSettingsWatcher"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.EmptyBackButton=void 0;var i=function(){function n(){}return n.prototype.setState=function(){return undefined},n.prototype.clearState=function(){},n.prototype.goBack=function(){},n.prototype.attach=function(){},n}();t.EmptyBackButton=i})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/backButton/emptyBackButton"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/backButton/emptyBackButton"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.AbortPromiseToken=void 0;var i=require("./deferred"),r=require("./exceptions/commonExceptions"),u=function(){function n(){this.def=i.Deferred()}return Object.defineProperty(n.prototype,"promise",{get:function(){return this.def.promise()},enumerable:!1,configurable:!0}),n.prototype.abort=function(){this.def.reject(new r.AbortException)},n}();t.AbortPromiseToken=u})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/abortPromiseToken"),geotab.commonjs.generateExport("geotab/checkmate/abortPromiseToken"));
(function(n,require,t){"use strict";var i,r,u;Object.defineProperty(t,"__esModule",{value:!0});t.defaulProfilesNames=t.isDefaultProfile=t.getProfileForTimeZone=void 0;var f=["America/Anchorage","America/Chicago","America/Creston","America/Denver","America/Detroit","America/Indiana/Knox","America/Indiana/Marengo","America/Indiana/Petersburg","America/Indiana/Tell_City","America/Indiana/Vevay","America/Indiana/Vincennes","America/Indiana/Winamac","America/Indianapolis","America/Juneau","America/Kentucky/Monticello","America/Los_Angeles","America/Louisville","America/Menominee","America/Metlakatla","America/New_York","America/Nome","America/North_Dakota/Beulah","America/North_Dakota/Center","America/North_Dakota/New_Salem","America/Phoenix","America/Shiprock","America/Sitka","America/Yakutat"],e=["America/Cambridge_Bay","America/Coral_Harbour","America/Dawson","America/Dawson_Creek","America/Edmonton","America/Fort_Nelson","America/Glace_Bay","America/Goose_Bay","America/Halifax","America/Inuvik","America/Iqaluit","America/Moncton","America/Montreal","America/Nipigon","America/Pangnirtung","America/Rainy_River","America/Rankin_Inlet","America/Regina","America/Resolute","America/Swift_Current","America/Thunder_Bay","America/Toronto","America/Vancouver","America/Whitehorse","America/Winnipeg","America/Yellowknife","Antarctica/Casey","Antarctica/Davis","Antarctica/DumontDUrville","Antarctica/Macquarie","Antarctica/Mawson","Antarctica/McMurdo","Antarctica/Palmer","Antarctica/Rothera","Antarctica/South_Pole","Antarctica/Syowa","Antarctica/Vostok","Arctic/Longyearbyen"],o=["America/Cancun","America/Chihuahua","America/Hermosillo","America/Matamoros","America/Mazatlan","America/Merida","America/Mexico_City","America/Monterrey","America/Ojinaga","America/Tijuana"],s=["America/Danmarkshavn","America/Godthab","America/Kralendijk","America/Scoresbysund","America/Thule"],h=function(n){return f.indexOf(n)!==-1?"DisplayMeasurementProfileUnitedStatesId":e.indexOf(n)!==-1?"DisplayMeasurementProfileCanadaId":o.indexOf(n)!==-1?"DisplayMeasurementMexicoId":s.indexOf(n)!==-1?"DisplayMeasurementProfileEuropeId":"DisplayMeasurementProfileCentralSouthAmericaId"},c=function(n){switch(n){case"Atlantic/Bermuda":case"Atlantic/South_Georgia":case"Atlantic/Stanley":return"DisplayMeasurementProfileCentralSouthAmericaId";case"Atlantic/Cape_Verde":case"Atlantic/St_Helena":return"DisplayMeasurementProfileAfricaId";default:return"DisplayMeasurementProfileEuropeId"}},l=function(n){return n==="Indian/Antananarivo"?"DisplayMeasurementProfileAfricaId":"DisplayMeasurementProfileAsiaId"},a=["Pacific/Easter","Pacific/Galapagos","Pacific/Ponape","Pacific/Tahiti","Pacific/Wallis"],v=["Pacific/Guam","Pacific/Kosrae","Pacific/Saipan","Pacific/Truk","Pacific/Wake"],y=["Pacific/Honolulu","Pacific/Johnston","Pacific/Midway","Pacific/Norfolk"],p=function(n){return n==="Pacific/Palau"?"DisplayMeasurementMexicoId":a.indexOf(n)!==-1?"DisplayMeasurementProfileCentralSouthAmericaId":v.indexOf(n)!==-1?"DisplayMeasurementProfileAsiaId":y.indexOf(n)!==-1?"DisplayMeasurementProfileUnitedStatesId":"DisplayMeasurementProfileAustraliaNewZealandId"},w={Africa:function(){return"DisplayMeasurementProfileAfricaId"},Asia:function(){return"DisplayMeasurementProfileAsiaId"},Australia:function(){return"DisplayMeasurementProfileAustraliaNewZealandId"},Europe:function(){return"DisplayMeasurementProfileEuropeId"},Pacific:p,Indian:l,Atlantic:c,America:h},b=function(n){var i=n.split("/")[0]||n,t=w[i];return t?t(n):"DisplayMeasurementProfileCanadaId"};t.getProfileForTimeZone=b;r=["DisplayMeasurementProfileAfricaId","DisplayMeasurementProfileAsiaId","DisplayMeasurementProfileAustraliaNewZealandId","DisplayMeasurementProfileCanadaId","DisplayMeasurementProfileCentralSouthAmericaId","DisplayMeasurementProfileEuropeId","DisplayMeasurementMexicoId","DisplayMeasurementProfileUKId","DisplayMeasurementProfileUnitedStatesId"];u=function(n){return n?r.indexOf(n)!==-1:!1};t.isDefaultProfile=u;t.defaulProfilesNames=(i={},i.DisplayMeasurementProfileAfricaId="Africa",i.DisplayMeasurementProfileAsiaId="Asia",i.DisplayMeasurementProfileAustraliaNewZealandId="Australia & New Zealand",i.DisplayMeasurementProfileCanadaId="Canada",i.DisplayMeasurementProfileCentralSouthAmericaId="Central & South America",i.DisplayMeasurementProfileEuropeId="Europe",i.DisplayMeasurementMexicoId="Mexico",i.DisplayMeasurementProfileUKId="UK",i.DisplayMeasurementProfileUnitedStatesId="United States",i)})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/customUnitProfileTools/defaultProfileUtils"),geotab.commonjs.generateExport("geotab/checkmate/ui/customUnitProfileTools/defaultProfileUtils"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.loadProfileDetailsFn=void 0;var r=require("../../../utils"),i=require("../../deferred"),u=function(n){return function(t,r){return t?n({user:{id:t},getDefaultProfile:r}).then(function(n){return!Array.isArray(n)||n.length===0?undefined:n[0]}):i.resolve(undefined)}},f=function(n){return function(t){return n({displayMeasurementProfileSearch:{id:t}}).then(function(n){return Array.isArray(n)?n.filter(r.echo):[]})}},e=function(n,t,r,e){if(e===void 0&&(e=!0),!r)return function(){return i.resolve({})};var o=u(n.userDisplayProfile.getItemsByValue),s=f(n.displayMeasurementProfileDetail.getItemsByValue),h=function(n){return n&&n.profileId?n.profileId:t()},c=function(n){return n.reduce(function(n,t){return n[t.diagnosticId]=t,n},{})};return function(n){return o(n,e).then(h).then(s).then(c)}};t.loadProfileDetailsFn=e})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/unitProfileUtils/unitProfileLoaders"),geotab.commonjs.generateExport("geotab/checkmate/ui/unitProfileUtils/unitProfileLoaders"));
(function(n,require,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},r.apply(this,arguments)},i,e,o,s,h;Object.defineProperty(t,"__esModule",{value:!0});t.canChangeUserProfile=t.saveDisplayProfileFn=t.isValidProfileEvent=t.loadDisplayProfileFn=void 0;i=require("../../deferred");e=function(n,t){return t?function(t,r,u){return r||!t?i.resolve(undefined):n({user:{id:t},getDefaultProfile:u}).then(function(n){return!Array.isArray(n)||n.length===0?undefined:n[0]})}:function(){return i.resolve(undefined)}};t.loadDisplayProfileFn=e;var u=function(n,t){return{event:n,profileId:t}},f=function(){return u("None","")},c=function(n){return!n||!n.profileId?!1:["Add","Set"].some(function(t){return t===n.event})};t.isValidProfileEvent=c;o=function(n,t){return t?function(){return!0}:function(t){return t===n}};s=function(n,t,e,s,h,c){if(!s)return function(){return i.resolve(f())};var l=o(h,c);return function(o,s){return!s||!o||!l(o)?i.resolve(f()):e(o,!1).then(function(e){return e?e.profileId===s?i.resolve(f()):t(r(r({},e),{profileId:s})).then(function(){return u("Set",e.id)}):n({userId:o,profileId:s}).then(function(n){return u("Add",n)})})}};t.saveDisplayProfileFn=s;h=function(n,t,i){return n?t?!0:i:!1};t.canChangeUserProfile=h})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/userTools/userDisplayProfileUtils"),geotab.commonjs.generateExport("geotab/checkmate/ui/userTools/userDisplayProfileUtils"));
(function(n,require,t){"use strict";var u;Object.defineProperty(t,"__esModule",{value:!0});t.getUsersIdsForProfiles=t.getSocketMessageIds=void 0;var i=require("../../../utils"),r=require("../../deferred"),f=function(n){if(!n||!Array.isArray(n.data))return[];var t=n.data.filter(i.echo);return t.length===0?[]:t.map(function(n){return typeof n=="string"?n:n.id}).filter(i.echo)};t.getSocketMessageIds=f;u=function(n,t){var u=n.filter(i.echo);return u.length===0?r.resolve([]):r.together(u.map(function(n){return t(n)})).then(function(n){return n.filter(i.echo)}).then(function(n){return n.map(function(n){return n.userId}).filter(i.echo)}).catch(function(){return[]})};t.getUsersIdsForProfiles=u})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/unitProfileUtils/unitProfileNotifierUtils"),geotab.commonjs.generateExport("geotab/checkmate/ui/unitProfileUtils/unitProfileNotifierUtils"));
(function(n,require,t){"use strict";var o=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});t.getUnitProfileNotifier=void 0;var u=require("../../../utils"),f=require("../../abortPromiseToken"),i=require("../../deferred"),s=require("../../eventHandler"),e=require("../userTools/userDisplayProfileUtils"),r=require("./unitProfileNotifierUtils"),h=function(n){function t(t,o,s,h){var c=n.call(this)||this,l;return c.userId=t,c.store=o,c.notificationCenter=s,c.errorHandler=h,c.isListening=!1,c.abortToken=new f.AbortPromiseToken,c.updateDisaplayProfile=function(n){var t=r.getSocketMessageIds(n);t.length!==0&&i.race([c.getUserProfileId(),c.abortToken.promise]).then(function(n){n&&t.indexOf(n.profileId)!==-1&&c.fire("changeProfileDetails")}).catch(c.handleError)},c.setOrRemoveUserProfile=function(n){var t=r.getSocketMessageIds(n);t.length!==0&&i.race([c.getUserProfileId(),c.abortToken.promise]).then(function(n){return n?c.hasUserProfileChanged(t):i.resolve(!1)}).then(function(n){n&&(c.resetUserProfileRequest(),c.fire("changeUserProfile"))}).catch(c.handleError)},c.addUserProfile=function(n){var t=r.getSocketMessageIds(n);t.length!==0&&i.race([c.getUserProfileId(),c.abortToken.promise]).then(function(n){return n?i.resolve(!1):c.hasUserProfileChanged(t)}).then(function(n){n&&(c.resetUserProfileRequest(),c.fire("changeUserProfile"))}).catch(c.handleError)},c.handleError=function(n){n&&n.isAborted||c.errorHandler(n)},l=e.loadDisplayProfileFn(c.store.userDisplayProfile.getItemsByValue,!0),c.getUserProfileId=u.memOnce(function(){return l(c.userId,!1)}),c.getUserProfileId(),c}return o(t,n),t.prototype.hasUserProfileChanged=function(n){var t=this;return!this.userId||n.length===0?i.resolve(!1):i.race([r.getUsersIdsForProfiles(n,this.store.userDisplayProfile.getItemById),this.abortToken.promise]).then(function(n){return n===void 0&&(n=[]),n.some(function(n){return n===t.userId})})},t.prototype.resetUserProfileRequest=function(){var n=this,t=e.loadDisplayProfileFn(this.store.userDisplayProfile.getItemsByValue,!0);this.getUserProfileId=u.memOnce(function(){return t(n.userId,!1,!1)})},t.prototype.attachEvents=function(){this.notificationCenter.attachEvent("DisplayMeasurementProfile.Set",this,this.updateDisaplayProfile);this.notificationCenter.attachEvent("UserDisplayProfile.Set",this,this.setOrRemoveUserProfile);this.notificationCenter.attachEvent("UserDisplayProfile.Remove",this,this.setOrRemoveUserProfile);this.notificationCenter.attachEvent("UserDisplayProfile.Add",this,this.addUserProfile)},t.prototype.detachEvents=function(){this.notificationCenter.detachEvent("DisplayMeasurementProfile.Set",this,this.updateDisaplayProfile);this.notificationCenter.detachEvent("UserDisplayProfile.Set",this,this.setOrRemoveUserProfile);this.notificationCenter.detachEvent("UserDisplayProfile.Remove",this,this.setOrRemoveUserProfile);this.notificationCenter.detachEvent("UserDisplayProfile.Add",this,this.addUserProfile)},t.prototype.subscribe=function(){this.isListening||(this.isListening=!0,this.abortToken=new f.AbortPromiseToken,this.attachEvents())},t.prototype.unsubscribe=function(){this.abortToken.abort();this.isListening=!1;this.resetUserProfileRequest();this.detachEvents()},t}(s.SimpleEventHandler),c=function(){function n(){}return n.prototype.subscribe=function(){},n.prototype.unsubscribe=function(){},n.prototype.attach=function(){},n}(),l=function(n,t,i,r,u){return u?new h(n,t,i,r):new c};t.getUnitProfileNotifier=l})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/unitProfileUtils/unitProfileNotifier"),geotab.commonjs.generateExport("geotab/checkmate/ui/unitProfileUtils/unitProfileNotifier"));
(function(n,require,t){"use strict";var u=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i.apply(this,arguments)},o;Object.defineProperty(t,"__esModule",{value:!0});t.EmptyUserProfileLoader=t.UserProfileLoader=void 0;var f=require("../../../../utils"),s=require("../../../abortPromiseToken"),r=require("../../../deferred"),e=require("../../../eventHandler"),h=require("../../customUnitProfileTools/defaultProfileUtils"),c=require("../../unitProfileUtils/unitProfileLoaders"),l=require("../../unitProfileUtils/unitProfileNotifier"),a=function(n){function t(t,i,r,u){var e=n.call(this)||this;return e.store=t,e.notificationCenter=i,e.errorHandler=r,e.canLoadUserProfile=u,e.currUserId=undefined,e.stopWatchingProfile=f.NOOP,e.profileDetails={},e}return u(t,n),t.prototype.startWatchingProfile=function(n){var i=this,t=l.getUnitProfileNotifier(n.id,this.store,this.notificationCenter,this.errorHandler,this.canLoadUserProfile),a=c.loadProfileDetailsFn(this.store,function(){return h.getProfileForTimeZone(n.timeZoneId||"")},this.canLoadUserProfile,!0),u=new s.AbortPromiseToken,f=function(t){return r.race([a(n.id),u.promise]).then(function(n){i.profileDetails=n;i.fire(t)}).catch(function(n){n&&n.isAborted||i.errorHandler(n)})},e=function(){f("profileChange")},o;return t.attach("changeProfileDetails",e),t.attach("changeUserProfile",e),t.subscribe(),o=f("loadUserProfile"),{abortCallback:function(){u.abort();t.unsubscribe()},userProfilePromise:o}},t.prototype.getDetails=function(){return i({},this.profileDetails)},t.prototype.setUser=function(n){if(!n||!n.id||n.changePassword||this.currUserId&&this.currUserId===n.id)return r.resolve(void 0);this.currUserId&&this.reset();this.currUserId=n.id;var t=this.startWatchingProfile(n),i=t.userProfilePromise,u=t.abortCallback;return this.stopWatchingProfile=u,i},t.prototype.reset=function(){this.currUserId=undefined;this.stopWatchingProfile();this.profileDetails={};this.stopWatchingProfile=f.NOOP},t}(e.SimpleEventHandler);t.UserProfileLoader=a;o=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return u(t,n),t.prototype.getDetails=function(){return{}},t.prototype.setUser=function(){return r.resolve(void 0)},t.prototype.reset=function(){},t}(e.SimpleEventHandler);t.EmptyUserProfileLoader=o})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/userProfileLoader/userProfileLoader"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/userProfileLoader/userProfileLoader"));
(function(n,require,t){"use strict";var i,r;Object.defineProperty(t,"__esModule",{value:!0});t.isReadyForCultureUpdate=t.getUserProfileCultureChange=void 0;i=function(n,t,i){return t===void 0&&(t=!0),i===void 0&&(i=!0),{previous:n,current:n,isUserProfileChanged:t,showChanged:i,isMetricChanged:!1,isFuelEconomyUnitChanged:!1,isEnergyEconomyUnitChanged:!1,isDateTimeChanged:!1,isLanguageChanged:!1,isTimeZoneChanged:!1,isFirstDayOfWeekChanged:!1}};t.getUserProfileCultureChange=i;r=function(n){return!n||!n.onCultureInfoChange?!1:n.isActive()};t.isReadyForCultureUpdate=r})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/defaultPageTools/defaultPageTools"),geotab.commonjs.generateExport("geotab/checkmate/ui/defaultPageTools/defaultPageTools"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.loadUnitsOfMeasure=void 0;var i=require("../../../../deferred"),r=function(n,t,r){return r?n().catch(i.catchError(t,[])):i.resolve([])};t.loadUnitsOfMeasure=r})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/unitOfMeasureLoader/unitOfMeasureLoaders/unitOfMeasureLoaders"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/unitOfMeasureLoader/unitOfMeasureLoaders/unitOfMeasureLoaders"));
(function(n,require,t){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0});t.EmptyUnitOfMeasureLoader=t.UnitOfMeasureLoader=void 0;var i=require("../../../deferred"),u=require("./unitOfMeasureLoaders/unitOfMeasureLoaders"),f=function(){function n(n,t,r){var f=this;if(this.unitsOfMeasureHash={},!r){this.unitsOfMeasureHash={};this.allUnitsPromise=i.resolve({});return}this.allUnitsPromise=u.loadUnitsOfMeasure(n,t,r).then(function(n){return!n||!Array.isArray(n)?{}:(f.unitsOfMeasureHash=n.reduce(function(n,t){return n[t.id]=t,n},{}),f.unitsOfMeasureHash)})}return n.prototype.getAllUnits=function(){return this.allUnitsPromise},n.prototype.getUnit=function(n){return this.unitsOfMeasureHash[n]},n}();t.UnitOfMeasureLoader=f;r=function(){function n(){}return n.prototype.getAllUnits=function(){return i.resolve({})},n.prototype.getUnit=function(){return undefined},n}();t.EmptyUnitOfMeasureLoader=r})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/unitOfMeasureLoader/unitOfMeasureLoader"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/unitOfMeasureLoader/unitOfMeasureLoader"));
(function(n,require,t){"use strict";function lr(n,t,i){ct(n,hr(t),i)}function ar(n,t){t.container&&ct(n,t)}var o=this&&this.__assign||function(){return o=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},o.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});t.PureCustomerPageStart=void 0;var w=require("../localizer"),r=require("../vanillaExtension/vanilla"),lt=require("./interactiveConnection"),at=require("./securityCalculator"),vt=require("./dialogTokenReceiver"),b=require("./errorHandler"),yt=require("./eventHandler"),pt=require("./notificationsService"),k=require("./resourcesLocker"),wt=require("../services/currentUserWatcher"),d=require("./notificationCenter"),bt=require("./ui/embeddedPageNavigator"),kt=require("./ui/urlState"),g=require("./entitiesLoader"),nt=require("./ui/help/pageTooltipHelp"),s=require("./deferred"),dt=require("./pagesSecurity"),u=require("../utils"),gt=require("./ui/ifrLoginDialog"),tt=require("./ui/networkStateMonitor"),c=require("./storage/html5Storage"),ni=require("./storage/tokensCollection"),it=require("./ui/notifier"),ti=require("./ui/mapProvidersSupport"),ii=require("./channel/channel"),ri=require("./userActivityTracker");require("../../js/rison");var ui=require("./relatedPagesList"),fi=require("./sessionRestorer"),ei=require("./passwordChangeTokenReceiver"),oi=require("./addinsTools/addinsStorage"),si=require("./ui/waiting"),hi=require("../utils/languageUtils"),l=require("./browser"),ci=require("./ui/auditTools/controlAnalytics"),rt=require("./ui/auditTools/googleAnalytics"),li=require("../utils/domainSpecificUtils"),ai=require("../services/webSocketNotifications/webSocketsNotifications"),vi=require("./ui/geotabToolbar"),yi=require("./ui/deviceTools/deviceReplacement/deviceReplacementManager"),ut=require("./sliceableConnection"),pi=require("./addinsTools/addinLoaders/addinResolver"),e=require("./ui/modules/advancedGeotabEntitiesNavigator/advancedEntitiesNavigatorUtilites"),wi=require("./requestQuotas"),bi=require("./eula/parseEula"),ki=require("../vanillaExtension/vanillaDialog"),di=require("./ui/views/demoWarning.html"),gi=require("./date"),nr=require("../services/systemSettingsWatcher/systemSettingsWatcher"),tr=require("./featurePreview/features"),ir=require("./featurePreview/featurePreview"),rr=require("./ui/modules/backButton/emptyBackButton"),a=require("./ui/modules/userProfileLoader/userProfileLoader"),ur=require("./ui/modules/userProfileUtils/userProfileUtils"),ft=require("./ui/defaultPageTools/defaultPageTools"),v=require("./ui/modules/unitOfMeasureLoader/unitOfMeasureLoader"),fr=require("./ui/modules/userProfileUtils/hasAccessToUserProfile"),f=new a.EmptyUserProfileLoader,h=new v.EmptyUnitOfMeasureLoader,i=n.getSharedVariable("default"),et=!1,y=[],ot=si.default(document.body),er=function(n,t){Array.prototype.forEach.call(n,t)},or=function(n,t,i){return Array.prototype.reduce.call(n,t,i)},p,st={},sr=function(){var n,t="resize";UIEvent.prototype.initUIEvent?(n=window.document.createEvent("UIEvents"),n.initUIEvent(t,!0,!0,window,1)):n=new UIEvent(t,{bubbles:!0,cancelable:!0,view:window,detail:1});window.dispatchEvent(n)},ht=!1,ct=function(t,ht,ct){var si,ru=!!i.navigator,vr=c.Html5Storage(),uu=function(){return{recalcToolbar:u.NOOP,getToolbar:function(){},focus:u.NOOP,blur:u.NOOP,disable:u.NOOP,enable:u.NOOP}},yr=function(n,t,u){var o=function(){return document.getElementsByClassName("geo-toolbar")[0]||document.getElementsByClassName("checkmateToolbar")[0]},h=function(n){var t=n;if(t)while(t&&t!==document.body&&t.style&&t.style.display!=="none")t=t.parentNode;return t},c=function(n){var e=n.querySelector("span"),o,i,u,t,h,s,f,c;for(e&&(r.addClasses(n,"geo-caption"),r.addClasses(e,"geo-caption__content")),o="pre",i=0;i<n.children.length;i++){if(u=n.children[i],u.tagName==="SPAN"){o="post";continue}if(u.tagName==="svg"&&(t=u,t)){if(t.className.baseVal.indexOf("geo-icon")>-1)continue;h=t.className.baseVal.indexOf("arrow")!==-1;s=e?"geo-caption__"+o+"-content":"";h?(f=t.parentNode,f&&(f.removeChild(t),c=r.textToHTML(('<svg class="'+s+' geo-icon geo-icon--micro toRotate" focusable="false">\n                                                                        <use xlink:href="#geo-new-arrow-down"><\/use>\n                                                                    <\/svg>').trim())[0],f.appendChild(c)),t.innerHTML='<use xlink:href="#geo-new-arrow-down"><\/use>'):t.className.baseVal+=" "+s+" geo-icon geo-icon--big";t.className.baseVal=t.className.baseVal.replace("geotabButtonIcons","")}}},l=function(n){var t=n.querySelectorAll("span"),f,u,i,e;if(t.length){if(r.addClasses(n,"geo-caption"),t.length===1){r.addClasses(t[0],"geo-caption__content");return}for(f=["pre-content","content","post-content"],u=0;u<t.length;u++)i=t[u],e=f.shift()||"post-content",r.addClasses(i,"geo-caption__"+e),r.hasClass(i,"icon")&&(r.removeClasses(i,"icon"),r.addClasses(i,"geo-icon geo-icon--large"))}},s=function(n,t){t===void 0&&(t=!1);r.addClasses(n,t?"geo-buttons-wrapper__button":"geo-page-toolbar__item");r.addClasses(n,"toolbar-popup__item");r.hasClass(n,"customButton")?l(n):c(n)},a=function(n){var t=n.parentElement,u=n.nextElementSibling,i;if(t){if(t.removeChild(n),i=r.textToHTML('<div class=\'geo-text-input-with-icons geo-page-toolbar__item toolbar-popup__item toolbarSeparatedBlock\'>\n                                                            <svg class="geo-text-input-with-icons__pre-icon" focusable="false"><use xlink:href="#geo-loupe"><\/use><\/svg>\n                                                        <\/div>')[0],n.className="geo-text-input-with-icons__input",i.appendChild(n),u){t.insertBefore(i,u);return}t.appendChild(i)}return},v={INPUT:function(n){if(n.type==="checkbox"&&n.className==="geotabSwitchButton"){n.className="geo-page-toolbar__item geo-switch-button__input";return}if(n.type==="search"){a(n);return}n.className="geo-page-toolbar__item geo-text-input toolbar-popup__item"},LABEL:function(n){n.className="geo-page-toolbar__item geo-switch-button__label toolbar-popup__item"},BUTTON:s,A:s},y=function(n,t){t.filter(function(t){return t.page===n}).forEach(function(n){n.controller&&n.isInactive&&n.controller.disable()})},f,e=n,p=function(n){r.css(e,{visibility:"hidden",display:"block"});n();r.css(e,{display:"none",visibility:"visible"})};return function(){var r=o(),c=r&&(r.className.indexOf("geo-toolbar")!==-1||r.className.indexOf("geotab-toolbar")!==-1),s,n;return c&&(s=r.children,Array.prototype.forEach.call(s,function(n){var t=v[n.tagName];t&&t(n)})),n=vi.GeotabToolbar(i.localizer.translateKey,r),{recalcToolbar:function(){var t=undefined,i;n&&n.toolbar&&(n.isToolbarInitialized()||(t=o()),i=h(o()),e=i||e,e.style.display==="none"?p(function(){n.recalculate(t)}):n.recalculate(t))},getToolbar:function(){return n},focus:n.focus,blur:n.blur,disable:function(){f&&clearTimeout(f);f=setTimeout(function(){n.disable()},1)},enable:function(){f&&clearTimeout(f);n.enable();y(t(),u())}}}}(ht.container,function(){return i.getCurrentPageName?i.getCurrentPageName():""},function(){var n;return((n=i.customButtons)===null||n===void 0?void 0:n.getInitializedButtons())||[]}),fu=function(n,i,r,u){var e=!!(i&&i.parentNode),f=n.getCurrentPageName(),o=f.toLowerCase().indexOf(r.toLowerCase())===0;return e&&o&&!n.isPageCreated(f)?n.createNewPage(t,u(),f):undefined},eu=function(){var rt=function(n){return n===void 0&&(n=!1),n?{relation:e.DEFAULT_RELATION_OPERATOR,items:["GroupCompanyId"]}:["GroupCompanyId"]},a=function(n){return ir.containsFeature((n===null||n===void 0?void 0:n.featurePreview)||"",tr.Features.ADVANCED_FILTER)},pt=function(n){var t=n||{getValue:function(){return rt(a(i.currentUser))}},r={getValue:function(){var r=t.getValue(),n=r,u;return e.isFilterState(r)?a(i.currentUser)||(n=e.getFirstLeafItem(r).items,n.length===0&&n.push("GroupCompanyId")):a(i.currentUser)&&(n=o(o({},rt()),{items:r})),e.isFilterState(n)?(n.items.length===0&&n.items.push("GroupCompanyId"),u=e.mapFilterState(n,function(n){return{id:n}})):(n.length===0&&n.push("GroupCompanyId"),u=n.map(function(n){return{id:n}})),u},attachEvent:t.attachEvent||u.NOOP,detachEvent:t.detachEvent||u.NOOP,filterChanged:undefined};return t.attachEvent&&t.attachEvent("selectionChanged",function(){r.filterChanged&&r.filterChanged()}),r},ut=pt(i.filter),n=i.navigator,ft,st,c=function(n,t){t===void 0&&(t=!0);var i=p;return i&&t&&(p=null),r.extend({toolbar:h.getToolbar()},n||{},ht,i||{})},wt=function(t){return function(){var r=n.getCurrentPageName();h.enable();r&&r.toLowerCase().indexOf(t.toLowerCase())!==0||(h.recalcToolbar(),si.focus(c()));cr(i.localizer)}},bt=function(n){var t=n.container?n.container.getElementsByTagName("iframe"):[];t.length&&er(t,function(n){n.src="about:blank"})},ct=function(t,i){if(n.canGoBack())t&&(p={childCallback:t}),n.goBack(i);else{var r=ui.default(n.getCurrentPageName());n.go(r?r:n.getHomePage(),!0)}},lt=function(){y.forEach(function(n){n.hide()});y.length=0},kt={device:"Vehicle"},l={SystemSettings:{set:"EntitiesWasSetWarning",remove:"EntitiesWasRemovedWarning"},def:{set:"EntityWasSetWarning",remove:"EntityWasRemovedWarning"}},at=it.default(i.localizer.translateKey),vt=function(n,t,r){var u=i.localizer,f=u.translateKey(t).replace("{0}",u.translateKey(kt[n]||n).toLowerCase());at.hideMessage(n);y.push(at.displayPopupNotification({message:f+" "+u.translateKey("NotSavedChagesWarning"),group:n,link:{name:u.translateKey("Refresh"),click:function(){r()}}}))},yt=function(n){return n&&n.indexOf("addin-")===0},v=ht.container,dt=!!(v&&v.parentNode),f,h,w,g;et||(et=!0,ut.filterChanged=n.reFocus,n.stateChange(n.reFocus));i.getCurrentPage=n.getCurrentPage;i.getCurrentPageName=n.getCurrentPageName;i.networkStateMonitor=i.networkStateMonitor||tt.default(b.default.getInstance(null,i.localizer),i.localizer.translateKey,i.connection,i.channel);i.notificationCenter=i.notificationCenter||d.NotificationCenter(i.connection,i.channel);i.entitiesLoader.listenToDataMutationEvents(i.notificationCenter);i.resourcesLocker=i.resourcesLocker||k.ResourcesLocker(i.notificationCenter,function(n){var t=l[n]||l.def;return vt(n,t.remove,function(){return ct(undefined)}),!0},function(t){var i=l[t]||l.def;return vt(t,i.set,function(){n.reFocus({forceReload:!0})}),!0});ht.shared={context:i,connection:i.connection,entitiesLoader:i.entitiesLoader,localizer:i.localizer,errorHandler:i.defaultErrorHandler,notificationsService:i.notificationsService,filter:ut,getUrlState:function(){return r.extend(!0,{},n.getState())},updateUrlState:function(t,i){n.setState(t,i===undefined?!0:!!i)},getActionUrl:function(t,i){return n.getLinkTo(t,i)},gotoPage:function(t,i,r){n.gotoClass(t,i,r)},getCurrentPageName:n.getCurrentPageName,completedCallback:ct,uiConfiguration:i.uiConfiguration,channel:i.channel,notificationCenter:i.notificationCenter,resourcesLocker:i.resourcesLocker};"onorientationchange"in window&&sr();f=ht.realPageName||t.split(".").pop()||"";dt&&i.customButtons&&i.customButtons.bind(f,undefined);h=yt(f)?uu():yr();h.disable();ht.pageTooltipHelp=nt.pageTooltipHelpFactory(ht.container&&ht.container.querySelector("#toolTipHelp"),ht.container,{pageName:i.getCurrentPageName(),language:i.localizer.getCultureInfo().language,feedbackTitle:i.localizer?i.localizer.translateKey("SendFeedback"):"Send feedback",helpTitle:i.localizer?i.localizer.translateKey("ShowHelp"):"Show help"});w=fu(n,v,f,c);w?(si=w,ft=si.focus,st=si.blur,si.focus=function(n){i.customButtons.bind(f,undefined);h.focus();lt();ft.apply(si,[c(n)]);i.pageServices.focus(si.getName())},si.blur=function(){var n=st.apply(si,[c(undefined,!1)]);return(n||s.resolve(!0)).then(function(n){return n&&(i.pageServices.blur(f),h.blur(),ht.pageTooltipHelp.shown=!1,lt(),yt(f)||bt(ht)),n})},f=ht.realPageName||(si.getName?si.getName():""),g=si.initialize(c()),g.then(wt(f)),ot.setOptions({container:ht.container}),ot.displayProgress(g)):(h.enable(),h.blur())},pr,lr;if(l.isOldBrowser()){pr=l.isMobileApp()?"/notSupportedMobile.html":"/notSupported.html";location.assign(pr);return}if(ru)i.pageLoadingPromise.then(eu).catch(i.defaultErrorHandler);else if(!st[t]){var or={token:undefined,getPageName:function(){return i.navigator.getCurrentPageName()}},gi=function(n){return n&&!n.isAborted&&hr.handleError(n),n},ou=function(n){var t,i;for(t in n)n.hasOwnProperty(t)&&n[t]===undefined&&delete n[t];return i=rison.encode(r.extend(!0,{},n)),i.substr(1,i.length-2)},wr=function(n,i){var e=t.replace(/\./g,"/").toLowerCase(),f=document.URL,u=n,s=f.toLowerCase().indexOf(e),o="#"+ou(r.extend({},i||{},{credentials:or.token}));return(u.indexOf(".")===-1&&(u="geotab.checkmate.ui."+u),u=u.replace(/\./g,"/"),u.toLowerCase()===e)?f.replace(/\.html.*$/i,".html"+o):f.slice(0,s)+u+".html"+o},ki=i.localizer=w.LocalizerConstructor(ur.getUserProfileUtils(function(){return f.getDetails()},function(n){return h.getUnit(n)})),su=kt.default(),hu=su.getState("groups"),cu=rt.createGoogleAnalytics(u.isTestDomain(location.host),window),br=it.default(ki.translateKey);i.navigator=bt.default(document.body,hu,"",ki,gi,cu,wr);i.getCurrentPage=i.navigator.getCurrentPage;lr=r.extend(!0,{},i.navigator.getState());or.token=lr&&lr.credentials;or.token&&or.token.sessionId&&(c.clearAllKeysStartWith(vr,"sTokens_"),c.clearAllKeysStartWith(vr,"driveAPI_Credentials_"));var hr=b.default.getInstance(null,ki),lu=ni.default(),au=gt.default({localizer:ki},ki.getCultureInfo().language,n.location.getVendorPrefix()),kr=function(n){var t=location.pathname.substring(1).split("/").shift();return n&&n.database||t||""}(or.token),dr=function(n,t){or.token=n;i.navigator.setState(r.extend(!0,{credentials:n},i.navigator.getState()),!1);t(n)},vu=function(n,t){return{database:n,userName:t&&t.userName||"",verificationToken:t&&t.verificationToken||""}},yu=vt.default(au,new ei.PasswordChangeTokenReceiver(i),lu,kr,vu(kr,lr),function(){return!1},document.body),gr=function(n){var t=n.beginGetToken,i=n.beginGetTokenWithUI;return n.beginGetToken=function(n,i,r,u){t(n,function(n){dr(n,i)},r,u)},n.beginGetTokenWithUI=function(n,t,r,u,f){i(n,t,function(n){dr(n,r)},u,f)},n.attachEvent("ResetPassword",function(){br.displayWarning(ki.translateKey("ResetPassExpired"))}),n}(yu),di=i.connection=function(n){var t=lt.default(n,or);return hr.setConnection(t),t}(gr),nu=ct!==!1,ar=i.channel=ii.default(di,hr.handleError,!nu),tu,iu=function(n,u){var o=r.extend({getValue:function(){return[{id:"GroupCompanyId"}]}},yt.default());tu=pt.NotificationsService(di,i.entitiesLoader,gi,ki,ar,wr,u?u.hasAccessTo:function(){return!1});i.webSocketNotifications=i.webSocketNotifications||new ai.WebSocketNotifications(i.channel);i.systemSettingsWatcher=i.systemSettingsWatcher||new nr.SystemSettingsWatcher(i.notificationCenter,i.entitiesLoader,u?u.hasAccessTo:function(){return!1},gi,function(){return i.currentUser.defaultMapEngine}).start(i.systemSettings);i.resourcesLocker=i.resourcesLocker||k.ResourcesLocker(i.notificationCenter);i.entitiesLoader.listenToDataMutationEvents(i.notificationCenter);i.deviceReplacementManager=i.deviceReplacementManager||new yi.DeviceReplacementManager(i.entitiesLoader,i.currentUser,i.localizer);n&&i.notificationCenter&&(i.currentUserWatcher=i.currentUserWatcher||new wt.CurrentUserWatcher(di,i.entitiesLoader,ki,i.notificationCenter,gi).start(n),i.currentUserWatcher.attach("currentUserSecurityGroupsUpdate",function(){alert(ki.translateKey("CurrentUserSecurityGroupsChangeWarning"));window.location.reload()}));ht.pageTooltipHelp=nt.pageTooltipHelpFactory(ht.container.querySelector("#toolTipHelp"),ht.container,{pageName:i.navigator.getCurrentPageName(),language:ki.getCultureInfo().language,feedbackTitle:i.localizer.translateKey("ProblemFeedback"),helpTitle:i.localizer.translateKey("ShowHelp")});ht.shared={context:i,connection:di,entitiesLoader:i.entitiesLoader,localizer:ki,errorHandler:gi,notificationsService:tu,filter:o,getUrlState:function(){return r.extend(!0,{},i.navigator.getState())},updateUrlState:function(n,t){i.navigator.setState(r.extend(n||{},{credentials:or.token}),t===undefined?!0:!!t)},getActionUrl:function(n,t){return i.navigator.getLinkTo(n,t)},gotoPage:function(n,t,r){i.navigator.gotoClass(n,t,r)},getCurrentPageName:function(){var n=i.navigator.getCurrentPage();return n?n.getName():""},completedCallback:function(){i.navigator.canGoBack()&&i.navigator.goBack()},uiConfiguration:u,channel:ar,notificationCenter:i.notificationCenter,resourcesLocker:i.resourcesLocker};var f=yr(),e=function(){return r.extend({toolbar:f.getToolbar()},ht)},s=function(){f.enable();f.recalcToolbar();si.focus(e());i.navigator.stateChange(function(){si.focus(e())});window.addEventListener("resize",si.resize,!1)};si=i.navigator.createNewPage(t,e());f.disable();!u||u.pagesSecurity.hasAccessToPage(si.getName())?si.initialize(e()).then(s):(br.displayPopupNotification({message:ki.translateKey("WrongPageWarning")}),setTimeout(function(){window.location.href=window.location.origin+"/"+di.token.database},5e3))},pu=n.location.getVendorPrefix();i.defaultErrorHandler=gi;i.addinsStorage=new oi.AddinsStorage(s.resolve([]),new pi.EmptyAddinResolver,function(){return!1});i.networkStateMonitor=i.networkStateMonitor||tt.default(hr,ki.translateKey,di,ar);i.networkStateMonitor.attachEvent("NetworkConnectionFound",hr.connectionFound);i.networkStateMonitor.attachEvent("NetworkConnectionLost",hr.connectionLost);i.backButton=new rr.EmptyBackButton;i.notificationCenter=i.notificationCenter||d.NotificationCenter(i.connection,i.channel);st[t||""]=!0;nu?gr.beginGetToken(di.getBasicConnection(),function(t){di.token=t;di.call("Get",{typeName:"User",search:{name:di.token.userName}}).andAlso("Get",{typeName:"Group",search:{id:"GroupSecurityId"}}).andAlso("Get",{typeName:"SystemSettings"}).andAlso("GetVersion",u.getDbParams(di.token.database||n.location.database)).andAlso("GetEULA",{domain:pu.domain||""}).andAlso("GetVersionInformation").beginInvoke(function(t){var r=t[0][0],e=at.default(t[1]).getUiConfiguration(r.securityGroups[0]),o=t[2][0],b=t[5],y=!!b.serverFlags,k=dt.PagesSecurity(r,e.acl,li.hasDomainAccessToWhiteLabelPageFn(n.location.getVendorPrefix().domain),o.customCode,!y),c,p,w;i.entitiesLoader=g.default(ut.default(di));i.uiConfiguration={pagesSecurity:k,acl:e.acl,hasAccessTo:e.hasAccessTo,containsAny:e.containsAny,isEverything:e.isEverything,isMobile:l.isMobile(),amountRowsInList:wi.getRequestQuota(),supportedMapProviders:ti.loadProvidersSupport(i.entitiesLoader,gi,e.hasAccessTo,o.customWebMapProviderList)};i.userActivityTracker=new ri.UserActivityTracker(window,o.userTimeoutPeriod).start().attach("inactive",function(){f.reset();i.loggedInStatusBox&&i.loggedInStatusBox.logout();i.userActivityTracker.stop()});new fi.SessionRestorer(i.userActivityTracker).attach("restore",function(){di.call("Authenticate",{}).beginInvoke(u.NOOP,u.NOOP)});i.eula=bi.parseEulaPath(t[4],r.language,o.jurisdiction||"");i.isMyAdmin=u.isMyAdminUser(r);i.filterUsers=u.filterUsersFn(r);i.currentUser=r;i.systemSettings=o;i.startVersion=t[4];i.isUserFirstVisit=r.acceptedEULA===0||r.acceptedEULA===undefined;i.isThirdPartyLoggingAllowed=y;i.isFedRamp=!i.isThirdPartyLoggingAllowed;i.getControlAnalytics=function(t){return new ci.ControlAnalytics(t,rt.createGoogleAnalytics(u.isTestDomain(n.location.host),window))};c=fr.hasAccessToUserProfile(i.uiConfiguration.hasAccessTo);h instanceof v.EmptyUnitOfMeasureLoader&&(h=new v.UnitOfMeasureLoader(i.entitiesLoader.displayUnitOfMeasure.getItemsByValue,function(n){return hr.handleError(n)},c));f instanceof a.EmptyUserProfileLoader&&(f=new a.UserProfileLoader(i.entitiesLoader,i.notificationCenter,function(n){return hr.handleError(n)},c),p=function(){if(ft.isReadyForCultureUpdate(si)){var n=ki.getCultureInfo();si.onCultureInfoChange(ft.getUserProfileCultureChange(n))}},f.attach("profileChange",p));w=s.together([f.setUser(r).always(u.NOOP),h.getAllUnits().always(u.NOOP)]).then(u.NOOP);i.connection.token.userName=r.name;ki.setCultureInfo(di,function(n){return i.entitiesLoader.call("Translate",n,!1)},r,!0,function(){iu(r,i.uiConfiguration)},gi,w)},gi)},gi):(i.entitiesLoader=g.default(ut.default(di)),ki.setCultureInfo(di,function(n){return i.entitiesLoader.call("Translate",n,!1)},w.cultureInfo(hi.getDefaultLanguage(),!0,"LitersPer100Km","LitersEPer100Km","dd MMM yyyy","HH:mm:ss","","Sunday"),!0,function(){return iu()},gi))}},hr=function(n){return{container:n,els:or(n.querySelectorAll("*[data-elt], *[id]"),function(n,t){return n[t.getAttribute("data-elt")||t.id||""]=t,n},{})}},cr=function(n){ht||i.entitiesLoader.systemSettings.getItemsByValue().then(function(t){var u=t[0],f,i;u.demoConfiguration&&(f=gi.addHours(u.demoConfiguration.creationDate,u.demoConfiguration.hoursToExpiry),i=r.textToHTML(di.default),s.together([n.translateSentences(["Demo Database","Ok"]),n.translateHtml(i)]).then(function(t){var u=t[0],e=i[0].querySelector(".demo-warning__desc"),r;e.textContent=(e.textContent||"").replace("{0}",n.toShortDate(f));r=ki.VanillaDialog(i[0],{isModal:!0,id:"demo-warning",addCloseButton:!1,title:u.dict["Demo Database"],buttons:[{name:u.dict.Ok,click:function(){ht=!0;r.close()}}]},n.translateKey);r.show()}))})};t.default=lr;t.PureCustomerPageStart=ar})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/startPage"),geotab.commonjs.generateExport("geotab/checkmate/startPage"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=require("../../vanillaExtension/vanilla"),s=require("../../vanillaExtension/vanillaDialog"),h=require("../eventHandler"),r=h.default(),f=u.create("DIV",{"class":"confirmDialog alert alert--error"}),o=u.create("span"),e=u.create("a",{"class":"link",href:""}),i,c=function(n){n.preventDefault();r.fireEvent("onSuccess",null)},l=function(n,t){n===void 0&&(n="");var u=/http:/ig,i,r,f;if(u.test(n))return!0;if(t)for(f=t.length,i=0;i<f;i++)if(r=t[i],r&&u.test(r))return!0;return!1},a=function(n,t){t===void 0&&(t=!1);var v=t?"UnsafeAddInContentLoadingWarning":"UnsafeContentLoadingWarning",u=!1,h=[],c=[],y=function(){h=[];c=[]},a=function(n){for(var r=n.length,t=0;t<r;t++)n[t]();y();i&&i.close()},p=function(t){return i||(i=s.VanillaDialog(f,{isModal:!0,addCloseButton:!1,width:500,id:t,parentNode:document.body,buttons:[{name:"cancel",click:function(){r.fireEvent("onCancel",null)}}]},n)),i},w=function(){a(h)},b=function(){a(c)};return r.attachEvent("onSuccess",w),r.attachEvent("onCancel",b),{reset:function(){u=!1},check:function(t,i,r,f,s){if(t&&!u&&l(i,s)){h.push(r);c.push(f);u=!0;var a=p("unsafe-loading");a.isShown()||(o.textContent=n(v)+" ",e.textContent=n("ProceedText"),a.title.set(n("UnsafeContentLoading")),a.show(null))}else r()}}};e.addEventListener("click",c,!1);f.appendChild(o);f.appendChild(e);t.default=a})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/externalLinkAuditor"),geotab.commonjs.generateExport("geotab/checkmate/ui/externalLinkAuditor"));
(function(n,require,t){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});t.parsePage=void 0;var o=/<body[^>]*>([\s\S]*)<\/body[\s]*>/im,r=/<script[^>]*>([\s\S]*?)<\/script[\s]*>/igm,s=/<title[^>]*>([^<]*)<\/title[\s]*>/igm,u=/<link[^>]*>/igm,f=function(){return{body:"",title:"",scripts:[],links:[],error:undefined}},h=function(n){var t=function(n){var t,e,u;return(o.lastIndex=0,r.lastIndex=0,s.lastIndex=0,t=o.exec(n),!t||t.length<2)?i(i({},f()),{error:new Error("Page should have body tag")}):(e=t[1],u=s.exec(n),i(i({},f()),{scripts:k(n),links:g(n),body:e.replace(r,""),title:u?u[1]:""}))};try{return t(n)}catch(u){return i(i({},f()),{error:u})}};t.parsePage=h;var c=/<script[^>]*src[\s]?=[\s]?['"]\S*['"][^>]*>/i,l=/src[\s]?=[\s]?['"]\S*['"]/i,a=/<script[^>]*type[\s]?=[\s]?['"]\S*['"][^>]*>/i,v=/type[\s]?=[\s]?['"]\S*['"]/i,y=/<script[^>]*id[\s]?=[\s]?['"]\S*['"][^>]*>/i,p=/id[\s]?=[\s]?['"]\S*['"]/i,w=/['"]/gi,b=/['"]$/gi,e=function(n,t,i){var r=(t.match(n)||[""])[0],u;return r&&(r=t.match(i)[0],u=r.search(w)+1,r=r.substring(u,r.search(b))),r},k=function(n){var f=[],t,i,u;for(r.lastIndex=0,t=r.exec(n);t;)i=t[0]||"",u={type:e(a,i,v),src:e(c,i,l),id:e(y,i,p),script:t[1]||""},(u.src||u.script)&&f.push(u),t=r.exec(n);return f},d=/rel=['"]?stylesheet['"]?/i,g=function(n){var r=[],t,i;for(u.lastIndex=0,t=u.exec(n);t;)t[0].search(d)!==-1&&(i=t[0].match(/["']\S*(\.css|\.less)/ig),i&&r.push(i[0].replace('"',""))),t=u.exec(n);return r}})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/htmlParser"),geotab.commonjs.generateExport("geotab/checkmate/htmlParser"));
(function(n,require,t){"use strict";function f(n,t,r,u,s){return u===void 0&&(u=1),v(n).then(function(n){return o(n)?e(n,t,r).then(function(i){return f(i,t,r,u,s||n.url)}):(n.downloadUrl=s||"",i.resolve(n))}).catch(a(n,t,u,r))}var s=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),e,o;Object.defineProperty(t,"__esModule",{value:!0});t.getAddin=t.getUrlToExternalFile=t.loadConfigFiles=void 0;var i=require("../deferred"),r=require("../../utils"),u=function(n){function t(t,i,r,u){i===void 0&&(i=!1);r===void 0&&(r=!1);var f=n.call(this,t.message)||this;return f.retry=i,f.displayAsWarning=r,f.additionalInfo=u,f}return s(t,n),t}(Error),h=function(n){if(typeof fetch!="undefined")return fetch(n,{headers:{"Content-Type":"application/json","Cache-Control":"public, must-revalidate, max-age=0"}}).then(function(n){return n.text()});var t=new XMLHttpRequest,u=i.Deferred();return t.open("GET",r.sanitizeCRLF(n),!0),t.setRequestHeader("Content-Type","application/json"),t.setRequestHeader("Cache-Control","public, must-revalidate, max-age=0"),t.onreadystatechange=function(){t.readyState===4&&(t.status===200?u.resolve(t.responseText):u.reject(new Error("Can't load add-in configurations")))},t.timeout=3e5,t.ontimeout=function(){u.reject(new Error("Timeout"))},t.onerror=function(){u.reject(new Error("Can't load add-in configurations"))},t.send(null),u.promise()};t.loadConfigFiles=h;var c=function(n){var t=n.message;return typeof t=="string"?new u(new Error(t),!0):new u(new Error("Unexpected error"),!1,!1,t)},l=function(n,t,i,r,e){if(i>0){var o=i-1;return f(n,t,r,o)}throw new u(new Error("AddinDownloadError"),!1,!0,e.additionalInfo);},a=function(n,t,i,r){return function(u){if(u.retry)return l(n,t,i,r,u);throw u;}},v=function(n){return i.resolve(n).then(JSON.parse)},y=r.memOnce(function(){return["https://app.geotab.com",window.location.origin]}),p=function(n,t){var i=y();return i.some(function(t){return n.indexOf(t)===0})?n:"RequiredExternal?resource="+encodeURIComponent(n)+r.credentialsToString(t)};t.getUrlToExternalFile=p;e=function(n,i,r){return r(t.getUrlToExternalFile(n.url,i)).catch(function(n){throw c(n);})};o=function(n){return n.hasOwnProperty("url")};t.getAddin=f})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/addinsTools/getAddin"),geotab.commonjs.generateExport("geotab/checkmate/addinsTools/getAddin"));
(function(n,require,t){"use strict";function w(t,w,b,k,d){var pt=/<body[^>]*>([\s\S]*)<\/body[\s]*>/im,rt=/<img[^>]*>/igm,st="text/javascript",wt=function(n){var t=ct.createElement("SCRIPT"),i;t.setAttribute("type",n.type||st);i=n.script;t.text=i;n.id&&(t.id=n.id);ft.appendChild(t)},bt=function(n,t){var r,o,u=i.Deferred();if(n.src){var s=function(){r.removeEventListener("error",c,!1);r.removeEventListener("load",h,!1)},h=function(){u.resolve(o);s()},c=function(){s();--n.retry>0?(r.parentNode&&r.parentNode.removeChild(r),r=l(n)):u.reject(new f.NotSevereError("Error during loading: "+o))},l=function(n,i){i===void 0&&(i="");var r=e.create("SCRIPT");return o=t&&n.src.indexOf("//")===-1?t+n.src:n.src,r.async=!1,r.src=o+i,r.type=n.type||st,r.addEventListener("error",c,!1),r.addEventListener("load",h,!1),n.id&&(r.id=n.id),ft.appendChild(r),r};r=l(n)}else{try{wt(n)}catch(a){u.reject(a)}u.resolve("")}return u.promise()},ht=function(n,t,r){return n.reduce(function(n,t){var i=n[n.length-1],r=i?i[0]:null;return r&&!r.src==!t.src?i.push(t):n.push([t]),n},[]).reduce(function(n,u){return n.then(function(){return i.together(u.map(function(n){return bt(n,t).then(function(){return n.post(r,n)})}))})},i.resolved())},kt=function(){return Array.prototype.reduce.call(document.getElementsByTagName("LINK"),function(n,t){var i=(t.getAttribute("href")||"").split("?")[0]||"";return n[i]=!0,n["/"+i]=!0,n},{})},dt=function(n,t){var r=n,u,f,e,o,i,s;for(rt.lastIndex=0,u=rt.exec(r);u;)f=u[0],e=ui(ni,f,ti),e&&(o=e,i=e,i.substr(0,2)==="./"&&(i=i.replace("./","")),t&&i[0]!=="/"&&i.indexOf("//")===-1&&(i=t+i),o!==i&&(s=f.replace(o,i),r=r.replace(f,s))),u=rt.exec(r);return r},gt=function(n){n.forEach(function(n){ft.appendChild(e.create("LINK",{href:n,rel:"stylesheet"}))})},ni=/<img[^>]*src[\s]?=[\s]?['"]\S*['"][^>]*>/i,ti=/src[\s]?=[\s]?['"]\S*['"]/i,ii=/['"]/gi,ri=/['"]$/gi,ui=function(n,t,i){var r=(t.match(n)||[""])[0],u;return r&&(r=t.match(i)[0],u=r.search(ii)+1,r=r.substring(u,r.search(ri))),r},fi=function(t){var i,r;n.addin&&t&&(i=Object.keys(n.addin).filter(function(t){return typeof n.addin[t]=="function"&&!n.addin[t].hasOwnProperty("hash")})[0],i&&(r="addin_"+u.generateId(),n.addin[r]=n.addin[i],n.addin[r].hash=t,delete n.addin[i]))},ei=function(t,i){i.collectionPath&&n.addLoaded([i.collectionPath])},ut,ct=document,ft=ct.getElementsByTagName("HEAD")[0],g,tt={},oi="geotab/checkmate/ui/",nt,si=function(n){(nt||(nt=document.getElementsByTagName("title")[0])||{innerHTML:""}).text=n},hi=function(){return nt=nt||document.getElementsByTagName("title")[0],nt&&nt.textContent},lt=function(){tt[g]&&si(tt[g])},ci=function(){var t=n.location.getVendorPrefix(),i=t.domain;return i?function(t){return t+" | "+n.location.getVendorTitle()}:u.echo}(),et=c.Tasks(),at=function(){var t={},r=function(n,t){return n.indexOf("http")!==0?h.loadContent(n):t?h.loadContent(p.getUrlToExternalFile(n,t)):i.reject(new Error("Couldn't load add-in files without credentials"))},u=function(n,t){var u=i.Deferred();return ot.reset(),ot.check(!0,n.url,function(){i.together([r(n.url,t).catch(function(t){if(t.status===403){var r=new f.NotSevereError(k("AddinFileLoadWarning"));return r.isHandled=!0,i.reject(r)}return new f.NotSevereError("Add-In files: "+n.url+" couldn't be loaded. Probably they were moved to another location or removed.")}),r(n.translation,t).catch(function(){return null})]).then(function(n){var t=n[0],i=n[1];u.resolve({content:t,translation:i})},function(n){u.reject(n)})},function(){u.reject(new f.AbortException)}),u.promise()},e=function(t){return ht([{src:t.pageName+".js",type:"",id:"",script:""}].map(yt(n.getLoaded(),!1)),"","")},o=function(t){var u=t.url,r=i.Deferred(),f=n.load(u,function(n){typeof n=="string"&&n.match(pt)?r.resolve({translation:null,content:n}):r.reject(s.default(f,"ResourceLoadFailed",null,{url:u}))},function(){return r.reject(s.default(f,"ResourceLoadFailed",null,{url:u}))});return r.promise()},c=function(n){return i.together([o(n),e(n)]).then(function(n){return n[0]})};return function(n,r){var f=n.url,e;return t[f]||(e=n.isExternal?u:c,t[f]=e(n,r).catch(function(){return e(n,r)})),t[f].then(function(t){var i=t.content,r=t.translation;return{content:i,translation:r,pageRequest:n}},function(n){return delete t[f],i.reject(n)})}}(),vt=function(n){n&&!n.isAborted&&b(n)},li=function(n){return o(o([],n.links),n.scripts.map(function(n){return n.src}).filter(function(n){return!!n}))},ai=function(n){return n[0].toUpperCase()+n.substring(1)},vi=function(t){var i="geotab.checkmate.ui.",r,u;if(n.checkmate&&n.checkmate.ui){if(typeof n.checkmate.ui[t]=="function")return i+t;if(r=ai(t),typeof n.checkmate.ui[r]=="function")return i+r}return typeof n.commonjs.requireRef(i+t).default=="function"?i+t:(u=t.split("/")[0],typeof n.commonjs.requireRef(i+u).default=="function")?i+u:""},it=[],yi=function(n){return function(t){return!n[t]}},pi=function(n){return function(t){return n&&t.indexOf("//")===-1?n+t:t}},wi=function(){var n=["/geotab.js"];return function(t){return n.every(function(n){return t.src.indexOf(n)===-1})}},yt=function(n,t){return function(i){var r={type:i.type,src:i.src,id:i.id,script:i.script,collectionPath:"",retry:1,post:u.NOOP},f;return r.src&&!t&&r.src.indexOf("https://")===-1&&(f="",f+=r.src.indexOf("../")!==-1?"/"+r.src.replace(/\.\.\//g,""):"GCU."+r.src.split(".")[0],n.some(function(n){return n===f})?r.src="":(r.src="RequiredScripts?i="+f+"&x="+n.join("&x="),r.collectionPath=f,r.post=ei,r.retry=3)),t&&(r.post=fi),r}},bi=function(t,i){var r=y.parsePage(t);return{error:r.error,bodyContent:dt(r.body,i.prefix),title:r.title,links:r.links.filter(yi(kt())).map(pi(i.prefix)),scripts:r.scripts.filter(i.isExternal?u.echo:wi()).map(yt(n.getLoaded(),i.isExternal)).filter(function(n){return!!(n.script||n.src)})}},ki=function(n){var i=n.pageRequest,u=bi(n.content,i),e=!1,f=r.default("Inject page");return f.always(function(){e=!0}),u&&!u.error?ot.check(i.isExternal,i.prefix,function(){tt[g]=ci(u.title);t.innerHTML=u.bodyContent||"";var r=ht(u.scripts,i.prefix,i.hash).then(function(){if(!i.isExternal&&!e){var r=setTimeout(function(){var r=w.get(i.pageName),n;r||(n=vi(i.rawUrl||""),n&&l.default(n,t))},1);f.fail(function(){return r&&clearTimeout(r)})}f.resolve(n)},function(n){f.reject(n)});gt(u.links);lt();it.push(r)},function(){f.reject({isAborted:!0})},li(u)):f.reject(u.error),f},di=function(n){var t=i.Deferred();return i.together(it).then(function(){it.length=0;t.resolve(n)},function(){it.length=0;t.resolve(n)}),t.promise()},ot=v.default(k),gi=function(n){for(var t="",i=n;i!==t;)t&&(i=t),t=decodeURIComponent(i);return i},nr=function(n){for(var r=gi(n).split(/[\\\/]/),t=[],i;r.length>0;)if(i=r.shift(),i!=="."){if(i===".."){t.length>0&&t.pop();continue}t.push(i)}return t.join("/")},tr=function(n){var t=typeof n=="string",r=t?{}:n||{},i=nr(t?n:n?n.rawUrl:""),u=t&&/\w\/\w/g.test(i),f=t?oi+(u?i.replace(/\/\w+.*$/,""):i)+".html":i;return{pageName:i,rawUrl:n,isExternal:!t,isParametrized:u,hash:r.hash||"",prefix:r.prefix||"",translation:r.translation||"",url:f}},ir=function(){var n=undefined;return function(t,r){if(!t)return i.resolve(undefined);if(n)return n;var u=t.blur()||i.resolve(!0);return n=u.catch(function(){return!0}).then(function(t){return(n=undefined,!t)?(d(r),i.reject(new f.AbortException)):undefined})}}();return{load:function(n,i,f,o){var h,s,c,l;return(f===void 0&&(f=u.NOOP),h=tr(n),s=h.pageName,ut=ut||a.default(t.style.display!=="none"?t:document.body),s===g)?r.resolveTask().promise():(c=w.get(g),g&&(tt[g]=hi()),w.get(s)||at(h,o),et.abort(),l=r.toTask(ir(c,i)).andThen(function(){var n,i,u;if(c&&(c.content=Array.prototype.slice.call(t.children),e.empty(t)),g=s,n=w.get(s),n){et.abort();i=r.default("uncaching "+s).done(f).fail(vt);try{e.empty(t);n.content&&n.content.forEach(function(n){t.appendChild(n)});n.focus();lt();i.resolve(n)}catch(l){i.reject(l)}return i}return u=r.toTask(at(h,o)).andThen(di).andThen(ki).done(function(n){f(null,n.translation)}).fail(vt),ut.displayProgress(u),u}),et.add(l),l.promise())}}}var o=this&&this.__spreadArray||function(n,t){for(var i=0,u=t.length,r=n.length;i<u;i++,r++)n[r]=t[i];return n};Object.defineProperty(t,"__esModule",{value:!0});var r=require("../task"),u=require("../../utils"),c=require("../tasks"),i=require("../deferred"),l=require("../startPage"),a=require("./waiting"),e=require("../../vanillaExtension/vanilla"),s=require("../exceptions/networkException"),f=require("../exceptions/commonExceptions"),v=require("./externalLinkAuditor"),y=require("../htmlParser"),p=require("../addinsTools/getAddin"),h=require("../../utils/loadFiles");t.default=w})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/pageLoader"),geotab.commonjs.generateExport("geotab/checkmate/ui/pageLoader"));
(function(n,require,t){"use strict";function r(){var n={},t=function(n,t){var r=!1,u=!1;return{content:[],getOriginalPage:function(){return t},getName:function(){return n},isActive:function(){return r},focus:function(n){u&&(r=!0,t.focus.call(t,n))},blur:function(n){return u?(r=!1,t.blur.call(t,n)):undefined},initialize:function(n){return(t.initialize(n)||i.resolve(undefined)).then(function(){u=!0})},onCultureInfoChange:function(n){t.onCultureInfoChange&&t.onCultureInfoChange.call(t,n,r)},resize:function(){t.resize&&u&&t.resize.call(t)}}};return{get:function(t){return t?n[t]:undefined},set:function(i,r){var u=t(i,r);return n[i]=u,u},remove:function(t){var i=n[t];i&&(console.log("destroying "+t),delete n[t])},count:function(){return Object.keys(n).length},forEachPage:function(t){return Object.keys(n).forEach(function(i){return n[i]&&t(n[i])})},getActive:function(){for(var t,r=Object.keys(n),i=0;i<r.length;++i)if(t=n[r[i]],t&&t.isActive&&t.isActive())return t;return undefined}}}Object.defineProperty(t,"__esModule",{value:!0});var i=require("../deferred");t.default=r})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/dynamicPagesCollection"),geotab.commonjs.generateExport("geotab/checkmate/ui/dynamicPagesCollection"));
(function(n,require,t){"use strict";var i,r,u,f,e;Object.defineProperty(t,"__esModule",{value:!0});t.getFilterSearchParams=t.isGroupListStateOutput=t.convertGroupsListSearch=t.mapStandardToAdvancedProps=void 0;i=require("./advancedEntitiesNavigatorUtilites");r=require("../../../../vanillaExtension/vanilla");t.mapStandardToAdvancedProps={groups:"groupFilterCondition",companyGroups:"userGroupFilterCondition",driverGroups:"driverGroupFilterCondition",filter:"filterListSearch"};u=function(n){var t=r.extend(!0,{},n),f=function(n){return{groupId:n.id}},u=function(n){var r=n.items,t=r.map(function(n){return i.isFilterState(n)?u(n):f(n)});return t.length===1?t[0]:{relation:n.relation,groupFilterConditions:t}};return t=i.clearFilterState(t),u(t)};t.convertGroupsListSearch=u;f=function(n){return!!n.relation&&!!n.groupFilterConditions};t.isGroupListStateOutput=f;e=function(n,r){var f,e,o,s=n&&i.tryToConvertToSimpleState(n),c=t.mapStandardToAdvancedProps[r],u,h;return i.isFilterState(s)?(u=t.convertGroupsListSearch(s),t.isGroupListStateOutput(u))?(f={},f[c]=u,f):(h=i.getFilterStateGroupHash(n),e={},e[r]=[h[u.groupId]],e):(o={},o[r]=s,o)};t.getFilterSearchParams=e})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/advancedGeotabEntitiesNavigator/advancedSearchParamsConverter"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/advancedGeotabEntitiesNavigator/advancedSearchParamsConverter"));
(function(n,require,t){"use strict";var f,e;Object.defineProperty(t,"__esModule",{value:!0});t.isInsecure=t.getAdvancedGroupFilter=t.getSimpleGroupFilter=void 0;var i=require("../ui/modules/advancedGeotabEntitiesNavigator/advancedEntitiesNavigatorUtilites"),o=require("../constants/groupConstants"),r=require("../ui/modules/advancedGeotabEntitiesNavigator/advancedSearchParamsConverter"),u=function(n){return i.tryToConvertToSimpleState(n)},s=function(n){var t=u(n);return i.isFilterState(t)?[{id:o.ENTIRE_ORGANIZATION_GROUP_ID}]:t};t.getSimpleGroupFilter=s;f=function(n){var f=i.toFilterState(u(n)),t=r.convertGroupsListSearch(f);return r.isGroupListStateOutput(t)?t:{relation:"Or",groupFilterConditions:[t]}};t.getAdvancedGroupFilter=f;e=function(n){return n.trim().toLowerCase().indexOf("http:")!==0};t.isInsecure=e})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/addinsTools/addinUtils"),geotab.commonjs.generateExport("geotab/checkmate/addinsTools/addinUtils"));
(function(n,require,t){"use strict";function f(n,t,f,e,o){var c,y=function(n){try{return n?JSON.parse(n):null}catch(t){return null}},s=y(o),l=s!==null,a=f||{getValue:function(){return[]}},p=function(n){var t=n.hasAttribute("data-ignore"),i=n.tagName.toLowerCase()==="textarea";return t||i},w=["placeholder","title","aria-label"],b=function(n){n.getAttribute&&w.forEach(function(t){var i=n.getAttribute(t);i&&n.setAttribute(t,h(i))})},v=function(n){for(var r=n.childNodes,t,i=0;i<r.length;i++)t=r[i],t.nodeType===3?t.textContent=h(t.textContent||""):t.nodeType!==1||p(t)||(v(t),b(t));return n},h=function(n){if(l){var t=n.trim();if(t.length!==0)return typeof s[t]!="undefined"?s[t]:t}return n},k=function(n){if(n){if(typeof n=="string")return h(n);l&&v(n)}return n},d=function(n){if(n.trim()==="")throw new Error("Invalid GA_MEASUREMENT_ID");return function(t,r){e()("event",t,i(i({},r),{send_to:n}))}};return c={getState:function(){return r.extend(!0,{},n.getState()||{})},setState:function(t){n.setState(r.extend(c.getState(),t))},gotoPage:function(i,r){var u=n.getNextPageName(i);return t(u)?(n.gotoClass(u,r),!0):!1},hasAccessToPage:t,getGroupFilter:function(){return u.getSimpleGroupFilter(a.getValue())},getAdvancedGroupFilter:function(){return u.getAdvancedGroupFilter(a.getValue())},translate:k,createGtag:d}}var i=this&&this.__assign||function(){return i=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i.apply(this,arguments)},r,u;Object.defineProperty(t,"__esModule",{value:!0});t.CustomPageApi=void 0;r=require("../../vanillaExtension/vanilla");u=require("../addinsTools/addinUtils");t.CustomPageApi=f})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/customPageApi"),geotab.commonjs.generateExport("geotab/checkmate/ui/customPageApi"));
(function(n,require,t){"use strict";function r(t){var u=function(){n.addin.Promise||(n.addin.Promise=function(t){return n.promise(t)},Object.keys(n.promise).forEach(function(t){n.addin.Promise[t]=n.promise[t]}),n.addin.Promise.hash=!0,Object.freeze(n.addin.Promise))},r=function(){throw new Error("MethodNotSupported");};return u(),{call:function(r,u,f,e){return n.promise(function(n,o){t.call(r,u).beginInvoke(f||i.NOOP,e||i.NOOP).done(n).fail(o)})},multiCall:function(r,u,f){return n.promise(function(n,e){var s=function(t){u&&u(t);n(t)},h=function(n){f&&f(n);e(n)},o;r.length===1?t.call(r[0][0],r[0][1]).beginInvoke(i.NOOP,i.NOOP).done(function(n){return s([n])}).fail(h):(o=r.reduce(function(n,i){return n?(n.andAlso(i[0],i[1]),n):t.call(i[0],i[1])},null),o&&o.beginInvoke(i.NOOP,i.NOOP).done(s).fail(h))})},forget:r,getSession:function(n,i){i===void 0&&(i=!1);i?r():n(t.token,location.host)}}}Object.defineProperty(t,"__esModule",{value:!0});require("./promise");var i=require("./utils");t.default=r})(geotab,geotab.commonjs.generateRequire("geotab/geotabApi"),geotab.commonjs.generateExport("geotab/geotabApi"));
(function(n,require,t){"use strict";function o(t){var v=t.shared.connection,y=t.shared.errorHandler,p=function(){return e.getGtag(window)},h=u.default(v),c=r.CustomPageApi(t.shared.context.navigator,t.shared.uiConfiguration.pagesSecurity.hasAccessToPage,t.shared.filter,p,t.translation),l=function(t){for(var u=Object.keys(n.addin),f,r,i=0;i<u.length;++i)if(f=u[i],r=n.addin[f],typeof r=="function"&&r.hash===t)return r;return null}(t.realPageName),o=l&&l(h,c),s=function(n){return function(){for(var s,r,e=[],u=0;u<arguments.length;u++)e[u]=arguments[u];s=o&&o[n]||function(n,t,i){return i()};try{s.apply(o,i([h,c],e))}catch(f){r=typeof f=="string"?new Error(f):f;r.data=["Error happened after calling method '"+n+"' or the "+t.realPageName+" page."];r.isAddin=!0;r.url=t.realPageName;y(r)}}},w=s("initialize"),a=s("focus"),b=s("blur");return{initialize:function(){var n=f.Deferred();return w(function(){n.resolve()}),n.promise()},focus:function(){a()},onCultureInfoChange:function(){a()},blur:function(){b()}}}var i=this&&this.__spreadArray||function(n,t){for(var i=0,u=t.length,r=n.length;i<u;i++,r++)n[r]=t[i];return n};Object.defineProperty(t,"__esModule",{value:!0});var r=require("./customPageApi"),u=require("../../geotabApi"),f=require("../deferred"),e=require("./auditTools/gtag");t.default=o})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/customPage"),geotab.commonjs.generateExport("geotab/checkmate/ui/customPage"));
(function(n,require,t){"use strict";function e(n){var a=function(t){return n.toLocalDateTime(t,c)},h=function(t){return n.toReverseOffsetDateTime(t,c)},c,l=function(n,t){var u=n||new Date,i=u.getDay(),r=t?f.dayNames.indexOf(t):0;return i-r+(r>i?7:0)},t=function(){var n=a(new Date);return new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0)},e=function(){var n=a(new Date);return new Date(n.getFullYear(),n.getMonth(),n.getDate(),23,59,59,0)},o={live:"Live",previousHour:"PreviousHour",today:"Today",tomorrow:"Tomorrow",yesterday:"Yesterday",thisWeek:"ThisWeek",lastWeek:"LastWeek",lastWorkingWeek:"LastWorkingWeek",thisWorkingWeek:"ThisWorkingWeek",thisMonth:"ThisMonth",lastMonth:"LastMonth",previousDay:"PreviousDay",previousWeek:"PreviousWeek",nextWeek:"NextWeek",nextMonth:"NextMonth",previousTwoWeeks:"PreviousTwoWeeks",previousFourWeeks:"PreviousFourWeeks",previousThirtyDays:"PreviousThirtyDays",lastThreeMonths:"LastThreeMonths",lastSixMonths:"LastSixMonths",lastTwelveMonths:"LastTwelveMonths",yearToDate:"YearToDate",forever:"Forever",lastQuarter:"LastQuarter",custom:"custom"},v={PreviousHour:function(){var n=new Date,t;return n.setMilliseconds(0),t=new Date(n.valueOf()),i.addHours(t,-1),{startDateTime:t,endDateTime:n}},Today:function(){return{startDateTime:t(),endDateTime:e()}},Live:function(){return{startDateTime:t(),endDateTime:i.addDays(e(),-2)}},Tomorrow:function(){return{startDateTime:i.addDays(t(),1),endDateTime:i.addDays(e(),1)}},Yesterday:function(){return{startDateTime:i.addDays(t(),-1),endDateTime:i.addDays(e(),-1)}},ThisWeek:function(){var r=t(),u=l(r,n.getCultureInfo().firstDayOfWeek);return{startDateTime:i.addDays(r,-u),endDateTime:i.addDays(e(),6-u)}},NextWeek:function(){var r=t(),u=l(r,n.getCultureInfo().firstDayOfWeek),f=e();return{startDateTime:i.addDays(r,-u+7),endDateTime:i.addDays(f,-u+13)}},LastWeek:function(){var r=t(),u=l(r,n.getCultureInfo().firstDayOfWeek);return{startDateTime:i.addDays(r,-u-7),endDateTime:i.addDays(e(),-1-u)}},LastWorkingWeek:function(){var n=t(),r=n.getDay();return{startDateTime:i.addDays(n,-6-r),endDateTime:i.addDays(e(),-2-r)}},ThisWorkingWeek:function(){var n=t(),r=n.getDay();return{startDateTime:i.addDays(n,1-r),endDateTime:i.addDays(e(),5-r)}},ThisMonth:function(){var r=t(),n;return r.setDate(1),n=e(),i.addMonths(n,1),n.setDate(1),n.setHours(0),n.setMinutes(0),{startDateTime:r,endDateTime:i.addMinutes(n,-1)}},NextMonth:function(){var r=i.addMonths(t(),1),n;return r.setDate(1),n=i.addMonths(t(),2),n.setDate(1),n.setHours(0),n.setMinutes(0),{startDateTime:r,endDateTime:i.addMinutes(n,-1)}},LastMonth:function(){var r=i.addMonths(t(),-1),n;return r.setDate(1),n=e(),n.setDate(1),n.setHours(0),n.setMinutes(0),{startDateTime:r,endDateTime:i.addMinutes(n,-1)}},PreviousDay:function(){return{startDateTime:i.addDays(t(),-1),endDateTime:e()}},PreviousWeek:function(){return{startDateTime:i.addDays(t(),-7),endDateTime:e()}},PreviousTwoWeeks:function(){return{startDateTime:i.addDays(t(),-14),endDateTime:e()}},PreviousFourWeeks:function(){return{startDateTime:i.addDays(t(),-28),endDateTime:e()}},PreviousThirtyDays:function(){return{startDateTime:i.addDays(t(),-30),endDateTime:e()}},LastThreeMonths:function(){var r=i.addMonths(t(),-3),n;return r.setDate(1),n=e(),n.setDate(1),n.setHours(0),n.setMinutes(0),{startDateTime:r,endDateTime:i.addMinutes(n,-1)}},LastSixMonths:function(){var r=i.addMonths(t(),-6),n;return r.setDate(1),n=e(),n.setDate(1),n.setHours(0),n.setMinutes(0),{startDateTime:r,endDateTime:i.addMinutes(n,-1)}},LastTwelveMonths:function(){var r=i.addMonths(t(),-12),n;return r.setDate(1),n=e(),n.setDate(1),n.setHours(0),n.setMinutes(0),{startDateTime:r,endDateTime:i.addMinutes(n,-1)}},YearToDate:function(){return{startDateTime:i.addMonths(t(),-12),endDateTime:e()}},LastQuarter:function(){var n=p();return{startDateTime:n.start,endDateTime:n.end}},Forever:function(){return{startDateTime:u.MinDate,endDateTime:u.MaxDate}}},p=function(){var r=new Date,u=Math.floor((r.getMonth()+3)/3),o=u===1?4:u-1,f=u===1?r.getFullYear()-1:r.getFullYear(),n=t(),i=e(),s=function(n){n.setDate(new Date(n.getFullYear(),n.getMonth()+1,0).getDate())};n.setDate(1);n.setFullYear(f);i.setFullYear(f);switch(o){case 1:n.setMonth(0);i.setMonth(2);break;case 2:n.setMonth(3);i.setMonth(5);break;case 3:n.setMonth(6);i.setMonth(8);break;case 4:n.setMonth(9);i.setMonth(11)}return s(i),{start:n,end:i}},w=function(n){return v.hasOwnProperty(n)?v[n]():{startDateTime:t(),endDateTime:e()}},s=function(n){var t=w(n);return{startDateTime:h(t.startDateTime),endDateTime:h(t.endDateTime)}},b=function(n){var u=r.dateFromString(n.startDate),f=r.dateFromString(n.endDate),i,t;for(i in o)if(o.hasOwnProperty(i)&&(t=s(o[i]),t!==null&&t.startDateTime!==null&&t.endDateTime!==null&&u.valueOf()===t.startDateTime.valueOf()&&f.valueOf()===t.endDateTime.valueOf()))return o[i];return o.custom},k=function(n){return{startDate:n.startDate.toISOString(),endDate:n.endDate.toISOString()}},y=function(n){var t=n,i;return(t||(t=o.today),t.startDate&&t.endDate)?{startDate:r.dateFromString(t.startDate),endDate:r.dateFromString(t.endDate)}:(i=undefined,!t.startDate&&t.interval?i=s(t.interval):typeof t=="string"&&(i=s(t)),{startDate:i?i.startDateTime:r.dateFromString(t.startDate)||new Date,endDate:i?i.endDateTime:r.dateFromString(t.endDate)||new Date})};return{escapeDatePeriod:function(n){return k(y(n))},unscapeDatePeriod:function(n){return y(n)},decodeInterval:s,decodeDates:b,getAllIntervals:function(){return o},getDefaultPeriod:function(){return{startDate:h(t()),endDate:h(e())}},getDateFromNow:function(n){var t=s(n);return t&&t.endDateTime},setTimezone:function(n){c=n},getNewStartDate:t,getNewEndDate:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=require("../date"),u=require("../entityUtilities"),r=require("../../utils"),f=require("../../utils/dateConstants");t.default=e})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/datePeriodEncoder"),geotab.commonjs.generateExport("geotab/checkmate/ui/datePeriodEncoder"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.UrlStateAnalytics=void 0;var r=require("../datePeriodEncoder"),i="[itemId]",u="[email]",f="[date]",e=function(){function n(n,t){this.analytics=n;this.localizer=t;this.rateLimit=.02;this.random=Math.random()}return n.prototype.serializeValue=function(n,t){if(typeof t=="string"||typeof t=="boolean"||typeof t=="number")return t.toString();if(t===null)return"null";if(n==="routes"&&typeof t=="object"){var i=Object.keys(t).reduce(function(n,i){return n+t[i].length},0);return i+" route(s)"}return Array.isArray(t)?t.length+" item(s)":JSON.stringify(t)},n.prototype.replaceEmails=function(n){return n.replace(/\w+@[\w|\.]*/gi,u)},n.prototype.replaceIds=function(n){return n.replace(/b[\d|A-F]+/gi,i)},n.prototype.clearSensitiveString=function(n){var t=this.replaceEmails(n);return this.replaceIds(t)},n.prototype.ignoreProp=function(n,t){return typeof t=="undefined"?!0:["token","password","session","credentials"].some(function(t){return n.indexOf(t)>-1})?!0:!1},n.prototype.isDateRange=function(n){return n!==null&&typeof n=="object"&&n.hasOwnProperty("startDate")&&n.hasOwnProperty("endDate")},n.prototype.clearSensitiveProps=function(n,t){var s=this,o={},e,u;for(e in n)n.hasOwnProperty(e)&&(u=n[e],this.ignoreProp(e,u)||(o[e]=Array.isArray(u)?u.map(function(n){return s.clearSensitiveProps(n,t)}):this.isDateRange(u)?r.default(t).decodeDates(u):u===null||typeof u!="object"||u instanceof Date?e==="id"&&typeof u=="string"?i:u instanceof Date?f:u:this.clearSensitiveProps(u,t)));return o},n.prototype.setAnalytics=function(n){this.analytics=n},n.prototype.getAnalytics=function(){return this.analytics},n.prototype.setRateLimit=function(n){if(n<0||n>1)throw Error("Rate limit must be between 0 and 1");this.rateLimit=n},n.prototype.report=function(n,t){var i=this,r;this.random<=this.rateLimit&&(r=this.clearSensitiveProps(t,this.localizer),Object.keys(r).forEach(function(t){var f=r[t],u=i.serializeValue(t,f);u=i.clearSensitiveString(u);i.analytics.addInteraction(n,t,u)}))},n}();t.UrlStateAnalytics=e})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/auditTools/urlStateAnalytics"),geotab.commonjs.generateExport("geotab/checkmate/ui/auditTools/urlStateAnalytics"));
(function(n,require,t){"use strict";function c(t,c,l,a,v,y,p){var tt=function(n){return typeof n=="object"&&n!==null&&Object.getOwnPropertyNames(n).length===0},ft={},b=e.default(),ct=function(n){n&&!n.isAborted&&v.handleError(n)},lt=function(n){c.set(n,!1)},at=r.default(t,b,ct,a.translateKey,lt),k=l,w={},g={},it=function(n){var t=n||c.get();return t.page||k},et=function(){return history.length>1},vt=function(n){var i=it(),t;return et()?(t=ft[i],n&&(t.child.childCallback=n),t):undefined},ot=u.default(a.translateKey),st=function(){return undefined},nt,yt=["dateFormat","timeFormat","isMetric","timeZoneId","fuelEconomyUnit","electricEnergyEconomyUnit"],ht=[],d,rt,pt=/.*\./ig,ut=function(n){return n.replace(pt,"")},wt=p||function(n,t){var i=c.get();return n&&(i.page=ut(n),ft[i.page]=c.get()),i.groups=t||{},c.getHash(i)};return a.attachEvent("cultureInfoChange",function(n){var t=yt.some(function(t){return n.current[t]!==n.previous[t]});t&&b.forEachPage(function(t){t.onCultureInfoChange(n)})}),d=y,rt=new h.UrlStateAnalytics(d,a),nt=i(i({},f.default()),{getLoadedCustomPages:function(){return ht.slice()},removeCustomPages:function(n){n.forEach(function(n){if(n.hash&&w[n.hash]){delete w[n.hash];var t=b.get(n.hash);t&&(b.remove(n.hash),delete t.content)}})},addCustomPages:function(n){n.forEach(function(n){n.hash&&(w[n.hash]={hash:n.hash,prefix:n.mainFileFolder||n.addinPath||"",url:n.url,rawUrl:n.rawUrl,translation:n.translation},n.oldHash&&(g[n.oldHash]=n.hash))})},hasCustomPage:function(n){return w.hasOwnProperty(n)},getNextPageName:function(n){var t=(n||"").indexOf("addin-")===0?n:"addin-"+n;return g[t]?g[t]:w[t]?t:n},setCredentialsSource:function(n){st=n},getAnalytics:function(){return d},getUrlStateAnalytics:function(){return rt},getState:function(){return c.get().groups||{}},setState:function(n,t){c.add({groups:n||{}},null,t===undefined?!0:!!t)},stateChange:function(n,t){t===void 0&&(t=!0);c.attachEvent("change",function(i,r,u){var f=u||!t;i&&r&&i.page===r.page&&f&&n(i.groups,r.groups)})},pageChange:function(n){c.attachEvent("change",function(t,i,r){var f=c.get(),o=function(t,i){n&&n(u,t,i||null)},u=t&&t.page||r&&it(t),e;t&&i&&(!i||i.page===u)?d.addEvent(t):(d.addPage(t),u?(e=g[u]||u,w[e]&&ht.push(e),at.load(w[e]||e,i,o,st())):tt(f)||tt(f.filter)&&tt(f.groups)?(nt.go(k,!0),o()):c.set(s.extend(!0,{page:k},f)));rt.report(u,f.groups)})},getLinkTo:wt,canGoBack:et,getLinkBack:function(n){return c.getHash(vt(n))},goBack:function(n){if(typeof n=="number"){history.go(-Math.abs(n));return}history.back()},setHomePage:function(n){k=n},getHomePage:function(){return k},getCurrentPageName:it,getCurrentPage:function(){return b.getActive()},go:function(n,t){c.set({page:n,groups:{}},t)},gotoClass:function(n,t,i){var r=nt.getLinkTo(n,t);i===!0?window.location.replace(r):window.location.href=r},reFocus:function(n){var t=nt.getCurrentPage();t&&t.focus(n)},isPageCreated:function(n){return!!b.get(w[n]?w[n].url:ut(n))},createNewPage:function(t,i,r){var e=w[t],s=n.commonjs.requireRef(t),c=s&&s.default,h=n.provide(t,window),u=e?o.default:typeof h=="function"?h:c,f;if(u){if(typeof u!="function")throw new Error(t+" was expected to be a function, not "+typeof u);return f=new u(i),f?b.set(e?e.rawUrl:ut(r||t),f):f}return location.reload.length?ot.displayPopupNotification({message:a.translateKey("ClearCacheWarningWithRefresh"),link:{name:a.translateKey("Refresh"),click:function(){location.reload()}}}):ot.displayWarning(a.translateKey("ClearCacheWarning")),null}})}var i=this&&this.__assign||function(){return i=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r=require("./pageLoader"),u=require("./notifier"),f=require("../eventHandler"),e=require("./dynamicPagesCollection"),o=require("./customPage"),s=require("../../vanillaExtension/vanilla"),h=require("./auditTools/urlStateAnalytics");t.default=c})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/embeddedPageNavigator"),geotab.commonjs.generateExport("geotab/checkmate/ui/embeddedPageNavigator"));
(function(n,require,t){"use strict";function c(t,h,c){var nt=i.textToHTML(s)[0],tt=function(n){var t=r.resolved();return function(r){t.andThen(function(){return i.show(n),r}).always(function(){i.hide(n)})}}(nt.querySelector(".lineWaiting")),v=(c||[]).reduce(function(n,t){var i=t.language,r=n[i];return r?r.version<t.version&&(n[i]=t):n[i]=t,n},{}),w=r.resolved(),ft=Object.keys(v).map(function(n){return v[n]}),p=document.createElement("div"),l,a={enable:f.NOOP,disable:f.NOOP},b,k={},d=document.createElement("div"),it=function(n){return v[n]||v.en||v[Object.keys(v)[0]]},et=function(n,t){t.length>1?n.appendChild(t.reduce(function(n,t){var r=i.create("li",{"class":"inlineItem"}),u=i.create("button",{"class":t.language});return u.textContent=t.language,r.appendChild(u),n.appendChild(r),n},document.createDocumentFragment())):n.style.display="none"},g=function(n,t){var i=n.reduce(function(n,i,r){return n[i]=t[r],n},{});return function(n){return i[n]||n}},ot=function(n,i){var r=u.Deferred();return i==="en"?r.resolve(g(n,n)):t.call("Translate",{sentences:n,language:i},!1).beginInvoke(function(t){r.resolve(g(n,t))},function(){r.resolve(g(n,n))}),r.promise()},y=function(n){l&&l.buttons.forEach(function(t){n?t.enable():t.disable()})},st=function(t,i){var r=u.Deferred();return n.load("/brands/"+(t.path||""),function(n){if(n){r.resolve(n);return}r.reject(Error("Could not find file: eula_"+i))},function(n){r.reject(n)}),r.promise()},ht=["End User Agreement","Accept","Decline","The connection to the server failed. Please try again later."],rt=function(n,t){return k[t]||(k[t]=u.together([st(n,t),ot(ht,t)])),k[t]},ct=function(n){var f=function(n){return n.scrollHeight-n.scrollTop>n.offsetHeight+200},r=!f(n.container),t=[],i=function(){var u=t.every(function(n){return n.checked}),i=n.buttons[1];u&&r?i.enable():i.disable()},u=function(){var t=n.container,u=t.offsetHeight+200;t.scrollHeight-t.scrollTop<u&&(r=!0,i())};return{enable:function(){t=Array.prototype.slice.call(n.container.querySelectorAll("input[type='checkbox']"),0);t.forEach(function(n){n.addEventListener("change",i,!1)});n.container.addEventListener("scroll",u,!1);i()},disable:function(){t.forEach(function(n){n.removeEventListener("change",i,!1)});t.length=0;n.container.removeEventListener("scroll",u,!1)}}},ut;return p.appendChild(nt),et(p.getElementsByClassName("eulaLanguages")[0],ft),b=p.querySelector("#eulaContent"),document.body.appendChild(d),d.className="eula-warning-container",ut=o.default(function(n){return n},{container:d}),Array.prototype.forEach.call(p.querySelectorAll("button"),function(n){n.addEventListener("click",function(n){var t=n.target.className;w.abort();a.disable();w=r.toTask(rt(it(t),t)).andThen(function(n){var i=n[0],t=n[1];b.innerHTML=i;l.title.set(t("End User Agreement"));l.buttons[1].set(t("Accept"));l.buttons[0].set(t("Decline"));l.resizeTo();y(!0);a.enable()}).fail(function(n){n.isAborted||(h(n),y(!0))});tt(w);y(!1)},!1)}),{show:function(n){var i=it(n),u=function(n){var s=n[0],u=n[1],o=r.default("EULADialog");return b.innerHTML=f.getPageBody(s),l=e.VanillaDialog(p,{height:600,width:600,isModal:!0,addCloseButton:!1,trapFocus:!1,title:u("End User Agreement"),buttons:[{id:"declineEulaButtonId",name:u("Decline"),click:function(){y(!1);l.close();o.reject()}},{id:"acceptEulaButtonId",name:u("Accept"),click:function(){y(!1);a.disable();tt(t.call("AcceptEULA",{version:i.version}).beginInvoke(function(){l.close();l.destroy();o.resolve()},function(n){n.name==="ServerStopped"&&ut.displayWarning(u("The connection to the server failed. Please try again later."));h(n);y(!0);a.enable()}))}}]},u),l.show(),l.container.setAttribute("tabindex","0"),l.container.focus(),a.disable(),a=ct(l),a.enable(),o};return r.toTask(rt(i,n)).fail(function(n){h(n);throw n;}).andThen(u)}}}Object.defineProperty(t,"__esModule",{value:!0});t.Eula=t.isEulaAccepted=void 0;var i=require("../../vanillaExtension/vanilla"),e=require("../../vanillaExtension/vanillaDialog"),r=require("../task"),o=require("../ui/notifier"),u=require("../deferred"),f=require("../../utils"),s='<div id="eula">\n    <div class="lineWaiting" id="eulaWaiting">\n        <div class="bg"><\/div>\n    <\/div>\n    <ul class="unstyled inlineList eulaLanguages"><\/ul>\n    <div id="eulaContent" class="noTranslate"><\/div>\n<\/div>',h=function(n,t){return t.reduce(function(n,t){return n<t.version?t.version:n},0)===n};t.isEulaAccepted=h;t.Eula=c})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/eula/eula"),geotab.commonjs.generateExport("geotab/checkmate/eula/eula"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.requestLogger=void 0;t.requestLogger=n.TEST_MODE?function(){var n=[],t=["password","authenticate"];return{add:function(i){var r=typeof i=="string"?i:JSON.stringify(i);t.every(function(n){return r.toLowerCase().indexOf(n)===-1})&&n.push(r)},get:function(){return n.slice()}}}():{add:function(){},get:function(){return[]}}})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/requestLogger"),geotab.commonjs.generateExport("geotab/checkmate/requestLogger"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.retryRequest=void 0;var r=require("../abortPromiseToken"),i=require("../deferred"),u=function(n,t,u,f){f===void 0&&(f=new r.AbortPromiseToken);var e=function(){return i.race([n(),f.promise]).catch(function(n){if(t(n)){var r=i.Deferred(),o=setTimeout(function(){r.resolve(undefined)},u);return i.race([r.promise,f.promise]).then(e,function(n){clearTimeout(o);r.reject(n)})}return i.reject(n)})};return e()};t.retryRequest=u})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/retryRequestFactory"),geotab.commonjs.generateExport("geotab/checkmate/ui/retryRequestFactory"));
(function(n,require,t){"use strict";var i,r,u;Object.defineProperty(t,"__esModule",{value:!0});t.clearUserFirstVisit=t.isUserFirstVisit=void 0;i="isUserFirstVisit";r=function(n,t){return n===0||n===undefined?(t.setItem(i,!0),!0):t.getItem(i)?(t.removeItem(i),!0):!1};t.isUserFirstVisit=r;u=function(n){n.removeItem(i)};t.clearUserFirstVisit=u})(geotab,geotab.commonjs.generateRequire("geotab/utils/detectFirstUserVisit"),geotab.commonjs.generateExport("geotab/utils/detectFirstUserVisit"));
(function(n,require,t){"use strict";function ot(t,ot,st,ht,ct,lt){var wt="logout",bt=y.Html5Storage(),vt,oi=function(n){var r=t.currentUser,u=function(n){return i.isMyAdminUser(n)?(n.name||"").split("@")[0]+" ("+t.localizer.translateKey("ResellerSupport")+")":n.name},f=r?u(r):t.connection.token.userName;return t.connection.call("Add",{typeName:"Audit",entity:{name:"UserLogoff",comment:f+(n?" "+t.localizer.translateKey("LogoutAll"):"")}})},ti=function(n){var t,r=!!at,i=r&&at.origin?at.origin:"",u=(t={},t[wt]=at&&at.database||n||!0,t);return i+(i[i.length-1]==="/"?"":"/")+ht.getHash(u)},kt=function(n){n===void 0&&(n=!1);var r=t.connection.token.database||"",i=function(n){return n.indexOf("http")===0?n.split("/")[2]:i(window.location.href)};t.connection.token={userName:"",database:"",sessionId:""};pt.then(function(t){var f=i(window.location.href),u=t||ti(r);vt.fireEvent("logout",vt);ei();window.location.href=u;f===i(u)&&n&&location.reload()})},si=t.defaultErrorHandler||ct||i.NOOP,at=null,dt=!1,yt=!1,ii=!1,ri=!1,pt=r.resolve(""),ui=function(n){return n.userAuthenticationType==="SAML"?n.issuerCertificate&&n.issuerCertificate.id||undefined:undefined},hi=function(n){n&&t.notificationCenter&&t.notificationCenter.attachEvent("Certificate.Set",{},function(t){var i=t&&t.data||[];i.some(function(t){return t===n})&&(pt=fi(n))})},fi=function(n){var i=r.Deferred();return t.connection.call("Get",{typeName:"Certificate",search:{id:n}}).beginInvoke(function(n){i.resolve(n&&n[0]&&n[0].logOffUrl||"")},function(n){i.resolve("");t.defaultErrorHandler(n)}),i.promise()},ei=function(n){ot.clearCachedToken();n&&(location.hash=ht.getHash({}).replace("#","").split(",").filter(function(t){return t!==n}).join(","))},ci=function(){ht.remove("token")},li=function(){return ht.get().token||null},ai=function(){var i=n.location.database||"",r=decodeURIComponent(i&&i.toLowerCase()!=="geotab"?i:""),u=t.navigator.getState(),f=u&&u.userName||"";return r||f?{database:r,userName:f}:null},vi=function(){return st.listItems().length!==0},yi=function(n){return n&&n.database&&n.userName&&n.sessionId},pi=function(n){var t=n||{message:"Unknown error"};return t.isConnectionShutDownException?r.reject(t):t.isAuthenticationRequiredException?(lt&&lt(t),r.reject(t)):r.reject(si(t)||t)},wi=function(t){return it.apiTransport("GetVersion",i.getDbParams(t.token.database||n.location.database))},gt="logout_database",bi=new v.ActivityTracker(window,["storage"]).start().listen(function(n){if(n.key===gt){var i=bt.getItem(gt),r=t.connection.token.database||"";i===r&&kt(!1)}}),ni;return t.defaultErrorHandler=pi,ni=wt+":"+n.location.database,ht.getHash().indexOf(ni)>-1?ei(ni):window.location.search.indexOf(wt)>0&&ot.clearCachedToken(),t.connection||(at=[li,ai].reduce(function(n,t){return n||t()},null),vi()&&yi(at)&&st.listItems().forEach(function(n){st.removeItem(n)}),ci(),t.connection=h.default(ot,{token:at,getPageName:function(){return t.navigator.getCurrentPageName()},logger:d.requestLogger})),t.startVersion=t.startVersion||"",tt.retryRequest(function(){return wi(t.connection)},function(n){return rt.isNetworkException(n)||n.name==="ServerStopped"},5e3).then(function(n){t.startVersion=n}),vt=f.extend(c.default(),{isLoggedIn:function(){return dt},isLoggingIn:function(){return yt},isLoggingOut:function(){return ii},getLogoutUrl:ti,login:function(){var h=function(){f.token=et.createToken();f.requestToken(function(n){f.token=n;v(n.userName)},c)},c=function(n){return yt=!1,h(),t.defaultErrorHandler.call(this,n)},y=function(r,f,h,c,l,v){var y=e.default(f).getUiConfiguration(r.securityGroups[0]),it=function(){var n=s.default("completeLoginTask");try{yt=!1;dt=!0;vt.fireEvent("login",vt,[!ri,t.connection,r,t.uiConfiguration]);ri=!0;n.resolve();hi(ui(r))}catch(i){n.reject(i)}return n},d=ft.parseEulaPath(c,r.language,h.jurisdiction||""),g=!!(l.serverFlags&1),rt=o.PagesSecurity(r,y.acl,k.hasDomainAccessToWhiteLabelPageFn(n.location.getVendorPrefix().domain),h.customCode,!g),tt;if(t.eula=d,t.isMyAdmin=i.isMyAdminUser(r),t.filterUsers=i.filterUsersFn(r),t.systemSettings=h,t.currentUser=r,t.isUserFirstVisit=ut.isUserFirstVisit(r.acceptedEULA,bt),t.isThirdPartyLoggingAllowed=g,t.isFedRamp=!g,t.getControlAnalytics=function(t){return new w.ControlAnalytics(t,b.createGoogleAnalytics(i.isTestDomain(n.location.host),window))},t.uiConfiguration={pagesSecurity:rt,isEverything:y.isEverything,acl:y.acl,hasAccessTo:y.hasAccessTo,containsAny:y.containsAny,isMobile:p.isMobile(),amountRowsInList:nt.getRequestQuota(),supportedMapProviders:a.loadProvidersSupport(v,t.defaultErrorHandler,y.hasAccessTo,h.customWebMapProviderList)},t.connection.token.userName.toUpperCase()===r.name.toUpperCase()&&(t.connection.token.userName=r.name),tt=ui(r),tt&&(pt=fi(tt),pt.then(function(n){n&&ot.setExpiredSessionCallback&&ot.setExpiredSessionCallback(function(){kt()})})),at=ot.getTokenFromStorage()||t.connection.token,u.isEulaAccepted(r.acceptedEULA,d)){it();return}u.Eula(t.connection,t.defaultErrorHandler,d).show(r.language).fail(function(){vt.logout(!1,!0)}).andThen(it)},v=function(i){var f=n.location.getVendorPrefix(),u=l.default(g.default(t.connection));return r.together([u.users.getItemsByValue({name:i}),u.groups.getItemsByValue({id:"GroupSecurityId"}),u.systemSettings.getItemsByValue({}),u.call("GetEULA",{domain:f.domain||""}),u.call("GetVersionInformation",null,!1)]).then(function(n){var i=n[0],r=n[1],f=n[2],e=n[3],o=n[4];i[0]?(t.entitiesLoader=u,y(i[0],r,f[0],e,o,u)):vt.logout()},c)},f=t.connection;yt=!0;f.token&&f.token.userName?v(f.token.userName):(yt=!1,h())},logout:function(n,i){var r=oi(n);ii=!0;dt=!1;bi.stop();bt.setItem(gt,t.connection.token.database,!0);r.andAlso(n?"LogoffAllSessions":"Logoff").beginInvoke(function(){kt(i)},function(n){t.defaultErrorHandler(n)})}})}Object.defineProperty(t,"__esModule",{value:!0});var f=require("../vanillaExtension/vanilla"),i=require("../utils"),e=require("./securityCalculator"),o=require("./pagesSecurity"),s=require("./task"),r=require("./deferred"),h=require("./interactiveConnection"),c=require("./eventHandler"),l=require("./entitiesLoader"),a=require("./ui/mapProvidersSupport"),u=require("./eula/eula"),v=require("./userActivityTracker"),y=require("./storage/html5Storage"),p=require("./browser"),w=require("./ui/auditTools/controlAnalytics"),b=require("./ui/auditTools/googleAnalytics"),k=require("../utils/domainSpecificUtils"),d=require("./requestLogger"),g=require("./sliceableConnection"),nt=require("./requestQuotas"),tt=require("./ui/retryRequestFactory"),it=require("./apiTransport"),rt=require("./exceptions/networkException"),ut=require("../utils/detectFirstUserVisit"),ft=require("./eula/parseEula"),et=require("./connection");t.default=ot})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/loggedInStateController"),geotab.commonjs.generateExport("geotab/checkmate/loggedInStateController"));
(function (geotab, require, exports){ exports.default = "<div class=\"right\"><span id=\"loggedInState_statusRow\" class=\"header-login\"><button id=\"loggedInState_support\" class=\"header-input header-input--hidden-on-small header-input--hidden\" aria-label=\"In-App Help\" title=\"In-App Help\"><svg class=\"header-input__help-icon\" focusable=\"false\"><use xlink:href=\"#geo-question-mark-in-circle\"></use></svg></button> <a href=\"#notifications\" id=\"loggedInState_notificationsCount\" class=\"header-input\"><div class=\"notifications-button\"><svg class=\"notifications-button__icon\" focusable=\"false\"><use xlink:href=\"#geo-bell\"></use></svg><div class=\"notifications-button__amount geo-button-badge geo-button-badge--theme-prioritized\" style=\"display:none\"></div></div></a> <button id=\"loggedInState_dropdownButtonId\" class=\"header-input popupWindowTrigger\" title=\"User options\" aria-label=\"User options\"><svg id=\"loggedInState_userIcon\" class=\"header-input__icon\" focusable=\"false\"><use xlink:href=\"#geo-user-new\"></use></svg><div class=\"loggedInState_namesContent\"><span id=\"loggedInState_userText\" class=\"header-input__text noTranslate\">...</span> <span id=\"loggedInState_databaseNameId\" class=\"header-input__text noTranslate\" title=\"Database name\" aria-label=\"Database name\">...</span></div><svg id=\"loggedInState_userExpand\" class=\"header-input__expand toRotate\" focusable=\"false\"><use xlink:href=\"#geo-new-arrow-down\"></use></svg></button></span><div id=\"loggedinState_dropdownContent\" class=\"centered\" style=\"display:none\"><ul class=\"geo-list\"><li class=\"dbName\"><div class=\"logged_db geo-list__item geo-list__item--static\" id=\"logged_db\" title=\"Database name\" aria-label=\"Database name\"></div></li><li style=\"display:none\"><a id=\"loggedInState_optionsButtonId\" class=\"geo-select-button\" href=\"#options\">Options</a></li><li style=\"display:none\"><a id=\"loggedInState_changePassButtonId\" class=\"geo-select-button\" href=\"#changePassword\">Change password</a></li><li style=\"display:none\"><a id=\"loggedInState_myReportsId\" class=\"geo-select-button\" href=\"#myReports\">My reports</a></li><li><a id=\"logged_logoutId\" class=\"geo-select-button geo-select-button--alert\">Log out</a></li><li><a id=\"logged_logoutAndRemoveId\" class=\"geo-select-button geo-select-button--alert\" style=\"display:none\">Log out and remove account</a></li></ul></div></div>";
 })(geotab, geotab.commonjs.generateRequire("geotab/checkmate/ui/loggedInStatusBox.html"), geotab.commonjs.generateExport("geotab/checkmate/ui/loggedInStatusBox.html"));
(function(n,require,t){"use strict";function p(t,p,w,b,k,d){var g=function(){return p.innerHTML=h.default,p}(),ht=t.localizer,dt=v.default(ht.translateKey),ct=g.querySelector("#loggedinState_dropdownContent"),et=g.querySelector("#loggedInState_dropdownButtonId"),yt=g.querySelector("#loggedInState_statusRow"),pt=g.querySelector("#loggedInState_databaseNameId"),it=s.default(),rt=g.querySelector("#loggedInState_notificationsCount"),tt=t.navigator,gt=function(n){n.preventDefault();nt.logout(!!this.getAttribute("data-all"))},ni=function(n){return t.connection.call("Remove",{typeName:"User",entity:{id:n}}).beginInvoke(r.NOOP,r.NOOP)},ti=function(n){return n.userAuthenticationType!=="SAML"},wt=function(){var n=g.querySelector("#loggedInState_optionsButtonId"),r=g.querySelector("#loggedInState_changePassButtonId"),u=g.querySelector("#loggedInState_myReportsId"),o=g.querySelector("#logged_logoutId"),e=g.querySelector("#logged_logoutAndRemoveId"),h=g.querySelector("#logged_db"),s;h.textContent=t.connection.token.database;et.removeEventListener("click",wt,!1);document.body.appendChild(ct);s=f.default(et,{content:ct,position:"bottom_left",closeOnSelect:!0});(ot("UserSettings")||ot("UserAdmin"))&&(n.parentNode.style.display="block",n.addEventListener("mouseover",function(){n.setAttribute("href",tt.getLinkTo("options"))},!1));ot("ChangePassword")&&ti(t.currentUser)&&(r.parentNode.style.display="block",r.addEventListener("mouseover",function(){r.setAttribute("href",tt.getLinkTo("changePassword"))},!1));u.parentNode.style.display="block";u.addEventListener("mouseover",function(){u.setAttribute("href",tt.getLinkTo("myReports"))},!1);o.setAttribute("href",nt.getLogoutUrl());o.addEventListener("click",gt,!1);ii(t.currentUser)&&t.isMyAdmin&&(i.addClasses(ct,"dropdown-content--large"),e.style.display="block",e.setAttribute("href",nt.getLogoutUrl()),e.addEventListener("click",function(n){var i=this;n.preventDefault();ni(t.currentUser.id).always(function(){nt.logout(!!i.getAttribute("data-all"))})},!1));s.open()},ii=function(n){return["@geotab.com","@geotab.ca","@geotabinc.com"].some(function(t){return n.name.indexOf(t)!==-1})},ot=function(n){return t.uiConfiguration&&t.uiConfiguration.hasAccessTo(n)},lt=function(){var n=et.querySelector("#loggedInState_userText");nt.isLoggedIn()?(yt.style.display="",pt.textContent=t.connection.token.database,n&&(n.textContent=t.connection.token.userName)):(yt.style.display="none",pt.textContent="...",n&&(n.textContent="..."))},ri=function(n,t,r){var u=n.getElementsByClassName("notifications-button__amount")[0],f=n.getElementsByClassName("notifications-button")[0],e=function(){var e=function(n){n<10&&(i.removeClasses(u,"notifications-button__amount--two-digits notifications-button__amount--three-digits"),i.addClasses(f,"notifications-button--one-digits"),i.removeClasses(f,"notifications-button--two-digits notifications-button--three-digits"));n>9&&n<100&&(i.addClasses(u,"notifications-button__amount--two-digits"),i.removeClasses(u,"notifications-button__amount--three-digits"),i.addClasses(f,"notifications-button--two-digits"),i.removeClasses(f,"notifications-button--one-digits notifications-button--three-digits"));n>100&&(i.removeClasses(u,"notifications-button__amount--two-digits"),i.addClasses(u,"notifications-button__amount--three-digits"),i.removeClasses(f,"notifications-button--one-digits notifications-button--two-digits"),i.addClasses(f,"notifications-button--three-digits"))};r.unreadMessages.then(function(r){var f=t.getNotificationsCount()+r,o=ht.translateKey("Notifications");i.show(rt);i.toggle(u,f>0);e(f);u.textContent=f>99?"99+":f.toString();n.setAttribute("aria-label",f+" "+o)})};r.attach("change",e);t.attachEvent("notificationsUpdated",e);t.attachEvent("notificationsUpdateFailed",function(){i.hide(rt)});e()},ui=function(n,t){return"/"+n+"/"+t},bt=function(){var n=/logout:([^&]+)/i;return{getLogoutDatabaseName:function(t){if(t===void 0&&(t=""),t){var i=t.match(n);return i&&i[1]||null}return null},removeLogoutDatabase:function(t){return(t===void 0&&(t=""),t)?t.replace(n,""):null}}}(),st=bt.getLogoutDatabaseName(window.location.href),fi=function(n){var t=it.getItem(n);return t&&"origin"in t},kt=function(n){if(!n||typeof n!="string")return"";var t=n.substring(1).split("/");return decodeURIComponent(t.shift()||"")},at=u.default({localizer:t.localizer,languageSelector:t.languageSelector},y.getDefaultLanguage(),n.location.getVendorPrefix()),ei=function(){tt.setState(i.extend({},tt.getState(),{userName:undefined,verificationToken:undefined}))},oi=function(){var t=tt.getState();return{database:n.location.database,userName:t.userName||"",verificationToken:t.verificationToken||""}},ut=new c.SimpleEventHandler,ft=e.default(at,new l.PasswordChangeTokenReceiver(t),it,kt(window.location.pathname),oi(),d,document.body),nt=o.default(t,ft,it,w,k,function(n){ut.fire("loginFailed",n)}),vt;return ft.attachEvent("ResetPassword",function(){dt.displayWarning(ht.translateKey("ResetPassExpired"))}),ft.attachEvent("AttemptFail",function(){ut.fire("AttemptFail")}),at.attachEvent("open",function(){i.show(p);i.hide(g)}),at.attachEvent("close",function(){i.show(g)}),nt.attachEvent("login",function(n,t,u,f){var v=function(n,t){t&&ri(rt,t,n)},o=ot("NotificationList"),y=o?v:undefined,s=kt(window.location.pathname),h=t.token,c,e,l;if(o||i.hide(rt),lt(),ei(),!s||h.database!==s){window.location.replace(ui(h.database,window.location.hash));return}c=b(n,t,u,f,y);c&&(ut.fire("login"),e=ft.getTokenFromStorage(),l=e&&e.source||"",(u.changePassword||l==="ResetPassword")&&ft.beginGetToken(t.getBasicConnection(),r.NOOP,k,new a.ResetPasswordError))}),nt.attachEvent("logout",function(){ut.fire("logout");lt()}),et.addEventListener("click",wt,!1),st&&(st==="!t"&&(vt=it.listItems().filter(fi),vt.length===1&&(st=vt[0])),it.removeItem(st),window.location.replace(bt.removeLogoutDatabase(window.location.href)||"")),lt(),nt.login(),i.extend(ut,{isLoggedIn:function(){return nt.isLoggedIn()},login:function(){nt.login()},logout:function(){nt.logout()},updateLinks:function(){rt.href=tt.getLinkTo("notifications")}})}Object.defineProperty(t,"__esModule",{value:!0});var i=require("../../vanillaExtension/vanilla"),u=require("./ifrLoginDialog"),f=require("./popupWindow"),e=require("../dialogTokenReceiver"),o=require("../loggedInStateController"),s=require("../storage/tokensCollection"),h=require("./loggedInStatusBox.html"),c=require("../eventHandler"),l=require("../passwordChangeTokenReceiver"),a=require("../exceptions/commonExceptions"),r=require("../../utils"),v=require("./notifier"),y=require("../../utils/languageUtils");t.default=p})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/loggedInStatusBox"),geotab.commonjs.generateExport("geotab/checkmate/ui/loggedInStatusBox"));
(function(n,require,t){"use strict";function a(t,a,v,y,p,w,b){var k=[],tt=f.default(b,!0),it=[],ot=function(){return c.getGtag(window)},st=s.default(a),ht=e.CustomPageApi(v,y.pagesSecurity.hasAccessToPage,p,ot),ct=function(t,i){var e,f,o,u;if(r[t])return n.customButtons[r[t]];for(e=Object.keys(n.customButtons),f=0;f<e.length;++f)if(o=e[f],u=n.customButtons[o],typeof u=="function"&&(!u.hash||u.hash===t))return r[t]=o,u.hash=t,u.page=i,u;return null},lt=function(n){return new h.NotSevereError(b("ButtonAddinLoadingError").replace("{0}",n))},g={js:function(n,t){var u=function(){this.onerror=null;this.onload=null;t()},r=i.create("script",{src:n});r.onload=u;r.onerror=u;r.async=!1;document.head&&document.head.appendChild(r)}},at=function(n){return n===void 0&&(n=""),k.filter(function(t){return(t.page||"").toLowerCase()===n.toLowerCase()})},vt=function(n,t){var i=o.default("downloadCustomButtonScript"),r=(n||"").split("."),u=1,f=r[r.length-1],e=g[f]?g[f]:g.js,s=function(){var r=ct(n,t);r?i.resolve(r):u?(u-=1,setTimeout(function(){e(n,s)},500)):i.reject(lt(n))};return e(n,s),i},yt=function(n){return function(t){n.call(this,t,st,ht)}},pt=function(n){var f=n.buttonName||"",t=i.create("button",{"class":"geo-button geo-page-toolbar__item toolbar-popup__item geo-caption customButton noTranslate geo-custom-button"}),u=n.icon&&i.create("span",{"class":"geo-caption__pre-content geo-custom-button__icon"},{backgroundImage:"url("+n.icon+")"}),r;return u&&t.appendChild(u),r=i.create("span",{"class":"geo-caption__content"}),r.textContent=f||"",t.appendChild(r),t},rt=function(n,t){n.addEventListener("click",t,!1)},wt=function(n,t){n.removeEventListener("click",t,!1)},bt=["customAddinButton","geo-page-toolbar","geo-toolbar"],kt=function(){return bt.reduce(function(n,i){return n||t.getElementsByClassName(i)[0]},undefined)},dt=function(n){return{click:n.click,clickUrl:n.clickUrl,page:n.page,buttonName:n.buttonName,icon:n.icon,request:null,handler:null,isInactive:!1,elt:null,controller:null}},ut=function(n){return n.click},gt=function(n){return!k.some(function(t){return t.page===n.page&&t.click===n.click})},ft=function(n,t){t&&wt(n,t);n.parentNode&&n.parentNode.removeChild(n)},ni=function(n){var t=n.elt,i=n.controller;t&&i&&(ft(t,n.handler),i.destroy());n.request&&n.request.abort()},et={},d=new l.SimpleEventHandler,nt=!1;return{attachEvent:function(n,t){d.attach(n,t)},detachEvent:function(n){d.detach(n)},getInitializedButtons:function(){return it.slice()},add:function(n){var t=(n||[]).filter(ut).filter(gt).map(dt);k=k.concat(t);d.fire("customButtonsChanged")},remove:function(n){var t=(n||[]).filter(ut);t.length&&(k=k.filter(function(n){return t.some(function(t){return t.click===n.click})?(ni(n),!1):!0}),d.fire("customButtonsChanged"))},bind:function(n,t){var i=t,r=at(n),f=function(t){var r,f;(i||(i=kt()),t&&t.elt&&(t.elt.parentElement===i||((r=t.elt.parentElement)===null||r===void 0?void 0:r.parentElement)===i))||t&&!t.elt&&(t.handler||t.request||(it.push(t),t.request=vt(t.clickUrl,n).done(function(n){t.handler=yt(n)}).fail(function(n){var t=n||new Error("Unknown script loading error");t.isSevere=!1;w(t)})),i&&(t.elt&&ft(t.elt,t.handler),f=pt(t),i.appendChild(f),nt=!0,t.elt=f,t.controller=u.createButtonSwitcher(t.elt),t.handler?rt(t.elt,t.handler):(t.isInactive=!0,t.controller.disable(),t.request&&t.request.done(function(){rt(t.elt,t.handler);t.controller&&t.controller.enable();t.isInactive=!1}))))};r.length>0&&(tt.reset(),et[n]||tt.check(!0,"",function(){nt=!1;r.forEach(f);nt&&d.fire("customButtonsChanged")},function(){et[n]=!0},r.map(function(n){return n.click})))}}}Object.defineProperty(t,"__esModule",{value:!0});var i=require("../../vanillaExtension/vanilla"),u=require("../../vanillaExtension/vanillaButtonSwitcher"),f=require("./externalLinkAuditor"),e=require("./customPageApi"),o=require("../task"),s=require("../../geotabApi"),h=require("../exceptions/commonExceptions"),c=require("./auditTools/gtag"),r={},l=require("../eventHandler");t.default=a})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/customButton"),geotab.commonjs.generateExport("geotab/checkmate/ui/customButton"));
(function(n,require,t){"use strict";function u(n,t,u){var e=i.create("div",{"class":"confirmDialog"}),o,s,h=u||{},f=r.VanillaDialog(e,{isModal:!0,addCloseButton:!1,width:h.width||400,parentNode:n?n:document.body,buttons:[{name:"cancel",click:function(){c(s)}},{name:"ok",className:"geo-button geo-button--action dialogConfirmed",click:function(){c(o)}}]},t),c=function(n){n&&n();f.close()},l=function(n,t,i,r){h.allowHTMLContent?e.innerHTML=t:e.textContent=t;f.title.set(n);f.buttons[1].set(i);r&&f.buttons[0].set(r)};return{confirm:function(n,t,i,r,u,e){arguments.length===5?(l(n,t,i),o=r,s=u):(l(n,t,i,r),o=u,s=e);f.show(null)},isVisible:function(){return f.isShown()},close:function(){return f.close()},destroy:function(){f.destroy()}}}Object.defineProperty(t,"__esModule",{value:!0});var i=require("../../vanillaExtension/vanilla"),r=require("../../vanillaExtension/vanillaDialog");t.default=u})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/confirmDialog"),geotab.commonjs.generateExport("geotab/checkmate/ui/confirmDialog"));
(function (geotab, require, exports){ exports.default = "<div class=\"language-selector noTranslate\"><div class=\"language-selector__items\"><div class=\"language-selector__visible-items\"></div><button class=\"language-selector__button language-selector__more-button\"><svg class=\"geo-icon geo-icon--bigger\"><use xlink:href=\"#geo-right-arrow-new\"></use></svg></button></div><div class=\"language-selector__popup\" style=\"display:none\"></div></div>";
 })(geotab, geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/languageSelector/languageSelector.html"), geotab.commonjs.generateExport("geotab/checkmate/ui/modules/languageSelector/languageSelector.html"));
(function(n,require,t){"use strict";function c(n,c){var k,v=i.textToHTML(s.default)[0],l,y,d=r.getDefaultLanguage(),ft=function(n){return{title:n[0],message:n[1]+"<br><strong>"+n[2]+"<\/strong><br><br>"+n[3],confirmButton:n[4],cancelButton:n[5]}},tt=function(){var n=[],r=function(n){return n.reduce(function(n,t){return n.concat(t.phrases)},[])},t=function(n,t){var i=0;t.forEach(function(t){t.def.resolve(n.slice(i,t.phrases.length));i+=t.phrases.length});t.length=0},u=function(i,u){var f=r(n);u==="en"?t(f,i):h.apiTransport("Translate",{sentences:f,language:u},undefined,"languageSelector").then(function(n){return t(n||f,i)},function(){return t(f,i)})},i;return function(t,r){var f={phrases:t,def:o.Deferred()};return n.push(f),clearTimeout(i),i=setTimeout(function(){u(n,r)},1),f.def.promise()}}(),et=function(n){return tt(["Change language","Refresh the page to apply the selected language.","This will clear all filled information!","Do you want to reload the page?","Reload the page","Cancel"],n).then(ft)},it=function(n){tt(t.languages.map(function(n){return n.title}).concat(["More languages"]),n).then(function(n){t.languages.forEach(function(t,i){var r=v.querySelector('[data-language="'+t.value+'"]');r&&(r.title=n[i])});var i=n[n.length-1];w.setAttribute("title",i);w.setAttribute("aria-label",i)})},p=function(t){t!==y&&(y=t,document.documentElement&&document.documentElement.setAttribute("lang",t),Array.prototype.forEach.call(n.getElementsByClassName("language-selector__button"),function(n){i.toggleClasses(n,"active",n.getAttribute("data-language")===t)}))},ot=function(n){n!==y&&(c?et(n).then(function(t){l||(l=f.default(null,function(n){return n},{allowHTMLContent:!0,width:350}));l.confirm(t.title,t.message,t.confirmButton,t.cancelButton,function(){r.setDefaultLanguage(n);window.location.reload()},function(){p(y)})}):(it(n),p(n),r.setDefaultLanguage(n),k&&k(n)))},g=t.languages.sort(function(n,t){return n.value===d?-1:t.value===d?1:0}),st=function(n){var t=i.create("button",{"class":"language-selector__button",title:n.title,"data-language":n.value,lang:n.value});return t.textContent=n.label,t.addEventListener("click",function(){ot(t.getAttribute("data-language"))},!1),t},rt=function(n,t,i,r){for(var e,f,u=0;u<i;++u)n.children.length&&(e=r?n.children.length-1:0,f=n.removeChild(n.children[e]),t.children.length&&r?t.insertBefore(f,t.children[0]):t.appendChild(f))},a=v.querySelector(".language-selector__visible-items"),b=v.querySelector(".language-selector__popup"),w=v.querySelector(".language-selector__more-button"),ut=e.default(w,{content:b,addAutoScroll:!0,position:"bottom_left",minWidth:100}),nt=function(){var t=g.reduce(function(n,t){return n.width-=t.width,n.width>0&&n.amount++,n},{width:a.offsetWidth-w.offsetWidth,amount:0}).amount,n=a.children.length,r;n!==u&&t>n?rt(b,a,t-n,!1):t<n&&rt(a,b,n-t,!0);r=b.children.length;i.toggle(w,!!r);r||ut.close()};return a.appendChild(g.reduce(function(n,t){return n.appendChild(st(t)),n},document.createDocumentFragment())),n.appendChild(v),p(d),i.show(n),g.forEach(function(n,t){var i=a.children[t];n.width=i.offsetWidth}),i.hide(n),{show:function(){var t=r.getDefaultLanguage();p(t);it(t);i.show(n);nt();window.addEventListener("resize",nt,!1)},hide:function(){ut.close();i.hide(n);window.removeEventListener("resize",nt,!1);l&&l.isVisible()&&l.close()},getContainer:function(){return n},setOnChange:function(n){k=n},setPageLanguage:p,getPageLanguage:function(){return y||"en"},setTopPosition:function(t){t===void 0&&(t=0);n.style.top=t+"px"}}}var u;Object.defineProperty(t,"__esModule",{value:!0});t.LanguageSelector=t.languages=void 0;var f=require("../../confirmDialog"),e=require("../../popupWindow"),o=require("../../../deferred"),i=require("../../../../vanillaExtension/vanilla"),s=require("./languageSelector.html"),r=require("../../../../utils/languageUtils"),h=require("../../../apiTransport");t.languages=[{value:"en",label:"English",title:"English",width:0},{value:"fr",label:"Français",title:"French",width:0},{value:"es",label:"Español",title:"Spanish",width:0},{value:"ja",label:"日本語",title:"Japanese",width:0},{value:"de",label:"Deutsch",title:"German",width:0},{value:"pl",label:"Polski",title:"Polish",width:0},{value:"pt-BR",label:"Português (Brasil)",title:"Portuguese",width:0},{value:"nl",label:"Nederlands",title:"Dutch",width:0},{value:"it",label:"Italiano",title:"Italian",width:0},{value:"zh-Hans",label:"简体中文",title:"Chinese",width:0},{value:"th",label:"ไทย",title:"Thai",width:0},{value:"id",label:"Bahasa Indonesia",title:"Indonesian",width:0},{value:"cs",label:"Čeština",title:"Czech",width:0},{value:"sv",label:"Svenska",title:"Swedish",width:0}];u=t.languages.length;t.LanguageSelector=c})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/languageSelector/languageSelector"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/languageSelector/languageSelector"));
(function(n,require,t){"use strict";function s(t,s,h,c,l){var tt=t.token?o+(n.TEST_MODE?"|"+t.token.database:""):"",it="geoSessionVersion",k=!1,y="",a,p=function(){a&&a.close()},w=function(){ot.stop();n.isOldVersion=!1},ct=function(n,t){var i=undefined,r;return function(){return i===undefined&&(i=setTimeout(function(){i=undefined},t),r=n()),r}},b=ct(function(){var r=i.Deferred();return t.call("GetVersion",e.getDbParams(t.token&&t.token.database||n.location.database),!1).beginInvoke(function(n){y=n;r.resolve(n)},r.reject),r.promise()},4e3),rt=function(){var n=i.Deferred();return t.call("Get",{typeName:"User",search:{name:t.token.userName}}).beginInvoke(n.resolve,n.reject),n.promise()},lt=function(){if(!a){var n=u.create("div",{"class":"systemWarningDialogText"});n.textContent=h("serviceOfflineWarning");a=f.VanillaDialog(n,{addCloseButton:!1,isModal:!0,id:"offlineDialogWindow",width:500,title:h("ServiceOffline")},h)}a.show()},ut=function(){return p(),lt(),ot.start().catch(s)},d=function(n){p();g(n);l.fireEvent("ServiceStarted",nt)},v=function(n,t,i){var r=u.create("p",i?{"class":i}:undefined);return n&&(r.textContent=n),t&&t.appendChild(r),r},g=function(t){var e=c.getItem(it),o=t!==y,s=e&&t!==e,i,r;if(t)try{c.setItem(it,t,!0)}catch(l){console.error(l)}s||n.isOldVersion?window.location.reload():o&&(n.isOldVersion=!0,i=u.create("div",{"class":"systemWarningDialogText"}),v(h("ApplicationUpdatedNewVersion"),i),r=v(undefined,i,"systemWarningVersionsDialogText"),v(h("PageReloadUpdateLatestVersion"),i),v(h("NewVersion").replace("{0}",t),r),v(h("OldVersion").replace("{0}",y),r),f.VanillaDialog(i,{addCloseButton:!1,isModal:!0,width:500,title:h("UpdateReady"),buttons:[{name:h("ok"),click:function(){window.location.reload()}}]},h).show())},nt,ft=function(n){return n.isTimeout||n.isNetworkException||n.isConnectionInterruptedException},et=function(n,t,r){var u,f=function(){var f=i.Deferred(),e=function(){return n().then(f.resolve,function(n){if(t(n)){u=setTimeout(e,r);return}f.reject(n)})};return e(),f.promise()};return{start:f,stop:function(){return u&&clearTimeout(u)}}},ot=function(){var n=!1,t=null,u,e=et(b,ft,r),o=et(rt,function(n){return!!n.isDBInitializingException},r),f,s=function(){var t=i.Deferred(),s=function(){return e.start().then(function(n){f=n;c()},h)},c=function(){return o.start().then(function(){l()},function(n){ft(n)?u=setTimeout(s,r):h(n)})},h=function(n){w();p();t.reject(n)},l=function(){w();ht().then(st);d(f);t.resolve(f)};return n=!0,u=setTimeout(s,r),t.promise()},h=function(){n=!1;t=null;u&&clearTimeout(u);e.stop();o.stop();p()};return{start:function(){return t=n?t:s()},stop:h,isReconnecting:function(){return n}}}(),st=function(){l.subscribe(tt,function(n){n&&(n.isAlive===!0?b().then(d,function(){return d()}):(ut(),l.fireEvent("ServiceStopped",nt)))})},ht=function(){return l.unsubscribe(tt)};return nt={start:function(){return!k&&!n.isOldVersion?(w(),st(),k=!0,b().then(function(n){return g(n),y=n,rt()}).catch(ut)):i.resolved()},stop:function(){return w(),k=!1,ht()},checkVersion:function(){return b().then(function(n){return g(n),n})}}}Object.defineProperty(t,"__esModule",{value:!0});var u=require("../../vanillaExtension/vanilla"),f=require("../../vanillaExtension/vanillaDialog"),i=require("../deferred"),e=require("../../utils"),o="serviceUpdates",r=n.TEST_MODE?1e3:5e3;t.default=s})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/serviceOfflineManager"),geotab.commonjs.generateExport("geotab/checkmate/ui/serviceOfflineManager"));
(function(n,require,t){"use strict";function e(t,e){var h=function(n,t){var r=t.match(/<script[^>]*>\s*<\/script>/igm),i;n.innerHTML=t.replace(/<script[^>]*>([\s\S]*)<\/script>/igm,"");i=document.querySelector("head");r&&i&&r.forEach(function(n){var r=/src=['"]?([^'"]+)['"]?/ig.exec(n),t;r&&r.length>1&&(t=document.createElement("script"),t.src=r[1],t.async=!1,i&&i.appendChild(t))})},c=function(t,i){var f=r.Deferred(),e=function(n){return"brands/"+n+"/"+i+".html"};return t.length?t.map(e).forEach(function(t){n.load(t,function(n){n&&f.resolve(n)},u.NOOP)}):f.resolve(""),f.promise()},l,a=function(n){return n==="geotab"},o=n.location.getVendorPrefix(),s=[];return o.domain&&!a(o.domain)&&s.push(o.domain),o.prefix&&s.push(o.prefix),{addCustomHome:function(){return l=c(s,"customHome").then(function(n){return n?(h(e,n),i.show(e),!0):!1})},removeCustomHome:function(){return(l||r.resolved()).then(function(){return e?(i.hide(e),e.innerHTML="",!0):!1})},addBrand:function(n){return c(s,"brand").then(function(i){if(i){t.style.display="block";h(t,i);var r=t.offsetHeight,u=new MutationObserver(function(){n.resize("north");r=t.offsetHeight});return u.observe(t,{childList:!0,subtree:!0}),f.default().attachEvent("resize",function(){r!==t.offsetHeight&&(n.resize("north"),r=t.offsetHeight)}),!0}return!1})}}}Object.defineProperty(t,"__esModule",{value:!0});t.Brand=void 0;var u=require("../utils"),i=require("../vanillaExtension/vanilla"),r=require("./deferred"),f=require("./windowObserver");t.Brand=e})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/brand"),geotab.commonjs.generateExport("geotab/checkmate/brand"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=300,r=function(){function n(n,t){this.fontName=n;this.fonts=t}return n.prototype.getCSSRule=function(){var t=this,n="";return this.fonts.forEach(function(i){var r=i.options;n+='\n                @font-face {\n                    font-family: "'+t.fontName+'";\n                    font-style: '+r.style+";\n                    font-weight: "+r.weight+";\n                    src:\n            ";i.files.forEach(function(t,r){n+="url("+t.url+') format("'+t.format+'")'+(r===i.files.length-1?";":",")});n+="}"}),n},n.prototype.load=function(){var r=this,t,u,f,e;this.fonts&&this.fonts.length&&(n.isSupported()?(t=this.fonts[0],t.files.length&&(u=t.files.filter(function(n){return n.format==="woff2"})[0],u&&(f=new window.FontFace(this.fontName,"url("+u.url+")",t.options),e=Date.now(),f.load(),f.loaded.then(function(){var t=Date.now();r.inCache=t-e<i;r.inCache&&n.insertFont(r.getCSSRule())})))):n.insertFont(this.getCSSRule()))},n.insertFont=function(n){var t=document.createElement("style");t.innerHTML=n;document.head&&document.head.appendChild(t)},n.isSupported=function(){return!!window.FontFace},n}();t.default=r})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/fontTools/fontLoader"),geotab.commonjs.generateExport("geotab/checkmate/ui/fontTools/fontLoader"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.NOTOSANSJP_CONFIG=void 0;t.NOTOSANSJP_CONFIG=[{files:[{url:"../../fonts/notosans/NotoSansJP-Regular.woff2",format:"woff2"},{url:"../../fonts/notosans/NotoSansJP-Regular.woff",format:"woff"},{url:"../../fonts/notosans/NotoSansJP-Regular.otf",format:"opentype"}],options:{style:"normal",weight:"400"}},{files:[{url:"../../fonts/notosans/NotoSansJP-Bold.woff2",format:"woff2"},{url:"../../fonts/notosans/NotoSansJP-Bold.woff",format:"woff"},{url:"../../fonts/notosans/NotoSansJP-Bold.otf",format:"opentype"}],options:{style:"normal",weight:"700"}},{files:[{url:"../../fonts/notosans/NotoSansJP-Black.woff2",format:"woff2"},{url:"../../fonts/notosans/NotoSansJP-Black.woff",format:"woff"},{url:"../../fonts/notosans/NotoSansJP-Black.otf",format:"opentype"}],options:{style:"normal",weight:"900"}}]})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/fontTools/notosansjpconfig"),geotab.commonjs.generateExport("geotab/checkmate/ui/fontTools/notosansjpconfig"));
(function(n,require,t){"use strict";function d(n,r,u,f,e,o){return t.checkDirectAdminAccess(r,u,f,e,o)?t.requestDirectAcceptance(n):i.reject(!1)}function r(n){return n&&(n.securityGroups||[]).some(function(n){return n.id==="GroupEverythingSecurityId"})}function u(n){return!!(n&&new Date(n).getTime()>0)}function g(n){return n.message.indexOf(e)>=0}function nt(n){return o.some(function(t){return n.message.indexOf(t)>=0})}function tt(n){return t.isDirectException(n)&&s.some(function(t){return n.message.indexOf(t)>=0})}function it(n){return h.some(function(t){return n.message.indexOf(t)>=0})}var f,e,o,s,h,c,l;Object.defineProperty(t,"__esModule",{value:!0});t.translateTicketException=t.isDatabaseNotSupportedException=t.isTicketNotFoundException=t.isNoEmailAddressException=t.isMultipleOrganizationsException=t.isDirectException=t.isDirectAccepted=t.isDirectCanBeAccepted=t.isDirectSupported=t.checkDirectAdminAccess=t.requestDirectAcceptance=void 0;var i=require("../../deferred"),a=require("../../../utils"),v=function(n){return n.call("IsServiceEligible",{service:"DirectSupport"}).then(function(n){return n||i.reject(!1)})};t.requestDirectAcceptance=v;var y="ADDSUPPORTLINKS",p=["att.com"],w=function(n){return p.some(function(t){return n.indexOf(t)===n.length-t.length})},b=function(n,t){return!a.isWhiteLabeled(t)||w(t)&&n.toUpperCase().indexOf(y)>=0},k=function(n,t,i,f,e){return!b(n,t)||!e("DirectSupportAdmin")?!1:u(i)||r(f)?!0:!1};t.checkDirectAdminAccess=k;t.isDirectSupported=d;t.isDirectCanBeAccepted=r;t.isDirectAccepted=u;f=function(n){return!!(n&&n.isDirectSupportException)};t.isDirectException=f;e="MultipleOrganizationFoundError";t.isMultipleOrganizationsException=g;o=["NoEmailAddressError","InvalidEmailAddress","MissingFirstAndLastName"];t.isNoEmailAddressException=nt;s=["InvalidTicket","NoTicketFound"];t.isTicketNotFoundException=tt;h=["DatabaseNotDirectSupported","OrganizationNotFound","UserNotAllowed"];t.isDatabaseNotSupportedException=it;c={NoEmailAddressError:"NoEmailAddressError",InvalidEmailAddress:"NoEmailAddressError",MissingFirstAndLastName:"NoFirstAndLastName",MultipleOrganizationFoundError:"MultipleOrganizationFoundError",InvalidTicket:"NoTicketFound",NoTicketFound:"NoTicketFound",UserNotAllowed:"TicketsNotSupportedForUser",DatabaseNotDirectSupported:"TicketsNotSupported",OrganizationNotFound:"TicketsNotSupported"};l=function(n,t){return t(c[n])};t.translateTicketException=l})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/tickets/ticketsSupport"),geotab.commonjs.generateExport("geotab/checkmate/ui/tickets/ticketsSupport"));
(function(n,require,t){"use strict";function r(n,t,r,u){var e=function(){if(i&&clearTimeout(i),u(n.href)){n.removeEventListener("mouseover",e,!1);return}i=setTimeout(function(){var i=f.create("link",{rel:"prefetch",href:o(n.href),as:"fetch"});t.appendChild(i);n.removeEventListener("mouseover",e,!1)},r||1)};n.addEventListener("mouseover",e,!1)}var u;Object.defineProperty(t,"__esModule",{value:!0});t.createPrefetchLinks=t.createPrefetchLink=void 0;var f=require("../../../../vanillaExtension/vanilla"),i,e="geotab/checkmate/ui/",o=function(n){if(n.indexOf(window.location.origin)===0){var t=n.split("#"),i=t.length>1?t[1].indexOf(",")!==-1?t[1].split(",")[0]:t[1]:"";return""+t[0]+e+i+".html"}return n},s=function(n){return n.indexOf("#marketplace")===-1&&n.indexOf("#addin-")===-1};t.createPrefetchLink=r;u=function(n,t,i){setTimeout(function(){Array.prototype.forEach.call(n.getElementsByTagName("a"),function(n){s(n.href)&&r(n,t,300,i)})},1)};t.createPrefetchLinks=u})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/prefetchLinks/prefetchLinks"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/prefetchLinks/prefetchLinks"));
(function(n,require,t){"use strict";var u=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});t.AddinsWatcher=void 0;var f=require("../../checkmate/eventHandler"),r=require("../../utils"),e=require("./compareAddins"),o=["enableViewSecurityId","securityIds"],s=function(n){function t(t,r){var u=n.call(this)||this;return u.currentAddins=r,t.attach("SystemSettingsUpdated",function(n){var t=u.compareAddins(n.customerPages,u.currentAddins);u.currentAddins=n.customerPages;(t.added.length!==0||t.removed.length!==0||t.changedDescription.length>0)&&u.fire("change",i(i({},t),{allowUnsignedAddIn:n.allowUnsignedAddIn}))}),u}return u(t,n),t.prototype.createAddinsPair=function(n,t){return n.map(function(n){var i=t.filter(e.isSameAddinFn(n));return i.length>0?[n,i[0]]:[]}).filter(function(n){return n.length===2})},t.prototype.isAddinMetaChanged=function(n,t){return o.some(function(i){return r.compareElements(n[i],t[i])})},t.prototype.compareAddins=function(n,t){var e=this,i=n.map(function(n){return JSON.parse(n)}),u=t.map(function(n){return JSON.parse(n)}),f=function(n){return n.url?function(t){return n.url===t.url}:function(t){return n.name===t.name&&r.compareElements(n.items,t.items)}};return{added:i.filter(function(n){return!u.some(f(n))}).map(function(n){return JSON.stringify(n)}),removed:u.filter(function(n){return!i.some(f(n))}).map(function(n){return JSON.stringify(n)}),changedDescription:this.createAddinsPair(u,i).filter(function(n){var t=n[0],i=n[1];return e.isAddinMetaChanged(t,i)}).map(function(n){var i=n[0],t=n[1];return JSON.stringify(t)})}},t}(f.SimpleEventHandler);t.AddinsWatcher=s})(geotab,geotab.commonjs.generateRequire("geotab/services/addinsListWarcher/addinsWatcher"),geotab.commonjs.generateExport("geotab/services/addinsListWarcher/addinsWatcher"));
(function(n,require,t){"use strict";var r,i;Object.defineProperty(t,"__esModule",{value:!0});t.createMessageTopic=t.TopicType=void 0,function(n){n.Add="Add";n.Set="Set";n.Remove="Remove"}(r=t.TopicType||(t.TopicType={}));i=function(n,t){return["dataupdate",t,"TextMessage",n].join("|")};t.createMessageTopic=i})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/messagesTools/tools/createMessageTopic"),geotab.commonjs.generateExport("geotab/checkmate/ui/messagesTools/tools/createMessageTopic"));
(function(n,require,t){"use strict";var i,u,f,e;Object.defineProperty(t,"__esModule",{value:!0});t.getUnreadMessageFilter=t.isUnreadRecipientMessage=t.isUnreadDeviceMessage=void 0;i=function(n){return!!(n.device&&n.device.id&&!n.read&&!n.isDirectionToVehicle)};t.isUnreadDeviceMessage=i;var r=function(n,t){return n.user!==undefined&&n.user.id===t},o=function(n,t){return n.recipient!==undefined&&n.recipient.id===t&&!r(n,t)},s=function(n,t){return n.recipient!==undefined&&n.user!==undefined&&n.recipient.id===n.user.id&&!r(n,t)},h=function(n){return function(t){return!t.read&&(o(t,n)||s(t,n))}};t.isUnreadRecipientMessage=h;u=function(n,t){return t.indexOf(n.messageContent.contentType)!==-1};f=function(n,t){return function(i){return e(i,n,t)}};t.getUnreadMessageFilter=f;e=function(n,i,r){return u(n,i)&&(t.isUnreadDeviceMessage(n)||t.isUnreadRecipientMessage(r)(n))}})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/messagesTools/tools/unreadMesssageFilter"),geotab.commonjs.generateExport("geotab/checkmate/ui/messagesTools/tools/unreadMesssageFilter"));
(function(n,require,t){"use strict";var i=this&&this.__spreadArray||function(n,t){for(var i=0,u=t.length,r=n.length;i<u;i++,r++)n[r]=t[i];return n},u;Object.defineProperty(t,"__esModule",{value:!0});t.isSystemContentType=t.getContentTypeSearch=void 0;var f=["Normal","CannedResponse","Location"],r=["Immobilization","GoTalk","CAN"],e=function(n){return i(i([],f),n?r:[])};t.getContentTypeSearch=e;u=function(n){return r.indexOf(n)>=0};t.isSystemContentType=u})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/messagesTools/tools/contentTypeSearch"),geotab.commonjs.generateExport("geotab/checkmate/ui/messagesTools/tools/contentTypeSearch"));
(function(n,require,t){"use strict";var i,r,u;Object.defineProperty(t,"__esModule",{value:!0});t.getMessagesFeed=t.MIN_VERSION=void 0;i=require("../../../deferred");r=require("../../../abortPromiseToken");t.MIN_VERSION="0000000000000000";u=function(n,u,f,e,o){f===void 0&&(f=10);e===void 0&&(e=new r.AbortPromiseToken);o===void 0&&(o=t.MIN_VERSION);var h=i.resolve({version:o,messages:[],isDone:!1}),c=function(t){return i.race([n("GetFeed",{typeName:"TextMessage",resultsLimit:f,fromVersion:t,search:u}),e.promise])},s=function(n){return n.then(function(n){return n.isDone?{messages:n.messages,version:n.version}:s(c(n.version).then(function(t){return{version:t.toVersion,messages:n.messages.concat(t.data),isDone:t.data.length<f||!t.toVersion||t.toVersion===n.version}}))})};return{request:s(h),abortToken:function(){return e.abort()}}};t.getMessagesFeed=u})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/messagesTools/tools/messagesFeedTools"),geotab.commonjs.generateExport("geotab/checkmate/ui/messagesTools/tools/messagesFeedTools"));
(function(n,require,t){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});t.markMessagesAsDelivered=void 0;var r=require("../../../../utils"),u=require("../../../deferred"),f=function(n,t){return t?!!(n.device&&n.device.id&&!n.isDirectionToVehicle):!1},e=function(n,t,i){return t?!1:!!(n.recipient&&typeof n.recipient!="string"&&n.recipient.id===i)},o=function(n,t){if(n.delivered||!n.user||typeof n.user=="string")return!0;var i=n.user.id===t;return!(f(n,i)||e(n,i,t))},s=function(n,t,f,e){return e===void 0&&(e=(new Date).toISOString()),u.together(t.filter(function(n){return!o(n,f)}).map(function(t){return n(i(i({},t),{delivered:e}))})).then(r.NOOP)};t.markMessagesAsDelivered=s})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/messagesTools/tools/markMessagesAsDelivered"),geotab.commonjs.generateExport("geotab/checkmate/ui/messagesTools/tools/markMessagesAsDelivered"));
(function(n,require,t){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0});t.getRequestFromDate=t.getRequestPeriodName=void 0;var u=require("../../../../date"),i="SHORT_MESSAGES_PERIOD",f=function(n){return n.indexOf(i)>=0?"PreviousWeek":"PreviousTwoWeeks"};t.getRequestPeriodName=f;r=function(n){var r=n.indexOf(i)>=0?-7:-14,t=new Date;return u.addDays(new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0),r)};t.getRequestFromDate=r})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/messagesTools/tools/loadMessages/requestPeriod"),geotab.commonjs.generateExport("geotab/checkmate/ui/messagesTools/tools/loadMessages/requestPeriod"));
(function(n,require,t){"use strict";var w=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),f=this&&this.__assign||function(){return f=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},f.apply(this,arguments)},r=this&&this.__spreadArray||function(n,t){for(var i=0,u=t.length,r=n.length;i<u;i++,r++)n[r]=t[i];return n},s,p;Object.defineProperty(t,"__esModule",{value:!0});t.createUnreadMessagesWatcher=t.EmptyUnreadMessagesWatcher=t.UnreadMessagesWatcher=void 0;var b=require("../checkmate/eventHandler"),u=require("../checkmate/deferred"),h=require("../utils"),c=require("../checkmate/abortPromiseToken"),i=require("../checkmate/ui/messagesTools/tools/createMessageTopic"),l=require("../checkmate/ui/messagesTools/tools/unreadMesssageFilter"),k=require("../checkmate/ui/messagesTools/tools/contentTypeSearch"),e=require("../checkmate/ui/messagesTools/tools/messagesFeedTools"),d=require("../checkmate/ui/messagesTools/tools/messagesPageLinks"),g=require("../checkmate/ui/messagesTools/tools/markMessagesAsDelivered"),nt=require("../checkmate/ui/messagesTools/tools/loadMessages/requestPeriod"),a=150,tt=6e4,o=k.getContentTypeSearch(!1),v={isRead:!1,isDirectionToVehicle:!1,contentTypes:o},y=function(n){function t(t,r,f,o,s,h,l){var a=n.call(this)||this,v;return a.currentUser=t,a.messageStore=r,a.request=f,a.isEditable=h,a.customCode=l,a.abortToken=new c.AbortPromiseToken,a.messages=u.resolve([]),a.isUpdateReqiured=!1,a.isStarted=!1,a.deviceMessagesVersion=e.MIN_VERSION,a.recipientMessagesVersion=e.MIN_VERSION,a.fromDate=a.getFromDate(),v=[[i.createMessageTopic(i.TopicType.Add,o),function(n){a.handleWebSocketChange(i.TopicType.Add,n)}],[i.createMessageTopic(i.TopicType.Set,o),function(n){a.handleWebSocketChange(i.TopicType.Set,n)}],[i.createMessageTopic(i.TopicType.Remove,o),function(n){a.handleWebSocketChange(i.TopicType.Remove,n)}]],v.forEach(function(n){var t=n[0],i=n[1];s.subscribe(t,i)}),a}return w(t,n),t.prototype.getFromDate=function(){return nt.getRequestFromDate(this.customCode)},t.prototype.filterByMessageContent=function(n){return n.filter(function(n){return n.messageContent&&o.indexOf(n.messageContent.contentType)!==-1})},t.prototype.filterSelfMessages=function(n){var t=this;return n.filter(function(n){return n.user&&typeof n.user!="string"&&n.user.id!==t.currentUser.id})},t.prototype.filterRemovedMessages=function(n){var t=(new Date).toISOString();return n.filter(function(n){return n.activeTo>t})},t.prototype.filterMessagesCandidates=function(n){var t=l.isUnreadRecipientMessage(this.currentUser.id),i=(new Date).toISOString();return this.filterByMessageContent(n.filter(h.echo)).filter(function(n){return n.activeTo>i}).filter(function(n){return t(n)||l.isUnreadDeviceMessage(n)})},t.prototype.loadMessages=function(n,t){var r=this,i=this.currentUser.companyGroups;return u.together([e.getMessagesFeed(this.request,f(f({},v),{fromDate:this.fromDate,recipientSearch:{id:this.currentUser.id}}),a,undefined,t).request.then(function(n){return{version:n.version,messages:r.filterSelfMessages(n.messages)}}),e.getMessagesFeed(this.request,f(f({},v),{fromDate:this.fromDate,deviceSearch:{groups:h.isEntireOrganization(i)?[]:i.map(function(n){return{id:n.id}})}}),a,undefined,n).request])},t.prototype.requestNewMessages=function(){var n=this;return this.loadMessages(this.deviceMessagesVersion,this.recipientMessagesVersion).then(function(t){var i=t[0],u=t[1];return(n.recipientMessagesVersion=i.version,!n.currentUser.viewDriversOwnDataOnly)?(n.deviceMessagesVersion=u.version,r(r([],i.messages),u.messages)):i.messages}).then(function(t){return n.filterRemovedMessages(n.filterByMessageContent(t))})},t.prototype.reloadData=function(){var n=this;this.messages=this.messages.then(function(t){return n.requestNewMessages().then(function(i){var u=i.filter(function(n){return t.every(function(t){return t.id!==n.id})});return u.length>0&&n.processNewData(),r(r([],t),u)}).catch(function(){return n.isUpdateReqiured=!0,t})})},t.prototype.setNewTimer=function(){var n=this;this.timerId&&clearTimeout(this.timerId);this.timerId=setTimeout(function(){if(!n.isUpdateReqiured){n.setNewTimer();return}n.isUpdateReqiured=!1;n.reloadData()},tt)},t.prototype.processNewData=function(){this.fire("change");this.setNewTimer()},t.prototype.notifyWebSocketChanges=function(){this.isUpdateReqiured=!0;this.fire("change")},t.prototype.handleRemoveChange=function(n,t){var i=n.filter(function(n){return t.indexOf(n.id)===-1});return i.length!==n.length?{changed:!0,messages:i}:{changed:!1,messages:n}},t.prototype.handleSetChange=function(n,t){var i=this,f=t.filter(function(t){return n.some(function(n){return n.id===t})});return f.length===0?u.resolve({messages:n,changed:!1}):u.together(f.map(function(n){return i.messageStore.getItemById(n)})).then(function(t){var f=r(r([],n.filter(function(n){return t.every(function(t){return t.id!==n.id})})),t),u=i.filterMessagesCandidates(f);return u.length!==n.length?{changed:!0,messages:u}:{messages:n,changed:!1}}).catch(function(){return{messages:n,changed:!1}})},t.prototype.handleAddChange=function(n,t){var i=this;return u.together(t.filter(function(t){return n.every(function(n){return n.id!==t})}).map(function(n){return i.messageStore.getItemById(n)})).then(function(n){return i.filterMessagesCandidates(n)}).then(function(t){return t.length>0?{changed:!0,messages:r(r([],n),t)}:{messages:n,changed:!1}}).catch(function(){return{messages:n,changed:!1}})},t.prototype.handleWebSocketChange=function(n,t){var r=this,u=t.data||[];this.isContentTypeSupported(t)&&(this.messages=this.messages.then(function(t){return n===i.TopicType.Add?r.handleAddChange(t,u):n===i.TopicType.Set?r.handleSetChange(t,u):r.handleRemoveChange(t,u)}).then(function(n){var i=n.changed,t=n.messages;return i&&(r.notifyWebSocketChanges(),r.isEditable&&g.markMessagesAsDelivered(r.messageStore.setItem,t,r.currentUser.id)),t}))},t.prototype.isContentTypeSupported=function(n){return!n.entityData||!n.entityData.contentType||o.indexOf(n.entityData.contentType)!==-1},Object.defineProperty(t.prototype,"unreadMessages",{get:function(){return this.messages.then(function(n){return n.length})},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.isStarted||(this.isStarted=!0,this.abortToken.abort(),this.abortToken=new c.AbortPromiseToken,this.fromDate=this.getFromDate(),this.reloadData())},t.prototype.stop=function(){this.abortToken.abort();this.timerId&&clearTimeout(this.timerId);this.timerId=undefined;this.isUpdateReqiured=!1;this.deviceMessagesVersion=e.MIN_VERSION;this.recipientMessagesVersion=e.MIN_VERSION;this.isStarted=!1;this.messages=u.resolve([])},t}(b.SimpleEventHandler);t.UnreadMessagesWatcher=y;s=function(){function n(){}return n.prototype.attach=function(){},Object.defineProperty(n.prototype,"unreadMessages",{get:function(){return u.resolve(0)},enumerable:!1,configurable:!0}),n.prototype.start=function(){},n.prototype.stop=function(){},n}();t.EmptyUnreadMessagesWatcher=s;p=function(n,t,i,r,u,f,e){var o=t("SendGpsTextMessage")||t("DeleteGpsTextMessage");return o&&(n||"").toUpperCase().indexOf(d.LEGACY_TEXTMESSAGING)===-1?new y(i,r,u,f,e,o,n):new s};t.createUnreadMessagesWatcher=p})(geotab,geotab.commonjs.generateRequire("geotab/services/unreadMessagesWatcher"),geotab.commonjs.generateExport("geotab/services/unreadMessagesWatcher"));
(function(n,require,t){"use strict";var r,i;Object.defineProperty(t,"__esModule",{value:!0});t.createDeviceShareTopic=t.TopicType=void 0,function(n){n.Add="Add";n.Set="Set";n.Remove="Remove"}(r=t.TopicType||(t.TopicType={}));i=function(n,t){return["dataupdate",t,"DeviceShare",n].join("|")};t.createDeviceShareTopic=i})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/messagesTools/tools/createDeviceSharingTopic"),geotab.commonjs.generateExport("geotab/checkmate/ui/messagesTools/tools/createDeviceSharingTopic"));
(function(n,require,t){"use strict";var e=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),i,f;Object.defineProperty(t,"__esModule",{value:!0});t.createDeviceSharingWatcher=t.EmptyUnreadMessagesWatcher=t.DeviceSharingWatcher=void 0;var o=require("../checkmate/eventHandler"),r=require("../checkmate/ui/messagesTools/tools/createDeviceSharingTopic"),s=require("../checkmate/deferred"),u=function(n){function t(t,i,u){var f=n.call(this)||this,e;return f.store=t,f.deviceShareData=[],e=[[r.createDeviceShareTopic(r.TopicType.Add,i),function(n){n.data&&(n.data.forEach(function(n){f.deviceShareData.push(n)}),f.timeout&&clearTimeout(f.timeout),f.timeout=setTimeout(function(){f.getDataStream(f.deviceShareData).then(function(n){f.fire("change",n);f.deviceShareData=[]})},100))}]],e.forEach(function(n){var t=n[0],i=n[1];u.subscribe(t,i)}),f}return e(t,n),t.prototype.getDataStream=function(n){return s.together(n.map(this.store.deviceShare.getItemById))},t}(o.SimpleEventHandler);t.DeviceSharingWatcher=u;i=function(){function n(){}return n.prototype.attach=function(){},n.prototype.start=function(){},n.prototype.stop=function(){},n}();t.EmptyUnreadMessagesWatcher=i;f=function(n,t,r,f){return f?new u(n,t,r):new i};t.createDeviceSharingWatcher=f})(geotab,geotab.commonjs.generateRequire("geotab/services/deviceSharingWatcher"),geotab.commonjs.generateExport("geotab/services/deviceSharingWatcher"));
(function(n,require,t){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i.apply(this,arguments)},o=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))},f,e;Object.defineProperty(t,"__esModule",{value:!0});t.showUserTimeZoneMismatch=t.createTimeZoneNotificationFn=t.showClosableUserTimeZoneMismatch=void 0;var s=require("../../../utils"),r=require("../../deferred"),h=require("../notifier"),u="isUserNotifiedOfTimezone",c=function(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(n){return""}},l=["Your time zone is currently set to {0}, but your computer time zone is currently set to {1}. To change your timezone, go to your {LINK}. If this is intentional, please ignore this message.","Your time zone is currently set to {0}, but your computer time zone is currently set to {1}. If this is intentional, please ignore this message.","User Options"],a=function(n,t,i,r,u){return i?{message:r("Your time zone is currently set to {0}, but your computer time zone is currently set to {1}. If this is intentional, please ignore this message.").replace("{0}",r(n)).replace("{1}",r(t))}:{message:r("Your time zone is currently set to {0}, but your computer time zone is currently set to {1}. To change your timezone, go to your {LINK}. If this is intentional, please ignore this message.").replace("{0}",r(n)).replace("{1}",r(t)),link:{name:r("User Options"),href:u}}},v=function(n,i,f,e,o,s){return(s===void 0&&(s=!1),s)?r.resolve(undefined):!f("UserSettings")&&!f("UserAdmin")?r.resolve(undefined):(e.hasItem(u)||e.setItem(u,!1,!0),e.getItem(u))?r.resolve(undefined):t.showUserTimeZoneMismatch(n,i,function(n,t){return o(i,t,function(){return e.setItem(u,!0,!0)})})};t.showClosableUserTimeZoneMismatch=v;f=function(n,t,r,u){return u===void 0&&(u=""),function(f,e,c){return c===void 0&&(c=s.NOOP),t(o([f,e],l,!0)).then(function(t){var o=h.default(r);return o.displayPopupNotification(i(i({},a(f,e,n,function(n){return t.dict.hasOwnProperty(n)?t.dict[n]:r(n)},u)),{dismiss:c}))})}};t.createTimeZoneNotificationFn=f;e=function(n,t,i){var f=-(new Date).getTimezoneOffset(),u;return f===n?r.resolve(undefined):(u=c()||"Unknown",i(t,u))};t.showUserTimeZoneMismatch=e})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/userTools/timeZoneNotification"),geotab.commonjs.generateExport("geotab/checkmate/ui/userTools/timeZoneNotification"));
(function(n,require,t){"use strict";var i,r;Object.defineProperty(t,"__esModule",{value:!0});t.filterAddinItems=t.filterAddinsFn=void 0;i=function(n,t,i){return t?function(t){return(n||t.isSigned)&&(!t.enableViewSecurityId||i(t.name))}:function(){return!1}};t.filterAddinsFn=i;r=function(n,t){return t.filter(function(t){return n.indexOf(t.type)>=0})};t.filterAddinItems=r})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/addinsTools/filterAddin"),geotab.commonjs.generateExport("geotab/checkmate/addinsTools/filterAddin"));
(function(n,require,t){"use strict";var e;Object.defineProperty(t,"__esModule",{value:!0});t.isHashingSupported=t.createSha2Digest=void 0;var i=require("../checkmate/deferred"),r=require("../utils"),o=function(){if(window.TextEncoder){var n=new TextEncoder;return function(t){return n.encode(t)}}return function(n){for(var f=n.length,i=-1,r=new Uint8Array(f*3),t=0,u=0;u!==f;)t=n.charCodeAt(u),u+=1,t<=127?r[i+=1]=0|t:t<=2047?(r[i+=1]=192|t>>>6,r[i+=1]=128|t&63):(r[i+=1]=224|t>>>12,r[i+=1]=128|t>>>6&63,r[i+=1]=128|t&63);return r.subarray(0,i+1)}},s=function(n){for(var t,r=new Uint8Array(n),u="",i=0;i<r.length;++i)t=r[i].toString(16),u+=t.length===1?"0"+t:t;return u},u=function(){return i.resolve(r.generateId()+r.generateId())},f=function(){return window.crypto&&window.crypto.subtle&&typeof window.crypto.subtle.digest=="function"?function(n){var t=i.Deferred();return window.crypto.subtle.digest("SHA-256",n).then(s).then(t.resolve,t.reject),t.promise()}:undefined},h=function(n){var t=f();return t?t(o()(n)).catch(function(){return u(n)}):u(n)};t.createSha2Digest=h;e=function(){return f()!==undefined};t.isHashingSupported=e})(geotab,geotab.commonjs.generateRequire("geotab/utils/sha2Digest"),geotab.commonjs.generateExport("geotab/utils/sha2Digest"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getContinentNameByTimeZone=void 0;var i=[{continent:"Africa",timezones:["Africa/Abidjan","Africa/Accra","Africa/Addis_Ababa","Africa/Algiers","Africa/Asmera","Africa/Bamako","Africa/Bangui","Africa/Banjul","Africa/Bissau","Africa/Blantyre","Africa/Brazzaville","Africa/Bujumbura","Africa/Cairo","Africa/Casablanca","Africa/Ceuta","Africa/Conakry","Africa/Dakar","Africa/Dar_es_Salaam","Africa/Djibouti","Africa/Douala","Africa/El_Aaiun","Africa/Freetown","Africa/Gaborone","Africa/Harare","Africa/Johannesburg","Africa/Juba","Africa/Kampala","Africa/Khartoum","Africa/Kigali","Africa/Kinshasa","Africa/Lagos","Africa/Libreville","Africa/Lome","Africa/Luanda","Africa/Lubumbashi","Africa/Lusaka","Africa/Malabo","Africa/Maputo","Africa/Maseru","Africa/Mbabane","Africa/Mogadishu","Africa/Monrovia","Africa/Nairobi","Africa/Ndjamena","Africa/Niamey","Africa/Nouakchott","Africa/Ouagadougou","Africa/Porto-Novo","Africa/Sao_Tome","Africa/Tripoli","Africa/Tunis","Africa/Windhoek","Atlantic/Cape_Verde","Atlantic/St_Helena","Indian/Antananarivo"]},{continent:"Asia",timezones:["Asia/Aden","Asia/Almaty","Asia/Amman","Asia/Anadyr","Asia/Aqtau","Asia/Aqtobe","Asia/Ashgabat","Asia/Baghdad","Asia/Bahrain","Asia/Baku","Asia/Bangkok","Asia/Barnaul","Asia/Beirut","Asia/Bishkek","Asia/Brunei","Asia/Calcutta","Asia/Chita","Asia/Choibalsan","Asia/Chongqing","Asia/Colombo","Asia/Damascus","Asia/Dhaka","Asia/Dili","Asia/Dubai","Asia/Dushanbe","Asia/Gaza","Asia/Harbin","Asia/Hebron","Asia/Hong_Kong","Asia/Hovd","Asia/Irkutsk","Asia/Jakarta","Asia/Jayapura","Asia/Jerusalem","Asia/Kabul","Asia/Kamchatka","Asia/Karachi","Asia/Kashgar","Asia/Katmandu","Asia/Khandyga","Asia/Krasnoyarsk","Asia/Kuala_Lumpur","Asia/Kuching","Asia/Kuwait","Asia/Macau","Asia/Magadan","Asia/Makassar","Asia/Manila","Asia/Muscat","Asia/Nicosia","Asia/Novokuznetsk","Asia/Novosibirsk","Asia/Omsk","Asia/Oral","Asia/Phnom_Penh","Asia/Pontianak","Asia/Pyongyang","Asia/Qatar","Asia/Qyzylorda","Asia/Rangoon","Asia/Riyadh","Asia/Saigon","Asia/Sakhalin","Asia/Samarkand","Asia/Seoul","Asia/Shanghai","Asia/Singapore","Asia/Srednekolymsk","Asia/Taipei","Asia/Tashkent","Asia/Tbilisi","Asia/Tehran","Asia/Thimphu","Asia/Tokyo","Asia/Tomsk","Asia/Ulaanbaatar","Asia/Urumqi","Asia/Ust-Nera","Asia/Vientiane","Asia/Vladivostok","Asia/Yakutsk","Asia/Yekaterinburg","Asia/Yerevan","Indian/Chagos","Indian/Christmas","Indian/Cocos","Indian/Comoro","Indian/Kerguelen","Indian/Mahe","Indian/Maldives","Indian/Mauritius","Indian/Mayotte","Indian/Reunion","Pacific/Guam","Pacific/Kosrae","Pacific/Saipan","Pacific/Truk","Pacific/Wake"]},{continent:"Australia & New Zealand",timezones:["Australia/Adelaide","Australia/Brisbane","Australia/Broken_Hill","Australia/Currie","Australia/Darwin","Australia/Hobart","Australia/Lindeman","Australia/Melbourne","Australia/Perth","Australia/Sydney","Pacific/Apia","Pacific/Auckland","Pacific/Bougainville","Pacific/Efate","Pacific/Enderbury","Pacific/Fakaofo","Pacific/Fiji","Pacific/Funafuti","Pacific/Guadalcanal","Pacific/Kiritimati","Pacific/Kwajalein","Pacific/Majuro","Pacific/Nauru","Pacific/Niue","Pacific/Noumea","Pacific/Pago_Pago","Pacific/Port_Moresby","Pacific/Rarotonga","Pacific/Tarawa","Pacific/Tongatapu"]},{continent:"Central & South America",timezones:["America/Anguilla","America/Antigua","America/Araguaina","America/Argentina/La_Rioja","America/Argentina/Rio_Gallegos","America/Argentina/Salta","America/Argentina/San_Juan","America/Argentina/San_Luis","America/Argentina/Tucuman","America/Argentina/Ushuaia","America/Aruba","America/Asuncion","America/Bahia","America/Bahia_Banderas","America/Barbados","America/Belem","America/Belize","America/Blanc-Sablon","America/Boa_Vista","America/Bogota","America/Boise","America/Buenos_Aires","America/Campo_Grande","America/Caracas","America/Catamarca","America/Cayenne","America/Cayman","America/Cordoba","America/Costa_Rica","America/Cuiaba","America/Curacao","America/Dominica","America/Eirunepe","America/El_Salvador","America/Fortaleza","America/Grand_Turk","America/Grenada","America/Guadeloupe","America/Guatemala","America/Guayaquil","America/Guyana","America/Havana","America/Jamaica","America/Jujuy","America/La_Paz","America/Lima","America/Lower_Princes","America/Maceio","America/Managua","America/Manaus","America/Marigot","America/Martinique","America/Mendoza","America/Montevideo","America/Montserrat","America/Nassau","America/Noronha","America/Panama","America/Paramaribo","America/Port-au-Prince","America/Port_of_Spain","America/Porto_Velho","America/Puerto_Rico","America/Recife","America/Rio_Branco","America/Santa_Isabel","America/Santarem","America/Santiago","America/Santo_Domingo","America/Sao_Paulo","America/St_Barthelemy","America/St_Johns","America/St_Kitts","America/St_Lucia","America/St_Thomas","America/St_Vincent","America/Tegucigalpa","America/Tortola","Atlantic/Bermuda","Atlantic/South_Georgia","Atlantic/Stanley","Pacific/Easter","Pacific/Galapagos"]},{continent:"United States",timezones:["America/Anchorage","America/Chicago","America/Creston","America/Denver","America/Detroit","America/Indiana/Knox","America/Indiana/Marengo","America/Indiana/Petersburg","America/Indiana/Tell_City","America/Indiana/Vevay","America/Indiana/Vincennes","America/Indiana/Winamac","America/Indianapolis","America/Juneau","America/Kentucky/Monticello","America/Los_Angeles","America/Louisville","America/Menominee","America/Metlakatla","America/New_York","America/Nome","America/North_Dakota/Beulah","America/North_Dakota/Center","America/North_Dakota/New_Salem","America/Phoenix","America/Shiprock","America/Sitka","America/Yakutat","Pacific/Honolulu","Pacific/Johnston","Pacific/Midway"]},{continent:"Canada",timezones:["America/Cambridge_Bay","America/Coral_Harbour","America/Dawson","America/Dawson_Creek","America/Edmonton","America/Fort_Nelson","America/Glace_Bay","America/Goose_Bay","America/Halifax","America/Inuvik","America/Iqaluit","America/Moncton","America/Montreal","America/Nipigon","America/Pangnirtung","America/Rainy_River","America/Rankin_Inlet","America/Regina","America/Resolute","America/Swift_Current","America/Thunder_Bay","America/Toronto","America/Vancouver","America/Whitehorse","America/Winnipeg","America/Yellowknife","CST6CDT","EST5EDT","Etc/GMT","Etc/GMT+1","Etc/GMT+10","Etc/GMT+11","Etc/GMT+12","Etc/GMT+2","Etc/GMT+3","Etc/GMT+4","Etc/GMT+5","Etc/GMT+6","Etc/GMT+7","Etc/GMT-1","Etc/GMT-10","Etc/GMT-11","Etc/GMT-12","Etc/GMT-13","Etc/GMT-14","Etc/GMT-2","Etc/GMT-3","Etc/GMT-4","Etc/GMT-5","Etc/GMT-6","Etc/GMT-7","Etc/GMT-8","Etc/GMT-9","Etc/UTC","MST7MDT","PST8PDT"]},{continent:"Europe",timezones:["America/Danmarkshavn","America/Godthab","America/Kralendijk","America/Scoresbysund","America/Thule","Atlantic/Azores","Atlantic/Canary","Atlantic/Faeroe","Atlantic/Madeira","Atlantic/Reykjavik","Europe/Amsterdam","Europe/Andorra","Europe/Astrakhan","Europe/Athens","Europe/Belgrade","Europe/Berlin","Europe/Bratislava","Europe/Brussels","Europe/Bucharest","Europe/Budapest","Europe/Busingen","Europe/Chisinau","Europe/Copenhagen","Europe/Dublin","Europe/Gibraltar","Europe/Guernsey","Europe/Helsinki","Europe/Isle_of_Man","Europe/Istanbul","Europe/Jersey","Europe/Kaliningrad","Europe/Kiev","Europe/Kirov","Europe/Lisbon","Europe/Ljubljana","Europe/London","Europe/Luxembourg","Europe/Madrid","Europe/Malta","Europe/Mariehamn","Europe/Minsk","Europe/Monaco","Europe/Moscow","Europe/Oslo","Europe/Paris","Europe/Podgorica","Europe/Prague","Europe/Riga","Europe/Rome","Europe/Samara","Europe/San_Marino","Europe/Sarajevo","Europe/Saratov","Europe/Simferopol","Europe/Skopje","Europe/Sofia","Europe/Stockholm","Europe/Tallinn","Europe/Tirane","Europe/Ulyanovsk","Europe/Uzhgorod","Europe/Vaduz","Europe/Vatican","Europe/Vienna","Europe/Vilnius","Europe/Volgograd","Europe/Warsaw","Europe/Zagreb","Europe/Zaporozhye","Europe/Zurich"]},{continent:"Mexico",timezones:["America/Cancun","America/Chihuahua","America/Hermosillo","America/Matamoros","America/Mazatlan","America/Merida","America/Mexico_City","America/Monterrey","America/Ojinaga","America/Tijuana"]},{continent:"Antarctica",timezones:["Antarctica/Casey","Antarctica/Davis","Antarctica/DumontDUrville","Antarctica/Macquarie","Antarctica/Mawson","Antarctica/McMurdo","Antarctica/Palmer","Antarctica/Rothera","Antarctica/South_Pole","Antarctica/Syowa","Antarctica/Vostok","Arctic/Longyearbyen"]},{continent:"Asia-Pacific",timezones:["Pacific/Wallis","Pacific/Tahiti","Pacific/Ponape","Pacific/Palau","Pacific/Norfolk"]},{continent:"UTC",timezones:["UTC"]}],r=function(n){var t=i.filter(function(t){return t.timezones.indexOf(n)>=0});return t.length>0?t[0].continent:"Unknown"};t.getContinentNameByTimeZone=r})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/whatfixWidget/whatfixContinent"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/whatfixWidget/whatfixContinent"));
(function(n,require,t){"use strict";var u=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i.apply(this,arguments)},r,e,o;Object.defineProperty(t,"__esModule",{value:!0});t.formatVersion=t.createWhatfixWidget=t.createWhatfixUrl=t.WhatFixWidget=t.WHAT_FIX_CUSTOM_CODE_TEST=t.WHAT_FIX_CUSTOM_CODE_TURN_OFF=void 0;var s=require("../../../../utils"),h=require("../../../../utils/loadFiles"),c=require("../../../../utils/sha2Digest"),l=require("../../../deferred"),f=require("../../../eventHandler"),a=require("./whatfixContinent");t.WHAT_FIX_CUSTOM_CODE_TURN_OFF="MYGWHATFIXDISABLE";t.WHAT_FIX_CUSTOM_CODE_TEST="MYGWHATFIXTEST";r=function(n){function t(t,r,u,f,e,o,s,l,v){var y=n.call(this)||this;return y.whatFixAPI=e,y.whatFixAPI.update(i(i({},u),{region:a.getContinentNameByTimeZone(f.timezone)})),y.resolveApi=c.createSha2Digest(r+"_"+u.databaseName+"_"+f.organizationGuid).then(function(n){y.updateOptions({userName:n})}).then(function(){return h.loadScript(t.src,l,undefined,undefined,t.integrity)}).then(function(){return y.whatFixAPI}),v._wfx_settings={analytics_properties:{anonymizeIp:!0},tracker:{trackLiveStart:function(){y.fire("start")},trackLiveClose:function(){y.fire("stop")}}},y}return u(t,n),t.prototype.updateOptions=function(n){this.whatFixAPI.update(n)},Object.defineProperty(t.prototype,"api",{get:function(){return this.resolveApi},enumerable:!1,configurable:!0}),t}(f.SimpleEventHandler);t.WhatFixWidget=r;var v=function(){function n(n){this.globalObject=n;this.globalObject.whatfix={}}return n.prototype.update=function(n){this.globalObject.whatfix=i(i({},this.globalObject.whatfix),n)},Object.defineProperty(n.prototype,"options",{get:function(){return this.globalObject.whatfix},enumerable:!1,configurable:!0}),n}(),y=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return u(t,n),Object.defineProperty(t.prototype,"api",{get:function(){return l.reject(new Error("Not available"))},enumerable:!1,configurable:!0}),t}(f.SimpleEventHandler),p=function(n,t,i,r){return r&&t&&!i&&n!==undefined},w=function(n,i){var r=(n||"").toUpperCase();return r.indexOf(t.WHAT_FIX_CUSTOM_CODE_TURN_OFF)>=0?undefined:r.indexOf(t.WHAT_FIX_CUSTOM_CODE_TEST)>=0?{src:"https://whatfix.com/a4017680-7e9c-11ec-b40f-000d3a578b00/embed/embed.nocache.js",integrity:""}:s.isTestDomain(i)?undefined:{src:"https://cdn.whatfix.com/prod/a4017680-7e9c-11ec-b40f-000d3a578b00/1657311619164/embed/embed.nocache.js",integrity:"sha384-cBZdAxJRkJLoAZUZAxuXh0T2roZMjk1MPgH3chi94YWUNNrjv0U4HMF+GobzoOUD"}};t.createWhatfixUrl=w;e=function(n,i,u,f,e,o,s,h,c,l,a,w){var b=t.createWhatfixUrl(n,w);return p(b,i,u,f)&&b?new r(b,e,o,s,new v(l),h,c,a,l):new y};t.createWhatfixWidget=e;o=function(n){return n.split(".").slice(0,3).join(".")};t.formatVersion=o})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/whatfixWidget/whatfixWidget"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/whatfixWidget/whatfixWidget"));
(function(n,require,t){"use strict";function i(n){var i=["C1","C2","C3","C4","C5","C6","C7","C8","C9","CA","CB","CC","CD","CE","CF","CG","CH","CI","CJ","CK","CL","CM","CN","CO","CP","CQ","CR","CS","CT","CU","CV","CW","CX","CY","CZ","D1","D2","D3","D4","D5","D6","D7","D8","D9","DA","DB","DC","DD","DE","DF","DG","DH","DI","DJ","DK","DL","DM","DN","DO","DP","DQ","DR","DS","DT","DU","DV","DW","DX","DY","DZ","E1","E2","E3","E4","E5","E6","E7","E8","E9","EA","EB","EC","ED","EE","EF","EG","EH","EI","EJ","EK","EL","EM","EN","EO","EP","EQ","ER","ES","ET","EU","EV","EW","EX","EY","EZ","F1","F2","F3","F4","F5","F6","F7","F8","F9","FA","FB","FC","FD","FE","FF","FG","FH","FI","FJ","FK","FL","FM","FN","FO","FP","FQ","FR","FS","FT","FU","FV","FW","FX","FY","FZ","H1","H2","H3","H4","H5","H6","H7","H8","H9","HA","HB","HC","HD","HE","HF","HG","HH","HI","HJ","HK","HL","HM","HN","HO","HP","HQ","HR","HS","HT","HU","HV","HW","HX","HY","HZ","I1","I2","I3","I4","I5","I6","I7","I8","I9","IA","IB","IC","ID","IE","IF","IG","IH","II","IJ","IK","IL","IM","IN","IO","IP","IQ","IR","IS","IT","IU","IV","IW","IX","IY","IZ","J1","J2","J3","J4","J5","J6","J7","J8","J9","JA","JB","JC","JD","JE","JF","JG","JH","JI","JJ","JK","JL","JM","JN","JO","JP","JQ","JR","JS","JT","JU","JV","JW","JX","JY","JZ","K1","K2","K3","K4","K5","K6","K7","K8","K9","KA","KB","KC","KD","KE","KF","KG","KH","KI","KJ","KK","KL","KM","KN","KO","KP","KQ","KR","KS","KT","KU","KV","KW","KX","KY","KZ","L1","L2","L3","L4","L5","L6","L7","L8","L9","LA","LB","LC","LD","LE","LF","LG","LH","LI","LJ","LK","LL","LM","LN","LO","LP","LQ","LR","LS","LT","LU","LV","LW","LX","LY","LZ","M1","M2","M3","M4","M5","M6","M7","M8","M9","MA","MB","MC","MD","ME","MF","MG","MH","MI","MJ","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","N1","N2","N3","N4","N5","N6","N7","N8","N9","NA","NB","NC","ND","NE","NF","NG","NH","NI","NJ","NK","NL","NM","NN","NO","NP","NQ","NR","NS","NT","NU","NV","NW","NX","NY","NZ"],r=["G3","G4","GV","G5","G6","G7","G8","GD","G9","GA","A1","U1"],u=["GT","G2","GP","SA","SB","SC"],f=function(n){return u.indexOf(n)>-1},e=function(n){return r.indexOf(n)>-1},o=function(n){var t=i.indexOf(n);return t>-1?1e4+t:0},t=function(n){var t={thirdPartyProductId:0,go2Family:!1,go3Family:!1};return e(n)?t.go3Family=!0:f(n)?t.go2Family=!0:t.thirdPartyProductId=o(n),t},s=n("InvalidValue");return{isValid:function(i){if(i.length!==12)return n("DeviceSerialNoLengthException");var u=i.substr(0,2),r=t(u);return(r.go3Family||r.go2Family||r.thirdPartyProductId)?undefined:s+": "+u},isCustomDevice:function(n){return t((n||"").substr(0,2)).thirdPartyProductId!==0}}}Object.defineProperty(t,"__esModule",{value:!0});t.default=i})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/serialNoConverter"),geotab.commonjs.generateExport("geotab/checkmate/ui/serialNoConverter"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.renderCheckbox=void 0;var i=require("../../../../utils"),r=function(n){var t=n.id||i.generateId(),r=n.labelText;return n.isRequired&&(r+='<span class="error noTranslate"> *<\/span>'),('\n    <div title="'+(n.title||"")+'" class="geo-checkbox '+(n.customClass||"")+'" '+(n.componentCustomAttributes||"")+'>\n        <input\n            class="geo-checkbox__input"\n            type="'+(n.type||"checkbox")+'"\n            id="'+t+'"\n            '+(n.checkboxCustomAttributes||"")+'\n            name="'+(n.inputName||"")+'">\n        <label class="geo-checkbox__label'+(n.isReversed?" reverse":"")+'" for="'+t+'">\n            <div class="geo-checkbox__box'+(n.isRound?" circle":"")+'">\n                <svg class="geo-checkbox__icon" focusable="false" aria-hidden="true"><use xlink:href="#geo-check"><\/use><\/svg>\n            <\/div>\n            <div class="geo-checkbox__label-text">'+(r||"")+"<\/div>\n        <\/label>\n    <\/div>\n    ").trim()};t.renderCheckbox=r})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/checkbox/checkbox"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/checkbox/checkbox"));
(function(n,require,t){"use strict";function r(n,t){var i,r,u,f,e=(r=(i=t.devicePlanBillingInfo)===null||i===void 0?void 0:i.devicePlanName)!==null&&r!==void 0?r:"";return((u=t.options)===null||u===void 0?void 0:u.enableGps)===!1?n("DeviceSharePlanExcludingLocationAndSpeed").replace("{plan}",e):((f=t.options)===null||f===void 0?void 0:f.enableLocation)===!1?n("DeviceSharePlanExcludingLocation").replace("{plan}",e):e}function f(n,u){var e=i.htmlEscape(u.sourceDatabaseName)+"-"+i.htmlEscape(u.serialNumber),f=u.name?i.htmlEscape(u.name):"";return'\n        <div class="device-sharing-dialog">\n            <div class="device-sharing-dialog__block">\n                '+n("IncomingData").replace("{0}",i.htmlEscape(u.sourceDatabaseName))+"\n                "+(n("EnterDescription")+":")+'\n            <\/div>\n            <div class="device-sharing-dialog__block">\n                <div class="device-sharing-dialog__data-info">\n                    <span class="device-sharing-dialog--gray-text device-sharing-dialog__plans">'+(n("SerialNumber")+":")+"<\/span>\n                    <span>"+i.htmlEscape(u.serialNumber)+'<\/span>\n                <\/div>\n                <div class="device-sharing-dialog__data-info">\n                    <span class="device-sharing-dialog--gray-text device-sharing-dialog__plans">'+(n("DatabaseName")+":")+"<\/span>\n                    <span>"+i.htmlEscape(u.sourceDatabaseName)+'<\/span>\n                <\/div>\n                <div class="device-sharing-dialog__data-info">\n                    <span class="device-sharing-dialog--gray-text device-sharing-dialog__plans">'+(n("SubscriptionPlan")+":")+"<\/span>\n                    <span>"+i.htmlEscape(r(n,u))+'<\/span>\n                <\/div>\n                <div class="device-sharing-dialog__data-info">\n                    <span class="device-sharing-dialog--gray-text device-sharing-dialog__plans">'+(n("DescriptionName")+":")+'<\/span>\n                    <input placeholder="'+e+'"\n                        '+(f?"disabled":!1)+"\n                        "+(f?t.dataInputDisabledAttr+'="true"':"")+'\n                        class="geo-text-input shareDialogDeviceName" data-id="'+u.id+'"\n                        value="'+(f||e)+'">\n                <\/div>\n            <\/div>\n            <div class="device-sharing-dialog__block">\n                <span>'+n("RequsetAttention")+"<\/span>\n            <\/div>\n        <\/div>\n    "}function e(n,f){return'\n        <div class="device-sharing-dialog">\n            <div class="device-sharing-dialog__block">\n                '+n("EnterDescription")+'\n            <\/div>\n            <div class="device-sharing-dialog__data-info">\n                <span class="device-sharing-dialog--gray-text device-sharing-dialog__plans">'+(n("DatabaseName")+":")+'<\/span>\n                <span class="dialogSourceDatabaseName">'+i.htmlEscape(f[0].sourceDatabaseName)+'<\/span>\n            <\/div>\n            <div class="device-sharing-dialog__scrollable-content">\n                '+f.map(function(f){var o=i.htmlEscape(f.sourceDatabaseName)+"-"+i.htmlEscape(f.serialNumber),e=f.name?i.htmlEscape(f.name):"",s=u.renderCheckbox({customClass:"device-sharing-dialog__select-item",checkboxCustomAttributes:'data-id="'+f.id+'"'});return('\n                <div class="device-sharing-dialog__multiple-select">\n                    '+s+'\n                    <div class="device-sharing-dialog__select-item">\n                        <div class="">\n                            <span class="device-sharing-dialog--gray-text device-sharing-dialog__plans">'+(n("SerialNumber")+":")+'<\/span>\n                            <span class="multiple-database-name">'+i.htmlEscape(f.serialNumber)+'<\/span>\n                        <\/div>\n                        <div class="">\n                            <span class="device-sharing-dialog--gray-text device-sharing-dialog__plans">'+(n("SubscriptionPlan")+":")+'<\/span>\n                            <span class="multiple-device-plan">'+i.htmlEscape(r(n,f))+'<\/span>\n                        <\/div>\n                        <div class="">\n                            <span class="device-sharing-dialog--gray-text device-sharing-dialog__plans">'+(n("DescriptionName")+":")+'<\/span>\n                            <input placeholder="'+o+'"\n                                '+(e?"disabled":!1)+"\n                                "+(e?t.dataInputDisabledAttr+'="true"':"")+'\n                                value="'+(e||o)+'"\n                                class="geo-text-input multiple-device-name sharedDeviceNameInput">\n                        <\/div>\n                    <\/div>\n                <\/div>\n            ').trim()}).join("")+'\n            <\/div>\n            <div class="device-sharing-dialog__block">\n                <span>'+n("RequsetAttention")+"<\/span>\n            <\/div>\n        <\/div>\n    "}Object.defineProperty(t,"__esModule",{value:!0});t.multipleStreamAdding=t.singleStreamAdding=t.getSubscriptionPlanString=t.dataInputDisabledAttr=void 0;var i=require("../../../../utils"),u=require("../../modules/checkbox/checkbox");t.dataInputDisabledAttr="data-input-disabled";t.getSubscriptionPlanString=r;t.singleStreamAdding=f;t.multipleStreamAdding=e})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/deviceSharing/dataStreamAdding_html"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/deviceSharing/dataStreamAdding_html"));
(function(n,require,t){"use strict";var u=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});t.getAcceptSharingDialog=void 0;var i=require("./dataStreamAdding_html"),f=require("../../../eventHandler"),r=require("../../../../vanillaExtension/vanillaDialog"),e=function(n){function t(t){var i=n.call(this)||this;return i.translate=t,i}return u(t,n),t.prototype.getSelectedItems=function(n){var r=n.querySelectorAll(".device-sharing-dialog__select-item .geo-checkbox__input"),t=[];return r.forEach(function(n){var u,e=n.getAttribute("data-id");if(n.checked&&e){var f=(u=n.parentNode)===null||u===void 0?void 0:u.parentNode,s=f.querySelector(".multiple-database-name"),h=f.querySelector(".multiple-device-plan"),r=f.querySelector(".multiple-device-name"),o=r.hasAttribute(i.dataInputDisabledAttr);r.value||o||r.focus();t.push({serialNumber:s.textContent||"",devicePlanName:h.textContent||"",deviceName:r.value,deviceShareId:e,isExistingDevice:o})}}),t},t.prototype.showSingleStreamPopup=function(n,t){var e=this,u=n[0],f=r.VanillaDialog(i.singleStreamAdding(this.translate,u),{isModal:!0,addCloseButton:!0,title:this.translate("NewDataStreamTitle"),buttons:[{name:this.translate("ReviewLater"),click:function(){f.destroy();e.fire("showDialog",[n,t])}},{name:this.translate("Reject"),click:function(){e.fire("reject",[[u.id],t]);f.destroy()}},{name:this.translate("Accept"),click:function(){var r,n=f.element.querySelector(".shareDialogDeviceName"),o=n.getAttribute("data-id"),s,h;if(!n.value||!o){n.focus();return}s=n.hasAttribute(i.dataInputDisabledAttr);h={deviceName:n.value,serialNumber:u.serialNumber,devicePlanName:((r=u===null||u===void 0?void 0:u.devicePlanBillingInfo)===null||r===void 0?void 0:r.devicePlanName)||"",deviceShareId:o,isExistingDevice:s};e.fire("save",[[h],t]);f.destroy()}}]},this.translate);f.show()},t.prototype.showMultipleStreamPopup=function(n,t){var f=this,u=r.VanillaDialog(i.multipleStreamAdding(this.translate,n),{isModal:!0,addCloseButton:!0,title:this.translate("NewDataStreamTitle"),buttons:[{name:this.translate("ReviewLater"),click:function(){u.destroy();f.fire("showDialog",[n,t])}},{name:this.translate("Reject"),click:function(){var n=f.getSelectedItems(u.element);n.length!==0&&(f.fire("reject",[n.map(function(n){return n.deviceShareId}),t]),u.destroy())}},{name:this.translate("Accept"),click:function(){var n=f.getSelectedItems(u.element);n.length===0||n.some(function(n){return!n.deviceName})||(f.fire("save",[n,t]),u.destroy())}}]},this.translate);u.show()},t.prototype.render=function(n,t){if(n.length!==0){if(n.length>1){this.showMultipleStreamPopup(n,t);return}this.showSingleStreamPopup(n,t)}},t}(f.SimpleEventHandler),o=function(){function n(){}return n.prototype.render=function(){},n.prototype.attach=function(){},n}(),s=function(n,t){return t?new e(n):new o};t.getAcceptSharingDialog=s})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/deviceSharing/dataStreamAdding"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/deviceSharing/dataStreamAdding"));
(function(n,require,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},r.apply(this,arguments)},f,e,o,s;Object.defineProperty(t,"__esModule",{value:!0});t.updateDeviceShareStatus=t.requestIncomingDeviceShare=t.requestActiveShareForDeviceFN=t.requestDevicesSharing=t.addDeviceSharing=void 0;var u=require("../../../../utils"),i=require("../../../deferred"),h=function(n,t,i,r,u){return u.addItem({sourceDatabaseName:n,serialNumber:t,targetDatabaseName:i,devicePlanBillingInfo:r})};t.addDeviceSharing=h;f=function(n,t,r){return i.together([r.getItemsByValue({sourceDatabaseName:t,findFromSerialNumbers:n})]).then(function(n){return u.flattenArrays(n.filter(u.echo))}).catch(function(){return undefined})};t.requestDevicesSharing=f;e=function(n,t,r){return!r||!n.trim()?function(){return i.resolve([])}:function(r){return r.trim()?t.getItemsByValue({targetDatabaseName:n,shareType:"Incoming",shareStatus:"Active",serialNumber:r}).then(function(n){return Array.isArray(n)?n.filter(function(n){return n&&n.shareType==="Incoming"}):[]}).catch(function(){return[]}):i.resolve([])}};t.requestActiveShareForDeviceFN=e;o=function(n,t,r,u){return(u===void 0&&(u="Pending"),!r||!n.trim())?i.resolve([]):t.getItemsByValue({targetDatabaseName:n,shareType:"Incoming",shareStatus:u}).then(function(n){return Array.isArray(n)?n.filter(function(n){return n&&n.shareType==="Incoming"}):[]}).catch(function(){return[]})};t.requestIncomingDeviceShare=o;s=function(n,t,u){return u.getItemById(n).then(function(n){return!n||n.shareStatus===t?i.resolved():u.setItem(r(r({},n),{shareStatus:t}))})};t.updateDeviceShareStatus=s})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/deviceSharing/deviceSharingActions"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/deviceSharing/deviceSharingActions"));
(function(n,require,t){"use strict";var i,r,u,f,e,o;Object.defineProperty(t,"__esModule",{value:!0});t.getSuccessRejectShareMessage=t.splitDeviceSharesByDb=t.canBeCanceled=t.parseDeviceShareErrors=t.getSuccessDeviceShareMessage=void 0;i=function(n,t,i,r){return n<1?"":t?r("You have successfully sent a request to share this device’s data stream with {0}.").replace("{0}",i):r("You have successfully requested sharing data streams from {0} devices with another database. That database will have access to the data streams once the owner accepts them.").replace("{0}",n.toString())};t.getSuccessDeviceShareMessage=i;r=function(n){return n.reduce(function(n,t){var r=t.serialNumber,i=t.knownError;return n.failedSerialNumbers.push(r),i&&n.errors.indexOf(i)===-1&&n.errors.push(i),n},{errors:[],failedSerialNumbers:[]})};t.parseDeviceShareErrors=r;u=["Pending"];f=function(n){return u.indexOf(n)!==-1};t.canBeCanceled=f;e=function(n){return n.reduce(function(n,t){var i=t.sourceDatabaseName||"";return n[i]?(n[i].push(t),n):(n[i]=[t],n)},{})};t.splitDeviceSharesByDb=e;o=function(n,t,i,r){return n<1?"":t?r("AutoRejectExistingSingleDeviceShare").replace("{0}",i):r("AutoRejectExistingMultipleDeviceShare").replace("{0}",i)};t.getSuccessRejectShareMessage=o})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/deviceSharing/deviceSharingUtils"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/deviceSharing/deviceSharingUtils"));
(function(n,require,t){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});t.splitSharesByExistingDevices=void 0;var r=require("../../../deferred"),u=function(n,t,r){var u=t.filter(function(n){return n.canBeRejected}).map(function(n){return n.shareId}),f=t.reduce(function(n,t){return n[t.shareId]=t,n},{});return n.filter(function(n){return u.indexOf(n.id)===-1?!r:r}).map(function(n){var t=f[n.id];return t?i(i({},n),{name:t.deviceName}):n})},f=function(n,t,i,r){return r(n).then(function(n){return{deviceName:t!==null&&t!==void 0?t:"",shareId:i,canBeRejected:n.length>0}})},e=function(n,t,i,e){return r.together(n.map(function(n){return t(n.serialNumber).then(function(t){return!Array.isArray(t)||t.length===0?undefined:f(n.serialNumber,t[0].name,n.id,i)})})).then(function(t){var i=t.filter(function(n){return!!n});return{sharesToProcess:u(n,i,!1),sharesToReject:u(n,i,!0)}}).catch(r.catchError(e,{sharesToReject:[],sharesToProcess:[]}))};t.splitSharesByExistingDevices=e})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/deviceSharing/splitSharesByExistingDevices"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/deviceSharing/splitSharesByExistingDevices"));
(function(n,require,t){"use strict";var u;Object.defineProperty(t,"__esModule",{value:!0});t.getDeviceShareErrorHandler=t.getDeviceShareErrors=t.getKnownDeviceShareError=void 0;var i=[{phrase:"DatabseDoesNotExistShareError",multiplePhrase:"DatabseDoesNotExistShareError",error:"Unable to find multistream request for device and target database",type:"databseDoesNotExist"},{phrase:"DatabseDoesNotExistShareError",multiplePhrase:"DatabseDoesNotExistShareError",error:"Cannot add multistream request for target database without owner",type:"databseDoesNotExist"},{phrase:"AlreadySharesSingleDeviceError",multiplePhrase:"AlreadySharesMultipleDeviceError",error:"A device share cannot be created if an equivalent one exists",type:"alreadyShared"},{phrase:"CannotBeSharedSingleError",multiplePhrase:"CannotBeSharedMultipleError",error:"Only GO and OEM devices can be shared.",type:"cannotBeShared"},{phrase:"SingleDuplicateDeviceShareError",multiplePhrase:"MultipleDuplicateDeviceShareError",error:"Duplicate Data",type:"duplicateException"},{phrase:"NoSerialNumberOnSingleShareError",multiplePhrase:"NoSerialNumberOnMultipleShareError",error:"The serial number provided doesn't match to any device",type:"noSerialNum"},{phrase:"DeviceShareWithCurrDbError",multiplePhrase:"DeviceShareWithCurrDbError",error:"You cannot share devices with the same database where they were created.",type:"currDatabase"},{phrase:"CancelPendingOutgoingShareError",multiplePhrase:"CancelPendingOutgoingShareError",error:"You can only cancel pending outgoing device shares.",type:"onlyPendingOutgoing"},{phrase:"TerminateDeviceShareError",multiplePhrase:"TerminateDeviceShareError",error:"You can only terminate active incoming device shares.",type:"onlyActiveIncoming"},{phrase:"UpdateDeviceSharePlanError",multiplePhrase:"UpdateDeviceSharePlanError",error:"You can only update device plans for pending outgoing device shares.",type:"updateDevicePlan"},{phrase:"AcceptOrDeclineIncomingShareOnlyError",multiplePhrase:"AcceptOrDeclineIncomingShareOnlyError",error:"Only pending, incoming extended services can be accepted or declined.",type:"acceptOrDeclineIncomingOnly"}],f=i.reduce(function(n,t){return n[t.type]=t,n},{}),e=function(n){var t;if(!n||!n.message||typeof n.message!="string")return undefined;for(t=0;t<i.length;t++){var r=i[t],u=r.error,f=r.type;if(n.message.indexOf(u)!==-1)return f}return undefined};t.getKnownDeviceShareError=e;var r=function(n,t,i,r,u){i===void 0&&(i=!0);r===void 0&&(r="");u===void 0&&(u="");var e=f[n];return e?o(t(i?e.phrase:e.multiplePhrase),r,u):""},o=function(n,t,i){return n.replace("{0}",t).replace("{1}",i)},s=function(n,t,i,u){if(t.length===0)return[];var f=n===1,e=n.toString();return t.map(function(n){return r(n,u,f,i,e)})};t.getDeviceShareErrors=s;u=function(n,i,u){return function(f,e,o,s){if(o===void 0&&(o=""),s===void 0&&(s=""),!f||!f.isAborted){var h=t.getKnownDeviceShareError(f);if(h){u(r(h,n,e,o,s));return}i(f)}}};t.getDeviceShareErrorHandler=u})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/deviceSharing/deviceSharingErrors"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/deviceSharing/deviceSharingErrors"));
(function(n,require,t){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});t.GoogleTagManager=void 0;var u="GTM-N62MN35",r="gtmDataLayer",f=function(){function n(){this.injected=!1}return n.prototype.injectGtmScript=function(n,t,i,r,u){n[r]=n[r]||[];n[r].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var f=t.getElementsByTagName(i)[0],e=t.createElement(i),o=r!=="dataLayer"?"&l="+r:"";if(e.async=!0,e.src="https://www.googletagmanager.com/gtm.js?id="+u+o,f&&f.parentNode){f.parentNode.insertBefore(e,f);return}t.head.appendChild(e)},n.prototype.inject=function(n,t){this.injected||(this.injectGtmScript(n,t,"script",r,u),this.injected=!0)},n.prototype.setDimensions=function(n,t){n[r].push(i({event:"setUserParameters"},t))},n}();t.GoogleTagManager=f})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/auditTools/googleTagManager"),geotab.commonjs.generateExport("geotab/checkmate/ui/auditTools/googleTagManager"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.AuthenticationType=void 0;var i;(function(n){n.MY_ADMIN="MyAdmin";n.SAML="SAML";n.BASIC="BasicAuthentication"})(i=t.AuthenticationType||(t.AuthenticationType={}))})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/constants/userAuthenticationType"),geotab.commonjs.generateExport("geotab/checkmate/constants/userAuthenticationType"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.createCommunityLink=void 0;var r=require("../../../constants/userAuthenticationType"),i="https://community.geotab.com",u="GiveMeCommunitySessionId",f=function(n,t){var r=i;return function f(i){i.origin===r&&i.data===u&&(n.postMessage(JSON.stringify({sessionId:t.sessionId,userName:t.userName,database:t.database,path:location.host}),r),window.removeEventListener("message",f,!1))}},e=1e4,o=function(n,t,u,o,s){if(!s&&o!==r.AuthenticationType.MY_ADMIN){var h=n.querySelector("[data-href='helpForum']");h&&h.addEventListener("click",function(n){var r,o;(n.preventDefault(),r=window.open(i+"/CommunitiesLogin?startURL=/s/&utm_source=myg&language="+u,"_blank"),r)&&(o=f(r,t),window.addEventListener("message",o,!1),setTimeout(function(){window.removeEventListener("message",o,!1)},e))},!1)}};t.createCommunityLink=o})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/communityLink/communityLink"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/communityLink/communityLink"));
(function(n,require,t){"use strict";function ot(n,t,i,r){var u=(i||"").split(" "),e=r.all&&r.all.onFire,h=r.all&&r.all.modifyEvent,c=function(n){var c=r[n.type],l=c&&c.modifyEvent,a=s([f.isEnabled,e],!0,[n]),u,i;if(a){if(u=t(n),!u)return;i=o(n.type,n,u);i=i&&s([h,l],i,[i]);i&&(i.isFake=!0,f.set(n),u.dispatchEvent(i),f.release())}};et(n,u,c)}function st(n,t,i){return n.dispatchEvent(o(t,i,n))}function h(n){var t=n.changedTouches[0];return{type:n.type,touches:n.touches,target:t.target,pageX:t.pageX,pageY:t.pageY,toElement:null,relatedTarget:null,clientX:t.clientX,clientY:t.clientY,screenX:t.screenX,screenY:t.screenY,which:1,preventDefault:function(){n.preventDefault()},stopPropagation:function(){n.stopPropagation()},stopImmediatePropagation:function(){n.stopImmediatePropagation()}}}function ht(n){var t=n,i=n.changedTouches?n.changedTouches[0]:null;return i?h(n):t}function ct(n,t){if(c())return new CustomEvent(n,t);var i=document.createEvent("CustomEvent");return i.initCustomEvent(n,!1,!1,t||{}),i}var c;Object.defineProperty(t,"__esModule",{value:!0});t.createCustomEvent=t.touchToMouseEvent=t.touchToMouse=t.fireEvent=t.redirectEvents=void 0;var l=require("../checkmate/browser"),u=require("../utils"),a=["touchstart","touchend","touchmove","touchcancel"],v=["pointerdown","pointerup","pointermove","pointerover","pointerout","pointerenter","pointerleave","pointercancel"],y=function(n){return v.indexOf(n)!==-1},e=function(n){return a.indexOf(n)!==-1},p=function(n,t){return new window.Touch({target:t,clientX:n.clientX,clientY:n.clientY,identifier:n.identifier,pageX:n.pageX,pageY:n.pageY,screenX:n.screenX,screenY:n.screenY,force:n.force||1,radiusX:n.radiusX||1,radiusY:n.radiusY||1})},w=u.memOnce(function(){if(typeof MouseEvent!="function")return!1;try{return new window.MouseEvent("click",{}),!0}catch(n){return!1}}),b=function(n,t,i){var r=document.createEvent("MouseEvents");return r.initMouseEvent(n,!0,!0,window,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,Math.max(0,t.which-1),i),r},k=function(n,t,i){return new MouseEvent(n,{screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,button:Math.max(0,t.which-1),relatedTarget:i,detail:t.detail||t.deltaY||t.wheelDelta,view:window,bubbles:!0,cancelable:!0})},d=function(n,t,i){var u=w()?k(n,t,i):b(n,t,i);return u.pageX!==t.pageX&&(Object.defineProperty(u,"pageX",{get:r(t.clientX)}),Object.defineProperty(u,"pageY",{get:r(t.clientY)})),u.wheelDelta=t.wheelDelta,u.deltaY=t.deltaY,u.deltaMode=t.deltaMode,u},g=u.memOnce(function(){if(typeof PointerEvent!="function")return!1;try{return new PointerEvent("pointerdown",{}),!0}catch(n){return!1}}),nt=function(n,t,i){var u=document.createEvent("PointerEvent");return u.initPointerEvent(n,!0,!0,window,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,i,t.offsetX,t.offsetY,t.width,t.height,t.pressure,t.rotation,t.tiltX,t.tiltY,t.pointerId,t.pointerType,(new Date).getTime(),t.isPrimary),Object.defineProperty(u,"buttons",{get:r(t.buttons)}),u},tt=function(n,t,i){if(!g())return nt(n,t,i);var u=new PointerEvent(n,{pointerId:t.pointerId,bubbles:!0,cancelable:!0,detail:t.detail,tiltX:t.tiltX,tiltY:t.tiltY,pressure:t.pressure,pointerType:t.pointerType,width:t.width,height:t.height,isPrimary:t.isPrimary,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY,button:t.button,buttons:t.buttons,relatedTarget:i,view:window});return u.pageX!==t.pageX&&(Object.defineProperty(u,"pageX",{get:r(t.pageX)}),Object.defineProperty(u,"pageY",{get:r(t.pageY)})),u},i=function(n,t){var r=[],i;if(n)for(i=0;i<n.length;i++)r.push(p(n[i],t));return r},it=function(n,t,u){if(!ut())return ft(n,t,u);try{return new TouchEvent(n,{bubbles:!0,cancelable:!0,view:window,detail:1,altKey:!1,metaKey:!1,shiftKey:!1,touches:i(t.touches,u),targetTouches:i(t.targetTouches,u),changedTouches:i(t.changedTouches,u)})}catch(e){var f=new UIEvent(n,{bubbles:!0,cancelable:!0,view:window,detail:1});return Object.defineProperty(f,"touches",{get:r(i(t.touches,u))}),Object.defineProperty(f,"targetTouches",{get:r(i(t.targetTouches,u))}),Object.defineProperty(f,"changedTouches",{get:r(i(t.changedTouches,u))}),f}},rt=u.memOnce(function(){var t="touchstart",n;try{return n=document.createEvent("TouchEvent"),n.initTouchEvent(t,!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),n.type!==t}catch(i){return!1}}),ut=u.memOnce(function(){if(typeof TouchEvent!="function")return!1;try{return new TouchEvent("touchstart",{}),!0}catch(n){return!1}}),ft=function(n,t,r){var f=document.createEvent("TouchEvent"),u=t.targetTouches.length?t.targetTouches[0]:t.changedTouches.length?t.changedTouches[0]:t;return rt()?f.initTouchEvent(i(t.touches,r),i(t.targetTouches,r),i(t.changedTouches,r),n,window,u.screenX,u.screenY,u.clientX,u.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey):f.initTouchEvent.length===12||f.initTouchEvent.length===1?f.initTouchEvent(n,!0,!0,window,1,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,i(t.touches,r),i(t.targetTouches,r),i(t.changedTouches,r)):f.initTouchEvent(n,!0,!0,window,1,u.screenX,u.screenY,u.clientX,u.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,i(t.touches,r),i(t.targetTouches,r),i(t.changedTouches,r),1,0),f},o=function(n,t,i){switch(!0){case e(n):return it(n,t,i);case y(n):return tt(n,t,i);default:return d(n,t,i)}},r=function(n){return function(){return n}},s=function(n,t,i){return n.reduce(function(n,t){return n&&t?t.apply(this,i):n},t)},et=function(n,t,i){t.forEach(function(t){(!e(t)||l.isBrowserSupportTouchEvents())&&n.addEventListener(t,i,!1)})},f=function(){var n="",t=function(t){return!n||t.type===n},i=function(t){n=t.type},r=function(){n=""};return{set:i,release:r,isEnabled:t}}();t.redirectEvents=ot;t.fireEvent=st;t.touchToMouse=h;t.touchToMouseEvent=ht;c=u.memOnce(function(){return typeof CustomEvent=="function"});t.createCustomEvent=ct})(geotab,geotab.commonjs.generateRequire("geotab/vanillaExtension/browserEventsManager"),geotab.commonjs.generateExport("geotab/vanillaExtension/browserEventsManager"));
(function(n,require,t){"use strict";function e(){var s,h,c=!1,e=[],a=function(n){for(var i=typeof n=="object"?"elem":"id",t=0;t<e.length;t++)if(e[t][i]===n)return t;return-1},t,o=u.isBrowserSupportTouchEvents(),v=function(r){var f=i.touchToMouseEvent(r),u=document.body;t||(r.stopPropagation(),u.addEventListener("selectstart",n,!1),u.addEventListener("mouseup",n,!1),window.addEventListener("mousemove",n,!1),o&&(u.addEventListener("touchmove",n,!1),u.addEventListener("touchend",n,!1)),t=e[a(this)],s=f.pageX,h=f.pageY)},y=function(n){var r=i.touchToMouseEvent(n),u=r.pageX-s,f=r.pageY-h;n.preventDefault();n.stopPropagation();t&&(c?t.move.call(t,t.id,u,f,r.pageX,r.pageY,n):(Math.abs(u)>5||Math.abs(f)>5)&&(c=!0,t.start.call(t.elem,t.id,s,h,n),t.move.call(t,t.id,u,f,r.pageX,r.pageY,n)))},l=function(i){var r=document.body;t&&(c=!1,t.end.call(t,i),r.removeEventListener("mouseup",n,!1),r.removeEventListener("mousemove",n,!1),r.removeEventListener("touchend",n,!1),r.removeEventListener("touchmove",n,!1),r.removeEventListener("selectstart",n,!1),t=null)},p={mousedown:v,mousemove:y,mouseup:l,touchstart:function(n){n.preventDefault();v.call(this,n)},touchmove:y,touchend:function(n){l.call(this,n);f.sendClick(n.target,n)},selectstart:function(n){n.preventDefault()}},n=function(n){p[n.type].call(this,n)};return{dragEnd:l,attachEvents:function(t,i,u,f,s){t===void 0&&(t=r.generateId());e.push({id:t,elem:i,start:u,move:f,end:s});i.addEventListener("mousedown",n,!1);o&&i.addEventListener("touchstart",n,!1)},detachEvents:function(t){var u=a(t),r=e[u],i=document.body;r&&(i.removeEventListener("selectstart",n,!1),r.elem.removeEventListener("mousedown",n,!1),i.removeEventListener("mouseup",n,!1),i.removeEventListener("mousemove",n,!1),o&&(r.elem.removeEventListener("touchstart",n,!1),i.removeEventListener("touchend",n,!1),i.removeEventListener("touchmove",n,!1)),e.splice(u,1))},disableDrag:function(n){n.addEventListener("mousedown",function(n){return n.stopPropagation()});n.addEventListener("mousemove",function(n){return n.stopPropagation()});o&&(n.addEventListener("touchstart",function(n){return n.stopPropagation()}),n.addEventListener("touchmove",function(n){return n.stopPropagation()}))}}}Object.defineProperty(t,"__esModule",{value:!0});var i=require("./browserEventsManager"),r=require("../utils"),u=require("../checkmate/browser"),f=require("./vanilla");t.default=e})(geotab,geotab.commonjs.generateRequire("geotab/vanillaExtension/vanillaDraggable"),geotab.commonjs.generateExport("geotab/vanillaExtension/vanillaDraggable"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.createInContactLink=void 0;var i=require("../../../../utils"),r=require("../../../../utils/groupUtils"),u="33551dc2-d8a5-4804-9258-8a1487371c10",f="98b3ee50-17e0-4b3c-b068-e485a21a37af",e="4596119",o="https://home-c19.incontact.com",s="IN_CONTACT_TEST",h=function(n){return n.toUpperCase().indexOf(s)>=0?f:u},c=function(n){var t=[[n.name],[n.firstName+" "+n.lastName],[n.phoneNumber,n.phoneNumberExtension],[n.language],[n.database],[n.companyName],[n.companyAddress],[n.erp],[n.whitelabel,i.hasCompanyGroup(n.companyGroups)?"CompanyGroup":"Custom",r.isSystemSecurityGroup(n.securityGroups[0].id)?n.securityGroups[0].id:"custom",n.authType,n.isDriver.toString(),n.timeZone,"portal"]],u=t.map(function(n,t){return"P"+t+"="+encodeURIComponent(n.join(";"))}).join("&");return o+"/incontact/chatclient/chatclient.aspx?poc="+h(n.customCode)+"&bu="+e+"&"+u};t.createInContactLink=c})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/inContactChat/createInContactLink"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/inContactChat/createInContactLink"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.renderInContactChat=void 0;var i=function(n){return('\n    <div class="in-contact-chat">\n        <div class="in-contact-chat__header">\n            <button class="in-contact-chat__close" title="'+n("Close Live Chat")+'" aria-label="'+n("Close Live Chat")+'">\n                <svg class="in-contact-chat__close-icon"><use xlink:href="#geo-cross-thin"><\/use><\/svg>\n            <\/button>\n        <\/div>\n        <div class="in-contact-chat__content">\n            <iframe class="in-contact-chat__frame"><\/iframe>\n        <\/div>\n    <\/div>\n    ').trim()};t.renderInContactChat=i})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/inContactChat/inContactChat_html"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/inContactChat/inContactChat_html"));
(function(n,require,t){"use strict";function a(n,t,i){return r=r||(u.isWhiteLabeled()?new l:new c(n,t,i))}Object.defineProperty(t,"__esModule",{value:!0});t.singletonChat=void 0;var u=require("../../../../utils"),i=require("../../../../vanillaExtension/vanilla"),f=require("../../../../vanillaExtension/vanillaDraggable"),e=require("../../../deferred"),o=require("../../waiting"),s=require("./createInContactLink"),h=require("./inContactChat_html"),c=function(){function n(n,t,r){var u=this,e,s;this.parent=n;this.draggingModifier="in-contact-chat--dragging";this.isShown=!1;this.chat=i.textToHTML(h.renderInContactChat(r))[0];this.frame=this.chat.getElementsByClassName("in-contact-chat__frame")[0];this.header=this.chat.getElementsByClassName("in-contact-chat__header")[0];t.addEventListener("resize",function(){if(u.isShown){var t=u.parent.offsetWidth,i=u.parent.offsetHeight,n=u.chat.getBoundingClientRect();(n.right>t||n.bottom>i)&&u.positionOpenedChat()}},!1);e=this.chat.getElementsByClassName("in-contact-chat__close")[0];e.addEventListener("click",function(){u.close()},!1);s=this.chat.getElementsByClassName("in-contact-chat__content")[0];this.waiting=o.default(s,{insertWaitingToContainer:!0});this.draggable=f.default()}return n.prototype.positionOpenedChat=function(){var n=this.chat.offsetWidth,t=this.chat.offsetHeight,r=Math.max(this.parent.offsetWidth-n-100,0),u=Math.max(this.parent.offsetHeight-t,0);i.css(this.chat,{left:r+"px",top:u+"px"})},n.prototype.loadFrame=function(n){var i=this,r=e.Deferred(),t=function(){r.resolve();i.frame.removeEventListener("load",t,!1);i.frame.removeEventListener("error",t,!1)};return this.frame.addEventListener("load",t,!1),this.frame.addEventListener("error",t,!1),this.frame.src=n,r.promise()},n.prototype.loadChat=function(n){var t=this;if(this.chat.parentNode===this.parent)return this.chat;this.parent.appendChild(this.chat);this.waiting.displayProgress(this.loadFrame(s.createInContactLink(n)));this.positionOpenedChat();var r=0,u=0,f=this.parent.getBoundingClientRect(),e=f.width-100,o=f.height-100;return this.draggable.attachEvents(undefined,this.header,function(){r=t.chat.offsetLeft;u=t.chat.offsetTop;i.addClasses(t.chat,t.draggingModifier)},function(n,f,s){requestAnimationFrame(function(){var n=Math.min(Math.max(r+f,0),e),h=Math.min(Math.max(u+s,0),o);i.css(t.chat,{left:n+"px",top:h+"px"})})},function(){i.removeClasses(t.chat,t.draggingModifier)}),this.frame},n.prototype.openChat=function(n){var t=this.loadChat(n);t&&t.focus()},Object.defineProperty(n.prototype,"shown",{get:function(){return this.isShown},enumerable:!1,configurable:!0}),n.prototype.open=function(n){this.openChat(n);this.isShown=!0},n.prototype.close=function(){this.chat.parentNode===this.parent&&(this.frame.src="",this.parent.removeChild(this.chat),this.draggable.detachEvents(),this.isShown=!1)},n}(),l=function(){function n(){}return Object.defineProperty(n.prototype,"shown",{get:function(){return!1},enumerable:!1,configurable:!0}),n.prototype.open=function(){},n.prototype.close=function(){},n}(),r;t.singletonChat=a})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/inContactChat/inContactChat"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/inContactChat/inContactChat"));
(function(n,require,t){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i.apply(this,arguments)},u,f,r;Object.defineProperty(t,"__esModule",{value:!0});t.listenToExternalChatOpen=t.createLiveChatLink=t.hasAccessToLiveChat=void 0;var e=require("../inContactChat/inContactChat"),o=function(n,t,i,r){return function(){r();i.ask(t).then(function(t){n.open(t)},function(){})}},s=function(n,t,i,r){return!n&&t&&(r||i.indexOf("*")!==0)};t.hasAccessToLiveChat=s;u=function(n,i,r,u,f,s,h,c,l,a,v){if(!t.hasAccessToLiveChat(l,a,r.resellerPhoneNumber,v))return h.removeItems([{menuName:"",hash:"liveChat"}]),{open:function(){}};var w=e.singletonChat(i,s,c),y=o(w,r,u,f),p=n.querySelector("[data-href='liveChat']");return p&&p.addEventListener("click",y,!1),{open:y}};t.createLiveChatLink=u;f=function(n,t){r(n,t);n.stateChange(function(){r(n,t)},!1)};t.listenToExternalChatOpen=f;r=function(n,t){var r=n.getState();r.openChat&&(t.open(),n.setState(i(i({},n.getState()),{openChat:undefined})))}})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/liveChat/liveChat"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/liveChat/liveChat"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.LiveChatPipeline=void 0;var i=require("../../../deferred"),r=function(){function n(n,t,i,r){this.steps=n;this.translate=t;this.notifier=i;this.browserLang=r}return n.prototype.createLanguageNotification=function(n){return this.browserLang&&this.browserLang.indexOf(n.language)<0&&(this.warning&&this.warning.hide(),this.warning=this.notifier.displayInfo(this.translate("Your browser's language setting does not match your user profile's language setting. Live chat will open up in your browser's language."),10)),n},n.prototype.ask=function(n){var t=this;return this.steps.reduce(function(n,t){return n.then(function(n){return t.ask(n)})},i.resolve(n)).then(function(n){return t.createLanguageNotification(n)})},n.translations=function(){return["Your browser's language setting does not match your user profile's language setting. Live chat will open up in your browser's language."]},n}();t.LiveChatPipeline=r})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/liveChat/liveChatPipeline"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/liveChat/liveChatPipeline"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.toUserInfo=void 0;var i=function(n,t,i,r){var u,f;return{id:n.id,firstName:n.firstName,lastName:n.lastName,name:n.name,phoneNumber:n.phoneNumber||"",phoneNumberExtension:n.phoneNumberExtension||"",countryCode:n.countryCode||"",language:n.language||"en",database:i,companyName:t.companyName,companyAddress:t.companyAddress,erp:((u=t.resellerInfo)===null||u===void 0?void 0:u.erp)||"",resellerPhoneNumber:((f=t.resellerInfo)===null||f===void 0?void 0:f.telephoneNumber)||"",whitelabel:r,companyGroups:n.companyGroups||[],securityGroups:n.securityGroups||[{id:""}],authType:n.userAuthenticationType,isDriver:n.isDriver||!1,timeZone:n.timeZoneId,customCode:t.customCode||""}};t.toUserInfo=i})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/liveChat/liveChatUserInfo"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/liveChat/liveChatUserInfo"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.attachSelfHelpLaunch=void 0;var i=require("../../../../vanillaExtension/vanilla"),u=require("../../../deferred"),f=function(n,t){return n.isCollapsed()?"[data-href='GettingStartedLink']":!t||t.getBoundingClientRect().width===0?"[data-href='GettingStartedLink'] > button":"[data-orig='selfHelp']"},e=function(n,t,i){return function(){window.launchSelfHelp&&(i&&(i.scrollTop=0),window.launchSelfHelp(f(n,t),"tl-tr"),(n.isMobile()||n.isSmallScreenSize())&&n.collapse())}},o=function(n){return{elt:n,hide:function(){i.addClasses(n,"header-input--hidden")},show:function(){i.removeClasses(n,"header-input--hidden")}}},s=function(n,t){return{elt:n,hide:function(){t.removeItems([{menuName:"",hash:"selfHelp"}])},show:function(){}}},r=function(){return{elt:i.create("div"),hide:function(){},show:function(){}}},h=function(n,t,i,f,h,c){var l=[h?o(h):r(),c?s(c,i):r()];return n.api.then(function(){var n=e(t,c,f);return l.forEach(function(t){t.elt&&(t.show(),t.elt.addEventListener("click",n,!1))}),u.resolve(undefined)}).catch(function(){l.forEach(function(n){n.elt&&n.hide()})})};t.attachSelfHelpLaunch=h})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/whatfixWidget/whatfixSelfHelp"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/whatfixWidget/whatfixSelfHelp"));
(function(n,require,t){"use strict";var r,u,f,e,o,s;Object.defineProperty(t,"__esModule",{value:!0});t.parseExternalLink=t.getSvgAddinIcon=t.addPrefix=t.isTheSameDomain=t.createAddinPathPrefix=t.getTranslation=void 0;var h=require("../../../utils"),c=require("../../deferred"),l=require("../loadIcon"),i="Custom Add-In",a=function(n,t){return n?typeof n=="string"?n:n[t]||n.en||i:i};t.getTranslation=a;r=function(n,t){return t?t.substring(t.indexOf("apps"),t.lastIndexOf("/")+1):h.getAddinPrefix(n)+"/"};t.createAddinPathPrefix=r;u=function(n){return n.indexOf("//")===-1&&n.indexOf("data:")!==0};t.isTheSameDomain=u;f=function(n,i){var r=n;return r&&t.isTheSameDomain(r)&&(r=i+(r[0]==="/"?r.substring(1):r)),r};t.addPrefix=f;e=function(n,i){var r=n?t.addPrefix(n,"/"+i):undefined;return r?l.svgIconloader(r).catch(function(n){return console.error(n),undefined}):c.resolve(undefined)};t.getSvgAddinIcon=e;o=function(n){var t=n.lastIndexOf("."),r=n.substr(0,t),i=n.substr(t+1);return r.replace(/\//g,".")+(i!=="js"?"["+i+"]":"")};s=function(n,i){var r=n;return t.isTheSameDomain(n)&&(r=o(i+n)),r};t.parseExternalLink=s})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/addinsTools/parsers/parseAddin"),geotab.commonjs.generateExport("geotab/checkmate/addinsTools/parsers/parseAddin"));
(function(n,require,t){"use strict";var u,f,e;Object.defineProperty(t,"__esModule",{value:!0});t.parseMenuAddinItem=t.parseMenuAddin=t.filterMenuAddinItems=t.isMenuAddinItem=void 0;var r=require("../classifyAddin"),o=require("../filterAddin"),i=require("./parseAddin"),s=function(n){return n.type===r.AddinType.MENU};t.isMenuAddinItem=s;u=function(n){return o.filterAddinItems([r.AddinType.MENU],n)};t.filterMenuAddinItems=u;f=function(n,i){return n.map(function(n){return t.parseMenuAddinItem(n,i)})};t.parseMenuAddin=f;e=function(n,t){var r=i.createAddinPathPrefix(n.meta.addinName,n.meta.originalUrl);return{type:n.type,addinName:n.meta.addinName,supportEmail:n.meta.support,addinPath:r,svgIcon:i.getSvgAddinIcon(n.data.svgIcon||n.data.icon,r),menuId:n.data.menuId.replace(/\.\\\/:\s,/gi,""),path:n.data.path||"",isMainMenuItem:!0,menuName:i.getTranslation(n.data.menuName,t)}};t.parseMenuAddinItem=e})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/addinsTools/parsers/parseMenuAddin"),geotab.commonjs.generateExport("geotab/checkmate/addinsTools/parsers/parseMenuAddin"));
(function(n,require,t){"use strict";var f,e,o;Object.defineProperty(t,"__esModule",{value:!0});t.parsePageAddinItem=t.parsePageAddin=t.filterPageAddinItems=t.isPageAddinItem=void 0;var r=require("../classifyAddin"),s=require("../filterAddin"),i=require("./parseAddin"),h=function(n,t){var u=(n||"").split("/"),r;return u.pop(),r=u.join("/"),(i.isTheSameDomain(n)?t:"")+(r?r+"/":"")},c=function(n,t,r){var f=(n||"").split("/"),u;return f.pop(),u=f.join("/"),(i.isTheSameDomain(n)?r:"")+(u?u+"/":"")+"translations/"+t+".json"},l=/[\W]/gi,a=/[\s]/gi,v=/[\?\&]/i,y="addin-",u=function(n,t){var e=n.search(v),o=n.split("?"),s=o.length>1?o.pop():"",u=e>-1?n.substring(0,e):n,r=u.lastIndexOf("/"),h=u.lastIndexOf("."),c=encodeURIComponent((t||"").replace(a,"_")).replace(l,"").toLowerCase(),f="",i;return r>=h?(i=u,r===i.length-1&&(i=i.substring(0,i.length-1),r=i.lastIndexOf("/")),f=i.substring(r+1,i.length)):f=u.substring(r+1,h),y+(c?c+"-":"")+f.replace(/\./g,"_")+(s?"?"+s:"")},p=function(n){return n.indexOf("http")===0},w=function(n){return n.type===r.AddinType.PAGE};t.isPageAddinItem=w;f=function(n){return s.filterAddinItems([r.AddinType.PAGE],n)};t.filterPageAddinItems=f;e=function(n,i){return n.map(function(n){return t.parsePageAddinItem(n,i)})};t.parsePageAddin=e;o=function(n,t){var r=i.createAddinPathPrefix(n.meta.addinName,n.meta.originalUrl);return{type:n.type,addinName:n.meta.addinName,supportEmail:n.meta.support,addinPath:r,svgIcon:i.getSvgAddinIcon(n.data.svgIcon||n.data.icon,r),url:i.parseExternalLink(n.data.url,r),mainFileFolder:h(n.data.url,r),translation:c(n.data.url,t,r),hash:u(n.data.url,n.meta.addinName),oldHash:u(n.data.url,""),rawUrl:p(n.data.url)?n.data.url:r+n.data.url,path:n.data.path||"",isMainMenuItem:n.data.hasOwnProperty("path")&&n.data.hasOwnProperty("menuName"),menuName:i.getTranslation(n.data.menuName,t)}};t.parsePageAddinItem=o})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/addinsTools/parsers/parsePageAddin"),geotab.commonjs.generateExport("geotab/checkmate/addinsTools/parsers/parsePageAddin"));
(function(n,require,t){"use strict";var u=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))},f,e;Object.defineProperty(t,"__esModule",{value:!0});t.uninstallPageAddinItems=t.installPageAddinsInMainMenu=t.installPageAddin=void 0;var o=require("../classifyAddin"),s=require("../filterAddin"),i=require("../parsers/parseMenuAddin"),r=require("../parsers/parsePageAddin"),h=function(n,t,u,f){var e=n.map(function(n){return r.isPageAddinItem(n)?r.parsePageAddinItem(n,t):i.isMenuAddinItem(n)?i.parseMenuAddinItem(n,t):undefined}).filter(function(n){return n!==undefined}),h=s.filterAddinItems([o.AddinType.PAGE],e);return h.forEach(function(n){n.hash&&u.addCid(n.hash,"")}),f.addCustomPages(h),e};t.installPageAddin=h;f=function(n,t){var i=t.filter(function(n){return n.isMainMenuItem});i.length>0&&n.addItems(i)};t.installPageAddinsInMainMenu=f;e=function(n,t,f,e,o){var s=r.parsePageAddin(r.filterPageAddinItems(n),"en"),c=i.parseMenuAddin(i.filterMenuAddinItems(n),"en"),h;s.forEach(function(n){n.hash&&t.removeCid(n.hash)});(s.length>0||c.length>0)&&o.removeItems(u(u([],s,!0),c,!0));h=f.getCurrentPageName();h&&s.some(function(n){return n.hash===h})&&f.go(e,!1);f.removeCustomPages(s)};t.uninstallPageAddinItems=e})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/addinsTools/appIntegration/installPageAddins"),geotab.commonjs.generateExport("geotab/checkmate/addinsTools/appIntegration/installPageAddins"));
(function(n,require,t){"use strict";var r,u;Object.defineProperty(t,"__esModule",{value:!0});t.parseButtonAddin=t.filterButtonAddinItems=void 0;var f=require("../classifyAddin"),e=require("../filterAddin"),i=require("./parseAddin"),o=function(n){return e.filterAddinItems([f.AddinType.BUTTON],n)};t.filterButtonAddinItems=o;r=function(n){return n.indexOf("http")===0};u=function(n,t){return n.map(function(n){var u=i.createAddinPathPrefix(n.meta.addinName,n.meta.originalUrl);return{type:n.type,addinName:n.meta.addinName,supportEmail:n.meta.support,addinPath:u,icon:n.data.icon?i.addPrefix(n.data.icon,"/"+u):undefined,click:i.parseExternalLink(n.data.click,u),clickUrl:r(n.data.click)?n.data.click:u+n.data.click,page:n.data.page,buttonName:i.getTranslation(n.data.buttonName,t)}})};t.parseButtonAddin=u})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/addinsTools/parsers/parseButtonAddin"),geotab.commonjs.generateExport("geotab/checkmate/addinsTools/parsers/parseButtonAddin"));
(function(n,require,t){"use strict";var i,r,u;Object.defineProperty(t,"__esModule",{value:!0});t.uninstallButtonAddin=t.installButtonAddin=void 0;i=require("../parsers/parseButtonAddin");r=function(n,t,r,u){var e=i.parseButtonAddin(i.filterButtonAddinItems(n),t),f;return r.add(e),f=u.getCurrentPageName(),f&&r.bind(f,undefined),e};t.installButtonAddin=r;u=function(n,t){var r=i.parseButtonAddin(i.filterButtonAddinItems(n),"en");return t.remove(r),r};t.uninstallButtonAddin=u})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/addinsTools/appIntegration/installButtonAddins"),geotab.commonjs.generateExport("geotab/checkmate/addinsTools/appIntegration/installButtonAddins"));
(function(n,require,t){"use strict";var i,r,u;Object.defineProperty(t,"__esModule",{value:!0});t.createInstalledAddinNotification=t.createUninstallAddinNotification=void 0;i=require("../../utils");r=function(n,t){return n.length>0?n.length>1?t("MultipleAddinsRemoved"):t("AddinRemoved").replace("{0}",n[0].name):""};t.createUninstallAddinNotification=r;u=function(n,t,i,r,u){return n.length>0&&t.length>0?{message:u("MultipleAddinInstalled"),links:[]}:n.length>0?e(n,i,r,u):t.length>0?o(t,r,u):{message:"",links:[]}};t.createInstalledAddinNotification=u;var f=function(n,t){return n.path.length>0?t("AddinInDeepLevelMenuInstalled").replace("{1}",n.path.map(function(n){return i.htmlEscape(t(n)||n)}).join(" > ")):t(n.isFirstLevelAddin?"AddinIn1LevelMenuInstalled":"AddinInstalled")},e=function(n,t,r,u){var c=function(n,t){for(var r=[],i=0;i<n.length;++i){if(n[i]!==t[i])break;r.push(n[i])}return r},o=(n||[]).reduce(function(n,i){var u=t(i.hash).reverse(),f=u.length===1,r;return n.hash[i.addinName]?(r=n.hash[i.addinName],r.isFirstLevelAddin=r.isFirstLevelAddin&&f,r.path=r.isFirstLevelAddin?[]:c(r.path,u),r.link=r.link!==i.hash?"":r.link):(r={isFirstLevelAddin:f,name:i.addinName,link:i.hash,path:u},n.hash[i.addinName]=r,n.addins.push(r)),n},{addins:[],hash:{}}).addins;if(o.length===0)return{message:"",links:[]};if(o.length>1)return{message:u("AddinsInstalled"),links:[]};var e=o[0],s=i.htmlEscape(e.name),h=f(e,u);return e.link?{message:h,links:[{text:s,href:r(e.link)}]}:{message:h.replace("{0}",s),links:[]}},o=function(n,t,r){var u=n.reduce(function(n,t){var i=(t.page||"").toLowerCase();return n.hash[i]||(n.hash[i]=!0,n.pages.push({name:r(i),link:t.page})),n},{hash:{},pages:[]}),f=n.length===1,e=f?n[0].addinName:"",o=r(f?"CustomButtonInstalled":"CustomButtonsInstalled"),s=u.pages.map(function(n,t){return"{"+t+"}"}).join(", ");return{message:o.replace("{0}",i.htmlEscape(e)).replace("{1}",s),links:u.pages.map(function(n){return{href:t(n.link),text:n.name.trim()}})}}})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/addinsTools/addinNotifications"),geotab.commonjs.generateExport("geotab/checkmate/addinsTools/addinNotifications"));
(function(n,require,t){"use strict";var i=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))},r,u;Object.defineProperty(t,"__esModule",{value:!0});t.showUninstalledAddin=t.showInstalledAddin=void 0;r=require("../addinNotifications");u=function(n){var t=[],r=[],u;return function(f,e){for(var s=[],o=2;o<arguments.length;o++)s[o-2]=arguments[o];t=i(i([],t,!0),f||[],!0);r=i(i([],r,!0),e||[],!0);u&&clearTimeout(u);u=setTimeout(function(){n.apply(void 0,i([t,r],s,!1));t.length=0;r.length=0},1)}};t.showInstalledAddin=u(function(n,t,i,u,f,e){var s=r.createInstalledAddinNotification(n,t,function(n){return f.getFullPath(n)||[]},e.getLinkTo,u),o=s.message,h=s.links;if(o.length!==0){if(h.length===0){i.displayInfo(o,10);return}i.displayPopupNotification({message:o,placeholders:h.map(function(n){return{type:"link",text:n.text,additional:n.href}}),seconds:10})}});t.showUninstalledAddin=u(function(n,t,i,u){var f=r.createUninstallAddinNotification(n,u);f&&i.displayInfo(f,10)})})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/addinsTools/appIntegration/addinsChangesNotification"),geotab.commonjs.generateExport("geotab/checkmate/addinsTools/appIntegration/addinsChangesNotification"));
(function(n,require,t){"use strict";var i=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0});t.handleAddinUpdates=void 0;var o=require("../classifyAddin"),r=require("../filterAddin"),f=require("./addinsChangesNotification"),e=require("./installButtonAddins"),u=require("./installPageAddins"),s=function(n,t,s,h,c,l,a,v,y,p,w,b){return function(k){var d=k.removed,g=k.added,nt=k.changedDescription,tt=k.allowUnsignedAddIn;d.length>0&&(n.remove(d),t.resolve(d).then(function(n){var p=r.filterAddinsFn(tt,s.hasAccessTo("LaunchAddIn"),s.hasAccessTo),t=n.filter(p),o=t.reduce(function(n,t){return i(i([],n,!0),t.items,!0)},[]);u.uninstallPageAddinItems(o,h,l,b,c);e.uninstallButtonAddin(o,a);f.showUninstalledAddin(t,[],v,y)}));g.length>0&&(n.add(g),t.resolve(g).then(function(n){var d=r.filterAddinsFn(tt,s.hasAccessTo("LaunchAddIn"),function(){return s.isEverything}),g=n.filter(d),t=g.reduce(function(n,t){return i(i([],n,!0),t.items,!0)},[]),b=u.installPageAddin(t,w,h,l),k;u.installPageAddinsInMainMenu(c,b);p();k=e.installButtonAddin(t,w,a,l);f.showInstalledAddin(r.filterAddinItems([o.AddinType.PAGE],b),k,v,y,c,l)}));nt.length>0&&n.add(nt)}};t.handleAddinUpdates=s})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/addinsTools/appIntegration/handleAddinUpdates"),geotab.commonjs.generateExport("geotab/checkmate/addinsTools/appIntegration/handleAddinUpdates"));
(function(n,require,t){"use strict";function e(n){return b.indexOf(n)!==-1?t.continent.Africa:h.indexOf(n)!==-1?t.continent.Asia:c.indexOf(n)!==-1?t.continent.Europe:w.indexOf(n)!==-1?t.continent.NorthAmerica:k.indexOf(n)!==-1?t.continent.SouthAmerica:a.indexOf(n)!==-1?t.continent.Australia:t.continent.Unknown}function d(n){var i=e(n);switch(i){case t.continent.Europe:return"dd/MM/yy HH:mm:ss";case t.continent.Asia:return"dd/MM/yy hh:mm:ss tt";case t.continent.NorthAmerica:case t.continent.SouthAmerica:return"MM/dd/yy hh:mm:ss tt";case t.continent.Australia:case t.continent.Africa:return"dd/MM/yy hh:mm:ss tt";default:return"MM/dd/yy HH:mm:ss"}}function g(n,t){return y[t].indexOf(n)>-1}function nt(n){if(v(n))return f.MPGUS;if(p.indexOf(n)!==-1)return f.KmPerLiter;switch(n){case"Europe/London":case"Europe/Guernsey":case"Europe/Isle_of_Man":case"Europe/Jersey":return f.MPGImperial;default:return f.LitersPer100Km}}function tt(n){if(v(n))return!1;switch(n){case"America/Dominica":case"Europe/Isle_of_Man":case"America/Grenada":case"Indian/Cocos":case"Asia/Rangoon":case"Europe/Jersey":case"Europe/London":case"America/Belize":case"America/Cayman":case"America/Nassau":case"Europe/Guernsey":return!1;default:return!0}}function it(n,i){return t.continentCoords.filter(function(t){var u=t.isContinent,r=t.coords;return u&&n>=r.y+r.height&&n<=r.y&&i>=r.x&&i<=r.x+r.width}).map(function(n){return n.name})[0]||t.continent.Unknown}function rt(n){var u=e(n),i=t.continentCoords.reduce(function(n,t){return n[t.name]=t,n},{}),r=i[u]||i.World;return[{name:r.name,viewport:o.extend({},r.coords)}]}function ut(n){var t=n.reduce(function(n,t){return n[t.id.toLowerCase()]=!0,n},{}),i=function(n){return n.filter(function(n){return t[n.toLowerCase()]})},r=[function(){try{var n=Intl.DateTimeFormat().resolvedOptions().timeZone;return n?[n]:[]}catch(t){return[]}},function(){var t=(new Date).getTimezoneOffset(),i=function(n){return(n.toString().length===1?"0":"")+n},u=function(n){return n>=0?"-":""},r=Math.floor(Math.abs(t)/60),f=Math.floor(Math.abs(t)-r*60),e=""+u(t)+i(r)+":"+i(f)+":00";return n.filter(function(n){return n.offsetFromUtc===e}).map(function(n){return n.id})},function(){return["America/Toronto"]}];return r.reduce(function(n,t){var r=i(n);return r.length?r:t()},[])}var r=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))},i,o,y,p;Object.defineProperty(t,"__esModule",{value:!0});t.getBrowserTimeZone=t.getDefaultMapViews=t.getContinentByLatLng=t.continentCoords=t.getIsMetricByTimeZone=t.getFuelEconomyUnitByTimeZone=t.doesTimezoneMatchJurisdiction=t.getDateTimeFormatByTimeZone=t.getContinentByTimeZone=t.continent=void 0;o=require("./vanillaExtension/vanilla");t.continent={Unknown:"Unknown",Asia:"Asia",Africa:"Africa",NorthAmerica:"North America",SouthAmerica:"South America",Antarctica:"Antarctica",Europe:"Europe",Australia:"Australia"};var u=["America/Phoenix","America/Los_Angeles","America/Indiana/Knox","America/Indianapolis","America/Menominee","America/New_York","America/Boise","America/Sitka","America/Indiana/Marengo","America/North_Dakota/New_Salem","America/St_Vincent","America/Chicago","America/Indiana/Winamac","America/North_Dakota/Beulah","America/North_Dakota/Center","America/Detroit","America/Anchorage","America/Indiana/Tell_City","America/Louisville","America/Indiana/Vevay","America/Indiana/Vincennes","America/Shiprock","America/Kentucky/Monticello","America/Denver","America/Indiana/Petersburg","America/Yakutat","America/Juneau","Pacific/Honolulu","America/Nome"],s=["America/Atikokan","America/Blanc-Sablon","America/Cambridge_Bay","America/Creston","America/Dawson","America/Dawson_Creek","America/Edmonton","America/Fort_Nelson","America/Glace_Bay","America/Goose_Bay","America/Halifax","America/Inuvik","America/Iqaluit","America/Moncton","America/Montreal","America/Nipigon","America/Pangnirtung","America/Rainy_River","America/Rankin_Inlet","America/Regina","America/Resolute","America/St_Johns","America/Swift_Current","America/Thunder_Bay","America/Toronto","America/Vancouver","America/Whitehorse","America/Winnipeg","America/Yellowknife"],w=r(r(r([],u,!0),s,!0),["America/Tijuana","America/Hermosillo","America/Chihuahua","America/Mazatlan","America/Ojinaga","America/Guatemala","America/Belize","America/Costa_Rica","America/Tegucigalpa","America/Managua","America/El_Salvador","America/Mexico_City","America/Cancun","America/Merida","America/Monterrey","America/Port-au-Prince","America/Jamaica","America/Panama","America/Nassau","America/Antigua","America/Barbados","America/Dominica","America/Santo_Domingo","America/Grenada","America/St_Kitts","America/St_Lucia","America/Port_of_Spain","America/Matamoros","America/Coral_Harbour","America/Cayman","Atlantic/Bermuda","America/Thule","America/Godthab","America/Danmarkshavn","America/St_Barthelemy","America/Puerto_Rico","America/Tortola"],!1),b=["Africa/Casablanca","Africa/Ouagadougou","Africa/Abidjan","Africa/El_Aaiun","Africa/Accra","Africa/Banjul","Africa/Conakry","Africa/Bissau","Africa/Monrovia","Africa/Bamako","Africa/Nouakchott","Africa/Freetown","Africa/Dakar","Africa/Sao_Tome","Africa/Lome","Africa/Cairo","Africa/Tripoli","Africa/Ceuta","Africa/Lagos","Africa/Luanda","Africa/Porto-Novo","Africa/Kinshasa","Africa/Bangui","Africa/Brazzaville","Africa/Douala","Africa/Algiers","Africa/Libreville","Africa/Malabo","Africa/Niamey","Africa/Ndjamena","Africa/Tunis","Africa/Windhoek","Africa/Johannesburg","Africa/Bujumbura","Africa/Gaborone","Africa/Lubumbashi","Africa/Maseru","Africa/Blantyre","Africa/Maputo","Africa/Kigali","Africa/Mbabane","Africa/Lusaka","Africa/Harare","Africa/Nairobi","Africa/Djibouti","Africa/Asmera","Africa/Addis_Ababa","Africa/Khartoum","Africa/Mogadishu","Africa/Juba","Africa/Dar_es_Salaam","Africa/Kampala","Indian/Comoro","Indian/Antananarivo","Indian/Mauritius","Indian/Mahe","Atlantic/Cape_Verde","Indian/Mayotte","Indian/Reunion","Atlantic/St_Helena"],h=["Asia/Calcutta","Asia/Colombo","Asia/Katmandu","Asia/Almaty","Asia/Bishkek","Asia/Qyzylorda","Asia/Dhaka","Asia/Thimphu","Asia/Yekaterinburg","Asia/Rangoon","Asia/Bangkok","Asia/Jakarta","Asia/Pontianak","Asia/Phnom_Penh","Asia/Vientiane","Asia/Hovd","Asia/Saigon","Asia/Novosibirsk","Asia/Novokuznetsk","Asia/Omsk","Asia/Shanghai","Asia/Chongqing","Asia/Harbin","Asia/Kashgar","Asia/Urumqi","Asia/Hong_Kong","Asia/Macau","Asia/Krasnoyarsk","Asia/Singapore","Asia/Brunei","Asia/Makassar","Asia/Kuala_Lumpur","Asia/Kuching","Asia/Manila","Asia/Taipei","Asia/Ulaanbaatar","Asia/Choibalsan","Asia/Irkutsk","Asia/Tokyo","Asia/Jayapura","Asia/Dili","Asia/Seoul","Asia/Pyongyang","Asia/Yakutsk","Asia/Khandyga","Asia/Vladivostok","Asia/Sakhalin","Asia/Ust-Nera","Asia/Magadan","Asia/Anadyr","Asia/Kamchatka","Asia/Beirut","Asia/Gaza","Asia/Hebron","Asia/Damascus","Asia/Nicosia","Asia/Jerusalem","Asia/Amman","Asia/Baghdad","Asia/Riyadh","Asia/Bahrain","Asia/Kuwait","Asia/Qatar","Asia/Aden","Asia/Tehran","Asia/Dubai","Asia/Muscat","Asia/Baku","Asia/Tbilisi","Asia/Yerevan","Asia/Kabul","Asia/Karachi","Asia/Tashkent","Asia/Oral","Asia/Aqtau","Asia/Aqtobe","Asia/Dushanbe","Asia/Ashgabat","Asia/Samarkand","Indian/Maldives","Indian/Cocos"],c=r(r([],["Europe/Dublin","Europe/Lisbon","Europe/Berlin","Europe/Vienna","Europe/Busingen","Europe/Rome","Europe/Luxembourg","Europe/Malta","Europe/Amsterdam","Europe/Stockholm","Europe/Budapest","Europe/Prague","Europe/Bratislava","Europe/Ljubljana","Europe/Paris","Europe/Brussels","Europe/Copenhagen","Europe/Madrid","Europe/Warsaw","Europe/Zagreb","Europe/Bucharest","Europe/Athens","Europe/Mariehamn","Europe/Sofia","Europe/Tallinn","Europe/Helsinki","Europe/Vilnius","Europe/Riga","Atlantic/Azores","Atlantic/Canary","Atlantic/Madeira"],!0),["Europe/London","Europe/Guernsey","Europe/Isle_of_Man","Europe/Jersey","Europe/Andorra","Europe/Zurich","Europe/Gibraltar","Europe/Vaduz","Europe/Monaco","Europe/Oslo","Europe/San_Marino","Europe/Vatican","Europe/Tirane","Europe/Podgorica","Europe/Belgrade","Europe/Sarajevo","Europe/Skopje","Europe/Chisinau","Europe/Kiev","Europe/Simferopol","Europe/Uzhgorod","Europe/Zaporozhye","Europe/Istanbul","Europe/Kaliningrad","Europe/Minsk","Europe/Moscow","Europe/Samara","Europe/Volgograd","Atlantic/Reykjavik"],!1),l=["America/Araguaina","America/Bahia","America/Belem","America/Boa_Vista","America/Campo_Grande","America/Cuiaba","America/Eirunepe","America/Fortaleza","America/Maceio","America/Manaus","America/Noronha","America/Porto_Velho","America/Recife","America/Rio_Branco","America/Santarem","America/Sao_Paulo"],k=r(r([],l,!0),["Pacific/Galapagos","America/Bogota","America/Guayaquil","America/Lima","America/Caracas","America/Asuncion","America/La_Paz","America/Guyana","America/Santiago","America/Buenos_Aires","America/Argentina/La_Rioja","America/Argentina/Rio_Gallegos","America/Argentina/Salta","America/Argentina/San_Juan","America/Argentina/San_Luis","America/Argentina/Tucuman","America/Argentina/Ushuaia","America/Catamarca","America/Cordoba","America/Jujuy","America/Mendoza","America/Paramaribo","America/Montevideo","America/Anguilla","America/Aruba","America/Kralendijk","America/Curacao","America/Guadeloupe","America/Marigot","America/Martinique","America/Montserrat","America/Cayenne","Atlantic/Stanley"],!1),a=["Australia/Perth","Australia/Adelaide","Australia/Broken_Hill","Australia/Darwin","Australia/Brisbane","Australia/Lindeman","Australia/Sydney","Australia/Melbourne","Australia/Hobart","Australia/Currie"],f={LitersPer100Km:"LitersPer100Km",KmPerLiter:"KmPerLiter",MPGUS:"MPGUS",MPGImperial:"MPGImperial"},v=function(n){return u.indexOf(n)!==-1};t.getContinentByTimeZone=e;t.getDateTimeFormatByTimeZone=d;y=(i={},i.US=u,i.USGov=u,i.CA=s,i.EU=c,i.AU=a,i.BR=l,i.AS=h,i);t.doesTimezoneMatchJurisdiction=g;p=["Europe/Amsterdam","Europe/Copenhagen","Asia/Calcutta","Asia/Tokyo","Asia/Seoul","America/Buenos_Aires","America/Argentina/La_Rioja","America/Argentina/Rio_Gallegos","America/Argentina/Salta","America/Argentina/San_Juan","America/Argentina/San_Luis","America/Argentina/Tucuman","America/Argentina/Ushuaia","America/Catamarca","America/Cordoba","America/Jujuy","America/Mendoza","America/La_Paz","America/Cuiaba","America/Campo_Grande","America/Manaus","America/Boa_Vista","America/Eirunepe","America/Porto_Velho","America/Rio_Branco","America/Sao_Paulo","America/Araguaina","America/Fortaleza","America/Belem","America/Maceio","America/Recife","America/Bahia","America/Noronha","America/Santarem","America/Santiago","America/Bogota","America/Costa_Rica","America/Santo_Domingo","America/Guayaquil","America/El_Salvador","America/Cayenne","America/Guadeloupe","America/Guatemala","America/Port-au-Prince","America/Tegucigalpa","America/Martinique","America/Tijuana","America/Hermosillo","America/Chihuahua","America/Mazatlan","America/Ojinaga","America/Mexico_City","America/Cancun","America/Merida","America/Monterrey","America/Matamoros","America/Managua","America/Panama","America/Asuncion","America/Lima","America/Puerto_Rico","America/St_Barthelemy","America/Montevideo","America/Caracas"];t.getFuelEconomyUnitByTimeZone=nt;t.getIsMetricByTimeZone=tt;t.continentCoords=[{name:"Africa",coords:{x:-53.2177734375,y:37.544578552246094,width:145.546875,height:-72.89779663085938},isContinent:!0},{name:"Asia",coords:{x:18.5888671875,y:56.17002487182617,width:145.546875,height:-66.31195831298828},isContinent:!0},{name:"Australia",coords:{x:106.3916015625,y:-11.523087501525879,width:72.7734375,height:-33.68991470336914},isContinent:!0},{name:"Europe",coords:{x:-23.994140625,y:60.500526428222656,width:72.7734375,height:-25.614595413208008},isContinent:!0},{name:"North America",coords:{x:-172.7490234375,y:68.0897064208984,width:145.546875,height:-52.59367752075195},isContinent:!0},{name:"South America",coords:{x:-129.4189453125,y:14.562317848205566,width:145.546875,height:-68.12873077392578},isContinent:!0},{name:"World",coords:{x:-144.4921875,y:72.04683685302734,width:291.09375,height:-117.4452896118164},isContinent:!1}];t.getContinentByLatLng=it;t.getDefaultMapViews=rt;t.getBrowserTimeZone=ut})(geotab,geotab.commonjs.generateRequire("geotab/timeZoneInfo"),geotab.commonjs.generateExport("geotab/timeZoneInfo"));
(function(n,require,t){"use strict";function i(n,t){n.sendRequests();var i=t();return n.sendRequests(),i}Object.defineProperty(t,"__esModule",{value:!0});t.isolateCall=void 0;t.isolateCall=i})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/entitiesLoaderModules/isolateCall"),geotab.commonjs.generateExport("geotab/checkmate/entitiesLoaderModules/isolateCall"));
(function(n,require,t){"use strict";function y(t,r,u){return i.together([t.call("GetVersion",{}).catch(function(){return 0}),r("ExceptionsList")?t.rules.getItemsByValue().catch(function(){return[]}):i.resolve([]),r("ViewGroups")?e.isolateCall(t,function(){return t.groups.countOf().catch(function(){return 0})}):i.resolve(0),r("ZoneList")?e.isolateCall(t,function(){return t.zones.countOf().catch(function(){return 0})}):i.resolve(0)]).then(function(t){var i=t[0],r=t[1],u=t[2],f=t[3];return{version:""+i,countOfCustomRules:r.filter(function(n){return n.baseType==="Custom"}).length,countOfGroups:u,countOfZones:f,whitelabel:o.isWhiteLabeled(n.location.host)}},u)}function p(t,u,f){var e=n.location.getVendorPrefix();return i.together([t.systemSettings.getItemsByValue().then(function(n){return n[0]},function(){}),t.users.getItemById(u),t.call("GetEULA",{domain:e.domain||""})]).then(function(n){var i=n[0],t=n[1],u=n[2],f=h.parseEulaPath(u,t.language,i.jurisdiction||"");return{activeDashboardReports:t.activeDashboardReports.length,authorityAddress:r(t.authorityAddress),authorityName:r(t.authorityName),availableDashboardReports:t.availableDashboardReports.length,cannedResponseOptions:t.cannedResponseOptions.length,carrierNumber:r(t.carrierNumber),comment:r(t.comment),companyAddress:r(t.companyAddress),companyGroups:t.companyGroups.length,companyName:t.companyName,countryCode:t.countryCode,dateFormat:t.dateFormat,defaultGoogleMapStyle:t.defaultGoogleMapStyle,defaultHereMapStyle:t.defaultHereMapStyle,defaultMapEngine:t.defaultMapEngine,defaultOpenStreetMapStyle:t.defaultOpenStreetMapStyle,defaultPage:t.defaultPage,designation:t.designation,electricEnergyEconomyUnit:t.electricEnergyEconomyUnit,employeeNo:r(t.employeeNo),firstDayOfWeek:t.firstDayOfWeek,fuelEconomyUnit:t.fuelEconomyUnit,hosRuleSet:t.hosRuleSet,isDriver:t.isDriver||!1,isEULAAccepted:s.isEulaAccepted(t.acceptedEULA,f),isEmailReportEnabled:t.isEmailReportEnabled,isExemptHOSEnabled:t.isExemptHOSEnabled,isLabsEnabled:t.featurePreview.length>0,featurePreview:v(t.featurePreview),isMetric:t.isMetric,isNewsEnabled:t.isNewsEnabled,isPersonalConveyanceEnabled:t.isPersonalConveyanceEnabled,isServiceUpdatesEnabled:t.isServiceUpdatesEnabled,isYardMoveEnabled:t.isYardMoveEnabled,language:t.language,mapViews:w(t.mapViews),maxPCDistancePerDay:t.maxPCDistancePerDay!==undefined?t.maxPCDistancePerDay:i.maxPCDistance||-1,reportGroups:t.reportGroups.length>0,securityGroups:b(t.securityGroups),timeZoneId:t.timeZoneId,wifiEULA:t.wifiEULA,zoneDisplayMode:t.zoneDisplayMode}},f)}function w(n){var i=n[0],r,t;if(!i)return"custom";for(r=0;r<f.continentCoords.length;r++)if(t=f.continentCoords[r],t.coords.x===i.viewport.x&&t.coords.y===i.viewport.y&&t.coords.width===i.viewport.width&&t.coords.height===i.viewport.height)return t.name;return"custom"}function b(n){var t=n[0];return t?c.isSystemSecurityGroup(t.id)?t.id:"custom":"custom"}function k(n,t,r,f){return i.together([p(n,r,f),y(n,t,f)]).then(function(n){var t=n[0],i=n[1];return u(u({},t),i)})}var u=this&&this.__assign||function(){return u=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},u.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});t.collect=void 0;var o=require("../../../utils"),i=require("../../deferred"),s=require("../../eula/eula"),h=require("../../eula/parseEula"),f=require("../../../timeZoneInfo"),c=require("../../../utils/groupUtils"),e=require("../../entitiesLoaderModules/isolateCall"),l=require("../../featurePreview/features"),r=function(n){return n.trim()!==""},a=function(n){return l.features.every(function(t){return n.some(function(n){return t.value===n})})},v=function(n){var t=n.split(",");return a(t)?"all":t.map(function(n){return n.split("_").map(function(n){return n[0]}).join("_")}).join(",")};t.collect=k})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/auditTools/collect"),geotab.commonjs.generateExport("geotab/checkmate/ui/auditTools/collect"));
(function(n,require,t){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i.apply(this,arguments)},r;Object.defineProperty(t,"__esModule",{value:!0});t.Dimensions=void 0;r=function(){function n(n,t){this.state=n;this.setDimensions=t;this.update(n)}return n.prototype.stringifyValue=function(n){return typeof n=="boolean"?n?"True":"False":n},n.prototype.update=function(n){var r=this,t;this.state=i(i({},this.state),n);t=Object.keys(n).reduce(function(t,i){return t[i]=r.stringifyValue(n[i]),t},{});this.setDimensions(t)},n.prototype.subscribe=function(n){var t=this;n.attachEvent("Group.Add",n,function(){t.update({countOfGroups:t.state.countOfGroups+1})});n.attachEvent("Group.Remove",n,function(){t.update({countOfGroups:t.state.countOfGroups-1})});n.attachEvent("Zone.Add",n,function(){t.update({countOfZones:t.state.countOfZones+1})});n.attachEvent("Zone.Remove",n,function(n){t.update({countOfZones:t.state.countOfZones-(Array.isArray(n)?n.length:1)})});n.attachEvent("Rule.Add",n,function(){t.update({countOfCustomRules:t.state.countOfCustomRules+1})});n.attachEvent("Rule.Remove",n,function(){t.update({countOfCustomRules:t.state.countOfCustomRules-1})})},n}();t.Dimensions=r})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/auditTools/dimensions"),geotab.commonjs.generateExport("geotab/checkmate/ui/auditTools/dimensions"));
(function(n,require,t){"use strict";var u=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),i,r;Object.defineProperty(t,"__esModule",{value:!0});t.ThresholdSize=void 0;i=require("../../../eventHandler");r=function(n){function t(t,i){var r=n.call(this)||this,u;return r.isMobilePreviewFlag=!1,r.stateChanged=function(n){r.isMobilePreviewFlag=n.matches;r.fire("change",{isMobilePreview:r.isMobilePreviewFlag})},u=t.matchMedia("(max-width: "+i+"px)"),r.isMobilePreviewFlag=u.matches,typeof u.addEventListener=="function"?u.addEventListener("change",r.stateChanged,!1):u.addListener(r.stateChanged),r}return u(t,n),Object.defineProperty(t.prototype,"isMobilePreview",{get:function(){return this.isMobilePreviewFlag},enumerable:!1,configurable:!0}),t}(i.SimpleEventHandler);t.ThresholdSize=r})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/thresholdSize/thresholdSize"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/thresholdSize/thresholdSize"));
(function(n,require,t){"use strict";var f=this&&this.__spreadArray||function(n,t){for(var i=0,u=t.length,r=n.length;i<u;i++,r++)n[r]=t[i];return n},i,r,u;Object.defineProperty(t,"__esModule",{value:!0});t.toAllowedResources=t.PageServiceRunner=t.ALL_PAGES=void 0;i=require("../../checkmate/ui/modules/thresholdSize/thresholdSize");t.ALL_PAGES="*";r=function(){function n(n,t){var i=this;this.services=n.map(function(n){var r=new(n.bind.apply(n,f([void 0],i.collectAgruments(n.requiredServices,t))));return{service:r,name:r.name}})}return n.prototype.collectAgruments=function(n,t){return n.map(function(n){return t[n]})},n.prototype.matchServicePages=function(n,i){var r="-"+n;return i.indexOf(r)>=0?!1:i.some(function(i){return i===t.ALL_PAGES||i===n})},n.prototype.filterServiceByPage=function(n){var t=this;return this.services.filter(function(i){return t.matchServicePages(n,i.service.pages)})},n.prototype.get=function(n){var t=this.services.filter(function(t){return t.name===n})[0];return t?t.service:t},n.prototype.focus=function(n){this.filterServiceByPage(n).forEach(function(t){t.service.focus(n)})},n.prototype.blur=function(n){this.filterServiceByPage(n).forEach(function(t){t.service.blur(n)})},n}();t.PageServiceRunner=r;u=function(n,t,r,u,f,e,o){return{store:n.entitiesLoader,translate:r,translateSentences:u,getCurrentUser:function(){return n.currentUser},hasAccessToPage:n.uiConfiguration.pagesSecurity.hasAccessToPage,currentUserWatcher:n.currentUserWatcher,mainMenu:t,contentElement:f,body:e,window:o,mobileListener:new i.ThresholdSize(o,640)}};t.toAllowedResources=u})(geotab,geotab.commonjs.generateRequire("geotab/services/pageService/pageServiceRunner"),geotab.commonjs.generateExport("geotab/services/pageService/pageServiceRunner"));
(function(n,require,t){"use strict";var i,r;Object.defineProperty(t,"__esModule",{value:!0});t.EchoChioce=t.PAGE_BOOKMARKS_LIMIT=void 0;i=require("../../../deferred");t.PAGE_BOOKMARKS_LIMIT=4;r=function(){function n(){}return n.prototype.ask=function(n,t){return i.resolve({active:t,prev:t?"":n,next:t?n:""})},n.prototype.isDisabled=function(n,i){return!i&&n.filter(function(n){return n}).length>=t.PAGE_BOOKMARKS_LIMIT},n}();t.EchoChioce=r})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/bookmarkChoice/askChoice"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/bookmarkChoice/askChoice"));
(function(n,require,t){"use strict";var i,r;Object.defineProperty(t,"__esModule",{value:!0});t.renderBookmarkSetCell=t.ACTIVE_STATE=void 0;i=require("../../../../../utils");t.ACTIVE_STATE="bookmark-cell--active";r=function(n,r,u,f){return u===void 0&&(u=""),f===void 0&&(f=!1),('\n        <div class="bookmark-cell '+u+" "+(f?t.ACTIVE_STATE:"")+'">\n            <div class="bookmark-cell__icon-part">\n                <svg class="bookmark-cell__icon"><use xlink:href="#'+r+'"><\/use><\/svg>\n            <\/div>\n            <div class="bookmark-cell__title ellipsis">'+i.htmlEscape(n)+"<\/div>\n        <\/div>\n    ").trim()};t.renderBookmarkSetCell=r})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/bookmarkSet/bookmarkCell/bookmarkCell"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/bookmarkSet/bookmarkCell/bookmarkCell"));
(function(n,require,t){"use strict";var i,r,u;Object.defineProperty(t,"__esModule",{value:!0});t.createBookmarkDialog=void 0;i=require("../../bookmarkSet/bookmarkCell/bookmarkCell");r=function(n,t){return('\n    <div class="bookmark-dialog">\n        <p class="bookmark-dialog__explanation">\n            '+t("Bookmarking a page will create a new quick link in the bottom navigation, replacing one of the default navigation links, like in the example image below.")+'\n        <\/p>\n        <div class="bookmark-dialog__examples">\n            '+n.map(function(n){return i.renderBookmarkSetCell(n.title,n.icon,"bookmark-dialog__example")}).join("")+'\n        <\/div>\n        <p class="bookmark-dialog__ask">\n            '+t("Please choose which quick link to replace with this new bookmarked page:")+'\n        <\/p>\n        <div class="bookmark-dialog__bookmarks">\n            '+n.map(function(n,t){return u(n.title,n.page,t+1,"bookmark-dialog__bookmark")}).join("")+"\n        <\/div>\n    <\/div>\n").trim()};t.createBookmarkDialog=r;u=function(n,t,i,r){return('\n        <label class="bookmark-option '+r+'">\n            <input type="radio" class="bookmark-option__radio" data-page="'+t+'" name="bookmarks-option" '+(i===1?'checked="checked"':"")+'>\n            <span class="bookmark-option__title">'+i+" - "+n+"<\/span>\n        <\/label>\n    ").trim()}})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/bookmarkChoice/bookmarkDialog/bookmarkDialog_html"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/bookmarkChoice/bookmarkDialog/bookmarkDialog_html"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BookmarkDialog=void 0;var r=require("../../../../../vanillaExtension/vanilla"),u=require("../../../../../vanillaExtension/vanillaDialog"),f=require("../../../../deferred"),i=require("../../../../exceptions/commonExceptions"),e=require("./bookmarkDialog_html"),o=function(){function n(n,t,i){this.parent=n;this.translate=t;this.defaultBookmarks=i;this.bs=[]}return n.prototype.createDialog=function(){var n=this,t;return this.dialog!==undefined?this.dialog:(t=u.VanillaDialog(r.textToHTML("")[0],{isModal:!0,title:this.translate("Bookmark This Page"),parentNode:this.parent,buttons:[{name:this.translate("cancel"),click:function(){n.currentAsk&&n.currentAsk.reject(new i.AbortException);t.close()}},{name:this.translate("Continue"),className:"geo-button geo-button--action",click:function(r,u){var s=u.next,h=u.bookmarks,e=t.container.querySelector("[data-page]:checked"),o,f;if(!e||n.currentAsk===undefined){n.currentAsk&&n.currentAsk.reject(new i.AbortException);t.close();return}if(o=e.dataset.page||"",f=h.filter(function(n){return n.page===o}),f.length===0){n.currentAsk.reject(new i.AbortException);t.close();return}n.currentAsk.resolve({active:!0,next:s,prev:f[0].page});t.close()}}],closeButtonCallback:function(){n.currentAsk&&n.currentAsk.reject(new i.AbortException);t.close()}},this.translate),this.dialog=t,t)},n.prototype.ask=function(n){this.currentAsk&&this.currentAsk.reject(new i.AbortException);var t=this.createDialog();return t.container.innerHTML=e.createBookmarkDialog(this.bookmarks,this.translate),t.show({next:n,bookmarks:this.bookmarks}),this.currentAsk=f.Deferred(),this.currentAsk.promise()},n.prototype.close=function(){if(this.currentAsk){this.currentAsk.reject(new i.AbortException);var n=this.createDialog();n.close()}},Object.defineProperty(n.prototype,"bookmarks",{get:function(){return this.bs},set:function(n){this.bs=n},enumerable:!1,configurable:!0}),n.prototype.isDisabled=function(n,t,i){var r=this.defaultBookmarks.indexOf(i);return!t&&n[r]===""},n.translations=function(){return["Continue","Bookmark This Page","Bookmarking a page will create a new quick link in the bottom navigation, replacing one of the default navigation links, like in the example image below.","Please choose which quick link to replace with this new bookmarked page:"]},n}();t.BookmarkDialog=o})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/bookmarkChoice/bookmarkDialog/bookmarkDialog"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/bookmarkChoice/bookmarkDialog/bookmarkDialog"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TooltipBase=void 0;var i=require("../../../../utils"),r=function(){function n(n,t,r,u){var f=this;this.anchor=n;this.container=t;this.content=r;this.resizeWindow=u;this.beforeElemSide=18;this.minOffset=5;this.hideEvents=["click","wheel","touchstart","touchmove"];this.generateTooltip=function(){var r=document.createElement("span"),t,n;return r.className="geo-tooltip__arrow",t=document.createElement("p"),t.className="geo-tooltip__content",f.setContent(t,f.content),n=document.createElement("div"),n.className="geo-tooltip",n.id=i.generateId(),n.appendChild(r),n.appendChild(t),n};this.setTooltipPosition=function(){var n=f.anchor.getBoundingClientRect(),i=f.tooltip.getBoundingClientRect(),e=n.bottom,t=f.tooltip.querySelector(".geo-tooltip__arrow"),o=e+i.height<=f.resizeWindow.innerHeight,r,u;if(o?(f.tooltip.style.top=e+"px",f.tooltip.classList.remove("geo-tooltip--top")):(f.tooltip.style.top=n.top-i.height+"px",f.tooltip.classList.add("geo-tooltip--top")),f.resizeWindow.innerWidth-n.right>300){t&&(t.style.marginLeft="10px",t.style.marginRight="auto");f.tooltip.style.left=n.left-f.beforeElemSide+n.width/2+"px";return}if(n.left>300){t&&(t.style.marginLeft="auto",t.style.marginRight="10px");f.tooltip.style.left=n.left-i.width+f.beforeElemSide+n.width/2+"px";return}r=n.left-(i.width+f.beforeElemSide-n.width)/2;u=r<0?f.minOffset:r;t&&(t.style.marginLeft=n.left-u+(n.width-f.beforeElemSide)/2+"px",t.style.marginRight="auto");f.tooltip.style.left=u+"px";return};this.isInsideTooltip=function(n){for(var t=n;t;){if(t===f.tooltip||t===f.anchor)return!0;t=t.parentElement}return!1};this.showTooltip=function(){f.container.appendChild(f.tooltip);f.setTooltipPosition();f.anchor.setAttribute("aria-expanded","true")};this.hideTooltip=function(){var n=f.tooltip.parentElement;n&&(n.removeChild(f.tooltip),f.anchor.setAttribute("aria-expanded","false"))};this.handleBodyEvent=function(n){f.isInsideTooltip(n.target)||f.hideTooltip()};this.tooltip=this.generateTooltip();this.anchor.setAttribute("aria-haspopup","true");this.anchor.setAttribute("aria-expanded","false");this.anchor.setAttribute("aria-controls",this.tooltip.id);this.anchor.setAttribute("data-popup-id",this.tooltip.id);n.addEventListener("click",this.showTooltip,!1);this.hideEvents.forEach(function(n){u.addEventListener(n,f.handleBodyEvent,!1)});u.addEventListener("resize",this.hideTooltip,!1)}return n.prototype.show=function(){this.showTooltip()},n.prototype.hide=function(){this.hideTooltip()},n.prototype.destroy=function(){var t=this,n;this.resizeWindow.removeEventListener("resize",this.hideTooltip,!1);this.hideEvents.forEach(function(n){t.resizeWindow.removeEventListener(n,t.handleBodyEvent,!1)});this.anchor.removeEventListener("click",this.showTooltip,!1);(n=this.tooltip.parentNode)===null||n===void 0?void 0:n.removeChild(this.tooltip)},n}();t.TooltipBase=r})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/tooltip/tooltipBase"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/tooltip/tooltipBase"));
(function(n,require,t){"use strict";var u=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),i,r;Object.defineProperty(t,"__esModule",{value:!0});t.Tooltip=void 0;i=require("./tooltipBase");r=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return u(t,n),t.prototype.setContent=function(n,t){n.innerText=t},t}(i.TooltipBase);t.Tooltip=r})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/tooltip/tooltip"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/tooltip/tooltip"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.createBookmark=void 0;var i=function(n,t){return('\n        <button class="page-bookmark '+t+'" title="'+n("Add page to bookmarks")+'" aria-label="'+n("Add page to bookmarks")+'">\n            <svg class="page-bookmark__inactive" focusable="false"><use xlink:href="#geo-bookmark"><\/use><\/svg>\n            <svg class="page-bookmark__active" focusable="false"><use xlink:href="#geo-bookmark-fill"><\/use><\/svg>\n        <\/button>\n    ').trim()};t.createBookmark=i})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/bookmark/bookmark_html"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/bookmark/bookmark_html"));
(function(n,require,t){"use strict";var r=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});t.PageBookmark=void 0;var i=require("../../../../vanillaExtension/vanilla"),u=require("../../../eventHandler"),f=require("../tooltip/tooltip"),e=require("./bookmark_html"),o=function(n){function t(t,r,u,f,o,s){s===void 0&&(s="");var h=n.call(this)||this;return h.pageName=r,h.translate=u,h.tooltipParent=f,h.resizeSource=o,h.isActive=!1,h.activeModifier="page-bookmark--active",h.disabledModifier="page-bookmark--disabled",h.bookmarksLimitText=u("You can bookmark a maximum of four pages. Please remove a bookmarked page to add a new one."),h.bookmark=i.textToHTML(e.createBookmark(u,s))[0],t.appendChild(h.bookmark),h.render(),h.bookmark.addEventListener("click",function(){h.bookmark.blur();h.toggleBookmark()},!1),h.bookmark.addEventListener("keypress",function(n){n.preventDefault();h.toggleBookmark()},!1),h}return r(t,n),t.prototype.getBookmarkLabel=function(){return this.disabled?this.bookmarksLimitText:this.translate(this.active?"Remove page from bookmarks":"Add page to bookmarks")},t.prototype.render=function(){this.bookmark.classList.toggle(this.activeModifier,this.active);var n=this.getBookmarkLabel();this.bookmark.title=n;this.bookmark.setAttribute("aria-label",n)},t.prototype.toggleBookmark=function(){if(this.disabled){this.tooltip===undefined&&(this.tooltip=new f.Tooltip(this.bookmark,this.tooltipParent,this.bookmarksLimitText,this.resizeSource));this.tooltip.show();return}this.isActive=!this.isActive;this.render();this.fire("change",{active:this.isActive})},Object.defineProperty(t.prototype,"active",{get:function(){return this.isActive},set:function(n){this.isActive=n;this.render()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return i.hasClass(this.bookmark,this.disabledModifier)},set:function(n){if(i.toggleClasses(this.bookmark,this.disabledModifier,n),this.bookmark.setAttribute("aria-invalid",n.toString()),n){this.active=!1;return}this.render();this.tooltip&&(this.tooltip.destroy(),this.tooltip=undefined)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"page",{get:function(){return this.pageName},enumerable:!1,configurable:!0}),t}(u.SimpleEventHandler);t.PageBookmark=o})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/bookmark/bookmark"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/bookmark/bookmark"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PageBookmarksStore=void 0;var i=require("../bookmark/bookmark"),r=function(){function n(n,t,i,r){this.contentElement=n;this.body=t;this.resizeSource=i;this.translate=r;this.pagesBookmark={}}return n.prototype.searchForParent=function(n){var t=n.querySelector("[data-bookmark]");return t?t:n.getElementsByClassName("geo-page-header__page-name")[0]||undefined},n.prototype.getBookmark=function(n){if(!this.pagesBookmark.hasOwnProperty(n)){var t=this.searchForParent(this.contentElement),r=t?new i.PageBookmark(t,n,this.translate,this.body,this.resizeSource,"geo-page-header__bookmark"):undefined;this.pagesBookmark[n]=r}return this.pagesBookmark[n]},n}();t.PageBookmarksStore=r})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/bookmarkSet/bookmarksStore"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/bookmarkSet/bookmarksStore"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getDefaultBookmarks=void 0;var i=["map","tripsHistory","devices","dashboard"],r=function(n,t){var r=t.filter(function(t){return n(t.link)}).map(function(n){return n.link}).filter(function(n,t,i){return i.indexOf(n)===t}).slice(0,4).reverse();return i.map(function(t){return n(t)?t:r.pop()||""}).filter(function(n){return n})};t.getDefaultBookmarks=r})(geotab,geotab.commonjs.generateRequire("geotab/constants/defaultBookmarks"),geotab.commonjs.generateExport("geotab/constants/defaultBookmarks"));
(function(n,require,t){"use strict";var i,r,u;Object.defineProperty(t,"__esModule",{value:!0});t.createEmptyBookmarkView=t.toBookmarkView=t.createBookmarkView=void 0;i=function(n,t,i,r,u){return{title:n,description:t,icon:i,link:r,page:u}};t.createBookmarkView=i;r=function(n,i,r){var u=i[n],f;return u?(f=r(u.title),t.createBookmarkView(f,r(u.description||u.title),u.icon||"",u.link,n)):t.createEmptyBookmarkView()};t.toBookmarkView=r;u=function(){return t.createBookmarkView("","","","","")};t.createEmptyBookmarkView=u})(geotab,geotab.commonjs.generateRequire("geotab/services/pageService/pageBookmarkService/bookmark"),geotab.commonjs.generateExport("geotab/services/pageService/pageBookmarkService/bookmark"));
(function(n,require,t){"use strict";var s=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),i=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))},o;Object.defineProperty(t,"__esModule",{value:!0});t.PageBookmarkService=t.BOOKMARK_SERVICE=void 0;var h=require("../../../checkmate/eventHandler"),f=require("../../../checkmate/ui/modules/bookmarkChoice/askChoice"),e=require("../../../checkmate/ui/modules/bookmarkChoice/bookmarkDialog/bookmarkDialog"),c=require("../../../checkmate/ui/modules/bookmarkSet/bookmarksStore"),r=require("../../../checkmate/ui/modules/mainMenu/mainMenuSearchPages"),l=require("../../../checkmate/ui/modules/mainMenu/mainMenuTree"),a=require("../../../constants/defaultBookmarks"),v=require("../../../utils"),y=require("../pageServiceRunner"),u=require("./bookmark");t.BOOKMARK_SERVICE="bookmark-service";o=function(n){function o(u,o,s,h,y,p,w,b,k,d){var g=n.call(this)||this,nt,tt,it,rt;return g.translateSentences=o,g.store=s,g.getCurrentUser=h,g.hasAccessToPage=y,g.mobileListener=d,g.bookmarks=[],g.currentPage="",g.name=t.BOOKMARK_SERVICE,g.translator=v.translationsAggregator({translateKey:u}),g.translate=g.translator.translate,nt=l.cloneMenu().hash,tt=r.collectAllSearchPages(nt),g.defaultBookmarks=a.getDefaultBookmarks(y,tt),g.bookmarksStore=new c.PageBookmarksStore(w,b,k,g.translate),g.desktopAskChoice=new f.EchoChioce,g.bookmarkDialog=new e.BookmarkDialog(b,u,g.defaultBookmarks),d.attach("change",function(n){n.isMobilePreview||g.bookmarkDialog.close();var t=g.bookmarksStore.getBookmark(g.currentPage);t&&(t.disabled=g.getAskChioce().isDisabled(g.bookmarks,g.isBookmarkActive(t.page),t.page))}),it=i(i([],tt,!0),[{title:"Geotab Support Tickets",link:"supportTickets",icon:r.getMainMenuItemIcon(nt,"support")},{title:"Open a Geotab Support Ticket",link:"supportTicket",icon:r.getMainMenuItemIcon(nt,"support")},{title:"Geotab Training Tickets",link:"trainingTickets",icon:r.getMainMenuItemIcon(nt,"support")},{title:"Open a Geotab Training Ticket",link:"trainingTicket",icon:r.getMainMenuItemIcon(nt,"support")}],!1),g.availablePages=it.reduce(function(n,t){return n[t.link]=t,n},{}),g.translateSentences(it.map(function(n){return n.title})).then(function(n){g.translator.add(n.dict);g.updateBookmarks(g.bookmarks)},function(){}),rt=g.getCurrentUser(),g.updateBookmarksFromUser(rt),p.attach("currentUserUpdate",function(n){g.updateBookmarksFromUser(n)}),g}return s(o,n),o.prototype.toBookmarksViews=function(n){var t=this;return n.filter(function(n){return!n||t.availablePages[n]}).map(function(n){return n?u.toBookmarkView(n,t.availablePages,t.translate):u.createEmptyBookmarkView()})},o.prototype.fillBookmarks=function(n){for(var i=[],t=0;t<f.PAGE_BOOKMARKS_LIMIT;++t)i.push(n.length>t?n[t]:"");return i},o.prototype.updateBookmarks=function(n){var i=this,t;this.bookmarks=n;t=this.toBookmarksViews(n);this.bookmarkDialog.bookmarks=this.defaultBookmarks.map(function(n,r){return t[r]&&t[r].link?t[r]:u.toBookmarkView(n,i.availablePages,i.translate)});this.fire("change",{bookmarks:t})},o.prototype.updateUserBookmarks=function(n){this.store.users.setItem({id:this.getCurrentUser().id,bookmarks:n})},o.prototype.switchBookmarks=function(n,t,r){var f=this,u,e;return n?t?(e=this.defaultBookmarks.map(function(n,t){return f.bookmarks[t]?f.bookmarks[t]:n}),this.bookmarks.map(function(n,i){return e[i]!==t?n:r})):(u=this.bookmarks.indexOf(""),u<0)?this.bookmarks:i(i(i([],this.bookmarks.slice(0,u),!0),[r],!1),this.bookmarks.slice(u+1),!0):this.bookmarks.map(function(n){return n!==t?n:r})},o.prototype.isBookmarkActive=function(n){return this.bookmarks.indexOf(n)>=0},o.prototype.getAskChioce=function(){return this.mobileListener.isMobilePreview?this.bookmarkDialog:this.desktopAskChoice},o.prototype.toggleBookmark=function(n,t,i){var r=this.switchBookmarks(n,t,i);this.updateBookmarks(r);this.updateUserBookmarks(r)},o.prototype.updateBookmarksFromUser=function(n){var t=this,i=this.fillBookmarks((n.bookmarks||[]).map(function(n){return t.hasAccessToPage(n)?n:""}));this.updateBookmarks(i)},o.prototype.focus=function(n){var i=this,t;this.availablePages.hasOwnProperty(n)&&(this.currentPage=n,t=this.bookmarksStore.getBookmark(n),t!==undefined&&(t.active=this.isBookmarkActive(n),t.disabled=this.getAskChioce().isDisabled(this.bookmarks,this.isBookmarkActive(n),n),t.detach("change"),t.attach("change",function(r){if(!r.active){i.toggleBookmark(!1,n,"");return}var u=i.getAskChioce();u.ask(n,r.active).then(function(n){i.toggleBookmark(!0,n.prev,n.next)},function(){t&&(t.active=!r.active)})})))},o.prototype.blur=function(){this.currentPage=""},Object.defineProperty(o.prototype,"pages",{get:function(){return[y.ALL_PAGES,"-device","-engineDiagnostic","-route","-group","-clearance","-deviceStatus"]},enumerable:!1,configurable:!0}),o.translations=function(){return e.BookmarkDialog.translations()},o.requiredServices=["translate","translateSentences","store","getCurrentUser","hasAccessToPage","currentUserWatcher","contentElement","body","window","mobileListener"],o}(h.SimpleEventHandler);t.PageBookmarkService=o})(geotab,geotab.commonjs.generateRequire("geotab/services/pageService/pageBookmarkService/pageBookmarkService"),geotab.commonjs.generateExport("geotab/services/pageService/pageBookmarkService/pageBookmarkService"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Feedback=void 0;var i=require("../../vanillaExtension/vanilla"),r=require("../ui/help/pageTooltipHelp"),u=function(n){return'<a class="geo-button geo-caption geo-feedback" style="display: none" target="_blank">\n                <svg class="geo-icon geo-icon--bigger geo-caption__pre-content"><use xlink:href="#geo-mail"><\/use><\/svg>\n                <span class="geo-caption__content">'+n+"<\/span>\n            <\/a>"},f=function(){function n(n,t,r){this.feedbackHtml=i.textToHTML(this.getFeedbackHtml(t))[0];this.parent=n;this.parent.appendChild(this.feedbackHtml);this.lang=r}return n.prototype.getFeedbackHtml=function(n){return u(n)},n.prototype.show=function(n){i.show(this.feedbackHtml);this.feedbackHtml.href=r.createLink(n,this.lang)},n.prototype.hide=function(){i.hide(this.feedbackHtml)},n}();t.Feedback=f})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/feedback/feedback"),geotab.commonjs.generateExport("geotab/checkmate/feedback/feedback"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.FeedbackService=void 0;var i=require("../../../checkmate/feedback/feedback"),r=function(){function n(n,t,r){this.name="feedback-service";var u=t();this.feedback=new i.Feedback(r,n("ProblemFeedback"),u.language||"en")}return n.prototype.focus=function(n){this.feedback.show(n)},n.prototype.blur=function(){this.feedback.hide()},Object.defineProperty(n.prototype,"pages",{get:function(){return["dashboard","helpguide","contact"]},enumerable:!1,configurable:!0}),n.requiredServices=["translate","getCurrentUser","body"],n}();t.FeedbackService=r})(geotab,geotab.commonjs.generateRequire("geotab/services/pageService/feedbackService/feedbackService"),geotab.commonjs.generateExport("geotab/services/pageService/feedbackService/feedbackService"));
(function(n,require,t){"use strict";function e(n){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(n||"")}function o(n){return n?n.name+" "+n.firstName+" "+n.lastName:""}function f(n){return!n||n==="UnknownDriverId"||n.id==="UnknownDriverId"}var i,r,u;Object.defineProperty(t,"__esModule",{value:!0});t.isUnknownDriver=t.getUserNames=t.isValidEmail=t.getDriverDescription=t.getUserName=t.getUserDescription=void 0;i=function(n){var r=n.firstName,t=n.lastName,i=n.name;return r||t?(r||"")+(t?" "+t:"")+(i?" ("+i+")":""):i};t.getUserDescription=i;r=function(n){return n.firstName||n.lastName?(n.firstName||"")+(n.lastName?" "+n.lastName:""):n.name};t.getUserName=r;u=function(n,i){return f(n)?i("UnknownDriverId"):t.getUserDescription(n)};t.getDriverDescription=u;t.isValidEmail=e;t.getUserNames=o;t.isUnknownDriver=f})(geotab,geotab.commonjs.generateRequire("geotab/utils/userUtils"),geotab.commonjs.generateExport("geotab/utils/userUtils"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.createliveChatEmailWarning=void 0;var i=function(n){return('\n        <div class="email-warning">\n            <div class="email-warning__text">'+n("In order to use Live Chat, your username must be a valid email address.")+'<\/div>\n            <div class="email-warning__action-text">'+n("Go to the User Edit page to change your email to a valid email address.")+"<\/div>\n        <\/div>\n    ").trim()};t.createliveChatEmailWarning=i})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/liveChat/liveChatEmailWarning_html"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/liveChat/liveChatEmailWarning_html"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.LiveChatEmailWarning=void 0;var u=require("../../../../utils/userUtils"),f=require("../../../../vanillaExtension/vanilla"),e=require("../../../../vanillaExtension/vanillaDialog"),r=require("../../../deferred"),i=require("../../../exceptions/commonExceptions"),o=require("./liveChatEmailWarning_html"),s=function(){function n(n,t,i){this.translate=n;this.createLinkToPage=t;this.currentUserId=i}return n.prototype.createDialog=function(){var t=this,n;return this.dialog?this.dialog:(n=e.VanillaDialog(f.textToHTML(o.createliveChatEmailWarning(this.translate))[0],{title:this.translate("Email Required"),isModal:!0,addCloseButton:!1,buttons:[{id:"liveChat_editUserId",name:this.translate("Go to User Edit page"),className:"geo-button geo-button--action",link:this.createLinkToPage("user",{id:this.currentUserId}),click:function(){t.currentAsk&&t.currentAsk.reject(new i.AbortException);n.close()}},{id:"liveChat_cancelUserEgitId",name:this.translate("Cancel"),click:function(){t.currentAsk&&t.currentAsk.reject(new i.AbortException);n.close()}}]}),this.dialog=n,n)},n.prototype.ask=function(n){if(this.currentAsk&&this.currentAsk.reject(new i.AbortException),u.isValidEmail(n.name))return r.resolve(n);var t=this.createDialog(),f=t.buttons[0].button;return f.href=this.createLinkToPage("user",{id:this.currentUserId}),t.show(),this.currentAsk=r.Deferred(),this.currentAsk.promise()},n.translations=function(){return["Email Required","Go to User Edit page","Cancel","In order to use Live Chat, your username must be a valid email address.","Go to the User Edit page to change your email to a valid email address."]},n}();t.LiveChatEmailWarning=s})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/liveChat/liveChatEmailWarning"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/liveChat/liveChatEmailWarning"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.codes=t.otherCode=void 0;t.otherCode=["Other","",1,""];t.codes=[["Canada","1",5,"ca","XXX-XXX-XXXX"],["United States","1",5,"us","(XXX) XXX-XXXX"],["Albania","355",1,"al","XXX XXX XXXX"],["Algeria","213",1,"dz","XXXX XX XX XX"],["Andorra","376",1,"ad","XXX XXX"],["Angola","244",1,"ao","XXX XXX XXX"],["Argentina","54",1,"ar","XXX XX-XXXX-XXXX"],["Armenia","374",1,"am","XXX XXXXXX"],["Australia","61",1,"au","(XXX) XXX-XXXX"],["Austria","43",1,"at","XXXX XXXXXXX"],["Azerbaijan","994",1,"az","XXX XXX XX XX"],["Bahamas","1-242",1,"bs","(XXX) XXX-XXXX"],["Bahrain","973",1,"bh","XXXX XXXX"],["Bangladesh","880",1,"bd","XXXXX-XXXXXX"],["Belarus","375",1,"by","(XX) XXX XX XX"],["Belgium","32",1,"be","XXXX XX XX XX"],["Belize","501",1,"bz","XXX-XXXX"],["Bhutan","975",1,"bt","XX XX XX XX"],["Bolivia","591",1,"bo","X"],["Bosnia and Herzegovina","387",1,"ba","XXX XXX XXX"],["Botswana","267",1,"bw","XX XXX XXX"],["Brazil","55",1,"br","(XX) XXXX-XXXX"],["Bulgaria","359",1,"bg","XXX XXX XXX"],["Burkina Faso","226",1,"bf","XX XX XX XX"],["Cambodia","855",1,"kh","XXX XXX XXX"],["Cameroon","237",1,"cm","X XX XX XX XX"],["Central African Republic","236",1,"cf","XX XX XX XX"],["Chad","235",1,"td","XX XX XX XX"],["Chile","56",1,"cl","(X) XXXX XXXX"],["China","86",1,"cn","XX XXXX XXXX"],["Colombia","57",1,"co","XXX XXXXXXX"],["Costa Rica","506",1,"cr","XXXX XXXX"],["Croatia","385",1,"hr","XXX XXX XXXX"],["Cuba","53",1,"cu","XX XXXXXXX"],["Cyprus","357",1,"cy","XX XXXXXX"],["Czech Republic","420",1,"cz","XXX XXX XXX"],["Democratic Republic of the Congo","243",1,"cd","X"],["Denmark","45",1,"dk","XX XX XX XX"],["Dominican Republic","1",1,"do","(XXX) XXX-XXXX"],["Ecuador","593",1,"ec","XXX XXX XXXX"],["Egypt","20",1,"eg","XXXX XXX XXXX"],["El Salvador","503",1,"sv","XXXX XXXX"],["Estonia","372",1,"ee","XXXX XXXX"],["Ethiopia","251",1,"et","XXX XXX XXXX"],["Finland","358",1,"fi","XXX XXXXXXX"],["France","33",1,"fr","XX XX XX XX XX"],["Gabon","241",1,"ga","XX XX XX XX"],["Georgia","995",1,"ge","XXX XX XX XX"],["Germany","49",1,"de","XX XXXX XXXX"],["Ghana","233",1,"gh","XXX XXX XXXX"],["Greece","30",1,"gr","XXX XXX XXXX"],["Guatemala","502",1,"gt","XXXX XXXX"],["Guinea","224",1,"gn","XXX XX XX XX"],["Guinea-Bissau","245",1,"gw","XXX XXX XXX"],["Guyana","592",1,"gy","XXX XXXX"],["Honduras","504",1,"hn","XXXX-XXXX"],["Hong Kong","852",1,"hk","XXXX XXXX"],["Hungary","36",1,"hu","(XX) XXX XXXX"],["Iceland","354",1,"is","XXX XXXX"],["India","91",1,"in","XXXXXX XXXXX"],["Indonesia","62",1,"id","XXXX-XXX-XXX"],["Ireland","353",1,"ie","XXX XXX XXXX"],["Israel","972",1,"il","XXX-XXX-XXXX"],["Italy","39",1,"it","XXX XXX XXXX"],["Ivory Coast","225",1,"ci","X"],["Jamaica","1",1,"jm","(XXX) XXX-XXXX"],["Japan","81",1,"jp","XXX-XXXX-XXXX"],["Jordan","962",1,"jo","XX XXXX XXXX"],["Kazakhstan","7",1,"kz","X (XXX) XXX XXXX"],["Kenya","254",1,"ke","XXXX XXXXXX"],["Kosovo","383",1,"xk","XXX XXX XXX"],["Laos","856",1,"la","XXX XX XXX XXX"],["Latvia","371",1,"lv","XX XXX XXX"],["Lebanon","961",1,"lb","XX XXX XXX"],["Lesotho","266",1,"ls","XXXX XXXX"],["Liberia","231",1,"lr","XXX XXX XXXX"],["Libya","218",1,"ly","XXX-XXXXXXX"],["Liechtenstein","423",1,"li","XXX XXX XXX"],["Lithuania","370",1,"lt","X"],["Luxembourg","352",1,"lu","XXX XXX XXX"],["Macedonia","389",1,"mk","XXX XXX XXX"],["Madagascar","261",1,"mg","XXX XX XXX XX"],["Malawi","265",1,"mw","XXXX XX XX XX"],["Malaysia","60",1,"my","XXX-XXX XXXX"],["Mali","223",1,"ml","XX XX XX XX"],["Malta","356",1,"mt","XXXX XXXX"],["Mauritania","222",1,"mr","XX XX XX XX"],["Mexico","52",1,"mx","XX XXXX XXXX"],["Moldova","373",1,"md","XXXX XX XXX"],["Monaco","377",1,"mc","XX XX XX XX XX"],["Mongolia","976",1,"mn","XXXX XXXX"],["Montenegro","382",1,"me","XXX XXX XXX"],["Morocco","212",1,"ma","XXXX-XXXXXX"],["Mozambique","258",1,"mz","XX XXX XXXX"],["Myanmar","95",1,"mm","XX XXX XXXX"],["Namibia","264",1,"na","XXX XXX XXXX"],["Nepal","977",1,"np","XXX-XXXXX"],["Netherlands","31",1,"nl","XX XXXXXXXX"],["New Zealand","64",1,"nz","XXX XXX XXXX"],["Nicaragua","505",1,"ni","XXXX XXXX"],["Niger","227",1,"ne","XX XX XX XX"],["Nigeria","234",1,"ng","XXXX XXX XXXX"],["Norway","47",1,"no","XXX XX XXX"],["Oman","968",1,"om","XXXX XXXX"],["Panama","507",1,"pa","XXXX-XXXX"],["Papua New Guinea","675",1,"pg","XXXX XXXX"],["Paraguay","595",1,"py","XXXX XXXX"],["Peru","51",1,"pe","XXX XXX XXX"],["Philippines","63",1,"ph","XXXX XXX XXXX"],["Poland","48",1,"pl","XXX-XXX-XXX"],["Portugal","351",1,"pt","XXX XXX XXX"],["Puerto Rico","1",1,"pr","(XXX) XXX-XXXX"],["Qatar","974",1,"qa","XXXX XXXX"],["Republic of the Congo","242",1,"cg","X"],["Romania","40",1,"ro","XXXX XXX XXX"],["Russia","7",1,"ru","XXX XXX-XX-XX"],["Rwanda","250",1,"rw","XXXX XXX XXX"],["San Marino","378",1,"sm","XX XX XX XX"],["Saudi Arabia","966",1,"sa","XXX XXX XXXX"],["Senegal","221",1,"sn","XX XXX XX XX"],["Serbia","381",1,"rs","XXX XXXXXX"],["Sierra Leone","232",1,"sl","(XXX) XXXXXX"],["Singapore","65",1,"sg","XXXX XXXX"],["Slovakia","421",1,"sk","XXXX XXX XXX"],["Slovenia","386",1,"si","XXX XXX XXX"],["South Africa","27",1,"za","XXX XXX XXXX"],["South Korea","82",1,"kr","XXX-XXXX-XXXX"],["South Sudan","211",1,"ss","XXXX XXX XXX"],["Spain","34",1,"es","XXX XX XX XX"],["Sri Lanka","94",1,"lk","XXX XXX XXXX"],["Sudan","249",1,"sd","XXX XXX XXXX"],["Suriname","597",1,"sr","XXX-XXXX"],["Swaziland","268",1,"sz","XXX XXX XX XX"],["Sweden","46",1,"se","XXX-XXX XX XX"],["Switzerland","41",1,"ch","XXXX XXXX"],["Taiwan","886",1,"tw","XXXX XXX XXX"],["Tajikistan","992",1,"tj","XXX XX XXXX"],["Tanzania","255",1,"tz","XXXX XXX XXX"],["Thailand","66",1,"th","XXX XXX XXXX"],["Tunisia","216",1,"tn","XX XXX XXX"],["Turkey","90",1,"tr","XXXX XXX XX XX"],["Turkmenistan","993",1,"tm","X"],["Uganda","256",1,"ug","XXXX XXXXXX"],["Ukraine","380",1,"ua","XXX XXX XXXX"],["United Arab Emirates","971",1,"ae","XXX XXX XXXX"],["United Kingdom","44",1,"gb","XXXXX XXXXXX"],["Uruguay","598",1,"uy","XXX XXX XXX"],["Uzbekistan","998",1,"uz","X"],["Venezuela","58",1,"ve","XXXX-XXXXXX"],["Vietnam","84",1,"vn","XXX XXX XX XX"],["Zambia","260",1,"zm","XXX XXXXXXX"],["Zimbabwe","263",1,"zw","XXX XXX XXXX"]]})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/phoneNumberEditor/countryCodes"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/phoneNumberEditor/countryCodes"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.template=void 0;t.template='<div class="phone-number noTranslate">\n    <div class="phone-number__phone">\n        <div class="phone-number__code"><\/div>\n        <input id="phone-number-main" class="phone-number__number geotabFormEditField geo-text-input" type="text">\n    <\/div>\n    <div class="phone-number__ext-part">\n        <label for="phone-number-ext" class="phone-number__ext-label"><\/label>\n        <input id="phone-number-ext" class="phone-number__ext geotabFormEditField geo-text-input" type="text">\n    <\/div>\n<\/div>'})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/phoneNumberEditor/phoneNumberEditor_html"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/phoneNumberEditor/phoneNumberEditor_html"));
(function(n,require,t){"use strict";var o=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),r=this&&this.__assign||function(){return r=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});t.CustomSelect=void 0;var s=require("../../../eventHandler"),u=require("../../../../vanillaExtension/vanilla"),i=require("../../../../utils"),h=i.onKeyPressed([13]),c=i.onKeyPressed([27,9]),f=i.onKeyPressed([38]),e=i.onKeyPressed([40]),l='\n    <button aria-haspopup="listbox" class="custom-select__selection"><\/button>\n    <ul tabindex="-1" role="listbox" id="custom-select-listbox" class="custom-select__list"><\/ul>\n'.trim(),a=function(n){function t(t,i,o,s){var a=n.call(this)||this,v;return a.parent=t,a.global=i,a.renderItem=o,a.renderSelectedItem=s,a.items=[],a.isShown=!1,a.scrolling=!1,a.shownModifier="custom-select__list--shown",a.selectedModifier="custom-select__option--selected",a.clickOutside=function(n){for(var t=n.target;t&&t!==a.parent;)t=t.parentElement;t||a.toggleList(!1)},a.pickItem=function(n){a.selection=a.searchSelected(n)||a.selection;a.value=a.selection.value;a.toggleList(!1);a.fire("change",r({},a.selection))},a.moveUp=e(a.moveNext(1)),a.moveDown=f(a.moveNext(-1)),a.scrollDown=f(a.scrollNext(-1)),a.scrollUp=e(a.scrollNext(1)),a.enterFn=h(function(){var n=a.selectList.querySelector("."+a.selectedModifier);n&&a.pickItem(n)}),a.escapeFn=c(function(){a.toggleList(!1);a.selectElt.focus()}),t.classList.add("custom-select"),v=u.textToHTML(l),v.forEach(function(n){t.appendChild(n)}),a.selectList=v[1],a.selectList.addEventListener("click",function(n){a.pickItem(n.target)},!1),a.selectElt=v[0],a.selectElt.addEventListener("click",function(){a.toggleList(!a.selectList.classList.contains(a.shownModifier))},!1),a.selectElt.addEventListener("keyup",a.escapeFn,!1),a}return o(t,n),t.prototype.renderOption=function(n,t,r){var u=t&&t.section!==n.section?this.renderSeparator():"",f=i.generateId();return u+'<li id="'+f+'" data-id="'+i.htmlEscape(n.value)+'" class="custom-select__option" role="option" aria-label="'+i.htmlEscape(n.label)+'">'+r+"<\/li>"},t.prototype.renderSeparator=function(){return'<li class="custom-select__separator" role="separator" aria-disabled="true"><\/li>'},t.prototype.searchSelected=function(n){for(var t=n,i;t&&t!==this.selectList&&!t.hasAttribute("data-id");)t=t.parentElement;return t.hasAttribute("data-id")?(i=t.getAttribute("data-id"),this.items.filter(function(n){return n.value===i})[0]):undefined},t.prototype.toggleList=function(n){this.isShown!==n&&(this.isShown=n,u.toggleClasses(this.selectList,this.shownModifier,n),this.selectList.setAttribute("aria-expanded",n.toString()),n?(this.selectElt.blur(),this.selectList.focus(),this.selectList.addEventListener("keydown",this.scrollUp,!1),this.selectList.addEventListener("keydown",this.scrollDown,!1),this.selectList.addEventListener("keyup",this.moveUp,!1),this.selectList.addEventListener("keyup",this.moveDown,!1),this.selectList.addEventListener("keypress",this.enterFn,!1),this.selectList.addEventListener("keyup",this.escapeFn,!1),this.global.addEventListener("click",this.clickOutside,!1),this.nextSelection=this.selection,this.select(this.selection)):(this.selectElt.focus(),this.selectList.removeEventListener("keydown",this.scrollUp,!1),this.selectList.removeEventListener("keydown",this.scrollDown,!1),this.selectList.removeEventListener("keyup",this.moveUp,!1),this.selectList.removeEventListener("keyup",this.moveDown,!1),this.selectList.removeEventListener("keypress",this.enterFn,!1),this.selectList.removeEventListener("keyup",this.escapeFn,!1),this.global.removeEventListener("click",this.clickOutside,!1)))},t.prototype.indexBySelection=function(n){for(var t=0;t<this.items.length;t++)if(n.value===this.items[t].value)return t;return-1},t.prototype.getNextIndex=function(n,t,i){var r=n+i;return r<0?t-1:r>=t?0:r},t.prototype.select=function(n){var i=this.selectList.querySelector("."+this.selectedModifier),t,r,u,e,f;i&&(i.classList.remove(this.selectedModifier),i.removeAttribute("area-selected"));t=this.selectList.querySelector('[data-id="'+n.value+'"]');t&&(t.classList.add(this.selectedModifier),t.setAttribute("area-selected","true"),this.selectList.setAttribute("aria-activedescendant",t.id),r=Math.round(this.selectList.offsetHeight/2),u=Math.max(t.offsetTop-t.offsetHeight,0),u<this.selectList.scrollTop&&(this.selectList.scrollTop=u-r),e=this.selectList.scrollTop,f=t.offsetTop+t.offsetHeight,f>e&&(this.selectList.scrollTop=f-t.offsetHeight-r))},t.prototype.moveSelection=function(n){this.nextSelection=this.nextSelection||this.selection;var t=this.getNextIndex(this.indexBySelection(this.nextSelection),this.items.length,n);this.nextSelection=this.items[t];this.select(this.nextSelection)},t.prototype.moveNext=function(n){var t=this;return function(i){i.preventDefault();t.scrolling=!1;clearTimeout(t.scrollingTimer);t.scrollingTimer=undefined;t.moveSelection(n)}},t.prototype.scrollNext=function(n){var t=this;return function(i){if(i.preventDefault(),t.scrolling){t.moveSelection(n);return}t.scrollingTimer||(t.scrollingTimer=setTimeout(function(){t.scrolling=!0;t.moveSelection(n)},400))}},t.prototype.updateItem=function(n){var r=this,t,i;this.items=n;this.selectList.innerHTML=this.items.map(function(n,t,i){return r.renderOption(n,i[t-1],r.renderItem(n.data))}).join("");i=(t=this.selection)===null||t===void 0?void 0:t.value;(!i||this.items.every(function(n){return n.value!==i}))&&(this.value=this.items[0].value)},t.prototype.focus=function(){this.selectElt.focus()},Object.defineProperty(t.prototype,"value",{get:function(){return this.selection.value},set:function(n){var t=this.items.filter(function(t){return t.value===n});t.length>0&&(this.selection=t[0],this.select(this.selection),this.selectElt.innerHTML=this.renderSelectedItem(this.selection.data))},enumerable:!1,configurable:!0}),t}(s.SimpleEventHandler);t.CustomSelect=a})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/customSelect/customSelect"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/customSelect/customSelect"));
(function(n,require,t){"use strict";var i,r,u,f,e;Object.defineProperty(t,"__esModule",{value:!0});t.parseCountryCode=t.formatInternetionalPhone=t.formatCountryPhone=void 0;i=require("./countryCodes");r=function(n,t){for(var u="",r=n.split("").reverse(),i=0;i<t.length&&r.length;i++)u+=t[i]==="X"?r.pop():t[i];return u+r.reverse().join("")};t.formatCountryPhone=r;u=function(n,i){if(!n)return"";if(i[1]==="")return n;var r=n.replace("+"+i[1],"").trim();return"+"+i[1]+" "+t.formatCountryPhone(r,i[4]||"")};t.formatInternetionalPhone=u;f=function(n,t){if(n){var u=n.trim().replace("+",""),r=i.codes.filter(function(n){var i=n[0],t=n[1];return t===u}),f=r.filter(function(n){return n[3]===t});return f[0]||r[0]}return undefined};e=function(n,t){var u=(n||"").trim(),e=i.codes[0][1],r;return u.length!==0&&(r=u.split(" "),e=r.length>1?r[0]:""),f(e,t)||i.otherCode};t.parseCountryCode=e})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/phoneNumberEditor/phoneFormatter"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/phoneNumberEditor/phoneFormatter"));
(function(n,require,t){"use strict";var e,o;Object.defineProperty(t,"__esModule",{value:!0});t.EmptyPhoneNumberEditor=t.createEmptyPhoneInfo=t.PhoneNumberEditor=void 0;var r=require("../../../../vanillaExtension/vanilla"),i=require("./countryCodes"),s=require("./phoneNumberEditor_html"),h=require("../customSelect/customSelect"),u=require("../../../../utils"),f=require("./phoneFormatter"),c=/\D/gi,l=/[^\d#\*]/g,a=/[^\d\(\)-\+\s]/g,v=["Ext."],y=function(){function n(n,t,f,e){var o=this,c,l;this.content=r.textToHTML(s.template)[0];this.code=i.codes[0];this.phoneElt=this.content.querySelector(".phone-number__number");this.phoneElt.addEventListener("input",function(){o.setPhoneNumber(o.phoneElt.value,o.code)},!1);this.extElt=this.content.querySelector(".phone-number__ext");e&&(c=this.content.querySelector(".phone-number__ext-part"),r.hide(c));l=this.content.querySelector(".phone-number__ext-label");l.textContent=f("Ext.");this.codeSelect=new h.CustomSelect(this.content.querySelector(".phone-number__code"),t,function(n){return('\n                <div class="phone-number__code-option code-option">\n                    <div class="code-option__flag">\n                        <div class="country-flag country-flag__'+(n[3]||"other")+'"><\/div>\n                    <\/div>\n                    <span class="code-option__name">'+u.htmlEscape(f(n[0]))+'<\/span>\n                    <span class="code-option__code">'+((n[1]?"+":"")+u.htmlEscape(n[1]))+"<\/span>\n                <\/div>").trim()},function(n){return('\n                    <div class="phone-number__selected-code code-selection">\n                        <div class="code-selection__flag">\n                            <div class="country-flag country-flag__'+(n[3]||"other")+'"><\/div>\n                        <\/div>\n                        <div class="code-selection__arrows">\n                            <svg class="code-selection__icon code-selection__up" focusable="false"><use xlink:href="#geo-arrow-up"><\/use><\/svg>\n                            <svg class="code-selection__icon code-selection__down" focusable="false"><use xlink:href="#geo-arrow-down"><\/use><\/svg>\n                        <\/div>\n                    <\/div>').trim()});this.codeSelect.attach("change",function(n){var t=n.data;o.code=t;o.setPhoneNumber(o.phoneElt.value,o.code);o.phoneElt.focus()});this.codeSelect.updateItem(i.codes.concat([i.otherCode]).map(function(n){return{value:n[3],section:n[2].toString(),label:n[0]+": +"+n[1],data:n}}));n.appendChild(this.content)}return n.prototype.unformat=function(n,t){if(t[1])return n.replace(c,"");var i=n.split(" "),r=i[0],u=i.slice(1);return r+" "+u.join(" ").replace(a,"")},n.prototype.setPhoneNumber=function(n,t){var i=n,r;t[1]?i=this.unformat(n.replace("+"+t[1],"").trim(),t):(r=n,i=r[0]!=="+"?"+"+r:r);this.phoneElt.value=i?f.formatCountryPhone(i,t[4]||""):""},Object.defineProperty(n.prototype,"phone",{get:function(){var n=this.unformat(this.phoneElt.value,this.code).trim(),t=this.code[1]?"+"+this.code[1]:"";return{countryCode:this.code[3],phoneNumber:n?(t+" "+n).trim():"",extension:this.extElt.value.replace(l,"")}},set:function(n){var t=(n.phoneNumber||"").trim();this.code=f.parseCountryCode(t,n.countryCode||"");this.codeSelect.value=this.code[3];this.setPhoneNumber(t,this.code);this.extElt.value=n.extension||""},enumerable:!1,configurable:!0}),n.prototype.focus=function(){this.codeSelect.focus()},n.translations=function(){return i.codes.map(function(n){return n[0]}).concat(v).concat([i.otherCode[0]])},n}();t.PhoneNumberEditor=y;e=function(){return{countryCode:"",phoneNumber:"",extension:""}};t.createEmptyPhoneInfo=e;o=function(){function n(){}return Object.defineProperty(n.prototype,"phone",{get:function(){return t.createEmptyPhoneInfo()},set:function(){},enumerable:!1,configurable:!0}),n.prototype.focus=function(){},n}();t.EmptyPhoneNumberEditor=o})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/phoneNumberEditor/phoneNumberEditor"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/phoneNumberEditor/phoneNumberEditor"));
(function(n,require,t){"use strict";var i,u,f;Object.defineProperty(t,"__esModule",{value:!0});t.getPhoneErrors=t.translatePhoneErrors=t.validate=t.PhoneNumberErrors=void 0,function(n){n.Empty="Empty";n.InvalidSymbols="InvalidSymbols";n.Max20Symbols="Max200Symbols";n.Min7Digits="Min7Digits";n.MissingCountryCode="MissingCountryCode";n.WrongPhoneExtension="WrongPhoneExtension"}(i=t.PhoneNumberErrors||(t.PhoneNumberErrors={}));var e=/[^+-\d\s]/,r=function(n,t){return n+(isNaN(+t)?0:1)},o=function(n){var t=n.phoneNumber,u=t.split(" ")[1];return t.length===0?i.Empty:t.length>20?i.Max20Symbols:t.search(e)!==-1?i.InvalidSymbols:t[0]!=="+"||t.indexOf(" ")===-1?i.MissingCountryCode:u.split("").reduce(r,0)<7?i.Min7Digits:n.extension.length>5||n.extension.split("").reduce(r,0)<n.extension.length?i.WrongPhoneExtension:undefined};t.validate=o;u=function(n,t){switch(n){case i.Max20Symbols:return t("Phone numbers cannot exceed 20 characters.");case i.InvalidSymbols:return t("Phone numbers can only contain digits, spaces, and the characters + and -.");case i.Min7Digits:case i.Empty:return t("Phone numbers must have at least seven digits.");case i.MissingCountryCode:return t("Phone numbers must contain a country code that starts with a + character that is separated by a space from rest part of phone number. For example: +XXX XXXXXXXXX");case i.WrongPhoneExtension:return t("Phone number extensions cannot exceed five characters and must contain only digits.");default:return""}};t.translatePhoneErrors=u;f=function(){return["Phone numbers cannot exceed 20 characters.","Phone numbers must have at least seven digits.","Phone numbers can only contain digits, spaces, and the characters + and -.","Phone numbers must contain a country code that starts with a + character that is separated by a space from rest part of phone number. For example: +XXX XXXXXXXXX","Phone number extensions cannot exceed five characters and must contain only digits."]};t.getPhoneErrors=f})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/phoneNumberEditor/phoneNumberValidator"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/phoneNumberEditor/phoneNumberValidator"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.createliveChatPhoneWarning=void 0;var i=function(n){return('\n        <div class="phone-warning">\n            <div>'+n("You have not listed a phone number. Please provide a phone number that we may use to contact you during the support process if requested. Your phone number will be saved under the User Edit page.")+'<\/div>\n            <div class="phone-warning__phone">\n                <label class="phone-warning__phone-label">'+n("Phone number:")+'<\/label>\n                <div class="phone-warning__phone-input"><\/div>\n            <\/div>\n            <div class="alert alert--error phone-warning__phone-error"><\/div>\n        <\/div>\n    ').trim()};t.createliveChatPhoneWarning=i})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/liveChat/liveChatPhoneWarning_html"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/liveChat/liveChatPhoneWarning_html"));
(function(n,require,t){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i.apply(this,arguments)},r=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0});t.LiveChatPhoneWarning=void 0;var u=require("../../../../vanillaExtension/vanilla"),s=require("../../../../vanillaExtension/vanillaDialog"),e=require("../../../deferred"),h=require("../../../exceptions/commonExceptions"),o=require("../phoneNumberEditor/phoneNumberEditor"),f=require("../phoneNumberEditor/phoneNumberValidator"),c=require("./liveChatPhoneWarning_html"),l=function(){function n(n,t,i,r){this.translate=n;this.updateUser=t;this.currentUserId=i;this.eventTarget=r;this.invalidPhoneModifier="phone-warning--invalid"}return n.prototype.createDialog=function(){var n=this;if(this.dialog&&this.phoneNumber)return{dialog:this.dialog,phoneNumber:this.phoneNumber};var t=u.textToHTML(c.createliveChatPhoneWarning(this.translate))[0],h=t.getElementsByClassName("phone-warning__phone-input")[0],l=t.getElementsByClassName("phone-warning__phone-error")[0],e=new o.PhoneNumberEditor(h,this.eventTarget,this.translate),r=s.VanillaDialog(t,{title:this.translate("Phone Number (Optional)"),isModal:!0,addCloseButton:!1,buttons:[{id:"liveChat_updatePhoneId",className:"geo-button geo-button--action",name:this.translate("Save and proceed"),click:function(o,s){var h=e.phone,c=f.validate(h);if(u.toggleClasses(t,n.invalidPhoneModifier,c!==undefined),c){l.textContent=f.translatePhoneErrors(c,n.translate);return}n.updateUser({id:n.currentUserId,phoneNumber:h.phoneNumber,phoneNumberExtension:h.extension,countryCode:h.countryCode});n.currentAsk&&n.currentAsk.resolve(i(i({},s),h));r.close()}},{id:"liveChat_proceedWithoutUpdateId",name:this.translate("Proceed without phone number"),click:function(t,u){n.currentAsk&&n.currentAsk.resolve(i({},u));r.close()}}]});return this.dialog=r,this.phoneNumber=e,{dialog:r,phoneNumber:e}},n.prototype.ask=function(n){if(this.currentAsk&&this.currentAsk.reject(new h.AbortException),(n.phoneNumber||"").trim().length!==0)return e.resolve(n);var t=this.createDialog(),i=t.dialog,r=t.phoneNumber;return r.phone={countryCode:"",extension:"",phoneNumber:""},u.toggleClasses(i.container,this.invalidPhoneModifier,!1),i.show(n),this.currentAsk=e.Deferred(),this.currentAsk.promise()},n.translations=function(){return r(r(r([],o.PhoneNumberEditor.translations(),!0),f.getPhoneErrors(),!0),["Phone Number (Optional)","Proceed without phone number","Save and proceed","You have not listed a phone number. Please provide a phone number that we may use to contact you during the support process if requested. Your phone number will be saved under the User Edit page.","Phone number:"],!1)},n}();t.LiveChatPhoneWarning=l})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/liveChat/liveChatPhoneWarning"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/liveChat/liveChatPhoneWarning"));
(function(n,require,t){"use strict";var i=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))},f;Object.defineProperty(t,"__esModule",{value:!0});t.translations=t.createPipeLineDialogs=void 0;var r=require("./liveChatEmailWarning"),u=require("./liveChatPhoneWarning"),e=function(n,t,i,f,e){return[new r.LiveChatEmailWarning(n,t,i),new u.LiveChatPhoneWarning(n,f,i,e)]};t.createPipeLineDialogs=e;f=function(){return i(i([],r.LiveChatEmailWarning.translations(),!0),u.LiveChatPhoneWarning.translations(),!0)};t.translations=f})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/liveChat/liveChatPipeLineDialogs"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/liveChat/liveChatPipeLineDialogs"));
(function(n,require,t){"use strict";var i,r,u,f,e;Object.defineProperty(t,"__esModule",{value:!0});t.toRouteGroup=t.toServiceGroup=t.toZoneSegment=t.toServiceRouteSegment=t.toServiceRoute=void 0;i=function(n){return{id:n.id,name:n.name||"",routePlanItemCollection:(n.routePlanItemCollection||[]).map(t.toServiceRouteSegment).filter(function(n){return n.passCount>0&&n.zone.id!==undefined})}};t.toServiceRoute=i;r=function(n){var t;return{passCount:n.passCount||0,zone:{name:"",points:[],id:((t=n.zone)===null||t===void 0?void 0:t.id)||undefined}}};t.toServiceRouteSegment=r;u=function(n){return{id:n.id,name:n.name||"",points:n.points||[]}};t.toZoneSegment=u;f=function(n){return n.children&&n.children!==null||(n.children=[]),{id:n.id,name:n.name||"",routesGroups:n.children.map(function(n){return t.toRouteGroup(n)})}};t.toServiceGroup=f;e=function(n){return n.children&&n.children!==null||(n.children=[]),{id:n.id||"",name:n.name||"",routes:(n.children||[]).map(function(n){return{id:n.id,name:"",routePlanItemCollection:[]}})}};t.toRouteGroup=e})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/routeCompletion/serviceRoute"),geotab.commonjs.generateExport("geotab/checkmate/ui/routeCompletion/serviceRoute"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.toServiceRule=void 0;var i=function(n){return{name:n.name||"",id:n.id||"",groups:n.groups||[]}};t.toServiceRule=i})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/routeCompletion/serviceRule"),geotab.commonjs.generateExport("geotab/checkmate/ui/routeCompletion/serviceRule"));
(function(n,require,t){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i.apply(this,arguments)},f=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))},u,o,s,h;Object.defineProperty(t,"__esModule",{value:!0});t.loadRouteGroups=t.loadServiceGroups=t.loadServiceRules=t.listServiceGroups=void 0;var c=require("../../../../utils"),r=require("../../../deferred"),e=require("../serviceRoute"),l=require("../serviceRule"),a=function(n,t){return u(n,t).then(function(n){return n.reduce(function(n,t){return f(f([],n,!0),t.groups,!0)},[])}).then(function(n){return c.uniqueById(n)})};t.listServiceGroups=a;u=function(n,t){return t.length>0?r.together(t.map(function(t){return n.rules.getItemById(t)})):n.rules.getItemsByValue({baseType:"RouteCompletion"})};o=function(n,t){return u(n,t).then(function(n){return n.map(l.toServiceRule).filter(function(n){return n.id!==""})})};t.loadServiceRules=o;s=function(n,t){return r.together(t.groups.map(function(t){return n.groups.getItemById(t.id)})).then(function(n){return n.filter(function(n){return n&&n.children.length>0}).map(e.toServiceGroup)})};t.loadServiceGroups=s;h=function(n,t){return r.together(t.map(function(t){return r.together(t.routesGroups.map(function(t){return n.groups.getItemById(t.id)})).then(function(n){return i(i({},t),{routesGroups:n.filter(function(n){return n&&n.children.length>0}).map(function(n){return e.toRouteGroup(n)})})})}))};t.loadRouteGroups=h})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/routeCompletion/loaders/loadRouteCompletionGroups"),geotab.commonjs.generateExport("geotab/checkmate/ui/routeCompletion/loaders/loadRouteCompletionGroups"));
(function(n,require,t){"use strict";function i(){return"<svg class='back-button__icon geo-icon geo-icon--huge' focusable='false'><use xlink:href='#geo-back-arrow'><\/use><\/svg>\n        <span class=\"back-button__title\"><\/span>"}Object.defineProperty(t,"__esModule",{value:!0});t.backButtonHtml=void 0;t.backButtonHtml=i})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/backButton/backButtonHtml"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/backButton/backButtonHtml"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BackButtonStateStack=void 0;var i=function(){function n(){this.state=[]}return n.prototype.push=function(n){this.state.push(n)},n.prototype.pop=function(){return this.state.pop()},n.prototype.clear=function(n){this.state=n?this.state.filter(function(t){return t.id!==n}):[]},n}();t.BackButtonStateStack=i})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/backButton/helpers/backButtonStateStack"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/backButton/helpers/backButtonStateStack"));
(function(n,require,t){"use strict";var u=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});t.translations=t.BackButton=void 0;var f=require("../../../../utils"),r=require("../../../../vanillaExtension/vanilla"),e=require("../../../eventHandler"),o=require("./backButtonHtml"),s=require("./helpers/backButtonStateStack"),h=function(n){function t(t,i,u){u===void 0&&(u=!1);var f=n.call(this)||this;return f.button=t,f.currState=undefined,f.stateStack=new s.BackButtonStateStack,f.button.classList.add("back-button"),f.button.innerHTML=o.backButtonHtml(),f.button.setAttribute("aria-label",i("Go back")),f.button.setAttribute("title",i("Go back")),r.toggle(f.button,u),f.button.addEventListener("click",function(){f.goBack()},!1),f.titleElement=f.button.querySelector(".back-button__title"),f}return u(t,n),t.prototype.applyState=function(n){var t;return this.setTitle((n===null||n===void 0?void 0:n.title)||""),this.currState=n,r.toggle(this.button,!!n),this.fire("stateChanged",this.currState),(t=this.currState)===null||t===void 0?void 0:t.id},t.prototype.restorePrevState=function(){var n=this.stateStack.pop();this.applyState(n)},t.prototype.setTitle=function(n){n===void 0&&(n="");this.titleElement.textContent=n},t.prototype.goBack=function(){if(!this.currState||!this.currState.onClick){r.toggle(this.button,!1);return}this.currState.onClick();this.restorePrevState()},t.prototype.setState=function(n){return this.currState&&this.stateStack.push(this.currState),this.applyState(i({id:f.generateId()},n))},t.prototype.clearState=function(n){this.currState&&this.stateStack.push(this.currState);this.stateStack.clear(n);var t=this.stateStack.pop();return this.applyState(t)},t}(e.SimpleEventHandler);t.BackButton=h;t.translations=["Go back"]})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/backButton/backButton"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/backButton/backButton"));
(function(n,require,t){"use strict";function i(n,t,i,r,u,f,e,o,s,h){return{name:n,id:t||"",parent:i,groups:r||[],type:u,color:f,subType:s||null,isFake:!!o,realParent:e||i,isGlobalReportingGroup:h}}function o(n,t){return i("","-1",null,n,t,null,null,!0)}function r(n,t){var e=!1,f,u=t;for(u||(u=[],e=!0),u.push(i(n.name,n.id,null,[],n.type)),f=0;f<n.groups.length;f++)r(n.groups[f],u);return e?u:[]}function u(n,t,f,e){var o,c,s,h;if(e)return o=r(n,null),c=f.toLowerCase(),o=o.filter(function(n){return n.name.toLowerCase().indexOf(c)!==-1}),i(n.name,n.id,null,o,n.type);if(n.id===t)return n;for(s=0;s<n.groups.length;s++)if(h=u(n.groups[s],t,f,e),h)return h;return null}function f(n,t,i){var u=null,r;if(n.type===t&&n.id===i)return n;for(r=0;r<n.groups.length&&!u;r++)u=f(n.groups[r],t,i);return u}function e(n,t){return t?n.groups.reduce(function(n,i){if(i.name.toLowerCase().indexOf(t)!==-1)n.push(i);else if(i.groups.length>0)return n.concat(e(i,t));return n},[]):[]}function s(n){return n.sort(function(n,t){return t.groups.length-n.groups.length})}Object.defineProperty(t,"__esModule",{value:!0});t.sortByBranchesAndLeaves=t.recursiveSearchByTree=t.findNodeByTypeAndId=t.findGroup=t.flattenTree=t.createEnvelopeGroup=t.createGroup=void 0;t.createGroup=i;t.createEnvelopeGroup=o;t.flattenTree=r;t.findGroup=u;t.findNodeByTypeAndId=f;t.recursiveSearchByTree=e;t.sortByBranchesAndLeaves=s})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/tree"),geotab.commonjs.generateExport("geotab/checkmate/tree"));
(function(n,require,t){"use strict";var r=this&&this.__spreadArray||function(n,t){for(var i=0,u=t.length,r=n.length;i<u;i++,r++)n[r]=t[i];return n},i,u,f,e,o,s;Object.defineProperty(t,"__esModule",{value:!0});t.getSystemZoneTypeColors=t.addSystemZoneTypes=t.isSystemZoneTypeId=t.getZoneTypeName=t.ZONE_ADDRESS_LOOKUP=void 0;i={ZoneTypeAddressLookupId:"addressLookup",ZoneTypeCustomerId:"customer",ZoneTypeOfficeId:"office",ZoneTypeHomeId:"home"};t.ZONE_ADDRESS_LOOKUP="ZoneTypeAddressLookupId";u=function(n,t){var r=typeof n=="string";return r?t(i[n]):undefined};t.getZoneTypeName=u;f=function(n){return i.hasOwnProperty(n)};t.isSystemZoneTypeId=f;e=function(n,t){var i=n.name.toLowerCase(),r=t.name.toLowerCase();return i<r?-1:i===r?0:1};o=function(n,u,f,o){o===void 0&&(o=function(){return!0});var s=n.filter(function(n){var t=typeof n=="string"?n:n.id;return!i.hasOwnProperty(t)}),h=u?function(n){return n!==t.ZONE_ADDRESS_LOOKUP}:function(){return!0},c=Object.keys(i).filter(h).reduce(function(n,t){var r=f(i[t].toLowerCase());return o(r)&&n.push({id:t,name:r,comment:"",isSystem:!0}),n},[]);return r(r([],s),c).sort(e)};t.addSystemZoneTypes=o;s=function(){return{nonCustomer:"#0069c3",office:"#FFA500",home:"#46b500",customer:"#d52121"}};t.getSystemZoneTypeColors=s})(geotab,geotab.commonjs.generateRequire("geotab/utils/zoneTypeUtils"),geotab.commonjs.generateExport("geotab/utils/zoneTypeUtils"));
(function(n,require,t){"use strict";var i,r,u,f;Object.defineProperty(t,"__esModule",{value:!0});t.localizeExceptionDuration=t.localizeTimes=t.getRuleTypeNameFromId=t.getRuleName=void 0;i=function(n,t){var i=t(n.id);return i!==n.id?i:n.name};t.getRuleName=i;r=function(n,t){switch(n){case"EventTypeOilChangeId":case"EventTypeTireRotationId":case"EventTypeLeaseExpiryId":case"EventTypeLicensePlateExpiryId":return t(n);default:return n}};t.getRuleTypeNameFromId=r;u=function(n,t){if(typeof n!="number")return"";switch(n){case 0:return"0 "+t("times");case 1:return t("once");case 2:return t("twice");default:return n+" "+t("times")}};t.localizeTimes=u;f=function(n,t){return n&&n!=="0s"?t("for {duration}").replace("{duration}",n):""};t.localizeExceptionDuration=f})(geotab,geotab.commonjs.generateRequire("geotab/utils/ruleUtils"),geotab.commonjs.generateExport("geotab/utils/ruleUtils"));
(function(n,require,t){"use strict";function b(t,b,k){var ti=window.geotab&&n.getSharedVariable("default").localizer||{},ii=ti.translateKey||function(n){return n},d=function(n){return ii(n)||n},rt=b,ri="GroupCompanyId",tt=w.getRequestQuota(),ui="**Org**",ut=function(n,t){return t&&t.strings&&t.strings[n]},fi=ut("entireOrganizationText",k)||"***Entire Organization",ei=ut("itemsOfTypeNotFoundText",k)||"Some items of type '{0}' couldn't be found: {1}",oi=ut("typeIsNotSupportedText",k)||"'{0}' type is not supported!",ft=function(n,t,r,u){var f=s.createGroup(l.getGroupDescription(n,d),n.entityId||(n.id?n.id:undefined),t===undefined?null:t,[],i.GROUPS,n.color,u,undefined,undefined,n.isGlobalReportingGroup),e,o;if(r&&(f=r(f,n)||f),n.children=n.children||n.groups,n.children)for(e=0;e<n.children.length;e++)o=ft(n.children[e],f,r,n.children[e].parent),f.groups.push(o);return f},g=function(n,t,i,r,f,e,o){for(var c=s.createGroup(n,t,null,[],i,null,null,!0),y=f||u.echo,l=0;l<r.length;l++){var h=r[l],a=s.createGroup(e?e(h):h.name,typeof h=="string"?h:h.id,c,[],i,null,null,undefined,o&&o(h)),v=y(a,h);v!==!1&&c.groups.push(v||a)}return c},et=function(n,t){return g(d("Drivers"),"DRIVERS",i.DRIVERS,n,t,function(n){return v.getDriverDescription(n,d)})},ot=function(n,t){return g(d("Diagnostics"),"DIAGNOSTICS",i.DIAGNOSTICS,n,t)},si=function(n){return n.driverGroups&&i.DRIVERS},st=function(n,t){return g(d("Users"),"USERS",i.USERS,n,t,v.getUserDescription,si)},ht=function(n,t){return g(d("Devices"),"VEHICLES",i.VEHICLES,n,t)},ct=function(n,t){return g(d("ZoneTypes"),"ZONETYPES",i.ZONETYPES,n,t)},lt=function(n,t){return g(d("Zones"),"ZONES",i.ZONES,n,t)},at=function(n,t){return g(d("Routes"),"ROUTES",i.ROUTES,n,t,undefined,function(n){return n&&n.device?i.ROUTEPLAN:i.ROUTES})},vt=function(n,t){return g("Misc","MISC",i.MISC,n,t)},yt=function(n,t){return g(d("Trailers"),"TRAILERS",i.TRAILERS,n,t)},pt=function(n,t){return g(d("Rules"),"RULES",i.RULES,n,t)},wt=function(n,t){return n.forEach(function(n){n.name=l.getGroupDescription(n,d)}),g(d("Clearances"),"CLEARANCES",i.CLEARANCES,n,t)},bt=function(n,t){return g(d("Event Rules"),"EVENTRULES",i.EVENTRULES,n,t)},kt=function(n,t){return g(d("Event Types"),"EVENTTYPES",i.EVENTTYPES,n,t)},nt=[],dt=function(n){return u.unique(n.split(",").map(function(n){return n.trim()}).filter(function(n){return n.length}))},gt=function(n,i,r,f,e,s,h){var l={typeName:"User",resultsLimit:tt,search:n||{}},c;return(!s.includeHistoric||s.fromDate)&&(l.search.fromDate=s.fromDate||(new Date).toISOString()),e?dt(e).forEach(function(n){var r=n.indexOf(" "),u=o.extend(!0,{},l),i,f,e;u.search.name="%"+n+"%";c=c?c.andAlso("Get",u):t.call("Get",u);r>2&&(i=o.extend(!0,{},l),i.search.firstName="%"+n.substring(0,r).trim()+"%",i.search.lastName="%"+n.substring(r).trim()+"%",c=c.andAlso("Get",i));f=o.extend(!0,{},l);f.search.firstName="%"+n+"%";c=c.andAlso("Get",f);e=o.extend(!0,{},l);e.search.lastName="%"+n+"%";c=c.andAlso("Get",e)}):c=t.call("Get",l),c.beginInvoke(function(n){var t=u.joinArrays(n),r;s.usersFilter&&(t=t.filter(s.usersFilter));s.includeHistoric||s.fromDate||(r=new Date,t=t.filter(function(n){return new Date(n.activeFrom)<r}));i(h(t||[],f))},r)},hi=function(n,i,r,e,o){var s=function(t){var s=t,i,h,c,a;o&&o.filterGlobalReportingGroups&&(s=t.filter(function(n){return!n.isGlobalReportingGroup}));i=f.createLinkedTree(s);(k===null||k===void 0?void 0:k.userScope)&&!u.isEntireOrganization(k.userScope)&&(h=f.filterGroups(i,k.userScope,s),i=f.createLinkedTree(h));u.isEntireOrganization(nt)||(h=f.filterGroups(i,nt,s),i=f.createLinkedTree(h));e&&(i=f.findGroupsInTree(i,[{id:undefined,name:e.toLowerCase()}],function(n,t){return!!(n&&l.getGroupDescription(t,d).toLowerCase().indexOf(n[0].name)!==-1)}));c=i.length===1?i[0]:{children:i,id:"-GroupCompanyId",name:fi,isMockRoot:!0};a=ft(c,null,r,c.parent);n(a)};return t.call("Get",{typeName:"Group"}).beginInvoke(s,i)},ci=function(n,t,i,u,f){var o=r({isDriver:!0},e.getFilterSearchParams(nt,"driverGroups"));return gt(o,n,t,i,u,f,et)},li=function(n,t){var f=n.defaultDiagnostics||[],i,u;return f.length>0?f.map(function(n){return r(r({},t),{search:r(r({},t.search),{id:n})})}):(i=n.sourceSearch||[],u=n.diagnosticTypeSearch||[],i.length>0||u.length>0)?a(a([],u.map(function(n){return r(r({},t),{search:r(r({},t.search),{diagnosticType:n})})})),i.map(function(n){return r(r({},t),{search:r(r({},t.search),{sourceSearch:{id:n}})})})):[t]},ai=function(n,i,r,f,e){var o={typeName:"Diagnostic",resultsLimit:e.requestQuota||tt,search:{}},s;return f&&(o.search.name="%"+f+"%"),s=li(e,o),s.reduce(function(n,t){return n.andAlso?n.andAlso("Get",t):n.call("Get",t)},t).beginInvoke(function(t){var i=u.flattenArrays(t||[]),f;i.sort(function(n,t){return n.name>t.name?1:t.name>n.name?-1:0});f=ot(i,r);n(f)},i)},vi=function(n,i,o,s,h){var c={typeName:"Device",search:r(r({},e.getFilterSearchParams(nt,"groups")),{fromDate:h.includeHistoric?f.MinDate:h.fromDate||(new Date).toISOString(),keywords:undefined}),resultsLimit:h.requestQuota||tt};return s&&(c.search.keywords=dt(s).map(function(n){return"%"+n+"%"})),t.call("Get",c).beginInvoke(function(t){var i=u.joinArrays(t||[]).sort(function(n,t){return n.name>t.name?1:t.name>n.name?-1:0});n(ht(i,o))},i)},yi=function(n,i,u,f){var o=r(r({},e.getFilterSearchParams(nt,"groups")),{name:undefined});return f&&(o.name="%"+f+"%"),t.call("Get",{typeName:"Trailer",resultsLimit:tt,search:o},!0).beginInvoke(function(t){var i=yt(t||[],u);n(i)},i)},pi=function(n,i,r,u){var f={name:u&&"%"+u+"%"||undefined};return t.call("Get",{typeName:"ZoneType",resultsLimit:tt,search:f},!0).beginInvoke(function(t){var i=(u||"").toLowerCase(),f=y.addSystemZoneTypes(t||[],!0,d,function(n){return n.toLowerCase().indexOf(i)!==-1}),e=ct(f||[],r);n(e)},i)},wi=function(n){return n.reduce(function(n,i){return u.callBuilder(n,t,"GetStockRuleTemplate",{stockRuleDefinition:i})},null)},bi=function(n,i,f,o,s){var h=o&&o.trim()?o:"",c=r({baseType:s.baseType?s.baseType:undefined,category:s.category?s.category:"UserExceptionRules",name:"%"+h+"%"},e.getFilterSearchParams(nt,"groups"));s.includeZoneStopRules&&(c.includeZoneStopRules=!0);s.zoneTypes&&(c.zoneTypes=s.zoneTypes);var a={typeName:"Exceptions.Rule",resultsLimit:tt,search:c},l=s&&s.getStockRules?s.getStockRules():[],v=u.callBuilder(wi(l),t,"Get",a);return v.beginInvoke(function(t){var i=Array.isArray(t)?u.flattenArrays(t.filter(u.echo)):[],r=h?h.toLowerCase():undefined,e=r&&l.length?i.filter(function(n){return n&&n.name&&n.name.toLowerCase().indexOf(r)!==-1}):i,o=pt(e,f);n(o)},i)},ki=function(n,t,i,r,u){var f=e.getFilterSearchParams(nt,"companyGroups");return gt(f,n,t,i,r,u,st)},di=function(n,i,u,f){var o=r(r({},e.getFilterSearchParams(nt,"groups")),{name:"%"+f+"%"});return t.call("Get",{typeName:"Zone",resultsLimit:tt,search:o}).beginInvoke(function(t){var i=lt(t||[],u);n(i)},i)},gi=function(n,i,r,u,f){var o={typeName:"Route",search:{zoneSearch:e.getFilterSearchParams(nt,"groups"),name:"%"+u+"%"}};return f.routeType&&(o.search.routeType=f.routeType),t.call("Get",o).beginInvoke(function(t){var i=at(t||{},r);n(i)},i)},nr=function(n,t,i,r){var u=function(t){var u=vt(t||{},i),f;if(r){if(f=s.findGroup(u,null,r,!0),!u)throw new Error("Group not found");u=f}return u.groups=u.groups.slice(0,tt),n(u),c.resolveTask(u)};return u(rt)},tr=function(n,i,r,u){return t.call("Get",{typeName:"Group",search:{id:"GroupSecurityId"}}).beginInvoke(function(t){var i=(t||[]).filter(function(n){var t=(n.name?n.name:d(n.id)).toLowerCase(),i=(u||"").toLowerCase();return t.indexOf(i)!==-1}),f=wt(i,r);n(f)},i)},ir=function(n,i,r,u){var f=t.call("Get",{typeName:"EventType"});return f.beginInvoke(function(t){var i=t.map(function(n){return n.name?n:{name:p.getRuleTypeNameFromId(n,d),id:n}}).filter(function(n){return n.name.toLowerCase().indexOf(u.toLowerCase())!==-1}).sort(function(n,t){return n.name>t.name?1:t.name>n.name?-1:0});n(kt(i,r))},i)},rr=function(n,i,u,f,o){var s={typeName:"EventRule",resultsLimit:tt,search:r({eventTypeIds:o.evenTypeIds?o.evenTypeIds():undefined},o.groups&&r({},e.getFilterSearchParams(o.groups(),"groups")))},h=t.call("Get",s);return h.beginInvoke(function(t){var i,r;o.includeUnplannedMaintenance&&(i={id:"UnplannedMaintenance",name:d("UnplannedMaintenance")},t.push(i));r=t.filter(function(n){return n.name.toLowerCase().indexOf(f.toLowerCase())!==-1}).sort(function(n,t){return n.name.localeCompare(t.name)});n(bt(r,u))},i)},it=function(){var n;return n={},n[i.GROUPS]={methodName:"Group",formatter:function(n,t){return ft({children:n,entityId:ri,name:ui},null,t)},getMethod:hi},n[i.DRIVERS]={formatter:et,methodName:"User",getMethod:ci},n[i.DIAGNOSTICS]={formatter:ot,methodName:"Diagnostic",getMethod:ai},n[i.VEHICLES]={formatter:ht,methodName:"Device",getMethod:vi},n[i.ZONETYPES]={formatter:ct,methodName:"ZoneType",getMethod:pi},n[i.TRAILERS]={formatter:yt,methodName:"Trailer",getMethod:yi},n[i.RULES]={formatter:pt,methodName:"Exceptions.Rule",getMethod:bi},n[i.ZONES]={formatter:lt,methodName:"Zone",getMethod:di},n[i.ROUTES]={formatter:at,methodName:"Route",getMethod:gi},n[i.USERS]={formatter:st,methodName:"User",getMethod:ki},n[i.MISC]={formatter:vt,methodName:null,getMethod:nr},n[i.CLEARANCES]={formatter:wt,methodName:"SecurityGroups",getMethod:tr},n[i.EVENTRULES]={formatter:bt,methodName:"EventRule",getMethod:rr},n[i.EVENTTYPES]={formatter:kt,methodName:"EventType",getMethod:ir},n}(),ur=function(){var n=["GroupCompanyId"];return function(t){return n.indexOf(t)!==-1}}(),fr=function(n,i,r,u,e){var y=[],p=h(n),w,a,l=i.slice(),k=function(n,t,i,r){var f=function(n){return(Array.isArray(n)?n:[n]).filter(function(n){return!n||typeof n=="object"&&!Object.keys(n).length})},u;t.reduce(function(t,i,r){return n.splice(r+t,0,i),t+1},0);u=f(n);u.length?r(o.extend(new Error(ei.replace("{0}",a||"misc").replace("{1}",u.join(", "))),{isSevere:!1})):i(w(Array.isArray(n)?n:[n]||[],e))},s,b,v;if(it[p])a=it[p].methodName,w=it[p].formatter;else throw new Error(oi.replace("{0}",n));if(a){for(s=0;s<l.length;s++)b=l[s],ur(b)&&(y[s]={id:b},l.splice(s,1),s--);return l.length?l.reduce(function(n,t){return(n.call||n.andAlso).call(n,"Get",{typeName:a,search:{id:t}})},t).beginInvoke(function(n){return k(f.unwrapEntities(n),y,r,u)},u):(v=c.default("format system items").done(r).fail(u),setTimeout(function(){k([],y,v.resolve,v.reject)},1),v)}return r(w(rt||[])),c.resolved()},ni={getFor:function(n){var t=h(n);if(it[t])return it[t].getMethod;throw new Error('"'+n+'" type is not supported!');},getEntitiesOfType:function(n,t,i,r){return ni.getFor(n)(t,i,r,null,{})},getEntitiesById:fr,getFilter:function(){return nt},setFilter:function(n){nt=n||[]},setEntities:function(n){rt=n},formatEntities:function(n,t,i){var r=h(n);if(it[r])return it[r].formatter(t,i);throw new Error('"'+n+'" type is not supported!');}};return ni}var r=this&&this.__assign||function(){return r=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},r.apply(this,arguments)},a=this&&this.__spreadArray||function(n,t){for(var i=0,u=t.length,r=n.length;i<u;i++,r++)n[r]=t[i];return n},h;Object.defineProperty(t,"__esModule",{value:!0});t.EntityTypes=void 0;var u=require("../../utils"),s=require("../tree"),c=require("../task"),f=require("../entityUtilities"),o=require("../../vanillaExtension/vanilla"),y=require("../../utils/zoneTypeUtils"),v=require("../../utils/userUtils"),l=require("../../utils/groupUtils"),p=require("../../utils/ruleUtils"),e=require("./modules/advancedGeotabEntitiesNavigator/advancedSearchParamsConverter"),w=require("../requestQuotas"),i={GROUPS:1,DRIVERS:2,VEHICLES:4,ZONES:8,ADDRESSES:16,ROUTES:32,MISC:64,USERS:128,TRAILERS:256,RULES:512,DIAGNOSTICS:1024,ROUTEPLAN:2048,ZONETYPES:4096,CLEARANCES:8192,EVENTRULES:16384,EVENTTYPES:32768};t.EntityTypes=i;h=function(n){return typeof n=="number"?n:i[n]};t.default=b})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/dataItemsToTreeAdapter"),geotab.commonjs.generateExport("geotab/checkmate/ui/dataItemsToTreeAdapter"));
(function(n,require,t){"use strict";var i,r,u;Object.defineProperty(t,"__esModule",{value:!0});t.listClasses=t.listTypeIcons=void 0;i=require("./dataItemsToTreeAdapter");r=function(){var n;return n={},n[i.EntityTypes.DRIVERS]="geo-driver-new",n[i.EntityTypes.VEHICLES]="geo-new-vehicle",n[i.EntityTypes.ZONES]="geo-zone-new",n[i.EntityTypes.ADDRESSES]="geo-location",n[i.EntityTypes.ROUTES]="geo-route-new",n[i.EntityTypes.ROUTEPLAN]="geo-planned-route",n[i.EntityTypes.USERS]="geo-user-new",n[i.EntityTypes.TRAILERS]="geo-trailer-new",n[i.EntityTypes.GROUPS]="",n[i.EntityTypes.RULES]="",n[i.EntityTypes.EVENTRULES]="geo-clock-icon",n[i.EntityTypes.EVENTTYPES]="geo-wrench",n};t.listTypeIcons=r;u=function(){return{BUTTON_CLASS:"geo-navigator-list__content",CHBX_CLASS:"geo-navigator-list__action",ICON_CLASS:"geo-navigator-list__icon geo-navigator-list__icon--gray",LABEL_CLASS:"geo-navigator-list__label",LIST_CLASS:"geo-list",FOLDER_ICON_CLASS:"geo-folder-new",STATUS_ICON_CLASS:"geo-circle-ok",ALL_IN_GRUOPS_CLASS:"geo-circle-ok",BROMM_ICON_CLASS:"geo-cross-in-circle",CLOSE_ICON:"new-arrow-up",OPEN_ICON:"new-arrow-down",LEVEL_UP_ICON:"geo-lvl-up",EXPAND_BUTTON_CLASS:"geo-secondary-button-with-expand__expand geotab-filter__expand",COMBO_OPEN_CLASS:"geo-secondary-button-with-expand__open",COMBO_CLOSE_CLASS:"geo-secondary-button-with-expand__close",DROPDOWN_ICON_CLASS:"geo-secondary-button-with-expand__arrow",SEARCH_FIELD_CLASS:"geo-secondary-button-with-expand__input geotab-filter__input ellipsis",SEARCH_INPUT_CLASS:"geo-text-input-with-icons__input",FOCUSED_BUTTON_CLASS:"geo-navigator-list__content--focused",SEPARATOR_NODE_CLASS_NAME:"geo-navigator-list__separator",NOTHING_FOUND_CLASS:"noResult",INPUT_BOX_CLASS:"inputBox",SELECT_CLASS:"selectButton",CLICK_BUTTON_CLASS_NAME:"clickButton",NAV_BUTTON_CLASS_NAME:"navButton",ALL_IN_BUTTON_CLASS_NAME:"allInButton",ONLY_IN_BUTTON_CLASS_NAME:"onlyInButton",ADV_BUTTON_CLASS_NAME:"advanced-filter",PLACEHOLDER_CLASS_NAME:"geo-placeholder",CUSTOM_BUTTON:"customButton",SELECT_ALL_BUTTON:"selectAllButton",DESELECT_ALL_BUTTON:"deselectAllButton",SHOW_HISTORICAL_BUTTON:"showHistoricalButton",SWITCHER_CLASS_NAME:"geo-switcher-item"}};t.listClasses=u})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/geotabEntitiesNavigatorConstants"),geotab.commonjs.generateExport("geotab/checkmate/ui/geotabEntitiesNavigatorConstants"));
(function(n,require,t){"use strict";var i,r,u;Object.defineProperty(t,"__esModule",{value:!0});t.EntitiesNavigatorElements=t.PERMANENT_LIST_ITEM=t.LIST_ITEM=t.ID_SEPARATOR=void 0;i=require("../../../../utils");r=require("../../geotabEntitiesNavigatorConstants");t.ID_SEPARATOR="**";t.LIST_ITEM="geo-list__item";t.PERMANENT_LIST_ITEM="geo-list__item--permanent";u=function(){function n(n,u,f){var e=this;this.typeIcons=n;this.options=u;this.translate=f;this.wrapTitle=function(n){return'<span class="'+e.elementsClassNames.LABEL_CLASS+'">'+i.htmlEscape(n)+"<\/span>"};this.renderItemIcon=function(n){return'<svg class="'+e.elementsClassNames.ICON_CLASS+'"><use xlink:href="#'+n+'"><\/use><\/svg>'};this.createListItem=function(n,r,u,f){return f===void 0&&(f=!1),'<li class="'+t.LIST_ITEM+e.addClassName(r)+'"\n                    '+(u?' title="'+i.htmlEscape(u)+'"':"")+"\n                    "+(f?" aria-hidden='true'":"")+">"+n+"<\/li>"};this.createButton=function(n,r,u,f,o,s){n===void 0&&(n={name:"",type:""});o===void 0&&(o="");s===void 0&&(s=0);var h=n.type,l=n.subType||h,c=f||(n.subType?e.typeIcons[l]:null)||e.options.icon||null,a=i.generateId()+t.ID_SEPARATOR+(n.id?h+t.ID_SEPARATOR+(n.id||""):""),v=e.options.hideIcons||!c?function(){return""}:e.renderItemIcon,y=(c?v(c):"")+e.wrapTitle(r);return'<button class="'+e.elementsClassNames.BUTTON_CLASS+" ellipsis "+o+'" data-type="'+h+'" id="'+a+'" title="'+i.htmlEscape(u)+'" tabIndex="'+s+'">\n            '+y+"\n        <\/button>"};this.createListButton=function(n,t,i,r){n===void 0&&(n={name:"",type:""});var o=r||"",u=t||n.name||"",f=n.title||u,s=e.createButton(n,u,f,i,undefined,-1);return e.createListItem(s,o,f)};this.addClassName=function(n){return n?" "+n:""};this.elementsClassNames=r.listClasses()}return n.prototype.createText=function(n,r){var u=i.generateId()+t.ID_SEPARATOR,f="<div class='"+this.elementsClassNames.BUTTON_CLASS+" ellipsis' id='"+u+"' title='"+i.htmlEscape(n)+"'>"+this.wrapTitle(n)+"<\/div>";return this.createListItem(f,r,undefined)},n.prototype.createCheckbox=function(n,r,u,f,e){var h=this;n===void 0&&(n={name:"",type:""});var a=f||"",o=n.type,v=n.subType||o,y=u||(n?this.typeIcons[v]:null)||this.options.icon||null,s=i.generateId()+t.ID_SEPARATOR+(n.id?o+t.ID_SEPARATOR+(n.id||""):""),c=r||n.name||"",l=n.title||c||"",p=function(n){return h.options.hideIcons||!n?"":h.renderItemIcon(n)},w="\n            <input type='checkbox' data-type='"+o+"' "+(e?" checked":"")+" class='"+this.elementsClassNames.CHBX_CLASS+"' id='"+s+"' tabIndex=\"-1\">\n            <label class='"+this.elementsClassNames.BUTTON_CLASS+" ellipsis' for='"+s+"' title='"+i.htmlEscape(l)+"' id='l**"+s+"'>"+p(y)+this.wrapTitle(c)+"<\/label>\n        ";return this.createListItem(w,a,l)},n.prototype.createNavigationButton=function(n,t,i){return this.createListButton(n,t,i,this.elementsClassNames.NAV_BUTTON_CLASS_NAME)},n.prototype.createSelectButton=function(n,t,i,r,u){var f=""+(n.clickable?this.elementsClassNames.CLICK_BUTTON_CLASS_NAME:this.elementsClassNames.SELECT_CLASS)+this.addClassName(r)+" ellipsis";return this.createCheckbox(n,t,i,f,u)},n.prototype.createSelectAllButton=function(n){var t=this.translate("selectAllText",n);return t?this.createListButton({type:n,id:"all"},t,this.elementsClassNames.STATUS_ICON_CLASS,this.elementsClassNames.SELECT_ALL_BUTTON):""},n.prototype.createDeselectAllButton=function(n){var t=this.translate("deselectAllText",n);return t?this.createListButton({type:n,id:"all"},t,this.elementsClassNames.BROMM_ICON_CLASS,this.elementsClassNames.DESELECT_ALL_BUTTON):""},n.prototype.createHistoricalButton=function(n,t,i){return t?this.createListButton({type:n},t,i,this.elementsClassNames.SHOW_HISTORICAL_BUTTON):""},n.prototype.createLevelUpButton=function(n){return n?this.createNavigationButton(n,this.translate("levelUpText"),this.elementsClassNames.LEVEL_UP_ICON):""},n.prototype.createNothingFoundButton=function(){return this.createText(this.translate("nothingFoundText"),this.elementsClassNames.NOTHING_FOUND_CLASS)},n.prototype.createCustomButton=function(n,t){var i=t?t(n):undefined;return i?this.createButton(undefined,i.text||"",i.text||"",i.icon,""+this.elementsClassNames.CUSTOM_BUTTON+this.addClassName(i.className)):""},n.prototype.createCustomListButton=function(n,t){var i=t?t(n):undefined;return i?this.createListButton(undefined,i.text||"",i.icon,""+this.elementsClassNames.CUSTOM_BUTTON+this.addClassName(i.className)):""},n.prototype.createSeparator=function(){return this.createListItem("",this.elementsClassNames.SEPARATOR_NODE_CLASS_NAME,undefined,!0)},n.prototype.createPlaceholder=function(n,t,i,r){return r===void 0&&(r=!1),this.createListItem(n||"",""+this.elementsClassNames.PLACEHOLDER_CLASS_NAME+this.addClassName(i),t,!r)},n.prototype.createSwitcher=function(n,t,r){return r===void 0&&(r=""),'<div class="geo-form geo-navigator-list__content '+this.elementsClassNames.SWITCHER_CLASS_NAME+" "+r+'">\n            <label class="geo-form__label geo-navigator-list__label" for='+n+">"+(t?i.htmlEscape(t):"")+'<\/label>\n            <span class="geo-form__control"><\/span>\n        <\/div>'},n}();t.EntitiesNavigatorElements=u})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/geotabEntitiesNavigator/entitiesNavigatorElements"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/geotabEntitiesNavigator/entitiesNavigatorElements"));
(function(n,require,t){"use strict";function ut(n,t,c,tt){var ft=v.listClasses(),af=Object.keys(ft).map(function(n){return ft[n]}),vf={type:r.EntityTypes.GROUPS|r.EntityTypes.DRIVERS|r.EntityTypes.VEHICLES,formatter:null,strings:{selectAllGroupText:"***All in {0}",selectAllDriversText:"***All Drivers",selectAllDevicesText:"***All Devices",selectOnlyInGroupText:"***Only in {0}",selectOnlyDriversText:"***Only Drivers",selectOnlyDevicesText:"***Only Devices",searchLimitWarning:"EntitiesLoaderSearchLimit",watermarkText:"***Filter...",nothingFoundText:"***Nothing was found",levelUpText:"***Up one level",deselectAllText:"***Remove all",selectAllText:"***Select all",entireOrganizationText:"***Entire Organization",showHistoricalText:"",hideHistoricalText:"",openFilter:"***Open filter",closeFilter:"***Close filter",closeNotification:"Close notification"},getNodeName:undefined,resetButton:{markup:null},multipleSelection:!0,ignoreSelectionType:!1,minimumSelection:[],value:[],isInputFirstElement:!1,showDeselectAllButton:!1,showSelectDeselectAllButtons:!1,showOnlyInButton:!1,showAllInButton:!0,searchOnServer:!0,greedySelection:!0,unfoldGroups:!1,unfoldSingleGroupOnSearch:!0,entities:null,icon:null,hideIcons:!1,customClass:"",customClassForFilterList:"",closeOnSelect:!1,closeOnSelectAll:!0,withTextField:!0,listId:undefined,innerSelectionHadling:!1,isInBody:!0,isSetValueAfterSelect:!1},fr=function(){return"<li class='"+ft.SEPARATOR_NODE_CLASS_NAME+"' aria-hidden='true'><\/li>"},yf=v.listTypeIcons(),pf=document.body,er={},pt={},rt=i.extend(!0,{},vf,c),st=function(){var t=function(n){return Object.keys(r.EntityTypes).filter(function(t){return!!(n&r.EntityTypes[t])}).map(function(n){return r.EntityTypes[n]})},i=function(n){return n.reduce(function(n,t){return n[t]=!1,n},{})},n=t(rt.type||0);return{types:i(n),updateType:function(r){n=t(r||0);st.types=i(n)},isEverythingSelected:!1,isAnythingSelected:function(){return n.some(function(n){return st.types[n]})},isAllTypesSelected:function(){return n.every(function(n){return st.types[n]})},deselectAll:function(){st.isEverythingSelected=!1;n.forEach(function(n){st.types[n]=!1})},selectAll:function(){st.isEverythingSelected=!0;n.forEach(function(n){st.types[n]=!0})}}}(),or=function(n){return{type:n.type||1,formatter:n.formatter,requestOptions:n.requestOptions||{}}},iu=function(n){return n.requestOptionsSearching?{type:n.type,formatter:n.formatter,requestOptions:n.requestOptionsSearching}:or(n)},ri=or(rt),yi=iu(rt),ui=(rt.minimumSelection||[]).slice(0).sort(),wf=rt.value,wt=rt.strings,ru=rt.withTextField,bf=function(n,t){if(rt.strings){var i=rt.strings[n];return typeof i=="function"&&(i=i(t)),i||n}return n},kf=d.default(function(){return rt.strings.closeNotification}),bt=it(t,rt.entities,kf,{strings:rt.strings,requestQuota:rt.requestQuota,userScope:rt.userScope,getEntities:rt.getEntities,searchEntities:rt.searchEntities,searchEntitiesByIDs:rt.searchEntitiesByIDs}),lt,sr,ct,ci={UP:0,DOWN:1},li=!1,fi=!1,ni=!1,ai=0,ut,at,ht,hr=150,pi,ei,oi,df,gf=500,et=[],yt,wi=!1,cr=function(n){f=!1;n&&n.isAborted||yr();tt&&n&&!n.isAborted&&tt(n)},uu=function(n){ut&&(ut.setAttribute("placeholder",n),ut.setAttribute("aria-label",n))},bi=function(){return lt.querySelectorAll("LI ."+ft.FOCUSED_BUTTON_CLASS)},ii=function(){var n;return{reset:function(){n=null},restore:function(){n&&ut&&(li=!0,ut.value=n,ut.focus(),n="")},setValue:function(t){n=t||null},getValue:function(){return n},clear:function(){ut&&(n=ut.value,li=!1,ut.value="",c.isSetValueAfterSelect||(ut.placeholder=wt.watermarkText||""))}}}(),fu=function(n){var u=typeof n=="function"?n():n,i,r,t;return u!==undefined?u:(i=ut&&ut.parentNode,r=i?i.offsetWidth:0,r)?(t=ut?ut.offsetWidth:0,r!==t&&(t=t+at.offsetWidth),t>hr?t:hr):undefined},eu=function(n){var t=n?n+"px":"auto";i.css(lt,{"max-width":t,width:t})},ki=function(){if(ht&&ct.isVisible()){var n=window.getComputedStyle(ht),i=parseInt(n.paddingTop||"0")+parseInt(n.paddingBottom||"0")+parseInt(n.borderBottomWidth||"0")+parseInt(n.borderTopWidth||"0"),r=ht.getBoundingClientRect(),u=yt.getBoundingClientRect(),t=window.innerHeight+pf.scrollTop-r.top,f=fu(rt.menuWidth);eu(f);ht.style.height=u.height>t-i?t+"px":"auto";ct.resize()}},ou=function(n){return n===at?ut||n:rt.mobileTrigger},lr=function(n){if(ct){var t={target:ou(n)};ct.setOptions(t);ct.setTrigger(n)}},kt=function(t){var l=n.getAttribute("data-popup")||n.id,v=rt.customClassForFilterList?" "+rt.customClassForFilterList:"",s=function(n){return function(){for(var r,u,f=[],t=0;t<arguments.length;t++)f[t]=arguments[t];hi||(r=lt.style.display==="none",ut&&(i.toggleClasses(at,"closeComboIcon",r),u=r?rt.strings.closeFilter:rt.strings.openFilter,at.setAttribute("title",u),at.setAttribute("aria-label",u)),ot.fireEvent(r?"comboOpen":"comboClose",ot,ht),n.apply(this,f))}},y=function(n){for(var t=n;t&&t.parentNode!==document.body;)t=t.parentNode;return t},p=function(n,t,r,u,f){var h,o=i.create("div",{id:a.generateId(),"data-filter":l,"class":"filterMenuContainer"+u},{display:"none"}),e=i.create("ul",{"class":ft.LIST_CLASS}),s,c,v;return sr=e,f&&(e.id=f),e.appendChild(i.create("li")),o.appendChild(e),s=r?document.body:n,c=r?y(n):t,c?(v=c.nextSibling,v?s.insertBefore(o,v):s.appendChild(o)):s.appendChild(o),e.addEventListener("keydown",dt,!1),(h=rt.keyDownSender)===null||h===void 0?void 0:h.addEventListener("keydown",dt,!1),e.addEventListener("focus",yu,!1),o},w=function(){return ut&&ut!==document.activeElement},d=function(n){return function(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];w()&&(ii.clear(),wr="");ii.reset();setTimeout(di,1);ut===null||ut===void 0?void 0:ut.setAttribute("aria-expanded","false");n.apply(this,i)}},r,h,u,o;at.removeEventListener("click",kt,!1);ut&&ut.removeEventListener("focus",kt,!1);c.mobileTrigger&&c.mobileTrigger.removeEventListener("click",kt,!1);r=rt.mobileTrigger&&(t===null||t===void 0?void 0:t.currentTarget)===rt.mobileTrigger?rt.mobileTrigger:at;ht=p(n,r,rt.isInBody,v,rt.listId);lt=ht;h={onShow:s(br),onShowEnd:function(){f&&(oi.style.display="block",lu());ki();si=!1},onHide:s(d(yr)),content:ht,minWidth:hr,minHeight:40,addAutoScroll:!0,position:rt.popupWindowPosition,calculatePosition:rt.calculatePosition,target:ou(r),trapFocus:rt.hasComplexPopup,preventReFocusing:function(){return document.activeElement===ut}};at.addEventListener("click",function(){return lr(at)},!1);c.mobileTrigger&&c.mobileTrigger.addEventListener("click",function(){return lr(c.mobileTrigger)},!1);ct=b.default(r,h);yt=ht.children[0];window.addEventListener("resize",ki,!1);u=yt.children;oi=u[u.length-1];pi=k.default(oi,{zIndex:10003,insertWaitingToContainer:!0});ei=e.default("Loading filter");rt.closeOnMouseOut&&!nt.isMobile()&&(o=no(lt,ct,"."+ft.SELECT_CLASS+" LABEL"),ot.attachEvent("comboOpen",function(){o.enable()}),ot.attachEvent("comboClose",function(){o.disable()}));t&&t.type==="click"&&setTimeout(ot.openCombo,100)},ar=function(){ai&&clearTimeout(ai)},su=function(n,t,i){var r=t?"add":"remove";n.classList[r]("geotab-filter__wrapper--focused");i&&n.classList[r]("geotab-filter__wrapper--focused-input")},ne=function(){var t=function(){var n=i.create("button",{"class":ft.EXPAND_BUTTON_CLASS+" help-ignore",title:rt.strings.openFilter,"aria-label":rt.strings.openFilter});return n.appendChild(i.createMultipleIcons([{icon:ft.CLOSE_ICON,className:ft.COMBO_OPEN_CLASS},{icon:ft.OPEN_ICON,className:ft.COMBO_CLOSE_CLASS}],ft.DROPDOWN_ICON_CLASS+" toRotate",!1)),n},r=function(){return i.create("input",{"class":ft.INPUT_BOX_CLASS+" "+ft.SEARCH_FIELD_CLASS,type:"text",autocomplete:"off","aria-autocomplete":"list"})},u=function(n,t,r){var e=rt.isFullSizeElement?"geotab-filter__wrapper--full-size":"",o=rt.customClass?" "+rt.customClass:"",u=i.create("div",{"class":"geo-secondary-button-with-expand geotab-filter__wrapper "+e+o}),f;u.appendChild(n);u.appendChild(t);["focus","mouseover"].forEach(function(i){[n,t].forEach(function(n,t){return n.addEventListener(i,function(){return su(u,!0,t===0)},!1)})});["blur","mouseleave"].forEach(function(i){[n,t].forEach(function(n,t){return n.addEventListener(i,function(){return su(u,!1,t===0)},!1)})});rt.isInputFirstElement&&r.children.length?(f=r.children[0],r.insertBefore(u,f)):r.appendChild(u)},f=n.id||n.getAttribute("data-connected-popup")||"popup";n.setAttribute("data-popup",f+"_"+a.generateId());ru?(at=t(),ut=r(),ut.setAttribute("role","combobox"),ut.setAttribute("aria-expanded","false"),uu(wt.watermarkText||""),ut.addEventListener("blur",ar,!1),ut.addEventListener("keydown",dt,!1),ut.addEventListener("input",gi,!1),u(ut,at,n)):at=n;at.addEventListener("click",kt,!1);c.mobileTrigger&&c.mobileTrigger.addEventListener("click",kt,!1);ut&&(at.addEventListener("click",vr,!1),ut.addEventListener("focus",kt,!1));ot.setSelection(wf||ui.slice(0),undefined,!1,!1,rt.silentInit)},vr=function(){lt&&lt.style.display!=="none"||(ut===null||ut===void 0?void 0:ut.focus())},di=function(){var n,r,t,u;if(yt){for(n=yt.children,r=yt.children[n.length-1],t=n.length-2;t>-1;--t)u=n[t],i.hasClass(u,s.PERMANENT_LIST_ITEM)||yt.removeChild(n[t]);r.style.height="45px";r.style.position="relative";i.addClasses(r,"filter-progress-container");ht&&(ht.style.height="auto");oi.style.display="block";pi.resize()}},hu=function(n){if(ut){var t=n;rt.type===r.EntityTypes.DRIVERS&&(t=n.split(" (")[0]);ut.placeholder=t}},cu=function(){di();ei||lt.style.display==="none"||ct.isOpening()||lu()},yr=function(){yt&&(yt.style.height="",oi.style.display="none",au())},lu=function(){au();ei=e.default("Loading filter");pi.displayProgress(ei)},au=function(){ei&&(ei.resolve(),ei=null)},vu=function(n){i.addClasses(n,ft.FOCUSED_BUTTON_CLASS)},pr=function(n){var u=function(n,t,i){for(var u=n===ci.UP?"previousElementSibling":"nextElementSibling",f=n===ci.UP?function(n){return n.children[n.children.length-1]}:function(n){return n.children[0]},o=!!i,r=i?i[u]||f(t):f(t),e;r&&r!==i;){if(e=r.getElementsByClassName(ft.BUTTON_CLASS)[0],e)return e;r=r[u]?r[u]:o?f(t):null}return null},r=bi(),t=u(n,sr,r[0]&&r[0].parentNode);if(Array.prototype.forEach.call(r,function(n){return i.removeClasses(n,ft.FOCUSED_BUTTON_CLASS)}),t){vu(t);ut===null||ut===void 0?void 0:ut.setAttribute("aria-activedescendant",t.id);var f=t.offsetParent?t.offsetParent.offsetHeight:0,e=t.offsetTop<(t.offsetParent?t.offsetParent.scrollTop:0),o=f+(t.offsetParent?t.offsetParent.scrollTop:0),s=t.offsetTop>o,h=e||s;h&&t.scrollIntoView()}},wr="",si=!1,te=function(n,t){switch(n.keyCode){case 38:return(n.preventDefault(),t)?(pr(ci.UP),si=!0,!0):!0;case 40:return(n.preventDefault(),t)?(pr(ci.DOWN),si=!0,!0):(ct.open(),!0);case 37:case 39:if(t){var r=bi()[0];(r===null||r===void 0?void 0:r.parentNode)&&i.hasClass(r.parentNode,ft.SWITCHER_CLASS_NAME)&&(ir(r),n.preventDefault())}return!0;default:return!1}},ie=function(){var n=(ut===null||ut===void 0?void 0:ut.value)||ii.getValue()||"";li=n!=="";lt.style.display!=="none"&&n!==wr?(wr=n,br()):ct.open();ot.fireEvent("search",ot,[ii.getValue()||""])},yu=function(){var n=bi()[0];n||(pr(ci.DOWN),si=!0)},dt=function(n){var i=!!(ht&&ht.style.display!=="none"),t;if(te(n,i))return!1;switch(n.keyCode){case 13:case 32:if(i){if(n.keyCode===32&&!si)break;if(t=bi()[0],t)return ir(t),n.preventDefault(),!1}return!0;case 27:case 9:n.keyCode!==27&&rt.hasComplexPopup||(clearTimeout(ai),ct&&(ct.isVisible()&&n.stopPropagation(),ct.close()))}return!1},gi=function(){clearTimeout(ai);ai=setTimeout(ie,gf);si=!1;ii.setValue(ut?ut.value:"")},pu=function(n,t){f=!0;cu();t.push(ff);t.push(cr);n.apply(ot,t)},br=function(){var t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];bt.searchEntities.apply(bt,t)},i=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];bt.getEntities.apply(bt,t)},n=li?yi:ri;n.requestOptions.fromDate=fi?p.MinDate:undefined;li?(ni=!0,pu(t,[n,(ut===null||ut===void 0?void 0:ut.value)||"",rt.searchOnServer])):(ni=!1,pu(i,[n]));ut===null||ut===void 0?void 0:ut.setAttribute("aria-expanded","true");ut===null||ut===void 0?void 0:ut.setAttribute("aria-controls",(ht===null||ht===void 0?void 0:ht.id)||"")},re=function(){for(var t=[],n=0;n<et.length;n++)t.push(et[n].id);return t},ue=function(){for(var t,n={length:0,isInCache:function(t){return!!(n[t.type]||n)[t.id]||st.types[t.type]},isAnyInCache:function(t){return n.length&&(rt.ignoreSelectionType?!0:n[t])}},i,r=0;r<et.length;r++)t=et[r],!rt.ignoreSelectionType&&t.type?(n[t.type||0]=n[t.type||0]||{},i=n[t.type||0]):i=n,i[t.id]=!0,n.length++;return n},wu=function(){var n=re().sort();ui&&ui.sort();sf(n,ui)&&(et=[])},fe=function(n,t){return n.id===t.id&&(rt.ignoreSelectionType||n.type===t.type)},ee=function(n,t){var f=rt.showOnlyInButton&&t,r=et.length===0||!et.some(function(t){return fe(t,n)}),e=u([],et),i;wu();(r||f)&&(r&&et.push(n),i={affectedGroup:n,selectedNodes:et,prevSelectedNodes:e,affectedType:n.type,onlyInSelection:pt[n.id],userInput:!0},ot.fireEvent("change",ot,i),ot.fireEvent("externalChange",ot,i))},oe=function(n){var i=u([],et),t;et=et.filter(function(t){return!(t.id===n.id&&(rt.ignoreSelectionType||t.type===n.type))});et.length===0&&ui.length?(ot.setSelection(et),ot.fireEvent("externalChange",ot,{affectedGroup:null,selectedNodes:et,prevSelectedNodes:i,affectedType:null,onlyInSelection:pt[n.id]})):(t={affectedGroup:null,prevSelectedNodes:i,selectedNodes:et,affectedType:n.type,onlyInSelection:pt[n.id],userInput:!0},ot.fireEvent("change",ot,t),ot.fireEvent("externalChange",ot,t));c.isSetValueAfterSelect&&ut&&(ut.placeholder=wt.watermarkText||"")},se=function(n,t){var i=t?!!pt[n.id]:!pt[n.id];return i&&et.some(function(t){return t.id===n.id})},vt=new s.EntitiesNavigatorElements(yf,{icon:c.icon,hideIcons:c.hideIcons},bf),nr=function(n){var t=!1;return n.parent&&(t=r.EntityTypes[n.id]&&r.EntityTypes[n.id]!==r.EntityTypes.GROUPS),t},bu=function(n){return n.id===h||n.id===y},ku=function(n){return n.id===h},he=function(n){return r.EntityTypes[n.id]||n.isFake},kr=function(n){return he(n)||bu(n)},du=function(n){var t=n.groups[0];return t&&kr(t)&&n.groups.length===1},ce=function(n){var t=n.groups;return t.length===1&&t[0].groups.length},gu=function(n,t,i){return rt.showSelectDeselectAllButtons&&!t&&(rt.greedySelection||!i||ni)?vt.createSelectAllButton(n.type):vt.createDeselectAllButton(n.type)},nf=function(n,t,i){return rt.showHistoricalButton&&!t&&(rt.greedySelection||!i||ni)?vt.createHistoricalButton(n.type,rt.strings.showHistoricalText,ft.STATUS_ICON_CLASS):vt.createHistoricalButton(n.type,rt.strings.hideHistoricalText,ft.BROMM_ICON_CLASS)},tf=function(n,t,i){switch(n){case r.EntityTypes.DRIVERS:return i?wt.selectOnlyDriversText:wt.selectAllDriversText;case r.EntityTypes.VEHICLES:return i?wt.selectOnlyDevicesText:wt.selectAllDevicesText;default:return i?wt.selectOnlyInGroupText.replace("{0}",t):wt.selectAllGroupText.replace("{0}",t)}},le=function(n){if(rt.customHeaderButton){var t=vt.createCustomListButton(n,rt.customHeaderButton);if(t)return t+fr()}return""},ae=function(){return rt.showSelectDeselectAllButtons||rt.showDeselectAllButton},ve=function(n,t,i){if(n.groups.length!==0){var r=[],f=!1;return ae()&&(f=!0,!i&&rt.unfoldGroups?r=u(u([],r),n.groups.map(function(n){return gu(n,st.types[n.type],t.isAnyInCache(n.type))})):r.push(gu(n,st.isEverythingSelected,t.isAnyInCache(n.type)))),rt.showHistoricalButton&&(f=!0,r.push(nf(n,fi,t.isAnyInCache(n.type)))),f&&r.push(fr()),r}return[]},ye=function(n,t){var i=n.parent,o=function(n){return rt.showAllInButton&&(!bu(n)||rt.showOnlyInButton)},r=ve(n,t,i),f,e;return r.push(le(n)),i&&du(i)&&(i=i.parent),(i||rt.showOnlyInButton&&ku(n))&&(r=u(u([],r),[vt.createLevelUpButton(i&&n.parent),fr()]),o(n)&&(f=t.isInCache(n),ni&&kr(n)||(n.title=tf(n.type,n.name,!1),e=vt.createSelectButton(n,n.title,rt.showOnlyInButton?ft.ALL_IN_GRUOPS_CLASS:ft.STATUS_ICON_CLASS,ft.ALL_IN_BUTTON_CLASS_NAME,f&&!pt[n.id]),r.push(e)),rt.showOnlyInButton&&!nr(n)&&(n.title=tf(n.type,n.name,!0),r.push(vt.createSelectButton(n,n.title,ft.STATUS_ICON_CLASS,ft.ONLY_IN_BUTTON_CLASS_NAME,f&&pt[n.id]))))),r},pe=function(n){return n.length===1&&(n[0].id===h||n[0].id===y)&&!n[0].groups.length},we=function(n,t,i){var r=n.groups,u=n.groups.length,f=[],e,o;if(u&&!pe(r)){if(rt.unfoldGroups&&u>1&&r[0].groups&&(r[0].groups.length||i&&n.id==="-1")){for(e=0;e<u;e++)f.push.apply(f,r[e].groups);u=f.length}else f=r;return u===0?[vt.createNothingFoundButton()]:f.map(function(n){return(n.title=rt.getNodeName?rt.getNodeName(n):n.name,n.groups.length>0)?vt.createNavigationButton(n,undefined,ft.FOLDER_ICON_CLASS):n.id!==h&&!nr(n)?vt.createSelectButton(n,undefined,undefined,undefined,t.isInCache(n)):""})}return!rt.showOnlyInButton||!ku(n)?(o=rt.showHistoricalButton?nf(n,fi,!1):"",[o,vt.createNothingFoundButton()]):[]},be=function(n){var t=n.children[0]&&n.children[0].id;return!!(t&&t[t.length-1]!=="_"&&n.className!==ft.CLICK_BUTTON_CLASS_NAME&&n.className!==ft.NAV_BUTTON_CLASS_NAME)},ke=function(n){var t=n.children[0];return t&&t.checked},rf=function(n){n.children[0].checked=!1},de=function(n){n.children[0].checked=!0},gt,ge=function(n,t){for(var i=n;i&&i!==t;)i=i.parentNode;return i},no=function(n,t,r){var f,u,e=function(n,t,i){var r=i.getBoundingClientRect();return n>r.left&&n<r.left+r.width&&t>r.top&&t<r.top+r.height};return n.addEventListener("mouseup",function(n){u&&i.closest(n.target,r)===n.target&&(f=u)},!1),n.addEventListener("mouseout",function(i){u&&f&&(i.target===n||ge(i.relatedTarget,n))&&!e(i.clientX,i.clientY,n)&&t.close()}),{enable:function(){u=!0;f=!1},disable:function(){u=!1;f=!1}}},dr=function(n,t){for(var u=n.parentNode,f=i.textToHTML(t),e=f.length,r=0;r<e;++r)u.insertBefore(f[r],n);u.removeChild(n)},to=function(n,t){var i=n.querySelector("*[data-type='"+t+"']");return i&&i.parentNode&&i.parentNode.className.indexOf(ft.SELECT_CLASS)===-1?i.parentNode:null},io=function(n){return!!(n&&n.className&&n.className.indexOf(ft.DESELECT_ALL_BUTTON)===-1)},ro=function(n){var t;return t=n.className.indexOf(ft.ALL_IN_BUTTON_CLASS_NAME)>-1?ft.ONLY_IN_BUTTON_CLASS_NAME:ft.ALL_IN_BUTTON_CLASS_NAME,n.parentNode.querySelector("."+t)},uo=function(n){return(n||[]).reduce(function(n,t){return t&&!t.clickable&&(n[t.id||t]=!0),n},{})},uf=function(n,t,i){for(var o,u,r=n,f=n,e;r&&r.groups&&r.isFake;)f=r,r=r.groups[0];for(o=f&&f.groups?f.groups:[],e=0;e<o.length;e++)if(u=o[e],u.id===t&&u.type===i)return u;return null},ti,tr,gr=function(n){n.stopPropagation();n.preventDefault();ir(n.target)},nu=function(n){var t=n.which;(t===13||t===32)&&ir(n.target)},fo=function(n,t){var u=n.isFake&&n.groups&&n.groups.length,r,i;if(u&&n.type!==t)for(r=n.groups,i=0;i<r.length;i++)if(r[i].type===t)return r[i];return n},eo=function(n,t,i,r){var a=fo(ti,i),u=o.findGroup(a,t,"",!1),h=r===ft.ONLY_IN_BUTTON_CLASS_NAME,f,l;if(nr(u)&&(er[i]=!ke(n)),l=se(u,h),rt.showOnlyInButton&&r&&(f=ro(n),pt[t]=h?!pt[t]:!1),l?(st.types[i]=!1,st.isEverythingSelected=!1,rf(n),oe(u)):(!rt.multipleSelection&&ht&&(et=[],Array.prototype.forEach.call(ht.querySelectorAll("input:checked"),function(n){n.checked=!1})),f&&rf(f),ee(u,!!r),de(n),c.isSetValueAfterSelect&&hu(u.name),rt.closeOnSelect&&(wi=!0,setTimeout(ot.closeCombo,1))),rt.showSelectDeselectAllButtons){var e=to(n.parentNode,i),v=io(e),s=void 0;e&&(s=rt.greedySelection?!st.types[i]:!et.some(function(n){return n.type===i}),v!==s&&dr(e,s?vt.createSelectAllButton(i):vt.createDeselectAllButton(i)))}},oo=function(n,t,i){for(var u=t.querySelectorAll("input"+(rt.ignoreSelectionType?"":"[data-type='"+i+"']")+":checked"),f=u.length,r=0;r<f;r++)u[r].checked=!1;rt.showSelectDeselectAllButtons&&dr(n,vt.createSelectAllButton(i));ot.clearSelection(i,function(){ot.fireEvent("externalChange",ot,{affectedGroup:null,selectedNodes:[],affectedType:null})})},so=function(n,t,i,r){for(var u,o,e=t.querySelectorAll("input[data-type"+(rt.ignoreSelectionType?"":"='"+i+"'")+"]"),s=e.length,f=0;f<s;f++)u=e[f],be(u.parentNode)&&!u.checked&&(u.checked=!0);ni&&r?(o=uo(et)||{},et=et.concat(r.filter(function(n){return!n.clickable&&!o[n.id]})),rr(et)):cf(!1,i,!0);rt.closeOnSelectAll?(wi=!0,setTimeout(ot.closeCombo,1)):rt.showSelectDeselectAllButtons&&dr(n,vt.createDeselectAllButton(i));ot.fireEvent("externalChange",ot,{affectedGroup:null,selectedNodes:et,affectedType:null})},ho=function(n,t){for(var i=n;i&&i.tagName!=="LI"&&t!==i;)i=i.parentNode;return!i||!i.children[0]?undefined:i},ir=function(n){var u=yt,h=ti.groups&&ti.groups[0],l=ni?h&&h.groups:null,t=ho(n,u);if(!t)return undefined;if(wi)return!1;var f=t.children[0],c=(f.getAttribute("id")||"").split(s.ID_SEPARATOR),i=parseInt(f.hasAttribute("data-type")?f.getAttribute("data-type")||"":c[1],10),r=c[2],e=[].filter.call(t.classList,function(n){return af.indexOf(n)>-1}),a=e[0]&&e[0].replace(/\s/g,""),v=[ft.ONLY_IN_BUTTON_CLASS_NAME,ft.ALL_IN_BUTTON_CLASS_NAME],y=e.filter(function(n){return v.indexOf(n)>=0})[0];switch(a){case ft.SELECT_CLASS:eo(t,r,i,y);break;case ft.DESELECT_ALL_BUTTON:oo(t,u,i);break;case ft.SELECT_ALL_BUTTON:so(t,u,i,l);break;case ft.SHOW_HISTORICAL_BUTTON:ii.restore();fi=!fi;br();break;case ft.CUSTOM_BUTTON:typeof rt.customHeaderButtonHandler=="function"&&rt.customHeaderButtonHandler.call(t);ot.fireEvent("customButtonClick",ot,t);break;case ft.NAV_BUTTON_CLASS_NAME:cu();setTimeout(function(){var n=o.findNodeByTypeAndId(ti,i,r)||o.findNodeByTypeAndId(tr,i,r);ff(n||tr,tr||ti,!1,!1,!0)},100);break;case ft.CLICK_BUTTON_CLASS_NAME:ot.fireEvent("click",ot,[r,uf(ti,r,i)]);ot.closeCombo();break;case ft.SWITCHER_CLASS_NAME:ot.fireEvent("toggleSwitcher",ot,[r,uf(ti,r,i)]);ot.closeCombo()}return ii.reset(),!1},ff=function(n,t,r,e,o){var a=!(n.loading||f),s,c,h;if(ti=n,tr=t,e)return!1;di();s=i.extend({},ti);rt.showOnlyInButton||(s.groups=s.groups.filter(function(n){return!(kr(n)&&n.groups.length===0&&!r)}));du(s)&&(s=s.groups[0],s.parent&&(s.parent.groups=[s]));gt=s;!ni&&gt&&(gt.parent&&st.types[gt.type]?tu(gt,gt.type):gt.parent||gt.groups.forEach(function(n){st.types[n.type]&&(et=et.filter(function(t){return t.type!==n.type}),tu(n,n.type))}));c=ue();a&&yr();rt.unfoldSingleGroupOnSearch&&ce(s)&&!o&&(s=s.groups[0]);var v=u(u([],ye(s,c)),we(s,c,r)),l=i.textToHTML(v.join("")),y=l.length;for(h=0;h<y;++h)yt.insertBefore(l[h],oi);return yt.removeEventListener("click",gr,!1),yt.addEventListener("click",gr,!1),yt.removeEventListener("keypress",nu,!1),yt.addEventListener("keypress",nu,!1),ki(),f&&pi.resize(),co(o),!0},co=function(n){if(n===void 0&&(n=!1),document.activeElement!==ut&&(!document.activeElement||!i.closestByCondition(document.activeElement,function(n){return n===ht})))if(n)sr.focus(),yu();else{var t=ht===null||ht===void 0?void 0:ht.querySelector(g.FOCUSABLE_SELECTOR);t===null||t===void 0?void 0:t.focus();(t===null||t===void 0?void 0:t.classList.contains(ft.BUTTON_CLASS))&&t&&vu(t)}},ef=[],sf=function(n,t){return(n||ef).join(",")===(t||ef).join(",")},rr=function(n,t,i){var r=u([],et);et=n;ot.fireEvent("change",ot,{affectedGroup:null,selectedNodes:et,prevSelectedNodes:r,silent:i,userInput:!1});c.isSetValueAfterSelect&&et.length===1&&hu(et[0].name);t&&t(et)},lo=function(n,t){return!n.clickable&&(!t||n.type===t)},tu=function(n,t){var u,r,i;if(n)for(u=n.groups.length,et=et.filter(function(n){return n&&n.type!==t}),i=0;i<u;i++)lo(n.groups[i],t)&&(r=n.groups[i],r.isFake?et.push.apply(et,r.groups||[]):et.push(r))},vi=function(){lt||kt()},hi=!1,ur,hf=function(){ur&&ur.abort()},cf=function(n,t,i){vi();n&&(gt=null);t?(st.types[t]=!0,st.isEverythingSelected=st.isAllTypesSelected(),et=et.filter(function(n){return n.type!==t})):(st.selectAll(),et=[]);tu(gt,t);wu();hf();ot.fireEvent("change",ot,{affectedGroup:et,selectedNodes:et,userInput:i})},lf,ot;return ru&&i.addClasses(n,"org-filter"),lf=function(n){var i=function(n,t){return t&&(n[t.id||t]=!0),n},t=(n||[]).reduce(i,{});lt&&lt.style.display!=="none"&&Array.prototype.forEach.call(lt.querySelectorAll("."+ft.SELECT_CLASS+" > ."+ft.CHBX_CLASS),function(n){var r=n.getAttribute("id")||"",o=parseInt(n.getAttribute("data-type")||""),h=r.lastIndexOf(s.ID_SEPARATOR)+s.ID_SEPARATOR.length,i=r.substring(h,r.length),u,f,e;rt.showOnlyInButton&&(e=n.parentNode,u=e.className.indexOf(ft.ONLY_IN_BUTTON_CLASS_NAME)>-1,f=e.className.indexOf(ft.ALL_IN_BUTTON_CLASS_NAME)>-1);n.checked?t[i]||st.types[o]||(n.checked=!1):t[i]&&((u||f)&&(!u||!pt[i])&&(!f||pt[i])||(n.checked=!0))})},ot=i.extend(w.default(),{clearSelection:function(n,t,i){i===void 0&&(i=!1);var r={};n&&!rt.ignoreSelectionType?(r=(et||[]).reduce(function(t,i){return i.type!==n&&typeof t[i.type]!="string"&&(st.types[i.type]?t[i.type]="all":(t[i.type]=t[i.type]||[],t[i.type].push(i))),t},{}),r=Object.keys(st.types).reduce(function(n,t){return n.hasOwnProperty(t)||(n[t]=[]),n},r)):(st.deselectAll(),r[ri.type]=[]);c.isSetValueAfterSelect&&ut&&(ut.placeholder=wt.watermarkText||"");ot.setSelection(r,t,undefined,undefined,i)},selectAll:function(n){cf(!0,n,!1)},getEntitiesTypeToDisplay:function(){return ri},isAllSelected:function(n){return n?!!st.types[n]:st.isEverythingSelected},setFilter:function(n){return bt.setFilter(n)},getFilter:function(){return bt.getFilter()},setSelection:function(n,t,i,r,u){var h,w;u===void 0&&(u=!1);var f=n,c=[],o,s,b=function(n,t,i){return n.some(function(n){return i(t,n)})},k=function(n,t){return n.reduce(function(n,i){return b(n,i,t)||n.push(i),n},[])},a=function(n){return!Array.isArray(n)},d=function(n){return a(n)?Object.keys(n).reduce(function(t,i){return Array.isArray(n[i])&&t.push.apply(t,n[i]),t},[]):n||[]},v=function(n,t,i){var r=n,u=[],s={groups:[]},h=function(n,i){var r=l.Deferred();return t(n,i,r.resolve,r.reject),r.then(function(n){u.push(n)},cr),r.promise()},o=function(){i(u.length?u.reduce(function(n,t){return n.groups.push.apply(n.groups,t.groups),n}):s)},f;return(a(n)||(r={},r[ri.type]=n),f=Object.keys(r).map(function(n){return h(parseInt(n),r[n])}),f.length)?e.toTask(l.together(f)).done(o).fail(function(n){return n&&n.isAborted||cr(n)}):(o(),e.resolved())},y=function(n){rr(k(n.groups,function(n,t){return n.type===t.type&&n.id===t.id}),t,u)},g=function(n,t,i){i(bt.formatEntities({type:n,formatter:rt.formatter},t))},p="all",nt=function(n,t,i,r){bt.searchEntitiesByIDs(n,t,i,r)},tt=function(n){return typeof n=="string"&&n===p};if(hf(),tt(f))st.isEverythingSelected||ot.selectAll(),t&&t();else{for(o=d(f),o.length!==0||st.isAnythingSelected()||(f=ui.slice(0),o=f),!rt.multipleSelection&&o.length>1&&(f=o.splice(0,1),o=f),h=0;h<et.length;h++)c.push(et[h].id);s=o.map(function(n){return n&&n.id?n.id:n});c.sort();s.sort();sf(c,s)&&!st.isAnythingSelected()?r?rr(et,t):t&&t():(st.isEverythingSelected=!1,a(f)?Object.keys(f).forEach(function(n){st.types[parseInt(n)]=p===f[n]}):st.types[ri.type]&&(st.types[ri.type]=!1),!o.length||rt.innerSelectionHadling?rr(o,t):(w=i!==undefined?i:o.every(function(n){return!!n.name}),ur=w?v(f,g,y):v(f.map(function(n){return n.id||n}),nt,y)))}return setTimeout(function(){lf(s)},1),ur||e.resolved()},getSelection:function(){var t,n={length:0};for(var i in er)er[i]&&(n[i]="",n.length++);return t=n.length?et.filter(function(t){return!(t.type in n&&!nr(t))}):et,t.slice(0)},isOnlyInSelection:function(n){return pt[n]},setOnlyInSelectionForGroups:function(n,t){n.forEach(function(n){pt[n]=!0});(t||[]).forEach(function(n){pt[n]=!1})},openCombo:function(){vi();ct.open()},closeCombo:function(){vi();lt.style.display==="none"||ct.isHiding()||ct.close();wi=!1},isOpened:function(){return lt&&lt.style.display!=="none"&&ct&&!ct.isHiding()},isSearching:function(){return ni},getSearchString:function(){return ii.getValue()||""},setSearchString:function(n){ut&&(ut.value=n);gi()},isShowHistoric:function(){return fi},setShowHistoric:function(n){fi=n},disableFilter:function(){var t;ot.clearSelection();i.addClasses(n,"filterDisabled");hi=!0;ct?(ct.close(),ct.disable()):(at.removeEventListener("click",vr,!1),at.removeEventListener("click",kt,!1),ut&&ut.removeEventListener("focus",kt,!1));at&&at.setAttribute("disabled","disabled");ht===null||ht===void 0?void 0:ht.removeEventListener("keydown",dt,!1);ut&&(ut.removeEventListener("blur",ar,!1),ut.removeEventListener("keydown",dt,!1),ut.removeEventListener("keydown",gi,!1),ut.setAttribute("disabled","disabled"));(t=rt.keyDownSender)===null||t===void 0?void 0:t.removeEventListener("keydown",dt,!1)},enableFilter:function(){var t;hi&&(ut&&(ut.addEventListener("blur",ar,!1),ut.addEventListener("keydown",dt,!1),ut.addEventListener("input",gi,!1),ut.removeAttribute("disabled")),ht===null||ht===void 0?void 0:ht.addEventListener("keydown",dt,!1),(t=rt.keyDownSender)===null||t===void 0?void 0:t.addEventListener("keydown",dt,!1),at.removeAttribute("disabled"),ct?ct.enable():(at.addEventListener("click",vr,!1),at.addEventListener("click",kt,!1),ut&&ut.addEventListener("focus",kt,!1)),i.removeClasses(n,"filterDisabled"),hi=!1)},setNewOptions:function(n,t,r){var f,e,u,o;r===void 0&&(r=!1);u=n||{};hi||(vi(),t||ot.clearSelection(),n.type&&n.type!==rt.type&&st.updateType(n.type),ct&&lt.style.display!=="none"&&!r&&ct.close(),u.hasOwnProperty("entities")&&(rt.entities=u.entities,delete u.entities),u.popupWindowPosition&&u.popupWindowPosition!==rt.popupWindowPosition&&ct.setOptions({position:u.popupWindowPosition}),i.extend(!0,rt,u),u.minimumSelection&&(rt.minimumSelection=u.minimumSelection.slice(),ui=rt.minimumSelection),u.requestOptions&&(rt.requestOptions=rt.requestOptions||{},i.extend(rt.requestOptions,u.requestOptions)),u.requestOptionsSearching||(yi.requestOptions=yi.requestOptions||{}),u.entities&&(rt.entities=u.entities.slice()),bt.setEntities(rt.entities),o=["getEntities","searchEntities","searchEntitiesByIDs"],o.forEach(function(n){u.hasOwnProperty(n)&&(bt[n]=u[n]||bt.base[n])}),ri=or(rt),yi=iu(rt),wt=rt.strings,uu(wt.watermarkText));(f=u.keyDownSender)===null||f===void 0?void 0:f.removeEventListener("keydown",dt,!1);rt.keyDownSender=u.keyDownSender;hi||((e=rt.keyDownSender)===null||e===void 0?void 0:e.addEventListener("keydown",dt,!1))},destroyFilterList:function(){vi();clearInterval(df);di();lt&&lt.parentNode&&(lt.children[0].removeEventListener("click",gr,!1),lt.children[0].removeEventListener("keypress",nu,!1),lt.parentNode.removeChild(lt))},setMobileMode:function(n){lr(n&&rt.mobileTrigger||at);eu(fu(rt.menuWidth));ct.resize()},resize:function(){return ki()}}),ne(),ot}var c=this&&this.__assign||function(){return c=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},c.apply(this,arguments)},u=this&&this.__spreadArray||function(n,t){for(var i=0,u=t.length,r=n.length;i<u;i++,r++)n[r]=t[i];return n},i,r;Object.defineProperty(t,"__esModule",{value:!0});t.EntityTypes=t.getEntitiesNavigatorLocalStrings=t.PATTERN_LIMIT=void 0;i=require("../../vanillaExtension/vanilla");r=require("./dataItemsToTreeAdapter");Object.defineProperty(t,"EntityTypes",{enumerable:!0,get:function(){return r.EntityTypes}});var l=require("./../deferred"),e=require("../task"),o=require("../tree"),p=require("../entityUtilities"),a=require("../../utils"),w=require("../eventHandler"),b=require("./popupWindow"),k=require("./waiting"),d=require("./notifier"),g=require("./focusTools/focusUtils"),nt=require("../browser"),v=require("./geotabEntitiesNavigatorConstants"),s=require("./modules/geotabEntitiesNavigator/entitiesNavigatorElements"),h="GroupCompanyId",y="-"+h;t.PATTERN_LIMIT=400;var f=!1,tt=function(n,t){var i=4294967296,r=n/i,u=n%i,f=t/i,e=t%i;return(r&f)*i+(u&e)},it=function(n,u,s,h){var v,k=function(n,t){return n.name?n.name.toLowerCase()>t.name.toLowerCase()?1:-1:0},d=(h.strings||{}).searchLimitWarning||"",c=r.default(n,u,h),g=function(n,t,i,r,u,o,s){var a=null,c=[],v=function(){(c||[]).forEach(function(n){n.abort&&n.abort()});c.length=0};return s.requestQuota=h.requestQuota,n.length?(f=!0,c=n.map(function(n){return n(function(n){n.groups=n.groups.sort(k);t.push(n);setTimeout(function(){t.length===c.length&&(f=!1,c.length=0);i(t)},0)},r,u,o,s).fail(r)}),a=e.toTask(l.together(c)),a.abort=v):(f=!1,i(t)),a||e.resolved()},p=function(n,t,i){var f=[],u,e=n.type;for(u in r.EntityTypes)r.EntityTypes.hasOwnProperty(u)&&tt(e,r.EntityTypes[u])&&f.push(c.getFor(u));var s=[],h=n.formatter,l=n.pattern||"",a=n.requestOptions||{};v&&v.abort();v=g(f,s,function(){for(var n=o.createEnvelopeGroup(s,e),i=0;i<n.groups.length;i++)n.groups[i].realParent=n.groups[i].realParent||n.groups[i].parent,n.groups[i].parent=n;t(n)},i,h,l,a)},y=undefined,w=function(n,u,f,e,h){var c=n,l,v;if([r.EntityTypes.VEHICLES,r.EntityTypes.DRIVERS,r.EntityTypes.USERS].indexOf(n.type)!==-1&&(v=a.unique(u.split(",").map(function(n){return n.trim()}).filter(function(n){return n.length})),v.length>t.PATTERN_LIMIT&&(y&&y.hide(),y=s.displayInfo(d.replace("{0}",t.PATTERN_LIMIT.toString()),5),l=v.slice(0,t.PATTERN_LIMIT).join(","))),f){c=i.extend(c,{pattern:l||u});this.getEntities(c,function(n){e(n,n);c.pattern=""},h);return}this.getEntities(c,function(n){e(o.findGroup(n,null,l||u,!0),n)},h)},b=function(n,t,i,r){var f=n.type||n,e=n.formatter,u=o.createEnvelopeGroup([],f),s;t.length||i(u);c.getEntitiesById(f,t,function(n){u.groups=n.groups;i.apply(s,[u])},r,e)};return{base:{getEntities:p,searchEntities:w,searchEntitiesByIDs:b},getEntities:h.getEntities||p,searchEntities:h.searchEntities||w,searchEntitiesByIDs:h.searchEntitiesByIDs||b,getFilter:function(){return c.getFilter()},setFilter:function(n){return c.setFilter(n)},setEntities:function(n){c.setEntities(n)},formatEntities:function(n,t){return c.formatEntities(n.type||n,t,n.formatter)}}},rt=function(n,t){return t===void 0&&(t={}),c({selectAllGroupText:n("selectAllGroupText"),selectAllDriversText:n("selectAllDriversText"),selectAllDevicesText:n("selectAllDevicesText"),selectOnlyInGroupText:n("selectOnlyInGroupText"),selectOnlyDriversText:n("selectOnlyDriversText"),selectOnlyDevicesText:n("selectOnlyDevicesText"),searchLimitWarning:n("EntitiesLoaderSearchLimit"),watermarkText:n("watermarkText"),nothingFoundText:n("nothingFoundText"),levelUpText:n("levelUpText"),deselectAllText:n("deselectAllText"),selectAllText:n("selectAllText"),entireOrganizationText:n("GroupCompanyId"),itemsOfTypeNotFoundText:n("itemsOfTypeNotFoundText"),typeIsNotSupportedText:n("typeIsNotSupportedText"),showHistoricalText:n("showHistoricalText"),hideHistoricalText:n("hideHistoricalText"),openFilter:n("openFilter"),closeFilter:n("closeFilter"),closeNotification:n("Close notification")},t)};t.getEntitiesNavigatorLocalStrings=rt;t.default=ut})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/geotabEntitiesNavigator"),geotab.commonjs.generateExport("geotab/checkmate/ui/geotabEntitiesNavigator"));
(function(n,require,t){"use strict";function s(n,t,s,h){var l,a=i({},h),c;return r.addClasses(n,"org-filter"),r.hasClass(n,f)||r.addClasses(n,f),c=o.default(n,t,h),c.attachEvent("change",function(t){var i=t.selectedNodes&&t.selectedNodes.slice(0),r=t.affectedGroup,k=t.onlyInSelection,d=function(n){var i={},t=n.realParent||n.parent;for(c.isOnlyInSelection(t.id)&&(t=t.realParent||t.parent);t;)i[t.id]=t,t=t.realParent||t.parent;return i},v=!0,f=!1,y=function(n,t){return t.filter(function(t){return n.indexOf(t.id)===-1})},e=r?i.filter(function(n){return n.id!==r.id}):i,p=function(n,t){v=!1;s.showEntities(n,t)},w,o,b,h;!a.allowParentChildSelection&&r&&e.length&&(w=u.populateParentNodes([r]),o=u.findChildrenOfParent(r.id,e,w),o.length&&!k?(f=!0,i=y(o,i)):(b=d(r),h=e.filter(function(n){return b[n.id]&&!c.isOnlyInSelection(n.id)}).map(function(n){return n.id}),h.length&&(f=!0,i=y(h,i))));f?c.setSelection(i,undefined,!0):(l.fireEvent("selectionChanged",n,[l.getValue(),r,p]),v&&p(c.getSelection().map(function(n){var t=n.name,i=n.id;return{name:t,id:i,title:"","static":!1}})))}),s.attachEvent("reset",function(){var n=c.getSelection(),t=a.resetEntities||function(){return[]};c.setSelection(t(n))}),s.attachEvent("deselect",function(n){var t=c.getSelection(),i=t.filter(function(t){return t.id!==n});t.length!==i.length&&c.setSelection(i)}),c.attachToAll(function(t,i){t&&l.fireEvent(t,n,i)}),l=r.extend(e.default(),{getValue:function(){return(c.getSelection()||[]).map(function(n){return n.id||n})},setValue:c.setSelection,setFilter:c.setFilter,closeCombo:c.closeCombo,disableFilter:c.disableFilter,enableFilter:c.enableFilter,setNewOptions:function(n,t){t===void 0&&(t=!1);a=i(i({},a),n);c.setNewOptions(n,!0,t);s.setNewUIOptions(n)},isOnlyInSelection:c.isOnlyInSelection,setOnlyInSelectionForGroups:c.setOnlyInSelectionForGroups,setMobileMode:c.setMobileMode,getSearchString:c.getSearchString,setSearchString:c.setSearchString,resize:c.resize})}var i=this&&this.__assign||function(){return i=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var e=require("../eventHandler"),r=require("../../vanillaExtension/vanilla"),u=require("../entityUtilities"),o=require("./geotabEntitiesNavigator"),f="organizationFilter";t.default=s})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/organizationFilter"),geotab.commonjs.generateExport("geotab/checkmate/ui/organizationFilter"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.addMobileSection=void 0;var i=function(n,t,i){var u,r,f=function(){return'\n            <div class="geo-filter-mobile">\n                <div class="geo-filter-mobile__item">\n                    <div class="geo-filter-mobile__item-content mobile-filter-state"><\/div>\n                <\/div>\n                <div class="geo-filter-mobile__item">\n                    <div class="geo-filter-mobile__item-content">\n                        <div class="geo-text-input-with-icons geo-text-input-with-icons--stretched">\n                            <svg class="geo-text-input-with-icons__pre-icon" focusable="false"><use xlink:href="#geo-loupe"><\/use><\/svg>\n                            <input type="text" placeholder="'+t("searchGroupPlaceholderText")+'" class="geo-text-input-with-icons__input" autocomplete="off" aria-label="'+t("Search groups to filter by...")+'">\n                        <\/div>\n                    <\/div>\n                <\/div>\n            <\/div>\n        '};n.attachEvent("comboOpen",function(t){u||(u=f(),t.insertAdjacentHTML("afterbegin",u),r=t.querySelector(".geo-text-input-with-icons__input"),r.value=n.getSearchString(),r.addEventListener("input",function(t){var i=t.target.value;n.setSearchString(i)},!1),n.setNewOptions({keyDownSender:r}),i&&i())});n.attachEvent("comboClose",function(){r&&(r.value="")});n.attachEvent("search",function(n){r&&(r.value=n||"")})};t.addMobileSection=i})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/defaultHeader/organizationFillterUtils"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/defaultHeader/organizationFillterUtils"));
(function(n,require,t){"use strict";function e(n,t,e){var nt,a=e||{},tt=a.onChange||null,w=f(a.labels,t),b=a.isTriStateButton||!1,it=function(){return i.create("input",{type:"radio",id:r.generateId(),"class":"geo-switcher__input"})},rt=function(n){var t=n?"onLabelSwitcher":"offLabelSwitcher";return"geo-switcher__label centeredLabelText noTranslate "+t},et=function(n,t){var r=t.removeChild(n);return i.addClasses(r,"geo-switcher__input"),r},h=function(n){var t,u;if(n&&n.nodeName!=="INPUT"){var i={parent:n,containerElement:n,parentClass:""},r=n.children,f=r.length;for(t=0;t<f;++t)u=r[t].nodeName,u==="LABEL"?i[i.onLabel?"offLabel":"onLabel"]=r[t]:u==="INPUT"&&(i[i.onElement?"offElement":"onElement"]=r[t]);return i}return{parent:n.parentNode,onElement:n,parentClass:n.getAttribute("data-parent-class")||""}}(n),ot=function(n){var t="geo-switcher";return h.containerElement?(i.addClasses(h.containerElement,t),h.containerElement):i.create("span",{"class":t+(n?" "+n:"")})},ut=a.narrowSwitcherButton?" narrowSwitcher":"",d=h.parent||a.parent||document.body,o=h.onElement?h.containerElement?h.onElement:et(n,d):it(),s=h.offElement||it(),st=w.on,ht=w.off,c=h.onLabel,l=h.offLabel,p=ot(h.parentClass),ft=function(n,t){return{get:function(){return n.textContent},set:function(i){n.textContent=i||t}}},k=function(n){n.parentNode||p.appendChild(n)},v=function(t){var u=this===o?s:o,r=!0,f=this.checked,i=this.checked;f&&i?u.checked=!1:b||i||i||(this.checked=!0,r=!1);tt&&r&&t&&tt.call(n||this,nt)},ct=function(n){var t=n?o:s;t.checked||(t.checked=!0,v.call(t,!1))},lt=function(){b&&(s.checked=!1,o.checked=!1,v.call(o,!1))},at=function(){o.setAttribute("type","checkbox");s.setAttribute("type","checkbox")},vt=function(){o.setAttribute("type","radio");s.setAttribute("type","radio")},y,g;return o.id=o.id||r.generateId(),y=document.querySelector("label[for='"+o.id+"']"),y&&(y.id=y.id||r.generateId(),o.setAttribute("aria-describedby",y.id),s.setAttribute("aria-describedby",y.id)),c||(c=i.create("label",{"class":rt(!0)+ut,"for":o.id}),c.textContent=st),l||(l=i.create("label",{"class":rt(!1)+ut,"for":s.id}),l.textContent=ht),g=r.generateId(),o.setAttribute("type","radio"),o.setAttribute("name",g),s.setAttribute("name",g),o.addEventListener("change",v,!1),k(o),k(c),s.addEventListener("change",v,!1),k(s),k(l),i.toggleClasses(p,"geo-switcher--stretched",!!a.stretched),o.checked||(s.checked=!0),d!==p&&d.appendChild(p),nt={container:p,setValue:function(n){typeof n=="boolean"?ct(n):lt()},isOn:function(){return o.checked},isOff:function(){return s.checked},isIndeterminate:function(){return!s.checked&&!o.checked},changeState:function(n){b=n;b?at():vt()},disable:function(){o.setAttribute("disabled","disabled");s.setAttribute("disabled","disabled");i.addClasses(c,u);i.addClasses(l,u)},enable:function(){o.removeAttribute("disabled");s.removeAttribute("disabled");i.removeClasses(c,u);i.removeClasses(l,u)},isDisabled:function(){return!!o.getAttribute("disabled")},destroy:function(){s.removeEventListener("change",v,!1);o.removeEventListener("change",v,!1);c.parentNode&&(c.parentNode.removeChild(c),l.parentNode.removeChild(l));!h.offElement&&s.parentNode&&s.parentNode.removeChild(s)},onLabel:ft(c,w.on),offLabel:ft(l,w.off)}}Object.defineProperty(t,"__esModule",{value:!0});t.createVanillaSwitcher=void 0;var i=require("./vanilla"),r=require("../utils"),u="buttonDisabled",f=function(n,t){return n?n:{on:t("on")||"***On",off:t("off")||"***Off"}};t.createVanillaSwitcher=e})(geotab,geotab.commonjs.generateRequire("geotab/vanillaExtension/vanillaSwitcher"),geotab.commonjs.generateExport("geotab/vanillaExtension/vanillaSwitcher"));
(function(n,require,t){"use strict";var i=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=require("../../../../utils"),u=require("../../../../vanillaExtension/vanilla"),f=require("../../../../vanillaExtension/vanillaSwitcher"),e=require("./advancedEntitiesNavigatorUtilites"),o=require("../../../eventHandler"),s=function(n){function t(t,i){var r=n.call(this)||this;return r.translate=t,r.params=i,r.currentValue=e.DEFAULT_RELATION_OPERATOR,r}return i(t,n),t.prototype.render=function(n){var t=this,i,e=u.create("INPUT",{id:((i=this.params)===null||i===void 0?void 0:i.id)||"",type:"radio","class":"switcher"});n.appendChild(e);this.switcher=f.createVanillaSwitcher(e,r.echo,{labels:{on:this.translate("OperatorAnd"),off:this.translate("OperatorOr")},onChange:function(n){t.currentValue=n.isOn()?"And":"Or";t.fire("change",t.currentValue)}});this.switcher.setValue(this.currentValue==="And")},t.prototype.toggle=function(){this.value=this.currentValue==="And"?"Or":"And";this.fire("change",this.currentValue)},Object.defineProperty(t.prototype,"value",{get:function(){return this.currentValue},set:function(n){this.currentValue=n;this.switcher&&this.switcher.setValue(n==="And")},enumerable:!1,configurable:!0}),t}(o.SimpleEventHandler);t.default=s})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/advancedGeotabEntitiesNavigator/advancedOperatorSwitcher"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/advancedGeotabEntitiesNavigator/advancedOperatorSwitcher"));
(function(n,require,t){"use strict";function e(n,t,e,o,s){var y=o,p=[],g={viewText:"{0}",everythingText:e("All"),resetToDefaultText:e("Reset selection"),removeItem:e("Remove selection")},h=i.extend(!0,{},g,t||{}),w=h.viewText.replace("{0}","%s"),b=h.everythingText,c=i.create("div",{"class":"currentState node-select-container__state noTranslate"}),k=i.create("div",{"class":"entity-navigator-container node-select-container__control noTranslate","data-connected-popup":n.id||r.generateId()}),l,nt=function(n,t){return t&&t.displayGrouping?t.displayGrouping.map(function(t){return{text:t.text,items:n.filter(function(n){return t.condition(n)})}}):[{text:"",items:n}]},tt=function(){return"#geo-cross-thin"},v=function(n,t,i,u){var f=typeof i!="undefined"?" data-elem-id='"+i+"'":"",e=t?'title="'+r.htmlEscape(t)+'"':"",o=u?'<button class="filterCloseButton help-ignore" '+f+' title="'+h.removeItem+'" aria-label="'+h.removeItem+"\">\n                                <svg focusable='false' class='svgIcon geotabButtonIcons popupWindowTrigger bigger filterCloseCross'><use xlink:href=\""+tt()+'"><\/use><\/svg>\n                            <\/button>':"",s=u?"closeCrossStateItem":"stateItem--static";return"<div "+e+" class='help-ignore stateItem ellipsis "+s+"'>"+r.htmlEscape(n||"")+o+"<\/div>"},it=function(){var n=i.create("button",{"class":"resetButton node-select-container__control-element node-select-container__control-element--spacing-left geo-button help-ignore ellipsis"},{display:"none"});return n.textContent=t.resetToDefaultText||"",n},d=function(n){var t=n.currentTarget.getAttribute("data-elem-id");t&&a.fireEvent("deselect",a,t)},rt=function(){var t=n.querySelector(".geotab-filter__wrapper");t&&t.classList.add("node-select-container__control-element","node-select-container__control-element--spacing-right")},a;return b===""?i.hide(c):(i.show(c),c.innerHTML=w.replace("%s",v(b))),l=it(),l.setAttribute("title",h.resetToDefaultText),l.addEventListener("click",function(t){a.fireEvent("reset",n,t)},!1),k.appendChild(l),n.appendChild(k),n.appendChild(c),a=i.extend(u.default(),{getFilterElt:function(){return k},showEntities:function(n,t){var o,a,k,e,u;for(t===void 0&&(t=!1),o="",a=!1,rt(),n.length?(p=n.slice(),n[0].id!==f||n.length!==1||y?(a=n.some(function(n){return!n.static}),k=nt(n,y),o=k.reduce(function(n,t){return t.items.length>0?n+("\n                                "+(t.text?"<div class='groupTitleNavigatorDisplay'> <strong>"+r.htmlEscape(t.text)+": <\/strong> <\/div>":"")+"\n                                "+t.items.map(function(n){return v(n.name,n.title,n.id,s&&!n.static)}).join("")+"\n                            ").trim():n},"")):o=v(h.everythingText)):(p=[],o=v(h.everythingText)),i.toggle(l,!t&&a),e=c.querySelectorAll(".filterCloseButton"),u=0;u<e.length;u++)e[u].removeEventListener("click",d,!1);for(c.innerHTML=w.replace("%s",o),i.toggle(c,a||b!==""),e=c.querySelectorAll(".filterCloseButton"),u=0;u<e.length;u++)e[u].addEventListener("click",d,!1)},setNewUIOptions:function(n){var t=n||{};h=i.extend(!0,h,t.strings||{});w=h.viewText.replace("{0}","%s");t.hasOwnProperty("displayGrouping")&&(y=t);a.showEntities(p)}})}Object.defineProperty(t,"__esModule",{value:!0});var i=require("../../vanillaExtension/vanilla"),r=require("../../utils"),u=require("./../eventHandler"),f="GroupCompanyId";t.default=e})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/entitiesNavigatorDisplay"),geotab.commonjs.generateExport("geotab/checkmate/ui/entitiesNavigatorDisplay"));
(function(n,require,t){"use strict";function y(n,t,y,p,w){var nt=function(n){return n.GroupCompanyId={id:"GroupCompanyId",type:1},n},tt=nt({}),d=function(){return y.groups.getItemsByValue().then(function(n){return nt(e.treeToDictionary(e.createLinkedTree(n)))}).then(function(n){return tt=n,n})},ot=function(){return n.id||r.generateId()},st=ot()+"_navigator",it={strings:{selectAllGroupText:p("AllIn")+" {0}",selectOnlyInGroupText:p("OnlyIn")+" {0}",everythingText:p("noNodesSelected"),watermarkText:p("watermarkText"),nothingFoundText:p("nothingFoundText"),levelUpText:p("levelUpText"),deselectAllText:p("deselectAllText"),resetToDefaultText:p("resetSelectedGroups"),openFilter:p("openFilter"),closeFilter:p("closeFilter"),removeItem:p("Remove selection")},rootGroups:[f.ENTIRE_ORGANIZATION_GROUP_ID],filterGroups:[{id:f.ENTIRE_ORGANIZATION_GROUP_ID}],userScope:[{id:f.ENTIRE_ORGANIZATION_GROUP_ID}],multipleSelection:!0,componentForNavigatorDisplay:undefined,formatGroupDisplay:r.echo},b=function(){return i(i(i({},it),w),{strings:i(i({},it.strings),w.strings||{})})}(),ht=b.changedHandler||r.NOOP,rt=[{text:p("AllIn"),condition:function(n){return!k.isOnlyInSelection(n.id)}},{text:p("OnlyIn"),condition:function(n){return k.isOnlyInSelection(n.id)}}],g=w.rootGroups||[],ct=function(n){return n.length===1&&g.some(function(t){return t===n[0].id})},lt=r.makeBoolHash(g),at=function(n){return g.length===n.length&&n.every(function(n){return lt[n.id]})},ut,vt=b.showOnlyInButton?{displayGrouping:rt}:undefined,ft=b.componentForNavigatorDisplay,et=ft?ft:l.default(n,b.strings,p,vt,!0),k=s.default(et.getFilterElt(),t,et,{isInputFirstElement:!0,type:h.EntityTypes.GROUPS,strings:b.strings,minimumSelection:b.rootGroups,userScope:b.userScope,multipleSelection:b.multipleSelection,showOnlyInButton:b.showOnlyInButton,allowParentChildSelection:b.allowParentChildSelection,requestOptions:b.requestOptions,getNodeName:u.getGroupDescriptionRecursiveFn(p),listId:st,resetEntities:b.resetEntities});return o.addClasses(n,"node-select-container"),k.attachEvent("selectionChanged",function(n,t,i){d().then(function(n){var f=(k.getValue()||[]).map(function(t){return n[t]}).filter(r.echo),e=ct(f),o=f.map(function(t){for(var o=t.id,s=n[o],h=u.getGroupDescription(s,p),i=s.parent,f=h,l=t.color?t.color:undefined,c;i;)f=u.getGroupDescription(i,p)+"/"+f,i=i.parent;return c=b.formatGroupDisplay||r.echo,c({id:o,name:h,title:f,"static":e,color:l},t)});i(o,at(f));ht(f,t);ut.fire("change",[f,t])})}),d(),ut=o.extend(new c.SimpleEventHandler,{setSelectedNodes:function(n){var r=function(n){return{all:n.slice(),only:[]}},u=function(n){return n.reduce(function(n,t){var i=t.isOnlyInSelection?"only":"all";return n[i].push(t),n},{all:[],only:[]})},f=function(n){return{all:n[0],only:n[1]}},e=function(n,t){var e=Array.isArray(n[0]),i=e?f(n):t(n),o=i.all,s=i.only,r=s.map(function(n){return n.id}),u=o.map(function(n){return n.id});return{groups:r.concat(u),onlyInSelection:r,allInSelection:u}},o=b.showOnlyInButton?u:r,i=e(n||[],o),s=i.groups,h=i.onlyInSelection,c=i.allInSelection,t;return k.setOnlyInSelectionForGroups(h,c),t=a.Deferred(),k.setValue(s).andThen(function(){return v.toTask(d())}).done(function(){t.resolve()}).fail(function(n){t.reject(n)}),t.promise()},setFilter:function(n){b.filterGroups=n;k.setFilter(n)},getSelectedNodes:function(){return(k.getValue()||[]).map(function(n){var t=tt[n]||{id:n};return{id:n,name:u.getGroupDescription(t,p),color:t.color,isOnlyInSelection:!!(b.showOnlyInButton&&k.isOnlyInSelection(t.id))}})},closeCombo:function(){k.closeCombo()},setNewOptions:function(n){n&&(n.hasOwnProperty("showOnlyInButton")&&(b.showOnlyInButton=n.showOnlyInButton,n.displayGrouping=b.showOnlyInButton?rt:null),n.rootGroups&&(b.rootGroups=n.rootGroups,n.minimumSelection=b.rootGroups),k.setNewOptions(n))},validateSelectedNodes:function(){d().then(function(n){k.setValue((k.getValue()||[]).filter(function(t){return n[t]}))})},disable:function(){k.disableFilter()},enable:function(){k.enableFilter()}})}var i=this&&this.__assign||function(){return i=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});t.GroupSelect=void 0;var e=require("../entityUtilities"),o=require("../../vanillaExtension/vanilla"),s=require("./organizationFilter"),h=require("./geotabEntitiesNavigator"),c=require("../eventHandler"),r=require("../../utils"),l=require("./entitiesNavigatorDisplay"),a=require("../deferred"),v=require("../task"),u=require("../../utils/groupUtils"),f=require("../constants/groupConstants");t.GroupSelect=y})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/groupSelect"),geotab.commonjs.generateExport("geotab/checkmate/ui/groupSelect"));
(function(n,require,t){"use strict";var e=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=require("../../../../vanillaExtension/vanilla"),u=require("./advancedOperatorSwitcher"),s=require("../../groupSelect"),h=require("../../../eventHandler"),r=require("./advancedEntitiesNavigatorUtilites"),c=require("../../../../utils"),l=require("../../../constants/groupConstants"),f=function(){return{interSectionRelation:r.DEFAULT_RELATION_OPERATOR,sectionState:r.getDefaultState()}},a=function(n){function t(t,i,r){var e=n.call(this)||this,h,a,v,y,p;return e.translate=t,e.switcherId=c.generateId(),e.interSectionsSwitcher=new u.default(e.translate),e.operationSwitcher=new u.default(e.translate,{id:e.switcherId}),e.currentState=f(),e.contentEl=o.create("LI",{"class":"section form__section"}),h='\n            <div class="section__inter-section-switcher"><\/div>\n            <div class="section__main">\n                <div class="section__col section__col--left">\n                    <label class="section__label" for="'+e.switcherId+'">'+t("Operator")+'<\/label>\n                    <div class="section__switcher"><\/div>\n                <\/div>\n                <div class="section__col section__col--right">\n                    <label class="section__label">'+t("Groups")+'<\/label>\n                    <button class="section__remove-button geo-button geo-button--link">'+t("RemoveCondition")+'<\/button>\n                    <div class="section__groups"><\/div>\n                <\/div>\n            <\/div>\n        ',e.contentEl.innerHTML=h,a=e.content.querySelector(".section__inter-section-switcher"),e.interSectionsSwitcher.render(a),v=e.content.querySelector(".section__switcher"),e.operationSwitcher.render(v),y=e.content.querySelector(".section__groups"),e.groupsSelect=s.GroupSelect(y,i,r,t,{strings:{everythingText:t("GroupCompanyId"),resetToDefaultText:t("resetSelectedGroups")},userScope:[{id:l.ENTIRE_ORGANIZATION_GROUP_ID}]}),p=e.content.querySelector(".section__remove-button"),p.addEventListener("click",function(){return e.fire("onSectionRemove")}),e.interSectionsSwitcher.attach("change",function(n){return e.currentState.interSectionRelation=n}),e.operationSwitcher.attach("change",function(n){return e.currentState.sectionState.relation=n}),e.groupsSelect.attach("change",function(n){var t=n[0];e.currentState.sectionState.items=t;e.fire("onSectionItemsUpdated")}),e}return e(t,n),Object.defineProperty(t.prototype,"content",{get:function(){return this.contentEl},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var n=function(n){return n.id},t=this.currentState.sectionState,r=t.items.map(n).sort(),u=this.groupsSelect.getSelectedNodes().map(n).sort(),f=u.join()===r.join();return f?i(i({},this.currentState),{sectionState:i(i({},this.currentState.sectionState),{items:this.groupsSelect.getSelectedNodes()})}):i({},this.currentState)},t.prototype.setState=function(n){return this.currentState=n,this.interSectionsSwitcher.value=n.interSectionRelation!==undefined?n.interSectionRelation:r.DEFAULT_RELATION_OPERATOR,this.operationSwitcher.value=n.sectionState.relation!==undefined?n.sectionState.relation:r.DEFAULT_RELATION_OPERATOR,this.groupsSelect.setSelectedNodes(Array.isArray(n.sectionState.items)?n.sectionState.items:[])},t.prototype.clear=function(){return this.setState(f())},t.prototype.setFilter=function(n){this.groupsSelect.setFilter(n)},t.prototype.destroy=function(){var n;(n=this.contentEl.parentNode)===null||n===void 0?void 0:n.removeChild(this.contentEl)},t}(h.SimpleEventHandler);t.default=a})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/advancedGeotabEntitiesNavigator/advancedEntitiesNavigatorSection"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/advancedGeotabEntitiesNavigator/advancedEntitiesNavigatorSection"));
(function(n,require,t){"use strict";var u=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),r=this&&this.__assign||function(){return r=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var f=require("../../../../vanillaExtension/vanilla"),e=require("./advancedEntitiesNavigatorSection"),o=require("../../../eventHandler"),i=require("./advancedEntitiesNavigatorUtilites"),s=require("../../../deferred"),h=require("../../../../utils"),c=function(n){function t(t,r,u){var o=n.call(this)||this,h,c,s;return o.translate=t,o.connection=r,o.store=u,o.sections=[],o.addFormItem=function(n){var t=new e.default(o.translate,o.connection,o.store),i=t.setState(n).then(function(){o.fire("onSectionAdded");t.attach("onSectionRemove",function(){return o.removeFormItem(t)});t.attach("onSectionItemsUpdated",function(){return o.updateFormItem()})});return o.formSectionsContainer.appendChild(t.content),o.sections.push(t),i},o.removeFormItem=function(n){if(o.sections.length===1)o.sections[0].clear(),o.fire("onSimpleSectionRemove",o.sections);else{n.detach("onSectionRemove");n.destroy();var t=o.sections.indexOf(n);o.sections.splice(t,1);o.fire("onSectionRemove");t===0&&o.fire("onSimpleSectionRemove",o.sections)}},o.updateFormItem=function(){o.fire("onSectionUpdated")},o.clear=function(){o.sections.forEach(function(n){n.detach("onSectionRemove");n.destroy()});o.sections=[];o.fire("onSectionRemove")},o.container=f.create("div",{"class":"form advanced-groups-filter"}),h='\n            <div class="form__desc">'+t("AdvancedFilterFormDesc")+'<\/div>\n            <ul class="sections form__sections"><\/ul>\n            <div class="form__add-section">\n                <button class="add-section__button geo-button geo-caption">\n                    <svg focusable="false" class="svgIcon large geo-caption__pre-content"><use xlink:href="#geo-plus-new"><\/use><\/svg>\n                    <span class="geo-caption__content">\n                        '+t("AddCondition")+"\n                    <\/span>\n                <\/button>\n            <\/div>\n        ",o.container.innerHTML=h,o.formSectionsContainer=o.container.querySelector(".form__sections"),c=o.container.querySelector(".add-section__button"),s=function(){return{interSectionRelation:i.DEFAULT_RELATION_OPERATOR,sectionState:i.getDefaultState()}},c.addEventListener("click",function(){return o.addFormItem(s())},!1),o.addFormItem(s()),o}return u(t,n),Object.defineProperty(t.prototype,"content",{get:function(){return this.container},enumerable:!1,configurable:!0}),t.prototype.getState=function(){var t=this,n=this.sections.reduce(function(n,i){var r=i.getState();return t.sections.length>1&&h.isEntireOrganization(r.sectionState)&&r.sectionState.relation==="Or"?n:Object.keys(n).length?{relation:r.interSectionRelation,items:[n,r.sectionState]}:r.sectionState},{});return Object.keys(n).length?i.toFilterState(i.simplifyFilterState(n)):i.getDefaultState()},t.prototype.setState=function(n){var u=this,t;return this.clear(),t=function(n,f){return(f===void 0&&(f=i.DEFAULT_RELATION_OPERATOR),!i.isFilterStateLeafItem(n))?s.together(n.items.map(function(i){return t(i,n.relation)})):u.addFormItem({interSectionRelation:f,sectionState:r({},n)})},t(n).then(function(){return u.getState()})},Object.defineProperty(t.prototype,"simpleSection",{get:function(){return this.sections[0]},enumerable:!1,configurable:!0}),t.prototype.clearSelection=function(){return this.setState(i.getDefaultState())},t.prototype.setFilter=function(n){this.sections.forEach(function(t){return t.setFilter(n)})},t}(o.SimpleEventHandler);t.default=c})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/advancedGeotabEntitiesNavigator/advancedEntitiesNavigatorForm"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/advancedGeotabEntitiesNavigator/advancedEntitiesNavigatorForm"));
(function(n,require,t){"use strict";var r=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var u=require("./advancedEntitiesNavigatorForm"),f=require("../../../../vanillaExtension/vanillaDialog"),e=require("./advancedEntitiesNavigatorUtilites"),o=require("../../../eventHandler"),s=require("../../../deferred"),h=function(n){function t(t,i,r){var u=n.call(this)||this;return u.translate=t,u.connection=i,u.store=r,u.applyFilters=function(n){u.fire("onApply",n);u.dialog.close(!0);u.advForm.setState(n)},u.initialize(),u.attach("onSimpleChanged",function(n){var i=n.value,t=n.onStateUpdated;u.updateSimpleSectionState(i).then(function(){return t&&t()})}),u}return r(t,n),t.prototype.initialize=function(){var n=this,t;this.advForm=new u.default(this.translate,this.connection,this.store);t={title:this.translate("AdvancedGroupsFilter"),isModal:!0,buttons:[{name:this.translate("Cancel"),click:function(){n.advForm.setState(n.initState);n.dialog.close()}},{name:this.translate("ApplyFilters"),click:function(){return n.applyFilters(n.advForm.getState())},className:"geo-button geo-button--action"}],closeButtonCallback:function(t){return!t&&n.advForm.setState(n.initState)}};this.dialog=f.VanillaDialog(this.advForm.content,t,this.translate);this.advForm.attach("onSectionAdded",function(){n.dialog.resizeTo()});this.advForm.attach("onSectionRemove",function(){n.dialog.resizeTo()});this.advForm.attach("onSectionUpdated",function(){n.dialog.resizeTo()})},t.prototype.updateSimpleSectionState=function(n){var t=e.setFirstLeafItem(this.getState(),function(){return{relation:n.relation,items:n.selectedNodes}});return this.setState(t)},t.prototype.show=function(n){return this.trigger!==n&&(this.trigger=n),this.dialog.show(),this.initState=i({},this.advForm.getState())||{},s.resolved()},t.prototype.getState=function(){return this.advForm.getState()},t.prototype.setState=function(n){return this.advForm.setState(n)},t.prototype.clearSelection=function(){return this.advForm.clearSelection()},t.prototype.setFilter=function(n){this.advForm.setFilter(n)},t}(o.SimpleEventHandler);t.default=h})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/advancedGeotabEntitiesNavigator/advancedEntitiesNavigatorDialog"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/advancedGeotabEntitiesNavigator/advancedEntitiesNavigatorDialog"));
(function(n,require,t){"use strict";function v(n,t,v,y,p,w){var ft=new h.EntitiesNavigatorElements({},{},p),ct=r.toFilterState(y.value||[]),lt=i(i({},y),{value:[],menuWidth:y.menuWidth||250,silentInit:!0}),k=o.default(n,t,lt,w),at=u.listClasses(),d=new c.default(p,t,v),tt=u.listClasses(),it=n.querySelector(".geotab-filter__input"),vt=function(n){var t=n.selectedNodes&&n.selectedNodes.slice(0),r=n.affectedGroup,a=n.onlyInSelection,v=function(n){var i={},t=n.realParent||n.parent;for(b.isOnlyInSelection(t.id)&&(t=t.realParent||t.parent);t;)i[t.id]=t,t=t.realParent||t.parent;return i},u=!1,h=function(n,t){return t.filter(function(t){return n.indexOf(t.id)===-1})},f=r?t.filter(function(n){return n.id!==r.id}):t,c,o,l,s;!y.allowParentChildSelection&&r&&f.length&&(c=e.populateParentNodes([r]),o=e.findChildrenOfParent(r.id,f,c),o.length&&!a?(u=!0,t=h(o,t)):(l=v(r),s=f.filter(function(n){return l[n.id]&&!b.isOnlyInSelection(n.id)}).map(function(n){return n.id}),s.length&&(u=!0,t=h(s,t))));u?k.setSelection(t,undefined,!0):n.silent||d.fire("onSimpleChanged",{value:i(i({},n),{relation:nt.value}),onStateUpdated:function(){b.fireEvent("change",b,g())}})},et="simple-operator-switcher",b,rt,nt=new s.default(p,{id:et}),ut,ot=function(n){d.show(n)},yt=function(){var n=p("Operator"),t=function(){return{text:p("AdvancedGroupsFilter"),className:""+tt.ADV_BUTTON_CLASS_NAME}};return ft.createSwitcher(et,n)+ft.createCustomButton(undefined,t)},g=function(){return d.getState()},st=function(n,t){var u=r.toFilterState(n),e=r.getFirstLeafItem(u);return(nt.value=e.relation,r.compareFilters(g(),u))?(t&&t(g()),f.resolveTask()):f.toTask(d.setState(u)).andThen(function(){return k.setSelection(r.getFirstLeafItem(u).items.map(function(n){return i({},n)}),undefined,!0,!1,!0)}).andThen(function(){var n=g();t&&t(n);b.fireEvent("change",b,n)})},pt=function(n,t){k.clearSelection(undefined,undefined,!0);d.clearSelection().then(function(n){t&&t(n);b.fireEvent("change",b,n)})},wt=function(n){k.setFilter(n);d.setFilter(n)},ht=!1,bt=function(n){ht=n;k.setMobileMode(n)};return k.attachEvent("comboOpen",function(n){if(!rt){rt=yt();n.insertAdjacentHTML("afterbegin",rt);var t=n.querySelector("."+tt.SWITCHER_CLASS_NAME+" .geo-form__control");nt.render(t);ut=n.querySelector("."+at.ADV_BUTTON_CLASS_NAME);ut.addEventListener("click",function(n){return ot(n.target)},!1);ut.addEventListener("keydown",function(n){n.keyCode!==9||ht||(n.preventDefault(),it===null||it===void 0?void 0:it.focus())},!1)}b.fireEvent("comboOpen",b,n)}),k.attachEvent("comboClose",function(n){b.fireEvent("comboClose",b,n)}),k.attachEvent("change",function(n){vt(n)}),k.attachEvent("customButtonClick",function(n){a.hasClass(n,tt.ADV_BUTTON_CLASS_NAME)&&ot(n)}),k.attachEvent("toggleSwitcher",function(){nt.toggle()}),nt.attach("change",function(n){var t=k.getSelection(),i={affectedGroup:null,selectedNodes:t,prevSelectedNodes:t,affectedType:null,onlyInSelection:!1,relation:n};d.fire("onSimpleChanged",{value:i,onStateUpdated:function(){b.fireEvent("change",b,g())}})}),d.attach("onApply",function(n){var t=r.getFirstLeafItem(n);k.setSelection(r.getFirstLeafItem(t).items.map(function(n){return i({},n)}),undefined,!0,!1,!0);b.fireEvent("change",b,n)}),k.attachEvent("search",function(n){b.fireEvent("search",b,n)}),st(ct),b=i(i(i({},k),l.default()),{getSelection:g,setSelection:st,clearSelection:pt,setFilter:wt,setMobileMode:bt})}var i=this&&this.__assign||function(){return i=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=require("../../geotabEntitiesNavigator"),s=require("./advancedOperatorSwitcher"),h=require("../geotabEntitiesNavigator/entitiesNavigatorElements"),u=require("../../geotabEntitiesNavigatorConstants"),c=require("./advancedEntitiesNavigatorDialog"),l=require("../../../eventHandler"),r=require("./advancedEntitiesNavigatorUtilites"),f=require("../../../task"),e=require("../../../entityUtilities"),a=require("../../../../vanillaExtension/vanilla");t.default=v})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/advancedGeotabEntitiesNavigator/advancedEntitiesNavigator"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/advancedGeotabEntitiesNavigator/advancedEntitiesNavigator"));
(function(n,require,t){"use strict";function s(n,t,s,h,c,l){var v,y=r({},c),a,p;return u.addClasses(n,"org-filter"),u.hasClass(n,f)||u.addClasses(n,f),a=o.default(n,t,s,c,l),a.attachEvent("change",function(t){var r=!0,u=function(n,t){r=!1;h.showEntities(n,t)};v.fireEvent("selectionChanged",n,[v.getValue(),undefined,u]);r&&u(i.mapFilterState(t,function(n){var t=n.name,i=n.id;return{name:t,id:i,title:"","static":!1}}))}),h.attachEvent("reset",function(){a.clearSelection()}),h.attachEvent("deselect",function(n){var r=a.getSelection(),t=i.mapFilterState(i.filterFilterState(r,function(t){return t.id!==n}),function(n){var t=n.id;return{id:t}});i.isFilterStateLeafItem(t)&&!t.items.length&&(t=i.getDefaultState());a.setSelection(t)}),a.attachToAll(function(t,i){t&&v.fireEvent(t,n,i)}),p=function(){var n=a.getSelection();return i.mapFilterState(n,function(n){return n.id})},v=u.extend(e.default(),{getValue:p,setValue:a.setSelection,setFilter:a.setFilter,closeCombo:a.closeCombo,disableFilter:a.disableFilter,enableFilter:a.enableFilter,setNewOptions:function(n,t){t===void 0&&(t=!1);y=r(r({},y),n);a.setNewOptions(n,!0,t);h.setNewUIOptions(n)},isOnlyInSelection:a.isOnlyInSelection,setOnlyInSelectionForGroups:a.setOnlyInSelectionForGroups,setMobileMode:a.setMobileMode,getSearchString:a.getSearchString,setSearchString:a.setSearchString,resize:a.resize})}var r=this&&this.__assign||function(){return r=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var u=require("../../../../vanillaExtension/vanilla"),e=require("../../../eventHandler"),i=require("../advancedGeotabEntitiesNavigator/advancedEntitiesNavigatorUtilites"),o=require("../advancedGeotabEntitiesNavigator/advancedEntitiesNavigator"),f="advancedOrganizationFilter";t.default=s})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/advancedOrganizationFilter/advancedOrganizationFilter"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/advancedOrganizationFilter/advancedOrganizationFilter"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.createTagElement=void 0;var r=require("../../../../utils"),i=require("../../../../vanillaExtension/vanilla"),u=function(n,t,u,f){f===void 0&&(f=!1);var o=i.textToHTML('<div class="geo-tag filter-single'+(f?" geo-tag--html":"")+'">\n                                    <span class="geo-tag__name">'+(f?n:r.htmlEscape(n))+'<\/span>\n                                    <button class="geo-tag__remove" group-id="'+t+'" title="'+u+'" aria-label="'+u+'">\n                                        <svg class="svgIcon geo-tag__close-icon group-icon"><use xlink:href="#geo-cross-thin"><\/use><\/svg>\n                                    <\/button>\n                            <\/div>')[0],e=o.querySelector(".geo-tag__remove"),s=o.querySelector(".group-icon");return e.addEventListener("mouseover",function(){i.addClasses(s,"group-icon--hovered");i.addClasses(e,"geo-tag__remove--hovered")},!1),e.addEventListener("mouseout",function(){i.removeClasses(s,"group-icon--hovered");i.removeClasses(e,"geo-tag__remove--hovered")},!1),e.addEventListener("focus",function(){i.addClasses(o,"geo-tag--focused");i.addClasses(s,"group-icon--hovered");i.addClasses(e,"geo-tag__remove--hovered")},!1),e.addEventListener("blur",function(){i.removeClasses(o,"geo-tag--focused");i.removeClasses(s,"group-icon--hovered");i.removeClasses(e,"geo-tag__remove--hovered")},!1),o};t.createTagElement=u})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/filterState/selectionItem"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/filterState/selectionItem"));
(function(n,require,t){"use strict";var o=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});t.SelectionManager=void 0;var s=require("../../../eventHandler"),h=require("../filterState/selectionItem"),r=require("../../../../utils"),c=require("../../popupWindow"),u=require("../advancedGeotabEntitiesNavigator/advancedEntitiesNavigatorUtilites"),f=require("../../../../vanillaExtension/vanilla"),l=require("../../../constants/groupConstants"),e="-1",a=function(n){function t(t,i){var e=n.call(this)||this;return e.container=t,e.translate=i,e.widthForAnchor=75,e.itemMargin=12,e.collapsible=!0,e.currentSelection=u.getDefaultState(),e.createAllSelected=function(){var t=document.createElement("div"),n;return t.className="selection-manager__all",n=document.createElement("span"),n.innerHTML=e.translate("All groups selected"),n.className="selection-manager__all-big",t.appendChild(n),t},e.createPopupContainer=function(){var n=document.createElement("div");return n.className="selection-popup geo-popup--flex-width",n},e.createPopupAnchor=function(){var n=document.createElement("button");return n.className="geo-tag geo-tag--focusable selection-anchor",n.style.display="none",e.amountTag=document.createElement("span"),e.amountTag.className="geo-tag__name selection-anchor__amount",n.appendChild(e.amountTag),e.moreTag=document.createElement("span"),e.moreTag.className="geo-tag__name selection-anchor__name",n.appendChild(e.moreTag),e.arrowTag=document.createElement("span"),e.arrowTag.className="geo-tag__icon selection-anchor__icon",e.arrowTag.innerHTML='<svg class="selection-anchor__arrow toRotate" focusable="false"><use xlink:href="#geo-new-arrow-down"><\/use><\/svg>',n.appendChild(e.arrowTag),n},e.isAnchorVisible=function(){return e.popupAnchor.style.display!=="none"},e.generateItem=function(n,t,i){var u,r,o,s;return i===void 0&&(i=!1),u=h.createTagElement(n.name,n.id,e.translate("Remove selection"),i),u.classList.add("selection-manager__tag"),r=u.querySelector(".geo-tag__remove"),r&&r.addEventListener("click",function(){var n=r&&r.getAttribute("group-id")||"";e.remove(n)},!1),o=f.create("DIV",{"class":"selection-manager__item"}),o.appendChild(u),t&&(s=f.create("DIV",{"class":"selection-manager__relation"}),s.textContent=t,o.appendChild(s)),o},e.clearContainer=function(){for(var t,i,r=e.container.querySelectorAll(".selection-manager__item"),n=0;n<r.length;n++)t=r[n],i=t.parentElement,i&&i.removeChild(t)},e.resize=r.throttle(function(){e.setSelection(e.currentSelection)}),e.container.classList.add("selection-manager"),e.allSelectedElement=e.createAllSelected(),e.container.appendChild(e.allSelectedElement),e.popupContainer=e.createPopupContainer(),document.body.appendChild(e.popupContainer),e.popupAnchor=e.createPopupAnchor(),e.container.appendChild(e.popupAnchor),e.handleAmount(0),c.default(e.popupAnchor,{content:e.popupContainer}),e}return o(t,n),t.prototype.handleAmount=function(n){this.amountTag.textContent=n.toString();this.moreTag.textContent=this.translate("{0} more").replace("{0}",n.toString())},t.prototype.isAdvancedState=function(n){var t;return((t=n.items)===null||t===void 0?void 0:t.length)&&u.isFilterState(n.items[0])},t.prototype.getRelationStr=function(n){var t=n==="Or"?"OperatorOr":"OperatorAnd";return this.translate(t)},t.prototype.getAdvancedFilterString=function(n){var t=this,i=function(n,u){var f,e;return(u===void 0&&(u=""),f=n.items,t.isAdvancedState(n))?f.reduce(function(r,u){var f=""+(r?r+' <span class="selected-item__operator selected-item__operator--intersection">'+t.getRelationStr(n.relation)+"<\/span> ":"");return""+f+i(u,r)},u):(e=f.map(function(n){return'<span class="selected-item__subitem">'+r.htmlEscape(n.name)+"<\/span>"}).join(' <span class="selected-item__operator">'+t.getRelationStr(n.relation)+"<\/span> "),'<span class="selected-item__section">'+(f.length>1?"("+e+")":e)+"<\/span>")};return'<span class="selected-item">'+i(n)+"<\/span>"},t.prototype.add=function(n,t,i,r){var u;this.allSelectedElement.style.display="none";this.currentSelection.items.push(n);u=this.generateItem(n,r,n.isAdvanced);this.container.insertBefore(u,this.popupAnchor);var e=this.container.clientWidth,f=u.clientWidth+this.itemMargin,o=t<i-1?this.widthForAnchor:0;this.collapsible&&e<this.alreadyConsumedWidth+f+o||this.isAnchorVisible()?(this.container.removeChild(u),this.popupContainer.appendChild(u),this.handleAmount(this.popupContainer.children.length),this.popupAnchor.style.display="flex"):this.alreadyConsumedWidth+=f},t.prototype.setSelection=function(n){var i=this,r,t;this.currentSelection={relation:n.relation,items:[]};this.popupAnchor.style.display="none";this.popupContainer.innerHTML="";this.clearContainer();this.alreadyConsumedWidth=0;this.handleAmount(0);this.allSelectedElement.style.display="flex";this.isAdvancedState(n)?(r={id:e,name:this.getAdvancedFilterString(n),isAdvanced:!0},this.add(r,0,1)):(t=n.items.filter(function(n){return n.id!==l.ENTIRE_ORGANIZATION_GROUP_ID}),t.forEach(function(r,u){var f=i.getRelationStr(n.relation);i.add(r,u,t.length,u!==t.length-1?f:undefined)}))},t.prototype.remove=function(n){if(n===e)this.fire("reset"),this.setSelection(i(i({},this.currentSelection),{items:[]}));else{this.fire("remove",n);var t=this.currentSelection.items.reduce(function(t,i){return i.id!==n&&t.push(i),t},[]);this.setSelection(i(i({},this.currentSelection),{items:t}))}},Object.defineProperty(t.prototype,"isCollapsible",{set:function(n){this.collapsible=n},enumerable:!1,configurable:!0}),t}(s.SimpleEventHandler);t.SelectionManager=a})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/selectionManager/selectionManager"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/selectionManager/selectionManager"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.OrgFilterCounter=void 0;var i=require("../../../../vanillaExtension/vanilla"),r=require("../advancedGeotabEntitiesNavigator/advancedEntitiesNavigatorUtilites"),u=function(){function n(n,t){this.counterEl=i.create("SPAN",{"class":"notifications-button__amount geo-button-badge"});n.appendChild(this.counterEl);this.filterState=t}return Object.defineProperty(n.prototype,"filterState",{set:function(n){var t=r.isFilterState(n)?n.items.some(function(n){return r.isFilterState(n)})?1:n.items.length:n.length;this.counterEl.textContent=t.toString();i.toggle(this.counterEl,t!==0)},enumerable:!1,configurable:!0}),n}();t.OrgFilterCounter=u})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/defaultHeader/orgFilterCounter"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/defaultHeader/orgFilterCounter"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getOrgFilterButton=void 0;var i=function(n){return'<button class="org-filter-button header-input" title="'+n("openFilter")+'" aria-label="'+n("openFilter")+'"">\n        <span class="notifications-button org-filter-button__icon--open">\n            <svg class="notifications-button__icon" focusable="false"><use xlink:href="#geo-org-filter"><\/use><\/svg>\n        <\/span>\n        <span class="notifications-button org-filter-button__icon--close">\n            <svg class="notifications-button__icon" focusable="false"><use xlink:href="#geo-cross-thin"><\/use><\/svg>\n        <\/span>\n    <\/button>'};t.getOrgFilterButton=i})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/defaultHeader/orgFilter_html"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/defaultHeader/orgFilter_html"));
(function(n,require,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s=require("../../../../utils"),h=require("../../../../utils/groupUtils"),i=require("../../../../vanillaExtension/vanilla"),e=require("../../../constants/groupConstants"),c=require("../../../eventHandler"),o=require("../../../tree"),l=require("../../dataItemsToTreeAdapter"),a=require("../../organizationFilter"),v=require("./organizationFillterUtils"),y=require("../../urlState"),u=require("../advancedGeotabEntitiesNavigator/advancedEntitiesNavigatorUtilites"),p=require("../advancedOrganizationFilter/advancedOrganizationFilter"),w=require("../selectionManager/selectionManager"),b=require("../thresholdSize/thresholdSize"),k=require("./orgFilterCounter"),d=require("./orgFilter_html"),f="default-header__filter--hidden",g=12,nt=function(){function n(n,t,nt,tt,it,rt){var ut=this;this.container=n;this.notificationCenter=it;this.translate=rt;this.showFilter=function(){i.removeClasses(ut.container,f);ut.notificationCenter.detachEvent("Group.Add",{},ut.showFilter)};this.createSelectionManager=function(n){var r,f=i.create("div",{"class":"selection-manager noTranslate"}),t;return n.appendChild(f),t=new w.SelectionManager(f,ut.translate),t.attach("reset",function(){r.fireEvent("reset")}),t.attach("remove",function(n){r.fireEvent("deselect",r,n)}),window.addEventListener("resize",function(){t.resize()},!1),r=i.extend(c.default(),{showEntities:function(n){return t.setSelection(u.toFilterState(n))},getFilterElt:function(){return n},setNewUIOptions:s.NOOP,setCollapsible:function(n){t.isCollapsible=n}})};this.createFilterButton=function(){var n=i.textToHTML(d.getOrgFilterButton(ut.translate))[0];return ut.container.appendChild(n),n};this.setEmptyFilterStateClass=function(n){var t=u.toFilterState(n),r=!!t.items.length&&t.items[0].id!==e.ENTIRE_ORGANIZATION_GROUP_ID;ut.mobileFilterStateItem&&i.toggleClasses(ut.mobileFilterStateItem,"geo-filter-mobile__item--empty",!r)};var ht=y.default().getState("settings"),vt=ht.get().filter,ot=new b.ThresholdSize(window,640),at=i.create("DIV",{"class":"orgFilterState"}),ct=i.create("DIV",{"class":"orgFilterState"});n.appendChild(at);var st=i.create("DIV",{"class":"orgFilterState__container"}),lt=this.createSelectionManager(st),et=this.createFilterButton(),pt=new k.OrgFilterCounter(et.querySelector(".org-filter-button__icon--open"),vt||[]),wt=function(){return ot.isMobilePreview?document.body.clientWidth-2*g:t?250:undefined},yt=function(n){return n?"bottom_left":"bottom_right"},ft={strings:{selectAllGroupText:rt("EverythingInFilterText"),watermarkText:rt("filterWatermarkText"),nothingFoundText:rt("nothingFoundText"),levelUpText:rt("levelUpText"),deselectAllText:rt("deselectAllText"),selectAllText:rt("selectAllText"),entireOrganizationText:rt("GroupCompanyId"),openFilter:rt("openFilter"),closeFilter:rt("closeFilter"),searchGroupPlaceholderText:rt("searchGroupPlaceholderText")},isInputFirstElement:!0,value:vt,minimumSelection:["GroupCompanyId"],type:l.EntityTypes.GROUPS,getNodeName:h.getGroupDescriptionRecursiveFn(rt),customClassForFilterList:"organizationFilter",searchEntities:function(n,t,r,u,f){this.base.searchEntities(n,"",r,function(n){var f=t.toLowerCase(),r=i.extend(!1,{},n),e=o.recursiveSearchByTree(n,f);r.groups=o.sortByBranchesAndLeaves(e);u(r,r)},f)},isInBody:!1,mobileTrigger:et,hasComplexPopup:ot.isMobilePreview,menuWidth:wt,popupWindowPosition:yt(ot.isMobilePreview)};ot.isMobilePreview||at.appendChild(st);lt.setCollapsible(!ot.isMobilePreview);ot.attach("change",function(n){var i=n.isMobilePreview?ct:at;i.appendChild(st);lt.setCollapsible(!n.isMobilePreview);ut.organizationFilter.setNewOptions({hasComplexPopup:ot.isMobilePreview||t,popupWindowPosition:yt(n.isMobilePreview)},!0);setTimeout(function(){return ut.organizationFilter.setMobileMode(n.isMobilePreview)},100)});t?(ft.strings=r(r({},ft.strings),{OperatorAnd:rt("OperatorAnd"),OperatorOr:rt("OperatorOr"),AdvancedGroupsFilter:rt("AdvancedGroupsFilter"),Cancel:rt("Cancel"),ApplyFilters:rt("ApplyFilters"),AdvancedFilterFormDesc:rt("AdvancedFilterFormDesc"),Operator:rt("Operator"),AddCondition:rt("AddCondition"),GroupCompanyId:rt("GroupCompanyId"),resetSelectedGroups:rt("resetSelectedGroups"),RemoveCondition:rt("RemoveCondition"),Groups:rt("Groups"),AllIn:rt("AllIn"),OnlyIn:rt("OnlyIn"),"Remove selection":rt("Remove selection"),Close:rt("Close")}),ft.hasComplexPopup=!0,this.organizationFilter=p.default(n,nt,tt,lt,ft,rt)):this.organizationFilter=a.default(n,nt,lt,ft);v.addMobileSection(this.organizationFilter,rt,function(){var n;ut.mobileFilterStateItem=(n=ut.container.querySelector(".mobile-filter-state"))===null||n===void 0?void 0:n.parentNode;ut.setEmptyFilterStateClass(ht.get().filter)});this.organizationFilter.attachEvent("comboOpen",function(n){if(!ct.parentNode){var t=n.querySelector(".mobile-filter-state");t&&t.appendChild(ct);st.parentNode||ct.appendChild(st)}i.addClasses(et,"org-filter-button--open");et.setAttribute("title",ft.strings.closeFilter);et.setAttribute("aria-label",ft.strings.closeFilter)});this.organizationFilter.attachEvent("comboClose",function(){i.removeClasses(et,"org-filter-button--open");et.setAttribute("title",ft.strings.openFilter);et.setAttribute("aria-label",ft.strings.openFilter)});i.addClasses(n,"noTranslate "+f);ht.attachEvent("change",function(n){var i=n.filter||[];pt.filterState=i;u.isFilterState(i)&&!t?ht.set({filter:[e.ENTIRE_ORGANIZATION_GROUP_ID]}):ut.organizationFilter.setValue(i);ut.setEmptyFilterStateClass(i)});tt.groups.getItemsByValue().then(function(t){t.length>1?i.removeClasses(n,f):it.attachEvent("Group.Add",{},ut.showFilter)})}return Object.defineProperty(n.prototype,"filter",{get:function(){return this.organizationFilter},enumerable:!1,configurable:!0}),n}();t.default=nt})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/defaultHeader/orgFilter"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/defaultHeader/orgFilter"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BookmarksSet=void 0;var i=function(){function n(n,t,i,r,u){var f=this;this.desktopBookmarks=n;this.mobileBookmarks=t;this.bookmarks=[];this.changeRenderer(this.renderer,r.isMobilePreview);r.attach("change",function(n){var t=n.isMobilePreview;f.changeRenderer(f.renderer,t)});i.attach("change",function(n){var t=n.bookmarks;f.render(t)});u.attachEvent("change",function(n){f.activePage=n.page});this.activePage=u.get().page}return n.prototype.changeRenderer=function(n,t){var i="";n&&(n.shown=!1,i=n.activePage);this.renderer=t?this.mobileBookmarks:this.desktopBookmarks;this.renderer.shown=!0;this.renderer.render(this.bookmarks);this.renderer.activePage=i},n.prototype.render=function(n){this.renderer.render(n);this.bookmarks=n},Object.defineProperty(n.prototype,"activePage",{get:function(){return this.renderer.activePage},set:function(n){this.renderer.activePage=n},enumerable:!1,configurable:!0}),n}();t.BookmarksSet=i})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/bookmarkSet/bookmarksSet"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/bookmarkSet/bookmarksSet"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.MainMenuBookmarkRender=void 0;var i="Bookmarks",r=function(){function n(n,t){this.mainMenu=n;this.translate=t;this.isShown=!1;this.activePage=""}return n.prototype.clearPreviousBookmarks=function(){var n=this.mainMenu.getItem(i),r=n?n.children||[]:[],t=r.map(function(n){return n.link||""}).filter(function(n){return n});t.length>0&&this.mainMenu.removeItems(t.map(function(n){return{hash:n,dataAttr:{type:"bookmark"},menuName:""}}))},n.prototype.render=function(n){var t=this;(this.clearPreviousBookmarks(),n.length!==0)&&this.mainMenu.addItems(n.filter(function(n){return n.link}).map(function(n){var r=t.translate(n.title);return{menuName:r,icon:n.icon,dataAttr:{type:"bookmark",skipFromSearch:!0},hash:n.link,path:i+"/"}}))},Object.defineProperty(n.prototype,"shown",{get:function(){return this.isShown},set:function(n){this.isShown=n;n||this.clearPreviousBookmarks()},enumerable:!1,configurable:!0}),n}();t.MainMenuBookmarkRender=r})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/bookmarkSet/mainMenuBookmark/mainMenuBookmarks"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/bookmarkSet/mainMenuBookmark/mainMenuBookmarks"));
(function(n,require,t){"use strict";var i,r,u,f;Object.defineProperty(t,"__esModule",{value:!0});t.renderBookmarkLink=t.createBookmarkSetTemplate=void 0;i=require("../bookmarkCell/bookmarkCell");r=function(n,i){return('\n        <nav class="bookmark-set">\n            '+n.map(t.renderBookmarkLink).join("")+"\n            "+f(i)+"\n        <\/nav>\n    ").trim()};t.createBookmarkSetTemplate=r;u=function(n){return('\n        <a class="bookmark-set__slot bookmark-set__link" data-page="'+n.page+'" title="'+n.description+'" aria-label="'+n.description+'">\n            '+i.renderBookmarkSetCell(n.title,n.icon)+"\n        <\/a>\n    ").trim()};t.renderBookmarkLink=u;f=function(n){var t=n("Show the main menu");return('\n        <button class="bookmark-set__slot bookmark-set__more-trigger" title="'+t+'" aria-label="'+t+'">\n            '+i.renderBookmarkSetCell(n("More"),"geo-list-default","bookmark-set__open-trigger")+"\n            "+i.renderBookmarkSetCell(n("Close"),"geo-cross-thin","bookmark-set__close-trigger",!0)+"\n        <\/button>\n    ").trim()}})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/bookmarkSet/footerBookmarks/footerBookmarks_html"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/bookmarkSet/footerBookmarks/footerBookmarks_html"));
(function(n,require,t){"use strict";var f=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),r=this&&this.__assign||function(){return r=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});t.FooterBookmarks=void 0;var i=require("../../../../../vanillaExtension/vanilla"),e=require("../../../../eventHandler"),u=require("../bookmarkCell/bookmarkCell"),o=require("./footerBookmarks_html"),s=function(n){function t(t,u,f,e,s,h){var c=n.call(this)||this;return c.defaultBookmarks=u,c.active=f,c.linksWatcher=e,c.translate=h,c.hiddenModifier="bookmark-set--hidden",c.openTriggerModifier="bookmark-set--trigger-opened",c.links=[],c.links=u,c.container=i.textToHTML(o.createBookmarkSetTemplate(u.map(function(n){return r(r({},n),{link:c.linksWatcher.getMenuLink(n.link,"",!1)})}),h))[0],t.appendChild(c.container),c.moreHandler=c.container.querySelector(".bookmark-set__more-trigger"),c.moreHandler.addEventListener("click",function(){var n=i.hasClass(c.container,c.openTriggerModifier);c.changeMenuState(!n);n?s.collapse():s.expand()},!1),s.attach("change",function(n){c.changeMenuState(n)}),e.attach("onChange",function(){c.render(c.links)}),c}return f(t,n),t.prototype.merge=function(n){return this.defaultBookmarks.map(function(t,i){return n[i]&&n[i].link?n[i]:t})},t.prototype.changeMenuState=function(n){i.toggleClasses(this.container,this.openTriggerModifier,n);var t=this.translate(n?"Hide the main menu":"Show the main menu");this.moreHandler.title=t;this.moreHandler.setAttribute("aria-label",t)},t.prototype.render=function(n){var t=this,i,r;this.links=this.merge(n);i=this.container.querySelectorAll("[data-page]");Array.prototype.forEach.call(i,function(n,i){var r=t.links[i],f=t.linksWatcher.getMenuLink(r.link,"",!1);if(r.page===n.dataset.page){n.href=f;return}n.dataset.page=r.page;n.href=f;n.setAttribute("aria-label",r.description);n.setAttribute("title",r.description);n.innerHTML=u.renderBookmarkSetCell(r.title,r.icon)});r=this.active;this.active="";this.activePage=r},Object.defineProperty(t.prototype,"shown",{get:function(){return!i.hasClass(this.container,this.hiddenModifier)},set:function(n){i.toggleClasses(this.container,this.hiddenModifier,!n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activePage",{get:function(){return this.active},set:function(n){var t,r;this.active!==n&&(this.changeMenuState(!1),this.active=n,t=this.container.querySelector("[data-page] ."+u.ACTIVE_STATE),t&&i.removeClasses(t,u.ACTIVE_STATE),r=this.container.querySelector("[data-page='"+n+"']"),r&&i.addClasses(r.children[0],u.ACTIVE_STATE))},enumerable:!1,configurable:!0}),t}(e.SimpleEventHandler);t.FooterBookmarks=s})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/bookmarkSet/footerBookmarks/footerBookmarks"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/bookmarkSet/footerBookmarks/footerBookmarks"));
(function(n,require,t){"use strict";var i=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});t.MainMenuLinkWatcher=void 0;var r=require("../../../eventHandler"),u=require("../advancedGeotabEntitiesNavigator/advancedEntitiesNavigatorUtilites"),f=function(n){function t(t){var i=n.call(this)||this;return i.encode=t,i}return i(t,n),Object.defineProperty(t.prototype,"filter",{get:function(){return this.filterVal},set:function(n){this.filterVal=n;this.fire("onChange")},enumerable:!1,configurable:!0}),t.prototype.getMenuLink=function(n,t,i){var r=this.filterVal;return n&&!i?"#"+this.encode({groups:{page:n,groups:t?{type:t}:undefined},settings:{filter:r&&(u.isFilterState(r)||r.length)?r:undefined}}):n},t}(r.SimpleEventHandler);t.MainMenuLinkWatcher=f})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/modules/mainMenu/mainMenuLinkWatcher"),geotab.commonjs.generateExport("geotab/checkmate/ui/modules/mainMenu/mainMenuLinkWatcher"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.AddinLoader=void 0;var i=require("../parsers/storedAddin"),r=function(){function n(n){this.loader=n}return n.prototype.load=function(){return this.loader.getItemsByValue().then(function(n){return n.map(function(n){return i.toStoredAddin(n,n.url||"")})})},n}();t.AddinLoader=r})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/addinsTools/addinLoaders/addinLoader"),geotab.commonjs.generateExport("geotab/checkmate/addinsTools/addinLoaders/addinLoader"));
(function(n,require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.normalizeDefaultPageName=void 0;var i=function(n){return n&&n.length>0?n[0].toLowerCase()+n.substring(1):""};t.normalizeDefaultPageName=i})(geotab,geotab.commonjs.generateRequire("geotab/utils/defaultPageUtils/normalizeDefaultPageName"),geotab.commonjs.generateExport("geotab/utils/defaultPageUtils/normalizeDefaultPageName"));
(function(n,require,t){"use strict";function vu(t){var hf=ui.Brand(t.customHeader,t.customHome),cf="geoSessionVersion",vu=n.getSharedVariable("default"),wu,wf=new ou.MainMenuLinkWatcher(or.encode),bf="addin-",lf=t.center,ef=new st.EmptyUserProfileLoader,af=new ct.EmptyUnitOfMeasureLoader,yu=lt.LocalizerConstructor(hu.getUserProfileUtils(function(){return ef.getDetails()},function(n){return af.getUnit(n)})),uf=c.default(yu.translateKey),gu=yt.default.getInstance(null,yu),vf={page:""},nf=function(n){return n&&!n.isAborted&&gu.handleError(n),n},te=function(){return window.device&&window.device.platform&&window.device.platform==="iOS"},tf=h.CreateWithCaution(yu.translateKey,nf,!1),ie=function(n,t){return vu.entitiesLoader.devices.addItem({serialNumber:t,name:n,enableMustReprogram:!tr.default(yu.translateKey).isCustomDevice(t),groups:vu.currentUser.companyGroups.map(function(n){return{id:n.id}}),activeFrom:(new Date).toISOString(),activeTo:ir.MaxDate.toISOString()})},kf=function(n){var t=r.Deferred();return yu.getStateTask().andThen(function(){t.resolve(yu.translateSentences(n).then(function(n){return[n.translation,c.default(yu.translateKey)]}))}),t.promise()},re=function(t){var u=n.location.getVendorPrefix(),f=["gov"].indexOf(u.prefix)>=0&&["geotabgov"].indexOf(u.domain)>=0,i="GovWarningShown",e=["**************WARNING ****************","This is a Federal Government computer system that is FOR OFFICIAL USE ONLY. This system is subject to monitoring. Therefore, no expectation of privacy can be assumed. Individuals found performing unauthorized activities are subject to disciplinary action including criminal prosecution."],r;f&&(t.attach("login",function(){var n=tf.getItem(i);n||kf(e).then(function(n){var t=n[0],r=n[1];tf.setItem(i,!0);r.displayPopupNotification({title:t[0],message:t[1],type:c.NotificationType.NEWS})})}),r=function(){tf.removeItem(i)},t.attach("loginFailed",r),t.attach("logout",r))},ue=function(n,r,u){pu.hasCustomPage(n)?(vu.connection.call("Add",{typeName:"Audit",entity:{name:"MiscPageView",comment:n}}).beginInvoke(i.NOOP,i.NOOP).fail(vu.defaultErrorHandler),r||ri.PureCustomerPageStart(n,{container:t.container,pageName:n.replace(bf,""),realPageName:n,translation:u})):vu.customButtons&&vu.customButtons.bind(n)},rf,bu,du=new vt.MenuResizer(t.menu,t.menuToggle,tf,yu.translateKey,t.menuOverlay),df=function(){var n,i;pu&&(n=pu.getCurrentPage(),n&&n.resize&&n.resize());i=t.header.offsetHeight;t.center.style.top=i+"px";t.menu.style.top=i+"px"},gf=r.Deferred(),fe=function(){vu.navigator=pu;vu.defaultErrorHandler=nf;vu.hash=pf;vu.localizer=yu;vu.pageLoadingPromise=gf.promise();pu.pageChange(ue);hf.addCustomHome();window.addEventListener("resize",function(){du.resizeLayout();df();wu&&(wu.mode=du.isCollapsed()?f.MainMenuMode.NARROW:f.MainMenuMode.WIDE)},!1);document.addEventListener("keydown",function(n){te()&&(window.focus(),n.target&&n.target.focus())},!1)},ee=function(r,u,f,e,o,s,h){var c=n.location.getVendorPrefix().domain,l=it.createLiveChatLink(t.menu,document.body,hr.toUserInfo(r,u,f,c||"geotab"),new rt.LiveChatPipeline(et.createPipeLineDialogs(s,pu.getLinkTo,r.id,vu.entitiesLoader.users.setItem,document),s,h,navigator.language||""),ne,window,e,s,i.isWhiteLabeled(),vu.isThirdPartyLoggingAllowed,o);it.listenToExternalChatOpen(pu,l)},oe=function(n,t,i,u,f,e,o,s,h){i.sendRequests();var c=b.requestDirectAcceptance(i);c.catch(function(){return!1}).then(function(t){ee(e,f,vu.connection.token.database,u,t,n,h)});c.then(function(){return b.checkDirectAdminAccess(f.customCode||"",window.location.host.toLowerCase(),f.directSupportAcceptedDate,e,s)?(g.updateTicketsMainMenu(u,t,n,o),u.activateItem(pu.getCurrentPageName(),""),r.resolve(!0)):r.reject(!1)}).catch(function(){return g.removeTicketsFromMainMenu(u,t),!1})},se=function(n,t){(t("ExceptionsList")?gr.listServiceGroups(vu.entitiesLoader,[]):r.resolve([])).then(function(t){t.length||n.removeItems([{hash:"routeCompletion",menuName:""}])})},ne=function(){(du.isMobile()||du.isSmallScreenSize())&&du.collapse()},he=function(l,b,g,it){var hi=vu.navigator,li=c.default(yu.translateKey),dt=i.translationsAggregator(yu),lt=dt.translateFn(),gr=new nr.AddinResolver(function(n){return p.getAddin(n,l.getCredentials(),p.loadConfigFiles).catch(function(t){return console.error("Addin throw an error:",n,t),{}})}),vt=g.pagesSecurity,ou=function(n){return n.filter||[]},hu=function(){if(wu){var n=wu,t=function(n){return n>99?"99+":n.toString()};ri.unreadMessages.then(function(i){n.updateCounterBadge("messages",i?t(i):"")})}},ce=function(){var i=ff?ff.get():[],n;return wu?wu:(n=new f.MainMenu(t.menu,vt.hasAccessToPage,ii,du,yu,wf),wu=n,n.build(),n.mode=f.MainMenuMode.WIDE,hu(),u.hide(t.menu),oe(yu.translateKey,vt,vu.entitiesLoader,n,vu.systemSettings,b,vu.notificationCenter,yt,li),se(n,g.hasAccessTo),r.together([yu.translateHtml(t.menu),yu.translateSentences(s(s(s(s([],rt.LiveChatPipeline.translations(),!0),et.translations(),!0),ot.translations,!0),y.PageBookmarkService.translations(),!0))]).then(function(r){var f=r[0],e=r[1];dt.add(f.dict);dt.add(e.dict);n.filter=ou(i);di(pu.getCurrentPageName(),pu.getState().type);u.show(t.menu);du.resizeLayout();ai.createPrefetchLinks(t.menu,window.document.head,function(n){var t=n.split("#")[1]||"";return pu.isPageCreated(t.split(",").shift()||"")});cr.attachSelfHelpLaunch(ye,du,n,t.menu.querySelector("#navigationId")||undefined,t.header.querySelector("#loggedInState_support"),t.menu.querySelector("[data-orig='selfHelp']"))}),n)},yt=function(n){return n&&g.hasAccessTo(n)},sf=yt("LaunchAddIn"),di=function(n,t){wu&&wu.activateItem(n,i.htmlEscape(t));ne()},ii=b.language,wt=vu.systemSettings,cf=function(n){return vt.hasAccessToPage(n)?!0:(ku.set(vf),li.displayPopupNotification({message:yu.translateKey("WrongPageWarning")}),!1)},bt,tr=function(n,t){var i=ku.get();if(i.page){if((i.page.substring(0,6)!=="addin-"||n)&&cf(i.page))return ku.fireEvent("change",ku,i),!0}else return ku.fireEvent("change",ku,{page:t,groups:{}}),!0;return!1},ve=["helpGuide","dashboard","map","devices","contact"].filter(vt.hasAccessToPage),pt,pf,ir,hr,fe,ee,he;vf.page=ve[0]||"";pt=lu.normalizeDefaultPageName(b.defaultPage&&vt.hasAccessToPage(b.defaultPage)?b.defaultPage:vf.page);hi.setCredentialsSource(function(){return l&&l.getCredentials()});hi.setHomePage(pt);hf.removeCustomHome();vu.addinsStorage=sf?new k.AddinsStorage(new su.AddinLoader(vu.entitiesLoader.addins).load(),gr,gi.filterAddinsFn(wt.allowUnsignedAddIn,g.hasAccessTo("LaunchAddIn"),g.hasAccessTo)):new k.EmptyAddinsStorage;vu.entitiesLoader.sendRequests();pf=vu.addinsStorage.list([a.AddinType.PAGE,a.AddinType.MENU],!0).then(function(n){var t=ut.installPageAddin(n,ii,vt,pu);return bt||(bt=tr(!0,pt)),t});pu.getAnalytics().setIsReportingAllowed(vu.isThirdPartyLoggingAllowed);!i.isTestDomain(n.location.host)&&vu.isThirdPartyLoggingAllowed&&(ir=new er.GoogleTagManager,ir.inject(window,document),vr.collect(vu.entitiesLoader,vu.uiConfiguration.hasAccessTo,vu.currentUser.id,nf).then(function(n){var t=new yr.Dimensions(n,function(n){ir.setDimensions(window,n)});t.subscribe(vu.notificationCenter)}));bt=tr(!1,pt);gu.setConnection(l);rf=oi.default(l,nf);vu.notificationCenter=fi.NotificationCenter(l,rf);vu.webSocketNotifications=new wi.WebSocketNotifications(rf);var ye=tt.createWhatfixWidget(wt.customCode,vu.isThirdPartyLoggingAllowed,i.isWhiteLabeled(),vu.uiConfiguration.containsAny,b.id,{databaseName:l.token.database,version:tt.formatVersion(n.version()),whitelabel:n.location.getVendorPrefix().domain,language:b.language,userActiveDays:Math.floor((Date.now()-new Date(b.activeFrom||"0").getTime())/864e5),securityGroup:(b.securityGroups[0]||{id:""}).id,isTheUserInCompanyGroup:b.companyGroups.some(function(n){return n.id==="GroupCompanyId"}),isUserFirstVisit:vu.isUserFirstVisit,featurePreview:(b.featurePreview||"").split(","),securityClearance:(g.acl||[]).slice().sort()},{organizationGuid:wt.companyGuid||"",timezone:b.timeZoneId},vu.entitiesLoader,vu.notificationCenter,window,document.head,location.host).attach("start",function(){u.addClasses(document.body,"without-notifications")}).attach("stop",function(){u.removeClasses(document.body,"without-notifications")}),ri=yi.createUnreadMessagesWatcher(wt.customCode,yt,b,vu.entitiesLoader.textMessages,function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return au.isolateCall(vu.entitiesLoader,function(){return vu.entitiesLoader.call.apply(vu.entitiesLoader,t)})},l.token.database,vu.webSocketNotifications),ui=!vu.isFedRamp&&g.hasAccessTo("ViewDeviceShare")&&g.hasAccessTo("EditDeviceShare"),pe=pi.createDeviceSharingWatcher(vu.entitiesLoader,l.token.database,vu.webSocketNotifications,ui),si=rr.getAcceptSharingDialog(yu.translateKey,ui),bf=function(n,t){uf.displayPopupNotification({message:yu.translateKey("RequestDetails").replace("{0}",t),button:{title:yu.translateKey("DataStreamDetails"),click:function(){si.render(n,t)}}})},te=function(n){var t=v.splitDeviceSharesByDb(n);Object.keys(t).filter(function(n){return t[n].length>0}).forEach(function(n){bf(t[n],n)})},re=function(n){return vu.entitiesLoader.devices.getItemsByValue({serialNumber:"%"+n+"%"})},or=fr.getDeviceShareErrorHandler(lt,vu.defaultErrorHandler,uf.displayWarning),ue=function(n){var t=vu.entitiesLoader.deviceShare;return r.together(n.map(function(n){return e.updateDeviceShareStatus(n,"RequestDeclined",t)}))};pe.attach("change",function(n){var i=l.token.database,t=n.filter(function(n){return n&&n.sourceDatabaseName!==i&&n.shareStatus==="Pending"});t.length!==0&&te(t)});si.attach("showDialog",function(n){var t=n[0],i=n[1];bf(t,i)});si.attach("reject",function(n){var t=n[0],i=n[1];ue(t).catch(function(n){or(n,t.length===1,i,t.length.toString())})});si.attach("save",function(n){var t=n[0],i=n[1];r.together(t.map(function(n){var t=n.serialNumber,o=n.deviceName,u,f;return t?(u=vu.entitiesLoader,f=function(){uf.displayPopupNotification({message:yu.translateKey("SuccessfullyAccepted").replace("{0}",i)})},n.isExistingDevice)?e.updateDeviceShareStatus(n.deviceShareId,"RequestApproved",u.deviceShare).then(f):re(t).then(function(i){return i&&i.length>0?(uf.displayPopupNotification({message:yu.translateKey("SerialNumberExist")+": "+t}),e.updateDeviceShareStatus(n.deviceShareId,"RequestDeclined",u.deviceShare)):r.together([ie(o,t),e.updateDeviceShareStatus(n.deviceShareId,"RequestApproved",u.deviceShare)]).then(f)}):r.resolve(void 0)})).catch(function(n){or(n,t.length===1,i,t.length.toString())})});ri.start();ri.attach("change",hu);hr=cu.hasAccessToUserProfile(yt);af=new ct.UnitOfMeasureLoader(vu.entitiesLoader.displayUnitOfMeasure.getItemsByValue,function(n){return gu.handleError(n)},hr);ef=new st.UserProfileLoader(vu.entitiesLoader,vu.notificationCenter,function(n){return gu.handleError(n)},hr);fe=function(){var n=pu.getCurrentPage(),t;if(ht.isReadyForCultureUpdate(n)){t=yu.getCultureInfo();n.onCultureInfoChange(ht.getUserProfileCultureChange(t))}};ef.attach("profileChange",fe);ee=r.together([ef.setUser(b).always(i.NOOP),af.getAllUnits().always(i.NOOP)]).then(i.NOOP);he=function(){var ct=e.requestActiveShareForDeviceFN(l.token.database,vu.entitiesLoader.deviceShare,ui),st,p,f,k,tt,rt,s,c,et,ht;e.requestIncomingDeviceShare(l.token.database,vu.entitiesLoader.deviceShare,ui).then(function(n){return n.filter(i.echo)}).then(function(n){return ur.splitSharesByExistingDevices(n,re,ct,vu.defaultErrorHandler)}).then(function(n){var r=n.sharesToProcess,i=n.sharesToReject,t;(te(r),i.length!==0)&&(t=v.splitDeviceSharesByDb(i),Object.keys(t).filter(function(n){return t[n].length>0}).forEach(function(n){var i=t[n],r=function(){return uf.displayInfo(v.getSuccessRejectShareMessage(i.length,i.length===1,n,lt))};ue(i.map(function(n){return n.id})).then(r).catch(function(t){or(t,i.length===1,n,i.length.toString());r()})}))});st=function(){var t="customReports",i=function(n,t){return n&&t&&n.type!==t.type},n=function(n){return n&&(n.page||b.defaultPage)};return function(r,u){return!r||n(r)!==n(u)||n(u)===t&&i(r.groups,u.groups)}}();bu=at.default(t.container,{panes:{west:{isOver:!1,hideResizerWithPane:!0}}});hf.addBrand(bu).then(function(n){n&&bu.resize("north")});bu.attachEvent("resize.all",df);bu.show("north");bu.resize("north");bu.show("west");bu.show("center");du.setLayout(bu);d.isBrowserSupportTouchEvents()&&(u.addClasses(lf,"touchScrollClass"),u.addClasses(lf,"hardwareAccelerationClass"));ku.attachEvent("change",function(n,t){var i=pu.getCurrentPageName(),r;n&&st(t,n)&&cf(i)&&(r=n.groups?n.groups.type||"":"",di(i,r))});vu.networkStateMonitor=ti.default(gu,yu.translateKey,l,rf);vu.currentUserWatcher=new ei.CurrentUserWatcher(l,vu.entitiesLoader,yu,vu.notificationCenter,vu.defaultErrorHandler).start(b);p=function(n){return function(){alert(yu.translateKey(n));window.location.reload()}};vu.currentUserWatcher.attach("currentUserSecurityGroupsUpdate",p("CurrentUserSecurityGroupsChangeWarning"));gu.attach("userSecurityGroupsException",p("CurrentUserSecurityGroupsChangeWarning"));vu.currentUserWatcher.attach("currentUserCompanyGroupsUpdate",p("CurrentUserGroupsChangeWarning"));vu.systemSettingsWatcher=new pr.SystemSettingsWatcher(vu.notificationCenter,vu.entitiesLoader,g.hasAccessTo,vu.defaultErrorHandler,function(){return vu.currentUser.defaultMapEngine}).start(vu.systemSettings);vu.systemSettingsWatcher.attach("SystemSettingsUpdated",function(n){vu.systemSettings=o({},n);n.userTimeoutPeriod?f.start(n.userTimeoutPeriod):f.stop()});vu.systemSettingsWatcher.attach("MapProviderChange",function(n){var t=n.providersPermissions;vu.uiConfiguration.supportedMapProviders=r.resolve(t)});f=new w.UserActivityTracker(window,wt.userTimeoutPeriod).start().addActivityTracker(new w.ActivityTracker(window,["message"],function(n){return n.data==="active"}).start()).attach("inactive",function(){ef.reset();vu.loggedInStatusBox&&vu.loggedInStatusBox.logout();vu.userActivityTracker.stop()});new ci.SessionRestorer(f).attach("restore",function(){l.call("Authenticate",{}).beginInvoke(i.NOOP,i.NOOP)});vu.userActivityTracker=f;vu.currentUser=b;vu.currentUserWatcher.attach("currentUserUpdate",function(n){vu.currentUser=o(o({},n),{featurePreview:vu.currentUser.featurePreview});vu.filterUsers=i.filterUsersFn(n)});ae(yu);vu.currentUserWatcher.attach("currentUserFeaturePreviewUpdate",function(){le(li,yu.translateKey("ExperimentalSettingsChangedReload"))});vu.notificationCenter.attachEvent("User.Remove",{},function(n){n.data&&n.data[0]&&n.data[0]===vu.currentUser.id&&(alert(yu.translateKey("EntityWasRemovedWarning").replace("{0}",yu.translateKey("user"))),vu.loggedInStatusBox&&vu.loggedInStatusBox.logout())});vu.networkStateMonitor.attachEvent("NetworkConnectionFound",gu.connectionFound);vu.networkStateMonitor.attachEvent("NetworkConnectionLost",gu.connectionLost);k=gt.NotificationsService(l,vu.entitiesLoader,nf,yu,rf,pu.getLinkTo,yt);tt=ni.default(l,nf,yu.translateKey,h.CreateWithCaution(yu.translateKey,nf,!1),rf);yt("NotificationList")&&k.start();tt.start();vu.networkStateMonitor.attachEvent("NetworkConnectionFound",function(n){n.wasServiceAlive&&tt.checkVersion()});g.containsAny&&(rt=new nu.default(t.filter,dr.hasFeature(vu.currentUser,kr.Features.ADVANCED_FILTER),vu.connection,vu.entitiesLoader,vu.notificationCenter,yu.translateKey),vu.filter=rt.filter,vu.backButton=new ot.BackButton(t.backButton,dt.translate),vu.filter.attachEvent("selectionChanged",function(n){ff.set({filter:n||[]});wu&&(wu.filter=ou(ff.get()));vu.loggedInStatusBox.updateLinks()}),vu.backButton.attach("stateChanged",function(){rt.filter.resize()}));vu.notificationsService=k;vu.serviceOfflineManager=tt;it&&it(ri,k);vu.channel=rf;yu.translateHtml([t.header,t.menu]);s=ce();sr.createCommunityLink(t.menu,l.token,b.language,b.userAuthenticationType,vu.isFedRamp);pf.then(function(n){ut.installPageAddinsInMainMenu(s,n);di(pu.getCurrentPageName(),pu.getState().type)});vu.customButtons=kt.default(t.center,l,hi,vu.uiConfiguration,vu.filter,nf,yu.translateKey);yf.addTracker(vu.customButtons.getInitializedButtons);vu.addinsStorage.list([a.AddinType.BUTTON],!0).then(function(n){lr.installButtonAddin(n,ii,vu.customButtons,pu)});sf&&new vi.AddinsWatcher(vu.systemSettingsWatcher,vu.systemSettings.customerPages).attach("change",ar.handleAddinUpdates(vu.addinsStorage,gr,g,vt,s,pu,vu.customButtons,uf,lt,function(){bt||(bt=tr(!0,pt))},ii,pt));vu.deviceReplacementManager=new bi.DeviceReplacementManager(vu.entitiesLoader,b,yu);vu.deviceReplacementManager.getReplacementStatus().then(function(n){return n.isReplacementAvailable?r.together([kf(["You have {0} devices that are eligible for replacement. If you do not replace them, they will be terminated."]),n.devicesCount]):r.reject(new ki.AbortException)}).then(function(n){var t=n[0],i=t[0],r=t[1],u=n[1];r.displayPopupNotification({message:i[0].replace("{0}",u.toString()),link:{name:lt("UpgradeDevices"),click:function(n){n.preventDefault();pu.gotoClass("devices",{filterState:"requireReplacement"},!1)}}})}).catch(function(){return[]});nt.showClosableUserTimeZoneMismatch(yu.getDstCalculator().getUtcOffset(new Date),b.timeZoneId,yt,tf,nt.createTimeZoneNotificationFn(vu.navigator.getCurrentPageName()==="options",yu.translateSentences,yu.translateKey,pu.getLinkTo("options")),i.isLocalUrl(location.host)&&!n.TEST_MODE);c=ft.toAllowedResources(vu,s,lt,yu.translateSentences,t.center,document.body,window);vu.pageServices=new ft.PageServiceRunner([y.PageBookmarkService,br.FeedbackService],c);et=uu.collectAllSearchPages();ht=et.reduce(function(n,t){return n[t.link]=t,n},{});new tu.BookmarksSet(new iu.MainMenuBookmarkRender(s,lt),new ru.FooterBookmarks(t.footer,fu.getDefaultBookmarks(vu.uiConfiguration.pagesSecurity.hasAccessToPage,et).map(function(n){return eu.toBookmarkView(n,ht,lt)}),"",wf,du,lt),vu.pageServices.get(y.BOOKMARK_SERVICE),c.mobileListener,ku);c.mobileListener.isMobilePreview?bu.show("south"):bu.hide("south");c.mobileListener.attach("change",function(n){var t=n.isMobilePreview;t?bu.show("south"):bu.hide("south")});setTimeout(function(){gf.resolve(undefined);wr.clearUserFirstVisit(tf)},1)};yu.setCultureInfo(l,function(n){return vu.entitiesLoader.call("Translate",n,!1)},b,!1,he,gu.handleError,ee)},ce=function(){di.apiTransport("GetVersion",i.getDbParams(n.location.database),undefined,"default").then(function(t){var i=tf.getItem(cf),u=n.TEST_MODE||n.POSTPONE_INITIALIZATION;if(!i&&t)try{tf.setItem(cf,t,!0)}catch(r){console.error(r)}if(t&&i!==t&&!u){try{tf.setItem(cf,t,!0)}catch(r){console.error(r)}n.isOldVersion=!0}})},le=function(n,t){n.displayPopupNotification({message:t,link:{name:yu.translateKey("ReloadNow").toLowerCase(),click:function(n){n.preventDefault();window.location.reload()}},seconds:5})},yf=function(){var n=[];return{addTracker:function(t){n.push(t)},isAnyScriptLoaded:function(){return n.some(function(n){return n().length>0})}}}(),ae=function(n){var e=n.translateKey("RegionalSettingsChanged"),o=n.translateKey("LanguageChangedReload"),s=n.translateKey("ReloadNow"),h=n.translateKey("SwitchLanguageBack"),t=n.getCultureInfo().language,c=l.getLanguageName(t,yu.translateKey),f="",r;n.attachEvent("cultureInfoReady",function(){f=l.getLanguageName(n.getCultureInfo().language,yu.translateKey)});n.attachEvent("cultureInfoChange",function(n){n.isLanguageChanged&&n.showChanged&&(r||(r=ii.default(document.body,yu.translateKey,{allowHTMLContent:!0,width:430})),r.confirm(e,o.replace("{0}",f),s,h.replace("{0}",c),function(){window.location.reload()},function(){var r=vu.entitiesLoader,f=vu.defaultErrorHandler,e=vu.notificationCenter,n={id:vu.currentUser.id};r.users.getItemById(n.id).then(function(i){return n=u.extend({},i,{language:t})}).then(function(n){return r.users.setItem(n)}).then(function(){yu.setCultureInfo(vu.connection,function(n){return r.call("Translate",n,!1)},{dateFormat:n.dateFormat,language:n.language,isMetric:n.isMetric,fuelEconomyUnit:n.fuelEconomyUnit,electricEnergyEconomyUnit:n.electricEnergyEconomyUnit,timeZoneId:n.timeZoneId,firstDayOfWeek:n.firstDayOfWeek},!1,i.NOOP,nf);l.setDefaultLanguage(t);e.fireEvent("User.Set",{},[n.id])}).catch(f)}))})},ff,sf;if(d.isOldBrowser()){location.assign("/notSupported.html");return}h.clearAllKeysStartWith(tf,"driveAPI_Credentials_");ce();var pf=bt.default(),ku=pf.getState("groups"),pu=pt.default(lf,ku,"",yu,gu,li.createGoogleAnalytics(i.isTestDomain(n.location.host),window));yf.addTracker(pu.getLoadedCustomPages);pu.attachEvent("fullscreen",function(){du.collapse();wu&&(wu.mode=f.MainMenuMode.NARROW)});ff=pf.getState("settings");fe();vu.languageSelector=dt.LanguageSelector(t.languageSelector,!1);vu.loggedInStatusBox=wt.default(vu,t.loginSection,ff,function(t,i,r,u,f){if(n.isOldVersion&&h.Supported())return window.location.reload(),!1;var e=encodeURIComponent(i.token.database||"");return e&&location.href.indexOf(e+"/")===-1?(window.location.href=location.href.replace(e,e+"/"),!1):(t&&he(i,r,u,f),!0)},nf,yf.isAnyScriptLoaded);re(vu.loggedInStatusBox);f.fetchIcons(t.container,n.location.database,n.location.getVendorPrefix());yu.attachEvent("cultureInfoReady",function(n){if(vu.languageSelector.setPageLanguage(n.language),n.language==="ja"){var t=new si.default("Noto Sans Japanese",hi.NOTOSANSJP_CONFIG);t.load()}});sf=ku.get();sf&&sf.page&&sf.page.indexOf(bf)===-1&&ku.fireEvent("change",ku,{page:sf.page})}var o=this&&this.__assign||function(){return o=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},o.apply(this,arguments)},s=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0});var lt=require("../../localizer"),i=require("../../utils"),u=require("../../vanillaExtension/vanilla"),at=require("../../vanillaExtension/vanillaLayout"),f=require("./modules/mainMenu/mainMenu"),vt=require("./modules/mainMenu/mainMenuResizer"),yt=require("../errorHandler"),h=require("../storage/html5Storage"),c=require("./notifier"),pt=require("./embeddedPageNavigator"),wt=require("./loggedInStatusBox"),bt=require("./urlState"),kt=require("./customButton"),dt=require("./modules/languageSelector/languageSelector"),gt=require("../notificationsService"),ni=require("./serviceOfflineManager"),ti=require("./networkStateMonitor"),ii=require("./confirmDialog"),ri=require("../startPage"),ui=require("../brand"),fi=require("../notificationCenter"),ei=require("../../services/currentUserWatcher"),oi=require("../channel/channel"),r=require("../deferred"),p=require("../addinsTools/getAddin"),si=require("./fontTools/fontLoader"),hi=require("./fontTools/notosansjpconfig"),w=require("../userActivityTracker"),ci=require("../sessionRestorer"),b=require("./tickets/ticketsSupport"),k=require("../addinsTools/addinsStorage"),l=require("../../utils/languageUtils"),d=require("../browser"),li=require("./auditTools/googleAnalytics"),ai=require("./modules/prefetchLinks/prefetchLinks"),vi=require("../../services/addinsListWarcher/addinsWatcher"),g=require("./tickets/updateTicketsMainMenu"),yi=require("../../services/unreadMessagesWatcher"),pi=require("../../services/deviceSharingWatcher"),wi=require("../../services/webSocketNotifications/webSocketsNotifications"),bi=require("./deviceTools/deviceReplacement/deviceReplacementManager"),ki=require("../exceptions/commonExceptions"),nt=require("./userTools/timeZoneNotification"),di=require("../apiTransport"),gi=require("../addinsTools/filterAddin"),nr=require("../addinsTools/addinLoaders/addinResolver"),a=require("../addinsTools/classifyAddin"),tt=require("./modules/whatfixWidget/whatfixWidget"),tr=require("./serialNoConverter"),ir=require("../entityUtilities"),rr=require("./modules/deviceSharing/dataStreamAdding"),e=require("./modules/deviceSharing/deviceSharingActions"),v=require("./modules/deviceSharing/deviceSharingUtils"),ur=require("./modules/deviceSharing/splitSharesByExistingDevices"),fr=require("./modules/deviceSharing/deviceSharingErrors"),er=require("./auditTools/googleTagManager"),or=require("./urlCoder"),sr=require("./modules/communityLink/communityLink"),it=require("./modules/liveChat/liveChat"),rt=require("./modules/liveChat/liveChatPipeline"),hr=require("./modules/liveChat/liveChatUserInfo"),cr=require("./modules/whatfixWidget/whatfixSelfHelp"),ut=require("../addinsTools/appIntegration/installPageAddins"),lr=require("../addinsTools/appIntegration/installButtonAddins"),ar=require("../addinsTools/appIntegration/handleAddinUpdates"),vr=require("./auditTools/collect"),yr=require("./auditTools/dimensions"),pr=require("../../services/systemSettingsWatcher/systemSettingsWatcher"),wr=require("../../utils/detectFirstUserVisit"),ft=require("../../services/pageService/pageServiceRunner"),y=require("../../services/pageService/pageBookmarkService/pageBookmarkService"),br=require("../../services/pageService/feedbackService/feedbackService"),kr=require("../featurePreview/features"),dr=require("../featurePreview/featurePreview"),et=require("./modules/liveChat/liveChatPipeLineDialogs"),gr=require("./routeCompletion/loaders/loadRouteCompletionGroups"),ot=require("./modules/backButton/backButton"),nu=require("./modules/defaultHeader/orgFilter"),tu=require("./modules/bookmarkSet/bookmarksSet"),iu=require("./modules/bookmarkSet/mainMenuBookmark/mainMenuBookmarks"),ru=require("./modules/bookmarkSet/footerBookmarks/footerBookmarks"),uu=require("./modules/mainMenu/mainMenuSearchPages"),fu=require("../../constants/defaultBookmarks"),eu=require("../../services/pageService/pageBookmarkService/bookmark"),ou=require("./modules/mainMenu/mainMenuLinkWatcher"),su=require("../addinsTools/addinLoaders/addinLoader"),st=require("./modules/userProfileLoader/userProfileLoader"),hu=require("./modules/userProfileUtils/userProfileUtils"),ht=require("./defaultPageTools/defaultPageTools"),ct=require("./modules/unitOfMeasureLoader/unitOfMeasureLoader"),cu=require("./modules/userProfileUtils/hasAccessToUserProfile"),lu=require("../../utils/defaultPageUtils/normalizeDefaultPageName"),au=require("../entitiesLoaderModules/isolateCall");t.default=vu})(geotab,geotab.commonjs.generateRequire("geotab/checkmate/ui/defaultPage"),geotab.commonjs.generateExport("geotab/checkmate/ui/defaultPage"));
(function(n,require,t){"use strict";var r,i,u,f,e;Object.defineProperty(t,"__esModule",{value:!0});r=require("./checkmate/ui/defaultPage");n.addLoaded(["geotab.default"]);i=function(){document.body.classList.add("embedded-app");r.default({center:document.getElementById("checkmateContent"),header:document.getElementById("north"),footer:document.getElementById("geoFooter"),container:document.body,filter:document.getElementById("organizationFilter"),backButton:document.getElementById("toolbarBackButton"),loginSection:document.getElementById("loginBar"),menu:document.getElementById("menuId"),menuOverlay:document.getElementById("menuOverlayId"),menuToggle:document.getElementById("menuToggle"),languageSelector:document.getElementById("languageSelectorContainer"),customHome:document.getElementById("customHomeId"),customHeader:document.getElementById("brandId"),topBar:document.getElementById("topBar")})};document.getElementById("oldIEPrompt")||(u=n.location.getVendorPrefix(),f=u.domain,f&&(e=document.querySelector("head title"),e.text=n.location.getVendorTitle()),n.POSTPONE_INITIALIZATION||i());t.default=i})(geotab,geotab.commonjs.generateRequire("//geotab/default.js"),geotab.commonjs.generateExport("//geotab/default.js"));
