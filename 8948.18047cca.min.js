"use strict";(this["webpackChunkapplication"]=this["webpackChunkapplication"]||[]).push([[8948],{729774:(e,t,n)=>{n.r(t);n.d(t,{CloudIntegrationModule:()=>K});var o=n(461197);var r=n(615061);var i=n(862926);var a=n(827027);var l="ucc";var u={INTEGRATION:"/"+a.API_VERSION+"/account/~/extension/~/cloud-integrations/"+l};var c={TOKENS:"tokens",AUTHORIZATION:"authorization"};var s;(function(e){e["CALENDAR"]="calendar";e["CONTACTS"]="contacts";e["DIRECTORY"]="directory";e["FILES"]="files"})(s||(s={}));var d=function(){function CloudIntegrationAPI(){}CloudIntegrationAPI.getIntegration=function(){return this.networkClient.get({via:i.NETWORK_VIA.HTTP,path:i.RequestPath.buildRequestPath(u.INTEGRATION)})};CloudIntegrationAPI.disconnect=function(e){return this.networkClient.delete({via:i.NETWORK_VIA.HTTP,path:i.RequestPath.buildRequestPath(u.INTEGRATION+"/"+i.FORMAT_MARK+"/"+i.FORMAT_MARK,e,c.TOKENS)})};CloudIntegrationAPI.getTokens=function(e){return this.networkClient.post({via:i.NETWORK_VIA.HTTP,path:i.RequestPath.buildRequestPath(u.INTEGRATION+"/"+e+"/"+c.TOKENS)})};return CloudIntegrationAPI}();var p=n(587040);var f=n(880514);var g=n(849605);var h="["+r.vh+"][CORE]";var v=i.ModuleLogger.getLogger(h,(function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return e}),i.EVENT_DATA_FEATURE.COMMON);var C=n(814678);var I=n(424843);var _=n(885057);var y=undefined&&undefined.__awaiter||function(e,t,n,o){function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,r){function fulfilled(e){try{step(o.next(e))}catch(e){r(e)}}function rejected(e){try{step(o["throw"](e))}catch(e){r(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};var b=undefined&&undefined.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},o,r,i,a;return a={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function verb(e){return function(t){return step([e,t])}}function step(a){if(o)throw new TypeError("Generator is already executing.");while(n)try{if(o=1,r&&(i=a[0]&2?r["return"]:a[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;if(r=0,i)a=[a[0]&2,i.value];switch(a[0]){case 0:case 1:i=a;break;case 4:n.label++;return{value:a[1],done:false};case 5:n.label++;r=a[1];a=[0];continue;case 7:a=n.ops.pop();n.trys.pop();continue;default:if(!(i=n.trys,i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){n.label=a[1];break}if(a[0]===6&&n.label<i[1]){n.label=i[1];i=a;break}if(i&&n.label<i[2]){n.label=i[2];n.ops.push(a);break}if(i[2])n.ops.pop();n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e];r=0}finally{o=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var O=10;var T=12;var m=function(){function CloudIntegrationPollingController(e,t){this._userConfig=e;this._getter=t;this._init()}CloudIntegrationPollingController.prototype.startPollingIntegration=function(e){var t;this._prePolling();var n=(t=this._userConfig.getCloudIntegrationList())===null||t===void 0?void 0:t[e];v.info("startPolling,provider:",e,",active:",n===null||n===void 0?void 0:n.active,",scope:",n===null||n===void 0?void 0:n.scopeGroups);_.L7.scheduleJob({key:r.rl.POLLING_CLOUD_INTEGRATION,intervalSeconds:O,periodic:true,needNetwork:true,executeFunc:this._getPollingFunc(e,n)},_.dV.BASE_ON_LAST_TIME);this._cloudIntegrationChangedWrapper=new i.AsyncObjectWrapper;return this._cloudIntegrationChangedWrapper.getObj()};CloudIntegrationPollingController.prototype.stopPollingIntegration=function(){v.info("stopPollingIntegration");this._stopPolling(false)};CloudIntegrationPollingController.prototype._init=function(){this._pollingCount=0};CloudIntegrationPollingController.prototype._prePolling=function(){this._stopPolling(false)};CloudIntegrationPollingController.prototype._stopPolling=function(e){v.info("stopPolling,result:",e,",wrapperExist:",!!this._cloudIntegrationChangedWrapper);_.L7.cancelJob(r.rl.POLLING_CLOUD_INTEGRATION,false);this._pollingCount=0;if(this._cloudIntegrationChangedWrapper){this._cloudIntegrationChangedWrapper.setObj(e);this._cloudIntegrationChangedWrapper=undefined}};CloudIntegrationPollingController.prototype._getPollingFunc=function(e,t){var n=this;return function(o){return y(n,void 0,void 0,(function(){var n=this;return b(this,(function(r){switch(r.label){case 0:return[4,this._getter(e).then((function(o){v.info("polling result,provider:",e,",active:",o===null||o===void 0?void 0:o.active,",scope:",o===null||o===void 0?void 0:o.scopeGroups);if(n._isDataChanged(t,o)){v.info("polling data changed");n._stopPolling(true)}})).catch((function(e){return v.error("polling failed:",e)})).finally((function(){++n._pollingCount;if(n._pollingCount>=T){v.info("polling reached limit");n._stopPolling(false)}}))];case 1:r.sent();o(true);return[2]}}))}))}};CloudIntegrationPollingController.prototype._isDataChanged=function(e,t){var n,o;return(e===null||e===void 0?void 0:e.active)!==(t===null||t===void 0?void 0:t.active)||((n=e===null||e===void 0?void 0:e.subscriber)===null||n===void 0?void 0:n.id)!==((o=t===null||t===void 0?void 0:t.subscriber)===null||o===void 0?void 0:o.id)||(e===null||e===void 0?void 0:e.scopeGroups.contacts)!==(t===null||t===void 0?void 0:t.scopeGroups.contacts)||(e===null||e===void 0?void 0:e.scopeGroups.calendar)!==(t===null||t===void 0?void 0:t.scopeGroups.calendar)};return CloudIntegrationPollingController}();var E=n(667489);var S=n(38942);var N=undefined&&undefined.__assign||function(){N=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]}return e};return N.apply(this,arguments)};var P=undefined&&undefined.__decorate||function(e,t,n,o){var r=arguments.length,i=r<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,n):o,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")i=Reflect.decorate(e,t,n,o);else for(var l=e.length-1;l>=0;l--)if(a=e[l])i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i;return r>3&&i&&Object.defineProperty(t,n,i),i};var A=undefined&&undefined.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};var w=undefined&&undefined.__awaiter||function(e,t,n,o){function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,r){function fulfilled(e){try{step(o.next(e))}catch(e){r(e)}}function rejected(e){try{step(o["throw"](e))}catch(e){r(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};var R=undefined&&undefined.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},o,r,i,a;return a={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function verb(e){return function(t){return step([e,t])}}function step(a){if(o)throw new TypeError("Generator is already executing.");while(n)try{if(o=1,r&&(i=a[0]&2?r["return"]:a[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;if(r=0,i)a=[a[0]&2,i.value];switch(a[0]){case 0:case 1:i=a;break;case 4:n.label++;return{value:a[1],done:false};case 5:n.label++;r=a[1];a=[0];continue;case 7:a=n.ops.pop();n.trys.pop();continue;default:if(!(i=n.trys,i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){n.label=a[1];break}if(a[0]===6&&n.label<i[1]){n.label=i[1];i=a;break}if(i&&n.label<i[2]){n.label=i[2];n.ops.push(a);break}if(i[2])n.ops.pop();n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e];r=0}finally{o=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var L=5*1e3;var F=15*60;var G=function(){function CloudIntegrationFetchController(e){this._userConfig=e;this._lastFetchTime=0}CloudIntegrationFetchController.prototype.getFromRemote=function(e){var t;return w(this,void 0,Promise,(function(){var n,o,i,a,l;return R(this,(function(u){switch(u.label){case 0:n=Date.now()-this._lastFetchTime;o=(0,E.getModule)(S.FEATURE_FLAG_MODULE);return[4,o.getFeatureFlag(S.G.D_USE_SYNC_INTEGRATION_STATUS_INTERVAL)];case 1:i=(t=u.sent())!==null&&t!==void 0?t:F;if(e===r.WC.COMMON&&n<i*1e3){return[2,this._userConfig.getCloudIntegrationList()||{}]}if(!(n>L))return[3,3];return[4,this._getFromRemoteInternal()];case 2:l=u.sent();return[3,5];case 3:return[4,this._triggerCacheLimitJob(Math.max(L-n,0))];case 4:l=u.sent();u.label=5;case 5:a=l;this.scheduleSyncCloudIntegrationJob(true);return[2,a]}}))}))};CloudIntegrationFetchController.prototype.scheduleSyncCloudIntegrationJob=function(e){var t=this;if(e===void 0){e=false}E.jobScheduler.scheduleDailyPeriodicJob(r.rl.SYNC_CLOUD_INTEGRATION,(function(e){return t._getFromRemoteInternal().then((function(){return e(true)})).catch((function(t){v.info("scheduleSyncCloudIntegrationJob",t);e(false)}))}),true,e?E.INITIAL_OPTION.IGNORE_FIRST_TIME:E.INITIAL_OPTION.BASE_ON_LAST_TIME)};CloudIntegrationFetchController.prototype._triggerCacheLimitJob=function(e){var t=this;return new Promise((function(n,o){setTimeout((function(){t._getFromRemoteInternal().then((function(e){return n(e)})).catch((function(e){return o(e)}))}),e)}))};CloudIntegrationFetchController.prototype._getFromRemoteInternal=function(){var e;return w(this,void 0,Promise,(function(){var t,n,o,i;var a=this;return R(this,(function(l){switch(l.label){case 0:v.info("_getFromRemoteInternal start");return[4,d.getIntegration()];case 1:t=l.sent();n=(e=this._userConfig.getCloudIntegrationList())!==null&&e!==void 0?e:{};o=new Set(Object.keys(n));i=[];t.forEach((function(e){var t=e.providerId;var r=n[t];if(a._remoteDataCanUpdate({local:r,remote:e})){r=a._transformCloudIntegration(e);a._logForCloudIntegrationUpdate(r);n[r.providerId]=r}o.delete(t);i.push(r)}));o.forEach((function(e){var t=n[e];t.active=false;t.inactivityReason=r.BT.DELETED;t.scopeGroups={contacts:false,calendar:false,directory:false,files:false};a._logForCloudIntegrationUpdate(t);i.push(t);delete n[e]}));this._userConfig.setCloudIntegrationList(n);E.notificationCenter.emitKVChange(r.dp.DATA_CHANGE,i);this._lastFetchTime=Date.now();v.info("_getFromRemoteInternal end,",this._lastFetchTime);return[2,n]}}))}))};CloudIntegrationFetchController.prototype._remoteDataCanUpdate=function(e){var t=e.local,n=e.remote;var o=true;if(t){o=!t.localExpired||t.localExpiredTokenCreationTime!==n.tokenCreationTime}return o};CloudIntegrationFetchController.prototype._logForCloudIntegrationUpdate=function(e){v.info("getFromRemote,id:",e.providerId,",active:",e.active,",scope:",e.scopeGroups,",reason:",e.inactivityReason)};CloudIntegrationFetchController.prototype._transformCloudIntegration=function(e){var t=new Set(e.scopeGroups);return N(N({},e),{inactivityReason:!e.active?r.BT.EXPIRED:undefined,rawInactivityReason:e.inactivityReason,scopeGroups:{contacts:t.has(s.CONTACTS),calendar:t.has(s.CALENDAR),directory:t.has(s.DIRECTORY),files:t.has(s.FILES)}})};var e,t;P([i.SingleRequest,A("design:type",Function),A("design:paramtypes",[Number]),A("design:returntype",typeof(e=typeof Promise!=="undefined"&&Promise)==="function"?e:Object)],CloudIntegrationFetchController.prototype,"_triggerCacheLimitJob",null);P([i.SingleRequest,A("design:type",Function),A("design:paramtypes",[]),A("design:returntype",typeof(t=typeof Promise!=="undefined"&&Promise)==="function"?t:Object)],CloudIntegrationFetchController.prototype,"_getFromRemoteInternal",null);return CloudIntegrationFetchController}();var M=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var D=undefined&&undefined.__assign||function(){D=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]}return e};return D.apply(this,arguments)};var j=undefined&&undefined.__awaiter||function(e,t,n,o){function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,r){function fulfilled(e){try{step(o.next(e))}catch(e){r(e)}}function rejected(e){try{step(o["throw"](e))}catch(e){r(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((o=o.apply(e,t||[])).next())}))};var k=undefined&&undefined.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},o,r,i,a;return a={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function verb(e){return function(t){return step([e,t])}}function step(a){if(o)throw new TypeError("Generator is already executing.");while(n)try{if(o=1,r&&(i=a[0]&2?r["return"]:a[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;if(r=0,i)a=[a[0]&2,i.value];switch(a[0]){case 0:case 1:i=a;break;case 4:n.label++;return{value:a[1],done:false};case 5:n.label++;r=a[1];a=[0];continue;case 7:a=n.ops.pop();n.trys.pop();continue;default:if(!(i=n.trys,i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){n.label=a[1];break}if(a[0]===6&&n.label<i[1]){n.label=i[1];i=a;break}if(i&&n.label<i[2]){n.label=i[2];n.ops.push(a);break}if(i[2])n.ops.pop();n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e];r=0}finally{o=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var x=undefined&&undefined.__read||function(e,t){var n=typeof Symbol==="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,i=[],a;try{while((t===void 0||t-- >0)&&!(r=o.next()).done)i.push(r.value)}catch(e){a={error:e}}finally{try{if(r&&!r.done&&(n=o["return"]))n.call(o)}finally{if(a)throw a.error}}return i};var U=undefined&&undefined.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(x(arguments[t]));return e};var K=function(e){M(CloudIntegrationModule,e);function CloudIntegrationModule(){return e!==null&&e.apply(this,arguments)||this}CloudIntegrationModule.prototype.moduleName=function(){return r.vh};CloudIntegrationModule.prototype.onLoad=function(){var e=this;this._setupNetworkClient();this.settings.load();this.getHealthController().registerItemMap({integrationList:function(){return e.userConfig.getCloudIntegrationList()}});this.fetchController.scheduleSyncCloudIntegrationJob()};CloudIntegrationModule.prototype.onUnload=function(){this.settings.unload()};Object.defineProperty(CloudIntegrationModule.prototype,"userConfig",{get:function(){if(!this._userConfig){this._userConfig=new f.M}return this._userConfig},enumerable:true,configurable:true});Object.defineProperty(CloudIntegrationModule.prototype,"settings",{get:function(){if(!this._settings){this._settings=new g.NL}return this._settings},enumerable:true,configurable:true});CloudIntegrationModule.prototype.getIntegrations=function(e){return j(this,void 0,Promise,(function(){var t,n,o,i,a,l,u,c;return k(this,(function(s){switch(s.label){case 0:t=e.providerIds,n=e.getFromRemoteOption,o=e.withError,i=o===void 0?true:o;s.label=1;case 1:s.trys.push([1,7,,8]);if(!(n===undefined))return[3,2];l=this.userConfig.getCloudIntegrationList();return[3,4];case 2:return[4,this.fetchController.getFromRemote(n)];case 3:l=s.sent();s.label=4;case 4:a=l;if(!(!a&&n===undefined))return[3,6];v.info("getIntegrations, local list do not exist");return[4,this.fetchController.getFromRemote(r.WC.IMMEDIATELY)];case 5:a=s.sent();s.label=6;case 6:u=[];t.forEach((function(e){var t=a===null||a===void 0?void 0:a[e];t&&u.push(t)}));return[2,Promise.resolve(u)];case 7:c=s.sent();v.warn("getIntegrations failed",i,c);if(i){throw c}else{return[2,[]]}return[3,8];case 8:return[2]}}))}))};CloudIntegrationModule.prototype.disconnect=function(e){return j(this,void 0,Promise,(function(){var t,n;return k(this,(function(o){switch(o.label){case 0:v.info("disconnect,id:",e);return[4,d.disconnect(e)];case 1:o.sent();t=this.userConfig.getCloudIntegrationList();if(t===null||t===void 0?void 0:t[e]){n=t[e];delete t[e];this.userConfig.setCloudIntegrationList(t);n.active=false;n.inactivityReason=r.BT.DELETED;n.scopeGroups={contacts:false,calendar:false,directory:false,files:false};C.rF.emitKVChange(r.dp.DATA_CHANGE,[n])}return[2]}}))}))};CloudIntegrationModule.prototype.getTokens=function(e){return d.getTokens(e)};CloudIntegrationModule.prototype.getAuthUrl=function(e,t,n){return j(this,void 0,Promise,(function(){var o,r,i,a,l,d,f,g,h,C;return k(this,(function(_){switch(_.label){case 0:o=this.userConfig.getCloudIntegrationList();r=o&&o[e];i=(r===null||r===void 0?void 0:r.active)&&Object.entries(t).every((function(e){var t=x(e,2),n=t[0],o=t[1];return r.scopeGroups[n]===o}));if(i){v.info("getAuthUrl,scope not changed,",t);return[2,Promise.resolve(undefined)]}a=[];l=[];if(r===null||r===void 0?void 0:r.active){this._determineScopeChange({updateScope:t.contacts,localScope:!!(r===null||r===void 0?void 0:r.scopeGroups.contacts),scopeKey:s.CONTACTS,addScope:a,removeScope:l});this._determineScopeChange({updateScope:t.calendar,localScope:!!(r===null||r===void 0?void 0:r.scopeGroups.calendar),scopeKey:s.CALENDAR,addScope:a,removeScope:l});this._determineScopeChange({updateScope:t.directory,localScope:!!(r===null||r===void 0?void 0:r.scopeGroups.directory),scopeKey:s.DIRECTORY,addScope:a,removeScope:l});this._determineScopeChange({updateScope:t.files,localScope:!!(r===null||r===void 0?void 0:r.scopeGroups.files),scopeKey:s.FILES,addScope:a,removeScope:l})}else{t.contacts?a.push(s.CONTACTS):this._determineScopeChange({updateScope:t.contacts,localScope:!!(r===null||r===void 0?void 0:r.scopeGroups.contacts),scopeKey:s.CONTACTS,addScope:a,removeScope:l});t.calendar?a.push(s.CALENDAR):this._determineScopeChange({updateScope:t.calendar,localScope:!!(r===null||r===void 0?void 0:r.scopeGroups.calendar),scopeKey:s.CALENDAR,addScope:a,removeScope:l});t.directory?a.push(s.DIRECTORY):this._determineScopeChange({updateScope:t.directory,localScope:!!(r===null||r===void 0?void 0:r.scopeGroups.directory),scopeKey:s.DIRECTORY,addScope:a,removeScope:l});t.files?a.push(s.FILES):this._determineScopeChange({updateScope:t.files,localScope:!!(r===null||r===void 0?void 0:r.scopeGroups.files),scopeKey:s.FILES,addScope:a,removeScope:l})}d={state:"",callbackUri:n};a.length&&(d.addedScopeGroups=a.join(","));l.length&&(d.removedScopeGroups=l.join(","));v.info("getAuthUrl,params:",d);f=new URLSearchParams;Object.keys(d).forEach((function(e){return f.append(e,d[e])}));g=I.apiConfiguration.getConfig().rc.server;h=I.apiConfiguration.getConfig().rc.pathPrefix||"";return[4,p.x0.buildDownloadUrl(""+g+h+u.INTEGRATION+"/"+e+"/"+c.AUTHORIZATION)];case 1:C=_.sent();return[2,C.concat("&"+f.toString())]}}))}))};CloudIntegrationModule.prototype.startPollingIntegration=function(e){return this.pollingController.startPollingIntegration(e)};CloudIntegrationModule.prototype.stopPollingIntegration=function(){return this.pollingController.stopPollingIntegration()};CloudIntegrationModule.prototype.handleLocalExpired=function(e){var t;var n=this.userConfig.getCloudIntegrationList();var o=n===null||n===void 0?void 0:n[e];if(o){o.localExpired=true;o.localExpiredTokenCreationTime=o.tokenCreationTime;o.inactivityReason=r.BT.EXPIRED;o.active=false;n=D(D({},n),(t={},t[e]=o,t));this.userConfig.setCloudIntegrationList(n);C.rF.emitKVChange(r.dp.DATA_CHANGE,U(Object.values(n)))}};Object.defineProperty(CloudIntegrationModule.prototype,"pollingController",{get:function(){var e=this;if(!this._pollingController){this._pollingController=new m(this.userConfig,(function(t){return e.getIntegrations({providerIds:[t],getFromRemoteOption:r.WC.IMMEDIATELY}).then((function(e){return e[0]}))}))}return this._pollingController},enumerable:true,configurable:true});Object.defineProperty(CloudIntegrationModule.prototype,"fetchController",{get:function(){if(!this._fetchController){this._fetchController=new G(this.userConfig)}return this._fetchController},enumerable:true,configurable:true});CloudIntegrationModule.prototype._determineScopeChange=function(e){var t=e.updateScope,n=e.localScope,o=e.scopeKey,r=e.addScope,i=e.removeScope;if(t===n){return}if(t){r.push(o)}else{i.push(o)}};CloudIntegrationModule.prototype._setupNetworkClient=function(){var e=(0,p.gT)();if(e){d.networkClient=e.buildNetworkClient()}};return CloudIntegrationModule}(o.AbstractModule)},880514:(e,t,n)=>{n.d(t,{M:()=>l});var o={INTEGRATION:"integration"};var r=n(469882);var i=n(615061);var a=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var l=function(e){a(CloudIntegrationConfig,e);function CloudIntegrationConfig(){return e.call(this,i.vh)||this}CloudIntegrationConfig.prototype.setCloudIntegrationList=function(e){this.put(o.INTEGRATION,e)};CloudIntegrationConfig.prototype.getCloudIntegrationList=function(){return this.get(o.INTEGRATION)};return CloudIntegrationConfig}(r.UserConfig)},615061:(e,t,n)=>{n.d(t,{vh:()=>r,dp:()=>i,gf:()=>l,BT:()=>u,rl:()=>a,WC:()=>c});var o=n(295454);var r=o.Lb.CLOUD_INTEGRATION;var i={DATA_CHANGE:r+".dataChange"};var a={SYNC_CLOUD_INTEGRATION:"syncCloudIntegration",POLLING_CLOUD_INTEGRATION:"pollingCloudIntegration"};var l;(function(e){e["GOOGLE"]="Google";e["OFFICE365"]="Office365";e["BOX"]="Box"})(l||(l={}));var u;(function(e){e["DELETED"]="deleted";e["EXPIRED"]="Token is invalid and cannot be refreshed. New authorization is required."})(u||(u={}));var c;(function(e){e["COMMON"]="COMMON";e["IMMEDIATELY"]="IMMEDIATELY"})(c||(c={}))},103157:(e,t,n)=>{n.d(t,{N:()=>u});var o=n(763690);var r=n(696206);var i=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var a=function(e){i(CloudIntegrationConnectionSettingItemProvider,e);function CloudIntegrationConnectionSettingItemProvider(t){return e.call(this,{id:t,value:{type:r.Pe.CONSTANT},source:{type:r.Pe.CONSTANT},state:{type:r.Pe.CONSTANT,defaultValue:r.ESettingItemState.ENABLE}})||this}return CloudIntegrationConnectionSettingItemProvider}(r.BaseSettingItemProvider);var l=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var u=function(e){l(CloudIntegrationSettings,e);function CloudIntegrationSettings(){return e.call(this)||this}CloudIntegrationSettings.prototype.getProviderMap=function(){var e;return e={},e[o.h.GOOGLE_CONNECTION]=new a(o.h.GOOGLE_CONNECTION),e[o.h.OFFICE365_CONNECTION]=new a(o.h.OFFICE365_CONNECTION),e};return CloudIntegrationSettings}(r.AbstractModuleSettingProviderManager)}}]);