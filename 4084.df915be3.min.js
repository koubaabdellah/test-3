"use strict";(this["webpackChunkapplication"]=this["webpackChunkapplication"]||[]).push([[4084],{727727:(e,t,r)=>{r.d(t,{w:()=>n});var n;(function(e){e["LIGHT"]="light";e["DARK"]="dark";e["HIGH_CONTRAST"]="highContrast"})(n||(n={}))},978507:(e,t,r)=>{r.d(t,{B:()=>o});var n=r(957097);var i=undefined&&undefined.__makeTemplateObject||function(e,t){if(Object.defineProperty){Object.defineProperty(e,"raw",{value:t})}else{e.raw=t}return e};var o=(0,n.iv)(a||(a=i(["\n  display: flex;\n  flex-flow: column;\n  justify-content: center;\n  align-items: center;\n"],["\n  display: flex;\n  flex-flow: column;\n  justify-content: center;\n  align-items: center;\n"])));var a},148108:(e,t,r)=>{r.d(t,{j:()=>d});var n=r(305406);var i=r.n(n);var o=r(957097);var a=r(196545);var s=undefined&&undefined.__makeTemplateObject||function(e,t){if(Object.defineProperty){Object.defineProperty(e,"raw",{value:t})}else{e.raw=t}return e};var u=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var l=(0,o.ZP)(a.A)(p||(p=s(["\n  ","\n"],["\n  ","\n"])),(function(e){var t=e.size;return(0,o.iv)(f||(f=s(["\n    width: ","px;\n    height: ","px;\n  "],["\n    width: ","px;\n    height: ","px;\n  "])),t,t)}));var c=o.ZP.div(v||(v=s(["\n  position: absolute;\n  display: flex;\n  height: 100%;\n  width: 100%;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n"],["\n  position: absolute;\n  display: flex;\n  height: 100%;\n  width: 100%;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n"])));var d=function(e){u(JuiLoading,e);function JuiLoading(){return e!==null&&e.apply(this,arguments)||this}JuiLoading.prototype.render=function(){var e=this.props,t=e.size,r=t===void 0?24:t,n=e.className;return i().createElement(c,{className:n},i().createElement(l,{size:r}))};return JuiLoading}(i().PureComponent);var f,p,v},744069:(e,t,r)=>{r.d(t,{jg:()=>n.j,$t:()=>i.$,FG:()=>i.F});var n=r(148108);var i=r(912614)},982642:(e,t,r)=>{r.d(t,{o:()=>s});var n=r(957097);var i=r(210551);var o=r(354154);var a=undefined&&undefined.__makeTemplateObject||function(e,t){if(Object.defineProperty){Object.defineProperty(e,"raw",{value:t})}else{e.raw=t}return e};var s=n.ZP.div(u||(u=a(["\n  flex-shrink: 0;\n  position: relative;\n  overflow: hidden;\n\n  > :not(:first-child) {\n    display: none;\n  }\n\n  "," {\n    padding: ",";\n  }\n"],["\n  flex-shrink: 0;\n  position: relative;\n  overflow: hidden;\n\n  > :not(:first-child) {\n    display: none;\n  }\n\n  "," {\n    padding: ",";\n  }\n"])),i.L,(0,o.W0)(1.5,4));var u},356961:(e,t,r)=>{var n=r(305406);var i=r.n(n);var o=r(669211);var a=r.n(o);var s=undefined&&undefined.__makeTemplateObject||function(e,t){if(Object.defineProperty){Object.defineProperty(e,"raw",{value:t})}else{e.raw=t}return e};var u=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var l=o.styled.div(p||(p=s(["\n  display: flex;\n  justify-content: center;\n  align-items: flex-start;\n"],["\n  display: flex;\n  justify-content: center;\n  align-items: flex-start;\n"])));var c=o.styled.p(v||(v=s(["\n  margin: 0;\n  text-align: left;\n"],["\n  margin: 0;\n  text-align: left;\n"])));var d=o.styled.p(h||(h=s(["\n  height: ",";\n  margin: 0 0 0 ",";\n  flex-shrink: 0;\n  display: flex;\n  align-items: center;\n"],["\n  height: ",";\n  margin: 0 0 0 ",";\n  flex-shrink: 0;\n  display: flex;\n  align-items: center;\n"])),(0,o.px)(24),(0,o.spacing)(8));var f=function(e){u(JuiBannerMessageWrapper,e);function JuiBannerMessageWrapper(){return e!==null&&e.apply(this,arguments)||this}JuiBannerMessageWrapper.prototype.render=function(){var e=this.props,t=e.message,r=e.children;return i().createElement(l,null,i().createElement(c,null,t),r&&i().createElement(d,null,r))};return JuiBannerMessageWrapper}(i().PureComponent);var p,v,h},633411:(e,t,r)=>{r.d(t,{O:()=>getMarketingDataById});var n=r(442671);var i=r(461602);var o=r(441351);var a=r(264643);var s=undefined&&undefined.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};var u=undefined&&undefined.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function verb(e){return function(t){return step([e,t])}}function step(a){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(o=a[0]&2?i["return"]:a[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;if(i=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:r.label++;return{value:a[1],done:false};case 5:r.label++;i=a[1];a=[0];continue;case 7:a=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1];o=a;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(a);break}if(o[2])r.ops.pop();r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e];i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var l=a.mainLogger.tags("MarketingDataFetcher");var c=function(){function MarketingDataFetcher(){var e=this;this._connectFirebase=function(){if(e._firebaseConfig){(0,n.ZF)(e._firebaseConfig);e._db=(0,i.N8)()}else{l.log("get firebase config failed",e._firebaseConfig)}};this._filterRcUTMData=function(e,t){return e.startsWith("rc_utm_")&&t!==""};this.getRcUTMData=function(t){return s(e,void 0,Promise,(function(){var e,r,n,o,a;return u(this,(function(s){switch(s.label){case 0:e={};if(!this._db){return[2,e]}s.label=1;case 1:s.trys.push([1,3,,4]);(0,i.$o)(this._db);return[4,(0,i.U2)((0,i.iU)((0,i.iH)(this._db),"visitors/"+t))];case 2:r=s.sent();if(r.exists()){n=r.val();l.log("getRcUTMData of id: "+t,n);for(o in n){if(this._filterRcUTMData(o,n[o])){e[o]=n[o]}}}else{l.log("getRcUTMData of id: "+t,"No data available")}return[3,4];case 3:a=s.sent();l.log("getRcUTMData of id: "+t,"error",a);return[3,4];case 4:(0,i.Sb)(this._db);return[2,e]}}))}))};this._connectFirebase()}Object.defineProperty(MarketingDataFetcher.prototype,"_firebaseConfig",{get:function(){var e=o.vc.get("thirdParty");return e.firebase},enumerable:true,configurable:true});return MarketingDataFetcher}();var d;var getMarketingDataById=function(e){if(!d){d=new c}return d.getRcUTMData(e)}},482166:(e,t,r)=>{r.d(t,{Po:()=>i,dF:()=>o,H:()=>a,Yd:()=>s,m5:()=>u});var n=r(295454);var i=n.Lb.PHONE_CONTACT;var o={ENTITY:{PHONE_CONTACT:"ENTITY.PHONE_CONTACT"}};var a=100;var s=100;var u=30*1e3},91287:(e,t,r)=>{r.d(t,{i:()=>i,g:()=>o});var n=r(295454);var i=n.Lb.PHONE_NUMBER;var o="pending"},492247:(e,t,r)=>{r.d(t,{oi:()=>n,aE:()=>i,W4:()=>o});var n;(function(e){e["PHOENIX"]="Phoenix";e["FREYJA"]="Freyja"})(n||(n={}));var i;(function(e){e["FREE"]="Free";e["REGULAR"]="Regular"})(i||(i={}));var o;(function(e){e[e["RC_OFFICE"]=0]="RC_OFFICE";e[e["PHOENIX_FREE"]=1]="PHOENIX_FREE";e[e["PHOENIX_PAID"]=2]="PHOENIX_PAID"})(o||(o={}))},230099:(e,t,r)=>{r.d(t,{Q:()=>n});var n;(function(e){e["RC"]="RC";e["GLIP"]="GLIP"})(n||(n={}))},909677:(e,t,r)=>{r.d(t,{j:()=>TryAgainPage});var n=r(305406);var i=r.n(n);var o=r(14862);var a=r.n(o);var s=r(97792);var u=r(252059);var l=r(530713);var c=r(34763);var d=r(787823);var f=r(727727);var p=r(629708);var v=undefined&&undefined.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};var h=undefined&&undefined.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function verb(e){return function(t){return step([e,t])}}function step(a){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(o=a[0]&2?i["return"]:a[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;if(i=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:r.label++;return{value:a[1],done:false};case 5:r.label++;i=a[1];a=[0];continue;case 7:a=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1];o=a;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(a);break}if(o[2])r.ops.pop();r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e];i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var _=undefined&&undefined.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var TryAgainPage=function(e){var t;var r=e.onReload,a=e.messageKey,g=a===void 0?"common.prompt.loadError":a,y=e.tryAgainKey,m=y===void 0?"common.button.tryAgain":y;var b=(0,o.useTranslation)().t;var w=_((0,n.useState)(false),2),E=w[0],O=w[1];var S=(0,d.H)();(0,c.f)();var C=(0,n.useCallback)((function(){return v(void 0,void 0,void 0,(function(){var e;return h(this,(function(t){switch(t.label){case 0:t.trys.push([0,2,3,4]);O(true);return[4,r()];case 1:t.sent();return[3,4];case 2:e=t.sent();(0,p.S3)(p.tx.FLASH,e,null,{network:"message.prompt.MessageLoadingErrorTipForNetworkIssue",server:"message.prompt.MessageLoadingErrorTipForServerIssue"});return[3,4];case 3:S.current&&O(false);return[7];case 4:return[2]}}))}))}),[S.current,r]);var T=(0,n.useMemo)((function(){if(!m)return undefined;return{label:b(m),clickHandler:C,loading:E}}),[b,m,C,E]);return i().createElement(s.JuiEmptyPage,{fullBleedView:true,"data-test-automation-id":"errorPage",title:b("people.prompt.somethingWentWrong"),message:b(g),svgSet:(t={},t[f.w.DARK]=l.Z,t[f.w.LIGHT]=u.Z,t[f.w.HIGH_CONTRAST]=l.Z,t),actionProps:T})}},842827:(e,t,r)=>{r.d(t,{TryAgainPage:()=>n.j});var n=r(909677)},400015:(e,t,r)=>{r.d(t,{Y:()=>windowFeatures});var n=undefined&&undefined.__assign||function(){n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return n.apply(this,arguments)};var i={width:800,height:600};var windowFeatures=function(){var e=i.width,t=i.height;var r=window.screen,o=r.width,a=r.height;var s=n(n({},i),{left:(o-e)/2,top:(a-t)/2});return s}},865453:(e,t,r)=>{r.d(t,{G:()=>getUrl});var n=r(691627);var i=r(862926);var o=r(667489);var a=r(608139);var s=r(429555);var u=r(62427);var l=r(441351);var c=r(587040);var d=r(185805);var f=r(38942);var p=r(711987);var v=32;var h="S256";var _=undefined&&undefined.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};var g=undefined&&undefined.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function verb(e){return function(t){return step([e,t])}}function step(a){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(o=a[0]&2?i["return"]:a[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;if(i=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:r.label++;return{value:a[1],done:false};case 5:r.label++;i=a[1];a=[0];continue;case 7:a=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1];o=a;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(a);break}if(o[2])r.ops.pop();r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e];i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var getPkceOptions=function(e){return _(void 0,void 0,void 0,(function(){var t,r,n,i,o,a;return g(this,(function(s){switch(s.label){case 0:return[4,d.I.getFeatureFlag(f.G.ENABLE_PKCE_OAUTH,true)];case 1:t=s.sent();if(!t){return[2,{}]}r=(0,p.mk)(h,v),n=r.codeVerifier,i=r.codeChallenge;o=(0,p.aV)(v);c.Lh.setPKCECodeVerifier(n);c.Lh.setPKCEState(o);e.pkceState=o;a=encodeURIComponent(JSON.stringify(e));return[2,{state:a,code_challenge:i,code_challenge_method:h}]}}))}))};var y=undefined&&undefined.__assign||function(){y=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return y.apply(this,arguments)};var m=undefined&&undefined.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};var b=undefined&&undefined.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function verb(e){return function(t){return step([e,t])}}function step(a){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(o=a[0]&2?i["return"]:a[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;if(i=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:r.label++;return{value:a[1],done:false};case 5:r.label++;i=a[1];a=[0];continue;case 7:a=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1];o=a;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(a);break}if(o[2])r.ops.pop();r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e];i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var w={response_type:"code",force:true,endpointId:"",display:"touch",prompt:"login sso",scope:"",ui_options:"external_popup remember_me_on show_back_to_app",hideNavigationBar:true,response_hint:"remember_me+login_type",title_bar:true};var E=i.mainLogger.tags("loginAuth");var getUrl=function(e,t,r){return m(void 0,void 0,void 0,(function(){var i,c,d,f,p,v,h,_,g,m,O,S,C,T,I,P,k,A,M,R,N,D,L,U,F,x,j;var B,W,H,G;return b(this,(function(b){switch(b.label){case 0:return[4,u.AbstractEndpointsDiscovery.fetchCDNMultiInstanceFlag()];case 1:i=b.sent();b.label=2;case 2:b.trys.push([2,5,,6]);d=(B=i===null||i===void 0?void 0:i.PLA)===null||B===void 0?void 0:B.discoveryRequired;if(!d)return[3,4];return[4,u.AbstractEndpointsDiscovery.initialDiscovery()];case 3:d=c=b.sent();b.label=4;case 4:d;return[3,6];case 5:f=b.sent();E.log(f);return[3,6];case 6:p=o.apiConfiguration.getConfig(),v=p.rc,h=p.glip,_=p.multi_instance;g=(W=c===null||c===void 0?void 0:c.authApi)===null||W===void 0?void 0:W.authorizationUri;m=g||""+v.server+(v.pathPrefix||"")+"/oauth/authorize";O="env="+l.vc.getEnv();S=window.location.origin;C=S+"?t=";T=window.location.search;I=new URLSearchParams(T);P=I.get("replaceState");k=P?JSON.parse(decodeURIComponent(P)||"{}"):{};A=y(y(y({},k),e.history),window.history.state);M=r?"&"+(0,a.stringify)(r):"";R=A.from;if(R instanceof Object){R.search=R.search?R.search+"&"+O+M:"?"+O+M}else{A.from={pathname:"/",search:"?"+O+M}}N=encodeURIComponent(JSON.stringify(A));D={redirect_uri:S,state:N,glipAppRedirectURL:C,glipAppRedirectURLForApple:C,client_id:v.clientId,ui_locales:(0,n.G)()};return[4,getPkceOptions(A)];case 7:L=b.sent();D=y(y({},D),L);U=(_===null||_===void 0?void 0:_.gdsServer)&&(s.ClientConfigDebugger.isEnabled()&&((H=s.ClientConfigDebugger.getBetaFlagDebugSetting())===null||H===void 0?void 0:H.multi_instance)||s.EndpointsDiscoveryGlobalConfig.isEnable()||((G=i===null||i===void 0?void 0:i.GLIP)===null||G===void 0?void 0:G.discoveryRequired));if(U){D.glipGdsBaseURL=_===null||_===void 0?void 0:_.gdsInternalServer}else{D.glipApiBaseURL=l.vc.isProductionEnv()?undefined:h.apiServer}F=o.apiConfiguration.getConfig().brandId;x=y(y(y(y({},w),D),t),{brand_id:F});if(g){x["discovery"]=true}j=m+"?"+(0,a.stringify)(x);E.log("auth url is ",g);E.log("ultimate href is",j);return[2,j]}}))}))}},691627:(e,t,r)=>{r.d(t,{G:()=>getLanguage});var n=r(714614);var i=r.n(n);function getLanguage(){var e=i().language;var t=e.split("-");var r=t[0];var n=t[1];var o={de:["DE"],en:["US","GB"],es:["ES","419"],fr:["FR","CA"],it:["IT"],pt:["BR","PT"],ja:["JP"],zh:["CN","TW"],ko:["KR"],nl:["NL"],fi:["FI"]};var a=o[r];if(!a){return"en_US"}var s=a.find((function(e){return e===n}));var u=s?r+"_"+n:r+"_"+a[0];return u}},99141:(e,t,r)=>{r.d(t,{K:()=>lazyEntrance});var n=r(305406);var i=r.n(n);var o=r(957685);var a=r(744069);var s=r(842827);var u=undefined&&undefined.__assign||function(){u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return u.apply(this,arguments)};var Error=function(e){var t=e.retry;return i().createElement(s.TryAgainPage,{messageKey:"common.weWereUnableToLoadThePage",tryAgainKey:"common.tryAgain",onReload:t})};function lazyEntrance(e,t){return(0,o.loadableComponent)(e,u({Loading:i().createElement(a.jg,null),Error},t?t:{}))}},34763:(e,t,r)=>{r.d(t,{f:()=>usePageReady});var n=r(305406);var i=r.n(n);var o=r(715791);function usePageReady(){(0,n.useEffect)((function(){o.q9.dispatchPageReady()}),[])}},202935:(e,t,r)=>{r.d(t,{N:()=>Y});var n=r(325719);var i=r(161320);var o=r.n(i);var a=r(862926);var s="[MEDALLIA][CORE]";var u=a.ModuleLogger.getLogger(s,(function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return e}),a.EVENT_DATA_FEATURE.COMMON);var l=r(31584);var c=r(667489);var d=function(){function MedalliaDataSyncController(e,t){this._onsiteSdk=e;this._customParameter=t}MedalliaDataSyncController.prototype.updateCustomParameter=function(e,t){if(t===void 0){t=true}Object.assign(this._customParameter,e);t&&this.updatePageView()};MedalliaDataSyncController.prototype.updatePageView=function(){this._onsiteSdk.updatePageView()};return MedalliaDataSyncController}();var f=function(){function MedalliaActionController(e){this._onsiteSdk=e}MedalliaActionController.prototype.loadForm=function(e){return this._onsiteSdk.loadForm(e)};MedalliaActionController.prototype.showForm=function(e,t){return this._onsiteSdk.showForm(e,t)};MedalliaActionController.prototype.isSurveyDisplayed=function(){return this._onsiteSdk.isSurveyDisplayed()};return MedalliaActionController}();var p=function(){function MedalliaController(e,t){this._onsiteSdk=e;this._customParameter=t}MedalliaController.prototype.getMedalliaActionController=function(){if(!this._medalliaActionController){this._medalliaActionController=new f(this._onsiteSdk)}return this._medalliaActionController};MedalliaController.prototype.getMedalliaDataSyncController=function(){if(!this._medalliaDataSyncController){this._medalliaDataSyncController=new d(this._onsiteSdk,this._customParameter)}return this._medalliaDataSyncController};return MedalliaController}();var v=r(429205);var h=function(){function MedalliaService(){this._isServiceReady=false}MedalliaService.prototype.getMedalliaController=function(){if(!this._medalliaController){this._medalliaController=new p(this._onsiteSdk,this._customParameter)}return this._medalliaController};MedalliaService.prototype.loadForm=function(e){return this.getMedalliaController().getMedalliaActionController().loadForm(e)};MedalliaService.prototype.showForm=function(e,t){return this.getMedalliaController().getMedalliaActionController().showForm(e,t)};MedalliaService.prototype.updatePageView=function(){this.getMedalliaController().getMedalliaDataSyncController().updatePageView()};MedalliaService.prototype.isSurveyDisplayed=function(){return this.getMedalliaController().getMedalliaActionController().isSurveyDisplayed()};MedalliaService.prototype.updateCustomParameter=function(e,t){this.getMedalliaController().getMedalliaDataSyncController().updateCustomParameter(e,t)};MedalliaService.prototype.onSdkLoadSuccess=function(){this._onsiteSdk=window[l.hr.KAMPYLE_ONSITE_SDK];window[l.$4]={};this._customParameter=window[l.$4];this._isServiceReady=true;c.notificationCenter.emit(l.FY.MEDALLIA_SERVICE_READY);if(v.B.getIsRunningE2E()){u.info("Is running e2e -> don't listen to custom events")}else{this._listenCustomEvents()}u.info(l.xf.SDK_LOADED)};MedalliaService.prototype.onLoadError=function(){this._isServiceReady=false;u.error(l.xf.SCRIPT_LOAD_ERROR)};Object.defineProperty(MedalliaService.prototype,"isServiceReady",{get:function(){return this._isServiceReady},enumerable:true,configurable:true});MedalliaService.prototype._listenCustomEvents=function(){window.addEventListener(l.cg.FORM_DISPLAYED,this._onFormDisplayed);window.addEventListener(l.cg.FORM_CLOSE_NO_SUBMIT,this._onFormCloseNoSubmit);window.addEventListener(l.cg.THANKYOU_CLOSE,this._onThankYouClose);window.addEventListener(l.cg.SUBMIT_FEEDBACK,this._onFormSubmitted)};MedalliaService.prototype._onFormDisplayed=function(e){if(e.detail){c.notificationCenter.emit(l.FY.MEDALLIA_CUSTOM_EVENT_RECEIVED,{eventName:l.W1.FORM_DISPLAYED,formId:e.detail.Form_ID,formType:e.detail.Form_Type})}};MedalliaService.prototype._onFormCloseNoSubmit=function(e){if(e.detail){c.notificationCenter.emit(l.FY.MEDALLIA_CUSTOM_EVENT_RECEIVED,{eventName:l.W1.FORM_CLOSE_NO_SUBMIT,formId:e.detail.Form_ID,formType:e.detail.Form_Type})}};MedalliaService.prototype._onThankYouClose=function(e){if(e.detail){c.notificationCenter.emit(l.FY.MEDALLIA_CUSTOM_EVENT_RECEIVED,{eventName:l.W1.THANKYOU_CLOSE,formId:e.detail.Form_ID,formType:e.detail.Form_Type})}};MedalliaService.prototype._onFormSubmitted=function(e){if(e.detail){c.notificationCenter.emit(l.FY.MEDALLIA_CUSTOM_EVENT_RECEIVED,{eventName:l.W1.SUBMIT_FEEDBACK,formId:e.detail.Form_ID,formType:e.detail.Form_Type})}};MedalliaService.getServiceInstance=function(){if(!this._service){this._service=new MedalliaService}if(!this._service.isServiceReady){u.info(l.xf.NOT_READY)}return this._service};MedalliaService.prototype.dispose=function(){window.removeEventListener(l.cg.FORM_DISPLAYED,this._onFormDisplayed);window.removeEventListener(l.cg.FORM_CLOSE_NO_SUBMIT,this._onFormCloseNoSubmit);window.removeEventListener(l.cg.THANKYOU_CLOSE,this._onThankYouClose);window.removeEventListener(l.cg.SUBMIT_FEEDBACK,this._onFormSubmitted)};return MedalliaService}();var _=r(586905);var g=r(374686);var y=[(0,_.lu)(g.fi.MESSAGE),(0,_.lu)(g.fi.MEET),(0,_.lu)(g.fi.TELEPHONY),(0,_.lu)(g.fi.CONTACT),(0,_.lu)(g.fi.PLUGINS)];var m=r(518411);var b=r(723570);var w=r(652214);var E=r(438884);var O=r(168825);var S=r(281973);var C=r(915264);var T=r(968006);var I=function(){function DataTrackingUtils(){}DataTrackingUtils.triggerMedalliaSurvey=function(e){var t=e.pageName,r=e.idleTime;T.s6.page("Jup_Web/DT_medallia_survey",{option:t,idleTime:r})};DataTrackingUtils.submitMedalliaSurvey=function(e){var t=e.id,r=e.idleTime;T.s6.track("Jup_Web/DT_medallia_survey_triggered",{action:"submitted",surveyId:t,idleTime:r})};DataTrackingUtils.closeMedalliaSurvey=function(e){var t=e.id,r=e.idleTime;T.s6.track("Jup_Web/DT_medallia_survey_triggered",{action:"closed",surveyId:t,idleTime:r})};return DataTrackingUtils}();var P=r(594173);var k=r(775102);var A=r(718483);var M=r(451527);var R=r(521412);var N=r(38942);var D=r(960782);var L=r(106945);var U=r(957685);var F=r(962228);var x=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var j=undefined&&undefined.__assign||function(){j=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return j.apply(this,arguments)};var B=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var W=undefined&&undefined.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};var H=A.k.tags("[MedalliaManager]");var G="MedalliaManager";var K="last_seen_survey";var V=0;var Y=function(e){x(MedalliaManager,e);function MedalliaManager(){var t=e.call(this)||this;t.isFormAvailable=new Map;t.pageName="";t.isIdle=false;t.hasCall=false;t.hasMeeting=false;t.hasOpenedDialog=false;t.shouldShowEmbeddedSurvey=false;t._customParameter={};t._pagesAllowSurvey=new Set;t._reactionDisposers=[];t._idleTimerRegistered=false;t._medalliaIdleTimerInstance=R.C.getInstance(N.G.D_MEDALLIA_IDLE_TIMER);t._shouldUpdatePageView=true;t._lastSeenSurveyTimestamp=(0,a.getCurrentTime)();t.updatePageName=function(e){t.pageName=e};t.setIdleState=function(e){t.isIdle=e};t.setHasCallState=function(e){t.hasCall=e};t.setHasMeetingState=function(e){t.hasMeeting=e};t.setHasOpenedDialog=function(e){t.hasOpenedDialog=e.size>0};t.loadForm=function(e){var handler=function(){t.isFormAvailable.set(e,t._medalliaService.loadForm(e))};if(t._medalliaService.isServiceReady){handler()}else if(!t._observing.loadForm[e]){t._observing.loadForm[e]=true;t._addToWaitingList(handler)}};t.showForm=function(e,r){if(t._medalliaService.isServiceReady){t._medalliaService.showForm(e,r)}};t.updatePageView=function(){if(t._medalliaService.isServiceReady&&t._shouldUpdatePageView){t._medalliaService.updatePageView()}};t.isSurveyDisplayed=function(){if(t._medalliaService.isServiceReady){return t._medalliaService.isSurveyDisplayed()}return false};t.onSdkLoadSuccess=function(){t._medalliaService.onSdkLoadSuccess()};t.onLoadError=function(){t._medalliaService.onLoadError()};t._addToWaitingList=function(e){t.subscribeNotificationOnce(l.FY.MEDALLIA_SERVICE_READY,(function(){(0,n.runInAction)((function(){return e()}))}))};t._handleCustomEvent=function(e){var r=e.formType,n=e.eventName,i=e.formId;if(r==="Embedded"){switch(n){case l.W1.FORM_DISPLAYED:t.shouldShowEmbeddedSurvey=true;t._shouldUpdatePageView=false;t._updateLastSeenSurvey();I.triggerMedalliaSurvey({pageName:t.pageName,idleTime:t._idleTime});break;case l.W1.FORM_CLOSE_NO_SUBMIT:t.shouldShowEmbeddedSurvey=false;t._shouldUpdatePageView=true;I.closeMedalliaSurvey({id:i,idleTime:t._idleTime});break;case l.W1.SUBMIT_FEEDBACK:I.submitMedalliaSurvey({id:i,idleTime:t._idleTime});break;case l.W1.THANKYOU_CLOSE:t.shouldShowEmbeddedSurvey=false;t._shouldUpdatePageView=true;break;default:return}}};t.dispose=function(){e.prototype.dispose.call(t);t._medalliaService.dispose();t._reactionDisposers.forEach((function(e){return e()}));t._reactionDisposers=[];t._medalliaIdleTimerInstance.dispose();t._unRegisterIdleTimer();S.ZP.unSubscribe(t.setHasOpenedDialog)};t._init();return t}Object.defineProperty(MedalliaManager.prototype,"isDND",{get:function(){var e=E.X.get(this.currentUserId);return e===w.FU.DND},enumerable:true,configurable:true});Object.defineProperty(MedalliaManager.prototype,"currentUserId",{get:function(){return O.ZP.get(O.MG.CURRENT_USER_CONTACT_ID)},enumerable:true,configurable:true});Object.defineProperty(MedalliaManager.prototype,"isOnTargetPage",{get:function(){return this._pagesAllowSurvey.has(this.pageName)},enumerable:true,configurable:true});Object.defineProperty(MedalliaManager.prototype,"isUserBusy",{get:function(){return this.hasCall||this.hasMeeting||this.isDND||!this.isOnTargetPage||!this.isIdle||this.hasOpenedDialog},enumerable:true,configurable:true});Object.defineProperty(MedalliaManager.prototype,"isLoggedIn",{get:function(){var e=O.ZP.get(O.MG.APP_LOGIN_INFO);return Boolean(e&&e.success)},enumerable:true,configurable:true});Object.defineProperty(MedalliaManager.prototype,"hasMessageModule",{get:function(){var e,t;return(t=(e=O.ZP.get(O.MG.ENTITLEMENT))===null||e===void 0?void 0:e[g.fi.MESSAGE])===null||t===void 0?void 0:t.hasMessageModule},enumerable:true,configurable:true});MedalliaManager.prototype._getKeyActionService=function(){var e;return(e=(0,c.getModule)(D.COMMON_KEY_ACTION_MODULE))===null||e===void 0?void 0:e.getKeyActionService()};Object.defineProperty(MedalliaManager.prototype,"_idleTime",{get:function(){return this._medalliaIdleTimerInstance.value},enumerable:true,configurable:true});MedalliaManager.prototype.updateCustomParameter=function(e){var t=this;if(e===void 0){e={}}var r=this._addCustomParameter(this._filterAllowedCustomParameter(e));this._customParameter=j(j({},this._customParameter),r);var handler=function(){return t._medalliaService.updateCustomParameter(t._customParameter,t._shouldUpdatePageView)};if(this._medalliaService.isServiceReady){handler()}else if(!this._observing.updateCustomParameter){this._observing.updateCustomParameter=true;this._addToWaitingList(handler)}};MedalliaManager.prototype._filterAllowedCustomParameter=function(e){var t={};Object.keys(e).forEach((function(r){var n=r.toLowerCase();if(l.Jm.includes(n)){t[n]=e[r]}}));return t};MedalliaManager.prototype._addCustomParameter=function(e){var t=(new Date).toISOString();var r=(0,L.ZJ)();var n=this._lastSeenSurveyTimestamp;var i=o()().diff(this._lastSeenSurveyTimestamp,"d");return j(j({},e),{time:t,endpoint:r,last_seen_survey_date:n,last_seen_survey_age:i})};MedalliaManager.prototype._setPagesAllowSurvey=function(){var e=this;y.forEach((function(t){return e._pagesAllowSurvey.add(t.slice(1))}))};MedalliaManager.prototype._updateLastSeenSurvey=function(){var e,t;var r=this._getKeyActionService();if(r){(t=(e=r.get(D.ACTION_KEY.PROFILE_SETTINGS))===null||e===void 0?void 0:e.getAction())===null||t===void 0?void 0:t.then((function(e){var t=e.set;t([{key:K,value:(0,a.getCurrentTime)()}])}))}};MedalliaManager.prototype._observeProfileChange=function(){var e=this;var t=this._getKeyActionService();if(t){var handleUpdate_1=function(t){e._lastSeenSurveyTimestamp=t||V;e.updateCustomParameter()};var r=t.get(D.ACTION_KEY.PROFILE_SETTINGS);if(r){r.getAction().then((function(t){var r=t.observe;var n=r(K,handleUpdate_1,true);n&&e._reactionDisposers.push(n)}))}else{t.on(D.ACTION_KEY.PROFILE_SETTINGS,(function(){var r,n;(n=(r=t.get(D.ACTION_KEY.PROFILE_SETTINGS))===null||r===void 0?void 0:r.getAction())===null||n===void 0?void 0:n.then((function(t){var r=t.observe;var n=r(K,handleUpdate_1,true);n&&e._reactionDisposers.push(n)}))}))}}};MedalliaManager.prototype._registerIdleTimer=function(){var e=this;var t=this._idleTime/1e3;var r={onActive:function(){e.setIdleState(false);H.info("Medallia custom parameter isidle is set to: false")},onIdle:function(){e.setIdleState(true);H.info("Medallia custom parameter isidle is set to: true")}};if(P.d){this._interactiveController=new k.T(t,r)}else{M.D.register(j({key:G,time:t},r))}this._idleTimerRegistered=true};MedalliaManager.prototype._unRegisterIdleTimer=function(){if(P.d){this._interactiveController.dispose()}else{M.D.unRegister(G)}this._idleTimerRegistered=false};MedalliaManager.prototype._init=function(){var e=this;this._medalliaService=h.getServiceInstance();this._observing={loadForm:{},updateCustomParameter:false};this._setPagesAllowSurvey();this._medalliaIdleTimerInstance.observe();var t=(0,n.reaction)((function(){return{hasCall:e.hasCall,hasMeeting:e.hasMeeting,isDND:e.isDND,isOnTargetPage:e.isOnTargetPage,isIdle:e.isIdle,hasOpenedDialog:e.hasOpenedDialog,isUserBusy:e.isUserBusy}}),(function(t){e.updateCustomParameter(t)}),{fireImmediately:true});var r=(0,n.reaction)((function(){return e.hasMessageModule}),(function(t){return t&&e._observeProfileChange()}),{fireImmediately:true});var i=(0,n.reaction)((function(){return e._idleTime}),(function(t){if(t){if(e._idleTimerRegistered){e._unRegisterIdleTimer()}e._registerIdleTimer();e.updateCustomParameter({idleTime:t})}}),{fireImmediately:true});var reactionForAPI=function(t,r){var i=(0,n.reaction)((function(){return(0,U.isRegistered)(t)}),(function(t){var n;if(t){r().then((function(t){var r=t.res;n=r;r&&e._reactionDisposers.push(r)}))}else{(0,F.remove)(e._reactionDisposers,(function(e){var t=e===n;if(t){n===null||n===void 0?void 0:n()}return t}))}}),{fireImmediately:true});return i};var o=reactionForAPI(m.Z.call.watchHasCall,(function(){return m.Z.call.watchHasCall({effect:e.setHasCallState})}));var a=reactionForAPI(m.Z.video.watch,(function(){return m.Z.video.watch({watchKey:b.SI.HAS_MEETING_WINDOW_OPEND,callback:e.setHasMeetingState,options:{fireImmediately:true}})}));this._reactionDisposers.push(t,r,i,o,a);S.ZP.onChange(this.setHasOpenedDialog);this.subscribeNotification(l.FY.MEDALLIA_CUSTOM_EVENT_RECEIVED,this._handleCustomEvent)};MedalliaManager.getManager=function(){if(!this._manager){this._manager=new MedalliaManager}return this._manager};var t;B([n.observable,W("design:type",typeof(t=typeof Map!=="undefined"&&Map)==="function"?t:Object)],MedalliaManager.prototype,"isFormAvailable",void 0);B([n.observable,W("design:type",String)],MedalliaManager.prototype,"pageName",void 0);B([n.observable,W("design:type",Boolean)],MedalliaManager.prototype,"isIdle",void 0);B([n.observable,W("design:type",Boolean)],MedalliaManager.prototype,"hasCall",void 0);B([n.observable,W("design:type",Boolean)],MedalliaManager.prototype,"hasMeeting",void 0);B([n.observable,W("design:type",Boolean)],MedalliaManager.prototype,"hasOpenedDialog",void 0);B([n.observable,W("design:type",Boolean)],MedalliaManager.prototype,"shouldShowEmbeddedSurvey",void 0);B([n.computed,W("design:type",Object),W("design:paramtypes",[])],MedalliaManager.prototype,"isDND",null);B([n.computed,W("design:type",Object),W("design:paramtypes",[])],MedalliaManager.prototype,"currentUserId",null);B([n.computed,W("design:type",Object),W("design:paramtypes",[])],MedalliaManager.prototype,"isOnTargetPage",null);B([n.computed,W("design:type",Object),W("design:paramtypes",[])],MedalliaManager.prototype,"isUserBusy",null);B([n.computed,W("design:type",Object),W("design:paramtypes",[])],MedalliaManager.prototype,"isLoggedIn",null);B([n.computed,W("design:type",Object),W("design:paramtypes",[])],MedalliaManager.prototype,"hasMessageModule",null);B([n.computed,W("design:type",Object),W("design:paramtypes",[])],MedalliaManager.prototype,"_idleTime",null);B([n.action,W("design:type",Object)],MedalliaManager.prototype,"updatePageName",void 0);B([n.action,W("design:type",Object)],MedalliaManager.prototype,"setIdleState",void 0);B([n.action,W("design:type",Object)],MedalliaManager.prototype,"setHasCallState",void 0);B([n.action,W("design:type",Object)],MedalliaManager.prototype,"setHasMeetingState",void 0);B([n.action,W("design:type",Object)],MedalliaManager.prototype,"setHasOpenedDialog",void 0);B([n.action,W("design:type",Object)],MedalliaManager.prototype,"loadForm",void 0);B([n.action,W("design:type",Object)],MedalliaManager.prototype,"_addToWaitingList",void 0);B([n.action,W("design:type",Object)],MedalliaManager.prototype,"_handleCustomEvent",void 0);return MedalliaManager}(C.Z)},775102:(e,t,r)=>{r.d(t,{T:()=>u});var n=r(451527);var i=r(298784);var o=r.n(i);var a=undefined&&undefined.__assign||function(){a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return a.apply(this,arguments)};var s=15e3;var u=function(){function InteractiveController(e,t){var r=this;this._time=Date.now();this._bindEvents=function(){n.F.forEach((function(e){document.addEventListener(e,r._handleEvent)}));r._interval=setInterval((function(){var e=(Date.now()-r._time)/1e3;r.listener(o().ceil(e,2))}),s)};this._unbindEvents=function(){n.F.forEach((function(e){document.removeEventListener(e,r._handleEvent)}))};this.listener=function(e){if(e>r._idleLength&&!r._callback.isIdle){r._callback.onIdle();r._callback.isIdle=!r._callback.isIdle}else if(e<r._idleLength&&r._callback.isIdle){r._callback.onActive();r._callback.isIdle=!r._callback.isIdle}};this._handleEvent=(0,i.debounce)((function(){r._time=Date.now()}),100);this.dispose=function(){r._idleLength=Number.MAX_SAFE_INTEGER;r._unbindEvents();clearInterval(r._interval)};this._idleLength=e;this._callback=a({isIdle:false},t);this._bindEvents()}return InteractiveController}()},451527:(e,t,r)=>{r.d(t,{D:()=>n.D,F:()=>i.Fv});var n=r(79279);var i=r(283419)},656626:(e,t,r)=>{r.d(t,{I:()=>y});var n=r(667489);var i=r.n(n);var o=r(429555);var a=r(862926);var s=r.n(a);var u=undefined&&undefined.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};var l=undefined&&undefined.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function verb(e){return function(t){return step([e,t])}}function step(a){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(o=a[0]&2?i["return"]:a[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;if(i=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:r.label++;return{value:a[1],done:false};case 5:r.label++;i=a[1];a=[0];continue;case 7:a=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1];o=a;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(a);break}if(o[2])r.ops.pop();r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e];i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var c=undefined&&undefined.__values||function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var d=20;var f=1e3;var p=60*f;var v=3*f;var h=6*f;var _=10*f;var g="/online-check.gif";var appendTS=function(e){return e+"?_="+Date.now()};var y=function(){function NetworkStatus(){var e=this;this._onLine=true;this._inProgress=false;this._numOfDetection=0;this._checkPoints=[];this._localNetworkErrorObserved=false;this._unlock=function(t){e._checkAndUpdateStatus(t);e._inProgress=false;clearInterval(e._wakeUpTimer);clearInterval(e._timer);if(!t){e._timer=window.setInterval((function(){if(e._onLine){clearInterval(e._timer);return}e._checkNetworkStatus()}),e._getInterval())}};this._observeLocalNetworkErrorOnce=function(){var t;if(e._localNetworkErrorObserved){a.networkLogger.debug("already observe local network error");return}var r=(t=(0,n.getCurrentAccount)())===null||t===void 0?void 0:t.context.networkManager;if(r){e._localNetworkErrorObserved=true;r.observeLocalNetworkError(e._localNetworkErrorOnceObserver)}};this._localNetworkErrorOnceObserver=function(t){var r;a.networkLogger.debug("receive local network error",t);var i=(r=(0,n.getCurrentAccount)())===null||r===void 0?void 0:r.context.networkManager;if(i){e._localNetworkErrorObserved=false;i.unobserveLocalNetworkError(e._localNetworkErrorOnceObserver)}e.requestStatusWhenOffline()};this.init()}NetworkStatus.prototype.init=function(){var e=this;this._onLine=window.navigator.onLine;this.addCheckPoint((function(){return e._ping(appendTS(g),h)}));this._windowEventDisposer=this._observeWindowEvent()};NetworkStatus.prototype.dispose=function(){var e;(e=this._windowEventDisposer)===null||e===void 0?void 0:e.call(this)};NetworkStatus.prototype._observeWindowEvent=function(){var e=this;var onlineListener=function(){e.updateStatus(true);e._observeLocalNetworkErrorOnce()};window.addEventListener("online",onlineListener);var offlineListener=function(){e.updateStatus(false);e.requestStatusWhenOffline()};window.addEventListener("offline",offlineListener);var loadListener=function(){e.requestStatusWhenOffline()};window.addEventListener("load",loadListener);var focusListener=function(){if(e.getStatus()){n.notificationCenter.emit(o.FY.SOCKET.NETWORK_CHANGE,{state:"focus"});n.notificationCenter.emit(n.WINDOW_EVENT.FOCUS)}else{e.requestStatusWhenOffline()}};window.addEventListener("focus",focusListener);return function(){window.removeEventListener("online",onlineListener);window.removeEventListener("offline",offlineListener);window.removeEventListener("load",loadListener);window.removeEventListener("focus",focusListener)}};NetworkStatus.prototype.addCheckPoint=function(e,t){if(t===void 0){t=false}if(t){this._checkPoints.unshift(e)}else{this._checkPoints.push(e)}};NetworkStatus.prototype.getStatus=function(){return this._onLine};NetworkStatus.prototype.setNetworkStatus=function(e){this._onLine=e};NetworkStatus.prototype.emitNetworkChange=function(e){n.notificationCenter.emit(o.FY.SOCKET.NETWORK_CHANGE,{state:e?"online":"offline"});n.notificationCenter.emit(n.WINDOW_EVENT.ONLINE,{onLine:e})};NetworkStatus.prototype.updateStatus=function(e){this.setNetworkStatus(e);this.emitNetworkChange(e)};NetworkStatus.prototype._checkAndUpdateStatus=function(e){if(this._onLine!==e){this.updateStatus(e)}};NetworkStatus.prototype._lock=function(){var e=this;clearInterval(this._wakeUpTimer);if(this._inProgress){this._wakeUpTimer=window.setTimeout((function(){if(e._inProgress){e._inProgress=false;e._checkNetworkStatus();a.networkLogger.debug("NetworkStatus: ping server timeout")}}),_);return false}this._inProgress=true;return true};NetworkStatus.prototype._getInterval=function(){if(++this._numOfDetection>d){return p}return v};NetworkStatus.prototype._checkNetworkStatus=function(){return u(this,void 0,void 0,(function(){var e,t,r,n,i,o;var s,u;return l(this,(function(l){switch(l.label){case 0:if(!this._lock()){return[2]}a.networkLogger.debug("NetworkStatus: start ping",this._checkPoints);e=false;l.label=1;case 1:l.trys.push([1,8,9,10]);t=c(this._checkPoints),r=t.next();l.label=2;case 2:if(!!r.done)return[3,7];n=r.value;l.label=3;case 3:l.trys.push([3,5,,6]);return[4,n()];case 4:if(l.sent()){a.networkLogger.debug("NetworkStatus: checkPoint success",this._checkPoints,n);e=true;return[3,7]}else{a.networkLogger.debug("NetworkStatus: checkPoint failed",this._checkPoints,n)}return[3,6];case 5:i=l.sent();a.networkLogger.debug("NetworkStatus: checkPoint err",n,i);return[3,6];case 6:r=t.next();return[3,2];case 7:return[3,10];case 8:o=l.sent();s={error:o};return[3,10];case 9:try{if(r&&!r.done&&(u=t.return))u.call(t)}finally{if(s)throw s.error}return[7];case 10:a.networkLogger.debug("NetworkStatus: unlock result",e);this._unlock(e);return[2]}}))}))};NetworkStatus.prototype._ping=function(e,t){return new Promise((function(r){var n;var i=new XMLHttpRequest;i.open("get",e);i.onload=function(){clearTimeout(n);r(true)};i.onerror=function(){clearTimeout(n);r(i.status===0?false:true)};i.send();n=setTimeout((function(){i.abort&&i.abort();r(false)}),t)}))};NetworkStatus.prototype.requestStatusWhenOffline=function(){a.networkLogger.debug("NetworkStatus: requestStatusWhenOffline");clearInterval(this._timer);this._numOfDetection=0;this._checkNetworkStatus()};return NetworkStatus}()},251390:(e,t,r)=>{r.d(t,{N:()=>b});var n=r(639051);var i=r.n(n);var o=r(482989);var a=r.n(o);var s=r(472155);var u=r(307230);function getVisibilityKey(){var e={hidden:"hidden",visibilityChange:"visibilitychange"};switch(true){case typeof document.hidden!=="undefined":break;case typeof document.msHidden!=="undefined":e.hidden="msHidden";e.visibilityChange="msvisibilitychange";break;case typeof document.webkitHidden!=="undefined":e.hidden="webkitHidden";e.visibilityChange="webkitvisibilitychange";break;default:break}return e}function isHidden(){var e=getVisibilityKey();return document[e.hidden]}function visibilityChangeEvent(e,t){var r=getVisibilityKey();function handleVisibilityChange(){if(isHidden()){e&&e()}else{t&&t()}}document.addEventListener(r.visibilityChange,handleVisibilityChange);return function(){document.removeEventListener(r.visibilityChange,handleVisibilityChange)}}const l=visibilityChangeEvent;var c=r(145624);var d=["Chrome","Safari","Edge","Firefox"];var f={Message:{Chrome:"44",Firefox:"52",Safari:"11.1",Edge:"17"},Phone:{Chrome:"44",Firefox:"52",Safari:"11.1",Edge:"79"},Video:{Chrome:"75",Firefox:null,Safari:null,Edge:"79"}};var p=r(957685);var v=r(292699);var h=r(796036);var _=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var g=undefined&&undefined.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};var y=undefined&&undefined.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function verb(e){return function(t){return step([e,t])}}function step(a){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(o=a[0]&2?i["return"]:a[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;if(i=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:r.label++;return{value:a[1],done:false};case 5:r.label++;i=a[1];a=[0];continue;case 7:a=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1];o=a;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(a);break}if(o[2])r.ops.pop();r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e];i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var m=78;var b=function(e){_(PlatformUtils,e);function PlatformUtils(t){var r=e.call(this)||this;r._window=t;return r}PlatformUtils.prototype.isSafari=function(){var e=this._window.navigator.userAgent;return!!(e&&e.indexOf("Safari")>-1&&e.indexOf("Chrome")<1)};PlatformUtils.prototype.isFireFox=function(){var e=this._window.navigator.userAgent;return!!(e&&e.indexOf("Firefox")>-1)};PlatformUtils.prototype.isChromeBasedBrowser=function(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)};PlatformUtils.prototype.isChromiumEdge=function(){return/Edg/.test(navigator.userAgent)};PlatformUtils.prototype.isElectron=function(){var e=this._window.navigator.userAgent;return e.toLowerCase().indexOf(" electron/")>-1};PlatformUtils.prototype.getBrowserVersion=function(){var e=new(a());var t=e.getBrowser();if(!t.version)return null;var r=t.version.split(".").map((function(e){return parseInt(e,10)}));return{major:r[0],minor:r[1],build:r[2],patch:r[3]}};PlatformUtils.prototype.getPlatformNetworkInfo=function(){return g(this,void 0,void 0,(function(){var e,t,r;return y(this,(function(n){switch(n.label){case 0:return[4,h.M$.getPlatformNetworkInfo()];case 1:e=n.sent(),t=e.code,r=e.res;if(t===p.ResponseCode.Success){return[2,r]}return[2,{}]}}))}))};PlatformUtils.prototype.getOSName=function(){return(0,s.Pd)()};PlatformUtils.prototype.getLongOSName=function(){return(0,s.I7)()};PlatformUtils.prototype.convertToShortOSName=function(e){return(0,s.xE)(e)};PlatformUtils.prototype.convertToLongOSName=function(e){return(0,s.k)(e)};PlatformUtils.prototype.buildUserAgentForTelephony=function(){var e="RingCentral Jupiter";var t=this.getVersionInfo(),r=t.isElectron,n=t.appVersion,i=t.electronVersion,o=t.electronAppVersion;if(r){return e+" DT/"+n+"-"+o+"/Electron-"+i}var s=new(a());var u=s.getBrowser(),l=u.name,c=u.version;return e+" Web/"+n+"/"+l+"-"+c};PlatformUtils.prototype.buildUserAgentForHttp=function(){var e=this.getVersionInfo(),t=e.isElectron,r=e.appVersion,n=e.buildCommit,i=e.buildNumber;var o=this.userAgentAppName+"Web";(0,v.p)()&&(o=o+"Beta");var a=o+"/"+r;var s="build."+i+"; rev."+n;if(t){return this._buildDesktopUserAgent()+" "+a+" ("+s+")"}return a+" ("+this.userAgentBrandName+"; "+this._getOSInfo()+"; "+s+")"};PlatformUtils.prototype.getIsHidden=function(){var e=this._window.document;return e&&(e["hidden"]||e["msHidden"]||e["webkitHidden"])};PlatformUtils.prototype.openWindow=function(e,t){c.Z.newWindow(e,t||{alwaysOpenInBrowser:false})};PlatformUtils.prototype.getLanguage=function(){return navigator.language};PlatformUtils.prototype.visibilityChangeEvent=function(e,t){return l(e,t)};Object.defineProperty(PlatformUtils.prototype,"_cookieDomain",{get:function(){var e=this._window.location;var t=e.hostname;var r=t.split(".");var n=r.length;if(n>=2){t=r[n-2]+"."+r[n-1]}return t},enumerable:true,configurable:true});Object.defineProperty(PlatformUtils.prototype,"_cookieEnabled",{get:function(){var e=this._window.navigator;return e.cookieEnabled},enumerable:true,configurable:true});PlatformUtils.prototype.setSFDCookie=function(e){var t=this._window.document;if(this._cookieEnabled){t.cookie="jtk="+e+"; domain="+this._cookieDomain+"; path=/"}};PlatformUtils.prototype.clearSFDCookie=function(){if(this._cookieEnabled){var e="Thu, 01 Jan 1970 00:00:00 GMT";document.cookie="jtk=to_be_removed; domain="+this._cookieDomain+"; path=/; expires="+e}};PlatformUtils.prototype.isBrowserSupport=function(){var e=/Chrome\/(\d+)\./;var t=e.exec(window.navigator.userAgent);return t&&parseInt(t[1],10)>=m};PlatformUtils.prototype.isFeatureBrowserSupport=function(e){var t=new(a());var r=t.getBrowser();if(!(r===null||r===void 0?void 0:r.name)||!r.version)return false;if(!d.includes(r.name)){return false}var n=f[e][r.name];if(!n)return false;return i().compare(r.version,n,">=")};PlatformUtils.prototype.isMac=function(){return s.V5};return PlatformUtils}(u.r)},866807:(e,t,r)=>{r.d(t,{hc:()=>_,pC:()=>c.p});var n=r(305406);var i=r.n(n);var o=r(957097);var a=r(258010);var s=r(473014);var u=r(76846);var l=r(986485);var c=r(251725);var d=undefined&&undefined.__makeTemplateObject||function(e,t){if(Object.defineProperty){Object.defineProperty(e,"raw",{value:t})}else{e.raw=t}return e};var f=undefined&&undefined.__assign||function(){f=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return f.apply(this,arguments)};var p=undefined&&undefined.__rest||function(e,t){var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0)r[n]=e[n];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++){if(t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i]))r[n[i]]=e[n[i]]}return r};var v={vertical:"top",horizontal:"center"};var h=(0,n.forwardRef)((function(e,t){var r=e.id,o=e.open,l=o===void 0?true:o,d=e.autoHideDuration,h=e.dismissible,_=e.message,g=e.dismiss,y=e.action,m=e.className,b=e.onClose,w=e.TransitionProps,E=e.size,O=e.fullWidth,S=p(e,["id","open","autoHideDuration","dismissible","message","dismiss","action","className","onClose","TransitionProps","size","fullWidth"]);var C=(0,n.useCallback)((function(e,t){if(t==="timeout"){g&&g()}b&&b(e,t)}),[g,b]);var T=(0,n.useMemo)((function(){var e=[];if(Array.isArray(y)){e=y}else{y&&e.push(y)}if(h){e.push(i().createElement(s.U,{key:"dismiss",variant:"icon","aria-label":"Dismiss",symbol:a.Z,onClick:g}))}return e}),[y,h]);var I=(0,n.useMemo)((function(){var e;if(h||T.length!==0){e=c.X.LEFT}else if(!h&&!T){e=c.X.CENTER}return e}),[T,h]);var P=f(f({},S),{message:_,messageAlign:I,action:T.length!==0?T:null,size:E,fullWidth:O,square:false});return i().createElement(u.f,{ref:t,className:m,open:l,anchorOrigin:v,onClose:C,autoHideDuration:d,ContentProps:P,TransitionProps:w,size:E})}));var _=(0,o.ZP)(h)(g||(g=d(["\n  ","\n"],["\n  ","\n"])),l.j);_.defaultProps={};_.displayName="RcToast";var g},2317:(e,t,r)=>{r.d(t,{y:()=>ToastWrapper});var n=r(305406);var i=r.n(n);var o=r(145624);var a=r(948181);var s=r(923327);var u=undefined&&undefined.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var ToastWrapper=function(e){var t=e.disable,r=t===void 0?false:t;var l=u((0,n.useState)(a.yT.data),2),c=l[0],d=l[1];(0,n.useEffect)((function(){return a.yT.listen((function(e){d(e)}))}),[]);return i().createElement(s.vq,{disable:r,toasts:c,windowManager:o.Z})}},536107:(e,t,r)=>{r.d(t,{y:()=>u});var n=r(669211);var i=r.n(n);var o=r(866807);var a=undefined&&undefined.__makeTemplateObject||function(e,t){if(Object.defineProperty){Object.defineProperty(e,"raw",{value:t})}else{e.raw=t}return e};var s="JUPITER_TOAST_CONTAINER";var u=n.styled.div.attrs({id:s})(l||(l=a(["\n  &#"," {\n    position: relative;\n    top: ",";\n\n    "," + & {\n      top: ",";\n    }\n  }\n"],["\n  &#"," {\n    position: relative;\n    top: ",";\n\n    "," + & {\n      top: ",";\n    }\n  }\n"])),s,(0,n.spacing)(6),o.hc,(0,n.spacing)(9));var l},933727:(e,t,r)=>{r.d(t,{b:()=>s});var n=r(957097);var i=r(354154);var o=r(76846);var a=undefined&&undefined.__makeTemplateObject||function(e,t){if(Object.defineProperty){Object.defineProperty(e,"raw",{value:t})}else{e.raw=t}return e};var s=(0,n.ZP)("div")(l||(l=a(["\n  position: fixed;\n  top: ",";\n  padding-left: ",";\n  padding-right: ",";\n  left: 0;\n  right: 0;\n  box-sizing: border-box;\n  z-index: 3000;\n  "," + "," {\n     margin-top: ",";\n   }\n   pointer-events: none;\n"],["\n  position: fixed;\n  top: ",";\n  padding-left: ",";\n  padding-right: ",";\n  left: 0;\n  right: 0;\n  box-sizing: border-box;\n  z-index: 3000;\n  "," + "," {\n     margin-top: ",";\n   }\n   pointer-events: none;\n"])),(function(e){var t=e.paddingTop;return(0,i.W0)(t?t/4:16)}),(0,i.W0)(4),(0,i.W0)(4),o.f,o.f,(0,i.W0)(3));const u=null&&s;var l},544136:(e,t,r)=>{r.d(t,{K:()=>m});var n=r(226601);var i=r(760576);var o=r(782117);var a=r(473623);var s=r(843510);var u=r(429555);var l=r(667489);var c=r.n(l);var d=r(444088);var f=r(862926);var p=r.n(f);var v=r(302186);var h=r.n(v);var _=undefined&&undefined.__assign||function(){_=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return _.apply(this,arguments)};var g=undefined&&undefined.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};var y=undefined&&undefined.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function verb(e){return function(t){return step([e,t])}}function step(a){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(o=a[0]&2?i["return"]:a[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;if(i=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:r.label++;return{value:a[1],done:false};case 5:r.label++;i=a[1];a=[0];continue;case 7:a=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1];o=a;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(a);break}if(o[2])r.ops.pop();r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e];i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var m=function(){function SetupModule(){var e=this;this._logger=s.k.tags(SetupModule.name);this._api=new a.bl;this._setupCountryInfoMap(this.getCountryInfoList());d.R.addConfigObserver({getter:function(e){return e},callback:function(t){e._setupCountryInfoMap(e.getCountryInfoList())}})}SetupModule.prototype._setupCountryInfoMap=function(e){this._countryInfoMap=new Map(e.map((function(e){return[e.countryOrAreaCode,e]})))};SetupModule.prototype.init=function(e){this._api.setAPIServer(e.apiServer);this._gdsServer=e.gdsServer};SetupModule.prototype.getUserInfo=function(e,t,r){var n;return g(this,void 0,Promise,(function(){var a,s,u,l,c,d,f,p,v,h,_,g;return y(this,(function(y){switch(y.label){case 0:return[4,this._doDiscovery(t["t"])];case 1:y.sent();this._logger.info("getUserInfo,",e);return[4,this._api.getIndexData(t,this._getRealRCUTMParams(r))];case 2:a=y.sent();s=a.user_id;u=a.company_id;return[4,this._api.getPerson(s)];case 3:l=y.sent();c=a.companies&&a.companies.find((function(e){return e._id===u}));d=a.teams&&((n=a.teams.find((function(e){return e.is_company_team})))===null||n===void 0?void 0:n._id);f=a.has_password_set;p=l&&l.phx_setup_status?o.Q5.RC:o.Q5.GLIP;v={type:i.$o.AUTH_TOKEN,value:this._api.getToken()};if(!(f&&p===o.Q5.RC))return[3,5];h={type:i.$o.AUTH_CODE};return[4,this._api.getRCCode()];case 4:v=(h.value=y.sent(),h);y.label=5;case 5:_=!t["inviter_id"]&&this._parseBrandId(t["t"])||this._getBrandIdFromCompany(c);g={hasPasswordSet:f,userId:s,companyId:u,companyTeamId:d,isFirstUser:l?!!l.first_user:false,email:l&&l.email||t["email"]||"",companyName:this._getCompanyName(c),noCompanyAccount:this._isNoCompanyAccount(c),accountType:p,authInfo:v,brandId:_};this._logger.info("hasPasswordSet,",f,". userId,",s,". companyTeamId,",d,". firstUser,",g.isFirstUser,". accountType,",p,". brandId",_);return[2,g]}}))}))};SetupModule.prototype.setup=function(e){return g(this,void 0,Promise,(function(){var t,r,n,i,o,a,s,u,l,c,d,f;return y(this,(function(p){switch(p.label){case 0:t=e.userInfo,r=e.firstName,n=e.lastName,i=e.password,o=e.companyName,a=e.countryOrAreaCode,s=e.locale,u=e.marketChecked,l=e.reCaptchaToken;c=e.brandId;c=this._getRealBrandId(c,a);this._logger.info("setup,",r,n,o,c,s);if(t.hasPasswordSet){this._logger.info("already has password");return[2,{person:null,authInfo:t.authInfo}]}if(!(t.isFirstUser&&o))return[3,4];return[4,this._api.setCompanyName(t.companyId,o)];case 1:p.sent();d=t.companyTeamId;if(!d)return[3,3];return[4,this._api.setCompanyTeamName(t.companyTeamId,o)];case 2:d=p.sent();p.label=3;case 3:d;p.label=4;case 4:return[4,this._api.setPersonName(t.userId,r,n)];case 5:p.sent();return[4,this._api.setPassword(i,s,c,u,l)];case 6:f=p.sent();this._logger.info("authInfo,",f.authInfo.type,"private:"+f.authInfo.value.length);return[2,f]}}))}))};SetupModule.prototype.isPhoenixUser=function(e){return g(this,void 0,Promise,(function(){var t;return y(this,(function(r){switch(r.label){case 0:return[4,this._api.getPerson(e)];case 1:t=r.sent();if(t.phx_setup_status===i.aW.COMPLETED){return[2,true]}return[2,false]}}))}))};SetupModule.prototype._doDiscovery=function(e){var t,r,n,i;return g(this,void 0,Promise,(function(){var o,s,l,c;return y(this,(function(d){switch(d.label){case 0:this._logger.info("_doDiscovery,",this._gdsServer);return[4,u.GlipEndpointsDiscovery.isEnabledBeforeLogin(this._gdsServer||"")];case 1:o=d.sent();this._logger.info("_doDiscovery,isEnable:",o);if(!o){return[2]}if(!this._gdsServer){this._logger.info("_doDiscovery,need gdsServer");throw new a.Fs(a.Bq.REQUIRE_HOST)}this._initEndpointDiscovery({host:this._gdsServer});return[4,this.endpointsDiscovery.startDiscovery({tokenOrCode:e})];case 2:s=d.sent();if(!s.success){this._logger.info("_doDiscovery,failed");l=[f.ERROR_CODES_NETWORK.NETWORK_ERROR,f.ERROR_CODES_NETWORK.NOT_NETWORK,f.ERROR_CODES_NETWORK.LOCAL_TIMEOUT].includes(((t=s.error)===null||t===void 0?void 0:t.code)||"")?a.Bq.NETWORK_ERROR:a.Bq.SERVER_ERROR;throw new a.Fs(l)}c=(i=(n=(r=this.endpointsDiscovery.getEndpoints())===null||r===void 0?void 0:r.endpoints)===null||n===void 0?void 0:n.app)===null||i===void 0?void 0:i.host;this._logger.info("_doDiscovery,host:",c);c&&this._api.setAPIServer(c);return[2]}}))}))};SetupModule.prototype.checkAccountExistByApple=function(e){return g(this,void 0,Promise,(function(){var t;return y(this,(function(r){switch(r.label){case 0:return[4,this._api.checkAccountExistByApple(e)];case 1:t=r.sent();return[2,{existingAccount:t.existing_user,companyName:this._getCompanyName(t.company),noCompanyAccount:this._isNoCompanyAccount(t.company),brandId:this._getBrandIdFromCompany(t.company)}]}}))}))};SetupModule.prototype.setupForApple=function(e,t){return g(this,void 0,Promise,(function(){var r,n;return y(this,(function(i){switch(i.label){case 0:r=_({},e);r.brandId=this._getRealBrandId(e.brandId,e.countryOrAreaCode);return[4,this._api.setupForApple(r,this._getRealRCUTMParams(t))];case 1:n=i.sent();if(n.authInfo){return[2,{authInfo:n.authInfo,person:n.person,company:n.company}]}this._logger.warn("setupForApple(): No auth code/token from server");throw new a.Fs(a.Bq.SERVER_ERROR,"No auth code/token from server")}}))}))};SetupModule.prototype.checkAccountExistByGoogle=function(e){return g(this,void 0,Promise,(function(){var t;return y(this,(function(r){switch(r.label){case 0:return[4,this._api.checkAccountExistByGoogle(e)];case 1:t=r.sent();return[2,{existingAccount:t.existing_user,companyName:this._getCompanyName(t.company),noCompanyAccount:this._isNoCompanyAccount(t.company),brandId:this._getBrandIdFromCompany(t.company)}]}}))}))};SetupModule.prototype.setupForGoogle=function(e,t){return g(this,void 0,Promise,(function(){var r,n;return y(this,(function(i){switch(i.label){case 0:r=_({},e);r.brandId=this._getRealBrandId(r.brandId,r.countryOrAreaCode);return[4,this._api.setupForGoogle(r,this._getRealRCUTMParams(t))];case 1:n=i.sent();if(n.authInfo){return[2,{authInfo:n.authInfo,person:n.person,company:n.company}]}this._logger.warn("setupForGoogle(): No auth code/token from server");throw new a.Fs(a.Bq.SERVER_ERROR,"No auth code/token from server")}}))}))};SetupModule.prototype._initEndpointDiscovery=function(e){var t=e.host;var r=new f.NetworkManager((function(){return v.Pal.instance.networkStatus().getStatus()}));r.buildNetworkRequestBaseHandler(u.glipDiscoveryHandlerConfig);this.endpointsDiscovery.init({getToken:function(){return Promise.resolve("")},networkClient:new l.NetworkClient({host:"",handlerName:u.glipDiscoveryHandlerConfig.handlerName},u.glipDiscoveryHandlerConfig.defaultVia,r,new l.CommonResponseParser),discoveryHost:t,endpointsDefaultValue:{retryCount:u.GLIP_DISCOVERY_DEFAULT_RETRY_COUNT,retryInterval:u.GLIP_DISCOVERY_DEFAULT_RETRY_INTERVAL,retryCycleDelay:u.GLIP_DISCOVERY_DEFAULT_RETRY_CYCLE_DELAY,expiresIn:u.GLIP_DISCOVERY_DEFAULT_EXPIRES_IN}})};Object.defineProperty(SetupModule.prototype,"endpointsDiscovery",{get:function(){if(!this._endpointsDiscovery){this._endpointsDiscovery=new u.GlipEndpointsDiscovery}return this._endpointsDiscovery},enumerable:true,configurable:true});SetupModule.prototype.getCountryInfoList=function(){var e=d.R.getConfig();var t=[];Object.entries(e).forEach((function(e){t.push({countryOrAreaCode:e[1].countryOrAreaCode,brandId:e[0]});if(e[1].signUpDefaultCountryOrAreaCode){t.push({countryOrAreaCode:e[1].signUpDefaultCountryOrAreaCode,brandId:e[0]})}}));return t};SetupModule.prototype._getCompanyName=function(e){return(e===null||e===void 0?void 0:e.name)||""};SetupModule.prototype._isNoCompanyAccount=function(e){return!e||!e.rc_account_id&&e.phx_setup_status===i.aW.PENDING};SetupModule.prototype._getBrandIdFromCompany=function(e){var t,r;return((r=(t=e===null||e===void 0?void 0:e.rc_service_info)===null||t===void 0?void 0:t.brand)===null||r===void 0?void 0:r.id)||(e===null||e===void 0?void 0:e.rc_brand_id)};SetupModule.prototype._getRealBrandId=function(e,t){if(!e&&t){var r=this._getBrandIdByCountryAreaCode(t);this._logger.info("map brand id from country code",r);return r}return e};SetupModule.prototype._getBrandIdByCountryAreaCode=function(e){return this._countryInfoMap.get(e).brandId};SetupModule.prototype._parseBrandId=function(e){try{var t=(0,n.Z)(e).info.bid;if(!t){this._logger.info("no brand id in token")}return t}catch(e){this._logger.warn("parse token failed",e);return undefined}};SetupModule.prototype._getRealRCUTMParams=function(e){var t={};if(e){Object.keys(e).forEach((function(r){if(r.startsWith("rc_utm_")){t[r]=e[r]}}))}return t};return SetupModule}()},473623:(e,t,r)=>{r.d(t,{bl:()=>T,Bq:()=>n,Fs:()=>f});var n;(function(e){e["NETWORK_ERROR"]="network_error";e["SERVER_ERROR"]="server_error";e["AUTH_ERROR"]="auth_error";e["REQUIRE_HOST"]="require_host";e["NOT_ALLOW_TO_JOIN_DOMAIN"]="not_allow_to_join_domain";e["RC_ACCOUNT_NOT_ELIGIBLE_TO_JOIN"]="rc_account_not_eligible_to_join";e["NOT_ALLOW_TO_JOIN_RC_PHOENIX"]="not_allow_to_join_rc_phoenix"})(n||(n={}));var i;(function(e){e["NOT_ALLOW_TO_JOIN_DOMAIN"]="not_allow_to_join_domain";e["RC_ACCOUNT_NOT_ELIGIBLE_TO_JOIN"]="rc_account_not_eligible_to_join";e["NOT_ALLOW_TO_JOIN_RC_PHOENIX"]="not_allow_to_join_rc_phoenix";e["EMAIL_CONFIRM_REQUIRED"]="email_confirm_required"})(i||(i={}));var o="Network Error";var a={GLIP_AUTHORIZATION:"x-authorization",RC_AUTHORIZATION:"x-rc-authorization"};var s={AUTHORIZATION:"authorization"};var u="/api";var l={INDEX:u+"/index",RC_CODE:u+"/rc-auth-code",COMPANY:u+"/company",TEAM:u+"/team",PERSON:u+"/person",SET_PASSWORD:u+"/v1/set_password",GOOGLE_ACCOUNT_CHECK:u+"/v1/no-auth/google-account-check",GOOGLE_SIGNUP:u+"/v1/no-auth/google-signup",APPLE_ACCOUNT_CHECK:u+"/v1/no-auth/apple-account-check",APPLE_SIGNUP:u+"/v1/no-auth/apple-signup"};var c="YCWFuqW8T7-GtSTb6KBS6g";var d=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var f=function(e){d(SetupError,e);function SetupError(t,r,n){var i=this.constructor;if(r===void 0){r=""}var o=e.call(this,r)||this;o.code=t;o.message=r;o.payload=n;Object.setPrototypeOf(o,i.prototype);return o}return SetupError}(Error);var p=r(514206);var v=r.n(p);var h=r(760576);var _=r(843510);var g=r(302186);var y=r(862926);var m=r(732526);var b=r.n(m);var w=undefined&&undefined.__assign||function(){w=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return w.apply(this,arguments)};var E=undefined&&undefined.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};var O=undefined&&undefined.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function verb(e){return function(t){return step([e,t])}}function step(a){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(o=a[0]&2?i["return"]:a[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;if(i=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:r.label++;return{value:a[1],done:false};case 5:r.label++;i=a[1];a=[0];continue;case 7:a=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1];o=a;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(a);break}if(o[2])r.ops.pop();r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e];i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var S=undefined&&undefined.__values||function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var C=undefined&&undefined.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var T=function(){function API(){this._logger=_.k.tags(API.name);this._host="";this._token=""}API.prototype.setAPIServer=function(e){this._logger.info("setAPIServer:",e);this._host=e};API.prototype.getToken=function(){this._logger.info("getToken,");return this._token};API.prototype.getIndexData=function(e,t){return E(this,void 0,Promise,(function(){var r;var n=this;return O(this,(function(i){switch(i.label){case 0:this._logger.info("getIndexData");return[4,this._get({path:l.INDEX,authFree:true,config:{params:w(w({},e),t)}}).catch((function(e){n._logger.error("getIndexData Error:",e.code,e.message);throw e}))];case 1:r=i.sent();this._getGlipTokenFromResponse(r,true);return[2,r.data]}}))}))};API.prototype.getPerson=function(e){return E(this,void 0,Promise,(function(){var t;var r=this;return O(this,(function(n){switch(n.label){case 0:this._logger.info("getPerson");return[4,this._get({path:l.PERSON+"/"+e,config:{}}).catch((function(e){r._logger.error("getPerson Error:",e.code,e.message);throw e}))];case 1:t=n.sent();return[2,t.data]}}))}))};API.prototype.getRCCode=function(){return E(this,void 0,Promise,(function(){var e,t,r;var i=this;return O(this,(function(o){switch(o.label){case 0:this._logger.info("getRCCode");this._checkToken();e={tk:this._token,client_id:c,redirect_uri:window.location.origin};return[4,this._get({path:l.RC_CODE,authFree:true,config:{params:e}}).catch((function(e){i._logger.error("getRCCode Error:",e.code,e.message);throw e}))];case 1:t=o.sent();r=t.data&&t.data.code;if(!r){this._logger.error("can not get code, data:",t.data);throw new f(n.AUTH_ERROR)}return[2,r]}}))}))};API.prototype.checkAccountExistByApple=function(e){return E(this,void 0,void 0,(function(){var t;var r=this;return O(this,(function(n){switch(n.label){case 0:return[4,this._get({path:l.APPLE_ACCOUNT_CHECK,config:{params:{id_token:e}},authFree:true}).catch((function(e){r._logger.error("checkAccountExistByApple Error:",e.code,e.message);throw e}))];case 1:t=n.sent();return[2,t.data]}}))}))};API.prototype.setupForApple=function(e,t){return E(this,void 0,void 0,(function(){var r,n,i,o,a,s,u;var d,f;var p=this;return O(this,(function(v){switch(v.label){case 0:r={};try{for(n=S(Object.entries(e)),i=n.next();!i.done;i=n.next()){o=C(i.value,2),a=o[0],s=o[1];r[b()(a)]=s}}catch(e){d={error:e}}finally{try{if(i&&!i.done&&(f=n.return))f.call(n)}finally{if(d)throw d.error}}return[4,this._post({path:l.APPLE_SIGNUP,authFree:true,config:{data:w(w({},r),t),params:{rc_auth_client_id:c,rc_auth_redirect_uri:window.location.origin}}}).catch((function(e){p._logger.error("setupForApple Error:",e.code,e.message);throw e}))];case 1:u=v.sent();return[2,w({authInfo:this._getAuthInfo(u,false)},u.data)]}}))}))};API.prototype.checkAccountExistByGoogle=function(e){return E(this,void 0,void 0,(function(){var t;var r=this;return O(this,(function(n){switch(n.label){case 0:return[4,this._get({path:l.GOOGLE_ACCOUNT_CHECK,config:{params:{id_token:e}},authFree:true}).catch((function(e){r._logger.error("checkAccountExistByGoogle Error:",e.code,e.message);throw e}))];case 1:t=n.sent();return[2,t.data]}}))}))};API.prototype.setupForGoogle=function(e,t){return E(this,void 0,void 0,(function(){var r;var n=this;return O(this,(function(i){switch(i.label){case 0:return[4,this._post({path:l.GOOGLE_SIGNUP,authFree:true,config:{data:w({id_token:e.idToken,brand_id:e.brandId,locale:e.locale,company_name:e.companyName},t),params:{rc_auth_client_id:c,rc_auth_redirect_uri:window.location.origin}}}).catch((function(e){n._logger.error("setupForGoogle Error:",e.code,e.message);throw e}))];case 1:r=i.sent();return[2,w({authInfo:this._getAuthInfo(r,false)},r.data)]}}))}))};API.prototype.setCompanyName=function(e,t){return E(this,void 0,Promise,(function(){var r;var n=this;return O(this,(function(i){switch(i.label){case 0:this._logger.info("setCompanyName,",e,t);r={name:t};return[4,this._put({path:l.COMPANY+"/"+e,config:{data:r}}).catch((function(e){n._logger.error("setCompanyName Error:",e.code,e.message);throw e}))];case 1:i.sent();return[2]}}))}))};API.prototype.setCompanyTeamName=function(e,t){return E(this,void 0,Promise,(function(){var r;var n=this;return O(this,(function(i){switch(i.label){case 0:this._logger.info("setCompanyTeamName,",e,t);r={set_abbreviation:t};return[4,this._put({path:l.TEAM+"/"+e,config:{data:r}}).catch((function(e){n._logger.error("setCompanyTeamName Error:",e.code,e.message);throw e}))];case 1:i.sent();return[2]}}))}))};API.prototype.setPersonName=function(e,t,r){return E(this,void 0,Promise,(function(){var n,i;var o=this;return O(this,(function(a){switch(a.label){case 0:this._logger.info("setPersonName,",e,t,r);n={first_name:t,last_name:r};return[4,this._put({path:l.PERSON+"/"+e,config:{data:n}}).catch((function(e){o._logger.error("setPersonName Error:",e.code,e.message);throw e}))];case 1:i=a.sent();return[2,i.data]}}))}))};API.prototype.setPassword=function(e,t,r,n,i){return E(this,void 0,Promise,(function(){var o,a,s,u,d,f;var p=this;return O(this,(function(v){switch(v.label){case 0:this._logger.info("setPassword");o={password:e,password_confirm:e,locale:t,brand_id:r,email_single_opt_in:n};a={rc_auth_client_id:c,rc_auth_redirect_uri:window.location.origin};s={recaptcha_token:i};return[4,this._post({path:l.SET_PASSWORD,config:{data:o,params:a,headers:s}}).catch((function(e){p._logger.error("setPassword Error:",e.code,e.message);throw e}))];case 1:u=v.sent();d=this._getAuthInfo(u,true);f=u.data;return[2,{authInfo:d,person:f}]}}))}))};API.prototype._getAuthInfo=function(e,t){if(t===void 0){t=true}var r=this._getRCCodeFromResponse(e);var n=this._getGlipTokenFromResponse(e,t);if(r){return{type:h.$o.AUTH_CODE,value:r}}if(n){return{type:h.$o.AUTH_TOKEN,value:n}}return null};API.prototype._getGlipTokenFromResponse=function(e,t){if(t===void 0){t=true}var r=e.headers[a.GLIP_AUTHORIZATION];if(t){this._token=r;if(!this._token){throw new f(n.AUTH_ERROR)}}return r};API.prototype._getRCCodeFromResponse=function(e){return e.headers[a.RC_AUTHORIZATION]};API.prototype._checkHost=function(){if(!this._host){throw new f(n.REQUIRE_HOST)}};API.prototype._checkToken=function(){if(!this._token){throw new f(n.AUTH_ERROR)}};API.prototype._checkStatus=function(e,t){if(t===void 0){t=""}var r;this._logger.info("_checkStatus:",e.config.url,e.status,t);var o=e.status,a=e.data;if(o>=200&&o<300){return}var s=n.SERVER_ERROR;var u=typeof a!=="object"||Object.keys(a).length?JSON.stringify(a):t;if((r=a.error)===null||r===void 0?void 0:r.code){switch(a.error.code){case i.NOT_ALLOW_TO_JOIN_DOMAIN:{s=n.NOT_ALLOW_TO_JOIN_DOMAIN;break}case i.NOT_ALLOW_TO_JOIN_RC_PHOENIX:{s=n.NOT_ALLOW_TO_JOIN_RC_PHOENIX;break}case i.RC_ACCOUNT_NOT_ELIGIBLE_TO_JOIN:{s=n.RC_ACCOUNT_NOT_ELIGIBLE_TO_JOIN;break}default:break}}if(s===n.SERVER_ERROR&&(o===401||o===403)&&!(a.error&&a.error.code===i.EMAIL_CONFIRM_REQUIRED&&a.error.admin_confirmation_required)){s=n.AUTH_ERROR}throw new f(s,u,a)};API.prototype._handleError=function(e){var t=n.SERVER_ERROR;var r=e.message||"";if(r===o){t=n.NETWORK_ERROR}else if(e.response){this._checkStatus(e.response,r)}throw new f(t,r)};API.prototype._request=function(e){var t;return E(this,void 0,Promise,(function(){var r,n,i,o,a,u,l;var c,d;var f=this;return O(this,(function(p){switch(p.label){case 0:r=e.path,n=e.method,i=e.authFree,o=i===void 0?false:i,a=e.config;this._checkHost();u=""+this._host+r;if(!o){this._checkToken();a.headers=w(w({},a.headers),(c={},c[s.AUTHORIZATION]="Bearer "+this._token,c))}a.headers=w(w({},a.headers),(d={},d[y.X_USER_AGENT]=(t=g.Pal.instance.getPlatformUtils())===null||t===void 0?void 0:t.buildUserAgentForHttp(),d));try{this._logger.info("start request:",u,n,btoa(encodeURIComponent(JSON.stringify(a))))}catch(e){this._logger.error(e)}return[4,v().request(w(w({},a),{url:u,method:n})).catch((function(e){return f._handleError(e)}))];case 1:l=p.sent();this._checkStatus(l);return[2,l]}}))}))};API.prototype._get=function(e){return this._request({path:e.path,method:"get",authFree:e.authFree,config:e.config})};API.prototype._put=function(e){return this._request({path:e.path,method:"put",authFree:e.authFree,config:e.config})};API.prototype._post=function(e){return this._request({path:e.path,method:"post",authFree:e.authFree,config:e.config})};return API}()},843510:(e,t,r)=>{r.d(t,{k:()=>a});var n=r(862926);var i=r.n(n);var o="[SETUP][SDK]";var a=n.logManager.getLogger(o)},259975:(e,t,r)=>{r.d(t,{C:()=>S});var n=r(145624);var i=r(400015);var o=r(865453);var a=r(586905);var s=r(718483);var u=r(441351);var l=r(626469);var c=r(594173);var d=r(862926);var f=r(137726);var p=r(919789);var v=r(714614);var h=r.n(v);var _=r(796499);var g=undefined&&undefined.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};var y=undefined&&undefined.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function verb(e){return function(t){return step([e,t])}}function step(a){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(o=a[0]&2?i["return"]:a[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;if(i=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:r.label++;return{value:a[1],done:false};case 5:r.label++;i=a[1];a=[0];continue;case 7:a=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1];o=a;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(a);break}if(o[2])r.ops.pop();r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e];i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var m=u.vc.get("service"),b=m.glip,w=m.multi_instance;var E=b.server;E&&p.ZP.init({apiServer:E,gdsServer:w===null||w===void 0?void 0:w.gdsServer});var O;(function(e){e["ELECTRON"]="Electron";e["BROWSER"]="Browser"})(O||(O={}));var S=function(){function BaseAuthController(e){var t=this;this.sourceConfig=e;this._isConnecting=false;this.connecting=function(){if(t._isConnecting)return;t._isConnecting=true;window.addEventListener("message",t._onConnected,false)};this.disConnecting=function(){if(!t._isConnecting)return;t._isConnecting=false;window.removeEventListener("message",t._onConnected,false)};this.updateWindow=function(){t._authWindow=n.Z.getWindow(t._authWindowKey)};this.updateUtm=function(e){t._utm=e||{}};this.openWindow=function(e){return g(t,void 0,void 0,(function(){var t,r;return y(this,(function(i){switch(i.label){case 0:this.connecting();this.updateWindow();this.updateUtm(e);return[4,this.getUrl()];case 1:t=i.sent();if(this._authWindow){this._authWindow.focus();this._authWindow.location.href=t;return[2]}r=this;return[4,n.Z.newWindow(t,{windowFeatures:this._windowFeatures,alwaysOpenInBrowser:true})];case 2:r._authWindowKey=i.sent();this.updateWindow();return[2]}}))}))};this.receiveAuthResult=function(e){s.k.info(t.sourceConfig.name+"SignOnAuthManager:  receive message params="+e);var r=e.type,n=e.payload,i=e.state;if(r===t.sourceConfig.authCallbackType){var o=i?n+"&state="+encodeURIComponent(i):n;t.goToAppOrSetup(o)}};this._onConnected=function(e){var r=e.data,i=e.origin;s.k.info(t.sourceConfig.name+"SignOnAuthManager:  receive postMessage. isConnecting origin="+i+" windowOrigin="+(window.origin||window.location.origin));var o=i===(window.origin||window.location.origin);if(!o)return;var a=r.type,u=r.payload;s.k.info(t.sourceConfig.name+"SignOnAuthManager:  receive postMessage. type="+a+" payload="+u+" ");if(a===t.sourceConfig.authCallbackType&&u){t.disConnecting();t._authWindowKey&&n.Z.closeWindow(t._authWindowKey);t.goToAppOrSetup(u)}};this._goToApp=function(e){s.k.info(t.sourceConfig.name+" goToApp","paramsString",e);if(!e)return;var r="/"+e+"&"+l.wL.LOGIN_PARTICULAR_TYPE+"="+t.sourceConfig.loginParticularType;s.k.info("goToApp","url",r);var n=new URLSearchParams(e);if(n.get("id_token")){_.d0.clickCreateAccount("web",t.sourceConfig.name)}window.location.assign(r)};this.goToSetup=function(e,r,n,i){var o=""+t.sourceConfig.goToSetupPathName+e+"&company="+(r||"")+"&noCompanyAccount="+(n?"true":"false")+"&platform="+(c.d?O.ELECTRON:O.BROWSER)+"&beBrandId="+(i||"");s.k.info("goToSetup","targetUrl",o);window.location.assign(o)};this.goToAppOrSetup=function(e){return g(t,void 0,void 0,(function(){var t,r,n,i,o,a,u;return y(this,(function(l){switch(l.label){case 0:t=d.UrlUtils.queryString.parseUrl(e||"").query.id_token;s.k.info("goToAppOrSetup","idToken",t);if(!!t)return[3,1];this._goToApp(e);return[3,4];case 1:l.trys.push([1,3,,4]);return[4,this.checkAccountExist(t)];case 2:r=l.sent(),n=r.existingAccount,i=r.companyName,o=r.noCompanyAccount,a=r.brandId;return[2,n?this._goToApp(e):this.goToSetup(e,i,o,a)];case 3:u=l.sent();s.k.error("goToAppOrSetup","e.code",u.code);switch(u.code){case p.Bq.NETWORK_ERROR:f.yg.flashToast({message:h().t("signUp.networkError"),type:f.pC.ERROR});break;default:f.yg.flashToast({message:h().t("signUp.serverError"),type:f.pC.ERROR})}return[3,4];case 4:return[2]}}))}))}}BaseAuthController.prototype.getUrl=function(){return(0,o.G)(a.m8.location,this.sourceConfig.urlOption,this._utm)};Object.defineProperty(BaseAuthController.prototype,"_windowFeatures",{get:function(){return(0,i.Y)()},enumerable:true,configurable:true});BaseAuthController.prototype.checkAccountExist=function(e){return Promise.resolve({existingAccount:false})};return BaseAuthController}()},545750:(e,t,r)=>{r.d(t,{Q:()=>n});var n=function(){function DataTrackingForThirdPartySignUp(e,t){var r=this;this.getRcUTMParams=function(e){var t={rc_utm_source:r._dataTrackingBase._getUtmSource,rc_utm_auth:r._authType};return e?r._dataTrackingBase.getRcUTMParams(t):r._dataTrackingBase.getRcUTMParamsFromUrl(t)};this.signUp=function(){r._dataTrackingBase.lightIdentify({rc_utm_auth:r._authType})};this.successfulSetUp=function(e){r._dataTrackingBase.alias(e)};this._dataTrackingBase=e;this._authType=t}return DataTrackingForThirdPartySignUp}()}}]);