"use strict";(this["webpackChunkapplication"]=this["webpackChunkapplication"]||[]).push([[2684],{806854:(e,t,r)=>{r.d(t,{zM:()=>n.zM,Hq:()=>n.Hq,$Z:()=>n.$Z,Ag:()=>o.A});var n=r(480613);var o=r(324809)},196382:(e,t,r)=>{r.d(t,{J:()=>n,u:()=>o});var n={USER_DICTIONARY:"UD",ACCOUNT_LIST:"ACCOUNT_LIST"};var o="account"},669422:(e,t,r)=>{r.d(t,{o:()=>s});var n=r(514206);var o=r.n(n);var a=r(424843);var i=r(862926);var c=r(633794);var u=undefined&&undefined.__assign||function(){u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o))e[o]=t[o]}return e};return u.apply(this,arguments)};var s=function(){function CommonApi(){}CommonApi.loginByGoogleToken=function(e,t,r){var n=u({id_token:t,rc_auth_client_id:a.apiConfiguration.getConfig().rc.clientId,rc_auth_redirect_uri:window.location.origin},r);return o().put(""+e+c.h.GOOGLE_SIGNON,undefined,{params:n,timeout:i.TEN_MINUTE_TIMEOUT})};return CommonApi}()},626708:(e,t,r)=>{r.d(t,{B:()=>createBarrierDecorator});var n=r(862926);var o=r.n(n);var a=undefined&&undefined.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){o(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};var i=undefined&&undefined.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,i;return i={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(i[Symbol.iterator]=function(){return this}),i;function verb(e){return function(t){return step([e,t])}}function step(i){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,o&&(a=i[0]&2?o["return"]:i[0]?o["throw"]||((a=o["return"])&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;if(o=0,a)i=[i[0]&2,a.value];switch(i[0]){case 0:case 1:a=i;break;case 4:r.label++;return{value:i[1],done:false};case 5:r.label++;o=i[1];i=[0];continue;case 7:i=r.ops.pop();r.trys.pop();continue;default:if(!(a=r.trys,a=a.length>0&&a[a.length-1])&&(i[0]===6||i[0]===2)){r=0;continue}if(i[0]===3&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(i[0]===6&&r.label<a[1]){r.label=a[1];a=i;break}if(a&&r.label<a[2]){r.label=a[2];r.ops.push(i);break}if(a[2])r.ops.pop();r.trys.pop();continue}i=t.call(e,r)}catch(e){i=[6,e];o=0}finally{n=a=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:true}}};var createBarrierDecorator=function(){return function(){return function(e,t,r){var o;var c=r.value;r.value=function(){var e=this;var t=[];for(var r=0;r<arguments.length;r++){t[r]=arguments[r]}return new Promise((function(r,u){return a(e,void 0,void 0,(function(){var e,a;return i(this,(function(i){switch(i.label){case 0:if(!!o)return[3,1];o=new n.Barrier;return[3,3];case 1:return[4,o.wait()];case 2:i.sent();i.label=3;case 3:i.trys.push([3,5,6,7]);return[4,c.apply(this,t)];case 4:e=i.sent();r(e);return[3,7];case 5:a=i.sent();u(a);return[3,7];case 6:!o.isOpen()&&o.open();return[7];case 7:return[2]}}))}))}))};return r}}}},225042:(e,t,r)=>{r.d(t,{cw:()=>R.c,It:()=>E,lj:()=>T,kr:()=>x,MI:()=>d,jx:()=>P.j,LZ:()=>g,Pu:()=>I.P});var n=r(298784);var o=r.n(n);var a=r(862926);var i=r(667489);var c=r(756388);var u=r(461197);var s=r(274251);var l=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var f=undefined&&undefined.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){o(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};var h=undefined&&undefined.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,i;return i={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(i[Symbol.iterator]=function(){return this}),i;function verb(e){return function(t){return step([e,t])}}function step(i){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,o&&(a=i[0]&2?o["return"]:i[0]?o["throw"]||((a=o["return"])&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;if(o=0,a)i=[i[0]&2,a.value];switch(i[0]){case 0:case 1:a=i;break;case 4:r.label++;return{value:i[1],done:false};case 5:r.label++;o=i[1];i=[0];continue;case 7:i=r.ops.pop();r.trys.pop();continue;default:if(!(a=r.trys,a=a.length>0&&a[a.length-1])&&(i[0]===6||i[0]===2)){r=0;continue}if(i[0]===3&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(i[0]===6&&r.label<a[1]){r.label=a[1];a=i;break}if(a&&r.label<a[2]){r.label=a[2];r.ops.push(i);break}if(a[2])r.ops.pop();r.trys.pop();continue}i=t.call(e,r)}catch(e){i=[6,e];o=0}finally{n=a=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:true}}};var d=function(e){l(ContactCacheController,e);function ContactCacheController(t,r){var n=e.call(this,r)||this;n._parser=t;n._shortNumberCache=new Map;n._shortNumberConflictCache=new Map;n._longNumberCache=new Map;n._longNumberConflictCache=new Map;n._isContactDataReady=false;n._cacheWaiters=[];n._initNameIndexCache=function(){return f(n,void 0,void 0,(function(){var e;return h(this,(function(t){switch(t.label){case 0:t.trys.push([0,2,,3]);a.mainLogger.log("init name index cache start",this._entityName);return[4,this.waitInitialed()];case 1:t.sent();this._createNameIndex();a.mainLogger.log("init name index cache end",this._entityName);return[3,3];case 2:e=t.sent();a.mainLogger.warn("failed to init name index cache",e);return[3,3];case 3:return[2]}}))}))};return n}ContactCacheController.prototype.initNameIndexCache=function(){setTimeout(this._initNameIndexCache)};ContactCacheController.prototype._createNameIndex=function(){var e=this;delete this._nameIndexCache;var t=new i.NameIndexCache({getSplitTerms:function(t){return e._parser.hasRealName(t)?t.__splitNames:[]}});t.buildIndex(this.getAllSync());this._nameIndexCache=t};ContactCacheController.prototype.getNameIndexCache=function(){return this._nameIndexCache};ContactCacheController.prototype.onInitialized=function(){this.handleAllEntities();this.onContactDataReady()};ContactCacheController.prototype.clear=function(){return f(this,void 0,Promise,(function(){return h(this,(function(t){this._shortNumberCache.clear();this._longNumberCache.clear();e.prototype.clear.call(this);this._createNameIndex();return[2]}))}))};ContactCacheController.prototype.deleteInternal=function(t){this.removePhoneNumbersByContactId(t);e.prototype.deleteInternal.call(this,t)};ContactCacheController.prototype.isContactDataReady=function(){return this._isContactDataReady};ContactCacheController.prototype.registerContactDataWaiter=function(e){if(this.isContactDataReady()){return e(true)}this._cacheWaiters.push(e)};ContactCacheController.prototype.getEntities=function(t,r,n){return f(this,void 0,Promise,(function(){var o=this;return h(this,(function(a){switch(a.label){case 0:if(!n)return[3,2];if(this.isContactDataReady()){return[2,e.prototype.getEntities.call(this,t,r)]}return[4,new Promise((function(e){o.registerContactDataWaiter(e)}))];case 1:a.sent();a.label=2;case 2:return[2,e.prototype.getEntities.call(this,t,r)]}}))}))};Object.defineProperty(ContactCacheController.prototype,"shortNumberCache",{get:function(){return this._shortNumberCache},enumerable:true,configurable:true});Object.defineProperty(ContactCacheController.prototype,"longNumberCache",{get:function(){return this._longNumberCache},enumerable:true,configurable:true});ContactCacheController.prototype.getContactsByPhoneNumber=function(e,t,r){return this._getContactByCompletePhoneNumber(e,t)};ContactCacheController.prototype._getContactByCompletePhoneNumber=function(e,t){return t?this._shortNumberCache.get(e):this._longNumberCache.get(e)};ContactCacheController.prototype.getConflictCache=function(e){return e?this._shortNumberConflictCache:this._longNumberConflictCache};ContactCacheController.prototype.waitUntilCachedReady=function(){return f(this,void 0,Promise,(function(){var e;var t=this;return h(this,(function(r){switch(r.label){case 0:if(!!this.isContactDataReady())return[3,2];return[4,new Promise((function(e){t.registerContactDataWaiter(e)}))];case 1:e=r.sent();return[2,e];case 2:return[2,true]}}))}))};ContactCacheController.prototype.matchContactByPhoneNumber=function(e,t){var r;return f(this,void 0,Promise,(function(){var n,o,a,i,c,u,s,l,f,d,p;return h(this,(function(h){switch(h.label){case 0:return[4,this.waitUntilCachedReady()];case 1:n=h.sent();if(!n){return[2,[]]}s=t;if(s)return[3,3];return[4,(r=this.phoneNumberModule)===null||r===void 0?void 0:r.generateMatchedPhoneNumberList(e)];case 2:s=h.sent();h.label=3;case 3:o=s||{},a=o.numberList,i=a===void 0?[]:a,c=o.isShortOrSpecial,u=c===void 0?false:c;if(!i.length){return[2,[]]}l=[];for(f=0;f<i.length;f++){d=i[f];p=this.getContactsByPhoneNumber(d,u);if(p){l=l.concat(Array.from(p))}}return[2,Array.from(l)]}}))}))};ContactCacheController.prototype.hasConflictPhoneNumberWithOthers=function(e){return this.getConflictCache(e.isShort).has(e.contactId)};Object.defineProperty(ContactCacheController.prototype,"phoneNumberModule",{get:function(){return(0,u.getModule)(s.iJ)},enumerable:true,configurable:true});ContactCacheController.prototype.handleEntity=function(e){var t=this;if(!e){return}var r=this.getRawCacheEntity(e.id);var n=this.isValidContact(e);this.updatePhoneNumberData(r,(function(){if(n){t.handleContactPhoneNumbers(e,(function(r){t.addPhoneNumberCache(r,e)}))}return e}));this.updateMemoryKeys(e)};ContactCacheController.prototype.updatePartial=function(t,r){var n=this;var o;this.updatePhoneNumberData(t,(function(){e.prototype.updatePartial.call(n,t,r);return t}));this.updateMemoryKeys(t);(o=this._nameIndexCache)===null||o===void 0?void 0:o.updateIndex(t)};ContactCacheController.prototype.updatePhoneNumberData=function(e,t){var r=e&&this.getContactNumbers(e)||[];var n=t();var o=this.getContactNumbers(n);this._handlePhoneNumberUpdate(r,o,n)};ContactCacheController.prototype._handlePhoneNumberUpdate=function(e,t,r){var n=this;var a=this.isValidContact(r);if(!a){e.forEach((function(e){n._deletePhoneNumberCache(e,r&&r.id)}))}else if(e.length!==t.length||!o().isEqual(e,t)){var i=o().differenceBy(e,t,(function(e){return e.phoneNumber}));var c=o().differenceBy(t,e,(function(e){return e.phoneNumber}));if(i.length){i.forEach((function(e){n._deletePhoneNumberCache(e,r.id)}))}if(c.length){c.forEach((function(e){n.addPhoneNumberCache(e,r)}))}}};ContactCacheController.prototype.onContactDataReady=function(){this._isContactDataReady=true;this.notifyContactDataReady(true)};ContactCacheController.prototype.notifyContactDataReady=function(e){if(this._cacheWaiters.length){this._cacheWaiters.forEach((function(t){t(e)}));this._cacheWaiters=[]}};ContactCacheController.prototype.removeContactPhoneNumbers=function(e){var t=this;if(!e){return}this.handleContactPhoneNumbers(e,(function(r){t._deletePhoneNumberCache(r,e.id)}))};ContactCacheController.prototype._deletePhoneNumberCache=function(e,t){var r=this;var n=this._getContactByCompletePhoneNumber(e.phoneNumber,e.isShort);if(!(n===null||n===void 0?void 0:n.has(t))){return}n.delete(t);if(n.size){this._deleteConflictCache(e,t);n.size===1&&n.forEach((function(t){return r._deleteConflictCache(e,t)}))}};ContactCacheController.prototype._deleteConflictCache=function(e,t){var r=this.getConflictCache(e.isShort);var n=r.get(t);if(n){n.delete(e.phoneNumber);!n.size&&r.delete(t)}};ContactCacheController.prototype.addPhoneNumberCache=function(e,t){var r=e.phoneNumber;var n=e.isShort?this._shortNumberCache:this._longNumberCache;var o=n.get(r);if(!o){o=new Set;n.set(r,o)}if(o.has(t.id)){return}o.add(t.id);if(o.size>1){var a=this.getConflictCache(e.isShort);var i=[];o.size===2?i=i.concat(Array.from(o)):i.push(t.id);i.forEach((function(e){var t=a.get(e);if(!t){t=new Set;a.set(e,t)}t.add(r)}))}};ContactCacheController.prototype.removePhoneNumbersByContactId=function(e){var t=this.getSynchronously(e);if(t){this.removeContactPhoneNumbers(t)}};ContactCacheController.prototype.getContactNumbers=function(e){var t=[];this.handleContactPhoneNumbers(e,(function(e){t.push(e)}));return t};ContactCacheController.prototype.handleContactPhoneNumbers=function(e,t){this.iteratorContactNumbers(e,(function(e,r){t({phoneNumber:e,isShort:r})}))};ContactCacheController.prototype.isVisibleContact=function(e){return this._parser.isVisibleContact(e)};ContactCacheController.prototype.isValidContact=function(e){return!!e};ContactCacheController.prototype.iteratorContactNumbers=function(e,t){return this._parser.iteratorContactNumbers(e,(function(e){return t(e.phoneNumber,e.usageType===s.vX.Extension)}))};ContactCacheController.prototype.getDisplayName=function(e){return this._parser.getRawName(e)};ContactCacheController.prototype.updateMemoryKeys=function(e){e.__lowercaseDisplayName=this._parser.getDisplayName(e).toLowerCase();e.__splitNames=c.SearchUtils.getTermsFromText(e.__lowercaseDisplayName,false);e.__lowercaseEmails=this._parser.getEmails(e).map((function(e){var t;return((t=e.address)===null||t===void 0?void 0:t.toLowerCase())||""}));e.__searchablePhoneNumbers=this.getSearchableNumber(e)};ContactCacheController.prototype.getSearchableNumber=function(e){return this._parser.getPhoneNumbers(e)};Object.defineProperty(ContactCacheController.prototype,"parser",{get:function(){return this._parser},enumerable:true,configurable:true});ContactCacheController.prototype.onEntityDeleted=function(e){var t;(t=this._nameIndexCache)===null||t===void 0?void 0:t.removeIndexById(e.id)};return ContactCacheController}(i.EntityCacheController);var p=r(302186);var v=r(800080);var y=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var g=function(e){y(ContactEntityCacheSearchController,e);function ContactEntityCacheSearchController(t){var r=e.call(this,t)||this;r.entityCacheController=t;return r}ContactEntityCacheSearchController.prototype._getSearchRangeFromNameIndex=function(e,t){var r=this.entityCacheController.getNameIndexCache();if(!r||!t){return[]}var n=r.getIndexedData(e.searchKeyTerms);return n?Array.from(n.values()):[]};ContactEntityCacheSearchController.prototype.searchFromNameIndex=function(e,t){var r;var n=this.entityCacheController.getNameIndexCache();var o=e.resultLimit;var a={sortableEntities:[],needSearchMore:true};if(!n||t.searchKeyTerms.length>1||!o){return a}var i=this._getSearchRangeFromNameIndex(t,e.resultLimit);if(i.length<o){return a}if(e.arrangeIds&&e.arrangeIds.length>0){var c=new Set(e.arrangeIds);i=i.filter((function(e){return c.has(e.id)}))}var u=((r=t.searchKey)===null||r===void 0?void 0:r.length)===1&&e.resultLimit!==undefined&&i.length>e.resultLimit;var s=[];s=this.searchEntitiesInRange({terms:t,resultLimit:o,filterOnly:e.filterOnly,genSortableModelFunc:e.genSortableModelFunc,searchRangeEntities:i,skipLowPriority:u});var l=s.length<o;return{sortableEntities:s,needSearchMore:l,searchedEntityIdSet:l?new Set(i.map((function(e){return e.id}))):undefined}};ContactEntityCacheSearchController.prototype.searchEntitiesInRange=function(e){var t=e.searchRangeEntities,r=e.resultLimit,n=e.terms,o=e.filterOnly,a=e.genSortableModelFunc,i=e.searchedEntityIdSet,c=e.skipLowPriority;var u=[];var s=r?{highPriorityMatchCnt:0,skipLowPriority:c,resultLimit:r}:undefined;for(var l=0;l<t.length;l++){var f=t[l];if(!(i===null||i===void 0?void 0:i.has(f.id))){var h=a(t[l],n,s,o);h&&u.push(h)}}return u};ContactEntityCacheSearchController.prototype.canUseNameIndexCache=function(t){return e.prototype.canUseNameIndexCache.call(this,t)&&!p.Pal.instance.getI18n().isIncludeMeText(t.lowerCaseSearchKey)};return ContactEntityCacheSearchController}(i.EntityCacheSearchController);var m=r(776271);var b=undefined&&undefined.__assign||function(){b=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o))e[o]=t[o]}return e};return b.apply(this,arguments)};var C=undefined&&undefined.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){o(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};var _=undefined&&undefined.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,i;return i={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(i[Symbol.iterator]=function(){return this}),i;function verb(e){return function(t){return step([e,t])}}function step(i){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,o&&(a=i[0]&2?o["return"]:i[0]?o["throw"]||((a=o["return"])&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;if(o=0,a)i=[i[0]&2,a.value];switch(i[0]){case 0:case 1:a=i;break;case 4:r.label++;return{value:i[1],done:false};case 5:r.label++;o=i[1];i=[0];continue;case 7:i=r.ops.pop();r.trys.pop();continue;default:if(!(a=r.trys,a=a.length>0&&a[a.length-1])&&(i[0]===6||i[0]===2)){r=0;continue}if(i[0]===3&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(i[0]===6&&r.label<a[1]){r.label=a[1];a=i;break}if(a&&r.label<a[2]){r.label=a[2];r.ops.push(i);break}if(a[2])r.ops.pop();r.trys.pop();continue}i=t.call(e,r)}catch(e){i=[6,e];o=0}finally{n=a=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:true}}};var S=undefined&&undefined.__values||function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var w=0;var T=function(){function AbstractContactSearchController(e,t){this._parser=e;this._generateFilterPhoneNumberFunc=function(e,t){return function(r,n,o){var a=!!(e&&n&&r[0].usageType===s.vX.Extension);var i=new Set;r=r.filter((function(e){var r=a?e.usageType===s.vX.Extension:true;if(!r){return false}r=t?t.has(e.usageType):true;if(!r){return false}r=o.searchKeyFormattedTerms.validFormattedKeys.every((function(t){return e.phoneNumber.includes(t.formatted)}));if(!r){return false}var n=e.phoneNumber+"."+(e.label||e.usageType);r=!i.has(n);r&&i.add(n);return r}));return r}};this.defaultSortContactByKeyFunc=function(e,t){return v.j.compareSortableModel(e,t)};this.contactCacheController=t;this.contactCacheController.initNameIndexCache();this._entitySearchController=new g(t)}AbstractContactSearchController.prototype.getContactsByPhoneNumber=function(e,t){return this.contactCacheController.getContactsByPhoneNumber(e,t)};AbstractContactSearchController.prototype.doFuzzySearchPhoneContacts=function(e,t){return C(this,void 0,Promise,(function(){var r,n,o,a;return _(this,(function(i){switch(i.label){case 0:r=t.allowedPhoneNumberTypes?new Set(t.allowedPhoneNumberTypes):undefined;return[4,this._doFuzzySearchContacts(e,b(b({},t),{returnPhoneNumber:true,ignoreEmail:true,filterPhoneNumberFunc:this._generateFilterPhoneNumberFunc(!!t.showExtensionOnly,r)}))];case 1:n=i.sent();o=this._buildPhoneContactEntityFromResult(n,t);a={phoneContacts:o,terms:n.terms.searchKeyTerms};return[2,a]}}))}))};AbstractContactSearchController.prototype.doFuzzySearchEmailContacts=function(e,t){return C(this,void 0,Promise,(function(){var r,n,o;return _(this,(function(a){switch(a.label){case 0:return[4,this._doFuzzySearchContacts(e,b(b({},t),{returnMatchEmail:true}))];case 1:r=a.sent();n=this._buildEmailContactEntityFromResult(r);o={emailContacts:n,terms:r.terms.searchKeyTerms};return[2,o]}}))}))};AbstractContactSearchController.prototype.doFuzzySearchContacts=function(e,t){return C(this,void 0,Promise,(function(){var r;return _(this,(function(n){switch(n.label){case 0:return[4,this._doFuzzySearchContacts(e,t)];case 1:r=n.sent();return[2,{terms:r.terms.searchKeyTerms,sortableInfoModel:r.sortableModels.map((function(e){return b(b({},e),{entity:undefined})}))}]}}))}))};AbstractContactSearchController.prototype._doFuzzySearchContacts=function(e,t){return C(this,void 0,void 0,(function(){var r,n,o,a;return _(this,(function(i){switch(i.label){case 0:if(!t.sortFunc){t.sortFunc=!t.asIdsOrder||t.recentFirst?this.defaultSortContactByKeyFunc:undefined}r=c.SearchUtils.genSearchKeyTerms(e);o=(n=this._entitySearchController).searchEntities;a={searchKey:e};return[4,this.getTransformContactToSortableModelFunc(t,r)];case 1:return[2,o.apply(n,[(a.genSortableModelFunc=i.sent(),a.genFormattedTermsFunc=c.SearchUtils.generateFormattedTerms,a.arrangeIds=t.arrangeIds,a.sortFunc=t.sortFunc,a.resultLimit=t.resultLimit,a.filterOnly=t.filterOnly,a),t,this._canUseSearchCache(e)])]}}))}))};AbstractContactSearchController.prototype.getTransformContactToSortableModelFunc=function(e,t){return C(this,void 0,void 0,(function(){var r,n,o,a,i,u,s,l,f,h,d,p,v,y,g,m,b,C,S,T,E;var P=this;return _(this,(function(_){switch(_.label){case 0:r=e.excludeSelf,n=e.fetchAllIfSearchKeyEmpty,o=e.recentFirst,a=e.ignoreEmail,i=e.companyOnly,u=e.returnPhoneNumber,s=e.filterPhoneNumberFunc,l=e.returnMatchEmail,f=l===void 0?false:l,h=e.allowedContactType,d=e.contactGroupIds,p=e.customValidateFunc,v=e.groupExtensionTypes;y=h&&new Set(h);if(!o)return[3,2];return[4,this.generateRecentInfoFn()];case 1:m=_.sent();return[3,3];case 2:m=undefined;_.label=3;case 3:g=m;b=this.getMyId();C=this.getMyOrgId();S=v&&this._parser.getExtensionType;T=b!==undefined;E=t.searchKeyTerms.length===1&&this.isIncludeMe(t.searchKeyTerms[0]);return[2,function(t,l,h,m){var _,I,N,M;do{if(!n&&l.searchKeyTerms.length===0){break}var O=t.id;var A=p?p(t):P.isValidContactForSearch(t);if(!A||r&&O===b){break}var B=P.isInSameCompany(t,C);if(i&&!B){break}if(y){var x=P.getContactType(t);if(!y.has(x)){break}}if(u){var R=P.getSearchablePhoneNumbersFromCache(t);if(!R||!R.length){break}}if(d===null||d===void 0?void 0:d.length){var k=(I=(_=P._parser).getContactGroupId)===null||I===void 0?void 0:I.call(_,t);if(!k||!d.includes(k)){break}}if(S){var j=(M=(N=P._parser).getExtensionType)===null||M===void 0?void 0:M.call(N,t);if(!(v===null||v===void 0?void 0:v.has(j))){break}}var L=P._parser.hasRealName(t)?t.__lowercaseDisplayName:"";var V=0;var D=u?[]:undefined;var U=f?[]:undefined;var G=false;var F=false;var H=T&&E&&t.id===b;if(l.searchKey){if(!m){V=c.SearchUtils.getFullyMatchedWeight(L,l.lowerCaseSearchKey)||0;if(l.searchKeyTerms.length>1&&!V){V=c.SearchUtils.getContainsMatchedWeight(L,l.lowerCaseSearchKey)||0}}if(V){u&&(D=P.getSearchablePhoneNumbersFromCache(t));f&&(U=P._parser.getEmails(t))}else{var K=h?h.highPriorityMatchCnt>h.resultLimit&&l.searchKeyTerms.length<3||h.skipLowPriority:false;var z=P.checkAndGenMatchInfo(t.__splitNames,{contact:t,terms:l,lowercaseName:L,returnMatchedPhoneNumber:!!u},H,K,m,e.ignorePosition);if(z.isMatched){H=z.isMe;u&&(D=z.matchedNumbers);f&&(U=P._parser.getEmails(t));V=z.nameMatched&&z.sortValue||0}else if(!a){var W=P._genEmailMatchInfo(t,l,f);if(W.isMatched){V=w;D=u?P.getSearchablePhoneNumbersFromCache(t):[];U=W.matchedEmails}else{break}F=W.isMatched}else{break}G=z.phoneNumberMatched}}if(L.length===0){L=t.__lowercaseDisplayName;V=w}var Y=false;if(h){V&&(h.highPriorityMatchCnt+=1);Y=!H&&!V&&h.highPriorityMatchCnt>h.resultLimit}var Z=void 0;if(Y){Z=[0,0,0,0]}else{var q=o&&g&&g(O)||0;Z=[H?1:0,V,q,P.getSameConversationScore(O)]}if(!Y&&u&&s&&D){D=s(D,B,l);if(!(D===null||D===void 0?void 0:D.length)){break}}return{id:O,displayName:P._parser.getDisplayName(t),lowerCaseName:L,sortWeights:Z,entity:t,extraData:{matchedNumbers:D,matchedEmails:U,isPhoneMatched:G,isEmailMatched:F},skipSorting:Y}}while(false);return null}]}}))}))};AbstractContactSearchController.prototype.checkAndGenMatchInfo=function(e,t,r,n,o,a){var i=t.contact,u=t.terms;var s={matchedNumbers:[],nameMatched:false,phoneNumberMatched:false,isMatched:false,isMe:false,sortValue:0};var l;var f=true;var h=new Set;var d=new Set;var _loop_1=function(t){var v=u.searchKeyFormattedTerms.formattedKeys[t],y=v.original,g=v.formatted;var m=false;if(!r){var b=h.has(y);if(!b){for(var C=0;C<e.length;++C){var _=e[C];if(!o){if(!h.has(y)){var S=_.startsWith(y);b=b||S||n||_.includes(y);if(S&&!d.has(C)){s.sortValue+=c.SearchUtils.calculateMatchWeigh(true,!!a,C,t);h.add(y);d.add(C);break}}}else{b=_.includes(y)||b}}}s.nameMatched=s.nameMatched||b;var w=false;if(!b&&u.searchKeyFormattedTerms.validFormattedKeys.length){!l&&(l=p.getSearchablePhoneNumbersFromCache(i));l.forEach((function(e){if(e.phoneNumber.includes(g)){if(!s.matchedNumbers.length||!s.matchedNumbers.includes(e)){s.matchedNumbers.push(e)}w=true}}));if(w){s.phoneNumberMatched=true}}m=b||w}else{s.isMe=true;s.nameMatched=true;m=true}f=f&&m};var p=this;for(var v=0;v<u.searchKeyFormattedTerms.formattedKeys.length;v++){_loop_1(v)}s.isMatched=f;this._handleUnMatchedCase(s,t);return s};AbstractContactSearchController.prototype._handleUnMatchedCase=function(e,t){if(e.isMatched&&t.returnMatchedPhoneNumber&&!e.phoneNumberMatched){e.matchedNumbers=this.getSearchablePhoneNumbersFromCache(t.contact).slice()}return e};AbstractContactSearchController.prototype.generateMatchedInfo=function(e){var t=this;var r=e.contact,n=e.lowercaseName,o=e.terms,a=e.checkNameOnly;var i={matchedNumbers:[],nameMatched:false,phoneNumberMatched:false,isMatched:false,isMe:false};var c=this.getMyId();var u;i.isMatched=o.searchKeyFormattedTerms.formattedKeys.every((function(e){var s=n.includes(e.original);if(s||a){i.nameMatched=s;return s}if(r.id===c&&t.isIncludeMe(e.original)){i.isMe=true;i.nameMatched=true;return true}var l=false;if(e.formatted&&o.searchKeyFormattedTerms.validFormattedKeys.length){if(!u){u=t.getSearchablePhoneNumbersFromCache(r)}u.forEach((function(t){if(t.phoneNumber.includes(e.formatted)){if(!i.matchedNumbers.includes(t)){i.matchedNumbers.push(t)}l=true;i.phoneNumberMatched=true}}))}return l}));this._handleUnMatchedCase(i,e);return i};AbstractContactSearchController.prototype.filter=function(e){return this._filterInternal(e)};AbstractContactSearchController.prototype._filterInternal=function(e){var t=e.contact,r=e.searchTerms,n=e.checkNameOnly,o=e.skipValidate;if(!t){return false}var a=o||this.isValidContactForSearch(t);if(a&&r.searchKey){var i=this.generateMatchedInfo({contact:t,checkNameOnly:n,lowercaseName:t.__lowercaseDisplayName,terms:r});a=i.isMatched;if(!a&&!n){var c=this._genEmailMatchInfo(t,r,false);a=c.isMatched}}return a};AbstractContactSearchController.prototype.isInSameCompany=function(e,t){return this._parser.getOrgId(e)===t};AbstractContactSearchController.prototype.isIncludeMe=function(e){return p.Pal.instance.getI18n().isIncludeMeText(e)};AbstractContactSearchController.prototype._buildMatchedPhoneContact=function(e,t){var r=t.id;var n=t.extraData;return{id:r+"."+e.phoneNumber+"."+(e.label||e.usageType),rawId:r,phoneInfo:e,sortWeights:t.sortWeights,lowerCaseName:t.lowerCaseName,isPhoneMatched:n.isPhoneMatched}};AbstractContactSearchController.prototype._buildPhoneContactEntityFromResult=function(e,t){var r,n;var o;var a=[];for(var i=0;i<e.sortableModels.length;++i){var c=e.sortableModels[i];var u=(o=c.extraData)===null||o===void 0?void 0:o.matchedNumbers;if(u&&u.length){try{for(var s=(r=void 0,S(u)),l=s.next();!l.done;l=s.next()){var f=l.value;if(t.resultLimit&&a.length>=t.resultLimit){return a}a.push(this._buildMatchedPhoneContact(f,c))}}catch(e){r={error:e}}finally{try{if(l&&!l.done&&(n=s.return))n.call(s)}finally{if(r)throw r.error}}}}return a};AbstractContactSearchController.prototype._buildEmailContactEntityFromResult=function(e){var t=this;var r=[];e.sortableModels.forEach((function(e){var n;var o=(n=e.extraData)===null||n===void 0?void 0:n.matchedEmails;if(o===null||o===void 0?void 0:o.length){o.length===1?r.push(t._buildMatchedEmailContact(o[0],e)):o.sort((function(e,t){return v.j.compareString(e.address||"",t.address||"")})).forEach((function(n){r.push(t._buildMatchedEmailContact(n,e))}))}}));return r};AbstractContactSearchController.prototype._buildMatchedEmailContact=function(e,t){var r=t.extraData;var n=t.id;return{id:n+"."+e.label+"."+e.address,rawId:n,email:e,sortWeights:t.sortWeights,lowerCaseName:t.lowerCaseName,isEmailMatched:r.isEmailMatched}};AbstractContactSearchController.prototype._genEmailMatchInfo=function(e,t,r){if(r===void 0){r=false}var n=[];var o=this._parser.getLowercaseEmails(e);var a=r&&this._parser.getEmails(e);var i=false;for(var u=0;u<o.length;u++){if(c.SearchUtils.isFuzzyMatched(o[u],t.searchKeyTerms)){i=true;if(!r){break}n.push(a[u])}}return{isMatched:i,matchedEmails:n}};AbstractContactSearchController.prototype._canUseSearchCache=function(e){return!(e&&p.Pal.instance.getI18n().fuzzyContainMeText(e))&&!((e===null||e===void 0?void 0:e.length)===1&&c.SearchUtils.isSpecialChar(e))};AbstractContactSearchController.prototype.getSearchablePhoneNumbersFromCache=function(e){return e.__searchablePhoneNumbers};AbstractContactSearchController.prototype.getContactType=function(e){return m.wl};AbstractContactSearchController.prototype.generateRecentInfoFn=function(){return undefined};AbstractContactSearchController.prototype.isValidContactForSearch=function(e){return this.isVisibleContact(e)};AbstractContactSearchController.prototype.isVisibleContact=function(e){return!!e};AbstractContactSearchController.prototype.getSameConversationScore=function(e){return 0};return AbstractContactSearchController}();var E=function(){function AbstractContactInfoReader(){}AbstractContactInfoReader.prototype.getEmailAsName=function(e){var t;var r=(t=o().first(this.getEmails(e)))===null||t===void 0?void 0:t.address;if(r){var n=r.split("@")[0];var firstUpperCase_1=function(e){if(!e[0]){return""}return e[0].toUpperCase().concat(e.slice(1))};return n.split(".").map((function(e){return firstUpperCase_1(e)})).join(" ")}return""};AbstractContactInfoReader.prototype.getDisplayName=function(e){return this.getRawName(e)||this.getEmailAsName(e)};AbstractContactInfoReader.prototype.getPhoneNumbers=function(e){var t=[];this.iteratorContactNumbers(e,(function(e){t.push(e)}));return t};AbstractContactInfoReader.prototype.getSearchablePhoneNumbers=function(e,t){var r=[];var n;this.iteratorContactNumbers(e,(function(o){if(!o.hidden){r.push(o)}else{!n&&(n=t());if(n===e.id){r.push(o)}}}));return r};AbstractContactInfoReader.prototype.getTermsFromText=function(e,t){return c.SearchUtils.getTermsFromText(t)};AbstractContactInfoReader.prototype.isVisibleContact=function(e){return!!e};AbstractContactInfoReader.prototype.isContactHidden=function(e){return false};AbstractContactInfoReader.prototype.isMatchableContact=function(e){return!!e};AbstractContactInfoReader.prototype.hasRealName=function(e){return true};AbstractContactInfoReader.prototype.getLowercaseEmails=function(e){return e.__lowercaseEmails||[]};return AbstractContactInfoReader}();var P=r(475349);var I=r(915730);var N=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var M=undefined&&undefined.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){o(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};var O=undefined&&undefined.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,i;return i={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(i[Symbol.iterator]=function(){return this}),i;function verb(e){return function(t){return step([e,t])}}function step(i){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,o&&(a=i[0]&2?o["return"]:i[0]?o["throw"]||((a=o["return"])&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;if(o=0,a)i=[i[0]&2,a.value];switch(i[0]){case 0:case 1:a=i;break;case 4:r.label++;return{value:i[1],done:false};case 5:r.label++;o=i[1];i=[0];continue;case 7:i=r.ops.pop();r.trys.pop();continue;default:if(!(a=r.trys,a=a.length>0&&a[a.length-1])&&(i[0]===6||i[0]===2)){r=0;continue}if(i[0]===3&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(i[0]===6&&r.label<a[1]){r.label=a[1];a=i;break}if(a&&r.label<a[2]){r.label=a[2];r.ops.push(i);break}if(a[2])r.ops.pop();r.trys.pop();continue}i=t.call(e,r)}catch(e){i=[6,e];o=0}finally{n=a=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:true}}};var A=undefined&&undefined.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,a=[],i;try{while((t===void 0||t-- >0)&&!(o=n.next()).done)a.push(o.value)}catch(e){i={error:e}}finally{try{if(o&&!o.done&&(r=n["return"]))r.call(n)}finally{if(i)throw i.error}}return a};var B=undefined&&undefined.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(A(arguments[t]));return e};var x=function(e){N(BaseContactService,e);function BaseContactService(t,r,n){return e.call(this,t,r,n)||this}BaseContactService.prototype.getType=function(){return this.getContactSourceInfo().moduleName};BaseContactService.prototype.getDataById=function(e){return this.getById(e)};BaseContactService.prototype.getDataByIds=function(e){return this.batchGet(e)};BaseContactService.prototype.getDataByIdSynchronously=function(e){return this.getSynchronously(e)};BaseContactService.prototype.observe=function(e){i.notificationCenter.on(this.getContactSourceInfo().eventKey,e)};BaseContactService.prototype.toSortableModel=function(e){return{id:e.id,displayName:e.__lowercaseDisplayName||this.getContactInfoReader().getDisplayName(e).toLowerCase()}};BaseContactService.prototype.getSearchablePhoneNumbersFromCache=function(e){return this.getContactSearchController().getSearchablePhoneNumbersFromCache(e)};BaseContactService.prototype.getFullName=function(e){return this.getContactInfoReader().getDisplayName(e)};BaseContactService.prototype.transformId=function(e){return String(e)};BaseContactService.prototype.getData=function(e){return this.getEntitySource().getEntities(undefined,undefined,e)};BaseContactService.prototype.getPriority=function(){return this.getContactSourceInfo().priority};BaseContactService.prototype.matchByPhoneNumber=function(e,t){return this.getContactCacheController().matchContactByPhoneNumber(e,t)};BaseContactService.prototype.getAllPhoneNumbers=function(e,t){var r=B(e);if(t){r.push({phoneNumber:t,usageType:s.vX.Extension})}return r};BaseContactService.prototype.doFuzzySearchPhoneContacts=function(e,t){return M(this,void 0,Promise,(function(){var r;return O(this,(function(n){switch(n.label){case 0:return[4,this.getContactSearchController().doFuzzySearchPhoneContacts(e,t)];case 1:r=n.sent();return[2,r]}}))}))};BaseContactService.prototype.doFuzzySearchEmailContacts=function(e,t){return M(this,void 0,Promise,(function(){var r;return O(this,(function(n){switch(n.label){case 0:return[4,this.getContactSearchController().doFuzzySearchEmailContacts(e,t)];case 1:r=n.sent();return[2,r]}}))}))};BaseContactService.prototype.doFuzzySearchContacts=function(e,t){return M(this,void 0,Promise,(function(){var r;return O(this,(function(n){switch(n.label){case 0:return[4,this.getContactSearchController().doFuzzySearchContacts(e,t)];case 1:r=n.sent();return[2,r]}}))}))};BaseContactService.prototype.getContactParser=function(){return this.getContactInfoReader()};BaseContactService.prototype.getContactsByPhoneNumber=function(e,t){return this.getContactSearchController().getContactsByPhoneNumber(e,t)};BaseContactService.prototype.getContactSizeSynchronously=function(){return this.getEntityCacheController().getEntitiesSync().length};return BaseContactService}(i.EntityBaseService);var R=r(489597)},27677:(e,t,r)=>{r.d(t,{K:()=>n.K});var n=r(900251)},25650:(e,t,r)=>{r.d(t,{x:()=>n,D:()=>o});var n;(function(e){e["RCV"]="RCV";e["RCM"]="RingCentral Meetings";e["RCV_ATOS"]="Unify Office Meetings";e["RCV_ATT"]="Office@Hand Meetings";e["RCV_AVAYA"]="Cloud Office Avaya Meetings";e["RCV_BT"]="BT Meetings";e["RCV_RAINBOW"]="Rainbow Office Meetings";e["RCV_TELUS"]="Telus Meetings";e["RCV_VERIZON"]="Verizon Meetings";e["RCV_VODAFONE"]="Vodafone Meetings";e["RCM_BT"]="BT Cloud Phone Meetings";e["RCM_TELUS"]="TELUS Business Connect\u2122 Meetings";e["RCW"]="RCW";e["RCV_MCM"]="MCM Meetings";e["RCV_ECOTEL"]="ecotel Meetings";e["RCV_EASTLINK"]="Eastlink Meetings";e["RCV_DTATOS"]="Unify Office by RingCentral Video";e["RCV_DTTELEKOM"]="RingCentral mit Telekom Video";e["RCV_FRONTIER"]="Frontier plus RingCentral Video";e["RCV_VERSATEL"]="RingCentral Video mit 1&1 Connected Calls"})(n||(n={}));var o;(function(e){e["RCV"]="RCV";e["RCM"]="RCM";e["thirdParty"]="thirdParty";e["unKnown"]="unKnown"})(o||(o={}))},596548:(e,t,r)=>{r.d(t,{z:()=>o});var n=new RegExp(/^\+\d+$/);var o=function(){function PhoneNumberUtils(){}PhoneNumberUtils.normalizePhoneNumber=function(e){var t="";for(var r=0;r<e.length;r++){var n=e.charAt(r);if(n>="0"&&n<="9"){t+=n}else if(r===0&&n==="+"){t+=n}else if(n==="#"||n==="*"||n===","){t+=n}else if(n>="a"&&n<="z"||n>="A"&&n<="Z"){var o="";switch(n){case"A":case"a":case"B":case"b":case"C":case"c":o="2";break;case"D":case"d":case"E":case"e":case"F":case"f":o="3";break;case"G":case"g":case"H":case"h":case"I":case"i":o="4";break;case"J":case"j":case"K":case"k":case"L":case"l":o="5";break;case"M":case"m":case"N":case"n":case"O":case"o":o="6";break;case"P":case"p":case"Q":case"q":case"R":case"r":case"S":case"s":o="7";break;case"T":case"t":case"U":case"u":case"V":case"v":o="8";break;case"W":case"w":case"X":case"x":case"Y":case"y":case"Z":case"z":o="9";break;default:break}t+=o}}return t};PhoneNumberUtils.isE164PhoneNumber=function(e){return n.test(e)};return PhoneNumberUtils}()},156677:(e,t,r)=>{r.d(t,{d:()=>p});var n=r(667489);var o=r.n(n);var a=r(862926);var i=r.n(a);var c=r(90416);var u=r(375577);var s=r(969153);var l=undefined&&undefined.__assign||function(){l=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o))e[o]=t[o]}return e};return l.apply(this,arguments)};var f=undefined&&undefined.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){o(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};var h=undefined&&undefined.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,i;return i={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(i[Symbol.iterator]=function(){return this}),i;function verb(e){return function(t){return step([e,t])}}function step(i){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,o&&(a=i[0]&2?o["return"]:i[0]?o["throw"]||((a=o["return"])&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;if(o=0,a)i=[i[0]&2,a.value];switch(i[0]){case 0:case 1:a=i;break;case 4:r.label++;return{value:i[1],done:false};case 5:r.label++;o=i[1];i=[0];continue;case 7:i=r.ops.pop();r.trys.pop();continue;default:if(!(a=r.trys,a=a.length>0&&a[a.length-1])&&(i[0]===6||i[0]===2)){r=0;continue}if(i[0]===3&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(i[0]===6&&r.label<a[1]){r.label=a[1];a=i;break}if(a&&r.label<a[2]){r.label=a[2];r.ops.push(i);break}if(a[2])r.ops.pop();r.trys.pop();continue}i=t.call(e,r)}catch(e){i=[6,e];o=0}finally{n=a=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:true}}};var d=undefined&&undefined.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,a=[],i;try{while((t===void 0||t-- >0)&&!(o=n.next()).done)a.push(o.value)}catch(e){i={error:e}}finally{try{if(o&&!o.done&&(r=n["return"]))r.call(n)}finally{if(i)throw i.error}}return a};var p=function(){function AbstractEntityBadgeController(e){var t=this;this._badgeCacheMap=new Map;this._badgeStatus=u.BADGE_STATUS.UNINITIALIZED;this.handleBadgeEntityEvent=function(e){switch(e.type){case n.EVENT_TYPES.UPDATE:return t.handleBadgeUpdateEvent(e);case n.EVENT_TYPES.RELOAD:return t.handleBadgeReload();case n.EVENT_TYPES.REPLACE:return t.handleBadgeReplace(e.body.entities);default:return}};this.handleBadgeUpdateEvent=function(e){var r=Array.from(e.body.entities.values());return t.handleBadgeUpdate(r)};this._updateEntityBadge=function(e,r,n){var o=t._badgeCacheMap.get(n!==null&&n!==void 0?n:r.id)||0;var a=t.getBadge();a=a-o+e;n&&t._handleBadgeCache({type:"delete",id:n});t._handleBadgeCache({type:"set",id:r.id,count:e,entity:r});if(t._badgeStatus===u.BADGE_STATUS.IDLE){t._updateBadge(a)}};this.handleBadgeReload=function(){return f(t,void 0,void 0,(function(){var e,t,r,n,o,i;var c=this;return h(this,(function(s){switch(s.label){case 0:this.logger.info("handleBadgeReload, status:",this._badgeStatus);if(!(this._badgeStatus===u.BADGE_STATUS.UNINITIALIZED))return[3,2];return[4,this.initializeBadge()];case 1:s.sent();return[2];case 2:this.reset();this._badgeStatus=u.BADGE_STATUS.OCCUPY;e=this._badgeConfigOptions.traceLoadPerformance;t=e?(0,a.commonPerformanceTracer)(undefined,this.logger):null;s.label=3;case 3:s.trys.push([3,6,,7]);return[4,this.getAllEntities()];case 4:r=s.sent();return[4,this.calculateTotalUnreadMap(r)];case 5:n=s.sent();o=0;n.forEach((function(e,t){o+=e;c._handleBadgeCache({type:"set",id:t,count:e,entity:r.find((function(e){return e.id===t}))})}));this._updateBadge(o);e&&(t===null||t===void 0?void 0:t.end(l(l({},e),{infos:{id:this._badgeConfigOptions.badgeId,count:this.getBadge()}})));this._badgeStatus=u.BADGE_STATUS.IDLE;return[3,7];case 6:i=s.sent();this.logger.warn("fail to handle badge reload",i);return[3,7];case 7:return[2]}}))}))};this.handleBadgeReplace=function(e){return f(t,void 0,void 0,(function(){var t=this;return h(this,(function(r){switch(r.label){case 0:this.logger.info("handleBadgeReplace, status:",this._badgeStatus,"data size:",e.size);if(this._badgeStatus===u.BADGE_STATUS.UNINITIALIZED){this.initializeBadge()}if(!this.getEntityBadge)return[3,1];e.forEach((function(e,r){return t._updateEntityBadge(t.getEntityBadge(e),e,r)}));return[3,4];case 1:if(!this.asyncGetEntityBadge)return[3,3];return[4,Promise.all(Array.from(e.entries()).map((function(e){var r=d(e,2),n=r[0],o=r[1];return f(t,void 0,void 0,(function(){var e;return h(this,(function(t){switch(t.label){case 0:return[4,this.asyncGetEntityBadge(o)];case 1:e=t.sent();this._updateEntityBadge(e,o,n);return[2]}}))}))})))];case 2:r.sent();return[3,4];case 3:this.logger.error("no getEntityBadge nor asyncGetEntityBadge found");r.label=4;case 4:return[2]}}))}))};this._badgeConfig=new s.O(e.badgeConfigName||e.badgeId);this._badgeConfigOptions=e;this.reset()}AbstractEntityBadgeController.prototype.start=function(){this.logger.info("start badge: ",this._badgeConfigOptions);this._addListeners();!this._badgeConfigOptions.lazyInitialization&&this.initializeBadge()};AbstractEntityBadgeController.prototype.stop=function(){this.logger.info("stop badge: ",this._badgeConfigOptions);this._removeListeners();this._updateBadge(0);this._getBadgeModule().unregisterBadge(this._badgeConfigOptions.badgeId)};AbstractEntityBadgeController.prototype._addListeners=function(){this._removeListeners();this._badgeConfigOptions.entityKey&&n.notificationCenter.on(this._badgeConfigOptions.entityKey,this.handleBadgeEntityEvent);this._badgeConfigOptions.updateKey&&n.notificationCenter.on(this._badgeConfigOptions.updateKey,this.handleBadgeUpdateEvent);this._badgeConfigOptions.reloadKey&&n.notificationCenter.on(this._badgeConfigOptions.reloadKey,this.handleBadgeReload)};AbstractEntityBadgeController.prototype._removeListeners=function(){this._badgeConfigOptions.entityKey&&n.notificationCenter.off(this._badgeConfigOptions.entityKey,this.handleBadgeEntityEvent);this._badgeConfigOptions.updateKey&&n.notificationCenter.off(this._badgeConfigOptions.updateKey,this.handleBadgeUpdateEvent);this._badgeConfigOptions.reloadKey&&n.notificationCenter.off(this._badgeConfigOptions.reloadKey,this.handleBadgeReload)};AbstractEntityBadgeController.prototype.initializeBadge=function(){return f(this,void 0,void 0,(function(){var e;return h(this,(function(t){switch(t.label){case 0:t.trys.push([0,3,,4]);this.logger.info("initialize badge, status:",this._badgeStatus);if(!(this._badgeStatus===u.BADGE_STATUS.UNINITIALIZED))return[3,2];this._registerBadge();this._badgeStatus=u.BADGE_STATUS.OCCUPY;return[4,this.handleBadgeReload()];case 1:t.sent();this.logger.info("initialize badge, finished");t.label=2;case 2:return[3,4];case 3:e=t.sent();this.logger.warn("initializeBadge error: ",e);return[3,4];case 4:return[2]}}))}))};AbstractEntityBadgeController.prototype.reset=function(){this.logger.info("reset badge");this._handleBadgeCache({type:"reset"});this._badgeStatus=u.BADGE_STATUS.UNINITIALIZED};AbstractEntityBadgeController.prototype.handleBadgeUpdate=function(e){return f(this,void 0,void 0,(function(){var t=this;return h(this,(function(r){switch(r.label){case 0:this.logger.info("handleBadgeUpdate, status:",this._badgeStatus,"data length:",e.length);if(!(this._badgeStatus===u.BADGE_STATUS.UNINITIALIZED))return[3,2];return[4,this.initializeBadge()];case 1:r.sent();return[2];case 2:if(e.length===0){return[2]}if(!(this._badgeStatus===u.BADGE_STATUS.OCCUPY))return[3,4];return[4,this.handleBadgeReload()];case 3:r.sent();return[2];case 4:if(!this.getEntityBadge)return[3,5];e.forEach((function(e){return t._updateEntityBadge(t.getEntityBadge(e),e)}));return[3,8];case 5:if(!this.asyncGetEntityBadge)return[3,7];return[4,Promise.all(e.map((function(e){return f(t,void 0,void 0,(function(){var t;return h(this,(function(r){switch(r.label){case 0:return[4,this.asyncGetEntityBadge(e)];case 1:t=r.sent();this._updateEntityBadge(t,e);return[2]}}))}))})))];case 6:r.sent();return[3,8];case 7:this.logger.error("please define getEntityBadge or asyncGetEntityBadge");r.label=8;case 8:return[2]}}))}))};AbstractEntityBadgeController.prototype.calculateTotalUnreadMap=function(e){return f(this,void 0,void 0,(function(){var t;var r=this;return h(this,(function(n){switch(n.label){case 0:t=new Map;if(!this.getEntityBadge)return[3,1];e.forEach((function(e){return t.set(e.id,r.getEntityBadge(e))}));return[3,4];case 1:if(!this.asyncGetEntityBadge)return[3,3];return[4,Promise.all(e.map((function(e){return f(r,void 0,void 0,(function(){var r;return h(this,(function(n){switch(n.label){case 0:return[4,this.asyncGetEntityBadge(e)];case 1:r=n.sent();t.set(e.id,r);return[2]}}))}))})))];case 2:n.sent();return[3,4];case 3:this.logger.error("no getEntityBadge nor asyncGetEntityBadge found");n.label=4;case 4:return[2,t]}}))}))};AbstractEntityBadgeController.prototype.recalculateBadge=function(){var e=this;var t;var r=(t=this.recalculateEntityBadge)===null||t===void 0?void 0:t.bind(this);if(!r){throw new Error("Please implement recalculateEntityBadge before invoking recalculateBadge")}this.logger.info("recalculateBadge, status:",this._badgeStatus);this._badgeCacheMap.forEach((function(t,n){var o=r(n,t);if(o!==t){var a=e.getBadge();a=a-t+o;e._handleBadgeCache({type:"set",id:n,count:o});if(e._badgeStatus===u.BADGE_STATUS.IDLE)e._updateBadge(a)}}))};AbstractEntityBadgeController.prototype._handleBadgeCache=function(e){switch(e.type){case"reset":this._badgeCacheMap=new Map;break;case"set":this._badgeCacheMap.set(e.id,e.count);break;case"delete":this._badgeCacheMap.delete(e.id);break;default:this.logger.warn("_handleBadgeCache, unknown action:",e)}this.onBadgeCacheChange&&this.onBadgeCacheChange(e)};AbstractEntityBadgeController.prototype._updateBadge=function(e){if(e===this.getBadge()){return}this.setBadge(e);var t={id:this._badgeConfigOptions.badgeId,unreadCount:this.getBadge()};this._getBadgeModule().updateBadge(t);this.logger.info("update badge: ",t)};AbstractEntityBadgeController.prototype._registerBadge=function(){var e=this;this._getBadgeModule().registerBadge(this._badgeConfigOptions.badgeId,(function(){return{id:e._badgeConfigOptions.badgeId,unreadCount:e.getBadge()}}))};AbstractEntityBadgeController.prototype.getBadge=function(){return this._badgeConfig.getBadge()||0};AbstractEntityBadgeController.prototype.setBadge=function(e){this._badgeConfig.setBadge(e)};AbstractEntityBadgeController.prototype._getBadgeModule=function(){return(0,n.getModule)(c.BADGE_MODULE_NAME)};return AbstractEntityBadgeController}()},175853:(e,t,r)=>{r.d(t,{V:()=>i});var n=r(885057);var o=undefined&&undefined.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){o(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};var a=undefined&&undefined.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,i;return i={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(i[Symbol.iterator]=function(){return this}),i;function verb(e){return function(t){return step([e,t])}}function step(i){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,o&&(a=i[0]&2?o["return"]:i[0]?o["throw"]||((a=o["return"])&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;if(o=0,a)i=[i[0]&2,a.value];switch(i[0]){case 0:case 1:a=i;break;case 4:r.label++;return{value:i[1],done:false};case 5:r.label++;o=i[1];i=[0];continue;case 7:i=r.ops.pop();r.trys.pop();continue;default:if(!(a=r.trys,a=a.length>0&&a[a.length-1])&&(i[0]===6||i[0]===2)){r=0;continue}if(i[0]===3&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(i[0]===6&&r.label<a[1]){r.label=a[1];a=i;break}if(a&&r.label<a[2]){r.label=a[2];r.ops.push(i);break}if(a[2])r.ops.pop();r.trys.pop();continue}i=t.call(e,r)}catch(e){i=[6,e];o=0}finally{n=a=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:true}}};var i=function(){function AbstractRCDataSyncController(e){this._syncInterval=e.syncInterval;this._jobKey=e.jobKey;this._executeJOBWhenStarts=e.executeJOBWhenStarts;this._permissionRegister=e.permissionRegister}AbstractRCDataSyncController.prototype.start=function(){if(this._executeJOBWhenStarts){n.L7.cancelJob(this._jobKey,true)}this._scheduleJob(this._jobKey,this._permissionRegister)};AbstractRCDataSyncController.prototype._scheduleJob=function(e,t){var r=this;var callback=function(t){if(t){n.L7.schedulePeriodicJob(e,(function(e){return o(r,void 0,void 0,(function(){var t,r,n;return a(this,(function(o){switch(o.label){case 0:o.trys.push([0,5,,6]);return[4,this.onUpdateRequired()];case 1:t=o.sent();if(!t)return[3,4];return[4,this.fetchData()];case 2:r=o.sent();return[4,this.handleAndSaveData(r)];case 3:o.sent();o.label=4;case 4:e(true);return[3,6];case 5:n=o.sent();e(false);return[3,6];case 6:return[2]}}))}))}),true,r._syncInterval,n.dV.BASE_ON_LAST_TIME)}else{n.L7.cancelJob(e,true)}};if(t){t(callback)}else{callback(true)}};AbstractRCDataSyncController.prototype.stop=function(){};AbstractRCDataSyncController.prototype.onUpdateRequired=function(){return Promise.resolve(true)};return AbstractRCDataSyncController}()},31477:(e,t,r)=>{r.d(t,{g:()=>c});var n=r(170407);var o=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var a=undefined&&undefined.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,a=[],i;try{while((t===void 0||t-- >0)&&!(o=n.next()).done)a.push(o.value)}catch(e){i={error:e}}finally{try{if(o&&!o.done&&(r=n["return"]))r.call(n)}finally{if(i)throw i.error}}return a};var i=undefined&&undefined.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e};var c=function(e){o(ListCommitController,e);function ListCommitController(){return e!==null&&e.apply(this,arguments)||this}ListCommitController.prototype.add=function(e,t){if(t===void 0){t=false}return this.commit((function(r){if(!e.length)return r;return t?e.concat(r):r.concat(e)}))};ListCommitController.prototype.remove=function(e){return this.commit((function(t){if(!e.length)return t;return t.filter((function(t){var r=t.id;return!e.includes(r)}))}))};ListCommitController.prototype.reorder=function(e,t){return this.commit((function(r){var n=e(r);var o=n===-1||n===t;!o&&r.splice.apply(r,i([t,0],r.splice(n,1)));return r}))};ListCommitController.prototype.reorderById=function(e,t){var findIndex=function(t){return t.findIndex((function(t){return t.id===e}))};return this.reorder(findIndex,t)};ListCommitController.prototype.reorderByIndex=function(e,t){var findIndex=function(){return e};return this.reorder(findIndex,t)};return ListCommitController}(n.a)},868357:(e,t,r)=>{r.d(t,{p:()=>c});var n=r(862926);var o=r.n(n);var a=r(841358);var i=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var c=function(e){i(JRCError,e);function JRCError(t,r,n){return e.call(this,a.QS,t,r,n)||this}return JRCError}(n.JError)},631920:(e,t,r)=>{r.d(t,{W0:()=>a,AP:()=>o.A});var n=r(424843);var o=r(854434);var a=new n.ResponseParser;a.register(new o.A);a.register(new n.CommonResponseParser)},743433:(e,t,r)=>{r.d(t,{Jz:()=>n,g7:()=>o,Y$:()=>a});var n;(function(e){e["ISYNC"]="ISync";e["FSYNC"]="FSync"})(n||(n={}));var o;(function(e){e["FAX"]="Fax";e["SMS"]="SMS";e["VOICEMAIL"]="VoiceMail";e["PAGER"]="Pager";e["TEXT"]="Text";e["ALL"]="All"})(o||(o={}));var a;(function(e){e["ALL"]="All";e["MISSED"]="Missed";e["RECORDING"]="Recording"})(a||(a={}))},822405:(e,t,r)=>{r.d(t,{iF:()=>o,EV:()=>a,vR:()=>c,Dp:()=>phonePerformanceTracer});var n=r(17297);var o=function(){function CallUtils(){}CallUtils.isSameCall=function(e,t){return e.callId===t.callId&&(e.fromTag===t.fromTag&&e.toTag===t.toTag||e.toTag===t.fromTag&&e.fromTag===t.toTag)};CallUtils.activeCall2UniqueCallInfo=function(e){var t,r;return{callId:e.id,fromTag:((t=e.sipData)===null||t===void 0?void 0:t.fromTag)||"",toTag:((r=e.sipData)===null||r===void 0?void 0:r.toTag)||""}};CallUtils.isMultiPartyConfCall=function(e){return e.to===n.OB||e.from===n.OB};return CallUtils}();var a=function(){function CountryUtils(){}CountryUtils.getCountryInfo=function(e){return n.ez.find((function(t){return t.name===e}))};return CountryUtils}();var i=r(862926);var c="phone";var phonePerformanceTracer=function(e,t){return i.PerformanceTracer.start(c,e,t)}},203978:(e,t,r)=>{r.d(t,{n:()=>u});var n=r(850534);var o=r(12072);var a=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var i=undefined&&undefined.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){o(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};var c=undefined&&undefined.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,i;return i={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(i[Symbol.iterator]=function(){return this}),i;function verb(e){return function(t){return step([e,t])}}function step(i){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,o&&(a=i[0]&2?o["return"]:i[0]?o["throw"]||((a=o["return"])&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;if(o=0,a)i=[i[0]&2,a.value];switch(i[0]){case 0:case 1:a=i;break;case 4:r.label++;return{value:i[1],done:false};case 5:r.label++;o=i[1];i=[0];continue;case 7:i=r.ops.pop();r.trys.pop();continue;default:if(!(a=r.trys,a=a.length>0&&a[a.length-1])&&(i[0]===6||i[0]===2)){r=0;continue}if(i[0]===3&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(i[0]===6&&r.label<a[1]){r.label=a[1];a=i;break}if(a&&r.label<a[2]){r.label=a[2];r.ops.push(i);break}if(a[2])r.ops.pop();r.trys.pop();continue}i=t.call(e,r)}catch(e){i=[6,e];o=0}finally{n=a=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:true}}};var u=function(e){a(StorageSettingItemValueProvider,e);function StorageSettingItemValueProvider(t,r,n){var a=e.call(this)||this;a._id=t;a._key=r;a._defaultValue=n;a._userConfig=new o.h;return a}StorageSettingItemValueProvider.prototype.updateDefaultValue=function(e){if(this._defaultValue!==e){this._defaultValue=e;this.notifyChange()}};StorageSettingItemValueProvider.prototype.getter=function(){return i(this,void 0,Promise,(function(){var e;return c(this,(function(t){e=this._userConfig.getValue(this._id,this._key);return[2,e===undefined?this._defaultValue:e]}))}))};StorageSettingItemValueProvider.prototype.setter=function(e){return i(this,void 0,Promise,(function(){return c(this,(function(t){this._userConfig.putValue(this._id,this._key,e);this.notifyChange(e);return[2]}))}))};return StorageSettingItemValueProvider}(n.Y)},750714:(e,t,r)=>{r.d(t,{Op:()=>n,Jl:()=>s,Nd:()=>l});var n="public"||0;var o="production";var a={NODE_ENV:"production",PUBLIC_URL:"",APP_ENV:undefined}.GIT_SOURCE_BRANCH;var i={NODE_ENV:"production",PUBLIC_URL:"",APP_ENV:undefined}.GIT_TARGET_BRANCH;var c=o==="development"||o!=="production";var u=o=="production";var s=Boolean(a&&i===a&&/^stage\/.*/.test(i));var l=Boolean(a&&i===a&&/^hotfix\/.*/.test(i))},255368:(e,t,r)=>{r.d(t,{gi:()=>n,w2:()=>o,rA:()=>a,E1:()=>i,_r:()=>c,cN:()=>u,qE:()=>s,W1:()=>l,X5:()=>f});var n;(function(e){e["FOLLOW_SYSTEM"]="FOLLOW_SYSTEM"})(n||(n={}));var o;(function(e){e["LIGHT"]="light";e["DARK"]="dark";e["HIGH_CONTRAST"]="highContrast"})(o||(o={}));var a;(function(e){e["SYNC_WITH_OS_THEME_SETTING"]="SYNC_WITH_OS_THEME_SETTING";e["THEME_SETTING"]="THEME_SETTING";e["THEME_CATEGORY_SETTING"]="THEME_CATEGORY_SETTING";e["THEME_ITEM_SETTING"]="THEME_ITEM_SETTING"})(a||(a={}));var i="(prefers-color-scheme: dark)";var c="CAN_SYNC_WITH_OS_THEME";var u;(function(e){e["THEME_CHANGE"]="THEME_CHANGE";e["SYNC_OS_THEME"]="SYNC_OS_THEME"})(u||(u={}));var s=o.LIGHT;var l;(function(e){e["SYSTEM_THEME_CATEGORY"]="SYSTEM_THEME_CATEGORY"})(l||(l={}));var f="THEME_SETTING_SECTION"},943072:(e,t,r)=>{r.d(t,{R:()=>ThemeCategorySettingSelectItem});var n=r(542364);var o=r(255368);var a=r(182843);var i=r(305406);var c=r.n(i);var u=r(245882);var ThemeCategorySettingSelectItem=function(e){var t=e.value;var r=t===o.gi.FOLLOW_SYSTEM?{text:(0,n.t)("setting.selectCategory.followSystem"),ariaLabel:(0,n.t)("setting.selectCategory.followSystem")}:{text:(0,n.t)("themeCategory."+t),ariaLabel:(0,n.t)("setting.selectCategory.categoryOptionScreenReader",{categoryName:(0,n.t)("themeCategory."+t),count:(0,a.Pq)(t).length})},i=r.text,s=r.ariaLabel;return c().createElement("div",{"aria-label":s,"data-a11y-text-for-container":i},c().createElement(u.z,null,i))}},954499:(e,t,r)=>{r.d(t,{E:()=>S});var n=r(258419);var o=r(325719);var a=r.n(o);var i=r(976832);var c=r.n(i);var u=r(441351);var s=r(542364);var l=r(182843);var f=r(255368);var h=r(168825);var d=r(534116);var p=r(544416);var v=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var y=undefined&&undefined.__decorate||function(e,t,r,n){var o=arguments.length,a=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,i;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")a=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)if(i=e[c])a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a;return o>3&&a&&Object.defineProperty(t,r,a),a};var g=undefined&&undefined.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};var m=undefined&&undefined.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){o(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};var b=undefined&&undefined.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,i;return i={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(i[Symbol.iterator]=function(){return this}),i;function verb(e){return function(t){return step([e,t])}}function step(i){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,o&&(a=i[0]&2?o["return"]:i[0]?o["throw"]||((a=o["return"])&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;if(o=0,a)i=[i[0]&2,a.value];switch(i[0]){case 0:case 1:a=i;break;case 4:r.label++;return{value:i[1],done:false};case 5:r.label++;o=i[1];i=[0];continue;case 7:i=r.ops.pop();r.trys.pop();continue;default:if(!(a=r.trys,a=a.length>0&&a[a.length-1])&&(i[0]===6||i[0]===2)){r=0;continue}if(i[0]===3&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(i[0]===6&&r.label<a[1]){r.label=a[1];a=i;break}if(a&&r.label<a[2]){r.label=a[2];r.ops.push(i);break}if(a[2])r.ops.pop();r.trys.pop();continue}i=t.call(e,r)}catch(e){i=[6,e];o=0}finally{n=a=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:true}}};var C=(0,l.jG)({themeCategory:f.w2.LIGHT,themeName:(0,l.jE)({themeCategory:f.w2.LIGHT,isPhoenix:false}),isMobile:false,useDefault:true});var _=s.k.tags("[ThemeProviderViewModel]");var S=function(e){v(ThemeProviderViewModel,e);function ThemeProviderViewModel(t){var r=e.call(this,t)||this;r.isConfigReady=false;r._phoenixUserController=p.S;r._themeController=d.C;r._settingThemeName=(0,i.promisedComputed)(undefined,(function(){return m(r,void 0,void 0,(function(){var e,t,r;var n;return b(this,(function(o){switch(o.label){case 0:e=(n=this._phoenixUserController.enablePhoenixTheme)!==null&&n!==void 0?n:false;t=this._themeController.themeName;return[4,u.TQ.isReady.wait()];case 1:o.sent();if(t){r=t}else{r=(0,l.jE)({themeCategory:f.qE,isPhoenix:e})}_.info("themeName",r);return[2,r]}}))}))}));u.DK.then((function(){r.isConfigReady=true}));r.autorun((function(){if(r.isConfigReady&&r.themeMap&&r.settingThemeName){h.ZP.set(h.MG.IS_READY,true);_.info("theme and config are ready")}}));return r}Object.defineProperty(ThemeProviderViewModel.prototype,"settingThemeName",{get:function(){return this._settingThemeName.get()},enumerable:true,configurable:true});Object.defineProperty(ThemeProviderViewModel.prototype,"themeMap",{get:function(){return l.qE.get()},enumerable:true,configurable:true});Object.defineProperty(ThemeProviderViewModel.prototype,"theme",{get:function(){var e=this,t=e.themeMap,r=e.settingThemeName;var n;if(t&&r){n=t[r]||C}else{n=C}return n},enumerable:true,configurable:true});y([o.observable,g("design:type",Boolean)],ThemeProviderViewModel.prototype,"isConfigReady",void 0);y([o.computed,g("design:type",Object),g("design:paramtypes",[])],ThemeProviderViewModel.prototype,"settingThemeName",null);y([o.computed,g("design:type",Object),g("design:paramtypes",[])],ThemeProviderViewModel.prototype,"themeMap",null);y([o.computed,g("design:type",Object),g("design:paramtypes",[])],ThemeProviderViewModel.prototype,"theme",null);return ThemeProviderViewModel}(n.Z)},315431:(e,t,r)=>{r.d(t,{n:()=>f});var n=r(325719);var o=r.n(n);var a=r(258419);var i=r(255368);var c=r(182843);var u=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var s=undefined&&undefined.__decorate||function(e,t,r,n){var o=arguments.length,a=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,i;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")a=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)if(i=e[c])a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a;return o>3&&a&&Object.defineProperty(t,r,a),a};var l=undefined&&undefined.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};var f=function(e){u(ThemeProviderWithoutSettingViewModel,e);function ThemeProviderWithoutSettingViewModel(){var t=e!==null&&e.apply(this,arguments)||this;t.dispose=function(){e.prototype.dispose.call(t)};return t}Object.defineProperty(ThemeProviderWithoutSettingViewModel.prototype,"theme",{get:function(){var e;return(e=this.props.theme)!==null&&e!==void 0?e:"light"},enumerable:true,configurable:true});Object.defineProperty(ThemeProviderWithoutSettingViewModel.prototype,"themeMap",{get:function(){return{light:(0,c.jG)({themeCategory:i.w2.LIGHT,themeName:this.themeName,isMobile:this.props.isMobile,useDefault:true}),dark:(0,c.jG)({themeCategory:i.w2.DARK,themeName:this.defaultDarkTheme,isMobile:this.props.isMobile,useDefault:true})}},enumerable:true,configurable:true});Object.defineProperty(ThemeProviderWithoutSettingViewModel.prototype,"themeName",{get:function(){return(0,c.jE)({themeCategory:i.w2.LIGHT,isPhoenix:false})},enumerable:true,configurable:true});Object.defineProperty(ThemeProviderWithoutSettingViewModel.prototype,"defaultDarkTheme",{get:function(){return(0,c.jE)({themeCategory:i.w2.DARK,isPhoenix:false})},enumerable:true,configurable:true});s([n.computed,l("design:type",String),l("design:paramtypes",[])],ThemeProviderWithoutSettingViewModel.prototype,"themeName",null);s([n.computed,l("design:type",String),l("design:paramtypes",[])],ThemeProviderWithoutSettingViewModel.prototype,"defaultDarkTheme",null);return ThemeProviderWithoutSettingViewModel}(a.Z)},947860:(e,t,r)=>{r.d(t,{N:()=>w});var n=r(305406);var o=r.n(n);var a=r(720795);var i=r(223412);var c=r(258419);var u=r(441351);var s=r(417799);var l=r(325719);var f=r(534116);var h=r(255368);var d=r(542364);var p=r(750977);var v=r(182843);var y=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var g=undefined&&undefined.__assign||function(){g=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o))e[o]=t[o]}return e};return g.apply(this,arguments)};var m=undefined&&undefined.__decorate||function(e,t,r,n){var o=arguments.length,a=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,i;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")a=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)if(i=e[c])a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a;return o>3&&a&&Object.defineProperty(t,r,a),a};var b=undefined&&undefined.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};var C=d.k.tags("[ThemeSelectViewModel]");var _=function(e){y(ThemeSelectViewModel,e);function ThemeSelectViewModel(){var t=e!==null&&e.apply(this,arguments)||this;t._themeController=f.C;t.onClick=function(e,r){var n;(0,p.zY)(r);C.info("theme setting change",r);t.value&&t._settingItem.valueSetter&&t._settingItem.valueSetter(g(g({},t.value),(n={},n[e]=r,n)))};return t}Object.defineProperty(ThemeSelectViewModel.prototype,"value",{get:function(){var e,t;return(e=this._settingItem.value)!==null&&e!==void 0?e:(t=this._themeController)===null||t===void 0?void 0:t.defaultSelectedThemes},enumerable:true,configurable:true});Object.defineProperty(ThemeSelectViewModel.prototype,"_settingItem",{get:function(){return s.ZP.getSettingByID(this.props.id)},enumerable:true,configurable:true});Object.defineProperty(ThemeSelectViewModel.prototype,"_themeCategorySetting",{get:function(){return s.ZP.getSettingByID(h.rA.THEME_CATEGORY_SETTING)},enumerable:true,configurable:true});Object.defineProperty(ThemeSelectViewModel.prototype,"activeCategory",{get:function(){var e;var t=this._themeCategorySetting.value;return t===h.gi.FOLLOW_SYSTEM?(e=this._themeController)===null||e===void 0?void 0:e.systemThemeCategory:t},enumerable:true,configurable:true});Object.defineProperty(ThemeSelectViewModel.prototype,"categories",{get:function(){var e=u.TQ.get("themeCategories");var t=Object.keys(e).sort(v.Lc);return t.map((function(t){var r=e[t].themes;return{name:t,themes:r.map((function(e){return{name:e,thumbnail:"/theme/"+e+"/theme_thumbnail_"+e+".svg"}}))}}))},enumerable:true,configurable:true});m([l.computed,b("design:type",Object),b("design:paramtypes",[])],ThemeSelectViewModel.prototype,"value",null);m([l.computed,b("design:type",Object),b("design:paramtypes",[])],ThemeSelectViewModel.prototype,"_settingItem",null);m([l.computed,b("design:type",Object),b("design:paramtypes",[])],ThemeSelectViewModel.prototype,"_themeCategorySetting",null);m([l.computed,b("design:type",Object),b("design:paramtypes",[])],ThemeSelectViewModel.prototype,"activeCategory",null);return ThemeSelectViewModel}(c.Z);var S=r(806854);var w=(0,a.observer)((function(e){var t=(0,i.o)(_,e),r=t.value,n=t.onClick,a=t.categories,c=t.activeCategory;var u=(0,d.$)().t;return o().createElement(S.zM,null,a.map((function(e){return o().createElement(S.Hq,{key:e.name,fullLine:e.themes.length>1,disabled:e.name!==c,title:u("setting.selectItem.sectionTitle",{categoryName:u("themeCategory."+e.name),count:e.themes.length}),automationId:"theme-select-category-"+e.name},e.themes.map((function(t){var a=u("themeName."+t.name);var i=!!(r&&t.name===r[e.name]);var s=e.themes.length===1?[u("setting.selectItem.sectionTitle",{categoryName:u("themeCategory."+e.name),count:1}),u("setting.selectItem.previewPicture"),i?u("setting.selectItem.selected"):""].filter((function(e){return!!e})).join(", "):[a,u("setting.selectItem.sectionTitle",{categoryName:u("themeCategory."+e.name),count:1}),u("setting.selectItem."+(i?"selected":"toSelect"))].join(", ");return o().createElement(S.$Z,{key:t.name,label:a,hideLabel:e.themes.length===1,selected:i,disabled:e.name!==c,onClick:function(){return n(e.name,t.name)},themeSVG:t.thumbnail,ariaLabel:s,automationId:"theme-select-item-"+t.name})})))})))}))},542364:(e,t,r)=>{r.d(t,{t:()=>f,$:()=>useTranslation,k:()=>h});var n=r(858036);var o=r(960992);var a=r.n(o);var i=r(862926);var c=r.n(i);var u=r(14862);var s=r.n(u);var l="THEME";if(Object.keys(a()).length){n.ZP.addResource(a(),l)}var f=n.ZP.getFixedT(null,l);var useTranslation=function(e){return(0,u.useTranslation)(l,e)};var h=i.ModuleLogger.getLogger("["+l+"][COMMON][UI]",(function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return e}),i.EVENT_DATA_FEATURE.COMMON)},544416:(e,t,r)=>{r.d(t,{S:()=>C});var n=r(347086);var o=r(542364);var a=r(325719);var i=r.n(a);var c=r(441351);var u=r(379269);var s=r(758097);var l=r(461197);var f=r(667489);var h=r.n(f);var d=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var p=undefined&&undefined.__decorate||function(e,t,r,n){var o=arguments.length,a=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,i;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")a=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)if(i=e[c])a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a;return o>3&&a&&Object.defineProperty(t,r,a),a};var v=undefined&&undefined.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};var y=undefined&&undefined.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){o(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};var g=undefined&&undefined.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,i;return i={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(i[Symbol.iterator]=function(){return this}),i;function verb(e){return function(t){return step([e,t])}}function step(i){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,o&&(a=i[0]&2?o["return"]:i[0]?o["throw"]||((a=o["return"])&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;if(o=0,a)i=[i[0]&2,a.value];switch(i[0]){case 0:case 1:a=i;break;case 4:r.label++;return{value:i[1],done:false};case 5:r.label++;o=i[1];i=[0];continue;case 7:i=r.ops.pop();r.trys.pop();continue;default:if(!(a=r.trys,a=a.length>0&&a[a.length-1])&&(i[0]===6||i[0]===2)){r=0;continue}if(i[0]===3&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(i[0]===6&&r.label<a[1]){r.label=a[1];a=i;break}if(a&&r.label<a[2]){r.label=a[2];r.ops.push(i);break}if(a[2])r.ops.pop();r.trys.pop();continue}i=t.call(e,r)}catch(e){i=[6,e];o=0}finally{n=a=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:true}}};var m=o.k.tags("[PhoenixThemeController]");var b=function(e){d(PhoenixThemeController,e);function PhoenixThemeController(){var t=e!==null&&e.apply(this,arguments)||this;t._isPhoenixUser=false;t.supportPhoenixTheme=c.TQ.get("supportPhoenixTheme");t.init=function(){m.log("init");if(t.supportPhoenixTheme){t._getIsPhoenixUser();f.notificationCenter.on(s.FY.PHOENIX_ACCOUNT_UPGRADE,t._queryIsPhoenixUserWhenAccountUpgrade)}};t.dispose=function(){if(t.supportPhoenixTheme){f.notificationCenter.off(s.FY.PHOENIX_ACCOUNT_UPGRADE,t._queryIsPhoenixUserWhenAccountUpgrade)}};t._getIsPhoenixUser=function(){return y(t,void 0,void 0,(function(){var e;return g(this,(function(t){switch(t.label){case 0:if(!this._rcInfoModule)return[3,2];e=this;return[4,this._rcInfoModule.isPhoenixUser()];case 1:e._isPhoenixUser=t.sent();m.log("isPhoenixUser: ",this._isPhoenixUser);t.label=2;case 2:return[2]}}))}))};t._queryIsPhoenixUserWhenAccountUpgrade=function(){m.log("query isPhoenixUser again when receive account upgrade event");t._getIsPhoenixUser()};return t}Object.defineProperty(PhoenixThemeController.prototype,"enablePhoenixTheme",{get:function(){return this.supportPhoenixTheme&&this._isPhoenixUser},enumerable:true,configurable:true});Object.defineProperty(PhoenixThemeController.prototype,"_rcInfoModule",{get:function(){return(0,l.getModule)(u.oF)},enumerable:true,configurable:true});p([a.observable,v("design:type",Boolean)],PhoenixThemeController.prototype,"_isPhoenixUser",void 0);p([a.computed,v("design:type",Object),v("design:paramtypes",[])],PhoenixThemeController.prototype,"enablePhoenixTheme",null);p([a.action,v("design:type",Object)],PhoenixThemeController.prototype,"_getIsPhoenixUser",void 0);return PhoenixThemeController}(n.Q);var C=new b},462466:(e,t,r)=>{r.d(t,{F:()=>U});var n=r(347086);var o=r(417799);var a=r(255368);var i=r(696206);var c=r(182843);var u=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var s=function(e){u(SyncWithOSThemeSettingItemProvider,e);function SyncWithOSThemeSettingItemProvider(){return e.call(this,{id:a.rA.SYNC_WITH_OS_THEME_SETTING,value:{type:i.Pe.STORAGE,defaultValue:true},source:{type:i.Pe.CONSTANT,defaultValue:[true,false]}})||this}SyncWithOSThemeSettingItemProvider.prototype.buildStateProvider=function(){return this.buildBaseItemValueProvider({getter:c.Fd})};return SyncWithOSThemeSettingItemProvider}(i.BaseSettingItemProvider);var l=r(667489);var f=r(542364);var h=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var d=undefined&&undefined.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){o(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};var p=undefined&&undefined.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,i;return i={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(i[Symbol.iterator]=function(){return this}),i;function verb(e){return function(t){return step([e,t])}}function step(i){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,o&&(a=i[0]&2?o["return"]:i[0]?o["throw"]||((a=o["return"])&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;if(o=0,a)i=[i[0]&2,a.value];switch(i[0]){case 0:case 1:a=i;break;case 4:r.label++;return{value:i[1],done:false};case 5:r.label++;o=i[1];i=[0];continue;case 7:i=r.ops.pop();r.trys.pop();continue;default:if(!(a=r.trys,a=a.length>0&&a[a.length-1])&&(i[0]===6||i[0]===2)){r=0;continue}if(i[0]===3&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(i[0]===6&&r.label<a[1]){r.label=a[1];a=i;break}if(a&&r.label<a[2]){r.label=a[2];r.ops.push(i);break}if(a[2])r.ops.pop();r.trys.pop();continue}i=t.call(e,r)}catch(e){i=[6,e];o=0}finally{n=a=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:true}}};var v=f.k.tags("[ThemeSettingItemProvider]");var y=function(e){h(ThemeSettingItemProvider,e);function ThemeSettingItemProvider(){return e.call(this,{id:a.rA.THEME_SETTING,value:{type:i.Pe.STORAGE,defaultValue:a.w2.LIGHT},source:{type:i.Pe.CONSTANT,defaultValue:[a.w2.LIGHT,a.w2.DARK,a.w2.HIGH_CONTRAST]}})||this}ThemeSettingItemProvider.prototype.buildStateProvider=function(){var e=this;return this.buildBaseItemValueProvider({getter:function(){return d(e,void 0,void 0,(function(){var e,t;return p(this,(function(r){switch(r.label){case 0:e=(0,l.getModule)(i.oF);return[4,e.getSettingItemValue(a.rA.SYNC_WITH_OS_THEME_SETTING)];case 1:t=r.sent();v.info("syncSetting value",t);if(t){return[2,i.ESettingItemState.DISABLE]}return[2,i.ESettingItemState.ENABLE]}}))}))}})};ThemeSettingItemProvider.prototype.onLoad=function(){var e=this;var handleUpdate=function(){e.getStateProvider().notifyChange()};var t=(0,l.getModule)(i.oF);t.observeSettingChange(a.rA.SYNC_WITH_OS_THEME_SETTING,handleUpdate)};return ThemeSettingItemProvider}(i.BaseSettingItemProvider);var g=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var m=undefined&&undefined.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){o(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};var b=undefined&&undefined.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,i;return i={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(i[Symbol.iterator]=function(){return this}),i;function verb(e){return function(t){return step([e,t])}}function step(i){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,o&&(a=i[0]&2?o["return"]:i[0]?o["throw"]||((a=o["return"])&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;if(o=0,a)i=[i[0]&2,a.value];switch(i[0]){case 0:case 1:a=i;break;case 4:r.label++;return{value:i[1],done:false};case 5:r.label++;o=i[1];i=[0];continue;case 7:i=r.ops.pop();r.trys.pop();continue;default:if(!(a=r.trys,a=a.length>0&&a[a.length-1])&&(i[0]===6||i[0]===2)){r=0;continue}if(i[0]===3&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(i[0]===6&&r.label<a[1]){r.label=a[1];a=i;break}if(a&&r.label<a[2]){r.label=a[2];r.ops.push(i);break}if(a[2])r.ops.pop();r.trys.pop();continue}i=t.call(e,r)}catch(e){i=[6,e];o=0}finally{n=a=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:true}}};var C=f.k.tags("ThemeCategorySettingProvider");var _=function(e){g(ThemeCategorySettingProvider,e);function ThemeCategorySettingProvider(){var t=e.call(this,{id:a.rA.THEME_CATEGORY_SETTING,value:{type:i.Pe.STORAGE,defaultValue:a.qE},state:{type:i.Pe.CONSTANT,defaultValue:i.ESettingItemState.ENABLE}})||this;t._queryCanFollowSystem();return t}ThemeCategorySettingProvider.prototype.buildSourceProvider=function(){var e=this;return this.buildBaseItemValueProvider({getter:function(){return m(e,void 0,void 0,(function(){return b(this,(function(e){switch(e.label){case 0:return[4,this._queryCanFollowSystem()];case 1:return[2,[e.sent()?a.gi.FOLLOW_SYSTEM:undefined,a.w2.LIGHT,a.w2.DARK,a.w2.HIGH_CONTRAST].filter((function(e){return!!e}))]}}))}))}})};ThemeCategorySettingProvider.prototype._queryCanFollowSystem=function(){return m(this,void 0,void 0,(function(){var e;return b(this,(function(t){switch(t.label){case 0:return[4,(0,c.Fd)()];case 1:e=t.sent()===i.ESettingItemState.ENABLE;C.info("support follow system:",e);return[2,e]}}))}))};return ThemeCategorySettingProvider}(i.BaseSettingItemProvider);var S=r(477294);var w=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var T=undefined&&undefined.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){o(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};var E=undefined&&undefined.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,i;return i={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(i[Symbol.iterator]=function(){return this}),i;function verb(e){return function(t){return step([e,t])}}function step(i){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,o&&(a=i[0]&2?o["return"]:i[0]?o["throw"]||((a=o["return"])&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;if(o=0,a)i=[i[0]&2,a.value];switch(i[0]){case 0:case 1:a=i;break;case 4:r.label++;return{value:i[1],done:false};case 5:r.label++;o=i[1];i=[0];continue;case 7:i=r.ops.pop();r.trys.pop();continue;default:if(!(a=r.trys,a=a.length>0&&a[a.length-1])&&(i[0]===6||i[0]===2)){r=0;continue}if(i[0]===3&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(i[0]===6&&r.label<a[1]){r.label=a[1];a=i;break}if(a&&r.label<a[2]){r.label=a[2];r.ops.push(i);break}if(a[2])r.ops.pop();r.trys.pop();continue}i=t.call(e,r)}catch(e){i=[6,e];o=0}finally{n=a=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:true}}};var P=function(e){w(ThemeItemSettingProvider,e);function ThemeItemSettingProvider(){return e.call(this,{id:a.rA.THEME_ITEM_SETTING,value:{type:i.Pe.STORAGE},state:{type:i.Pe.CONSTANT,defaultValue:i.ESettingItemState.ENABLE}})||this}ThemeItemSettingProvider.prototype.buildValueProvider=function(){var t=this;var r=e.prototype.buildValueProvider.call(this);if(!r)return;return this.buildBaseItemValueProvider({getter:function(){return T(t,void 0,void 0,(function(){var e;return E(this,(function(t){switch(t.label){case 0:return[4,r.getter()];case 1:e=t.sent();return[2,e&&(0,S.y)(e)?(0,S.t)(e):e]}}))}))},setter:r.setter.bind(r)})};return ThemeItemSettingProvider}(i.BaseSettingItemProvider);var I=r(187933);var N=r(947860);var M=r(943072);var O=r(750977);var A=r(3320);var B=r(534116);var x=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var R=undefined&&undefined.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){o(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};var k=undefined&&undefined.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,i;return i={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(i[Symbol.iterator]=function(){return this}),i;function verb(e){return function(t){return step([e,t])}}function step(i){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,o&&(a=i[0]&2?o["return"]:i[0]?o["throw"]||((a=o["return"])&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;if(o=0,a)i=[i[0]&2,a.value];switch(i[0]){case 0:case 1:a=i;break;case 4:r.label++;return{value:i[1],done:false};case 5:r.label++;o=i[1];i=[0];continue;case 7:i=r.ops.pop();r.trys.pop();continue;default:if(!(a=r.trys,a=a.length>0&&a[a.length-1])&&(i[0]===6||i[0]===2)){r=0;continue}if(i[0]===3&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(i[0]===6&&r.label<a[1]){r.label=a[1];a=i;break}if(a&&r.label<a[2]){r.label=a[2];r.ops.push(i);break}if(a[2])r.ops.pop();r.trys.pop();continue}i=t.call(e,r)}catch(e){i=[6,e];o=0}finally{n=a=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:true}}};var j=undefined&&undefined.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,a=[],i;try{while((t===void 0||t-- >0)&&!(o=n.next()).done)a.push(o.value)}catch(e){i={error:e}}finally{try{if(o&&!o.done&&(r=n["return"]))r.call(n)}finally{if(i)throw i.error}}return a};var L=f.k.tags("[ThemeSettingController]");var V="THEME_SETTING_PAGE";var D=function(e){x(ThemeSettingController,e);function ThemeSettingController(){var t=e!==null&&e.apply(this,arguments)||this;t._scope=Symbol("ThemeSettingController");t._settingsManager=o.ZP;t._themeController=B.C;t.init=function(){L.info("init");t._registerSettingProvider();t._registerSettingPage();t._registerThemeCategorySetting();t._registerThemeItemSetting()};t._registerSettingProvider=function(){return R(t,void 0,void 0,(function(){var e;return k(this,(function(t){switch(t.label){case 0:L.info("_registerSettingProvider");return[4,(0,l.getModule)(I.oF)];case 1:e=t.sent();e.register(new s);e.register(new y);e.register(new _);e.register(new P);return[2]}}))}))};t._registerSettingPage=function(){t._settingsManager.registerPage(t._scope,{id:V,automationId:"theme",icon:A.Z,title:(0,f.t)("setting.tab"),path:"/theme",weight:100,sections:[{id:a.X5,automationId:"themeGeneral",title:(0,f.t)("setting.header"),weight:0,items:[]}]})};t._registerThemeItemSetting=function(){t._settingsManager.registerItem(t._scope,a.X5,{id:a.rA.THEME_ITEM_SETTING,type:N.N,weight:200,automationId:"themeSetting"})};t._themeCategorySettingBeforeSaving=function(e){var r=o.ZP.getSettingByID(a.rA.THEME_CATEGORY_SETTING).value;if(e===r)return;if([e,r].includes(a.gi.FOLLOW_SYSTEM)){(0,O.B2)(e===a.gi.FOLLOW_SYSTEM?"on":"off")}var n=j([e,r].map((function(e){return e===a.gi.FOLLOW_SYSTEM?t._themeController.systemThemeCategory:e})),2),i=n[0],c=n[1];var u=o.ZP.getSettingByID(a.rA.THEME_ITEM_SETTING).value;if(u&&i&&c){var s=u[i];var l=u[c];if(s!==l)(0,O.zY)(s)}};t._registerThemeCategorySetting=function(){t._settingsManager.registerItem(t._scope,a.X5,{id:a.rA.THEME_CATEGORY_SETTING,title:(0,f.t)("setting.selectCategory.title"),description:(0,f.t)("setting.selectCategory.description"),type:o.SETTING_ITEM_TYPE.SELECT,sourceRenderer:M.R,beforeSaving:t._themeCategorySettingBeforeSaving,weight:100,automationId:"themeCategorySetting"})};return t}return ThemeSettingController}(n.Q);var U=new D},750977:(e,t,r)=>{r.d(t,{B2:()=>trackSyncWithOSTheme,zY:()=>trackThemeUpdate});var n=r(255368);var o=r(244823);var a=r(542364);var i=r(968006);var c=r(608139);var u=r.n(c);var s=a.k.tags("dataTracking helper");var l={rcJupiterBlue:"skyBlue",rcBlue:"lakeBlue",rcPhoenix:"eggplantPurple",rcDark:"dark",rcHighContrast:"highContrast"};var f="Jup_Web/DT_settings_updateSetting";function dataTrackTransformThemeItem(e){if(l[e])return l[e];if((0,o.uh)(e)===n.w2.LIGHT)return"light";s.warn("unrecognized theme name:",e);return e}function trackSyncWithOSTheme(e){i.s6.track(f,{option:e,name:"syncWithOSTheme",type:"appSettings"})}function trackThemeUpdate(e){var t;var r;try{r=(t=u().parse(window.location.search,{ignoreQueryPrefix:true}))===null||t===void 0?void 0:t.source}catch(e){r=undefined}i.s6.track(f,{option:dataTrackTransformThemeItem(e),name:"themeUpdate",type:"appSettings",source:r})}},182843:(e,t,r)=>{r.d(t,{h1:()=>watchMediaListenerWrapper,Fd:()=>getFollowSystemSettingVisibility,jG:()=>createTheme,qE:()=>_,jE:()=>getDefaultThemeNameFromCategory,Pq:()=>getThemesOfCategory,EI:()=>S,Lc:()=>sortCategoryByDisplayOrder});var n=r(696206);var o=r(976832);var a=r.n(o);var i=r(255368);var c=r(594173);var u=r(957685);var s=r(542364);var l=r(669211);var f=r.n(l);var h=r(104849);var d=r(441351);var p=r(796036);var v=undefined&&undefined.__assign||function(){v=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o))e[o]=t[o]}return e};return v.apply(this,arguments)};var y=undefined&&undefined.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){o(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};var g=undefined&&undefined.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,i;return i={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(i[Symbol.iterator]=function(){return this}),i;function verb(e){return function(t){return step([e,t])}}function step(i){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,o&&(a=i[0]&2?o["return"]:i[0]?o["throw"]||((a=o["return"])&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;if(o=0,a)i=[i[0]&2,a.value];switch(i[0]){case 0:case 1:a=i;break;case 4:r.label++;return{value:i[1],done:false};case 5:r.label++;o=i[1];i=[0];continue;case 7:i=r.ops.pop();r.trys.pop();continue;default:if(!(a=r.trys,a=a.length>0&&a[a.length-1])&&(i[0]===6||i[0]===2)){r=0;continue}if(i[0]===3&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(i[0]===6&&r.label<a[1]){r.label=a[1];a=i;break}if(a&&r.label<a[2]){r.label=a[2];r.ops.push(i);break}if(a[2])r.ops.pop();r.trys.pop();continue}i=t.call(e,r)}catch(e){i=[6,e];o=0}finally{n=a=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:true}}};var m=undefined&&undefined.__values||function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var b=undefined&&undefined.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,a=[],i;try{while((t===void 0||t-- >0)&&!(o=n.next()).done)a.push(o.value)}catch(e){i={error:e}}finally{try{if(o&&!o.done&&(r=n["return"]))r.call(n)}finally{if(i)throw i.error}}return a};var C="change";function getThemeCategories(){return d.TQ.get("themeCategories")}var isSupportMediaMatch=function(e){if(typeof window.matchMedia!=="function"){return false}var t=window.matchMedia(e).media;if(t!==e){return false}return true};var watchMediaListenerWrapper=function(e,t){if(e.addEventListener){e.addEventListener(C,t);return function(){return e.removeEventListener(C,t)}}if(e.addListener){e.addListener(t);return function(){return e.removeListener(t)}}return undefined};var getFollowSystemSettingVisibility=function(){return y(void 0,void 0,void 0,(function(){var e,t,r,o;return g(this,(function(a){switch(a.label){case 0:if(!c.d)return[3,2];return[4,p.M$.ipcInvoke({event:i._r})];case 1:e=a.sent(),t=e.res,r=e.code;s.k.info("queryIsOsSupportDarkMode code: "+r+", res: "+t);return[2,r===u.ResponseCode.Success&&t?n.ESettingItemState.ENABLE:n.ESettingItemState.INVISIBLE];case 2:o=isSupportMediaMatch(i.E1);return[2,o?n.ESettingItemState.ENABLE:n.ESettingItemState.INVISIBLE]}}))}))};var createTheme=function(e){var t=e.themeCategory,r=e.themeName,n=e.isMobile,o=e.useDefault;var createThemeByConfig=function(e){e.themeName=r;e.themeCategory=t;e.props=typeof e.props==="object"?e.props:{};e.props=v(v({},e.props),S.props);(0,h.q)(e);return(0,l.createTheme)(e)};var createTheme=function(e){var t=d.VO.get(e,n,o);if(t instanceof Promise){return t.then(createThemeByConfig)}return createThemeByConfig(t)};return createTheme(r)};var getThemeMap=function(){return y(void 0,void 0,void 0,(function(){var e,t,r,n,o,a,i,c,u,s,l,f,h,d;var p,v,y,b;return g(this,(function(g){switch(g.label){case 0:e=[];t=[];r={};n=getThemeCategories();o=Object.keys(n);try{for(a=m(o),i=a.next();!i.done;i=a.next()){c=i.value;u=n[c].themes;try{for(s=(y=void 0,m(u)),l=s.next();!l.done;l=s.next()){f=l.value;h=createTheme({themeCategory:c,themeName:f});t.push(f);e.push(h)}}catch(e){y={error:e}}finally{try{if(l&&!l.done&&(b=s.return))b.call(s)}finally{if(y)throw y.error}}}}catch(e){p={error:e}}finally{try{if(i&&!i.done&&(v=a.return))v.call(a)}finally{if(p)throw p.error}}return[4,Promise.all(e)];case 1:d=g.sent();t.forEach((function(e,t){r[e]=d[t]}));return[2,r]}}))}))};var _=(0,o.promisedComputed)(undefined,(function(){return y(void 0,void 0,Promise,(function(){var e;return g(this,(function(t){switch(t.label){case 0:e={};return[4,d.TQ.isReady.wait()];case 1:t.sent();return[4,getThemeMap()];case 2:e=t.sent();return[2,e]}}))}))}));var getDefaultThemeNameFromCategory=function(e){var t=e.themeCategory,r=e.isPhoenix;var n=getThemeCategories();var o=n[t];return r?o.defaultForPhoenix||o.default:o.default};var getThemesOfCategory=function(e){var t=getThemeCategories();return t[e].themes};var S={props:{MuiButtonBase:{disableTouchRipple:true},RcDownshift:{disabledItemsHighlightable:true}}};function sortCategoryByDisplayOrder(e,t){var r=[i.w2.LIGHT,i.w2.DARK,i.w2.HIGH_CONTRAST];var n=b([e,t].map((function(e){return r.indexOf(e)})),2),o=n[0],a=n[1];return o<a?-1:o>a?1:0}}}]);