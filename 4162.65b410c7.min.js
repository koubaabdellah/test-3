(this["webpackChunkapplication"]=this["webpackChunkapplication"]||[]).push([[4162],{368058:e=>{e.exports={"de-DE":{me:"mich",Ext:"Durchw.",groupExtensionDescription:{callQueue:"Anrufwarteschlange",shareLine:"Gemeinsam genutzte Leitung",announcementOnly:"Nur Ank\xfcndigung",messageOnly:"Nur Nachricht",limitedExtension:"Eingeschr\xe4nkte Durchwahl",pagingOnly:"Nur Paging"}},en:{me:"me",Ext:"Ext.",groupExtensionDescription:{callQueue:"Call queue",shareLine:"Shared line",announcementOnly:"Announcement only",messageOnly:"Message only",limitedExtension:"Limited extension",pagingOnly:"Paging only"}},"en-GB":{me:"me",Ext:"Ext.",groupExtensionDescription:{callQueue:"Call queue",shareLine:"Shared line",announcementOnly:"Announcement only",messageOnly:"Message only",limitedExtension:"Limited extension",pagingOnly:"Paging only"}},"es-419":{me:"yo",Ext:"Ext.",groupExtensionDescription:{callQueue:"Cola de llamadas",shareLine:"L\xednea compartida",announcementOnly:"Solo anuncio",messageOnly:"Solo mensaje",limitedExtension:"Extensi\xf3n limitada",pagingOnly:"Solo localizaci\xf3n"}},"es-ES":{me:"yo",Ext:"Ext.",groupExtensionDescription:{callQueue:"Cola de llamadas",shareLine:"L\xednea compartida",announcementOnly:"Solo anuncio",messageOnly:"Solo mensaje",limitedExtension:"Extensi\xf3n limitada",pagingOnly:"Solo por busca"}},"fi-FI":{me:"min\xe4",Ext:"Alanro",groupExtensionDescription:{callQueue:"Puhelujono",shareLine:"Jaettu linja",announcementOnly:"Vain ilmoitus",messageOnly:"Vain viesti",limitedExtension:"Rajoitettu alanumero",pagingOnly:"Vain hakeminen"}},"fr-CA":{me:"moi",Ext:"Poste",groupExtensionDescription:{callQueue:"File d\u2019attente",shareLine:"Ligne partag\xe9e",announcementOnly:"Annonce uniquement",messageOnly:"Messages uniquement",limitedExtension:"Poste limit\xe9",pagingOnly:"Annonce interne uniquement"}},"fr-FR":{me:"moi",Ext:"Ext.",groupExtensionDescription:{callQueue:"File d\u2019attente d\u2019appels",shareLine:"Ligne partag\xe9e",announcementOnly:"Annonce uniquement",messageOnly:"Message uniquement",limitedExtension:"Extension limit\xe9e",pagingOnly:"Diffusion d\u2019annonces uniquement"}},"it-IT":{me:"me",Ext:"Int.",groupExtensionDescription:{callQueue:"Coda chiamate",shareLine:"Linea condivisa",announcementOnly:"Solo annuncio",messageOnly:"Solo messaggio",limitedExtension:"Interno limitato",pagingOnly:"Solo paging"}},"ja-JP":{me:"\u81ea\u5206",Ext:"\u5185\u7dda",groupExtensionDescription:{callQueue:"\u901a\u8a71\u30ad\u30e5\u30fc",shareLine:"\u5171\u6709\u56de\u7dda",announcementOnly:"\u30a2\u30ca\u30a6\u30f3\u30b9\u306e\u307f",messageOnly:"\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u307f",limitedExtension:"\u5236\u9650\u4ed8\u304d\u306e\u5185\u7dda",pagingOnly:"\u30da\u30fc\u30b8\u30f3\u30b0\u306e\u307f"}},"ko-KR":{me:"\ub098",Ext:"\ub0b4\uc120",groupExtensionDescription:{callQueue:"\ud1b5\ud654 \ud050",shareLine:"\uacf5\uc720 \ud68c\uc120",announcementOnly:"\uc54c\ub9bc\ub9cc",messageOnly:"\uba54\uc2dc\uc9c0\ub9cc",limitedExtension:"\uc81c\ud55c\ub41c \ub0b4\uc120",pagingOnly:"\ud398\uc774\uc9d5\ub9cc"}},"nl-NL":{me:"ik",Ext:"Ext.",groupExtensionDescription:{callQueue:"Oproepwachtrij",shareLine:"Gemeenschappelijke lijn",announcementOnly:"Alleen aankondiging",messageOnly:"Alleen bericht",limitedExtension:"Beperkte uitbreiding",pagingOnly:"Alleen oproepen"}},"pt-BR":{me:"eu",Ext:"Ramal",groupExtensionDescription:{callQueue:"Fila de chamadas",shareLine:"Linha compartilhada",announcementOnly:"Apenas comunicado",messageOnly:"Apenas mensagem",limitedExtension:"Ramal limitado",pagingOnly:"Apenas radiochamada"}},"pt-PT":{me:"eu",Ext:"Ext.",groupExtensionDescription:{callQueue:"Fila de chamadas",shareLine:"Linha partilhada",announcementOnly:"Apenas an\xfancio",messageOnly:"Apenas mensagem",limitedExtension:"Extens\xe3o limitada",pagingOnly:"Apenas aviso"}},"zh-CN":{me:"\u6211",Ext:"\u5206\u673a",groupExtensionDescription:{callQueue:"\u547c\u53eb\u961f\u5217",shareLine:"\u5171\u4eab\u7ebf\u8def",announcementOnly:"\u4ec5\u8bed\u97f3\u64ad\u62a5",messageOnly:"\u4ec5\u6d88\u606f",limitedExtension:"\u53d7\u9650\u5206\u673a",pagingOnly:"\u4ec5\u5bfb\u547c"}},"zh-TW":{me:"\u6211",Ext:"\u5206\u6a5f",groupExtensionDescription:{callQueue:"\u901a\u8a71\u4f47\u5217",shareLine:"\u5171\u7528\u7dda\u8def",announcementOnly:"\u50c5\u9650\u8a9e\u97f3\u64ad\u5831",messageOnly:"\u50c5\u9650\u8a0a\u606f",limitedExtension:"\u53d7\u9650\u5206\u6a5f",pagingOnly:"\u50c5\u9650\u547c\u53eb"}}}},338579:(e,t,n)=>{"use strict";n.d(t,{p:()=>waitIfNotCurrentModule});var r=n(586905);var o=n(957685);var i=n(168825);var a=undefined&&undefined.__awaiter||function(e,t,n,r){function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(e){try{step(r.next(e))}catch(e){o(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){o(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())}))};var u=undefined&&undefined.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,a;return a={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function verb(e){return function(t){return step([e,t])}}function step(a){if(r)throw new TypeError("Generator is already executing.");while(n)try{if(r=1,o&&(i=a[0]&2?o["return"]:a[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;if(o=0,i)a=[a[0]&2,i.value];switch(a[0]){case 0:case 1:i=a;break;case 4:n.label++;return{value:a[1],done:false};case 5:n.label++;o=a[1];a=[0];continue;case 7:a=n.ops.pop();n.trys.pop();continue;default:if(!(i=n.trys,i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){n.label=a[1];break}if(a[0]===6&&n.label<i[1]){n.label=i[1];i=a;break}if(i&&n.label<i[2]){n.label=i[2];n.ops.push(a);break}if(i[2])n.ops.pop();n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e];o=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var waitIfNotCurrentModule=function(e){return a(void 0,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:t=(0,r.lu)(e);if(!!r.m8.location.pathname.includes(t))return[3,2];return[4,i.Sx.when(o.AppLifecyclePhase.Restored)];case 1:n.sent();n.label=2;case 2:return[2]}}))}))}},386561:(e,t,n)=>{"use strict";n.d(t,{FY:()=>i.FY,oF:()=>i.oF});var r=n(905339);var o=n(822896);var i=n(934316);var a=n(9461)},172867:(e,t,n)=>{"use strict";n.d(t,{H:()=>De});var r=n(168825);var o=n(325719);var i=n(862926);var a=n(858036);var u="@contact_ui/rc_contact";var s=n(368058);var c=n.n(s);if(Object.keys(c()).length){a.ZP.addResource(c(),u)}var p=a.ZP.getFixedT(null,u);function getLogger(e){return i.ModuleLogger.getLogger("["+e+"][COMMON][UI]",(function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return e}),i.EVENT_DATA_FEATURE.COMMON)}var l=getLogger(u);var d=n(981210);var f=n(587040);var y=n(963786);var E=n(827027);var _=n(654588);var g=n(461197);var b=n(967532);var h=n(528575);var C=n(937807);var m=n(386561);var P=n(397672);var v=n(667489);var O=n(374686);var R=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var N=undefined&&undefined.__decorate||function(e,t,n,r){var o=arguments.length,i=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")i=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)if(a=e[u])i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i;return o>3&&i&&Object.defineProperty(t,n,i),i};var S=undefined&&undefined.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};var T=function(e){R(RCContactModel,e);function RCContactModel(t){var n=e.call(this,t)||this;n.status=t.status;n.email=t.email||"";n.jobTitle=t.jobTitle;n.account=t.account;n.name=t.name;n.firstName=t.firstName;n.lastName=t.lastName;n.phoneNumbers=t.phoneNumbers;n.extensionNumber=t.extensionNumber;n.profileImage=t.profileImage;n.site=t.site;n.department=t.department||"";n.hidden=t.hidden;(0,o.reaction)((function(){return n.profileImage}),(function(e){e&&f.x0.buildDownloadUrl(e.uri).then((function(t){return n.avatarUrl=t+"&etag="+e.etag}))}),{fireImmediately:true});return n}Object.defineProperty(RCContactModel.prototype,"accountId",{get:function(){return this.account&&this.account.id},enumerable:true,configurable:true});Object.defineProperty(RCContactModel.prototype,"isActivated",{get:function(){return this.status==="Enabled"},enumerable:true,configurable:true});Object.defineProperty(RCContactModel.prototype,"shortName",{get:function(){return(0,d.VQ)(this.userDisplayName,this.email)},enumerable:true,configurable:true});Object.defineProperty(RCContactModel.prototype,"userDisplayName",{get:function(){if(this.name&&this.name.trim().length>0){return this.name}return[this.firstName,this.lastName].filter((function(e){return Boolean(e)})).join(" ")},enumerable:true,configurable:true});Object.defineProperty(RCContactModel.prototype,"allPhoneNumbers",{get:function(){return(0,v.getModule)(m.oF).getAllPhoneNumbers(this.phoneNumbers||[],this.canShowExtensionNumber?this.extensionNumber:"").map((function(e){return{phoneNumber:e.phoneNumber,usageType:e.usageType,hidden:e.hidden}}))},enumerable:true,configurable:true});Object.defineProperty(RCContactModel.prototype,"isSameAccount",{get:function(){var e;var t=(e=(0,f.gT)().userConfig)===null||e===void 0?void 0:e.getAccountId();return this.accountId===t.toString()},enumerable:true,configurable:true});Object.defineProperty(RCContactModel.prototype,"canShowExtensionNumber",{get:function(){var e=r.ZP.get(r.MG.ENTITLEMENT);var t=e[O.fi.TELEPHONY];return t.extensionNumberAvailable},enumerable:true,configurable:true});Object.defineProperty(RCContactModel.prototype,"isHidden",{get:function(){return this.hidden},enumerable:true,configurable:true});N([o.observable,S("design:type",String)],RCContactModel.prototype,"status",void 0);N([o.observable,S("design:type",String)],RCContactModel.prototype,"email",void 0);N([o.observable,S("design:type",String)],RCContactModel.prototype,"jobTitle",void 0);N([o.observable,S("design:type",Object)],RCContactModel.prototype,"account",void 0);N([o.observable,S("design:type",String)],RCContactModel.prototype,"name",void 0);N([o.observable,S("design:type",String)],RCContactModel.prototype,"firstName",void 0);N([o.observable,S("design:type",String)],RCContactModel.prototype,"lastName",void 0);N([o.observable,S("design:type",Array)],RCContactModel.prototype,"phoneNumbers",void 0);N([o.observable,S("design:type",String)],RCContactModel.prototype,"extensionNumber",void 0);N([o.observable,S("design:type",String)],RCContactModel.prototype,"department",void 0);N([o.observable,S("design:type",Object)],RCContactModel.prototype,"profileImage",void 0);N([o.observable,S("design:type",Object)],RCContactModel.prototype,"site",void 0);N([o.observable,S("design:type",String)],RCContactModel.prototype,"avatarUrl",void 0);N([o.observable,S("design:type",Boolean)],RCContactModel.prototype,"hidden",void 0);N([o.computed,S("design:type",Object),S("design:paramtypes",[])],RCContactModel.prototype,"accountId",null);N([o.computed,S("design:type",Object),S("design:paramtypes",[])],RCContactModel.prototype,"isActivated",null);N([o.computed,S("design:type",Object),S("design:paramtypes",[])],RCContactModel.prototype,"shortName",null);N([o.computed,S("design:type",Object),S("design:paramtypes",[])],RCContactModel.prototype,"userDisplayName",null);N([o.computed,S("design:type",Array),S("design:paramtypes",[])],RCContactModel.prototype,"allPhoneNumbers",null);N([o.computed,S("design:type",Object),S("design:paramtypes",[])],RCContactModel.prototype,"isSameAccount",null);N([o.computed,S("design:type",Object),S("design:paramtypes",[])],RCContactModel.prototype,"canShowExtensionNumber",null);N([o.computed,S("design:type",Object),S("design:paramtypes",[])],RCContactModel.prototype,"isHidden",null);return RCContactModel}(C.BaseModel);const I=T;var x=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var A=undefined&&undefined.__decorate||function(e,t,n,r){var o=arguments.length,i=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")i=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)if(a=e[u])i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i;return o>3&&i&&Object.defineProperty(t,n,i),i};var j=undefined&&undefined.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};var M=function(e){x(GroupExtensionContactModel,e);function GroupExtensionContactModel(t){var n=e.call(this,t)||this;n.status=t.status;n.email=t.email||"";n.account=t.account;n.name=t.name;n.phoneNumbers=t.phoneNumbers;n.extensionNumber=t.extensionNumber;n.site=t.site;n.phoneNumbers=t.phoneNumbers;n.type=t.type;return n}Object.defineProperty(GroupExtensionContactModel.prototype,"accountId",{get:function(){return this.account&&this.account.id},enumerable:true,configurable:true});Object.defineProperty(GroupExtensionContactModel.prototype,"deactivated",{get:function(){return this.status!=="Enabled"},enumerable:true,configurable:true});Object.defineProperty(GroupExtensionContactModel.prototype,"shortName",{get:function(){return(0,d.VQ)(this.name,this.email)},enumerable:true,configurable:true});var t;A([o.observable,j("design:type",String)],GroupExtensionContactModel.prototype,"status",void 0);A([o.observable,j("design:type",String)],GroupExtensionContactModel.prototype,"email",void 0);A([o.observable,j("design:type",Object)],GroupExtensionContactModel.prototype,"account",void 0);A([o.observable,j("design:type",String)],GroupExtensionContactModel.prototype,"name",void 0);A([o.observable,j("design:type",Array)],GroupExtensionContactModel.prototype,"phoneNumbers",void 0);A([o.observable,j("design:type",String)],GroupExtensionContactModel.prototype,"extensionNumber",void 0);A([o.observable,j("design:type",typeof(t=typeof E.RC_EXTENSION_TYPES!=="undefined"&&E.RC_EXTENSION_TYPES)==="function"?t:Object)],GroupExtensionContactModel.prototype,"type",void 0);A([o.observable,j("design:type",Object)],GroupExtensionContactModel.prototype,"site",void 0);A([o.computed,j("design:type",Object),j("design:paramtypes",[])],GroupExtensionContactModel.prototype,"accountId",null);A([o.computed,j("design:type",Object),j("design:paramtypes",[])],GroupExtensionContactModel.prototype,"deactivated",null);A([o.computed,j("design:type",Object),j("design:paramtypes",[])],GroupExtensionContactModel.prototype,"shortName",null);return GroupExtensionContactModel}(C.BaseModel);const D=M;var w=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var U=undefined&&undefined.__decorate||function(e,t,n,r){var o=arguments.length,i=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")i=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)if(a=e[u])i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i;return o>3&&i&&Object.defineProperty(t,n,i),i};var G=undefined&&undefined.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};var L=function(e){w(ExtensionIdContactModel,e);function ExtensionIdContactModel(t){var n=e.call(this,t)||this;n.matchedUnifiedContactId=t.matchedUnifiedContactId;return n}ExtensionIdContactModel.fromJS=function(e){return new ExtensionIdContactModel(e)};Object.defineProperty(ExtensionIdContactModel.prototype,"uniqueId",{get:function(){return this.matchedUnifiedContactId},enumerable:true,configurable:true});U([o.observable,G("design:type",String)],ExtensionIdContactModel.prototype,"matchedUnifiedContactId",void 0);U([o.computed,G("design:type",Object),G("design:paramtypes",[])],ExtensionIdContactModel.prototype,"uniqueId",null);return ExtensionIdContactModel}(C.Base);var F=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var Y=undefined&&undefined.__decorate||function(e,t,n,r){var o=arguments.length,i=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")i=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)if(a=e[u])i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i;return o>3&&i&&Object.defineProperty(t,n,i),i};var k=undefined&&undefined.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};var H=function(e){F(RCPresenceModel,e);function RCPresenceModel(t){var n=e.call(this,t)||this;var r=t.dndStatus,o=t.presenceStatus,i=t.telephonyStatus,a=t.meetingStatus;n.dndStatus=r;n.presenceStatus=o;n.telephonyStatus=i;n.meetingStatus=a;return n}RCPresenceModel.prototype.isDND=function(){return this.presence===d.UNIFIED_PRESENCE_STATUS.DND};Object.defineProperty(RCPresenceModel.prototype,"presence",{get:function(){if(E.DND_STATUS.DoNotAcceptAnyCalls===this.dndStatus){return d.UNIFIED_PRESENCE_STATUS.DND}if(E.PRESENCE_STATUS.Offline===this.presenceStatus){return d.UNIFIED_PRESENCE_STATUS.UNAVAILABLE}if(E.TELEPHONY_STATUS.NoCall!==this.telephonyStatus&&!!this.telephonyStatus){return d.UNIFIED_PRESENCE_STATUS.ONCALL}if(E.PRESENCE_MEETING_STATUS.Connected===this.meetingStatus){return d.UNIFIED_PRESENCE_STATUS.INMEETING}if(E.PRESENCE_STATUS.Busy===this.presenceStatus){return d.UNIFIED_PRESENCE_STATUS.BUSY}if(E.PRESENCE_STATUS.Available===this.presenceStatus){return d.UNIFIED_PRESENCE_STATUS.AVAILABLE}return d.UNIFIED_PRESENCE_STATUS.NOTREADY},enumerable:true,configurable:true});RCPresenceModel.prototype.reset=function(){this.dndStatus=undefined;this.presenceStatus=undefined;this.meetingStatus=undefined;this.telephonyStatus=undefined;this.isMocked=true};RCPresenceModel.fromJS=function(e){return new RCPresenceModel(e)};var t,n,r,i,a;Y([o.observable,k("design:type",typeof(t=typeof E.DND_STATUS!=="undefined"&&E.DND_STATUS)==="function"?t:Object)],RCPresenceModel.prototype,"dndStatus",void 0);Y([o.observable,k("design:type",typeof(n=typeof E.PRESENCE_STATUS!=="undefined"&&E.PRESENCE_STATUS)==="function"?n:Object)],RCPresenceModel.prototype,"presenceStatus",void 0);Y([o.observable,k("design:type",typeof(r=typeof E.TELEPHONY_STATUS!=="undefined"&&E.TELEPHONY_STATUS)==="function"?r:Object)],RCPresenceModel.prototype,"telephonyStatus",void 0);Y([o.observable,k("design:type",typeof(i=typeof E.PRESENCE_MEETING_STATUS!=="undefined"&&E.PRESENCE_MEETING_STATUS)==="function"?i:Object)],RCPresenceModel.prototype,"meetingStatus",void 0);Y([o.computed,k("design:type",typeof(a=typeof d.UNIFIED_PRESENCE_STATUS!=="undefined"&&d.UNIFIED_PRESENCE_STATUS)==="function"?a:Object),k("design:paramtypes",[])],RCPresenceModel.prototype,"presence",null);Y([o.action,k("design:type",Function),k("design:paramtypes",[]),k("design:returntype",void 0)],RCPresenceModel.prototype,"reset",null);return RCPresenceModel}(C.BaseModel);const q=H;var B=n(840009);var V=undefined&&undefined.__awaiter||function(e,t,n,r){function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(e){try{step(r.next(e))}catch(e){o(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){o(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())}))};var X=undefined&&undefined.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,a;return a={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function verb(e){return function(t){return step([e,t])}}function step(a){if(r)throw new TypeError("Generator is already executing.");while(n)try{if(r=1,o&&(i=a[0]&2?o["return"]:a[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;if(o=0,i)a=[a[0]&2,i.value];switch(a[0]){case 0:case 1:i=a;break;case 4:n.label++;return{value:a[1],done:false};case 5:n.label++;o=a[1];a=[0];continue;case 7:a=n.ops.pop();n.trys.pop();continue;default:if(!(i=n.trys,i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){n.label=a[1];break}if(a[0]===6&&n.label<i[1]){n.label=i[1];i=a;break}if(i&&n.label<i[2]){n.label=i[2];n.ops.push(a);break}if(i[2])n.ops.pop();n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e];o=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var K;var W;(function(e){e["RC_CONTACT"]="RC_CONTACT";e["GROUP_EXTENSION"]="GROUP_EXTENSION";e["RC_PRESENCE"]="RC_PRESENCE";e["EXTENSION_ID_CONTACT"]="EXTENSION_ID_CONTACT"})(W||(W={}));var Q=300;const Z=(K={},K[W.RC_CONTACT]={event:[m.FY.ENTITY.RC_CONTACT],getService:function(){return{getById:function(e){return V(void 0,void 0,void 0,(function(){var t,n;return X(this,(function(r){switch(r.label){case 0:t=(0,g.getModule)(m.oF);if(!t)return[3,2];return[4,t.getService().getDataById(e)];case 1:n=r.sent();return[3,3];case 2:n=null;r.label=3;case 3:return[2,n]}}))}))},getSynchronously:function(e){var t=(0,g.getModule)(m.oF);return t?t.getService().getDataByIdSynchronously(e):null}}},type:C.HANDLER_TYPE.MULTI_MODEL,model:I},K[W.GROUP_EXTENSION]={event:[P.EVENT_KEY.ENTITY.GROUP_EXTENSION],getService:function(){return{getById:function(e){return V(void 0,void 0,void 0,(function(){var t,n;return X(this,(function(r){switch(r.label){case 0:t=(0,g.getModule)(P.GROUP_EXTENSION_MODULE);if(!t)return[3,2];return[4,t.getService().getDataById(e)];case 1:n=r.sent();return[3,3];case 2:n=null;r.label=3;case 3:return[2,n]}}))}))},getSynchronously:function(e){var t=(0,g.getModule)(P.GROUP_EXTENSION_MODULE);return t?t.getService().getDataByIdSynchronously(e):null}}},type:C.HANDLER_TYPE.MULTI_MODEL,model:D},K[W.RC_PRESENCE]={event:[h.FY.ENTITY.RC_PRESENCE],getService:function(){return{getById:function(e){var t=(0,g.getModule)(h.oF);return t&&t.getById(e)}}},storedUsedChangedObserver:{onBecomeObserved:function(e){var t=(0,g.getModule)(h.oF);t&&t.getById(e)},onBecomeUnobserved:function(e){var t=(0,g.getModule)(h.oF);t&&t.unsubscribe(e)}},type:C.HANDLER_TYPE.MULTI_MODEL,model:q,cacheCount:Q},K[W.EXTENSION_ID_CONTACT]={event:[B.ML.ENTITY.EXTENSION_ID_CONTACT],getService:function(){return{getById:function(e){return(0,g.getModule)(B.DN).getById(e)}}},storedUsedChangedObserver:{onBecomeObserved:function(e){(0,g.getModule)(B.DN).observeExtensionIdChange(e)},onBecomeUnobserved:function(e){var t;(t=(0,g.getModule)(B.DN))===null||t===void 0?void 0:t.unobserveExtensionIdChange(e)}},type:C.HANDLER_TYPE.MULTI_MODEL,model:L,cacheCount:Q},K);var J=new C.StoreManager(Z);var z=undefined&&undefined.__decorate||function(e,t,n,r){var o=arguments.length,i=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")i=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)if(a=e[u])i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i;return o>3&&i&&Object.defineProperty(t,n,i),i};var $=undefined&&undefined.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};var ee=undefined&&undefined.__awaiter||function(e,t,n,r){function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(e){try{step(r.next(e))}catch(e){o(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){o(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())}))};var te=undefined&&undefined.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,a;return a={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function verb(e){return function(t){return step([e,t])}}function step(a){if(r)throw new TypeError("Generator is already executing.");while(n)try{if(r=1,o&&(i=a[0]&2?o["return"]:a[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;if(o=0,i)a=[a[0]&2,i.value];switch(a[0]){case 0:case 1:i=a;break;case 4:n.label++;return{value:a[1],done:false};case 5:n.label++;o=a[1];a=[0];continue;case 7:a=n.ops.pop();n.trys.pop();continue;default:if(!(i=n.trys,i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){n.label=a[1];break}if(a[0]===6&&n.label<i[1]){n.label=i[1];i=a;break}if(i&&n.label<i[2]){n.label=i[2];n.ops.push(a);break}if(i[2])n.ops.pop();n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e];o=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var ne=function(){function RCPresenceProvider(){var e=this;this.getPresence=function(e){if(!e){return d.UNIFIED_PRESENCE_STATUS.NOTREADY}var t=J.get(W.RC_PRESENCE).get(Number(e)).presence;return t||d.UNIFIED_PRESENCE_STATUS.NOTREADY};this.setPresence=function(t){return ee(e,void 0,void 0,(function(){var e,n,o;return te(this,(function(i){switch(i.label){case 0:e={};n=r.ZP.get(r.MG.NETWORK);if(n==="offline"){throw new _.IO(_.dc.NOT_NETWORK,"NOT_NETWORK")}switch(t){case d.UNIFIED_PRESENCE_STATUS.AVAILABLE:e.userStatus=E.USER_STATUS.Available;break;case d.UNIFIED_PRESENCE_STATUS.UNAVAILABLE:e.userStatus=E.USER_STATUS.Offline;break;case d.UNIFIED_PRESENCE_STATUS.BUSY:e.userStatus=E.USER_STATUS.Busy;break;case d.UNIFIED_PRESENCE_STATUS.DND:e.dndStatus=E.DND_STATUS.DoNotAcceptAnyCalls;break;default:}if(!(e.dndStatus||e.userStatus))return[3,3];o=(0,g.getModule)(h.oF);if(!!o)return[3,1];l.info("Get RC_PRESENCE_MODULE failed");return[3,3];case 1:return[4,o.updateSelfPresence(e)];case 2:i.sent();i.label=3;case 3:return[2]}}))}))}}Object.defineProperty(RCPresenceProvider.prototype,"currentUserId",{get:function(){var e=y._Z.getCurrent();return e?e.getSubAccount(f.oF).userConfig.getExtensionId().toString():""},enumerable:true,configurable:true});z([o.computed,$("design:type",Object),$("design:paramtypes",[])],RCPresenceProvider.prototype,"currentUserId",null);z([o.action,$("design:type",Object)],RCPresenceProvider.prototype,"setPresence",void 0);return RCPresenceProvider}();var re=n(976832);var oe=n(831270);function currentUserId(){var e=y._Z.getCurrent();return e?e.getSubAccount(f.oF).userConfig.getExtensionId().toString():""}var ie=n(274251);var ae=n(70524);var ue=undefined&&undefined.__assign||function(){ue=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o))e[o]=t[o]}return e};return ue.apply(this,arguments)};var se=undefined&&undefined.__decorate||function(e,t,n,r){var o=arguments.length,i=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")i=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)if(a=e[u])i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i;return o>3&&i&&Object.defineProperty(t,n,i),i};var ce=undefined&&undefined.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};var pe=undefined&&undefined.__rest||function(e,t){var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0)n[r]=e[r];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++){if(t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o]))n[r[o]]=e[r[o]]}return n};var le=function(){function RCContactPresenter(e){var t=this;this.isRegistered=true;this.canRefreshHomepage=false;this.isPerson=true;this.presenterType=d.mH.TELEPHONY;this.nickName="";this.birthday="";this.companyName="";this.providerName="";this.notes="";this.isGuest=false;this.isDirectoryContact=false;this._fetchOffice=(0,re.promisedComputed)(undefined,(function(){return d.ContactPresenterHelper.fetchOffice(t.accountId)}));this._data=e}Object.defineProperty(RCContactPresenter.prototype,"id",{get:function(){return oe.ContactUtils.getUniqueId(m.oF,this._data.id)},enumerable:true,configurable:true});Object.defineProperty(RCContactPresenter.prototype,"accountId",{get:function(){return this._data.accountId},enumerable:true,configurable:true});Object.defineProperty(RCContactPresenter.prototype,"displayName",{get:function(){return this._data.userDisplayName},enumerable:true,configurable:true});Object.defineProperty(RCContactPresenter.prototype,"shortName",{get:function(){return this._data.shortName},enumerable:true,configurable:true});Object.defineProperty(RCContactPresenter.prototype,"firstName",{get:function(){return this._data.firstName},enumerable:true,configurable:true});Object.defineProperty(RCContactPresenter.prototype,"lastName",{get:function(){return this._data.lastName},enumerable:true,configurable:true});Object.defineProperty(RCContactPresenter.prototype,"phoneNumbers",{get:function(){return this._data.allPhoneNumbers},enumerable:true,configurable:true});Object.defineProperty(RCContactPresenter.prototype,"displayNumbers",{get:function(){return this.phoneNumbers.map((function(e){var t=e.phoneNumber,n=pe(e,["phoneNumber"]);return ue({phoneNumber:(0,ae.un)(t)},n)}))},enumerable:true,configurable:true});Object.defineProperty(RCContactPresenter.prototype,"isMe",{get:function(){return currentUserId()===this._data.id},enumerable:true,configurable:true});Object.defineProperty(RCContactPresenter.prototype,"deactivated",{get:function(){return typeof this._data.isActivated==="boolean"&&!this._data.isActivated},enumerable:true,configurable:true});Object.defineProperty(RCContactPresenter.prototype,"headshotUrl",{get:function(){return this._data.avatarUrl},enumerable:true,configurable:true});Object.defineProperty(RCContactPresenter.prototype,"jobTitle",{get:function(){return this._data.jobTitle},enumerable:true,configurable:true});Object.defineProperty(RCContactPresenter.prototype,"email",{get:function(){return this._data.email},enumerable:true,configurable:true});Object.defineProperty(RCContactPresenter.prototype,"isHidden",{get:function(){return this._data.isHidden},enumerable:true,configurable:true});Object.defineProperty(RCContactPresenter.prototype,"emailAddresses",{get:function(){return[{label:"",address:this._data.email}]},enumerable:true,configurable:true});Object.defineProperty(RCContactPresenter.prototype,"displayNameWithMeLabel",{get:function(){if(this.isMe){return this.displayName+" ("+p("me")+")"}return this.displayName},enumerable:true,configurable:true});Object.defineProperty(RCContactPresenter.prototype,"phoneNumber",{get:function(){var e=this.phoneNumbers.find((function(e){var t=e.usageType;return t===ie.vX.Extension}));if(e){return e.phoneNumber}if(this.phoneNumbers&&this.phoneNumbers.length>0){return this.phoneNumbers[0].phoneNumber}return""},enumerable:true,configurable:true});Object.defineProperty(RCContactPresenter.prototype,"department",{get:function(){return this._data.department},enumerable:true,configurable:true});Object.defineProperty(RCContactPresenter.prototype,"office",{get:function(){return this._fetchOffice.get()},enumerable:true,configurable:true});Object.defineProperty(RCContactPresenter.prototype,"hasConflictPhoneNumberWithOthers",{get:function(){return d.ContactPresenterHelper.hasConflictPhoneNumberWithOthers(this.id)},enumerable:true,configurable:true});RCContactPresenter.prototype.getRawEntity=function(){return this._data};var e;se([o.observable,ce("design:type",typeof(e=typeof I!=="undefined"&&I)==="function"?e:Object)],RCContactPresenter.prototype,"_data",void 0);se([o.computed,ce("design:type",Object),ce("design:paramtypes",[])],RCContactPresenter.prototype,"id",null);se([o.computed,ce("design:type",Object),ce("design:paramtypes",[])],RCContactPresenter.prototype,"accountId",null);se([o.computed,ce("design:type",Object),ce("design:paramtypes",[])],RCContactPresenter.prototype,"displayName",null);se([o.computed,ce("design:type",Object),ce("design:paramtypes",[])],RCContactPresenter.prototype,"shortName",null);se([o.computed,ce("design:type",Object),ce("design:paramtypes",[])],RCContactPresenter.prototype,"firstName",null);se([o.computed,ce("design:type",Object),ce("design:paramtypes",[])],RCContactPresenter.prototype,"lastName",null);se([o.computed,ce("design:type",Object),ce("design:paramtypes",[])],RCContactPresenter.prototype,"phoneNumbers",null);se([o.computed,ce("design:type",Object),ce("design:paramtypes",[])],RCContactPresenter.prototype,"displayNumbers",null);se([o.computed,ce("design:type",Object),ce("design:paramtypes",[])],RCContactPresenter.prototype,"isMe",null);se([o.computed,ce("design:type",Object),ce("design:paramtypes",[])],RCContactPresenter.prototype,"deactivated",null);se([o.computed,ce("design:type",Object),ce("design:paramtypes",[])],RCContactPresenter.prototype,"headshotUrl",null);se([o.computed,ce("design:type",Object),ce("design:paramtypes",[])],RCContactPresenter.prototype,"jobTitle",null);se([o.computed,ce("design:type",Object),ce("design:paramtypes",[])],RCContactPresenter.prototype,"email",null);se([o.computed,ce("design:type",Object),ce("design:paramtypes",[])],RCContactPresenter.prototype,"isHidden",null);se([o.computed,ce("design:type",Object),ce("design:paramtypes",[])],RCContactPresenter.prototype,"emailAddresses",null);se([o.computed,ce("design:type",Object),ce("design:paramtypes",[])],RCContactPresenter.prototype,"displayNameWithMeLabel",null);se([o.computed,ce("design:type",Object),ce("design:paramtypes",[])],RCContactPresenter.prototype,"phoneNumber",null);se([o.computed,ce("design:type",Object),ce("design:paramtypes",[])],RCContactPresenter.prototype,"department",null);se([o.computed,ce("design:type",Object),ce("design:paramtypes",[])],RCContactPresenter.prototype,"office",null);se([o.computed,ce("design:type",Object),ce("design:paramtypes",[])],RCContactPresenter.prototype,"hasConflictPhoneNumberWithOthers",null);return RCContactPresenter}();var de=n(295454);var fe=n(569430);var ye=n(805031);var Ee=n(991688);var _e=n(592759);var ge=n(66194);var be=n(726247);var he=n(118632);var Ce=n(553308);var me;var Pe={icon:fe.Z};var ve=(me={},me[E.RC_EXTENSION_TYPES.DEPARTMENT]={icon:ye.Z,get contactDescription(){return p("groupExtensionDescription.callQueue")},dataTrackingContactType:"Call queue"},me[E.RC_EXTENSION_TYPES.SHARED_LINES_GROUP]={icon:Ee.Z,get contactDescription(){return p("groupExtensionDescription.shareLine")},dataTrackingContactType:"Shared line"},me[E.RC_EXTENSION_TYPES.ANNOUNCEMENT]={icon:_e.Z,get contactDescription(){return p("groupExtensionDescription.announcementOnly")},dataTrackingContactType:"Announcement only"},me[E.RC_EXTENSION_TYPES.VOICEMAIL]={icon:ge.Z,get contactDescription(){return p("groupExtensionDescription.messageOnly")},dataTrackingContactType:"Message only"},me[E.RC_EXTENSION_TYPES.LIMITED]={icon:be.Z,get contactDescription(){return p("groupExtensionDescription.limitedExtension")},dataTrackingContactType:"Limited extension"},me[E.RC_EXTENSION_TYPES.PAGING_ONLY]={icon:he.Z,get contactDescription(){return p("groupExtensionDescription.pagingOnly")},dataTrackingContactType:"Paging only"},me[E.RC_EXTENSION_TYPES.GROUP_CALL_PICKUP]={icon:Ce.Z},me);function getGroupExtensionContactConfig(e){var t;return(t=ve[e])!==null&&t!==void 0?t:Pe}var Oe=undefined&&undefined.__assign||function(){Oe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o))e[o]=t[o]}return e};return Oe.apply(this,arguments)};var Re=undefined&&undefined.__decorate||function(e,t,n,r){var o=arguments.length,i=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")i=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)if(a=e[u])i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i;return o>3&&i&&Object.defineProperty(t,n,i),i};var Ne=undefined&&undefined.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};var Se=undefined&&undefined.__rest||function(e,t){var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0)n[r]=e[r];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++){if(t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o]))n[r[o]]=e[r[o]]}return n};var Te=undefined&&undefined.__read||function(e,t){var n=typeof Symbol==="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,i=[],a;try{while((t===void 0||t-- >0)&&!(o=r.next()).done)i.push(o.value)}catch(e){a={error:e}}finally{try{if(o&&!o.done&&(n=r["return"]))n.call(r)}finally{if(a)throw a.error}}return i};var Ie=undefined&&undefined.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Te(arguments[t]));return e};var xe=function(){function GroupExtensionContactPresenter(e){var t=this;this.isRegistered=true;this.canRefreshHomepage=false;this.isPerson=true;this.presenterType=d.mH.GROUP_EXTENSION;this.isGuest=false;this.disallowMessage=true;this.disallowMeet=true;this.hidePresence=true;this.hideEmails=true;this._fetchOffice=(0,re.promisedComputed)(undefined,(function(){return d.ContactPresenterHelper.fetchOffice(t.accountId)}));this._data=e}Object.defineProperty(GroupExtensionContactPresenter.prototype,"_extensionConfig",{get:function(){return getGroupExtensionContactConfig(this.type)},enumerable:true,configurable:true});Object.defineProperty(GroupExtensionContactPresenter.prototype,"id",{get:function(){return oe.ContactUtils.getUniqueId(P.GROUP_EXTENSION_MODULE,this._data.id)},enumerable:true,configurable:true});Object.defineProperty(GroupExtensionContactPresenter.prototype,"type",{get:function(){return this._data.type},enumerable:true,configurable:true});Object.defineProperty(GroupExtensionContactPresenter.prototype,"accountId",{get:function(){return this._data.accountId},enumerable:true,configurable:true});Object.defineProperty(GroupExtensionContactPresenter.prototype,"displayName",{get:function(){return this._data.name},enumerable:true,configurable:true});Object.defineProperty(GroupExtensionContactPresenter.prototype,"firstName",{get:function(){var e=this.displayName.split(" ");return e[0]||""},enumerable:true,configurable:true});Object.defineProperty(GroupExtensionContactPresenter.prototype,"lastName",{get:function(){var e=this.displayName.split(" ");return e.length>1?e.slice(1).join(" "):""},enumerable:true,configurable:true});Object.defineProperty(GroupExtensionContactPresenter.prototype,"shortName",{get:function(){return this._data.shortName},enumerable:true,configurable:true});Object.defineProperty(GroupExtensionContactPresenter.prototype,"phoneNumbers",{get:function(){var e=(this._data.phoneNumbers||[]).map((function(e){return{phoneNumber:e.phoneNumber,usageType:e.usageType}}));if(this.extensionNumber&&!e.some((function(e){return e.usageType===de.vX.Extension}))){e=Ie([{phoneNumber:this.extensionNumber,usageType:de.vX.Extension}],e)}return e},enumerable:true,configurable:true});Object.defineProperty(GroupExtensionContactPresenter.prototype,"displayNumbers",{get:function(){return this.phoneNumbers.map((function(e){var t=e.phoneNumber,n=Se(e,["phoneNumber"]);return Oe({phoneNumber:(0,ae.un)(t)},n)}))},enumerable:true,configurable:true});Object.defineProperty(GroupExtensionContactPresenter.prototype,"isMe",{get:function(){return currentUserId()===this._data.id},enumerable:true,configurable:true});Object.defineProperty(GroupExtensionContactPresenter.prototype,"deactivated",{get:function(){return this._data.deactivated},enumerable:true,configurable:true});Object.defineProperty(GroupExtensionContactPresenter.prototype,"email",{get:function(){return this._data.email},enumerable:true,configurable:true});Object.defineProperty(GroupExtensionContactPresenter.prototype,"displayNameWithMeLabel",{get:function(){if(this.isMe){return this.displayName+" ("+p("me")+")"}return this.displayName},enumerable:true,configurable:true});Object.defineProperty(GroupExtensionContactPresenter.prototype,"extensionNumber",{get:function(){return this._data.extensionNumber},enumerable:true,configurable:true});Object.defineProperty(GroupExtensionContactPresenter.prototype,"phoneNumber",{get:function(){if(this.extensionNumber)return this.extensionNumber;if(this.phoneNumbers&&this.phoneNumbers.length>0){return this.phoneNumbers[0].phoneNumber}return""},enumerable:true,configurable:true});Object.defineProperty(GroupExtensionContactPresenter.prototype,"office",{get:function(){return this._fetchOffice.get()},enumerable:true,configurable:true});Object.defineProperty(GroupExtensionContactPresenter.prototype,"hasConflictPhoneNumberWithOthers",{get:function(){return d.ContactPresenterHelper.hasConflictPhoneNumberWithOthers(this.id)},enumerable:true,configurable:true});Object.defineProperty(GroupExtensionContactPresenter.prototype,"icon",{get:function(){return this._extensionConfig.icon},enumerable:true,configurable:true});Object.defineProperty(GroupExtensionContactPresenter.prototype,"contactDescription",{get:function(){return this._extensionConfig.contactDescription},enumerable:true,configurable:true});Object.defineProperty(GroupExtensionContactPresenter.prototype,"mainContactInfo",{get:function(){return this.extensionNumber?p("Ext")+" "+this.extensionNumber:undefined},enumerable:true,configurable:true});Object.defineProperty(GroupExtensionContactPresenter.prototype,"dataTrackingContactType",{get:function(){return this._extensionConfig.dataTrackingContactType},enumerable:true,configurable:true});GroupExtensionContactPresenter.prototype.getRawEntity=function(){return this._data};var e;Re([o.observable,Ne("design:type",typeof(e=typeof D!=="undefined"&&D)==="function"?e:Object)],GroupExtensionContactPresenter.prototype,"_data",void 0);Re([o.computed,Ne("design:type",Object),Ne("design:paramtypes",[])],GroupExtensionContactPresenter.prototype,"_extensionConfig",null);Re([o.computed,Ne("design:type",Object),Ne("design:paramtypes",[])],GroupExtensionContactPresenter.prototype,"id",null);Re([o.computed,Ne("design:type",Object),Ne("design:paramtypes",[])],GroupExtensionContactPresenter.prototype,"type",null);Re([o.computed,Ne("design:type",Object),Ne("design:paramtypes",[])],GroupExtensionContactPresenter.prototype,"accountId",null);Re([o.computed,Ne("design:type",Object),Ne("design:paramtypes",[])],GroupExtensionContactPresenter.prototype,"displayName",null);Re([o.computed,Ne("design:type",Object),Ne("design:paramtypes",[])],GroupExtensionContactPresenter.prototype,"firstName",null);Re([o.computed,Ne("design:type",Object),Ne("design:paramtypes",[])],GroupExtensionContactPresenter.prototype,"lastName",null);Re([o.computed,Ne("design:type",Object),Ne("design:paramtypes",[])],GroupExtensionContactPresenter.prototype,"shortName",null);Re([o.computed,Ne("design:type",Object),Ne("design:paramtypes",[])],GroupExtensionContactPresenter.prototype,"phoneNumbers",null);Re([o.computed,Ne("design:type",Object),Ne("design:paramtypes",[])],GroupExtensionContactPresenter.prototype,"displayNumbers",null);Re([o.computed,Ne("design:type",Object),Ne("design:paramtypes",[])],GroupExtensionContactPresenter.prototype,"isMe",null);Re([o.computed,Ne("design:type",Object),Ne("design:paramtypes",[])],GroupExtensionContactPresenter.prototype,"deactivated",null);Re([o.computed,Ne("design:type",Object),Ne("design:paramtypes",[])],GroupExtensionContactPresenter.prototype,"email",null);Re([o.computed,Ne("design:type",Object),Ne("design:paramtypes",[])],GroupExtensionContactPresenter.prototype,"displayNameWithMeLabel",null);Re([o.computed,Ne("design:type",Object),Ne("design:paramtypes",[])],GroupExtensionContactPresenter.prototype,"extensionNumber",null);Re([o.computed,Ne("design:type",Object),Ne("design:paramtypes",[])],GroupExtensionContactPresenter.prototype,"phoneNumber",null);Re([o.computed,Ne("design:type",Object),Ne("design:paramtypes",[])],GroupExtensionContactPresenter.prototype,"office",null);Re([o.computed,Ne("design:type",Object),Ne("design:paramtypes",[])],GroupExtensionContactPresenter.prototype,"hasConflictPhoneNumberWithOthers",null);Re([o.computed,Ne("design:type",Object),Ne("design:paramtypes",[])],GroupExtensionContactPresenter.prototype,"icon",null);Re([o.computed,Ne("design:type",Object),Ne("design:paramtypes",[])],GroupExtensionContactPresenter.prototype,"contactDescription",null);Re([o.computed,Ne("design:type",Object),Ne("design:paramtypes",[])],GroupExtensionContactPresenter.prototype,"mainContactInfo",null);Re([o.computed,Ne("design:type",Object),Ne("design:paramtypes",[])],GroupExtensionContactPresenter.prototype,"dataTrackingContactType",null);return GroupExtensionContactPresenter}();var Ae=J.get(W.RC_CONTACT);var je=J.get(W.GROUP_EXTENSION);var Me=J.get(W.EXTENSION_ID_CONTACT);var De=function(){function RcContact(){var e=this;this.init=function(){l.info("register rc contact providers");d.XQ.registerProvider({type:d.mH.TELEPHONY,provider:new ne});d.Ym.registerPresenterProvider(d.bT.EXTENSIONID,{getRawDataById:function(e){return Me.get(e)}});d.Ym.registerPresenterProvider(d.mH.TELEPHONY,{getRawDataById:function(e){return Ae.get(e)},presenter:le,shouldJoinDuplicate:true,hasPrimaryEmail:true});d.Ym.registerPresenterProvider(d.mH.GROUP_EXTENSION,{getRawDataById:function(e){return je.get(e)},presenter:xe})};this.dispose=function(){l.info("unregister rc contact providers");d.XQ.unregisterProvider({type:d.mH.TELEPHONY});d.Ym.unregisterPresenterProvider(d.mH.TELEPHONY);d.Ym.unregisterPresenterProvider(d.mH.GROUP_EXTENSION);d.Ym.unregisterPresenterProvider(d.bT.EXTENSIONID)};(0,o.reaction)((function(){var e;return(e=r.ZP.get(r.MG.ACCOUNT_INFO))===null||e===void 0?void 0:e.isRcUser}),(function(t){l.info((t?"run":"dispose")+": RcContact");t?e.init():e.dispose()}),{fireImmediately:true})}return RcContact}()},967532:(e,t,n)=>{"use strict";n.r(t);n.d(t,{RCPresenceModule:()=>Q});var r=n(461197);var o=n(808192);var i=n(379269);var a=n(814678);var u=n(794457);var s=n(298784);var c=n.n(s);var p=n(667489);var l=n(652256);var d=n(386561);var f=n(862926);var y=n(827027);var E={USER_STATUS:"/"+y.API_VERSION+"/account"};var _=undefined&&undefined.__awaiter||function(e,t,n,r){function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(e){try{step(r.next(e))}catch(e){o(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){o(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())}))};var g=undefined&&undefined.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,a;return a={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function verb(e){return function(t){return step([e,t])}}function step(a){if(r)throw new TypeError("Generator is already executing.");while(n)try{if(r=1,o&&(i=a[0]&2?o["return"]:a[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;if(o=0,i)a=[a[0]&2,i.value];switch(a[0]){case 0:case 1:i=a;break;case 4:n.label++;return{value:a[1],done:false};case 5:n.label++;o=a[1];a=[0];continue;case 7:a=n.ops.pop();n.trys.pop();continue;default:if(!(i=n.trys,i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){n.label=a[1];break}if(a[0]===6&&n.label<i[1]){n.label=i[1];i=a;break}if(i&&n.label<i[2]){n.label=i[2];n.ops.push(a);break}if(i[2])n.ops.pop();n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e];o=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var b=function(){function RCPresenceApi(){}RCPresenceApi.getPresenceStatus=function(e,t){return _(this,void 0,void 0,(function(){var n,r;return g(this,(function(o){switch(o.label){case 0:n=t.join(",");r={path:f.RequestPath.buildRequestPath(E.USER_STATUS+"/"+f.FORMAT_MARK+"/extension/"+f.FORMAT_MARK+"/presence",e,n),via:f.NETWORK_VIA.HTTP};return[4,RCPresenceApi.rcNetworkClient.get(r)];case 1:return[2,o.sent()]}}))}))};return RCPresenceApi}();var h="[RC_PRESENCE][CORE]";var C=f.ModuleLogger.getLogger(h,(function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return e}),y.PHONE_EVENT_DATA_FEATURE_KEY);var m=n(528575);var P=undefined&&undefined.__assign||function(){P=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o))e[o]=t[o]}return e};return P.apply(this,arguments)};var v=undefined&&undefined.__awaiter||function(e,t,n,r){function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(e){try{step(r.next(e))}catch(e){o(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){o(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())}))};var O=undefined&&undefined.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,a;return a={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function verb(e){return function(t){return step([e,t])}}function step(a){if(r)throw new TypeError("Generator is already executing.");while(n)try{if(r=1,o&&(i=a[0]&2?o["return"]:a[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;if(o=0,i)a=[a[0]&2,i.value];switch(a[0]){case 0:case 1:i=a;break;case 4:n.label++;return{value:a[1],done:false};case 5:n.label++;o=a[1];a=[0];continue;case 7:a=n.ops.pop();n.trys.pop();continue;default:if(!(i=n.trys,i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){n.label=a[1];break}if(a[0]===6&&n.label<i[1]){n.label=i[1];i=a;break}if(i&&n.label<i[2]){n.label=i[2];n.ops.push(a);break}if(i[2])n.ops.pop();n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e];o=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var R=C.tags("[RCPresenceRequestController]");var N=function(){function RCPresenceRequestController(){this._threshold=m.DK}RCPresenceRequestController.prototype.requestPresence=function(e,t,n){var r=this;var o=this._groupByAccountId(e);return Promise.all(o.map((function(e){return r._doRequest(e.accountId,e.pendingPresences,t,n)})))};RCPresenceRequestController.prototype._groupByAccountId=function(e){var t=this;var n=new Map;e.forEach((function(e){var r;var o=t._rcContactModule.getContactGroupIdByExtensionId(e.id.toString());if(o){if(n.has(o)){(r=n.get(o))===null||r===void 0?void 0:r.push(e)}else{n.set(o,[e])}}else{R.info("can not get account id by extension id, extensionId:",e.id)}}));var r=[];n.forEach((function(e,t){r.push({accountId:t,pendingPresences:e})}));return r};RCPresenceRequestController.prototype._doRequest=function(e,t,n,r){return v(this,void 0,void 0,(function(){var o,i,a,u,s;return O(this,(function(c){switch(c.label){case 0:if(t.length===0){return[2]}o=t.splice(0,this._threshold);c.label=1;case 1:c.trys.push([1,3,,4]);return[4,b.getPresenceStatus(e,o.map((function(e){var t=e.id;return t})))];case 2:i=c.sent();a=[];if(o.length===1&&typeof i!=="string"){a=[i]}else{u=(0,l.t)(i).body;a=u}this._handleRawPresences(a,o,n,r);return[3,4];case 3:s=c.sent();R.info("get presence failed",o.map((function(e){var t=e.id;return t})),s);r(o);return[3,4];case 4:if(!(t.length>0))return[3,6];return[4,this._doRequest(e,t,n,r)];case 5:c.sent();c.label=6;case 6:return[2]}}))}))};RCPresenceRequestController.prototype._handleRawPresences=function(e,t,n,r){var o=e.filter((function(e){return!!e.extension}));if(o.length){R.info("get presence success",o.map((function(e){return e.extension.id})));var i=t.filter((function(e){return o.some((function(t){return t.extension.id===e.id}))}));n(this._transform(o),i)}var a=t.filter((function(e){return!o.some((function(t){return t.extension.id===e.id}))}));if(a.length){R.info("get presence fail",a.map((function(e){return e.id})));r(a)}};RCPresenceRequestController.prototype._transform=function(e){return e.map((function(e){return P(P({},e),{id:e.extension.id})}))};Object.defineProperty(RCPresenceRequestController.prototype,"_rcContactModule",{get:function(){return(0,p.getModule)(d.oF)},enumerable:true,configurable:true});return RCPresenceRequestController}();var S;(function(e){e[e["PENDING"]=0]="PENDING";e[e["SENDING"]=1]="SENDING";e[e["SUCCESS"]=2]="SUCCESS";e[e["FAIL"]=3]="FAIL"})(S||(S={}));var T=undefined&&undefined.__assign||function(){T=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o))e[o]=t[o]}return e};return T.apply(this,arguments)};var I=undefined&&undefined.__read||function(e,t){var n=typeof Symbol==="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,i=[],a;try{while((t===void 0||t-- >0)&&!(o=r.next()).done)i.push(o.value)}catch(e){a={error:e}}finally{try{if(o&&!o.done&&(n=r["return"]))n.call(r)}finally{if(a)throw a.error}}return i};var x=undefined&&undefined.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(I(arguments[t]));return e};var A=C.tags("[RCPresenceSubscribeController]");var j={DEFAULT_RETRY_CNT:0,DEFAULT_EXPIRE_TIME:-1,REQUEST_INTERVAL:15*1e3,EXPIRE_TIME:15*1e3,DEBOUNCE:300,MAX_RETRY_CNT:3};var M=function(){function RCPresenceSubscribeController(e,t){var n=this;this._onPresenceUpdated=e;this._onFetchPresenceFailed=t;this._queue=[];this._subscribeDebounce=c().debounce((function(){n._requestPresence()}),j.DEBOUNCE);this._rcPresenceRequestController=new N}RCPresenceSubscribeController.prototype.subscribe=function(e){if(!this._queue.find((function(t){return t.id===e}))){this._queue.push({id:e,status:S.PENDING,expireTime:j.DEFAULT_EXPIRE_TIME,retriedCount:j.DEFAULT_RETRY_CNT});this._subscribeDebounce()}};RCPresenceSubscribeController.prototype.unsubscribe=function(e){for(var t=0,n=this._queue.length;t<n;t++){var r=this._queue[t];A.log("unsubscribe",e);if(r.id===e){this._queue.splice(t,1);break}}};RCPresenceSubscribeController.prototype.reset=function(){this._queue=[];if(this._requestTimer){this._requestTimer!==undefined&&window.clearTimeout(this._requestTimer);delete this._requestTimer}};RCPresenceSubscribeController.prototype._requestPresence=function(){var e=this._getNeedRefreshPresence();if(e.length){e.forEach((function(e){e.status=S.SENDING}));this._rcPresenceRequestController.requestPresence(e,this._onSubscribeSuccess.bind(this),this._onSubscribeFail.bind(this))}else{this._startPolling()}};RCPresenceSubscribeController.prototype._startPolling=function(){var e=this;this._requestTimer&&window.clearTimeout(this._requestTimer);this._requestTimer=window.setTimeout((function(){e._requestPresence()}),j.REQUEST_INTERVAL)};RCPresenceSubscribeController.prototype._onSubscribeSuccess=function(e,t){var n;this._onPresenceUpdated(e);this._queue=this._queue.filter((function(e){return!t.some((function(t){return t.id===e.id}))}));var r=[];t.forEach((function(e){r.push(T(T({},e),{status:S.SUCCESS,expireTime:Date.now()+j.EXPIRE_TIME,retriedCount:j.DEFAULT_RETRY_CNT}))}));(n=this._queue).push.apply(n,x(r));this._startPolling()};RCPresenceSubscribeController.prototype._onSubscribeFail=function(e){var t;var n=[];var r=[];e.forEach((function(e){e.retriedCount=e.retriedCount+1;e.status=S.FAIL;e.expireTime=Date.now()+j.EXPIRE_TIME;if(e.retriedCount<=j.MAX_RETRY_CNT){n.push(e)}else{r.push(e.id)}}));this._queue=this._queue.filter((function(t){return!e.some((function(e){return e.id===t.id}))}));(t=this._queue).push.apply(t,x(n));r.length&&this._onFetchPresenceFailed(r);this._startPolling()};RCPresenceSubscribeController.prototype._getNeedRefreshPresence=function(){return this._queue.filter((function(e){var t=e.retriedCount,n=e.expireTime,r=e.status;return r===S.PENDING||t>0||n<=Date.now()}))};return RCPresenceSubscribeController}();var D=n(587040);var w=undefined&&undefined.__assign||function(){w=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o))e[o]=t[o]}return e};return w.apply(this,arguments)};var U=undefined&&undefined.__awaiter||function(e,t,n,r){function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(e){try{step(r.next(e))}catch(e){o(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){o(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())}))};var G=undefined&&undefined.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,a;return a={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function verb(e){return function(t){return step([e,t])}}function step(a){if(r)throw new TypeError("Generator is already executing.");while(n)try{if(r=1,o&&(i=a[0]&2?o["return"]:a[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;if(o=0,i)a=[a[0]&2,i.value];switch(a[0]){case 0:case 1:i=a;break;case 4:n.label++;return{value:a[1],done:false};case 5:n.label++;o=a[1];a=[0];continue;case 7:a=n.ops.pop();n.trys.pop();continue;default:if(!(i=n.trys,i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){n.label=a[1];break}if(a[0]===6&&n.label<i[1]){n.label=i[1];i=a;break}if(i&&n.label<i[2]){n.label=i[2];n.ops.push(a);break}if(i[2])n.ops.pop();n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e];o=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var L=15*1e3;var F=C.tags("[RCPresenceDataController]");var Y=function(){function RCPresenceDataController(){var e=this;this._cachePresence=new Map;this._uselessPresenceIds=new Set;this._needReSubSelfPresence=false;this._debounceClearNeedlessPresence=c().debounce((function(){var t=Array.from(e._uselessPresenceIds.values());t.forEach((function(t){e._subscribeController.unsubscribe(t);e._cachePresence.delete(t);a.rF.emitEntityDelete(m.FY.ENTITY.RC_PRESENCE,[t])}));t.length&&F.log("_debounceClearPresence",t)}),L);this.handleIncomingSelfPresence=function(t){a.rF.emitEntityUpdate(m.FY.ENTITY.RC_PRESENCE,[],[w(w({},t),{id:e._currentUserExtId})])};this._onNetworkChange=function(t){var n=t.onLine;if(n){e._onNetworkConnected()}else{e._onNetworkDisconnected()}};this._handleNewPresence=function(t){t.forEach((function(t){e._cachePresence.set(t.id,t)}));a.rF.emitEntityUpdate(m.FY.ENTITY.RC_PRESENCE,t)};this._handleFetchFailed=function(t){var n=t.map((function(t){e._cachePresence.delete(t);return e.defaultOfflinePresence(t)}));e._needReSubSelfPresence=t.some((function(t){return t===e._currentUserExtId}));a.rF.emitEntityUpdate(m.FY.ENTITY.RC_PRESENCE,[],n)};this._subscribeController=new M(this._handleNewPresence,this._handleFetchFailed)}RCPresenceDataController.prototype.start=function(){a.rF.on(u.N.ONLINE,this._onNetworkChange)};RCPresenceDataController.prototype.stop=function(){a.rF.off(u.N.ONLINE,this._onNetworkChange)};RCPresenceDataController.prototype.getById=function(e){if(!e){F.trace("invalid id",e);return}this._uselessPresenceIds.delete(e);this.subscribe(e);return this._getInternal(e)||{id:e}};RCPresenceDataController.prototype.subscribe=function(e){this._subscribeController.subscribe(e);e!==this._currentUserExtId&&this._needReSubSelfPresence&&this._subscribeController.subscribe(this._currentUserExtId);this._needReSubSelfPresence=false};RCPresenceDataController.prototype.unsubscribe=function(e){this._uselessPresenceIds.add(e);this._debounceClearNeedlessPresence()};RCPresenceDataController.prototype.updateSelfPresence=function(e){return U(this,void 0,void 0,(function(){var t,n,o;return G(this,(function(a){switch(a.label){case 0:this._emitPartialUpdate(w(w({},e),{id:this._currentUserExtId,_id:this._currentUserExtId}));t=this._getInternal(this._currentUserExtId)||{id:this._currentUserExtId,presenceStatus:y.PRESENCE_STATUS.Offline,dndStatus:y.DND_STATUS.TakeAllCalls};a.label=1;case 1:a.trys.push([1,3,,4]);n=(0,r.getModule)(i.oF);return[4,n.setUserPresence(e)];case 2:a.sent();return[3,4];case 3:o=a.sent();F.log("failed to update user presence",{error:o,data:e});this._emitPartialUpdate(t);throw o;case 4:return[2]}}))}))};Object.defineProperty(RCPresenceDataController.prototype,"_currentUserExtId",{get:function(){var e=(0,D.gT)().userConfig;return e.getExtensionId()},enumerable:true,configurable:true});RCPresenceDataController.prototype._getInternal=function(e){return this._cachePresence.get(e)};RCPresenceDataController.prototype._emitPartialUpdate=function(e){a.rF.emitEntityUpdate(m.FY.ENTITY.RC_PRESENCE,[],[e])};RCPresenceDataController.prototype._onNetworkConnected=function(){F.log("network is online start polling");this._resetCache();a.rF.emitEntityReload(m.FY.ENTITY.RC_PRESENCE,[],true)};RCPresenceDataController.prototype._onNetworkDisconnected=function(){F.log("network is offline stop polling");this._resetCache();a.rF.emitEntityReset(m.FY.ENTITY.RC_PRESENCE)};RCPresenceDataController.prototype._resetCache=function(){this._subscribeController.reset();this._cachePresence.clear();this._uselessPresenceIds.clear()};RCPresenceDataController.prototype.defaultOfflinePresence=function(e){return{id:e,presenceStatus:y.PRESENCE_STATUS.Offline,dndStatus:y.DND_STATUS.TakeAllCalls,meetingStatus:y.PRESENCE_MEETING_STATUS.Disconnected,telephonyStatus:y.TELEPHONY_STATUS.NoCall,userStatus:y.USER_STATUS.Offline}};return RCPresenceDataController}();var k=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var H=function(e){k(RCPresenceService,e);function RCPresenceService(){return e.call(this)||this}RCPresenceService.prototype.getById=function(e){return this.rcPresenceDataController.getById(e)};RCPresenceService.prototype.unsubscribe=function(e){this.rcPresenceDataController.unsubscribe(e)};RCPresenceService.prototype.updateSelfPresence=function(e){return this.rcPresenceDataController.updateSelfPresence(e)};RCPresenceService.prototype.onStarted=function(){e.prototype.onStarted.call(this);this.rcPresenceDataController.start();a.rF.on(i.FY.RC_INFO.RC_PRESENCE,this.rcPresenceDataController.handleIncomingSelfPresence)};RCPresenceService.prototype.onStopped=function(){this.rcPresenceDataController.stop();a.rF.off(i.FY.RC_INFO.RC_PRESENCE,this.rcPresenceDataController.handleIncomingSelfPresence);e.prototype.onStopped.call(this)};Object.defineProperty(RCPresenceService.prototype,"rcPresenceDataController",{get:function(){if(!this._rcPresenceDataController){this._rcPresenceDataController=new Y}return this._rcPresenceDataController},enumerable:true,configurable:true});return RCPresenceService}(o.Kb);var q=n(960782);var B=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var V=function(e){B(GetPresenceKeyAction,e);function GetPresenceKeyAction(t){if(t===void 0){t=p.ActionWeight.NORMAL}return e.call(this,t)||this}GetPresenceKeyAction.prototype.getAction=function(){var e=(0,p.getModule)(m.oF);return Promise.resolve(e.getById)};return GetPresenceKeyAction}(p.AbstractKeyAction);var X=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var K=function(e){X(SetPresenceKeyAction,e);function SetPresenceKeyAction(t){if(t===void 0){t=p.ActionWeight.NORMAL}return e.call(this,t)||this}SetPresenceKeyAction.prototype.getAction=function(){var e=(0,p.getModule)(m.oF);return Promise.resolve(e.updateSelfPresence)};return SetPresenceKeyAction}(p.AbstractKeyAction);var W=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var Q=function(e){W(RCPresenceModule,e);function RCPresenceModule(t){var n=e.call(this,t)||this;n.updateSelfPresence=function(e){return n.rcPresenceService.updateSelfPresence(e)};n.getById=function(e){return n.rcPresenceService.getById(e)};n._initCommonKeyAction();return n}Object.defineProperty(RCPresenceModule.prototype,"rcPresenceService",{get:function(){if(!this._RCPresenceService){this._RCPresenceService=new H}return this._RCPresenceService},enumerable:true,configurable:true});RCPresenceModule.prototype.unsubscribe=function(e){this.rcPresenceService.unsubscribe(e)};RCPresenceModule.prototype.onLoad=function(){this._setupNetworkClient();this.rcPresenceService.start()};RCPresenceModule.prototype.onUnload=function(){this.rcPresenceService.stop()};RCPresenceModule.prototype.moduleName=function(){return m.oF};RCPresenceModule.prototype._setupNetworkClient=function(){var e=(0,D.gT)();if(e){b.rcNetworkClient=e.buildNetworkClient()}};RCPresenceModule.prototype._initCommonKeyAction=function(){var e=(0,p.getModule)(q.COMMON_KEY_ACTION_MODULE).getKeyActionService();e===null||e===void 0?void 0:e.register(q.ACTION_KEY.GET_RC_PRESENCE,new V);e===null||e===void 0?void 0:e.register(q.ACTION_KEY.SET_RC_PRESENCE,new K)};return RCPresenceModule}(r.AbstractModule)},528575:(e,t,n)=>{"use strict";n.d(t,{FY:()=>i,oF:()=>o,DK:()=>a});var r=n(295454);var o=r.Lb.RC_PRESENCE;var i={ENTITY:{RC_PRESENCE:"ENTITY.RC_PRESENCE"}};var a=30},812490:(e,t,n)=>{"use strict";n.d(t,{oF:()=>i,eh:()=>a,ZE:()=>r.VIDEO_SERVICE_OPTIONS,K1:()=>u,S9:()=>s,jV:()=>c,HU:()=>p});var r=n(960782);var o=n(295454);var i=o.Lb.MEETING;var a="RingCentral Meeting";var u;(function(e){e["VIDEO_SERVICE"]="video_service";e["MEETING_AUDIO_NOTIFICATIONS"]="meeting_audio_notifications"})(u||(u={}));var s;(function(e){e["VOIP"]="ComputerAudio";e["TELEPHONY"]="Phone";e["BOTH"]="both"})(s||(s={}));var c=[s.VOIP,s.TELEPHONY,s.BOTH];var p;(function(e){e["OFF"]="off";e["GOOGLE_CALENDAR"]="google";e["OUTLOOK_CALENDAR"]="office365";e["OUTLOOK_CALENDAR_WEB"]="office365Web";e["OUTLOOK_CALENDAR_APP"]="office365App";e["MEETING_INFO"]="meetingInfo";e["CALENDAR_APP"]="calendarApp"})(p||(p={}))},260666:(e,t,n)=>{"use strict";n.d(t,{H:()=>r.Hr});var r=n(782117)},358198:(e,t,n)=>{"use strict";n.d(t,{Xv:()=>r,VQ:()=>a});var r;(function(e){e["SCREEN_SHARING_HOST_ONLY"]="screen_sharing_host_only";e["NOTIFICATIONS_RECORDING_DELETED"]="notifications_recording_deleted";e["START_SCREEN_SHARING_HOST_ONLY"]="start_screen_sharing_host_only";e["USE_PMI_INSTANT"]="use_pmi_instant";e["SOUNDS_SUPPRESS_GT_10"]="sounds_suppress_gt_10";e["ALWAYS_JOIN_FROM_BROWSER"]="always_join_from_browser";e["SOUNDS_ENTRY_EXIT_GROUP"]="sounds_entry_exit_group";e["JOIN_BEFORE_HOST"]="join_before_host";e["REMOTE_DESKTOP"]="remote_desktop";e["PASSWORD_INSTANT"]="password_instant";e["NOTIFICATIONS_MEETING_ENDED"]="notifications_meeting_ended";e["USE_PMI_SCHEDULED"]="use_pmi_scheduled";e["LOCALE_CODE"]="locale_code";e["SOUNDS_NEW_PARTICIPANTS"]="sounds_new_participants";e["JOIN_AUDIO_MUTE"]="join_audio_mute";e["JOIN_AUTHENTICATED_FROM_ACCOUNT_ONLY"]="join_authenticated_from_account_only";e["JOIN_COMPUTER_AUDIO"]="join_computer_audio";e["NOTIFICATIONS_RECORDING_SHARED"]="notifications_recording_shared";e["SOUNDS_ENTRY_EXIT_EVENTS"]="sounds_entry_exit_events";e["GUEST_JOIN"]="guest_join";e["NOTIFICATIONS_RECORDING_READY"]="notifications_recording_ready";e["PASSWORD_SCHEDULED"]="password_scheduled";e["SCREEN_SHARING_FULL"]="screen_sharing_full";e["WAITING_ROOM"]="waiting_room";e["CHAT"]="chat";e["ANNOTATIONS"]="annotations";e["JOIN_VIDEO_OFF"]="join_video_off";e["VIRAL_FREE_PHOENIX_PROMOTION"]="viral_free_phoenix_promotion";e["INSTANT_JOIN"]="instant_join";e["SCREEN_SHARING"]="screen_sharing";e["FIND_ME"]="find_me";e["AFTER_MEETING_SURVEY"]="after_meeting_survey";e["WAITING_ROOM_GUESTS_ONLY"]="waiting_room_guests_only";e["CONTROLS"]="controls";e["USE_MEET_INSTANT"]="use_meet_instant";e["E2EE"]="e2ee";e["E2EE_INSTANT"]="e2ee_instant"})(r||(r={}));var o;(function(e){e["HOST"]="host";e["ALL"]="all"})(o||(o={}));var i;(function(e){e["Both"]="both";e["Telephony"]="Phone";e["Voip"]="ComputerAudio"})(i||(i={}));var a;(function(e){e[e["OFF"]=0]="OFF";e[e["ALL"]=1]="ALL";e[e["ONLY_GUESTS"]=2]="ONLY_GUESTS";e[e["NOT_COWORKER"]=3]="NOT_COWORKER"})(a||(a={}));var u;(function(e){e["Off"]="Off";e["OnlyAuthUserJoin"]="OnlyAuthUserJoin";e["OnlyCoworkersJoin"]="OnlyCoworkersJoin"})(u||(u={}))},476173:(e,t,n)=>{"use strict";n.d(t,{FY:()=>i.FY,el:()=>i.el,ug:()=>i.ug,yZ:()=>i.yZ,CONNECT_STATUS:()=>a.hj,DemandType:()=>a.cZ,MeetingType:()=>s.wJ,MeetingNotExistError:()=>c.wU,RCVEError:()=>c.Au,RCVE_ERROR_TYPE:()=>c.wY});var r=n(537880);var o=n(522178);var i=n(882756);var a=n(725579);var u=n(860053);if(n.o(u,"MeetingNotExistError"))n.d(t,{MeetingNotExistError:function(){return u.MeetingNotExistError}});if(n.o(u,"MeetingType"))n.d(t,{MeetingType:function(){return u.MeetingType}});if(n.o(u,"RCVEError"))n.d(t,{RCVEError:function(){return u.RCVEError}});if(n.o(u,"RCVE_ERROR_TYPE"))n.d(t,{RCVE_ERROR_TYPE:function(){return u.RCVE_ERROR_TYPE}});var s=n(313242);var c=n(913161)},901310:()=>{},671798:()=>{},860053:(e,t,n)=>{"use strict";var r=n(671798);var o=n.n(r);if(n.o(r,"MeetingNotExistError"))n.d(t,{MeetingNotExistError:function(){return r.MeetingNotExistError}});if(n.o(r,"MeetingType"))n.d(t,{MeetingType:function(){return r.MeetingType}});if(n.o(r,"RCVEError"))n.d(t,{RCVEError:function(){return r.RCVEError}});if(n.o(r,"RCVE_ERROR_TYPE"))n.d(t,{RCVE_ERROR_TYPE:function(){return r.RCVE_ERROR_TYPE}});var i=n(901310);var a=n.n(i);if(n.o(i,"MeetingNotExistError"))n.d(t,{MeetingNotExistError:function(){return i.MeetingNotExistError}});if(n.o(i,"MeetingType"))n.d(t,{MeetingType:function(){return i.MeetingType}});if(n.o(i,"RCVEError"))n.d(t,{RCVEError:function(){return i.RCVEError}});if(n.o(i,"RCVE_ERROR_TYPE"))n.d(t,{RCVE_ERROR_TYPE:function(){return i.RCVE_ERROR_TYPE}})}}]);