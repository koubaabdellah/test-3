var orderSummaryCtrl=["$scope","$rootScope","$log","$location","$cookies","orderSummary","constants","ReportInterfaceAngular","OSHPService","ContentService",function($scope,$rootScope,$log,$location,$cookies,orderSummary,constants,ReportInterfaceAngular,OSHPService,ContentService){function addParameter(form,name,value){var $input=angular.element("<input />").attr("type","hidden").attr("name",name).attr("value",value);form.append($input)}if($log.log("entering orderSummary"),$rootScope.start(),angular.isDefined(HALOCConfig)&&1==HALOCConfig.HALOCFlag&&angular.isDefined(orderSummary)&&angular.isDefined(orderSummary.userId)&&void 0!=orderSummary.userId)try{var userNameForGnsess=orderSummary.userId,bestReqString='{"CommonData":{"AppName":"'+bestGnsessAttrs.AppName+'"},"UserId":"'+userNameForGnsess+'"}';angular.extend(bestGnsessAttrs,{BestRequest:bestReqString}),setRequestData(bestGnsessAttrs),makeColdAppBestCall()}catch(e){self.log.log("Gnsess call failure"+e)}$scope.dtvLinkFlag=!1,angular.isDefined(dtvLinkConfig)&&angular.isDefined(dtvLinkConfig.dtvLinkFlag)&&($scope.dtvLinkFlag=dtvLinkConfig.dtvLinkFlag);var current=$rootScope.current;if($scope.setDTMPageLoadAndGlobalUserVariables=function(){void 0!==$rootScope.isAuth&&!0===$rootScope.isAuth?($rootScope.pageLoadEvent("CMO Order Summary Pg","CMO_AUTH",""),void 0!==sessionStorage.getItem("userName")&&"undefined"!==sessionStorage.getItem("userName")&&(isNaN(sessionStorage.getItem("userName"))&&0!=sessionStorage.getItem("userName").length?(ddo.setVar("user.login.id",sessionStorage.getItem("userName")),ddo.setVar("user.login.type","SLID")):/^\d{10}$/.test(sessionStorage.getItem("userName"))&&(ddo.setVar("user.login.id",sessionStorage.getItem("userName")),ddo.setVar("user.login.type","CTN"))),ddo.setVar("user.login.loginSource","native")):($rootScope.pageLoadEvent("CMO Order Summary Pg","CMO_UNAUTH",localStorage.getItem("dtmZipCode")),ddo.setVar("user.login.type","")),void 0!==orderSummary.orders&&orderSummary.orders.length>0&&void 0!==orderSummary.orders[0].smbOrder&&"true"!==orderSummary.orders[0].smbOrder?null!=sessionStorage.getItem("liabilityType")&&void 0!==sessionStorage.getItem("liabilityType")?ddo.setVar("user.account.liabilityType",sessionStorage.getItem("liabilityType")):ddo.setVar("user.account.liabilityType","CONS"):ddo.setVar("user.account.liabilityType","SMB"),void 0!==$rootScope.current&&void 0!==$rootScope.current.customerType&&"SMB"===$rootScope.current.customerType&&ddo.setVar("user.account.liabilityType","SMB")},$scope.setReportingAttributesSummaryPage=function(myOrdersSummary){var myOrderDetailsObject=[];Array.isArray(myOrdersSummary.orders)?myOrderDetailsObject=myOrdersSummary.orders:myOrderDetailsObject.push(myOrdersSummary.orders);var listOfServices="",listOfOrders="",noOfWirelessOrders=0,noOfUverseOrders=0,noOfDirectTVOrders=0,listofitemcategories="",sameDayOrderCount=0,currentServiceStatus="";console.log("myOrdersSummary.length::"+myOrderDetailsObject.length),console.log("myOrdersSummary.length::"+myOrderDetailsObject[0].orderProductType);for(var i=0;i<myOrderDetailsObject.length;i++)if("WIRELESS"===myOrderDetailsObject[i].orderProductType?noOfWirelessOrders+=1:"UVERSE"===myOrderDetailsObject[i].orderProductType?noOfUverseOrders+=1:"DIRECTV"===myOrderDetailsObject[i].orderProductType&&(noOfDirectTVOrders+=1),listOfOrders=""===listOfOrders?myOrderDetailsObject[i].orderNumber:listOfOrders+" | "+myOrderDetailsObject[i].orderNumber,console.log("listOfOrders::"+listOfOrders),void 0!==myOrderDetailsObject[i].wirelessLines&&null!==myOrderDetailsObject[i].wirelessLines)for(var j=0;j<myOrderDetailsObject[i].wirelessLines.length;j++)void 0===myOrderDetailsObject[i].orderType||"ENJOY"!==myOrderDetailsObject[i].orderType&&"SAMEDAY"!==myOrderDetailsObject[i].orderType||(sameDayOrderCount+=1),void 0!==myOrderDetailsObject[i].wirelessLines[j].itemCategory&&""!==listofitemcategories&&-1===listofitemcategories.indexOf(myOrderDetailsObject[i].wirelessLines[j].itemCategory)?listofitemcategories=myOrderDetailsObject[i].wirelessLines[j].itemCategory+"|"+listofitemcategories:void 0!==myOrderDetailsObject[i].wirelessLines[j].itemCategory&&(listofitemcategories=myOrderDetailsObject[i].wirelessLines[j].itemCategory);else if(void 0!==myOrderDetailsObject[i].egLines&&null!==myOrderDetailsObject[i].egLines)"cease"===myOrderDetailsObject[i].egLines[0].itemActionType&&(currentServiceStatus="Cease "+myOrderDetailsObject[i].egLines[0].productStatus);else if(void 0!==myOrderDetailsObject[i].DTVNowLine&&null!==myOrderDetailsObject[i].DTVNowLine)for(var l=0;j<myOrderDetailsObject[i].wirelessLines.length;l++)void 0!==myOrderDetailsObject[i].wirelessLines[l].itemCategory&&""!==listofitemcategories&&-1===listofitemcategories.indexOf(myOrderDetailsObject[i].wirelessLines[l].itemCategory)?listofitemcategories=myOrderDetailsObject[i].wirelessLines[l].itemCategory+"|"+listofitemcategories:void 0!==myOrderDetailsObject[i].wirelessLines[l].itemCategory&&(listofitemcategories=myOrderDetailsObject[i].wirelessLines[l].itemCategory);console.log("listofitemcategories::"+listofitemcategories),noOfWirelessOrders>0&&(listOfServices=listOfServices+"WIRELESS ~ "+noOfWirelessOrders),noOfUverseOrders>0&&(listOfServices=listOfServices+" | UVERSE ~ "+noOfUverseOrders),noOfDirectTVOrders>0&&(listOfServices=listOfServices+" | DIRECTV ~ "+noOfDirectTVOrders),console.log("listOfServices::"+listOfServices);var additionalData={};additionalData={eosOriginSource:"CMO Landing",listOfServices:listOfServices,listOfOrders:listOfOrders,sameDayOrderCount:sameDayOrderCount,currentServiceStatus:currentServiceStatus},ReportInterfaceAngular.setPageTrack("CMO Order Summary Pg",window.location.pathname,""),void 0!=ddo&&ddo.setVar("page.attributes.productType",listofitemcategories),ReportInterfaceAngular.setEventTrackResponse("CMO_System_Order_Summary_Display","0","1",additionalData)},$scope.redirectToIDPPage=function(orderSummary,constants){if("true"==sessionStorage.getItem("isSummaryPageAccessed"))return sessionStorage.removeItem("isSummaryPageAccessed"),!1;if(1===orderSummary.orders.length)return!(orderSummary.orders[0].orderProductType.toUpperCase()!==constants.dtvOrderProductType&&orderSummary.orders[0].orderProductType.toUpperCase()!==constants.uverseProductType&&orderSummary.orders[0].orderProductType.toUpperCase()!==constants.bundleProductType||!orderSummary.orders[0].egLines||void 0===orderSummary.orders[0].egLines[0].manageUrlIDP||null===orderSummary.orders[0].egLines[0].manageUrlIDP||"true"==orderSummary.orders[0].smbOrder||"true"==orderSummary.orders[0].nfflOrder||"true"===orderSummary.orders[0].isInFlightOrder);for(var redirectToIDP=!1,i=0;i<orderSummary.orders.length;i++){for(var orderNumber=orderSummary.orders[i].orderNumber,ordersWithSameOrderNumberOnly=!0,j=0;j<orderSummary.orders.length;j++)if(orderNumber!=orderSummary.orders[j].orderNumber){ordersWithSameOrderNumberOnly=!1;break}if(!ordersWithSameOrderNumberOnly)return!1;if(orderSummary.orders[i].orderProductType.toUpperCase()!==constants.dtvOrderProductType&&orderSummary.orders[i].orderProductType.toUpperCase()!==constants.uverseProductType&&orderSummary.orders[i].orderProductType.toUpperCase()!==constants.bundleProductType||!orderSummary.orders[0].egLines||void 0===orderSummary.orders[i].egLines[0].manageUrlIDP||null===orderSummary.orders[i].egLines[0].manageUrlIDP||"true"==orderSummary.orders[i].smbOrder||"true"==orderSummary.orders[i].nfflOrder||"true"===orderSummary.orders[i].isInFlightOrder){redirectToIDP=!1;break}redirectToIDP=!0}return redirectToIDP},$scope.redirectWirelineToIDPNew=function(orderSummary){var redirectFlag=!1;if(1===orderSummary.orders.length&&void 0!==orderSummary.orders[0].egLines&&null!==orderSummary.orders[0].egLines)for(var egL=0;egL<orderSummary.orders[0].egLines.length;egL++){if((("self"!=orderSummary.orders[0].egLines[egL].itemActionType||"INTERNET"!=orderSummary.orders[0].egLines[egL].lineDisplayCategory&&"VOIP"!=orderSummary.orders[0].egLines[egL].lineDisplayCategory&&"VOIPLINE"!=orderSummary.orders[0].egLines[egL].itemCategory)&&("tech"!=orderSummary.orders[0].egLines[egL].itemActionType||"INTERNET"!=orderSummary.orders[0].egLines[egL].lineDisplayCategory&&"VOIP"!=orderSummary.orders[0].egLines[egL].lineDisplayCategory&&"VOIPLINE"!=orderSummary.orders[0].egLines[egL].itemCategory)||"UVERSE"!=orderSummary.orders[0].egLines[egL].productType)&&"Addon-Solutions"!=orderSummary.orders[0].egLines[egL].itemActionType||void 0===orderSummary.orders[0].egLines[egL].manageUrlIDP||null===orderSummary.orders[0].egLines[egL].manageUrlIDP||"true"!=orderSummary.orders[0].egLines[egL].enableIdpOGV2Flow)return!1;redirectFlag=!0}return redirectFlag},$scope.orderStatusCancelledCompleted=function(orderstatus){return void 0!==orderstatus&&null!=orderstatus&&["COMPLETE","COMPLETED","CANCELED","CANCELLED"].indexOf(orderstatus.toUpperCase())>=0},void 0!==orderSummary?($scope.orderListSize=orderSummary.orders.length,$rootScope.isAuth=!0,$rootScope.companyName=orderSummary.companyName,void 0!==orderSummary.searchType&&null!==orderSummary.searchType&&"UNAUTH"==orderSummary.searchType&&"true"!=sessionStorage.getItem("withoutSearch")&&($rootScope.isAuth=!1),console.log("$rootScope isAuth :: "+$rootScope.isAuth),sessionStorage.removeItem("withoutSearch"),sessionStorage.getItem("backToSummary")&&($rootScope.backToSummary=!0)):$scope.orderListSize=0,$rootScope.backToSummary||void 0===orderSummary||1!==$scope.orderListSize||void 0===orderSummary.orders[0].orderProductType||orderSummary.orders[0].orderProductType.toUpperCase()!==constants.wirelessProductType)if($rootScope.backToSummary||void 0===orderSummary||1!==$scope.orderListSize||void 0===orderSummary.orders[0].orderProductType||orderSummary.orders[0].orderProductType.toUpperCase()!==constants.dtvNowProductType)if(void 0!==orderSummary&&$scope.redirectWirelineToIDPNew(orderSummary))document.cookie="accessToken="+orderSummary.accessToken+"; domain=.att.com; path=/; secure",$("body").hide(),window.location.href=orderSummary.orders[0].egLines[0].manageUrlIDP+"details?appid=omhLegacy&orderid="+orderSummary.orders[0].orderNumber+"&zip="+orderSummary.orders[0].billingZip;else if(!$rootScope.backToSummary&&void 0!==orderSummary&&$scope.redirectToIDPPage(orderSummary,constants)){console.log("Setting egProductsIdpCookie::"),orderSummary.orders[0].searchType=orderSummary.searchType,orderSummary.orders[0].customerType=orderSummary.customerType;for(var orders=[],ordernumber=0;ordernumber<orderSummary.orders.length;ordernumber++){var eLines=[];if(void 0!==orderSummary.orders[ordernumber].egLines&&null!==orderSummary.orders[ordernumber].egLines)for(egL=0;egL<orderSummary.orders[ordernumber].egLines.length;egL++)if(void 0!==orderSummary.orders[ordernumber].egLines[egL]){var egLine={};egLine="cease"==orderSummary.orders[ordernumber].egLines[egL].itemActionType?{productName:orderSummary.orders[ordernumber].egLines[egL].productName,packageCode:orderSummary.orders[ordernumber].egLines[egL].packageCode,productStatus:orderSummary.orders[ordernumber].egLines[egL].productStatus,productType:orderSummary.orders[ordernumber].egLines[egL].productType,packageName:orderSummary.orders[ordernumber].egLines[egL].packageName,lineDisplayCategory:orderSummary.orders[ordernumber].egLines[egL].lineDisplayCategory,itemCategory:orderSummary.orders[ordernumber].egLines[egL].itemCategory,deliveryDate:orderSummary.orders[ordernumber].egLines[egL].deliveryDate,pricePlanCode:orderSummary.orders[ordernumber].egLines[egL].pricePlanCode,workOrderId:orderSummary.orders[ordernumber].egLines[egL].workOrderID,itemActionType:orderSummary.orders[ordernumber].egLines[egL].itemActionType,encryptedDtvParams:orderSummary.orders[ordernumber].encryptedDtvParams}:{productName:orderSummary.orders[ordernumber].egLines[egL].productName,packageCode:orderSummary.orders[ordernumber].egLines[egL].packageCode,productStatus:orderSummary.orders[ordernumber].egLines[egL].productStatus,productType:orderSummary.orders[ordernumber].egLines[egL].productType,packageName:orderSummary.orders[ordernumber].egLines[egL].packageName,lineDisplayCategory:orderSummary.orders[ordernumber].egLines[egL].lineDisplayCategory,itemCategory:orderSummary.orders[ordernumber].egLines[egL].itemCategory,deliveryDate:orderSummary.orders[ordernumber].egLines[egL].deliveryDate,pricePlanCode:orderSummary.orders[ordernumber].egLines[egL].pricePlanCode,changeAppointmentUrl:orderSummary.orders[ordernumber].egLines[egL].changeAppointmentUrlIDP,appointment:orderSummary.orders[ordernumber].egLines[egL].appointment,workOrderId:orderSummary.orders[ordernumber].egLines[egL].workOrderID,itemActionType:orderSummary.orders[ordernumber].egLines[egL].itemActionType,encryptedDtvParams:orderSummary.orders[ordernumber].encryptedDtvParams},eLines.push(egLine)}var order={orderNumber:orderSummary.orders[ordernumber].orderNumber,zipCode:orderSummary.orders[ordernumber].billingZip,ban:orderSummary.orders[ordernumber].ban,orderItemActionId:orderSummary.orders[ordernumber].orderItemActionId,orderItemReferenceNumber:orderSummary.orders[ordernumber].orderItemReferenceNumber,orderDate:orderSummary.orders[ordernumber].orderDate,orderTime:orderSummary.orders[ordernumber].orderTime,orderStatus:orderSummary.orders[ordernumber].orderStatus,orderLevelStatus:orderSummary.orders[ordernumber].orderLevelStatus,omsOrderId:orderSummary.orders[ordernumber].omsOrderId,orderProductType:orderSummary.orders[ordernumber].orderProductType,nfflOrder:orderSummary.orders[ordernumber].nfflOrder,customerType:orderSummary.orders[ordernumber].customerType,orderDueDate:orderSummary.orders[ordernumber].orderDueDate,singleDispatchOrder:orderSummary.orders[ordernumber].singleDispatchOrder,searchType:orderSummary.orders[ordernumber].searchType,egLines:eLines};orders.push(order)}document.cookie="egProductsIdp="+JSON.stringify(orders)+"; domain=.att.com; path=/; secure",console.log("Setting egProductsIdpSession in session storage::"),sessionStorage.setItem("egProductsIdpSession",JSON.stringify(orderSummary.orders)),$("body").hide(),window.location.href=orderSummary.orders[0].egLines[0].manageUrlIDP}else if(!$rootScope.backToSummary&&void 0!==orderSummary&&1===$scope.orderListSize&&"true"!==orderSummary.orders[0].isInFlightOrder&&(!$scope.orderStatusCancelledCompleted(orderSummary.orders[0].orderStatus)&&!$rootScope.isAuth||$rootScope.isAuth)&&(orderSummary.orders[0].orderProductType.toUpperCase()===constants.dtvOrderProductType&&"true"!=orderSummary.orders[0].smbOrder||orderSummary.orders[0].orderProductType.toUpperCase()===constants.uverseProductType||orderSummary.orders[0].orderProductType.toUpperCase()===constants.WLLProductType&&"true"!=orderSummary.orders[0].smbOrder)||"true"===orderSummary.orders[0].singleDispatchOrder&&"BUNDLE"===orderSummary.orders[0].orderProductType.toUpperCase()&&$rootScope.isAuth)$("body").hide(),window.location.href=orderSummary.orders[0].egLines[0].manageUrl;else{$rootScope.orderSummaryDetails=orderSummary,current.orderSummaryDetails=$rootScope.orderSummaryDetails,$scope.checkIfSingleDispatch=function(item,eGItemsList,itemNo,noOfUverseProducts){if(void 0!==eGItemsList&&eGItemsList.length>0)for(var index=0;index<eGItemsList.length;index++){if(null!=item.workOrderID&&void 0!==item.workOrderID&&item.workOrderID===eGItemsList[index].workOrderID&&index!==itemNo||item.productType===constants.uverseProductType&&noOfUverseProducts>1&&"COMS"===$rootScope.orderSummaryDetails.orders[i].orderSource){item.isSingleDispatch=!0;break}item.isSingleDispatch=!1}},$scope.isCommonStatusItem=function(item,uversItemList,itemNo){if(void 0!==uversItemList&&uversItemList.length>0)for(var index=0;index<uversItemList.length;index++){if(item.productType===constants.uverseProductType&&null!=item.productStatus&&void 0!==item.productStatus&&item.productStatus===uversItemList[index].productStatus&&item.productType==uversItemList[index].productType&&index!==itemNo){item.isCommonStatus=!0;break}item.isCommonStatus=!1}},$scope.statusSortCodeList=[{status:"Action required - Update payment method",value:"1"},{status:"Action required -  Consent to shipping date change",value:"2"},{status:"Action required - Pending T & C acceptance",value:"3"},{status:"Action required",value:"4"},{status:"Pendingapproval",value:"5"},{status:"PendingPortApproval",value:"6"},{status:"PortOrderItemPending",value:"6"},{status:"PortOrderItemPending",value:"6"},{status:"Pending",value:"7"},{status:"Processing",value:"8"},{status:"Readyforstorepick-up",value:"9"},{status:"Partiallyshipped",value:"10"},{status:"Partiallycanceled",value:"11"},{status:"Shipped",value:"12"},{status:"Delivered",value:"13"},{status:"Complete",value:"14"},{status:"Backordered",value:"15"},{status:"Returned",value:"16"},{status:"Canceled",value:"17"},{status:"Cancelled",value:"17"},{status:"Preparingtoship",value:"18"},{status:"InProgress",value:"19"},{status:"Active",value:"20"},{status:"Ceased",value:"21"},{status:"Suspended",value:"22"}],$scope.sortingStatuswithValues=function(item){null!=item.productStatus&&void 0!==item.productStatus&&angular.forEach($scope.statusSortCodeList,function(statusSortCode,statusSortKey){item.statusKey.toUpperCase()===statusSortCode.status.toUpperCase()&&(item.statusSortCode=statusSortCode.value)})};for(var i=0;i<$rootScope.orderSummaryDetails.orders.length;i++){var summaryItems=[],commonUverseSD=[],noOfUverseProducts=0;if(void 0!==$rootScope.orderSummaryDetails.orders[i].wirelessLines&&$rootScope.orderSummaryDetails.orders[i].wirelessLines.length>0)for(var j=0;j<$rootScope.orderSummaryDetails.orders[i].wirelessLines.length;j++)void 0!==$rootScope.orderSummaryDetails.orders[i].wirelessLines[j]&&("Action required - Update payment method"!==$rootScope.orderSummaryDetails.orders[i].wirelessLines[j].productStatus&&"Action required - Consent to shipping date change"!==$rootScope.orderSummaryDetails.orders[i].wirelessLines[j].productStatus&&"Action required - Pending T&C Acceptance"!==$rootScope.orderSummaryDetails.orders[i].wirelessLines[j].productStatus||($scope.orderErrorFlag="true"),$scope.sortingStatuswithValues($rootScope.orderSummaryDetails.orders[i].wirelessLines[j]),summaryItems.push($rootScope.orderSummaryDetails.orders[i].wirelessLines[j]));if(void 0!==$rootScope.orderSummaryDetails.orders[i].egLines&&$rootScope.orderSummaryDetails.orders[i].egLines.length>0){for(var egL=0;egL<$rootScope.orderSummaryDetails.orders[i].egLines.length;egL++)void 0!==$rootScope.orderSummaryDetails.orders[i].egLines[egL]&&($scope.sortingStatuswithValues($rootScope.orderSummaryDetails.orders[i].egLines[egL]),summaryItems.push($rootScope.orderSummaryDetails.orders[i].egLines[egL]),$rootScope.orderSummaryDetails.orders[i].egLines[egL].productType===constants.uverseProductType&&noOfUverseProducts++);for(y=0;y<summaryItems.length;y++)$scope.isCommonStatusItem(summaryItems[y],summaryItems,y),void 0!==summaryItems[y]&&summaryItems[y].isCommonStatus&&"COMS"!==$rootScope.orderSummaryDetails.orders[i].orderSource&&commonUverseSD.push(summaryItems[y])}if(void 0!==$rootScope.orderSummaryDetails.orders[i].dtvNowLines&&$rootScope.orderSummaryDetails.orders[i].dtvNowLines.length>0)for(var dtn=0;dtn<$rootScope.orderSummaryDetails.orders[i].dtvNowLines.length;dtn++)if(void 0!==$rootScope.orderSummaryDetails.orders[i].dtvNowLines[dtn]&&summaryItems.push($rootScope.orderSummaryDetails.orders[i].dtvNowLines[dtn]),void 0!==$rootScope.orderSummaryDetails.orders[i].dtvNowLines[dtn]&&void 0!==$rootScope.orderSummaryDetails.orders[i].dtvNowLines[dtn].equipments&&$rootScope.orderSummaryDetails.orders[i].dtvNowLines[dtn].equipments.length>0)for(var equip=0;equip<$rootScope.orderSummaryDetails.orders[i].dtvNowLines[dtn].equipments.length;equip++)void 0!==$rootScope.orderSummaryDetails.orders[i].dtvNowLines[dtn].equipments[equip]&&($scope.sortingStatuswithValues($rootScope.orderSummaryDetails.orders[i].dtvNowLines[dtn].equipments[equip]),summaryItems.push($rootScope.orderSummaryDetails.orders[i].dtvNowLines[dtn].equipments[equip]));if("SAMEDAY"===$rootScope.orderSummaryDetails.orders[i].orderType&&(null!=$rootScope.orderSummaryDetails.orders[i].pendingTnC&&void 0!=$rootScope.orderSummaryDetails.orders[i].pendingTnC&&($rootScope.orderSummaryDetails.orders[i].showEnjoyTnC=!0),null!=$rootScope.orderSummaryDetails.orders[i].deliveryDetails&&void 0!=$rootScope.orderSummaryDetails.orders[i].deliveryDetails&&null!=$rootScope.orderSummaryDetails.orders[i].deliveryDetails.appointmentDate&&null!=$rootScope.orderSummaryDetails.orders[i].deliveryDetails.appointmentTime&&($rootScope.orderSummaryDetails.orders[i].showAppointmentDetails=!0)),summaryItems.length>0&&($rootScope.orderSummaryDetails.orders[i].summaryItems=summaryItems),summaryItems.length>0&&commonUverseSD.length>1&&($rootScope.orderSummaryDetails.orders[i].isUverseCommonStatus=!0,$rootScope.orderSummaryDetails.orders[i].summaryItems.commonUverseSD=commonUverseSD),summaryItems.length>0&&void 0!==$rootScope.orderSummaryDetails.orders[i].singleDispatchOrder&&$rootScope.orderSummaryDetails.orders[i].singleDispatchOrder){for(var singleDispatchItems=[],y=0;y<$rootScope.orderSummaryDetails.orders[i].summaryItems.length;y++)$scope.checkIfSingleDispatch($rootScope.orderSummaryDetails.orders[i].summaryItems[y],$rootScope.orderSummaryDetails.orders[i].summaryItems,y,noOfUverseProducts),void 0!==$rootScope.orderSummaryDetails.orders[i].summaryItems[y]&&$rootScope.orderSummaryDetails.orders[i].summaryItems[y].isSingleDispatch&&"COMS"===$rootScope.orderSummaryDetails.orders[i].orderSource&&singleDispatchItems.push($rootScope.orderSummaryDetails.orders[i].summaryItems[y]);singleDispatchItems.length>1&&($rootScope.orderSummaryDetails.orders[i].summaryItems.singleDispatchItems=singleDispatchItems)}}for(void 0!==$rootScope.zipCode&&null!==$rootScope.zipCode&&($log.log("Summary zip  "+$rootScope.zipCode),localStorage.setItem("dtmZipCode",$rootScope.zipCode)),i=0;i<orderSummary.orders.length;i++)if(void 0!==orderSummary.orders[i].orderProductType&&null!==orderSummary.orders[i].orderProductType&&null!=orderSummary.orders[i].account&&void 0!=orderSummary.orders[i].account&&void 0!==orderSummary.orders[i].account.accountType&&null!==orderSummary.orders[i].account.accountType&&(console.log("customerType::"+orderSummary.orders[i].account.accountType),$rootScope.current.customerType=orderSummary.orders[i].account.accountType,orderSummary.orders[i].orderProductType===constants.wirelessProductType)){sessionStorage.setItem("liabilityType",orderSummary.orders[i].account.accountType);break}void 0!=ddo&&(ddo.disableAutoPageLoad(),$scope.setDTMPageLoadAndGlobalUserVariables()),$scope.setReportingAttributesSummaryPage(orderSummary)}else $rootScope.dtvOrderDetails=orderSummary,current.dtvOrderDetails=orderSummary,current.orderDetails=void 0,$rootScope.setView("dtvNowOrderDetail");else $rootScope.orderDetails=orderSummary,current.orderDetails=orderSummary,$rootScope.setView("orderDetails");$scope.checkPreviousItemStatus=function(productStatus){return void 0!=$scope.previousStatus&&null!=$scope.previousStatus&&$scope.previousStatus.toUpperCase().trim()===productStatus.toUpperCase().trim()||($scope.previousStatus=productStatus,!1)},$scope.termsClick=function(){ReportInterfaceAngular.setLinkTrack("Terms and conditions","Body","https://www.att.com/tc")},$scope.wirelessWirelineBundleOrderRedirection=function(orderSummary){for(i=0;i<orderSummary.orders.length;i++)if(void 0!==orderSummary.orders[i].orderProductType&&null!==orderSummary.orders[i].orderProductType&&"WIRELESS"===orderSummary.orders[i].orderProductType)return!0},$scope.viewOrManageOrder=function(order,item,changeAppointment,linkName){if(console.log("orderId info : "+order.orderNumber+"productType: "+order.orderProductType),$rootScope.current.OrderID="",$rootScope.current.zipcode="",sessionStorage.setItem("isSummaryPageAccessed","true"),void 0!==order.smbOrder&&"true"==order.smbOrder&&void 0!=item.productType&&"WLLDATA"==item.productType.toUpperCase().trim())$log.log("order is SMB : "+order.IsSMB+"productType: "+item.productType);else if(("self"!=item.itemActionType||"INTERNET"!=item.lineDisplayCategory&&"VOIP"!=item.lineDisplayCategory)&&("tech"!=item.itemActionType||"INTERNET"!=item.lineDisplayCategory&&"VOIP"!=item.lineDisplayCategory)||void 0===item.manageUrlIDP||null===item.manageUrlIDP||"UVERSE"!=item.productType||"true"!=item.enableIdpOGV2Flow||$scope.wirelessWirelineBundleOrderRedirection(orderSummary))item.productType.toUpperCase()===constants.wirelessProductType?($rootScope.current.OrderID=order.orderNumber,$rootScope.current.orderDetails={},$rootScope.current.orderDetails.orders=[],order.orderProductType=item.productType,$rootScope.current.orderDetails.orders.push(order),$rootScope.backToSummary=!0,sessionStorage.setItem("backToSummary",$rootScope.backToSummary),linkDestinationUrl="/checkmyorder/orderDetails.rt",$scope.reportManageViewEvents(order,item,$rootScope.isAuth,linkName,linkDestinationUrl,"setServicesWLSItems",order.summaryItems),$scope.setView("orderDetails")):item.productType.toUpperCase()===constants.dtvNowServiceProductType||item.productType.toUpperCase()===constants.dtvNowDeviceProductType?($rootScope.current.dtvOrderDetails={},$rootScope.current.dtvOrderDetails.orders=[],order.orderProductType=item.productType,$rootScope.current.dtvOrderDetails.orders.push(order),$rootScope.current.orderDetails={},$rootScope.backToSummary=!0,$scope.setView("dtvNowOrderDetail"),sessionStorage.setItem("backToSummary",$rootScope.backToSummary)):$rootScope.isAuth||$cookies.tAuthNState?(console.log("CDEX-58264::line 887:: last else in method::"),console.log("$cookies.tAuthNState =  "+$cookies.tAuthNState),changeAppointment?changeAppointment&&(window.location.href=item.changeAppointmentUrl,setTimeout(0)):"change"==item.itemActionType?$scope.redirectToIDPForChangeOrder(order,item,linkName):(linkDestinationUrl=item.manageUrl,$scope.reportManageViewEvents(order,item,$rootScope.isAuth,linkName,linkDestinationUrl,"",order.summaryItems),window.location.href=item.manageUrl,setTimeout(0))):(console.log("CDEX-58264::line 761:: "),console.log("$cookies.tAuthNState =  "+$cookies.tAuthNState),sessionStorage.setItem("productType",item.productType),sessionStorage.setItem("orderProductType",order.orderProductType),order.orderProductType===constants.dtvOrderProductType||item.productType===constants.dtvOrderProductType?(console.log("CDEX-58264::line 765:: "),void 0!=order.isLegacyItem&&!1!==order.isLegacyItem||null==item||null==item.manageUrl||"COMPLETED"==order.orderStatus.toUpperCase().trim()||"COMPLETO"==order.orderStatus.toUpperCase().trim()||"COMPLETE"==order.orderStatus.toUpperCase().trim()||"CANCELLED"==order.orderStatus.toUpperCase().trim()||"CANCELDO"==order.orderStatus.toUpperCase().trim()||"CANCELED"==order.orderStatus.toUpperCase().trim()||"CANCELLED"==item.productStatus.toUpperCase().trim()||"CANCELED"==item.productStatus.toUpperCase().trim()||"COMPLETE"==item.productStatus.toUpperCase().trim()||"COMPLETED"==item.productStatus.toUpperCase().trim()?(linkDestinationUrl="/checkmyorder/login.rt",sessionStorage.setItem("orderNum",order.orderNumber),sessionStorage.setItem("orderProductType",order.orderProductType),console.log("CDEX-58264::line 806:: "+HALOCConfig.HALOCFlag),$rootScope.isAuth?void 0!==orderSummary.orders[0].egLines[0].manageUrlIDP&&null!==orderSummary.orders[0].egLines[0].manageUrlIDP?window.location.href=item.manageUrlIDP:window.location.href=item.manageUrl:0==HALOCConfig.HALOCFlag?$rootScope.setView("login"):(console.log("CDEX-58264::line 818:: "+HALOCConfig.HALOCFlag),$rootScope.authenticateUserWithHALOC())):changeAppointment?(window.location.href=item.changeAppointmentUrl,setTimeout(0)):(console.log("CDEX-58264::line 778:: "),linkDestinationUrl=item.manageUrl,window.location.href=item.manageUrl,setTimeout(0))):order.OrderProductType!=constants.uverseProductType&&order.OrderProductType!=constants.WLLDataProductType&&order.OrderProductType!=constants.WLLVoiceProductType&&item.productType!=constants.uverseProductType&&item.productType!=constants.WLLDataProductType&&item.productType!=constants.WLLVoiceProductType||(console.log("CDEX-58264::line 826:: "),"CANCELLED"!=item.productStatus.toUpperCase().trim()&&"COMPLETO"!=item.productStatus.toUpperCase().trim()&&"CANCELDO"!=item.productStatus.toUpperCase().trim()&&"CANCELED"!=item.productStatus.toUpperCase().trim()&&"COMPLETE"!=item.productStatus.toUpperCase().trim()&&"COMPLETED"!=item.productStatus.toUpperCase().trim()||"true"!=order.IsSMB||"true"!=order.smbOrder?"COMPLETED"==order.orderStatus.toUpperCase().trim()||"COMPLETO"==order.orderStatus.toUpperCase().trim()||"COMPLETE"==order.orderStatus.toUpperCase().trim()||"CANCELLED"==order.orderStatus.toUpperCase().trim()||"CANCELDO"==order.orderStatus.toUpperCase().trim()||"CANCELED"==order.orderStatus.toUpperCase().trim()||"CANCELLED"==item.productStatus.toUpperCase().trim()||"CANCELED"==item.productStatus.toUpperCase().trim()||"COMPLETE"==item.productStatus.toUpperCase().trim()||"COMPLETED"==item.productStatus.toUpperCase().trim()||"true"==order.smbOrder?(linkDestinationUrl="/checkmyorder/login.rt",sessionStorage.setItem("orderNum",order.orderNumber),sessionStorage.setItem("orderProductType",order.orderProductType),console.log("CDEX-58264::line 845:: "),$rootScope.isAuth?void 0!==orderSummary.orders[0].egLines[0].manageUrlIDP&&null!==orderSummary.orders[0].egLines[0].manageUrlIDP?window.location.href=item.manageUrlIDP:window.location.href=item.manageUrl:0==HALOCConfig.HALOCFlag?$rootScope.setView("login"):(console.log("CDEX-58264::line 857:: authenticateUserWithHALOC = "+HALOCConfig.HALOCFlag),$rootScope.authenticateUserWithHALOC())):changeAppointment?changeAppointment&&(window.location.href=item.changeAppointmentUrl,setTimeout(0)):"change"!=item.itemActionType||order.OrderProductType!=constants.uverseProductType&&item.productType!=constants.uverseProductType?(console.log("CDEX-58264::line 870:: changeAppointment:: "+changeAppointment),linkDestinationUrl=item.manageUrl,$scope.reportManageViewEvents(order,item,$rootScope.isAuth,linkName,linkDestinationUrl,"",order.summaryItems),window.location.href=item.manageUrl,setTimeout(0)):$scope.redirectToIDPForChangeOrder(order,item,linkName):(linkDestinationUrl=item.manageUrl,window.location.href=item.manageUrl,setTimeout(0))));else{document.cookie="accessToken="+orderSummary.accessToken+"; domain=.att.com; path=/; secure",$("body").hide(),$scope.reportManageViewEvents(order,item,$rootScope.isAuth,linkName,item.manageUrlIDP,"setServicesNonWLSItems",order.summaryItems),!1===$scope.fromSummary?window.location.href=item.manageUrlIDP+"details?appid=omhLegacy&orderid="+order.orderNumber+"&zip="+order.billingZip:window.location.href=item.manageUrlIDP+"details?appid=omhLegacy&orderid="+order.orderNumber+"&zip="+order.billingZip+"&lob=uverse"}},$scope.redirectToIDPForChangeOrder=function(order,item,linkName){for(var orders=[],ordernumber=0;ordernumber<orderSummary.orders.length;ordernumber++)if(orderSummary.orders[ordernumber].orderNumber==order.orderNumber){var eLines=[];if(void 0!==orderSummary.orders[ordernumber].egLines&&null!==orderSummary.orders[ordernumber].egLines)for(var egL=0;egL<orderSummary.orders[ordernumber].egLines.length;egL++){var egLine={};void 0!==orderSummary.orders[ordernumber].egLines[egL]&&(egLine={productName:orderSummary.orders[ordernumber].egLines[egL].productName,packageCode:orderSummary.orders[ordernumber].egLines[egL].packageCode,productStatus:orderSummary.orders[ordernumber].egLines[egL].productStatus,productType:orderSummary.orders[ordernumber].egLines[egL].productType,packageName:orderSummary.orders[ordernumber].egLines[egL].packageName,lineDisplayCategory:orderSummary.orders[ordernumber].egLines[egL].lineDisplayCategory,itemCategory:orderSummary.orders[ordernumber].egLines[egL].itemCategory,deliveryDate:orderSummary.orders[ordernumber].egLines[egL].deliveryDate,pricePlanCode:orderSummary.orders[ordernumber].egLines[egL].pricePlanCode,changeAppointmentUrl:orderSummary.orders[ordernumber].egLines[egL].changeAppointmentUrlIDP,appointment:orderSummary.orders[ordernumber].egLines[egL].appointment,workOrderId:orderSummary.orders[ordernumber].egLines[egL].workOrderID,itemActionType:orderSummary.orders[ordernumber].egLines[egL].itemActionType,encryptedDtvParams:orderSummary.orders[ordernumber].encryptedDtvParams},eLines.push(egLine))}var changeOrder={orderNumber:orderSummary.orders[ordernumber].orderNumber,ban:orderSummary.orders[ordernumber].ban,orderItemActionId:orderSummary.orders[ordernumber].orderItemActionId,orderItemReferenceNumber:orderSummary.orders[ordernumber].orderItemReferenceNumber,orderDate:orderSummary.orders[ordernumber].orderDate,orderTime:orderSummary.orders[ordernumber].orderTime,orderStatus:orderSummary.orders[ordernumber].orderStatus,orderLevelStatus:orderSummary.orders[ordernumber].orderLevelStatus,omsOrderId:orderSummary.orders[ordernumber].omsOrderId,orderProductType:orderSummary.orders[ordernumber].orderProductType,nfflOrder:orderSummary.orders[ordernumber].nfflOrder,customerType:orderSummary.orders[ordernumber].customerType,orderDueDate:orderSummary.orders[ordernumber].orderDueDate,singleDispatchOrder:orderSummary.orders[ordernumber].singleDispatchOrder,searchType:orderSummary.searchType,egLines:eLines};orders.push(changeOrder)}document.cookie="egProductsIdp="+JSON.stringify(orders)+"; domain=.att.com; path=/; secure",console.log("Setting egProductsIdpSession in session storage::"),sessionStorage.setItem("egProductsIdpSession",JSON.stringify(orders)),$("body").hide(),linkDestinationUrl=item.manageUrlIDP,$scope.reportManageViewEvents(order,item,$rootScope.isAuth,linkName,linkDestinationUrl,"",order.summaryItems),window.location.href=item.manageUrlIDP,setTimeout(0)},$scope.checkCompleteOrCancellOrderStatus=function(order,items){return void 0!==order.orderStatus&&null!=order.orderStatus&&"COMPLETE"!=order.orderStatus.toUpperCase()&&"CANCELED"!=order.orderStatus.toUpperCase()&&"CANCELLED"!=order.orderStatus.toUpperCase()&&void 0!==items&&void 0!==items.productStatus&&null!=items.productStatus&&"COMPLETE"!=items.productStatus.toUpperCase()&&"CANCELED"!=items.productStatus.toUpperCase()&&"CANCELLED"!=items.productStatus.toUpperCase()},$scope.reportManageViewEvents=function(order,item,isAuthenicated,linkName,linkDestinationUrl,services,itemsList){var eosSearchId="",listOfServices="",eosIdType="";"setServicesWLSItems"===services?listOfServices=$rootScope.setServicesWLSItems(order,item):"setServicesSDItems"===services?listOfServices=$rootScope.setServicesSDItems(itemsList):"setServicesNonWLSItems"===services&&(listOfServices=$rootScope.setServicesSDItems(itemsList));var eosOrderDetails="",accountNumber="",shipDateorDueDate="",orderStatus="",appointmentDate="",appointmentTime="",installType="",accountType="",orderDate="";null!=order.account&&void 0!=order.account&&(accountNumber=order.account.accountNumber,accountType=order.account.accountType),eosOrderDetails=accountNumber+"~"+order.orderNumber,null!=item.estimatedShipDate&&void 0!=item.estimatedShipDate&&(shipDateorDueDate=item.estimatedShipDate),null!=order.orderStatus&&(orderStatus=order.orderStatus),null!=item.appointment&&void 0!==item.appointment&&(null!=item.appointment.appointmentDate&&void 0!==item.appointment.appointmentDate&&(appointmentDate=item.appointment.appointmentDate),null!=item.appointment.installStartTime&&null!=item.appointment.installEndTime&&(appointmentTime=item.appointment.installStartTime+"-"+item.appointment.installEndTime),null!=item.appointment.installationType&&(installType=item.appointment.installationType)),""==installType&&null!=item.itemActionType?installType=item.itemActionType:"WIRELESS"!=item.productType&&(installType="PROFESSIONAL"),null!=order.orderDate&&(orderDate=order.orderDate),eosOrderDetails=eosOrderDetails+"~"+shipDateorDueDate.trim()+"~"+orderStatus.trim()+"~"+appointmentDate.trim()+"~"+appointmentTime.trim()+"~"+installType.trim()+"~~"+accountType+"~"+orderDate,"true"===isAuthenicated||!0===isAuthenicated?void 0!==sessionStorage.getItem("userName")&&"undefined"!==sessionStorage.getItem("userName")&&(eosSearchId=sessionStorage.getItem("userName"),eosIdType=""):void 0!==sessionStorage.getItem("OrderID")&&"undefined"!==sessionStorage.getItem("OrderID")&&(eosSearchId=sessionStorage.getItem("OrderID"),eosIdType="Order Number");var fulldataList={eosSearchId:eosSearchId,eosOrderDetails:eosOrderDetails,eosOriginSource:"CMO Landing",listOfServices:listOfServices,eosIdType:eosIdType};ReportInterfaceAngular.setEventTrackSubmit("CMO_Manage_View_Details_Submit",linkName,"Body",linkDestinationUrl,fulldataList),current.appevent="CMO_Manage_View_Details_Submit",$scope.dtmCustomNotification("formResponse",current.appevent,"0","1",fulldataList,"","")},$scope.viewHomePage=function(){ReportInterfaceAngular.setLinkTrack($rootScope.content.M_7_70_1_HUB_Order_Summary.PageLevelItems.Links.BackToSearch.Label,"Body","/checkmyorder/omhub.rt"),sessionStorage.setItem("backToSummary",!1),$scope.backToSearchRedirectionFlag=backToSearchRedirectionConfig.backToSearchRedirectionFlag,$scope.backToSearchRedirectionFlag?window.location.href=backToSearchRedirectionConfig.backToSearchRedirectionUrl:$scope.setView("omhub")},$rootScope.setServicesSDItems=function(summaryItems){for(i=0;i<summaryItems.length;i++)0===i&&($scope.servicesSDItems=""),""!==$scope.servicesSDItems&&($scope.servicesSDItems=$scope.servicesSDItems+"| "),void 0!==summaryItems[i].itemCategory&&null!=summaryItems[i].itemCategory?"VBP"===summaryItems[i].itemCategory?$scope.servicesSDItems=$scope.servicesSDItems+"U-verse TV ~ 1":"HSIA"===summaryItems[i].itemCategory||"FBS"===summaryItems[i].itemCategory?$scope.servicesSDItems=$scope.servicesSDItems+"Internet ~ 1":"CVOIP"===summaryItems[i].itemCategory&&($scope.servicesSDItems=$scope.servicesSDItems+"Phone ~ 1"):void 0!==summaryItems[i].orderProductType&&null!=summaryItems[i].orderProductType&&("DIRECTV"===summaryItems[i].orderProductType.toUpperCase()?$scope.servicesSDItems=$scope.servicesSDItems+"DIRECTV ~ 1":"WLLVOICE"===summaryItems[i].orderProductType.toUpperCase()?$scope.servicesSDItems=$scope.servicesSDItems+"Fixed Wireless Phone ~ 1":"WLLDATA"===summaryItems[i].orderProductType.toUpperCase()&&($scope.servicesSDItems=$scope.servicesSDItems+"Fixed Wireless Internet ~ 1"));return $scope.servicesSDItems},$rootScope.setServicesNonWLSItems=function(nonWLSItem){return"DIRECTV"===nonWLSItem.orderProductType.toUpperCase()?"DIRECTV ~ 1":"WLLVOICE"===nonWLSItem.orderProductType.toUpperCase()?"Fixed Wireless Phone ~ 1":"WLLDATA"===nonWLSItem.orderProductType.toUpperCase()?"Fixed Wireless Internet ~ 1":void 0},$rootScope.setServicesWLSItems=function(Order,item){if(void 0!==Order.productType){if(Order.productType.toUpperCase()===constants.wirelessProductType||"WLS-EG"===Order.ProductType.toUpperCase()&&(""===item.orderProductType||void 0===item.orderProductType||"WIRELESS_PRODUCT"===item.orderProductType.toUpperCase()||"WIRELESS"===item.orderProductType.toUpperCase()))return $rootScope.content.M_7_70_1_HUB_Order_Summary.OrderSummaryWireless.FieldLabels.Wireless.Label+" ~ 1";if("DIRECTV"===Order.ProductType.toUpperCase())return"DIRECTV ~ 1"}},$scope.setContentHeadingNonWLSItems=function(nonWLSItem){if(null!=nonWLSItem){if("VBP"===nonWLSItem||"VideoBasic"===nonWLSItem)return $rootScope.content.M_7_70_1_HUB_Order_Summary.OrderSummaryEG.FieldLabels.TV.Label;if("HSIA"===nonWLSItem||"FBS"===nonWLSItem)return $rootScope.content.M_7_70_1_HUB_Order_Summary.OrderSummaryEG.FieldLabels.Internet.Label;if("CVOIP"===nonWLSItem)return $rootScope.content.M_7_70_1_HUB_Order_Summary.OrderSummaryEG.FieldLabels.Phone.Label;if("WLLVOICE"===nonWLSItem)return $rootScope.content.M_7_70_1_HUB_Order_Summary.OrderSummaryEG.FieldLabels.Phone.Label;if("WLLDATA"===nonWLSItem)return $rootScope.content.M_7_70_1_HUB_Order_Summary.OrderSummaryEG.FieldLabels.Internet.Label}},$scope.setContentHeadingForSDItems=function(summaryItems){var plusSign=$rootScope.content.M_7_70_1_HUB_Order_Summary.OrderSummaryCommon.FieldLabels.SingleDispatchPlusSign.Label;for(i=0;i<summaryItems.length;i++)0===i&&($scope.summaryItemheading=""),""!==$scope.summaryItemheading&&($scope.summaryItemheading=$scope.summaryItemheading+plusSign),"VBP"===summaryItems[i].itemCategory||"VideoBasic"===summaryItems[i].itemCategory?$scope.summaryItemheading=$scope.summaryItemheading+$rootScope.content.M_7_70_1_HUB_Order_Summary.OrderSummaryEG.FieldLabels.TV.Label:"HSIA"===summaryItems[i].itemCategory||"FBS"===summaryItems[i].itemCategory?$scope.summaryItemheading=$scope.summaryItemheading+$rootScope.content.M_7_70_1_HUB_Order_Summary.OrderSummaryEG.FieldLabels.Internet.Label:"CVOIP"===summaryItems[i].itemCategory?$scope.summaryItemheading=$scope.summaryItemheading+$rootScope.content.M_7_70_1_HUB_Order_Summary.OrderSummaryEG.FieldLabels.Phone.Label:"DIRECTV"===summaryItems[i].orderProductType.toUpperCase()&&!0===summaryItems[i].singleDispatchFlag?$scope.summaryItemheading=$scope.summaryItemheading+$rootScope.content.M_7_70_1_HUB_Order_Summary.OrderSummaryEG.FieldLabels.TV.Label:"WLLVOICE"===summaryItems[i].orderProductType.toUpperCase()?$scope.summaryItemheading=$scope.summaryItemheading+$rootScope.content.M_7_70_1_HUB_Order_Summary.OrderSummaryEG.FieldLabels.Phone.Label:"WLLDATA"===summaryItems[i].orderProductType.toUpperCase()&&($scope.summaryItemheading=$scope.summaryItemheading+$rootScope.content.M_7_70_1_HUB_Order_Summary.OrderSummaryEG.FieldLabels.Internet.Label);return $scope.summaryItemheading},$scope.setMessageForInflightProduct=function(productStatus,isMobile){return $scope.inflightMsg="",void 0!==productStatus&&null!=productStatus&&("CANCELED"==productStatus.toUpperCase().trim()||"CANCELLED"==productStatus.toUpperCase().trim()?$scope.inflightMsg=$rootScope.content.M_7_70_1_HUB_Order_Summary.PageLevelItems.Notes.WeCanceledYourOrder.Description+"<a target='_blank' href='https://www.att.com/stores'>"+$rootScope.content.M_7_70_1_HUB_Order_Summary.PageLevelItems.Notes.VisitATTStore.Description+"</a>":"RECEIVED"==productStatus.toUpperCase().trim()?$scope.inflightMsg=$rootScope.content.M_7_70_1_HUB_Order_Summary.PageLevelItems.Notes.WeGotYourOrder.Description:"INPROGRESS"==productStatus.toUpperCase().trim()&&($scope.inflightMsg=1==isMobile?$rootScope.content.M_7_70_1_HUB_Order_Summary.PageLevelItems.Notes.WeNeedMoreInfo.Description+" <a target='_blank' href='tel:"+$rootScope.content.M_7_70_1_HUB_Order_Summary.PageLevelItems.Notes.PhoneNumber.Description+"'>"+$rootScope.content.M_7_70_1_HUB_Order_Summary.PageLevelItems.Notes.PhoneNumber.Description+"</a> "+$rootScope.content.M_7_70_1_HUB_Order_Summary.PageLevelItems.Notes.WeCanMoveAlong.Description:$rootScope.content.M_7_70_1_HUB_Order_Summary.PageLevelItems.Notes.WeNeedMoreInfo.Description+" "+$rootScope.content.M_7_70_1_HUB_Order_Summary.PageLevelItems.Notes.PhoneNumber.Description+" "+$rootScope.content.M_7_70_1_HUB_Order_Summary.PageLevelItems.Notes.WeCanMoveAlong.Description)),$scope.inflightMsg},$scope.setMessageForCease=function(productStatus,dueDate){return $scope.inflightMsg="",void 0!==productStatus&&null!=productStatus&&("CANCELED"==productStatus.toUpperCase().trim()||"CANCELLED"==productStatus.toUpperCase().trim()?$scope.ceaseMsg=$rootScope.content.M_7_70_1_HUB_Order_Summary.PageLevelItems.FieldLabels.CancellationInfoStatus.Label:"COMPLETE"==productStatus.toUpperCase().trim()?($scope.ceaseMsg=$rootScope.content.M_7_70_1_HUB_Order_Summary.PageLevelItems.FieldLabels.CancellationInfoStatusMessage1.Label,$scope.ceaseMsg=$rootScope.replaceConsentString($scope.ceaseMsg,dueDate)):"INPROGRESS"==productStatus.toUpperCase().trim()&&($scope.ceaseMsg=$rootScope.content.M_7_70_1_HUB_Order_Summary.PageLevelItems.FieldLabels.CancellationInfoStatusMessage.Label,$scope.ceaseMsg=$rootScope.replaceConsentString($scope.ceaseMsg,dueDate))),$scope.ceaseMsg},$scope.setCeaseTitle=function(egItems){return $rootScope.replaceString($rootScope.content.M_7_70_1_HUB_Order_Summary.PageLevelItems.FieldLabels.CancellationInfoHeader.Label,$scope.setContentHeadingForSDItems(egItems))},$scope.setCeaseTitleForSingleItem=function(egItems){return $rootScope.replaceString($rootScope.content.M_7_70_1_HUB_Order_Summary.PageLevelItems.FieldLabels.CancellationInfoHeader.Label,$scope.setContentHeadingNonWLSItems(egItems))},$scope.decideViewOrManageButton=function(Item){return void 0!=Item&&void 0!==Item.productStatus&&null!=Item.productStatus&&"CANCELED"!=Item.productStatus.toUpperCase().trim()&&"CANCELLED"!=Item.productStatus.toUpperCase().trim()&&"DELIVERED"!=Item.productStatus.toUpperCase().trim()&&"SHIPPED"!=Item.productStatus.toUpperCase().trim()&&"COMPLETED"!=Item.productStatus.toUpperCase().trim()&&"COMPLETE"!=Item.productStatus.toUpperCase().trim()&&"ACTIVATED"!=Item.productStatus.toUpperCase().trim()&&"READYFORSTOREPICKUP"!=Item.productStatus.toUpperCase().trim()},$scope.addToCalendar=function(order,item){$rootScope.isViewLoading=!0,$rootScope.resetStatusError();var linkName=order.orderProductType+" "+item.productName+" Calendar";ReportInterfaceAngular.setLinkTrack(linkName,"Body");OSHPService.oshpGetAppointmentCalendarAPIServices(order,item,oshpData.useStubs,$rootScope).then(function(data){if(data&&data.Result&&"SUCCESS"==data.Result.Status){var $form=angular.element("<form/>").attr("id","data_form").attr("action","json/appointment.ics").attr("method","post");angular.element("body").append($form),addParameter($form,"calData",data.response),$form[0].submit(),$rootScope.isViewLoading=!1}else{var statusError={code:"OM150",type:"ODG_ERROR",message:"OM150 : "+ContentService.getError("OM150")};data&&data.Result&&null!=data.Result.Messages&&data.Result.Messages[0].DisplayCode&&(statusError={code:data.Result.Messages[0].DisplayCode,type:"ODG_ERROR",message:data.Result.Messages[0].DisplayCode+" : "+data.Result.Messages[0].EnglishLongMessage}),$rootScope.setStatus(statusError),$rootScope.isViewLoading=!1,$rootScope.setView("orderSummary"),$rootScope.focusOnError()}},function(error){$rootScope.isViewLoading=!1,$log.log("error="+error.code),$rootScope.setStatus(error),$rootScope.setView("orderSummary"),$rootScope.focusOnError()})}}];orderSummaryCtrl.resolve={orderSummary:["$rootScope","SessionKeeper","$log","$location","OSHPService","$cookies","$route","ContentService",function($rootScope,SessionKeeper,$log,$location,OSHPService,$cookies,$route,ContentService){$rootScope.setPageContent();var source="",inputUrl=decodeURIComponent($location.absUrl());-1!==inputUrl.indexOf("source=tsr")&&(source="tsr"),void 0!=sessionStorage.getItem("orderNum")&&($rootScope.current.summaryPageDetails=void 0);var current=$rootScope.current;current||(current=$rootScope.current=SessionKeeper.read());var userNameForGnsess=sessionStorage.getItem("userNameForGnsess");if(void 0!=userNameForGnsess&&null!=userNameForGnsess)try{var bestReqString='{"CommonData":{"AppName":"'+bestGnsessAttrs.AppName+'"},"UserId":"'+userNameForGnsess+'"}';angular.extend(bestGnsessAttrs,{BestRequest:bestReqString}),setRequestData(bestGnsessAttrs),makeColdAppBestCall()}catch(e){self.log.log("Gnsess call failure"+e)}if(void 0!=current.summaryPageDetails)return current.summaryPageDetails;if(void 0!==$rootScope.orderSummaryDetails&&null!=$rootScope.orderSummaryDetails&&"true"===$rootScope.backToSummary)return $rootScope.orderSummaryDetails;var externalAuth="false",tAuthNState=$cookies.tAuthNState,isCSRAccess=$cookies.isCSRAccess;if(void 0!==tAuthNState&&null!=tAuthNState&&"true"===tAuthNState?externalAuth=$rootScope.setProcessOSRequest():void 0!==tAuthNState&&null!=tAuthNState||void 0===isCSRAccess||-1===isCSRAccess.indexOf("true")||(externalAuth=$rootScope.setProcessOSRequest()),current&&("false"!=externalAuth||"tsr"==source||void 0!=current.isHandOff&&0!=current.isHandOff||-1!=$location.absUrl().indexOf("orderSummary"))){$location.path();if(("false"!==externalAuth||void 0===tAuthNState||"true"!==tAuthNState||void 0!==sessionStorage.getItem("orderNum")&&null!=sessionStorage.getItem("orderNum"))&&("true"!==externalAuth||void 0===sessionStorage.getItem("orderNum")&&null==sessionStorage.getItem("orderNum"))||void 0!==current.OrderID&&(current.OrderID=null),current.OrderID)return OSHPService.oshpOrderSummaryAPIServices(current,oshpData.useStubs,$rootScope);angular.isDefined(HALOCConfig)&&1==HALOCConfig.HALOCFlag&&-1!==$location.absUrl().indexOf("processOSRequest")&&1!=isCSRAccess&&$rootScope.authenticateUserWithHALOC();var orderNum=sessionStorage.getItem("orderNum"),orderProductType=sessionStorage.getItem("orderProductType");if($log.log("orderNum in sessionStorage is : "+orderNum),null!=orderNum&&void 0!=orderNum&&""!==orderNum)orderDetails={CommonData:null,orderNumber:orderNum,orderProductType:orderProductType,zipCode:null,passPhrase:null};else if("tsr"==source)var orderDetails=$rootScope.setTsnrRequest(inputUrl,source);return current.orderDetailReq=orderDetails,sessionStorage.removeItem("orderNum"),sessionStorage.removeItem("orderProductType"),OSHPService.oshpOrderSummaryAPIServices(current,oshpData.useStubs,$rootScope)}$rootScope.viewlandingPage()}]};