(this["webpackChunkapplication"]=this["webpackChunkapplication"]||[]).push([[7971],{614210:(e,t,n)=>{"use strict";n.r(t);n.d(t,{SMBModule:()=>F});var r=n(667489);var o=n(862926);var i=n(587040);var u=n(481658);var a=n(595489);var s=n(379269);var l=n(90416);var c=n(827027);var f="[SMB_MODULE][CORE]";var d=o.ModuleLogger.getLogger(f,(function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return e}),c.PHONE_EVENT_DATA_FEATURE_KEY);var S=undefined&&undefined.__decorate||function(e,t,n,r){var o=arguments.length,i=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,u;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)if(u=e[a])i=(o<3?u(i):o>3?u(t,n,i):u(t,n))||i;return o>3&&i&&Object.defineProperty(t,n,i),i};var p=undefined&&undefined.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};var _=undefined&&undefined.__awaiter||function(e,t,n,r){function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(e){try{step(r.next(e))}catch(e){o(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){o(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())}))};var v=undefined&&undefined.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,u;return u={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(u[Symbol.iterator]=function(){return this}),u;function verb(e){return function(t){return step([e,t])}}function step(u){if(r)throw new TypeError("Generator is already executing.");while(n)try{if(r=1,o&&(i=u[0]&2?o["return"]:u[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;if(o=0,i)u=[u[0]&2,i.value];switch(u[0]){case 0:case 1:i=u;break;case 4:n.label++;return{value:u[1],done:false};case 5:n.label++;o=u[1];u=[0];continue;case 7:u=n.ops.pop();n.trys.pop();continue;default:if(!(i=n.trys,i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1];i=u;break}if(i&&n.label<i[2]){n.label=i[2];n.ops.push(u);break}if(i[2])n.ops.pop();n.trys.pop();continue}u=t.call(e,n)}catch(e){u=[6,e];o=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:true}}};var E=d.tags("[SMBBadgeController]");var g=function(){function SMBBadgeController(){}SMBBadgeController.prototype.start=function(){var e,t;this._registerBadge(a.Vn.COMPANY_SETUP_BADGE,(e=this._smbUnreadCardsUMIInfo)===null||e===void 0?void 0:e.unReadCompanySetupCards);this._registerBadge(a.Vn.END_USER_SETUP_BADGE,(t=this._smbUnreadCardsUMIInfo)===null||t===void 0?void 0:t.unReadEndUserSetupCards)};SMBBadgeController.prototype.getSMBCardsUMI=function(e){return _(this,void 0,Promise,(function(){var t;return v(this,(function(n){switch(n.label){case 0:if(!e)return[3,2];return[4,this._requestSMBCardsUMI()];case 1:return[2,n.sent()];case 2:t=this._smbUnreadCardsUMIInfo;if(t)return[3,4];return[4,this._requestSMBCardsUMI()];case 3:t=n.sent();n.label=4;case 4:return[2,t]}}))}))};SMBBadgeController.prototype._requestSMBCardsUMI=function(){var e,t;return _(this,void 0,void 0,(function(){var n,r,o,i;return v(this,(function(l){switch(l.label){case 0:l.trys.push([0,5,,6]);return[4,this._rcInfoModule.generateRawWebSettingUri(s.Lh.SMB_COMPANY_SETUP)];case 1:n=l.sent();return[4,this._rcInfoModule.generateRawWebSettingUri(s.Lh.SMB_END_USER_SETUP)];case 2:r=l.sent();E.log("get smb cards umi",{hasCompanySetupUrl:!!n,hasAccountSetupUrl:!!r});if(!(n||r))return[3,4];o=this;return[4,u.F.requestSMBCardsUMI()];case 3:o._smbUnreadCardsUMIInfo=l.sent();E.info("update smb setup umi",{umi:this._smbUnreadCardsUMIInfo});this._updateBadge(a.Vn.COMPANY_SETUP_BADGE,(e=this._smbUnreadCardsUMIInfo)===null||e===void 0?void 0:e.unReadCompanySetupCards);this._updateBadge(a.Vn.END_USER_SETUP_BADGE,(t=this._smbUnreadCardsUMIInfo)===null||t===void 0?void 0:t.unReadEndUserSetupCards);l.label=4;case 4:return[2,this._smbUnreadCardsUMIInfo];case 5:i=l.sent();E.warn("failed to get smb cards umi",{error:i});return[2,this._smbUnreadCardsUMIInfo];case 6:return[2]}}))}))};SMBBadgeController.prototype.handleAccountSetupState=function(e){E.info("sync smb end user setup",{state:e});if(e===a.Qu.COMPANY_SETUP_UMI_UPDATED||e===a.Qu.USER_SETUP_UMI_UPDATED){this._requestSMBCardsUMI()}};SMBBadgeController.prototype._updateBadge=function(e,t){var n={id:e,unreadCount:t!==null&&t!==void 0?t:0};this._badgeModule.updateBadge(n);E.tags(e).info("update badge: ",n)};SMBBadgeController.prototype._registerBadge=function(e,t){E.info("register badge",{badgeId:e});this._badgeModule.registerBadge(e,(function(){return{id:e,unreadCount:t!==null&&t!==void 0?t:0}}))};Object.defineProperty(SMBBadgeController.prototype,"_badgeModule",{get:function(){return(0,r.getModule)(l.BADGE_MODULE_NAME)},enumerable:true,configurable:true});Object.defineProperty(SMBBadgeController.prototype,"_rcInfoModule",{get:function(){return(0,r.getModule)(s.oF)},enumerable:true,configurable:true});S([o.SingleRequest,p("design:type",Function),p("design:paramtypes",[]),p("design:returntype",Promise)],SMBBadgeController.prototype,"_requestSMBCardsUMI",null);return SMBBadgeController}();var h=n(659372);var I=undefined&&undefined.__awaiter||function(e,t,n,r){function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(e){try{step(r.next(e))}catch(e){o(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){o(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())}))};var M=undefined&&undefined.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,u;return u={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(u[Symbol.iterator]=function(){return this}),u;function verb(e){return function(t){return step([e,t])}}function step(u){if(r)throw new TypeError("Generator is already executing.");while(n)try{if(r=1,o&&(i=u[0]&2?o["return"]:u[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;if(o=0,i)u=[u[0]&2,i.value];switch(u[0]){case 0:case 1:i=u;break;case 4:n.label++;return{value:u[1],done:false};case 5:n.label++;o=u[1];u=[0];continue;case 7:u=n.ops.pop();n.trys.pop();continue;default:if(!(i=n.trys,i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1];i=u;break}if(i&&n.label<i[2]){n.label=i[2];n.ops.push(u);break}if(i[2])n.ops.pop();n.trys.pop();continue}u=t.call(e,n)}catch(e){u=[6,e];o=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:true}}};var b=d.tags("[AccountSetupInfoController]");var C=function(){function AccountSetupInfoController(e,t){this._smbBadgeController=e;this._DBConfig=t}AccountSetupInfoController.prototype.getCompanySetupInfo=function(){return I(this,void 0,Promise,(function(){var e,t;return M(this,(function(n){switch(n.label){case 0:t={};return[4,this._getSmbRevisit()];case 1:t.smbRevisit=n.sent();return[4,this._getSmbVisited()];case 2:e=(t.smbVisited=n.sent(),t);b.info("get account setup info",e);return[2,e]}}))}))};AccountSetupInfoController.prototype.getEndUserSetupInfo=function(){return I(this,void 0,Promise,(function(){var e,t;return M(this,(function(n){switch(n.label){case 0:t={};return[4,this._getEndUserRevisit()];case 1:e=(t.endUserSetupRevisit=n.sent(),t);b.info("get end user setup info",e);return[2,e]}}))}))};AccountSetupInfoController.prototype.handleAccountSetupState=function(e,t){return I(this,void 0,Promise,(function(){var n,r,o,i,u;return M(this,(function(s){switch(s.label){case 0:b.info("sync company setup",{state:e});n=e;switch(n){case a.Qu.FIRST_VISIT_UPDATED:return[3,1];case a.Qu.SETTING_SAVED:return[3,3];case a.Qu.USER_FIRST_VISIT_UPDATED:return[3,6];case a.Qu.COMPANY_SETUP_REVISITED:return[3,10]}return[3,15];case 1:return[4,this._handleSmbRevisitStateChange()];case 2:s.sent();return[3,16];case 3:if(!(t===null||t===void 0?void 0:t.workHours))return[3,5];return[4,this._handleWorkHoursData(t)];case 4:s.sent();s.label=5;case 5:return[3,16];case 6:return[4,this._getEndUserRevisit()];case 7:r=s.sent();b.info("current endUserRevisit state",{endUserRevisit:r});o=!r;if(!o)return[3,9];return[4,this._refreshClientInfo()];case 8:o=s.sent();s.label=9;case 9:o;return[3,16];case 10:return[4,this._getSmbVisited()];case 11:i=s.sent();b.info("current smbVisited state",{smbVisited:i});u=!i;if(!u)return[3,13];return[4,this._DBConfig.setSmbVisited(true)];case 12:u=s.sent();s.label=13;case 13:u;return[4,this._handleSmbRevisitStateChange()];case 14:s.sent();return[3,16];case 15:return[3,16];case 16:return[2]}}))}))};AccountSetupInfoController.prototype.getCompanySetupOrSettingType=function(){var e;return I(this,void 0,Promise,(function(){var t,n,r;return M(this,(function(o){switch(o.label){case 0:return[4,this._rcInfoModule.generateRawWebSettingUri(s.Lh.SMB_COMPANY_SETUP)];case 1:t=!!o.sent();return[4,this._rcInfoModule.generateRawWebSettingUri(s.Lh.SMB_COMPANY_SETTING)];case 2:n=!!o.sent();return[4,this._smbBadgeController.getSMBCardsUMI(false)];case 3:r=(e=o.sent())===null||e===void 0?void 0:e.unReadCompanySetupCards;return[2,t&&(!n||n&&r!==0)?a.Dv.COMPANY_SETUP:n&&(!t||t&&r===0)?a.Dv.COMPANY_SETTING:undefined]}}))}))};AccountSetupInfoController.prototype._handleWorkHoursData=function(e){return I(this,void 0,void 0,(function(){var t;return M(this,(function(n){switch(n.label){case 0:b.info("handle work hours data",e);return[4,this._rcInfoModule.getAnsweringBizHoursRuleData()];case 1:t=n.sent();if(!t){return[2]}if(e.workHours===h.o0.SPECIFIC_SCHEDULE){t.schedule={ref:""}}else if((e===null||e===void 0?void 0:e.workHours)===h.o0.ALWAYS_AVAILABLE){delete t.schedule}return[4,this._rcInfoModule.setAnsweringBizHoursRuleData(t)];case 2:n.sent();return[2]}}))}))};AccountSetupInfoController.prototype._handleSmbRevisitStateChange=function(){return I(this,void 0,void 0,(function(){var e,t;return M(this,(function(n){switch(n.label){case 0:return[4,this._getSmbRevisit()];case 1:e=n.sent();b.info("current smbRevisit state",{smbRevisit:e});t=!e;if(!t)return[3,3];return[4,this._refreshClientInfo()];case 2:t=n.sent();n.label=3;case 3:t;return[2]}}))}))};AccountSetupInfoController.prototype._refreshClientInfo=function(){b.info("refresh client info");var e=r.accountManager.getCurrent().getSubAccount(i.oF);return e.accountInfoService.refreshRCClientInfo()};AccountSetupInfoController.prototype._getSmbRevisit=function(){var e,t,n;return I(this,void 0,Promise,(function(){var r,o;return M(this,(function(i){switch(i.label){case 0:return[4,this._rcInfoModule.getRCClientInfo()];case 1:r=i.sent();o=(n=(t=(e=r===null||r===void 0?void 0:r.provisioning)===null||e===void 0?void 0:e.hints)===null||t===void 0?void 0:t.smbRevisit)===null||n===void 0?void 0:n.actionRequired;return[2,o!==null&&o!==void 0?o:true]}}))}))};AccountSetupInfoController.prototype._getEndUserRevisit=function(){var e,t,n;return I(this,void 0,Promise,(function(){var r,o;return M(this,(function(i){switch(i.label){case 0:return[4,this._rcInfoModule.getRCClientInfo()];case 1:r=i.sent();o=(n=(t=(e=r===null||r===void 0?void 0:r.provisioning)===null||e===void 0?void 0:e.hints)===null||t===void 0?void 0:t.endUserSetupRevisit)===null||n===void 0?void 0:n.actionRequired;return[2,o!==null&&o!==void 0?o:true]}}))}))};AccountSetupInfoController.prototype._getSmbVisited=function(){var e;return I(this,void 0,Promise,(function(){return M(this,(function(t){switch(t.label){case 0:return[4,this._DBConfig.getSmbVisited()];case 1:return[2,(e=t.sent())!==null&&e!==void 0?e:false]}}))}))};Object.defineProperty(AccountSetupInfoController.prototype,"_rcInfoModule",{get:function(){return(0,r.getModule)(s.oF)},enumerable:true,configurable:true});return AccountSetupInfoController}();var y=n(469882);var U={COMPANY_SETUP_REVISITED:"COMPANY_SETUP_REVISITED"};var R="SMB_MODULE";var B=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var m=function(e){B(SMBUserConfig,e);function SMBUserConfig(t){return e.call(this,a.oF,t)||this}SMBUserConfig.prototype.setSmbVisited=function(e){return this.put(U.COMPANY_SETUP_REVISITED,e)};SMBUserConfig.prototype.getSmbVisited=function(){return this.get(U.COMPANY_SETUP_REVISITED)};return SMBUserConfig}(y.DBConfig);var P=n(975922);var O=function(){function SMBService(){}SMBService.prototype.onStarted=function(){this.smbBadgeController.start();this.settingManager.load()};SMBService.prototype.onStop=function(){this.settingManager.unload()};Object.defineProperty(SMBService.prototype,"smbBadgeController",{get:function(){if(!this._smbBadgeController){this._smbBadgeController=new g}return this._smbBadgeController},enumerable:true,configurable:true});Object.defineProperty(SMBService.prototype,"accountSetupInfoController",{get:function(){if(!this._accountSetupInfoController){this._accountSetupInfoController=new C(this.smbBadgeController,this.DBConfig)}return this._accountSetupInfoController},enumerable:true,configurable:true});Object.defineProperty(SMBService.prototype,"DBConfig",{get:function(){if(!this._DBConfig){var e=(0,r.getModule)(s.oF);this._DBConfig=new m(e.getDBConfigService())}return this._DBConfig},enumerable:true,configurable:true});Object.defineProperty(SMBService.prototype,"settingManager",{get:function(){if(!this._settingManager){this._settingManager=new P.hC}return this._settingManager},enumerable:true,configurable:true});return SMBService}();var A=n(707777);var T=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var N=undefined&&undefined.__decorate||function(e,t,n,r){var o=arguments.length,i=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,u;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)if(u=e[a])i=(o<3?u(i):o>3?u(t,n,i):u(t,n))||i;return o>3&&i&&Object.defineProperty(t,n,i),i};var D=undefined&&undefined.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};var w=d.tags("[SMBModule]");var L=(0,o.createLogDecorator)(w.tags("[EXECUTE_LOG]"));var F=function(e){T(SMBModule,e);function SMBModule(t){var n=e.call(this,t)||this;w.info("create SMBModule");return n}SMBModule.prototype.onLoad=function(){this._setupNetworkClient();this.SMBService.onStarted()};SMBModule.prototype.onUnload=function(){this.SMBService.onStop()};Object.defineProperty(SMBModule.prototype,"SMBService",{get:function(){if(!this._service){this._service=new O}return this._service},enumerable:true,configurable:true});SMBModule.prototype.moduleName=function(){return a.oF};SMBModule.prototype._setupNetworkClient=function(){var e=(0,i.gT)();if(e){u.F.networkClient=e.buildNetworkClient()}};SMBModule.prototype.handleAccountSetupState=function(e,t){this.SMBService.smbBadgeController.handleAccountSetupState(e);return this.SMBService.accountSetupInfoController.handleAccountSetupState(e,t)};SMBModule.prototype.getCompanySetupInfo=function(){return this.SMBService.accountSetupInfoController.getCompanySetupInfo()};SMBModule.prototype.getEndUserSetupInfo=function(){return this.SMBService.accountSetupInfoController.getEndUserSetupInfo()};SMBModule.prototype.getSMBCardsUMI=function(e){return this.SMBService.smbBadgeController.getSMBCardsUMI(e)};SMBModule.prototype.getCompanySetupOrSettingType=function(){return this.SMBService.accountSetupInfoController.getCompanySetupOrSettingType()};var t,n,r,o,s,l,c;N([L({call:true}),D("design:type",Function),D("design:paramtypes",[typeof(t=typeof a.Qu!=="undefined"&&a.Qu)==="function"?t:Object,typeof(n=typeof A.SMBEventInfo!=="undefined"&&A.SMBEventInfo)==="function"?n:Object]),D("design:returntype",typeof(r=typeof Promise!=="undefined"&&Promise)==="function"?r:Object)],SMBModule.prototype,"handleAccountSetupState",null);N([L({call:true}),D("design:type",Function),D("design:paramtypes",[]),D("design:returntype",typeof(o=typeof Promise!=="undefined"&&Promise)==="function"?o:Object)],SMBModule.prototype,"getCompanySetupInfo",null);N([L({call:true}),D("design:type",Function),D("design:paramtypes",[]),D("design:returntype",typeof(s=typeof Promise!=="undefined"&&Promise)==="function"?s:Object)],SMBModule.prototype,"getEndUserSetupInfo",null);N([L({call:true}),D("design:type",Function),D("design:paramtypes",[Boolean]),D("design:returntype",typeof(l=typeof Promise!=="undefined"&&Promise)==="function"?l:Object)],SMBModule.prototype,"getSMBCardsUMI",null);N([L({call:true}),D("design:type",Function),D("design:paramtypes",[]),D("design:returntype",typeof(c=typeof Promise!=="undefined"&&Promise)==="function"?c:Object)],SMBModule.prototype,"getCompanySetupOrSettingType",null);return SMBModule}(r.AbstractModule)},481658:(e,t,n)=>{"use strict";n.d(t,{F:()=>a});var r=n(862926);var o=n(827027);var i="/"+o.API_VERSION+"/account/~/extension/~/";var u={SMB_CARDS_UMI:i+"smb-cards/count?requireNPA=true"};var a=function(){function SMBApi(){}SMBApi.requestSMBCardsUMI=function(){return SMBApi.networkClient.get({HAPriority:r.HA_PRIORITY.HIGH,path:r.RequestPath.buildRequestPath(u.SMB_CARDS_UMI)})};return SMBApi}()},595489:(e,t,n)=>{"use strict";n.d(t,{oF:()=>i,Qu:()=>u,Dv:()=>a,Vn:()=>s,c2:()=>l,oA:()=>c});var r=n(470033);var o=n(295454);var i=o.Lb.SMB;var u;(function(e){e["START_USING_RINGCENTRAL"]="START_USING_RINGCENTRAL";e["COMPANY_SETUP_DONE"]="COMPANY_SETUP_DONE";e["FIRST_VISIT_UPDATED"]="FIRST_VISIT_UPDATED";e["NETWORK_OFFLINE"]="NETWORK_OFFLINE";e["USER_FIRST_VISIT_UPDATED"]="USER_FIRST_VISIT_UPDATED";e["COMPANY_SETUP_UMI_UPDATED"]="COMPANY_SETUP_UMI_UPDATED";e["USER_SETUP_UMI_UPDATED"]="USER_SETUP_UMI_UPDATED";e["USER_PROFILE_UPDATED"]="USER_PROFILE_UPDATED";e["OPEN_EMERGENCY_ADDRESS_DIALOG"]="OPEN_EMERGENCY_ADDRESS_DIALOG";e["USER_CONFIRM_EMERGENCY_ADDRESS"]="USER_CONFIRM_EMERGENCY_ADDRESS";e["REQUEST_USER_EMERGENCY_ADDRESS"]="REQUEST_USER_EMERGENCY_ADDRESS";e["USER_EMERGENCY_ADDRESS"]="USER_EMERGENCY_ADDRESS";e["OPEN_REGION_DIALOG"]="OPEN_REGION_DIALOG";e["USER_SAVE_REGION"]="USER_SAVE_REGION";e["USER_HOME_COUNTRY_CODE"]="USER_HOME_COUNTRY_CODE";e["COMPANY_SETUP_REVISITED"]="COMPANY_SETUP_REVISITED";e["REQUEST_USER_REGION"]="REQUEST_USER_REGION";e["USER_REGION"]="USER_REGION";e["SETTING_SAVED"]="SETTING_SAVED";e["CLOSE_IFRAME_DIALOG"]="CLOSE_IFRAME_DIALOG";e["OPEN_WORK_HOURS_DIALOG"]="OPEN_WORK_HOURS_DIALOG";e["ENTER_PROTECTED_FLOW"]="ENTER_PROTECTED_FLOW";e["LEAVE_PROTECTED_FLOW"]="LEAVE_PROTECTED_FLOW";e["TRIGGER_FLOW_PROTECT"]="TRIGGER_FLOW_PROTECT";e["FLOW_PROTECT_RESULT"]="FLOW_PROTECT_RESULT";e["PAGE_TITLES_CONFIG"]="PAGE_TITLES_CONFIG";e["TOGGLE_SIDEBAR"]="TOGGLE_SIDEBAR"})(u||(u={}));var a;(function(e){e["COMPANY_SETUP"]="COMPANY_SETUP";e["COMPANY_SETTING"]="COMPANY_SETTING"})(a||(a={}));var s={COMPANY_SETUP_BADGE:"COMPANY_SETUP_BADGE",END_USER_SETUP_BADGE:"END_USER_SETUP_BADGE"};var l=[r.H3.RCExtensionFeaturesId.EditExtensionInfo,r.H3.RCExtensionFeaturesId.EditUserHours,r.H3.RCExtensionFeaturesId.ReadAssignedRoles,r.H3.RCExtensionFeaturesId.EditExtensionGrants,r.H3.RCExtensionFeaturesId.EditCredentials];var c=[r.H3.RCExtensionFeaturesId.EditExtensionAnsweringRules,r.H3.RCExtensionFeaturesId.EditIncomingCallInfo]},599890:(e,t,n)=>{"use strict";n.d(t,{w:()=>S});var r=n(667489);var o=n.n(r);var i=n(379269);var u=n(470033);var a=n(827027);var s=n(696206);var l=n(659372);var c=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var f=undefined&&undefined.__awaiter||function(e,t,n,r){function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(e){try{step(r.next(e))}catch(e){o(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){o(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())}))};var d=undefined&&undefined.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,u;return u={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(u[Symbol.iterator]=function(){return this}),u;function verb(e){return function(t){return step([e,t])}}function step(u){if(r)throw new TypeError("Generator is already executing.");while(n)try{if(r=1,o&&(i=u[0]&2?o["return"]:u[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;if(o=0,i)u=[u[0]&2,i.value];switch(u[0]){case 0:case 1:i=u;break;case 4:n.label++;return{value:u[1],done:false};case 5:n.label++;o=u[1];u=[0];continue;case 7:u=n.ops.pop();n.trys.pop();continue;default:if(!(i=n.trys,i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1];i=u;break}if(i&&n.label<i[2]){n.label=i[2];n.ops.push(u);break}if(i[2])n.ops.pop();n.trys.pop();continue}u=t.call(e,n)}catch(e){u=[6,e];o=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:true}}};var S=function(e){c(SMBCallForwardingSettingItemProvider,e);function SMBCallForwardingSettingItemProvider(){var t=e.call(this,{id:l.IS.CALL_FORWARDING_SETTING})||this;t._getSMBUri=function(){var e=(0,r.getModule)(i.oF);return e.generateWebSettingUri(i.Lh.SMB_CALL_FORWARDING_SETTING)};t._handleUpdate=function(){t.getStateProvider().notifyChange();t.getValueProvider().notifyChange()};return t}SMBCallForwardingSettingItemProvider.prototype.buildValueProvider=function(){var e=this;return this.buildBaseItemValueProvider({getter:function(){return f(e,void 0,void 0,(function(){var e,t,n;var o;return d(this,(function(u){switch(u.label){case 0:e=(0,r.getModule)(i.oF);return[4,e.getAnsweringBizHoursRuleData()];case 1:t=u.sent();n=l.HM.RING_SEQUENTIALLY;if(((o=t===null||t===void 0?void 0:t.forwarding)===null||o===void 0?void 0:o.ringingMode)===a.RCBusinessHoursRuleForwardingRingMode.SIMULTANEOUSLY){n=l.HM.RING_SIMULTANEOUSLY}return[2,{getSMBUri:this._getSMBUri,body:n}]}}))}))}})};SMBCallForwardingSettingItemProvider.prototype._isSMBUriEmpty=function(){return f(this,void 0,Promise,(function(){var e,t;return d(this,(function(n){switch(n.label){case 0:e=(0,r.getModule)(i.oF);return[4,e.generateRawWebSettingUri(i.Lh.SMB_CALL_FORWARDING_SETTING)];case 1:t=n.sent();return[2,!t]}}))}))};SMBCallForwardingSettingItemProvider.prototype.buildStateProvider=function(){var e=this;return this.buildBaseItemValueProvider({getter:function(){return f(e,void 0,void 0,(function(){var e,t,n,o;return d(this,(function(a){switch(a.label){case 0:e=false;a.label=1;case 1:return[4,this._isSMBUriEmpty()];case 2:if(a.sent()){return[3,5]}t=r.accountManager.getCurrent().context;if(!t.entitlement.isAllEnable([u.H3.RCExtensionFeaturesId.CallForwarding,u.H3.RCExtensionFeaturesId.EditIncomingCallInfo])){return[3,5]}n=(0,r.getModule)(i.oF);return[4,n===null||n===void 0?void 0:n.getDigitalLines()];case 3:o=a.sent();if(!(o===null||o===void 0?void 0:o.length)){return[3,5]}e=true;a.label=4;case 4:if(false){}a.label=5;case 5:return[2,e?s.ESettingItemState.ENABLE:s.ESettingItemState.INVISIBLE]}}))}))}})};SMBCallForwardingSettingItemProvider.prototype.onLoad=function(){var e=this;this.onEntitlement(u.H3.RCExtensionFeaturesId.CallForwarding,this._handleUpdate);this.onEntitlement(u.H3.RCExtensionFeaturesId.EditIncomingCallInfo,this._handleUpdate);var t=(0,r.getModule)(i.oF);this.addSubscription((function(){t.DBConfig.on(i.Uz.CLIENT_INFO,e._handleUpdate);t.DBConfig.on(i.Uz.ANSWERING_RULE_BUSINESS_HOURS_RULE,e._handleUpdate);t.DBConfig.on(i.Uz.DEVICE_INFO,e._handleUpdate);return function(){t.DBConfig.off(i.Uz.CLIENT_INFO,e._handleUpdate);t.DBConfig.off(i.Uz.ANSWERING_RULE_BUSINESS_HOURS_RULE,e._handleUpdate);t.DBConfig.off(i.Uz.DEVICE_INFO,e._handleUpdate)}}))};return SMBCallForwardingSettingItemProvider}(s.BaseSettingItemProvider)},158092:(e,t,n)=>{"use strict";n.d(t,{Q:()=>S});var r=n(667489);var o=n.n(r);var i=n(379269);var u=n(470033);var a=n(696206);var s=n(827027);var l=n(659372);var c=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var f=undefined&&undefined.__awaiter||function(e,t,n,r){function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(e){try{step(r.next(e))}catch(e){o(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){o(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())}))};var d=undefined&&undefined.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,u;return u={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(u[Symbol.iterator]=function(){return this}),u;function verb(e){return function(t){return step([e,t])}}function step(u){if(r)throw new TypeError("Generator is already executing.");while(n)try{if(r=1,o&&(i=u[0]&2?o["return"]:u[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;if(o=0,i)u=[u[0]&2,i.value];switch(u[0]){case 0:case 1:i=u;break;case 4:n.label++;return{value:u[1],done:false};case 5:n.label++;o=u[1];u=[0];continue;case 7:u=n.ops.pop();n.trys.pop();continue;default:if(!(i=n.trys,i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1];i=u;break}if(i&&n.label<i[2]){n.label=i[2];n.ops.push(u);break}if(i[2])n.ops.pop();n.trys.pop();continue}u=t.call(e,n)}catch(e){u=[6,e];o=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:true}}};var S=function(e){c(SMBVoicemailSettingItemProvider,e);function SMBVoicemailSettingItemProvider(){var t=e.call(this,{id:l.IS.VOICEMAIL_SETTING})||this;t._getSMBUri=function(){var e=(0,r.getModule)(i.oF);return e.generateWebSettingUri(i.Lh.SMB_VOICEMAIL_SETTING)};t._handleUpdate=function(){t.getStateProvider().notifyChange();t.getValueProvider().notifyChange()};return t}SMBVoicemailSettingItemProvider.prototype.buildValueProvider=function(){var e=this;return this.buildBaseItemValueProvider({getter:function(){return f(e,void 0,void 0,(function(){var e,t,n,o;var u,a;return d(this,(function(c){switch(c.label){case 0:e=(0,r.getModule)(i.oF);return[4,e.getAnsweringBizHoursRuleData()];case 1:t=c.sent();n=l.fU.DEFAULT_USED;do{if(((u=t===null||t===void 0?void 0:t.voicemail)===null||u===void 0?void 0:u.enabled)===false){n=l.fU.OFF;break}o=t===null||t===void 0?void 0:t.greetings.find((function(e){return e.type===s.GreetingsType.VOICEMAIL}));if((a=o===null||o===void 0?void 0:o.custom)===null||a===void 0?void 0:a.id){n=l.fU.CUSTOM_SET;break}}while(false);return[2,{getSMBUri:this._getSMBUri,body:n}]}}))}))}})};SMBVoicemailSettingItemProvider.prototype._isSMBUriEmpty=function(){return f(this,void 0,Promise,(function(){var e,t;return d(this,(function(n){switch(n.label){case 0:e=(0,r.getModule)(i.oF);return[4,e.generateRawWebSettingUri(i.Lh.SMB_VOICEMAIL_SETTING)];case 1:t=n.sent();return[2,!t]}}))}))};SMBVoicemailSettingItemProvider.prototype.buildStateProvider=function(){var e=this;return this.buildBaseItemValueProvider({getter:function(){return f(e,void 0,void 0,(function(){var e,t,n,o;return d(this,(function(s){switch(s.label){case 0:e=r.accountManager.getCurrent().context;t=false;s.label=1;case 1:return[4,this._isSMBUriEmpty()];case 2:if(s.sent()){return[3,5]}if(!e.entitlement.isAllEnable([u.H3.RCExtensionFeaturesId.EditMessageAndNotificationSettings,u.H3.RCExtensionFeaturesId.ReadMessageAndNotificationSettings])){return[3,5]}n=(0,r.getModule)(i.oF);return[4,n===null||n===void 0?void 0:n.getDigitalLines()];case 3:o=s.sent();if(!(o===null||o===void 0?void 0:o.length)){return[3,5]}t=true;s.label=4;case 4:if(false){}s.label=5;case 5:return[2,t?a.ESettingItemState.ENABLE:a.ESettingItemState.INVISIBLE]}}))}))}})};SMBVoicemailSettingItemProvider.prototype.onLoad=function(){var e=this;this.onEntitlement(u.H3.RCExtensionFeaturesId.EditMessageAndNotificationSettings,this._handleUpdate);this.onEntitlement(u.H3.RCExtensionFeaturesId.ReadMessageAndNotificationSettings,this._handleUpdate);var t=(0,r.getModule)(i.oF);this.addSubscription((function(){t.DBConfig.on(i.Uz.CLIENT_INFO,e._handleUpdate);t.DBConfig.on(i.Uz.ANSWERING_RULE_BUSINESS_HOURS_RULE,e._handleUpdate);t.DBConfig.on(i.Uz.DEVICE_INFO,e._handleUpdate);return function(){t.DBConfig.off(i.Uz.CLIENT_INFO,e._handleUpdate);t.DBConfig.off(i.Uz.ANSWERING_RULE_BUSINESS_HOURS_RULE,e._handleUpdate);t.DBConfig.off(i.Uz.DEVICE_INFO,e._handleUpdate)}}))};return SMBVoicemailSettingItemProvider}(a.BaseSettingItemProvider)},752924:(e,t,n)=>{"use strict";n.d(t,{r:()=>_});var r=n(667489);var o=n.n(r);var i=n(379269);var u=n(470033);var a=n(696206);var s=n(659372);var l=n(595489);var c=undefined&&undefined.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var f=undefined&&undefined.__awaiter||function(e,t,n,r){function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(e){try{step(r.next(e))}catch(e){o(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){o(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())}))};var d=undefined&&undefined.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,u;return u={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(u[Symbol.iterator]=function(){return this}),u;function verb(e){return function(t){return step([e,t])}}function step(u){if(r)throw new TypeError("Generator is already executing.");while(n)try{if(r=1,o&&(i=u[0]&2?o["return"]:u[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;if(o=0,i)u=[u[0]&2,i.value];switch(u[0]){case 0:case 1:i=u;break;case 4:n.label++;return{value:u[1],done:false};case 5:n.label++;o=u[1];u=[0];continue;case 7:u=n.ops.pop();n.trys.pop();continue;default:if(!(i=n.trys,i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1];i=u;break}if(i&&n.label<i[2]){n.label=i[2];n.ops.push(u);break}if(i[2])n.ops.pop();n.trys.pop();continue}u=t.call(e,n)}catch(e){u=[6,e];o=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:true}}};var S=undefined&&undefined.__read||function(e,t){var n=typeof Symbol==="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,i=[],u;try{while((t===void 0||t-- >0)&&!(o=r.next()).done)i.push(o.value)}catch(e){u={error:e}}finally{try{if(o&&!o.done&&(n=r["return"]))n.call(r)}finally{if(u)throw u.error}}return i};var p=undefined&&undefined.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(S(arguments[t]));return e};var _=function(e){c(SMBWorkHoursSettingItemProvider,e);function SMBWorkHoursSettingItemProvider(){var t=e.call(this,{id:s.IS.WORK_HOURS_SETTING})||this;t._getSMBUri=function(){return t._rcInfoModule.generateWebSettingUri(i.Lh.SMB_WORK_HOURS_SETTING)};t._handleUpdate=function(){t.getStateProvider().notifyChange();t.getValueProvider().notifyChange()};return t}SMBWorkHoursSettingItemProvider.prototype.buildValueProvider=function(){var e=this;return this.buildBaseItemValueProvider({getter:function(){return f(e,void 0,void 0,(function(){var e;return d(this,(function(t){switch(t.label){case 0:return[4,this._rcInfoModule.getAnsweringBizHoursRuleData()];case 1:e=t.sent();return[2,{getSMBUri:this._getSMBUri,body:(e===null||e===void 0?void 0:e.schedule)?s.o0.SPECIFIC_SCHEDULE:s.o0.ALWAYS_AVAILABLE}]}}))}))}})};SMBWorkHoursSettingItemProvider.prototype._isSMBUriEmpty=function(){return f(this,void 0,Promise,(function(){return d(this,(function(e){switch(e.label){case 0:return[4,this._rcInfoModule.generateRawWebSettingUri(i.Lh.SMB_WORK_HOURS_SETTING)];case 1:return[2,!e.sent()]}}))}))};SMBWorkHoursSettingItemProvider.prototype.buildStateProvider=function(){var e=this;return this.buildBaseItemValueProvider({getter:function(){return f(e,void 0,void 0,(function(){var e,t,n,o,i;return d(this,(function(s){switch(s.label){case 0:e=false;s.label=1;case 1:return[4,this._isSMBUriEmpty()];case 2:if(s.sent()){return[3,4]}t=r.accountManager.getCurrent().context;n=t.entitlement.isAllEnable(l.c2);if(!n){return[3,4]}o=t.entitlement.isAllEnable(l.oA);if(!o){return[3,4]}i=t.entitlement.get(u.H3.RCCustomPermissionList.hasDigitalLines);if(!i){return[3,4]}e=true;s.label=3;case 3:if(false){}s.label=4;case 4:return[2,e?a.ESettingItemState.ENABLE:a.ESettingItemState.INVISIBLE]}}))}))}})};SMBWorkHoursSettingItemProvider.prototype.onLoad=function(){var e=this;p(l.c2,l.oA,[u.H3.RCCustomPermissionList.hasDigitalLines]).forEach((function(t){e.onEntitlement(t,e._handleUpdate)}));this.addSubscription((function(){e._rcInfoModule.DBConfig.on(i.Uz.CLIENT_INFO,e._handleUpdate);e._rcInfoModule.DBConfig.on(i.Uz.ANSWERING_RULE_BUSINESS_HOURS_RULE,e._handleUpdate);return function(){e._rcInfoModule.DBConfig.off(i.Uz.CLIENT_INFO,e._handleUpdate);e._rcInfoModule.DBConfig.off(i.Uz.ANSWERING_RULE_BUSINESS_HOURS_RULE,e._handleUpdate)}}))};Object.defineProperty(SMBWorkHoursSettingItemProvider.prototype,"_rcInfoModule",{get:function(){return(0,r.getModule)(i.oF)},enumerable:true,configurable:true});return SMBWorkHoursSettingItemProvider}(a.BaseSettingItemProvider)},975922:(e,t,n)=>{"use strict";n.d(t,{hC:()=>r.h,IS:()=>o.IS,o0:()=>o.o0});var r=n(82047);var o=n(659372)},707777:()=>{}}]);