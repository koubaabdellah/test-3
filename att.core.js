"use strict";function trim(s){return s.replace(/\s+/g,"")}var contentModule=angular.module("att.core.content",["att.core.content.pageDirective","att.core.content.sectionDirective","att.core.content.altTagDirective","att.core.content.linkDirective","att.core.content.labelDirective","att.core.content.contentDirective","att.core.content.contentLoadDirective","att.core.content.contentLoadErrorDirective","att.core.content.contentReplaceDirective","att.core.content.services","att.core.navigation.native.service","att.navigation.constants","att.navigation.feedback"]),altTagDirectiveModule=angular.module("att.core.content.altTagDirective",["att.core.content.services"]),altTagDirective=altTagDirectiveModule.directive("attAltTagFq",function(ContentService){return{restrict:"A",scope:!0,controller:["$scope","$element","$attrs","$transclude",function($scope,$element,$attrs,$transclude){var tempArray=$attrs.attAltTagFq.split("."),pageId=tempArray[0];ContentService.getPage(pageId).then(function(data){for(var temp=data,i=0;i<tempArray.length;i++)void 0!=temp&&void 0!==temp[tempArray[i]]&&(temp=temp[tempArray[i]]);void 0!=temp&&($element[0].title=temp)})}]}}),contentDirectiveModule=angular.module("att.core.content.contentDirective",["att.core.content.sectionDirective"]),contentDirective=contentDirectiveModule.directive("attAttrContent",function($sanitize){return{require:"^attSectionContent",restrict:"A",scope:!0,controller:["$scope","$element","$attrs","$transclude",function($scope,$element,$attrs,$transclude){var content=$attrs.attAttrContent.replace("{","").replace("}","").split(",");$scope.$watch("section",function(newValue,oldValue){var section;section=newValue;for(var i=0;i<content.length;i++){var content1=content[i].split(":"),property=trim(content1[0]),key=trim(content1[1].replace("'","").replace("'",""));null!==section&&void 0!==section&&(void 0!==section.Lables&&null!==section.Lables[key]&&"undefined"!==section.Lables[key]?$element[0][property]=$sanitize(section.Lables[key]):void 0!==section.FieldLabels&&null!==section.FieldLabels[key]&&void 0!==section.FieldLabels[key]&&($element[0][property]=$sanitize(section.FieldLabels[key].Label)))}})}]}}),contentLoadErrorDirectiveModule=angular.module("att.core.content.contentLoadErrorDirective",["att.core.content.contentLoadErrorDirective"]),contentLoadErrorDirective=contentLoadErrorDirectiveModule.directive("attLoadError",["$rootScope","ContentService",function($rootScope,ContentService){return{restrict:"A",scope:!0,controller:["$scope","$element","$attrs","$transclude",function($scope,$element,$attrs,$transclude){var criteria={errors:$attrs.attLoadError,language:"English"};ContentService.getFEErrors(criteria).then(function(data){$rootScope.feErrors=data})}]}}]),contentLoadDirectiveModule=angular.module("att.core.content.contentLoadDirective",["att.core.content.services"]),contentLoadDirective=contentLoadDirectiveModule.directive("attLoadContent",function(ContentService){return{restrict:"A",scope:!0,controller:["$scope","$element","$attrs","$transclude",function($scope,$element,$attrs,$transclude){var criteria={pageIds:$attrs.attLoadContent,customerType:"B2C",language:"English"};ContentService.get(criteria).then(function(data){$scope.content=data})}]}}),contentReplaceDirectiveModule=angular.module("att.core.content.contentReplaceDirective",["att.core.content.sectionDirective"]),contentReplaceDirective=contentReplaceDirectiveModule.directive("attAttrContentReplace",function(){return{require:"^attSectionContent",restrict:"A",scope:!0,controller:["$scope","$element","$attrs","$transclude",function($scope,$element,$attrs,$transclude){$scope.attAttrContentReplace=$attrs.attAttrContentReplace}]}}),contentReplaceDirective_contentReplace=contentReplaceDirectiveModule.directive("contentReplace",function($sanitize){return{require:"^attAttrContentReplace",restrict:"A",scope:!0,controller:["$scope","$element","$attrs","$transclude",function($scope,$element,$attrs,$transclude){var contentVars,content=$scope.attAttrContentReplace.replace("{","").replace("}","");contentVars=$attrs.contentReplace.replace("{","").replace("}","").split(","),$scope.$watch("section",function(newValue,oldValue){var section;section=newValue;var content1=content.split(":"),property=trim(content1[0]),key=trim(content1[1].replace("'","").replace("'","")),tempVal=null,tempVal=null;if(null!==section&&void 0!==section){void 0!==section.Lables&&null!==section.Lables[key]&&"undefined"!==section.Lables[key]?tempVal=$sanitize(section.Lables[key]):void 0!==section.FieldLabels&&null!==section.FieldLabels[key]&&void 0!==section.FieldLabels[key]&&(tempVal=$sanitize(section.FieldLabel[key]));for(var i=0;i<contentVars.length;i++){var contentVars1=contentVars[i].split(":"),varIndex=trim(contentVars1[0]),varValue=trim(contentVars1[1].replace("'","").replace("'","")),replaceStr="{"+varIndex+"}";tempVal=tempVal.replace(replaceStr,varValue)}$element[0][property]=tempVal}})}]}}),labelDirectiveModule=angular.module("att.core.content.labelDirective",["att.core.content.sectionDirective","ngSanitize"]),labelDirective=labelDirectiveModule.directive("attLabelContent",function(){return{require:"^attSectionContent",restrict:"A",scope:!0,controller:["$scope","$element","$attrs","$transclude",function($scope,$element,$attrs,$transclude){var labelId=$attrs.attLabelContent;$attrs.$observe("attLabelContent",function(value){labelId=value}),$scope.$watch("section",function(newValue,oldValue){var section=newValue;angular.isDefined(section)&&(void 0!==section.Lables&&null!==section.Lables[labelId]&&void 0!==section.Lables[labelId]?$scope.label=section.Lables[labelId]:void 0!==section.FieldLabels&&null!==section.FieldLabels[labelId]&&void 0!==section.FieldLabels[labelId]&&($scope.label=section.FieldLabels[labelId].Label))})}],template:'<span ng-bind-html="label"></span>'}}),labelDescDirective=labelDirectiveModule.directive("attLabelDescContent",function(){return{require:"^attSectionContent",restrict:"A",scope:!0,controller:["$scope","$element","$attrs","$transclude",function($scope,$element,$attrs,$transclude){var labelId=$attrs.attLabelDescContent;$attrs.$observe("attLabelDescContent",function(value){labelId=value}),$scope.$watch("section",function(newValue,oldValue){var section=newValue;angular.isDefined(section)&&(void 0!==section.Lables&&null!==section.Lables[labelId]&&void 0!==section.Lables[labelId]?$scope.labelDesc=section.Lables[labelId]:void 0!==section.FieldLabels&&null!==section.FieldLabels[labelId]&&void 0!==section.FieldLabels[labelId]&&($scope.labelDesc=section.FieldLabels[labelId].Description))})}],template:'<span ng-bind-html="labelDesc"></span>'}});labelDirectiveModule.directive("attInsertLabel",function(){return{require:"^attSectionContent",restrict:"A",scope:!0,replace:!0,link:function(scope,element,attrs,ctrl){var labelId=attrs.attInsertLabel;element.text();scope.$watch("section",function(newValue,oldValue){var section=newValue;angular.isDefined(section)&&(void 0!==section.Lables&&null!==section.Lables[labelId]&&void 0!==section.Lables[labelId]?element.text(section.Lables[labelId]):void 0!==section.FieldLabels&&null!==section.FieldLabels[labelId]&&void 0!==section.FieldLabels[labelId]&&element.text(section.FieldLabel[labelId]))})}}});var linkDirectiveModule=angular.module("att.core.content.linkDirective",["att.core.content.sectionDirective"]),linkDirective=linkDirectiveModule.directive("attLinkContent",function(){return{require:"^attSectionContent",restrict:"A",scope:!0,controller:["$scope","$element","$attrs","$transclude",function($scope,$element,$attrs,$transclude){$scope.$watch("section",function(newValue,oldValue){var linkId=$attrs.attLinkContent,section=newValue;angular.isDefined(section)&&(angular.isDefined(section.Links)&&angular.isDefined(section.Links[linkId])?($scope.linkUrl=section.Links[linkId].URL,$scope.linkLabel=section.Links[linkId].Label):angular.isDefined(section.Link)&&angular.isDefined(section.Link[linkId])&&($scope.linkUrl=section.Link[linkId].URL,$scope.linkLabel=section.Link[linkId].Label),angular.isDefined($scope.linkUrl)&&""!=$scope.linkUrl&&angular.isDefined($element.attr("href"))&&($element.attr("href",$scope.linkUrl),$scope.href=$scope.linkUrl))})}],template:'<span ng-bind-html="linkLabel"></span>'}}),pageDirectiveModule=angular.module("att.core.content.pageDirective",["att.core.content.services"]),pageDirective=pageDirectiveModule.directive("attPageContent",function(ContentService){return{restrict:"A",scope:!0,controller:["$scope","$element","$attrs","$transclude",function($scope,$element,$attrs,$transclude){$scope.$watch("content",function(newValue,oldValue){ContentService.getPage($attrs.attPageContent).then(function(data){$scope.page=ContentService.page($attrs.attPageContent)})})}]}}),linkLoopDirective=pageDirective.directive("attLinkLoopContent",function(){return{require:"^attSectionContent",restrict:"E",scope:!0,controller:["$scope","$element","$attrs","$transclude",function($scope,$element,$attrs,$transclude){$scope.$watch("section",function(newValue,oldValue){var section=newValue;null!==section&&void 0!==section&&(void 0!==section.Links&&($scope.links=section.Links),void 0!==section.Link&&($scope.links=section.Link,angular.forEach($scope.links,function(link){link.LinkLabel=link.linkLabel,link.LinkUrl=link.linkURL})))})}],template:'<div ng-repeat="link in links"><a href="{{link.LinkUrl}}" ng-bind-html="link.LinkLabel"></a></div>'}}),linkLoopDirectiveA=pageDirective.directive("attLinkLoopContentA",function(ContentService){return{restrict:"A",scope:!0,controller:["$scope","$element","$attrs","$transclude",function($scope,$element,$attrs,$transclude){var tempArray=$attrs.attLinkLoopContentA.split("."),pageId=tempArray[0];ContentService.getPage(pageId).then(function(data){for(var temp=data,i=0;i<tempArray.length;i++)void 0!=temp&&void 0!==temp[tempArray[i]]&&(temp=temp[tempArray[i]]);$scope.links=temp.Links})}],template:'<div ng-repeat="link in links"><a href="{{link.linkUrl}}" ng-bind-html="link.linkLabel"></a></div>'}}),fullyQualifiedLabelDirective=pageDirective.directive("attLabelFq",function(ContentService){return{restrict:"A",priority:100,scope:!0,controller:["$scope","$element","$attrs","$transclude",function($scope,$element,$attrs,$transclude){var tempArray=$attrs.attLabelFq.split("."),pageId=tempArray[0];ContentService.getPage(pageId).then(function(data){for(var temp=data,i=0;i<tempArray.length;i++)void 0!==temp&&void 0!==temp[tempArray[i]]&&(temp=temp[tempArray[i]]);$scope.label=temp})}],template:'<span ng-bind-html="label"></span>'}}),sectionDirectiveModule=angular.module("att.core.content.sectionDirective",["att.core.content.pageDirective"]),sectionDirective=sectionDirectiveModule.directive("attSectionContent",function(){return{require:"^attPageContent",restrict:"A",scope:!0,controller:["$scope","$element","$attrs","$transclude",function($scope,$element,$attrs,$transclude){this.children=[];var self=this;$scope.$watch("page",function(newPage,oldValue){if(angular.isDefined(newPage))if(-1!==$attrs.attSectionContent.indexOf(".")){if($attrs.attSectionContent.split(".").length>1){var tempArray=$attrs.attSectionContent.split("."),section=tempArray[0],subSection=tempArray[1];self.update(newPage[section].Sections[subSection])}}else angular.isDefined(newPage[$attrs.attSectionContent])?self.update(newPage[$attrs.attSectionContent]):angular.isDefined(newPage.Sections)&&self.update(newPage.Sections[$attrs.attSectionContent])}),this.register=function(childScope){this.children.push(childScope),childScope.section=$scope.section},this.update=function(section){$scope.section=section,angular.forEach(this.children,function(child){child.section=section})}}]}}),contentServiceModule=angular.module("att.core.content.services",["att.core.language.service","ngResource"]);contentServiceModule.constant("ManageContentURIs",{settings:{useStub:!1,content:{contentUri:"content/cont.js",contentStubUri:""},error:{errorUri:"",errorStubUri:""},commonData:{appName:""},version:""}}),contentServiceModule.content=function($rootScope,$window,$resource,$q,$log,ManageContentURIs,Language){this.useStub=ManageContentURIs.settings.useStub,this.commonData=ManageContentURIs.settings.commonData,this.scope=$rootScope,this.window=$window,this.log=$log,this.q=$q,this.getContent=$resource(ManageContentURIs.settings.content.contentUri),this.getContentStub=$resource(ManageContentURIs.settings.content.contentStubUri),this.errorResource=$resource(ManageContentURIs.settings.error.errorUri),this.errorStubResource=$resource(ManageContentURIs.settings.error.errorStubUri),this.content=null,this.errors=null,this.criteria=null,this.errorCriteria=null,this.customerType="B2C",this.language="English",this.promiseContent=null,this.promiseError=null,this.requestedPages=[],this.Language=Language},contentServiceModule.service("ContentService",["$rootScope","$window","$resource","$q","$log","ManageContentURIs","Language",contentServiceModule.content]),contentServiceModule.content.prototype.preloadContent=function(criteria){return this.customerType=criteria.customerType,this.language=criteria.language,this.get(criteria)},contentServiceModule.content.prototype.preloadFEErrors=function(criteria){return this.language=criteria.language,this.appName=criteria.appName,this.getFEErrors(criteria)},contentServiceModule.content.prototype.get=function(criteria){var deferred=this.q.defer(),self=this;if(angular.isString(criteria)&&(criteria={pageIds:criteria,customerType:"B2C"}),angular.isUndefined(criteria.pageIds)||null===criteria.pageIds)return!1;this.language="es"===this.Language.get()?"S":"English";var filteredPages="";if(null===(self=this).content)filteredPages=criteria.pageIds;else{var pageIn=criteria.pageIds.split(","),pageOut=[];angular.forEach(pageIn,function(page,key){var iPageID=self.content[page];(angular.isUndefined(iPageID)||null==iPageID)&&this.push(page)},pageOut),filteredPages=pageOut.join(",")}this.customerType,this.language;var addRequest={CommonData:this.commonData,ContentProviderRequestDetails:[{Pageid:filteredPages,CustomerType:this.customerType,Language:this.language,Version:this.commonData.version}]},success=function(data){null===self.content?self.content=data:self.content=angular.extend(self.content,data),self.promiseContent=null,deferred.resolve(self.content)},error=function(error){self.log.log("Error ="+JSON.stringify(error)),deferred.reject(error)};return this.useStub?this.getContentStub.get({},success,error):filteredPages.length>0?this.getContent.save(addRequest,success,error):deferred.resolve(self.content),this.promiseContent=deferred.promise,this.promiseContent},contentServiceModule.content.prototype.getPage=function(pageId){var deferred=this.q.defer();return angular.isDefined(this.content)&&null!==this.content&&angular.isDefined(this.content[pageId])?(deferred.resolve(this.content[pageId]),deferred.promise):this.get(pageId)},contentServiceModule.content.prototype.getFEErrors=function(errorCriteria){var deferred=this.q.defer(),self=this;if(this.promiseError)return this.promiseError;"es"===this.Language.get()?this.language="S":this.language="English";var newCriteria={CommonData:this.commonData,errors:"",language:this.language},newErrors="",sep="";if(void 0!==errorCriteria.errors&&null!==errorCriteria.errors)for(var errors=errorCriteria.errors.split(","),i=0;null!==errors&&i<errors.length;i++)null!==this.errors&&void 0!==this.errors[errors[i]]&&null!==this.content[errors[i]]||(""!==newErrors&&(sep=","),newErrors=newErrors+sep+errors[i]);else newErrors=errorCriteria;newCriteria.errors=newErrors,"[object Object]"!==Object.prototype.toString.call(errorCriteria)&&(errorCriteria=newCriteria);var addRequest={CommonData:this.commonData,errors:newErrors,Language:this.language,appName:this.appName},success=function(data){if(self.errors=data,null===self.errors)self.errors=data;else for(var errors=self.errorCriteria.errors.split(","),i=0;null!==errors&&i<errors.length;i++)self.errors[errors[i]]=data[errors[i]];deferred.resolve(self.errors),self.promiseError=null},error=function(error){deferred.reject(error)};return this.errorCriteria=errorCriteria,this.useStub?this.errorStubResource.get({},success,error):this.errorResource.save(addRequest,success,error),this.promiseError=deferred.promise,deferred.promise},contentServiceModule.content.prototype.getError=function(name){return this.errors?this.errors[name]:""},contentServiceModule.content.prototype.getErrors=function(){return this.errors},contentServiceModule.content.prototype.page=function(name){return this.content?this.content[name]:""},contentServiceModule.content.prototype.allContent=function(){return this.content},contentServiceModule.content.prototype.reset=function(){this.content=null};var attCoreModule=angular.module("att.core",["att.core.content","att.core.filters","att.core.forms","att.core.language","att.core.location","att.core.navigation","att.core.session","att.sandbox","att.navigation.feedback"]),attCoreFilters=angular.module("att.core.filters",[]);attCoreFilters.filter("titlecase",function(){return function(text){return"AT&amp;T"!==text?(text=text.toLowerCase(),(text=text.replace(/(?:^|\s)\w/g,function(match){return match.toUpperCase()})).replace(/At&amp;t/g,"AT&amp;T")):text}}),attCoreFilters.filter("phone",function(){return function(text){return text&&10==text.length?"("+text.substring(0,3)+") "+text.substring(3,6)+"-"+text.substring(6,10):text}}),attCoreFilters.filter("unphone",function(){return function(text){return text&&14==text.length&&(text=text.substring(1,4)+text.substring(6,9)+text.substring(10,14)),text}});var attCoreForms=angular.module("att.core.forms",["att.core.forms.ui","att.core.forms.validations"]),attCoreFormsUI=angular.module("att.core.forms.ui",[]);attCoreFormsUI.constant("CoreFormsUiConfig",{phoneMask:"(___) ___-____"}),attCoreFormsUI.directive("attAllowOnly",function(){return{require:"ngModel",link:function(scope,elm,attr,ngModelCtrl){var pattern;attr.$observe("attAllowOnly",function(val){pattern=new RegExp(val,"g")}),elm.bind("input",function(){scope.$apply(function(){var filtered,matches=elm.val().match(pattern);filtered="",matches&&(filtered=matches[0]),ngModelCtrl.$setViewValue(filtered),ngModelCtrl.$render()})})}}}),attCoreFormsUI.directive("attAutoScroll",["$window",function($window){return{restrict:"AC",link:function(scope,elm){elm.bind("click",function(e){$window.scrollTo(0,0)})}}}]),attCoreFormsUI.directive("attPhoneMask",["$parse","CoreFormsUiConfig",function($parse,CoreFormsUiConfig){return{require:"ngModel",priority:99,link:function(scope,iElement,iAttrs,ctrl){var B=navigator.userAgent.toLowerCase(),C=B.indexOf("android")>-1,A="";A=C?"__________":CoreFormsUiConfig.phoneMask,iElement.attr("maxlength",A.length);var checkValidity=function(unmaskedValue){var valid=!1;return unmaskedValue&&(valid=10===unmaskedValue.length),ctrl.$setValidity("mask",valid),valid},doGetCaretPosition=function(C){var B=0,A;return document.selection?((A=document.selection.createRange()).moveStart("character",-eval((""+C.value).length)),B=A.text.length):(C.selectionStart||"0"===C.selectionStart)&&(B=C.selectionStart),B},setCaretPosition=function(B,C){if(B.setSelectionRange)B.setSelectionRange(C,C);else if(B.createTextRange){var A=B.createTextRange();A.collapse(!0),A.moveEnd("character",C),A.moveStart("character",C),A.select()}},maskInput=function(unmaskedValue){var E,D=unmaskedValue;if(!D.length)return"";var L,K,G,J,I;for(J=[],I=(G=A.split("")).length,L=D.substring(0,A.length),K=D.replace(/[^0-9]/g,"").split(""),E=0;E<I&&(J.push("_"===G[E]?K.shift():G[E]),0!==K.length);E++);return D=J.join(""),setCaretPosition(D,void 0+Math.abs(L.length-J.length)),D},handleKeyup=function(e){var E,D=iElement.val();if(D.length){var H,L,K,G,J,I;for(J=[],I=(G=A.split("")).length,H=doGetCaretPosition(iElement),L=D.substring(0,A.length),K=D.replace(/[^0-9]/g,"").split(""),E=0;E<I&&(J.push("_"===G[E]?K.shift():G[E]),0!==K.length);E++);D=J.join(""),setCaretPosition(D,H+Math.abs(L.length-J.length)),"("===D&&(D=""),ctrl.$setViewValue(D),scope.$apply(ctrl.$render())}},handlePress=function(e){e.which;if(e.which&&(e.which<48||e.which>57)&&8!==e.which&&9!==e.which&&46!==e.which&&13!=e.which&&37!=e.which&&39!=e.which)e.preventDefault?e.preventDefault():e.returnValue=!1};iElement.bind("keyup",handleKeyup),iElement.bind("keydown",handlePress);var parser=function(fromViewValue){var clean="";return fromViewValue&&fromViewValue.length>0&&(clean=fromViewValue.replace(/[^0-9]/g,"")),checkValidity(clean),clean},formatter=function(fromModelView){var input="";return checkValidity(fromModelView),fromModelView&&(input=maskInput(fromModelView)),input};ctrl.$parsers.push(parser),ctrl.$formatters.push(formatter)}}}]),attCoreFormsUI.directive("attEsn",["$parse","CoreFormsUiConfig",function($parse,CoreFormsUiConfig){return{require:"ngModel",priority:99,link:function(scope,iElement,iAttrs,ctrl){var checkValidity=function(fieldValue){var valid=!0;return fieldValue&&(11===fieldValue.length?valid=!isNaN(fieldValue):8===fieldValue.length&&(valid=isNaN(fieldValue))),ctrl.$setValidity("esn",valid),valid};ctrl.$parsers.push(function(fromViewValue){return checkValidity(fromViewValue),fromViewValue})}}}]),attCoreFormsUI.directive("attImei",["$parse","CoreFormsUiConfig","$log",function($parse,CoreFormsUiConfig,$log){return{require:"ngModel",priority:99,link:function(scope,iElement,iAttrs,ctrl){var checkValidity=function(fieldValue){var valid=!0;if(fieldValue)if(isNaN(fieldValue)||15!=fieldValue.length)valid=!0;else{for(var sumImeiVal=0,posIMEI=new Array,imeiIndex=0;imeiIndex<15;imeiIndex++)posIMEI[imeiIndex]=parseInt(fieldValue.substring(imeiIndex,imeiIndex+1)),imeiIndex%2!=0&&(posIMEI[imeiIndex]=parseInt(2*posIMEI[imeiIndex])),posIMEI[imeiIndex]>9&&(posIMEI[imeiIndex]=parseInt(posIMEI[imeiIndex]%10)+parseInt(posIMEI[imeiIndex]/10)),sumImeiVal+=parseInt(posIMEI[imeiIndex]);valid=0==sumImeiVal%10}return ctrl.$setValidity("imei",valid),valid};ctrl.$parsers.push(function(fromViewValue){return checkValidity(fromViewValue),fromViewValue})}}}]),attCoreFormsUI.directive("widthDelta",["$window","$log",function($window,$log){var w=angular.element($window);return $log.log("W = "+w.width()),{restrict:"A",scope:{name:"@"},link:function(scope,element,attrs){var u=element.width(),d=parseInt(scope.$eval(attrs.widthDelta));element.css("width",u+d)}}}]);var validations=angular.module("att.core.forms.validations",[]);validations.directive("attErrors",["$log","$timeout",function($log,$timeout){return{require:["ngModel","^form"],scope:!0,link:function(scope,elm,attrs,ctrls){var modelCtrl=ctrls[0],formCtrl=ctrls[1],attErrorsObj={};scope.attErrors=attrs.attErrors,scope.$on("clearMyForm",function(event){modelCtrl.$setViewValue(""),formCtrl.onSuccess(scope.$id)}),scope.$on("SubmitForm",function(event){"text"==attrs.type&&elm.val()&&(modelCtrl.$setViewValue(elm.val().trim()),modelCtrl.$render()),$timeout(function(){var focusOnError=angular.element(".alert-error");focusOnError&&(focusOnError.attr("tabindex","-1"),focusOnError.focus())},100),modelCtrl.validate()}),modelCtrl.validate=function(){var err="";for(var errorKey in modelCtrl.$error)if(modelCtrl.$error[errorKey]){err=attErrorsObj[errorKey],$log.log("error : "+errorKey+" : "+attErrorsObj[errorKey]);break}if(err){for(;!elm.hasClass("control-group");)elm=elm.parent();elm.addClass("error"),formCtrl.onError(err,scope.$id)}else{for(;!elm.hasClass("control-group");)elm=elm.parent();elm.removeClass("error"),formCtrl.onSuccess(scope.$id)}};attrs.$observe("attErrors",function(newValue){attErrorsObj=angular.fromJson(newValue),$log.log(attErrorsObj)}),modelCtrl.$parsers.push(function(viewValue){return scope.submitted&&modelCtrl.validate(),viewValue})}}}]),validations.directive("attform",["$log",function($log){return{require:"form",transclude:!0,template:'<div ng-if="showErrBox" class="alert alert-error"><i class="cssIcon-error"></i><div role="alertdialog" aria-labelledby="alertHeading" aria-describedby="alertText"><h4 id="alertHeading">Please review and correct the following:</h4><ul id="alertText" class="bullet"> <li ng-repeat="error in errMessage">{{error}}</li></ul></div></div><div ng-transclude></div>',link:function(scope,element,attrs,ctrl){scope.showErrBox=!1,scope.errMessage=[];var errorBucket=[];ctrl.onError=function(msg,sId){var pushNewErr=!0;if(0==errorBucket.length)errorBucket.push({scopeId:sId,show:!0,errMsg:msg});else{for(var i in errorBucket)errorBucket[i].scopeId==sId&&(errorBucket[i].show=!0,errorBucket[i].errMsg=msg,pushNewErr=!1);pushNewErr&&errorBucket.push({scopeId:sId,show:!0,errMsg:msg})}updateErrorMsgs()},ctrl.onSuccess=function(sId){if(0==!errorBucket.length)for(var i in errorBucket)errorBucket[i].scopeId==sId&&(errorBucket[i].show=!1);updateErrorMsgs()},this.updateErrorMsgs=function(){scope.errMessage.length=0;for(var i in errorBucket)errorBucket[i].show&&-1==scope.errMessage.indexOf(errorBucket[i].errMsg)&&scope.errMessage.push(errorBucket[i].errMsg);scope.showErrBox=scope.errMessage.length>0},scope.EnableSubmitButtonClass=function(){return ctrl.$invalid},scope.EnableCancelButtonClass=function(){return ctrl.$pristine},scope.cancelCurrent=function(){$log.log("cancelCurrent called"),scope.$broadcast("clearMyForm")},scope.SubmitForm=function(){$log.log("SubmitForm called"),scope.submitted=!0,scope.$broadcast("SubmitForm")},scope.RadioSubmitForm=function(){$log.log("RadioSubmitForm called"),scope.submitted&&scope.$broadcast("SubmitForm")},scope.resetErrorMessage=function(removeErrCode){for(var i in errorBucket)errorBucket[i].errMsg.split(":")[0]==removeErrCode&&(errorBucket[i].show=!1);updateErrorMsgs()}}}}]);var languageModule=angular.module("att.core.language",["att.core.language.service"]),languageServiceModule=angular.module("att.core.language.service",["att.core.session.gnsess"]);languageServiceModule.constant("LanguageConfig",{locale:{defaults:"en_US",english:"en_US",spanish:"es_US"},override:!1}),languageServiceModule.language=function($log,$q,$http,GNSESS,$document,$window,LanguageConfig){this.log=$log,this.q=$q,this.http=$http,this.GNSESS=GNSESS,this.window=$window,this.log.log("it is constructor"),this.doc=$document,this.config=LanguageConfig,this.locale=LanguageConfig.locale.defaults,this.override=LanguageConfig.override,this.uri=LanguageConfig.serviceURI,this.reason="unknown",this.check()},languageServiceModule.service("Language",["$log","$q","$http","GNSESS","$document","$window","LanguageConfig",languageServiceModule.language]),languageServiceModule.language.prototype.check=function(){var self=this,deferred=self.q.defer();if(this.override)return this.reason="override",deferred.resolve({locale:this.locale}),deferred.promise;var gnLocale=this.GNSESS.locale();if(null!==gnLocale)return self.set(gnLocale),this.reason="gnsess: "+gnLocale,deferred.resolve({locale:gnLocale}),deferred.promise;try{var locale=localStorage.getItem("userLang");if(angular.isDefined(locale)&&null!==locale)return this.reason="localstorage: "+locale,this.set(locale),deferred.resolve({locale:self.locale}),deferred.promise}catch(e){this.reason+=" error",this.log.error(e)}return angular.isString(this.uri)&&this.uri.length>0?(this.http({method:"GET",url:this.uri}).then(function(data){data.locale?self.set(data.locale):self.set(data.data.locale),self.reason+=" success",deferred.resolve(data)},function(){self.set(this.locale),this.reason+=" failure",deferred.resolve({locale:self.locale})}),this.reason="$http"):(this.reason="no $http",deferred.resolve({locale:self.locale})),deferred.promise},languageServiceModule.language.prototype.set=function(language){var self=this;if(this.override)return this;if(self.log.info("Language.set()",language),"es"==language||"span"==language||"sp"==language||language===this.config.locale.spanish)if(this.locale=this.config.locale.spanish,localStorage)try{localStorage.setItem("userLang","span")}catch(e){this.log.error(e)}else this.log.error("LocalStorage did not save.");else if(this.locale=this.config.locale.english,localStorage)try{localStorage.setItem("userLang","eng")}catch(e){this.log.error(e)}else this.log.error("LocalStorage did not save.");return this.GNSESS.locale(this.locale),this.GNSESS.save(),this},languageServiceModule.language.prototype.get=function(){return this.locale},languageServiceModule.language.prototype.toggle=function(noRefresh){return!this.override&&(this.locale==this.config.locale.spanish?this.set(this.config.locale.english):this.set(this.config.locale.spanish),!!noRefresh||(this.window.location.reload(),!0))},languageServiceModule.language.prototype.isStatic=function(){return this.override};var locationModule=angular.module("att.core.location",["att.core.location.services"]),locationServiceModule=angular.module("att.core.location.services",["ngResource"]);locationServiceModule.constant("ManageLocationUri",{location:{credentials:"Amf3khlDckLVtYJ_ehQ-FOLXofiaH6ETAID7AH4N_p7HT-cJRb13cLQhjeg2JzeE",uri:"//dev.virtualearth.net/REST/v1/Locations/",param:{jsonp:"JSON_CALLBACK"},geolocation:{maximumAge:6e4,timeout:5e3},bypassGPS:{}}}),locationServiceModule.location=function($rootScope,$q,$log,$http,ManageLocationUri){$log.log("entering location constructor"),this.scope=$rootScope,this.log=$log,this.q=$q,this.http=$http,this.credentials=ManageLocationUri.location.credentials,this.locationUri=ManageLocationUri.location.uri,this.locationParamJsonp=ManageLocationUri.location.param.jsonp,this.geolocation=ManageLocationUri.location.geolocation,this.bypassGPS=ManageLocationUri.location.bypassGPS},locationServiceModule.service("LocationService",["$rootScope","$q","$log","$http","ManageLocationUri",locationServiceModule.location]),locationServiceModule.location.prototype.getGPS=function(){var deferred=this.q.defer(),self=this;try{navigator.geolocation?angular.isDefined(this.bypassGPS.lat)?deferred.resolve(this.bypassGPS):navigator.geolocation.getCurrentPosition(function(position){self.geolocation=!0,self.scope.$apply(deferred.resolve({lat:position.coords.latitude,long:position.coords.longitude,query:!1,geolocation:!0}))},function(error){self.scope.$apply(deferred.resolve({geolocation:!1}))},this.geolocation):(deferred.resolve({geoLocation:!1}),self.geolocation=!1)}catch(e){$log.error(e),deferred.resolve({geoLocation:!1})}return deferred.promise},locationServiceModule.location.prototype.saveLocation=function(){var deferred=this.q.defer(),self=this;return this.getGPS().then(function(data){if(self.log.log("data.geolocation"+data.geolocation),data.geolocation){var locData=data;self.log.log(data),localStorage.setItem("myLat",data.lat),localStorage.setItem("myLong",data.long),localStorage.setItem("isGeo","yes");var url=self.locationUri+data.lat+","+data.long+"?output=json&key="+self.credentials+"&jsonp="+self.locationParamJsonp;self.log.log("url="+url),self.http.jsonp(url).success(function(data){self.log.log("SUCCESS"),self.log.log(data);var zip=data.resourceSets[0].resources[0].address.postalCode,state=data.resourceSets[0].resources[0].address.adminDistrict;localStorage.setItem("zip",zip),localStorage.setItem("state",state),deferred.resolve(locData)}).error(function(data){self.log.log("FAILURE"),self.log.log(data),deferred.reject(data)})}else deferred.reject(data)}),deferred.promise};var gnsessModule=angular.module("att.core.session.gnsess",[]);gnsessModule.constant("GlobalNavSessionConfig",{settings:{cookieName:"GNSESS",domain:".att.com"}}),gnsessModule.service("GNSESS",function(GlobalNavSessionConfig,$window,$log){var self=this,settings=GlobalNavSessionConfig.settings,local={value:{},raw:""};this.read=function(){for(var globalNavCookie={LOCALE:["en_US"]},allCookies=$window.document.cookie.split("; "),i=0;i<allCookies.length;i++){var cookiePair=allCookies[i].split("="),cookieName=cookiePair[0];cookiePair.shift();var cookieValue=cookiePair.join("=");if(cookieName==GlobalNavSessionConfig.settings.cookieName)try{local.raw=cookieValue,globalNavCookie=new Function("return "+cookieValue)(),local.value=globalNavCookie}catch(e){local.value={},$log.error(e)}}return self},this.save=function(value){return value?(local.raw=settings.cookieName+"="+angular.toJson(value)+";secure;path=/"+(settings.domain.length?";domain="+settings.domain:""),$window.document.cookie=local.raw,local.value=value,self):self.save(local.value)},this.locale=function(locale){return locale?(local.value.LOCALE=locale,self):local.value&&local.value.LOCALE?local.value.LOCALE:null},this.clear=function(){return local={value:{},raw:""},self},this.keepAlive=function(){return!0}});var sessionKeeper=angular.module("att.core.session.keeper",[]);sessionKeeper.constant("namespace","oshpSession"),sessionKeeper.constant("sessionObject","current"),sessionKeeper.session=function($rootScope,namespace,sessionObject,$log){this.namespace=namespace,this.obj=sessionObject,this.scope=$rootScope,this.log=$log},sessionKeeper.service("SessionKeeper",["$rootScope","namespace","sessionObject","$log",sessionKeeper.session]),sessionKeeper.session.prototype.read=function(){var scope=this.scope;if(scope[this.obj])return scope[this.obj];if(sessionStorage&&sessionStorage.getItem(this.namespace)){var val=sessionStorage.getItem(this.namespace);if(val&&"undefined"!=val){var session=JSON.parse(val);return scope?scope[this.obj]=session:session}}return null},sessionKeeper.session.prototype.save=function(scope){var scope=scope||this.scope;if(sessionStorage)try{var txt=JSON.stringify(scope[this.obj]);sessionStorage.setItem(this.namespace,txt)}catch(e){this.log.error(e)}else this.log.error("Session did not save.")},sessionKeeper.session.prototype.clear=function(){if(sessionStorage)try{sessionStorage.removeItem(this.namespace)}catch(e){}};var sessionModule=angular.module("att.core.session",["att.core.session.keeper"]),thinNativeService=angular.module("att.core.navigation.native.service",[]);thinNativeService.service("ThinNative",function($window){this.check=function(){var i,c,ca=$window.document.cookie.split(";");for(i=0;i<ca.length;i++){for(c=ca[i];" "===c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf("accessDomain=")&&"native"===c.substring("accessDomain=".length,c.length))return!0}return!1}}),angular.module("att.navigation.constants",[]).constant("GlobalNavConfig",{menuUri:{english:"//m.att.com/shopmobile/globalnav/index.json?callback=ATTMobileMenuShunt.menuBuilder",spanish:"//m.att.com/shopmobile/es/globalnav/index.json?callback=ATTMobileMenuShunt.menuBuilder",fallback:"stub/cms/mobileMenu.json"},hostName:{dss:"m.att.com",ecom:"m.att.com"},feedback:{english:"Feedback",spanish:"Realimentación"},language:"en",showFeedback:!0,autoInjectFeedback:!0}),angular.module("template/feedback/feedback.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/feedback/feedback.html",'<li ng-show="showFeedback">\n    <a href="javascript:void(0)" ng-click="launchDialog($event)"><span aria-hidden="true">[+] </span>{{feedbackText}}</a>\n</li>')}]),angular.module("att.navigation.feedback",["att.navigation.constants","template/feedback/feedback.html"]).directive("attFeedback",["GlobalNavConfig","GlobalNavService","$window","$timeout",function(GlobalNavConfig,GlobalNavService,$window,$timeout){var link=function(scope,elem,attr,ctrl){var langcode=GlobalNavConfig.language;scope.feedbackText="ESPANOL"===langcode||"es"===langcode||"es_US"===langcode||"span"===langcode||"sp"===langcode?GlobalNavConfig.feedback.spanish:GlobalNavConfig.feedback.english,scope.$watch(function(){return GlobalNavConfig.showFeedback},function(newValue,oldValue){angular.isDefined(newValue)&&(scope.showFeedback=newValue)})};return{restrict:"EA",transclude:!1,replace:!0,templateUrl:"template/feedback/feedback.html",compile:function(elem,attr){return GlobalNavService.loadjscssfile("//www.att.com/scripts/olcc/oo_engine.min.js","js"),$timeout(function(){GlobalNavService.loadjscssfile("//www.att.com/scripts/olcc/oo_conf_mobile.js","js")},100),link},controller:["$scope",function($scope){$scope.launchDialog=function(ev){$window.launchOpinionLab&&$window.launchOpinionLab(ev)}}]}}]).factory("GlobalFeedbackService",["$document","$rootScope","GlobalNavConfig","$compile","$timeout",function($document,$rootScope,GlobalNavConfig,$compile,$timeout){return{autoInjectFeedback:function(){var appendFlag=!1,appendFeedback=function(){if(GlobalNavConfig.autoInjectFeedback&&!appendFlag){var pivotElem=$document.find("ul");if(pivotElem&&pivotElem.length)for(var i=0;i<pivotElem.length;i++){var cssClass=pivotElem.eq(i).attr("class");cssClass&&cssClass.indexOf("list list-pivot")>-1&&(pivotElem.eq(i).append($compile(angular.element("<div att-feedback></div>"))($rootScope)),appendFlag=!0)}}};$rootScope.$on("$routeChangeStart",function(){appendFlag=!1}),$rootScope.$on("$viewContentLoaded",function(){$timeout(appendFeedback,100)}),appendFeedback()}}}]).run(["GlobalFeedbackService",function(GlobalFeedbackService){GlobalFeedbackService.autoInjectFeedback()}]);var globalFooterModule=angular.module("att.core.navigation.footer",["att.core.language.service","att.core.navigation.native.service","att.core.navigation.search","att.core.content"]);globalFooterModule.directive("attFooter",function(Language,ThinNative){return{restrict:"A",transclude:!1,replace:!0,template:'<footer att-page-content="Common_Mobile_App_Elements"><att-search></att-search><div id="footerNav" class="component" att-section-content="Footer"><div class="ui-grid-b"><div class="ui-block-a footerTab1"><p><a href="javascript:void(0)" att-link-content="ATTNet"></a></p></div><div class="ui-block-b footerTab2"><p><a href="javascript:void(0)" att-link-content="Business"></a></p></div><div class="ui-block-c footerTab3"><p><a href="javascript:void(0)" att-link-content="AboutATT"></a></p></div></div></div><div id="footerBtm" class="component" att-section-content="Footer"><ul><li><a href="javascript:void(0)" role="link" att-link-content="FullSite"></a></li><li><a href="javascript:void(0)" att-link-content="Privacy"></a></li><li><a href="javascript:void(0)" att-link-content="TermsOfUse"></a></li></ul><ng-switch on="override"><ul ng-switch-when="false"><li><a href="javascript:void(0)" att-link-content="ContactUs"></a></li><li><a href="javascript:void(0)" att-link-content="Legal"></a></li><li><a href="javascript:void(0)" att-link-content="Language" ng-click="toggleLanguage()"></a></li></ul><ul ng-switch-when="true"><li><a href="javascript:void(0)" att-link-content="ContactUs"></a></li><li><a href="javascript:void(0)" att-link-content="Legal"></a></li></ul></ng-switch><p><a href="javascript:void(0)" att-link-content="ATTCopyright"></a> <span att-label-content="ATTCopyright"></span></p></div></footer>',compile:function(scope,element,attrs){ThinNative.check()||angular.element("#globalFooter").show()},controller:["$scope",function($scope){$scope.override=Language.isStatic(),$scope.toggleLanguage=function(){Language.toggle()}}]}}),angular.module("att.core.navigation.header",["att.core.navigation.services","att.core.navigation.native.service","att.core.language.service"]).constant("ManageSearchUri",{remote:"https://m.att.com",pivotClass:{find:".grayTab",withoutPivot:"dividerBefore",withPivot:""},suggest:{url:"/searchservice/GlobalSearch_AutoSuggest/select?q=userQuery:[SEARCHTERM]&indent=true&fl=userQuery&wt=json&fq=data_source_name:%22Popular%20Search%20Terms%22&sort=lookupCount%20desc&rows=5&json.wrf=autoCompleteCallback",token:"[SEARCHTERM]",callback:"autoCompleteCallback"},search:{url:"/mobilesearch/search-results.html?m_search=[SEARCHTERM][SEARCHSOURCE]",token:{search:"[SEARCHTERM]",source:"[SEARCHSOURCE]"}},silo:""}).service("GlobalNavService",["$window","$resource","$q","$log","$http","$rootScope",function($window,$resource,$q,$log,$http,$rootScope){var navMenuScope,navMenuArray,_call=function(scope,model,fallbackUri,serviceUri,callback){navMenuScope=scope,navMenuArray=model;var defer=$q.defer();try{var callbackVal=callback+"_value";angular.isDefined(callback)&&($window[callback]=function(data){$window[callbackVal]=data}),$log.info("INFO :: httpWithFallbackService : Calling service "+serviceUri+". Trying to load data from REST service"),$log.info("INFO :: httpWithFallbackService : Service URL is "+serviceUri),$log.info("INFO :: httpWithFallbackService : Fallback URL is "+fallbackUri),$http.jsonp(serviceUri).success(function(data){scope[model]=data,defer.resolve(data)}).error(function(){$window[callbackVal]?(scope[model]=$window[callbackVal],defer.resolve(scope[model])):($log.info("WARN :: httpWithFallbackService : Error Occurred. Trying to load data from static data file"),$http.get(fallbackUri).success(function(data){$log.info("ERROR :: httpWithFallbackService : Success while calling fallback. Data is "+JSON.stringify(data)),scope[model]=data,defer.resolve(data)}).error(function(){$log.info("ERROR :: httpWithFallbackService : Error Occurred Again in fallback. Dead End!!"),defer.reject("ERROR :: httpWithFallbackService : Error Occurred Again in fallback. Dead End!!")}))})}catch(e){$log.info("ERROR :: httpWithFallbackService : Exception Occurred. Trying to load data from static data file"),$http.get(fallbackUri).success(function(data){scope[model]=data,defer.resolve(data)})}return defer.promise},_addMenuItem=function(menuName,menuURL){var menuObj={value:menuName,href:menuURL};navMenuScope[navMenuArray].menu.menuGroup.push(menuObj)},_loadCss=function(filename,filetype){var fileref=null;"js"===filetype?((fileref=document.createElement("script")).setAttribute("type","text/javascript"),fileref.setAttribute("src",filename)):"css"===filetype&&((fileref=document.createElement("link")).setAttribute("rel","stylesheet"),fileref.setAttribute("type","text/css"),fileref.setAttribute("href",filename)),void 0!==fileref&&document.getElementsByTagName("head")[0].appendChild(fileref)};return{call:function(scope,model,fallbackUri,serviceUri,callback){return _call(scope,model,fallbackUri,serviceUri,callback)},addMenuItem:function(menuName,menuURL){return _addMenuItem(menuName,menuURL)},loadjscssfile:function(filename,filetype){return _loadCss(filename,filetype)}}}]).service("ThinNative",["$window",function($window){this.check=function(){var i,c,ca=$window.document.cookie.split(";");for(i=0;i<ca.length;i++){for(c=ca[i];" "===c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf("accessDomain=")&&"native"===c.substring("accessDomain=".length,c.length))return!0}return!1}}]).directive("attHeader",["ThinNative","$window",function(ThinNative,$window){return{restrict:"A",transclude:!1,replace:!0,template:'<header class="navbar globalNav" ng-hide="hideHeader"><a id="logoHolder" aria-hidden="false" aria-label="A T and T home" aria-live="assertive"  href="http://m.att.com"><div role="img"><i class="cssIcon-globe">AT&amp;T Home</i></div></a><div id="menuIcon"><button aria-haspopup="true" id="iconMenu" class="toggleMenuMain iconMenu"><span class="hidden-spoken" id="iconMenuSpoken">Menu</span> <i></i></button><div style="height: 482px; display: none; width: 270px; position:absolute; right:-270px;" id="outerMMW" aria-expanded="false"><div id="menuMainSlider"><div class="menuWedge"></div><div role="navigation" id="menuWrapper"><ul><li class="grayMenuButton"><i class="fusion-sprite mgnav-myatt-logo"><span class="hidden-spoken">my A T and T</span></i><a class="fusion-logout btn" onClick = "location.href =\'#/logout\' " ng-if="checkLogin" style="float: right">Log Out</a><a class="fusion-logout btn" onClick = "location.href =\'/login\' " ng-if="!checkLogin" style="float: right">Log In</a></li><li class="grayMenuButton" ng-repeat="menuItem in mobileMenu.menu.menuGroup" ng-show="menuItem.value && menuItem.href"><a href="{{getMenuItemURLHostName(menuItem.href)}}{{menuItem.href}}" id="mg0myATT" name="menuItem">{{menuItem.value}} <i class="cssIcon-chevron-r-w"></i></a></li></li><li><ul class="grayListButtons"><li ng-if="(pivots.menuItem.length != 0)" ng-repeat="pivots in mobileMenu.menu.menuGroup"><ul><li ng-repeat="x in pivots.menuItem"><a ng-show="x.value && x.href" id="storesFindStoreLinkMenu" href="{{getMenuItemURLHostName(x.href)}}{{x.href}}">{{x.value}}<i class="cssIcon-chevron-r-w"></i></a></li></ul></li></ul><li class="grayMenuButton" ng-repeat="menuItem in mobileMenu.menu.menuGroup" ng-if="menuItem.id === \'more\'"><i class="att-globe"></i><a href="{{getMenuItemURLHostName(menuItem.href)}}{{menuItem.href}}" id="mg0myATT" name="menuItem">{{menuItem.value}} <i class="cssIcon-chevron-r-w"></i></a></ul></div></div></div></div><nav></nav></header>',controller:["$scope","GlobalNavService","ThinNative","$rootScope","GlobalNavConfig",function($scope,GlobalNavService,ThinNative,$rootScope,GlobalNavConfig){var globalNavUrl;ThinNative.check()?$scope.hideHeader=!0:(globalNavUrl=null==$rootScope.lang||"undefined"==$rootScope.lang||"es"!=$rootScope.lang&&"es_US"!=$rootScope.lang&&"es-US"!=$rootScope.lang?GlobalNavConfig.menuUri.english:GlobalNavConfig.menuUri.spanish,GlobalNavService.call($scope,"mobileMenu",GlobalNavConfig.menuUri.fallback,globalNavUrl,"menuBuilder"),GlobalNavService.loadjscssfile("//0.ecom.attccc.com/styles/att/assets3.2.0/css/mGlobalnav.css","css"),$rootScope.getMenuItemURLHostName=function(url,id){if(url)return"/"===(url=trim(url)).substring(0,1)&&"//"!==url.substring(0,2)?$scope.prependEcomLinkLocation:"more"===id?url+="?referer=myattWeb":url},$rootScope.setMenuItemURLHostName=function(){var hostname=GlobalNavConfig.menuHostName;return hostname=location.protocol+"//"+hostname},$scope.prependEcomLinkLocation=$rootScope.setMenuItemURLHostName())}],link:function(scope,element,attrs){function open(e){angular.element(outerMMW).css({display:"block"}),iconMenuSpoken.innerHTML="Menu open";var globalHeader1=globalHeader[0].style,globalHeaderCurr1=parseInt(globalHeader1.left,10);globalHeaderCurr1>=-240&&(globalHeader1.left=globalHeaderCurr1+-30+"px",setTimeout(open,10),clearTimeout(10)),angular.element(menuIcon).unbind("click"),angular.element(menuIcon).bind("click",close)}function close(e){angular.element(menuIcon).bind("click",open);outerMMW.style;iconMenuSpoken.innerHTML="Menu closed";var globalHeader2=globalHeader[0].style,globalHeaderCurr2=parseInt(globalHeader2.left,10);globalHeaderCurr2<0&&(globalHeader2.left=globalHeaderCurr2+30+"px",setTimeout(close,10)),globalHeaderCurr2>=0&&angular.element(outerMMW).css({display:"none"}),angular.element(menuIcon).unbind("click"),angular.element(menuIcon).bind("click",open)}scope.checkLogin=!1;var globalHeader=element.parent();globalHeader.css({position:"relative",left:"0px"});document.getElementById("menuWrapper");var menuIcon=document.getElementById("menuIcon"),iconMenuSpoken=(document.getElementById("iconMenu"),document.getElementById("iconMenuSpoken")),outerMMW=(document.getElementById("MenuWrapper"),document.getElementById("outerMMW"));document.getElementById("logoHolder");scope.getWindowDimensions=function(){return{h:document.body.scrollHeight}},scope.$watch(scope.getWindowDimensions,function(newValue,oldValue){scope.windowHeight=newValue.h},!0);var getBoolean=function(value){return!0===value||"true"===value};scope.checkLoginStatus=function(value){var isUserAuthenticated=value;return scope.checkLogin=!!isUserAuthenticated&&getBoolean(isUserAuthenticated),scope.checkLogin},scope.$watch(function(){return sessionStorage.getItem("isUserAuthenticated")},scope.checkLoginStatus),ThinNative.check()||globalHeader.css({"margin-left":"0px"}),angular.element(menuIcon).bind("click",open)}}}]).run(["$templateCache",function($templateCache){$templateCache.put("template/navigation/navigation.html",'<header class="navbar globalNav" ng-hide="hideHeader"><a id="logoHolder" href="http://m.att.com"><div class="cssIcon-globe"></div></a>\n    <div id="menuIcon">\n        <button aria-haspopup="true" id="iconMenu" class="toggleMenuMain iconMenu">\n            <span class="hidden-spoken" id="iconMenuSpoken">Menu</span> <i></i>\n        </button>\n        <div ng-style={height:windowHeight+\'px\'} style="display: none; width: 270px; position:absolute; right:-270px;" id="outerMMW" aria-expanded="false">\n            <div id="menuMainSlider">\n                <div class="menuWedge"></div>\n                <div style="height: 100%; overflow : hidden" role="navigation" id="menuWrapper">\n                    <ul>\n                        <li class="grayMenuButton"><i class="fusion-sprite mgnav-myatt-logo"><span class="hidden-spoken">my A T and T</span></i><a class="fusion-logout btn" href = "https://m.att.com/myatt/#/logout" ng-if="checkLogin" style="float: right">Log Out</a><a class="fusion-logout btn" href = "https://m.att.com/myatt/#/login" ng-if="!checkLogin" style="float: right">Log In</a></li>\n                        <li ng-repeat="menuItem in mobileMenu.menu.menuGroup" ng-class="{\'grayMenuButton\': menuItem.menuItem.length === 0}">\n                            <a ng-show="(menuItem.menuItem.length === 0)" href="{{getMenuItemURLHostName(menuItem.href)}}{{menuItem.href}}" id="mg0myATT" name="menuItem">{{menuItem.value}} <i class="cssIcon-chevron-r-w"></i></a>\n                            <ul ng-show="(menuItem.menuItem.length !== 0)" class="grayListButtons">\n                                <li ng-repeat="pivot in menuItem.menuItem"><a ng-show="pivot.value && pivot.href" id="storesFindStoreLinkMenu" href="{{getMenuItemURLHostName(pivot.href)}}{{pivot.href}}"><i ng-class="{\'fusion-att-globe\' : pivot.id === \'more\'}"></i>{{pivot.value}}<i class="cssIcon-chevron-r-w"></i></a></li>\n                            </ul>  \n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n    <nav></nav>\n</header>')}]);var thinNativeService=angular.module("att.core.navigation.native.service",[]);thinNativeService.service("ThinNative",function($window){this.check=function(){var i,c,ca=$window.document.cookie.split(";");for(i=0;i<ca.length;i++){for(c=ca[i];" "===c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf("accessDomain=")&&"native"===c.substring("accessDomain=".length,c.length))return!0}return!1}});var globalSearchModule=angular.module("att.core.navigation.search",["att.core.navigation.services","att.core.forms.ui","att.core.language.service"]);globalSearchModule.constant("ManageSearchUri",{remote:"https://m.att.com",pivotClass:{find:".grayTab",withoutPivot:"dividerBefore",withPivot:""},suggest:{url:"/searchservice/GlobalSearch_AutoSuggest/select?q=userQuery:[SEARCHTERM]&indent=true&fl=userQuery&wt=json&fq=data_source_name:%22Popular%20Search%20Terms%22&sort=lookupCount%20desc&rows=5&json.wrf=autoCompleteCallback",token:"[SEARCHTERM]",callback:"autoCompleteCallback"},search:{url:"/mobilesearch/search-results.html?m_search=[SEARCHTERM][SEARCHSOURCE]",token:{search:"[SEARCHTERM]",source:"[SEARCHSOURCE]"}},silo:""}),globalSearchModule.directive("attSearchBox",["$log","$timeout",function($log,$timeout){return{restrict:"A",require:"^attSearch",link:function(scope,elm,attrs,searchCtrl){elm.bind("focus",function(ev){$log.info(ev),searchCtrl.showPrevious()});var delay=function(){var timer=0;return function(callback,ms){$timeout.cancel(timer),timer=$timeout(callback,ms)}}();elm.bind("keyup",function(ev){$log.info(ev),delay(searchCtrl.autoSuggest,1e3)}),elm.bind("blur",function(ev){$log.info(ev),searchCtrl.closeSuggest()})}}}]),globalSearchModule.directive("attSearchWidget",["$log",function($log){return{restrict:"AC",require:"^attSearch",scope:!1,link:function(scope,elm,attrs,searchCtrl){elm.bind("click",function(ev){$log.info(ev),angular.element("html,body").animate({scrollTop:elm.offset().top},1e3),$log.info("should scroll to attSearchWidget")})}}}]),globalSearchModule.directive("attAriaActiveFocus",function(){return{restrict:"A",require:"^attSearch",scope:!1,link:function(scope,elm,attrs,searchCtrl){elm.bind("focus",function(ev){attrs.id&&searchCtrl.setActiveSuggestion(attrs.id)})}}}),globalSearchModule.directive("attSearch",["$log","$window","ManageSearchUri","Language",function($log,$window,ManageSearchUri,Language){return{restrict:"EA",transclude:!1,replace:!0,template:'<div ng-show="english()" att-section-content="SearchATT"><search class="sidemenu" ng-class="pivotClass"><a ng-click="search()" style="text-indent: -999em;overflow: hidden;display: inline-block;" class="searchClick" href="javascript:void(0)" att-link-content="TapToSearch"></a><div id="resultsSearch" class="searchWidget" att-search-widget style="background-color: #f2f2f2;"><form class="searchForm"  style="background-color: #f2f2f2;" id="subSearch"  ng-submit="search()" data-ajax="false"><div id="inp_wrap" style="overflow: hidden" class="ui-input-search ui-shadow-inset ui-btn-corner-all ui-btn-shadow ui-icon-searchfield ui-body-c ui-focus"><input title="search" role="combobox" ng-model="searchTerm" autocomplete="off" aria-autocomplete="list" aria-owns="predictionBucket" type="text" autocorrect="off" data-type="search" name="m_search" id="m_search" class="searchInput ui-input-text ui-body-c" placeholder="{{content.Common_Mobile_App_Elements.Sections.SearchATT.FieldLabel.SearchATT}}" att-reset att-search-box/></div><div class="autoSearchVat" style="display: none;"><ul id="predictionBucket" aria-expanded="{{suggesting}}" aria-hidden="{{!suggesting}}" aria-activedescendant="{{activeSuggestion}}" ng-show="suggesting" class="ui-listview ui-listview-inset ui-corner-all ui-shadow"><li ng-repeat="suggestion in suggestions" id="li{{$index}}" class="ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-corner-top ui-btn-up-c" att-aria-active-focus><div class="ui-btn-inner ui-li ui-corner-top"><div class="ui-btn-text"><a ng-click="search(suggestion)" data-ajax="false" class="ui-link-inherit">{{suggestion}}</a></div><span class="ui-icon ui-icon-arrow-r ui-icon-shadow"></span></div></li></ul></div></form></div></search></div>',controller:["$rootScope","$scope","$log","$window","GlobalNavService","ManageSearchUri","Language",function($rootScope,$scope,$log,$window,GlobalNavService,ManageSearchUri,Language){$scope.english=function(){return"es"!=Language.get()};var initialize=function(){$scope.suggestions=[],$scope.suggesting=!1,$scope.activeSuggestion="",openTray(!1)},openTray=function(down){var vat=angular.element(".autoSearchVat");down&&!self.trayDown&&vat.slideDown(250),!down&&self.trayDown&&vat.slideUp(250),self.trayDown=down},getPrevious=function(){try{null!==localStorage.getItem("prevSearches")?$scope.suggestions=localStorage.getItem("prevSearches").split("|"):$scope.suggestions=[],$scope.suggesting=$scope.suggestions.length>0,$scope.suggesting&&openTray(!0)}catch(e){$log.error(e)}},self=this;self.trayDown=!1,$scope.pivotClass="",initialize(),$scope.search=function(s_val){var searchTerm="",searchSilo="",searchSource="";searchTerm=s_val||$scope.searchTerm,angular.isDefined(searchSource)&&(searchSource="&autoSuggestInd=Y"),ManageSearchUri.silo.length>0&&(searchSilo="&searchSilo="+ManageSearchUri.silo),void 0!==searchTerm&&""!==searchTerm&&null!==searchTerm&&searchTerm.match(/#|%|\^|\*|\(|\)|\[|\]|\/|\\/g)&&(searchTerm=searchTerm.replace(/#|%|\^|\*|\(|\)|\[|\]|\/|\\/g,"")),void 0!==searchTerm&&""!==searchTerm&&null!==searchTerm?(searchTerm=searchTerm.replace("&","%26"),$window.location=ManageSearchUri.remote+ManageSearchUri.search.url.replace(ManageSearchUri.search.token.search,searchTerm).replace(ManageSearchUri.search.token.source,searchSource)+searchSilo):$window.alert("Please enter a search term.")},this.setActiveSuggestion=function(id){$scope.activeSuggestion=id},this.autoSuggest=function(){var url,currFormVal=angular.copy($scope.searchTerm);void 0!=currFormVal&&""!=currFormVal&&(currFormVal.match(/[^a-zA-Z0-9 ]/g)&&(currFormVal=currFormVal.replace(/[^a-zA-Z0-9 ]/g,"")),""!=currFormVal&&(url=ManageSearchUri.remote+ManageSearchUri.suggest.url.replace(ManageSearchUri.suggest.token,currFormVal.toLowerCase()),GlobalNavService.call($scope,"autoSuggest","data/autoSuggest.json",url,ManageSearchUri.suggest.callback).then(function(data){$scope.suggestions=[],angular.isDefined(data)&&angular.isDefined(data.response)&&angular.isDefined(data.response.docs)&&angular.forEach(data.response.docs,function(value,key){this.push(value.userQuery)},$scope.suggestions),$scope.suggesting=$scope.suggestions.length>0,$scope.suggesting&&openTray(!0)})))},this.showPrevious=function(){$scope.$apply(getPrevious)},this.closeSuggest=function(){initialize()},$scope.$watch("searchTerm",function(newval,oldval){newval!==oldval&&(void 0==newval||""==newval||void 0==newval&&""==newval&&0===newval.length)&&getPrevious()}),$rootScope.$on("$viewContentLoaded",function(){angular.element(ManageSearchUri.pivotClass.find)[0]?$scope.pivotClass=ManageSearchUri.pivotClass.withPivot:$scope.pivotClass=ManageSearchUri.pivotClass.withoutPivot})}]}}]);var globalNavServiceModule=angular.module("att.core.navigation.services",["ngResource"]);globalNavServiceModule.globalNav=function($window,$resource,$q,$log,$http){$log.log("Entering globaNav Constructor"),this.window=$window,this.log=$log,this.q=$q,this.http=$http},globalNavServiceModule.service("GlobalNavService",["$window","$resource","$q","$log","$http",globalNavServiceModule.globalNav]),globalNavServiceModule.globalNav.prototype.call=function(scope,model,fallbackUri,serviceUri,callback){var defer=this.q.defer();try{var callbackVal=callback+"_value";angular.isDefined(callback)&&(this.window[callback]=function(data){this.window[callbackVal]=data}),this.log.info("INFO :: httpWithFallbackService : Calling service "+serviceUri+". Trying to load data from REST service"),this.log.info("INFO :: httpWithFallbackService : Service URL is "+serviceUri),this.log.info("INFO :: httpWithFallbackService : Fallback URL is "+fallbackUri);var self=this;this.http.jsonp(serviceUri).success(function(data){scope[model]=data,defer.resolve(data)}).error(function(){self.window[callbackVal]?(scope[model]=self.window[callbackVal],defer.resolve(scope[model])):(self.log.info("WARN :: httpWithFallbackService : Error Occurred. Trying to load data from static data file"),self.http.get(fallbackUri).success(function(data){self.log.info("ERROR :: httpWithFallbackService : Success while calling fallback. Data is "+JSON.stringify(data)),scope[model]=data,defer.resolve(data)}).error(function(){self.log.info("ERROR :: httpWithFallbackService : Error Occurred Again in fallback. Dead End!!"),defer.reject("ERROR :: httpWithFallbackService : Error Occurred Again in fallback. Dead End!!")}))})}catch(e){this.log.info("ERROR :: httpWithFallbackService : Exception Occurred. Trying to load data from static data file"),this.http.get(fallbackUri).success(function(data){scope[model]=data,defer.resolve(data)})}return defer.promise};var globalNavModule=angular.module("att.core.navigation",["att.core.navigation.header","att.core.navigation.footer","att.core.navigation.search"]);