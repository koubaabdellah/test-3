(function(){"use strict";var n=window.app=angular.module("app",[])})(),function(){"use strict";app.filter("data",[function(){return function(n){var t="";return n==-1?t="Unlimited":n?(n=Math.round(n*10)/10,t=n+"GB"):t="--",t}}])}(),function(){"use strict";app.service("TrackingService",function(){this.trigger=function(){}})}(),function(){"use strict";var t=function(n){$.extend(this,{autoPayDiscount:5,autoPayEnabled:!0,data:0},n)},n;t.prototype.autoPayDiscountAmount=function(){return this.autoPayEnabled&&this.autoPayDiscount||0};n=function(n){$.extend(this,{active:!1,multiLineDiscount:0,plan:null},n)};n.prototype.totalBeforeDiscount=function(){return this.plan&&this.plan.price||0};n.prototype.multiLineDiscountAmount=function(){return this.multiLineDiscount||0};n.prototype.autoPayDiscountAmount=function(){return this.plan&&this.plan.autoPayDiscountAmount()};n.prototype.discountAmount=function(){return this.multiLineDiscountAmount()+this.autoPayDiscountAmount()};n.prototype.totalAfterDiscount=function(){return this.totalBeforeDiscount()-this.discountAmount()};app.service("CalculatorService",["$rootScope","TrackingService",function(i,r){var u=this,f=function(){return _.filter(u.lines,function(n){return n.active})},e=function(){_.forEach(u.plans,function(n){n.autoPayEnabled=u.autoPayEnabled})};u.plans=[new t({price:30}),new t({price:35,data:1}),new t({price:45,data:6}),new t({price:50,data:8,autoPayDiscount:10}),new t({price:65,data:-1,autoPayDiscount:10}),new t({price:85,data:-1,autoPayDiscount:10})];u.lines=[new n,new n({multiLineDiscount:10}),new n({multiLineDiscount:10}),new n({multiLineDiscount:20}),new n({multiLineDiscount:20})];u.autoPayEnabled=!0;u.defaultPlan=u.plans[3];u.minimumNumberOfLines=2;u.numberOfLines=0;u.toggleAutoPay=function(){u.autoPayEnabled=!u.autoPayEnabled;e();r.trigger("Change AutoPay",u.autoPayEnabled?"On":"Off")};u.addLine=function(){if(u.numberOfLines<u.lines.length){var n=u.lines[u.numberOfLines];return n.plan=u.defaultPlan,n.active=!0,u.numberOfLines+=1,r.trigger("Add line",u.numberOfLines+""),!0}};u.removeLine=function(){if(u.numberOfLines>u.minimumNumberOfLines){var n=u.lines[u.numberOfLines-1];return n.active=!1,n.plan=null,u.numberOfLines-=1,r.trigger("Remove line","-"),!0}};u.updateLine=function(n,t){n.plan=t;r.trigger("Change line price",(t&&t.price||0)+"")};u.totalBeforeDiscount=function(){var n=_.map(f(),function(n){return n.totalBeforeDiscount()});return _.reduce(n,function(n,t){return n+t},0)};u.discountAmount=function(){var n=_.map(f(),function(n){return n.discountAmount()});return _.reduce(n,function(n,t){return n+t},0)};u.totalAfterDiscount=function(){var n=_.map(f(),function(n){return n.totalAfterDiscount()});return _.reduce(n,function(n,t){return n+t},0)};u.annualSavings=function(){return u.discountAmount()*12};u.initialize=function(){while(u.numberOfLines<u.minimumNumberOfLines)u.addLine()};u.reset=function(){for(_.forEach(u.lines,function(n){n.plan=u.defaultPlan}),u.autoPayEnabled=!0,e();u.numberOfLines>u.minimumNumberOfLines;)u.removeLine();r.trigger("Reset","-");i.$broadcast("reset")}}])}(),function(){"use strict";app.controller("CalculatorController",["$rootScope","$scope","CalculatorService",function(n,t,i){var r=$("#dom-change-notification"),u=function(n,t){r.html("");window.setTimeout(function(){r.html('<span role="alert">'+n+"<\/span>");$(t).focus();window.setTimeout(function(){r.html("")},1e3)},25)};t.totalBeforeDiscount=i.totalBeforeDiscount;t.discountAmount=i.discountAmount;t.totalAfterDiscount=i.totalAfterDiscount;t.annualSavings=i.annualSavings;t.addLine=function(){i.addLine()&&(t.numberOfLines=i.numberOfLines,u("Line added","#remove-line"))};t.removeLine=function(){i.removeLine()&&(t.numberOfLines=i.numberOfLines,u("Line removed","#add-line"))};t.updateAutoPay=function(){i.toggleAutoPay()};angular.element(document).ready(function(){i.initialize();t.autoPayEnabled=i.autoPayEnabled;t.numberOfLines=i.numberOfLines;t.plans=i.plans;t.lines=i.lines;t.$apply()});n.$on("reset",function(){t.autoPayEnabled=i.autoPayEnabled;t.numberOfLines=i.numberOfLines})}])}();