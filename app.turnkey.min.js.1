(function(){"use strict";window.app=angular.module("app",[])})(),function(){"use strict";app.value("settings",{minimumNumberOfLines:2,maximumNumberOfLines:5,lines:[{multiLineDiscount:0},{multiLineDiscount:10},{multiLineDiscount:10},{multiLineDiscount:20},{multiLineDiscount:20}],plans:[{name:"2GB",data:1,price:35,autoPayDiscount:5,unlimitedTalk:!1},{name:"8GB",data:8,price:50},{name:"Unlimited",data:-1,price:65,autoPayDiscount:10,stream:480,hotspot:!1,autoPayPromotionPricing:!1},{name:"Unlimited Plus",data:-1,price:75,autoPayDiscount:25,autoPayPromotionPricing:!0}],defaultPlan:"Unlimited Plus"})}(),function(){"use strict";window.app.filter("data",function(){return function(n){var t="";return n===-1?t="Unlimited":n?(n=Math.round(n*10)/10,t=n+"GB"):t="--",t}})}(),function(){"use strict";app.service("TrackingService",function(){this.trigger=function(){}})}(),function(){"use strict";var t=function(n){$.extend(this,{autoPayDiscount:10,autoPayEnabled:!0,data:0,unlimitedTalk:!0,stream:1080,hotspot:!0,autoPayPromotionPricing:!1},n)},n;t.prototype.hasAutoPayPromotionPricing=function(){return this.autoPayEnabled&&this.autoPayPromotionPricing};t.prototype.autoPayDiscountAmount=function(){return this.autoPayEnabled&&this.autoPayDiscount||0};n=function(n){$.extend(this,{active:!1,multiLineDiscount:0,plan:null},n)};n.prototype.totalBeforeDiscount=function(){return this.plan&&this.plan.price||0};n.prototype.multiLineDiscountAmount=function(){return this.multiLineDiscount||0};n.prototype.autoPayDiscountAmount=function(){return this.plan&&this.plan.autoPayDiscountAmount()};n.prototype.discountAmount=function(){return this.multiLineDiscountAmount()+this.autoPayDiscountAmount()};n.prototype.totalAfterDiscount=function(){return this.totalBeforeDiscount()-this.discountAmount()};app.service("CalculatorService",["$rootScope","settings","TrackingService",function(i,r,u){var f=this,e=function(){return _.filter(f.lines,function(n){return n.active})},s=function(){_.forEach(f.plans,function(n){n.autoPayEnabled=f.autoPayEnabled})},o=function(n,t){return n+t};f.plans=_.map(r.plans,function(n){return new t(n)});f.lines=_.map(r.lines,function(t){return new n(t)});f.autoPayEnabled=!0;f.defaultPlan=_.find(f.plans,function(n){return n.name===r.defaultPlan});f.minimumNumberOfLines=r.minimumNumberOfLines;f.maximumNumberOfLines=r.maximumNumberOfLines;f.numberOfLines=0;f.toggleAutoPay=function(){f.autoPayEnabled=!f.autoPayEnabled;s();u.trigger("Change AutoPay",f.autoPayEnabled?"On":"Off")};f.addLine=function(){if(f.numberOfLines<f.lines.length){var n=f.lines[f.numberOfLines];return n.plan=f.defaultPlan,n.active=!0,f.numberOfLines+=1,u.trigger("Add line",f.numberOfLines+""),!0}};f.removeLine=function(){if(f.numberOfLines>f.minimumNumberOfLines){var n=f.lines[f.numberOfLines-1];return n.active=!1,n.plan=null,n.showDetails=!1,f.numberOfLines-=1,u.trigger("Remove line","-"),!0}};f.updateLine=function(n,t){n.plan=t;u.trigger("Change line price",(t&&t.price||0)+"")};f.totalBeforeDiscount=function(){var n=_.map(e(),function(n){return n.totalBeforeDiscount()});return _.reduce(n,o,0)};f.discountAmount=function(){var n=_.map(e(),function(n){return n.discountAmount()});return _.reduce(n,o,0)};f.totalAfterDiscount=function(){var n=_.map(e(),function(n){return n.totalAfterDiscount()});return _.reduce(n,o,0)};f.totalMultiLineDiscount=function(){var n=_.map(e(),function(n){return n.multiLineDiscountAmount()});return _.reduce(n,o,0)};f.totalAutoPayDiscount=function(){var n=_.map(e(),function(n){return n.autoPayDiscountAmount()});return _.reduce(n,o,0)};f.initialize=function(){while(f.numberOfLines<f.minimumNumberOfLines)f.addLine()};f.reset=function(){for(_.forEach(f.lines,function(n){n.plan=f.defaultPlan}),f.autoPayEnabled=!0,s();f.numberOfLines>f.minimumNumberOfLines;)f.removeLine();u.trigger("Reset","-");i.$broadcast("reset")}}])}(),function(){"use strict";app.controller("CalculatorController",["$rootScope","$scope","CalculatorService",function(n,t,i){var u=$("#dom-change-notification"),e=$("#calculator"),r=e.offset().top,o=$(window),s=function(n){u.html("");window.setTimeout(function(){u.html('<span role="alert">'+n+"<\/span>");window.setTimeout(function(){u.html("")},1e3)},25)},f=function(){var n=o.height(),u=o.scrollTop(),t=e.height(),i;(r<u||r>u+n-t)&&(i=r,t>n&&(i=r+t-n),$("html, body").animate({scrollTop:i},1e3))};t.minimumNumberOfLines=i.minimumNumberOfLines;t.maximumNumberOfLines=i.maximumNumberOfLines;t.totalBeforeDiscount=i.totalBeforeDiscount;t.discountAmount=i.discountAmount;t.totalAfterDiscount=i.totalAfterDiscount;t.totalMultiLineDiscount=i.totalMultiLineDiscount;t.totalAutoPayDiscount=i.totalAutoPayDiscount;t.activeLines=function(){return _.filter(i.lines,{active:!0})};t.setNumberOfLines=function(n){for(n=Math.min(Math.max(n,i.minimumNumberOfLines),i.maximumNumberOfLines);n!==t.numberOfLines;)n<t.numberOfLines?t.removeLine():t.addLine();document.activeElement.blur()};t.addLine=function(n,r){if(i.addLine()){var u=t.numberOfLines=i.numberOfLines;s("Line added");n&&window.setTimeout(function(){f()},0);r&&window.setTimeout(function(){document.querySelector(".line-items > :nth-child("+u+") select").focus()},10)}};t.removeLine=function(n,r){i.removeLine()&&(t.numberOfLines=i.numberOfLines,s("Line removed"),n&&window.setTimeout(f,0),r&&window.setTimeout(function(){document.querySelector(".line-items > :last-child select").focus()},10))};t.autoPayEnabled=function(){return i.autoPayEnabled};t.toggleAutoPay=function(){i.toggleAutoPay();t.autoPayEnabled=i.autoPayEnabled};t.reset=function(){i.reset();window.setTimeout(f,0)};angular.element(document).ready(function(){i.initialize();t.autoPayEnabled=i.autoPayEnabled;t.numberOfLines=i.numberOfLines;t.plans=i.plans;t.lines=i.lines;t.$apply()});angular.element(document).scroll(function(){var n=document.getElementById("calculator-header");n.className=document.body.parentElement.scrollTop>=n.offsetTop?"calc-head text-center stuck":"calc-head text-center"});n.$on("reset",function(){t.autoPayEnabled=i.autoPayEnabled;t.numberOfLines=i.numberOfLines})}])}();